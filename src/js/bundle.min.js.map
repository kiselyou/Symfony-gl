{"version":3,"sources":["bundle.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","default","_interopRequireWildcard","_interopRequireDefault","controls","console","log","./system/Lock","three","2","_classCallCheck","instance","Constructor","TypeError","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","_socket2","Lock","this","connect","location","hostname","PORT","NAMESPACE","on","EVENT_CHECK_STATUS","data","get","socket.io-client","3","noop","count","callback","err_cb","proxy","err","result","bail","4","arraybuffer","start","end","bytes","byteLength","slice","ArrayBuffer","abv","Uint8Array","ii","buffer","5","Backoff","opts","ms","min","max","factor","jitter","attempts","duration","Math","pow","rand","random","deviation","floor","reset","setMin","setMax","setJitter","6","chars","lookup","charCodeAt","encode","len","base64","substring","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","p","7","global","mapArrayBufferViews","ary","chunk","buf","copy","set","byteOffset","BlobBuilderConstructor","options","bb","BlobBuilder","append","getBlob","type","BlobConstructor","Blob","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","size","blobSupportsArrayBufferView","blobBuilderSupported","self","window","8","9","fn","args","arguments","apply","concat","10","Emitter","mixin","addEventListener","event","_callbacks","push","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","listeners","hasListeners","11","b","constructor","12","process","load","storage","debug","env","DEBUG","Function","formatArgs","useColors","namespace","humanize","diff","c","color","index","lastC","replace","match","save","namespaces","removeItem","document","documentElement","style","WebkitAppearance","firebug","exception","table","navigator","userAgent","toLowerCase","parseInt","RegExp","$1","chrome","local","localStorage","localstorage","colors","formatters","j","v","JSON","stringify","message","enable","./debug","_process","13","selectColor","hash","abs","createDebug","enabled","curr","Date","prevTime","prev","Array","coerce","unshift","format","formatter","val","bind","init","stack","disable","names","skips","split","substr","name","test","14","./lib/index","15","parser","./socket","engine.io-parser","16","Socket","uri","parseuri","host","secure","protocol","port","query","agent","parseqs","upgrade","path","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transports","transportOptions","readyState","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","undefined","forceNode","freeGlobal","extraHeaders","keys","localAddress","id","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","open","clone","parsejson","priorWebsocketSuccess","Transport","createTransport","EIO","transport","sid","socket","requestTimeout","protocols","indexOf","setTimeout","shift","setTransport","onDrain","packet","onPacket","onError","onClose","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","failed","send","msg","upgrading","pause","cleanup","flush","freezeTransport","close","onerror","error","onTransportClose","onclose","onupgrade","to","onOpen","onHandshake","setPing","filterUpgrades","onHeartbeat","timeout","clearTimeout","ping","sendPacket","write","compress","cleanupAndClose","waitForUpgrade","reason","desc","filteredUpgrades","./transport","./transports/index","component-emitter","indexof","17","description","doOpen","doClose","packets","onData","decodePacket","18","XMLHttpRequest","XHR","JSONP","websocket","polling","xd","xs","isSSL","xdomain","xscheme","./polling-jsonp","./polling-xhr","./websocket","xmlhttprequest-ssl","19","empty","JSONPPolling","Polling","___eio","script","inherit","rNewline","rEscapedNewline","parentNode","removeChild","form","iframe","doPoll","createElement","async","src","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","doWrite","complete","initIframe","html","iframeId","area","className","position","top","left","method","setAttribute","action","submit","attachEvent","onreadystatechange","onload","./polling","component-inherit","20","Request","isBinary","create","unloadHandler","requests","abort","request","req","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","withCredentials","hasXDR","onLoad","responseText","contentType","getResponseHeader","responseType","status","requestsCount","onSuccess","fromError","response","XDomainRequest","21","hasXHR2","yeast","poll","onPause","total","decodePayload","callbackfn","encodePayload","schema","b64","Number","../transport","22","WS","usingBrowserWebSocket","BrowserWebSocket","WebSocket","NodeWebSocket","MozWebSocket","check","headers","ws","supports","binary","addEventListeners","onopen","onmessage","ev","done","encodePacket","Buffer","23","hasCORS","join","has-cors","24","encodeBase64Object","encodeArrayBuffer","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","FileReader","readAsArrayBuffer","encodeBlob","dontSendBlobs","tryDecode","utf8","strict","map","each","next","after","el","eachWithIndex","base64encoder","hasBinary","sliceBuffer","isAndroid","isPhantomJS","pong","packetslist","utf8encode","encoded","String","readAsDataURL","b64data","fromCharCode","typed","basic","btoa","utf8decode","charAt","decodeBase64Packet","rest","setLengthHeader","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","results","decodePayloadAsBinary","chr","encodedPackets","totalLength","reduce","acc","toString","resultArray","bufferIndex","forEach","isString","ab","view","lenStr","binaryIdentifier","lengthAry","blob","bufferTail","buffers","tailArray","msgLength","./keys","./utf8","arraybuffer.slice","base64-arraybuffer","has-binary2","25","arr","has","26","root","ucs2decode","string","extra","output","counter","ucs2encode","array","stringFromCharCode","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","freeExports","freeModule","version","codePoints","byteString","tmp","define","amd","nodeType","27","isArray","isBuffer","withNativeBlob","withNativeFile","File","toJSON","isarray","28","29","30","31","parse","str","exec","parseFloat","y","d","h","m","fmtShort","round","fmtLong","plural","ceil","isNaN","long","32","rvalidchars","rvalidescape","rvalidtokens","rvalidbraces","rtrimLeft","rtrimRight","33","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","34","re","parts","source","authority","ipv6uri","35","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","run","Item","nextTick","title","browser","argv","versions","addListener","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","36","io","parsed","url","sameNamespace","cache","nsps","forceNew","multiplex","Manager","managers","./manager","./url","socket.io-parser","37","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","connecting","lastPing","encoding","packetBuffer","_parser","encoder","Encoder","decoder","Decoder","autoConnect","eio","emitAll","nsp","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","reconnect","skipReconnect","openSub","errorSub","timer","destroy","onping","onpong","ondata","add","ondecoded","onConnecting","processPacketQueue","pack","subsLength","disconnect","delay","onreconnect","attempt","./on","backo2","component-bind","engine.io-client","38","39","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","toArray","events","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","subEvents","EVENT","flags","pop","CONNECT","onpacket","onconnect","BINARY_EVENT","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","to-array","40","loc","href","41","_deconstructPacket","isBuf","placeholder","_placeholder","num","newData","_reconstructPacket","deconstructPacket","packetData","attachments","reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","./is-buffer","42","encodeAsString","encodeAsBinary","deconstruction","reconstructor","decodeString","types","tryParse","BinaryReconstructor","reconPack","hasBin","takeBinaryData","finishedReconstruction","binData","./binary","43","44","dup","45","factory","THREE","EventDispatcher","Vector2","x","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","anisotropy","textureId","uuid","_Math","generateUUID","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","ClampToEdgeWrapping","LinearFilter","LinearMipMapLinearFilter","RGBAFormat","UnsignedByteType","offset","repeat","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","LinearEncoding","onUpdate","Vector4","z","w","WebGLRenderTarget","width","height","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","WebGLRenderTargetCube","activeCubeFace","activeMipMapLevel","Quaternion","_x","_y","_z","_w","Vector3","Matrix4","elements","DataTexture","NearestFilter","CubeTexture","images","CubeReflectionMapping","UniformContainer","seq","flatten","nBlocks","blockSize","firstElem","arrayCacheF32","Float32Array","allocTexUnits","renderer","arrayCacheI32","Int32Array","allocTextureUnit","setValue1f","gl","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2fv","uniform2f","setValue3fv","uniform3f","g","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","mat3array","setValue4fm","uniformMatrix4fv","mat4array","setValueT1","unit","setTexture2D","emptyTexture","setValueT6","setTextureCube","emptyCubeTexture","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","getSingularSetter","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","units","setValueT6a","getPureArraySetter","SingleUniform","activeInfo","setValue","PureArrayUniform","StructuredUniform","addUniform","container","uniformObject","parseUniform","pathLength","RePathPart","lastIndex","matchEnd","idIsIndex","subscript","WebGLUniforms","program","getProgramParameter","ACTIVE_UNIFORMS","info","getActiveUniform","getUniformLocation","Color","setRGB","Box2","LensFlarePlugin","flares","vertices","faces","Uint16Array","vertexBuffer","createBuffer","elementBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","tempTexture","createTexture","occlusionTexture","state","bindTexture","TEXTURE_2D","texImage2D","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","RGBA","shader","vertexShader","fragmentShader","createProgram","attributes","vertex","getAttribLocation","uv","uniforms","renderType","occlusionMap","opacity","scale","rotation","screenPosition","createShader","FRAGMENT_SHADER","VERTEX_SHADER","prefix","getPrecision","shaderSource","compileShader","attachShader","linkProgram","context","render","scene","camera","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","validArea","useProgram","initAttributes","enableAttribute","disableUnusedAttributes","vertexAttribPointer","FLOAT","CULL_FACE","depth","setMask","flare","matrixWorld","applyMatrix4","matrixWorldInverse","projectionMatrix","containsPoint","activeTexture","TEXTURE0","TEXTURE1","copyTexImage2D","BLEND","DEPTH_TEST","drawElements","TRIANGLES","UNSIGNED_SHORT","positionScreen","customUpdateCallback","updateLensFlares","jl","lensFlares","sprite","setBlending","blending","blendEquation","blendSrc","blendDst","resetGLState","SpritePlugin","sprites","uvOffset","uvScale","modelViewMatrix","fogType","fogDensity","fogNear","fogFar","fogColor","alphaTest","canvas","createElementNS","getContext","fillStyle","fillRect","needsUpdate","painterSortStable","renderOrder","spritePosition","spriteRotation","spriteScale","oldFogType","sceneFogType","fog","isFog","near","far","isFogExp2","density","multiplyMatrices","sort","material","visible","onBeforeRender","decompose","blendEquationAlpha","blendSrcAlpha","blendDstAlpha","premultipliedAlpha","setTest","depthTest","depthWrite","onAfterRender","Material","materialId","lights","NormalBlending","side","FrontSide","shading","SmoothShading","vertexColors","NoColors","transparent","SrcAlphaFactor","OneMinusSrcAlphaFactor","AddEquation","depthFunc","LessEqualDepth","clippingPlanes","clipIntersection","clipShadows","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","overdraw","ShaderMaterial","parameters","defines","linewidth","wireframe","wireframeLinewidth","clipping","skinning","morphTargets","morphNormals","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","uv2","index0AttributeName","setValues","MeshDepthMaterial","depthPacking","BasicDepthPacking","alphaMap","displacementMap","displacementScale","displacementBias","Box3","Sphere","center","radius","Matrix3","Plane","normal","constant","Frustum","p0","p1","p2","p3","p4","p5","planes","WebGLShadowMap","_renderer","_lights","_objects","capabilities","getDepthMaterial","object","isPointLight","lightPositionWorld","geometry","materialVariants","_depthMaterials","customMaterial","customDepthMaterial","_distanceMaterials","customDistanceMaterial","useMorphing","isBufferGeometry","morphAttributes","isGeometry","isSkinnedMesh","warn","useSkinning","variantIndex","_MorphingFlag","_SkinningFlag","localClippingEnabled","keyA","keyB","materialsForVariant","_materialCache","cachedMaterial","scope","renderSingleSided","DoubleSide","renderReverseSided","BackSide","lightPos","renderObject","shadowCamera","layers","isMesh","isLine","isPoints","castShadow","frustumCulled","_frustum","intersectsObject","update","groups","k","kl","group","groupMaterial","materialIndex","depthMaterial","_lightPositionWorld","renderBufferDirect","children","_gl","_state","_projScreenMatrix","_lightShadows","shadows","_shadowMapSize","_maxShadowMapSize","maxTextureSize","_lookTarget","_NumberOfMaterialVariants","cubeDirections","cubeUps","cube2DViewPorts","depthMaterialTemplate","RGBADepthPacking","distanceShader","ShaderLib","distanceUniforms","UniformsUtils","distanceMaterial","USE_SHADOWMAP","autoUpdate","PCFShadowMap","setClear","setScissorTest","faceCount","il","light","shadow","mapSize","vpWidth","vpHeight","pars","updateProjectionMatrix","isSpotLightShadow","shadowMap","shadowMatrix","matrix","setFromMatrixPosition","makeTranslation","lookAt","updateMatrixWorld","multiply","setRenderTarget","clear","face","up","vpDimensions","setFromMatrix","clearColor","getClearColor","clearAlpha","getClearAlpha","setClearColor","WebGLAttributes","attribute","bufferType","usage","dynamic","DYNAMIC_DRAW","onUploadCallback","Float64Array","Int16Array","SHORT","Uint32Array","UNSIGNED_INT","INT","Int8Array","BYTE","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","updateRange","bufferSubData","subarray","isInterleavedBufferAttribute","remove","deleteBuffer","Euler","order","_order","DefaultOrder","Layers","mask","Object3D","object3DId","parent","DefaultUp","quaternion","onChange","setFromEuler","setFromQuaternion","normalMatrix","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","receiveShadow","userData","Camera","OrthographicCamera","right","bottom","zoom","PerspectiveCamera","fov","aspect","focus","filmGauge","filmOffset","Face3","isVector3","vertexNormals","isColor","GeometryIdCount","Geometry","faceVertexUvs","skinWeights","skinIndices","lineDistances","boundingBox","boundingSphere","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","BufferAttribute","itemSize","normalized","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","DirectGeometry","indices","normals","uvs","uvs2","arrayMax","BufferGeometry","drawRange","BoxGeometry","widthSegments","heightSegments","depthSegments","fromBufferGeometry","BoxBufferGeometry","mergeVertices","buildPlane","udir","vdir","gridX","gridY","ix","iy","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","vector","numberOfVertices","addGroup","groupStart","setIndex","addAttribute","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","MeshBasicMaterial","lightMap","lightMapIntensity","aoMap","aoMapIntensity","specularMap","envMap","combine","MultiplyOperation","reflectivity","refractionRatio","wireframeLinecap","wireframeLinejoin","Ray","origin","direction","Line3","Triangle","Mesh","drawMode","TrianglesDrawMode","updateMorphTargets","WebGLBackground","objects","alpha","planeCamera","planeMesh","boxCamera","boxMesh","setClearAlpha","forceClear","background","autoClear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","cube","extractRotation","getInverse","isTexture","reversePainterSortStable","WebGLRenderList","opaque","opaqueLastIndex","transparentLastIndex","renderItem","finish","WebGLRenderLists","lists","list","dispose","WebGLIndexedBufferRenderer","infoRender","mode","setMode","calls","renderInstances","extension","drawElementsInstancedANGLE","maxInstancedCount","WebGLBufferRenderer","drawArrays","drawArraysInstancedANGLE","WebGLGeometries","infoMemory","onGeometryDispose","buffergeometry","geometries","wireframeAttributes","_bufferGeometry","setFromObject","geometryAttributes","getWireframeAttribute","geometryIndex","WebGLLights","shadowBias","shadowRadius","shadowMapSize","distance","coneCos","penumbraCos","decay","skyColor","groundColor","halfWidth","halfHeight","WebGLObjects","updateList","frame","updateFromObject","addLineNumbers","lines","WebGLShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","getEncodingComponents","sRGBEncoding","RGBEEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","GammaEncoding","getTexelDecodingFunction","functionName","components","getTexelEncodingFunction","getToneMappingFunction","toneMapping","toneMappingName","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","generateExtensions","rendererExtensions","envMapCubeUV","bumpMap","normalMap","flatShading","logarithmicDepthBuffer","filter","filterEmptyLine","generateDefines","chunks","fetchAttributeLocations","identifiers","ACTIVE_ATTRIBUTES","getActiveAttrib","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","parseIncludes","pattern","include","ShaderChunk","unrollLoops","snippet","unroll","WebGLProgram","shadowMapTypeDefine","shadowMapType","PCFSoftShadowMap","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","CubeRefractionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","MixOperation","AddOperation","prefixVertex","prefixFragment","gammaFactorDefine","gammaFactor","customExtensions","customDefines","isRawShaderMaterial","supportsVertexTextures","maxBones","useFog","fogExp","emissiveMap","roughnessMap","metalnessMap","useVertexTexture","doubleSided","flipSided","numClippingPlanes","shadowMapEnabled","sizeAttenuation","gradientMap","numClipIntersection","physicallyCorrectLights","NoToneMapping","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","isShaderMaterial","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","bindAttribLocation","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","deleteShader","cachedUniforms","getUniforms","cachedAttributes","getAttributes","deleteProgram","programIdCount","usedTimes","WebGLPrograms","allocateBones","bones","skeleton","floatVertexTextures","nVertexUniforms","maxVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","gammaOverrideLinear","isWebGLRenderTarget","programs","shaderIDs","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","parameterNames","getParameters","nClipPlanes","nClipIntersection","shaderID","getMaxPrecision","currentRenderTarget","getRenderTarget","vertexTextures","gammaOutput","gammaInput","envMapMode","FlatShading","maxMorphTargets","maxMorphNormals","directional","point","spot","rectArea","hemi","getProgramCode","onBeforeCompile","acquireProgram","pl","programInfo","releaseProgram","WebGLTextures","properties","paramThreeToGL","clampToMaxSize","maxSize","drawImage","isPowerOfTwo","makePowerOfTwo","HTMLImageElement","HTMLCanvasElement","nearestPowerOfTwo","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","filterFallback","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LINEAR","onTextureDispose","deallocateTexture","textures","onRenderTargetDispose","renderTarget","deallocateRenderTarget","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","renderTargetProperties","isWebGLRenderTargetCube","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","slot","__version","uploadTexture","setTextureParameters","textureType","isPowerOfTwoImage","FloatType","HalfFloatType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","glFormat","glType","mipmap","isDepthTexture","internalFormat","DEPTH_COMPONENT","_isWebGL2","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DepthFormat","UnsignedShortType","UnsignedIntType","DepthStencilFormat","DEPTH_STENCIL","UnsignedInt248Type","isDataTexture","isCompressedTexture","RGBFormat","getCompressedTextureFormats","compressedTexImage2D","generateMipmap","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","setupDepthTexture","webglDepthTexture","setupDepthRenderbuffer","isCube","createRenderbuffer","WebGL2RenderingContext","TEXTURE_CUBE_MAP","isCompressed","cubeImage","maxCubemapSize","TEXTURE_CUBE_MAP_POSITIVE_X","setTextureCubeDynamic","setupRenderTarget","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","updateRenderTargetMipmap","webglTexture","WebGLProperties","WebGLState","NoBlending","CustomBlending","currentBlending","currentPremultipledAlpha","AdditiveBlending","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","SubtractiveBlending","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","MultiplyBlending","SRC_COLOR","currentBlendEquation","currentBlendEquationAlpha","currentBlendSrc","currentBlendDst","currentBlendSrcAlpha","currentBlendDstAlpha","setFlipSided","currentFlipSided","frontFace","CW","CCW","setCullFace","cullFace","CullFaceNone","currentCullFace","CullFaceBack","BACK","CullFaceFront","FRONT","FRONT_AND_BACK","setPolygonOffset","POLYGON_OFFSET_FILL","currentPolygonOffsetFactor","currentPolygonOffsetUnits","webglSlot","maxTextures","currentTextureSlot","colorBuffer","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","equals","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","NeverDepth","NEVER","AlwaysDepth","ALWAYS","LessDepth","LESS","LEQUAL","EqualDepth","EQUAL","GreaterEqualDepth","GEQUAL","GreaterDepth","GREATER","NotEqualDepth","NOTEQUAL","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","maxVertexAttributes","getParameter","MAX_VERTEX_ATTRIBS","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentLineWidth","currentScissorTest","MAX_COMBINED_TEXTURE_IMAGE_UNITS","VERSION","lineWidthAvailable","currentBoundTextures","currentScissor","currentViewport","emptyTextures","enableVertexAttribArray","vertexAttribDivisorANGLE","enableAttributeAndDivisor","meshPerAttribute","disableVertexAttribArray","formats","COMPRESSED_TEXTURE_FORMATS","setMaterial","setLineWidth","lineWidth","getScissorTest","SCISSOR_TEST","webglType","boundTexture","WebGLCapabilities","getShaderPrecisionFormat","HIGH_FLOAT","MEDIUM_FLOAT","maxAnisotropy","maxPrecision","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","floatFragmentTextures","MAX_TEXTURE_MAX_ANISOTROPY_EXT","ArrayCamera","cameras","WebVRManager","device","frameData","VRFrameData","standingMatrix","standingMatrixInverse","cameraL","bounds","cameraR","cameraVR","currentSize","currentPixelRatio","isPresenting","eyeParameters","getEyeParameters","renderWidth","renderHeight","getPixelRatio","getSize","setDrawingBufferSize","standing","getDevice","setDevice","getCamera","depthNear","depthFar","getFrameData","pose","fromArray","orientation","stageParameters","sittingToStandingTransform","leftViewMatrix","rightViewMatrix","leftProjectionMatrix","rightProjectionMatrix","getLayers","layer","leftBounds","rightBounds","getStandingMatrix","submitFrame","WebGLExtensions","getExtension","WebGLClipping","resetGlobalState","uniform","globalState","numGlobalPlanes","numPlanes","numIntersection","projectPlanes","dstOffset","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","viewNormalMatrix","getNormalMatrix","i4","plane","renderingShadows","enableLocalClipping","beginShadows","endShadows","setState","fromCache","nGlobal","lGlobal","clippingState","WebGLRenderer","getTargetPixelRatio","_currentRenderTarget","_pixelRatio","setDefaultGLState","_currentScissor","_scissor","multiplyScalar","_currentViewport","_viewport","_currentProgram","_currentCamera","_currentGeometryProgram","_currentMaterialId","onContextLost","preventDefault","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","programCache","renderObjectImmediate","_this","renderBufferImmediate","absNumericalSort","setupVertexAttributes","startIndex","isInstancedBufferGeometry","programAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","projectObject","sortObjects","isLight","isSprite","intersectsSprite","isLensFlare","isImmediateRenderObject","_vector3","currentRenderList","renderObjects","renderList","overrideMaterial","isArrayCamera","_currentArrayCamera","camera2","_width","_height","setViewport","setScissor","setProgram","initMaterial","materialProperties","_clipping","programChange","numSupportedMorphTargets","numSupportedMorphNormals","lightsHash","ambientLightColor","ambient","directionalLights","spotLights","rectAreaLights","pointLights","hemisphereLights","directionalShadowMap","directionalShadowMatrix","spotShadowMap","spotShadowMatrix","pointShadowMap","pointShadowMatrix","progUniforms","uniformsList","seqWithValue","_usedTextureUnits","_clippingEnabled","_localClippingEnabled","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","LN2","isMeshPhongMaterial","isMeshStandardMaterial","uCamPos","cameraPosition","isMeshLambertMaterial","isMeshBasicMaterial","setOptional","boneTexture","sqrt","nextPowerOfTwo","boneMatrices","boneTextureSize","toneMappingExposure","toneMappingWhitePoint","markUniformsLightsNeedsUpdate","refreshUniformsFog","isMeshNormalMaterial","isMeshDepthMaterial","refreshUniformsCommon","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","refreshUniformsNormal","ltcMat","UniformsLib","LTC_MAT_TEXTURE","ltcMag","LTC_MAG_TEXTURE","upload","diffuse","emissive","emissiveIntensity","uvScaleMap","offsetRepeat","flipEnvMap","dashSize","totalSize","gapSize","specular","shininess","bumpScale","normalScale","roughness","metalness","envMapIntensity","clearCoat","clearCoatRoughness","setupShadows","lightShadowsLength","setupLights","ll","intensity","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","isAmbientLight","isDirectionalLight","lightCache","sub","transformDirection","bias","isSpotLight","cos","angle","penumbra","isRectAreaLight","_matrix42","identity","_matrix4","premultiply","isHemisphereLight","normalize","RepeatWrapping","REPEAT","MirroredRepeatWrapping","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LinearMipMapNearestFilter","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UnsignedShort4444Type","UNSIGNED_SHORT_4_4_4_4","UnsignedShort5551Type","UNSIGNED_SHORT_5_5_5_1","UnsignedShort565Type","UNSIGNED_SHORT_5_6_5","ByteType","ShortType","IntType","HALF_FLOAT_OES","AlphaFormat","ALPHA","LuminanceFormat","LUMINANCE","LuminanceAlphaFormat","LUMINANCE_ALPHA","SubtractEquation","FUNC_SUBTRACT","ReverseSubtractEquation","FUNC_REVERSE_SUBTRACT","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","DstAlphaFactor","DST_ALPHA","OneMinusDstAlphaFactor","ONE_MINUS_DST_ALPHA","DstColorFactor","DST_COLOR","OneMinusDstColorFactor","ONE_MINUS_DST_COLOR","SrcAlphaSaturateFactor","SRC_ALPHA_SATURATE","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","RGB_ETC1_Format","COMPRESSED_RGB_ETC1_WEBGL","MinEquation","MaxEquation","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","REVISION","_canvas","_context","_alpha","_depth","_stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","morphInfluences","domElement","_currentFramebuffer","_currentScissorTest","_scissorTest","_infoMemory","_infoRender","points","memory","contextAttributes","rangeMin","rangeMax","MaxIndex","renderLists","vr","bufferRenderer","indexedBufferRenderer","spritePlugin","lensFlarePlugin","getContextAttributes","forceContextLoss","loseContext","setPixelRatio","setSize","updateStyle","getDrawingBufferSize","pixelRatio","boolean","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","nx","ny","nz","uvArray","colorArray","geometryProgram","updateBuffers","morphTargetInfluences","activeInfluences","influence","removeAttribute","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","LINES","TriangleStripDrawMode","TRIANGLE_STRIP","TriangleFanDrawMode","TRIANGLE_FAN","isLineSegments","isLineLoop","LINE_LOOP","LINE_STRIP","POINTS","compile","traverse","animate","onFrame","requestAnimationFrame","isCamera","opaqueObjects","transparentObjects","setFaceCulling","frontFaceDirection","FrontFaceDirectionCW","textureUnit","warned","setTexture","readRenderTargetPixels","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","FogExp2","Fog","Scene","LensFlare","SpriteMaterial","Sprite","LOD","levels","Skeleton","boneInverses","calculateInverses","Bone","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","initBones","normalizeSkinWeights","linecap","linejoin","Line","LineSegments","LineLoop","Points","Group","VideoTexture","video","HAVE_CURRENT_DATA","CompressedTexture","CanvasTexture","DepthTexture","WireframeGeometry","ol","edge1","edge2","edge","edges","index1","index2","getX","fromBufferAttribute","ParametricGeometry","func","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","subVectors","crossVectors","PolyhedronGeometry","detail","PolyhedronBufferGeometry","subdivideFace","cols","aj","lerp","bj","rows","pushVertex","correctSeam","uvBuffer","x0","x1","x2","getVertexByIndex","correctUVs","centroid","uvA","uvB","uvC","divideScalar","azi","azimuth","correctUV","PI","atan2","inclination","subdivide","appplyRadius","generateUVs","computeVertexNormals","normalizeNormals","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","tubularSegments","radialSegments","closed","taper","bufferGeometry","TubeBufferGeometry","tangents","binormals","generateSegment","P","getPointAt","N","frames","B","sin","generateIndices","computeFrenetFrames","generateBufferData","TorusKnotGeometry","tube","q","heightScale","TorusKnotBufferGeometry","calculatePositionOnCurve","cu","su","quOverP","cs","P1","P2","T","addVectors","cx","cy","TorusGeometry","arc","TorusBufferGeometry","ExtrudeGeometry","shapes","ExtrudeBufferGeometry","addShapeList","TextGeometry","text","TextBufferGeometry","font","isFont","generateShapes","curveSegments","amount","bevelThickness","bevelSize","bevelEnabled","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","RingBufferGeometry","segment","radiusStep","thetaSegmentLevel","LatheGeometry","segments","LatheBufferGeometry","clamp","base","inverseSegments","phi","n1","n2","ShapeGeometry","ShapeBufferGeometry","addShape","shape","shapeHole","indexOffset","extractPoints","shapeVertices","shapeHoles","holes","ShapeUtils","isClockWise","reverse","triangulateShape","EdgesGeometry","thresholdAngle","geometry2","thresholdDot","DEG2RAD","computeFaceNormals","sourceVertices","face1","face2","dot","CylinderGeometry","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","generateCap","centerIndexStart","centerIndexEnd","sign","theta","cosTheta","sinTheta","indexArray","slope","indexRow","generateTorso","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","ShadowMaterial","merge","RawShaderMaterial","STANDARD","PHYSICAL","TOON","LoadingManager","onProgress","isLoading","itemsLoaded","itemsTotal","onStart","itemStart","itemEnd","itemError","FileLoader","manager","DefaultLoadingManager","CompressedTextureLoader","DataTextureLoader","ImageLoader","CubeTextureLoader","TextureLoader","Light","HemisphereLight","updateMatrix","LightShadow","SpotLightShadow","SpotLight","power","PointLight","DirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","valueSize","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","LinearInterpolant","DiscreteInterpolant","KeyframeTrackConstructor","times","values","interpolation","AnimationUtils","convertArray","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","validate","optimize","VectorKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","NumberKeyframeTrack","StringKeyframeTrack","BooleanKeyframeTrack","ColorKeyframeTrack","KeyframeTrack","AnimationClip","tracks","resetDuration","MaterialLoader","BufferGeometryLoader","Loader","onLoadStart","onLoadProgress","onLoadComplete","JSONLoader","ObjectLoader","texturePath","CatmullRom","v0","v1","t2","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","Curve","arcLengthDivisions","LineCurve","v2","CurvePath","curves","autoClose","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","SplineCurve","CubicBezierCurve","v3","QuadraticBezierCurve","Path","currentPoint","fromPoints","Shape","ShapePath","subPaths","currentPath","Font","FontLoader","AudioLoader","StereoCamera","eyeSep","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","updateCubeMap","AudioListener","AudioContext","gain","createGain","destination","Audio","listener","getInput","autoplay","loop","startTime","playbackRate","isPlaying","hasPlaybackControl","sourceType","filters","PositionalAudio","panner","createPanner","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getOutput","PropertyMixer","typeName","mixFunction","_slerp","_select","_lerp","_mixBufferRegion","cumulativeWeight","useCount","referenceCount","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","rootNode","node","findNode","nodeName","AnimationObjectGroup","var_args","nCachedObjects_","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","inUse","bindingsPerObject","AnimationAction","mixer","clip","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","endingStart","ZeroCurvatureEnding","endingEnd","interpolant","createInterpolant","settings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","LoopRepeat","_loopCount","_startTime","time","timeScale","_effectiveTimeScale","weight","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","AnimationMixer","_root","_initMemoryManager","_accuIndex","Uniform","InstancedBufferGeometry","InterleavedBufferAttribute","interleavedBuffer","InterleavedBuffer","InstancedInterleavedBuffer","InstancedBufferAttribute","Raycaster","ray","params","PointCloud","ascSort","intersectObject","raycaster","intersects","recursive","raycast","Clock","autoStart","oldTime","elapsedTime","running","Spherical","Cylindrical","MorphBlendMesh","animationsMap","animationsList","numFrames","endFrame","fps","createAnimation","setAnimationWeight","ImmediateRenderObject","renderCallback","VertexNormalsHelper","hex","nNormals","objGeometry","positions","SpotLightHelper","cone","getBoneList","boneList","isBone","SkeletonHelper","color1","color2","bone","VertexColors","PointLightHelper","sphereSize","RectAreaLightHelper","HemisphereLightHelper","rotateY","getAttribute","GridHelper","divisions","step","halfSize","PolarGridHelper","radials","circles","FaceNormalsHelper","DirectionalLightHelper","CameraHelper","addLine","addPoint","pointMap","FaceColors","colorFrustum","colorCone","colorUp","colorTarget","colorCross","BoxHelper","ArrowHelper","headLength","headWidth","lineGeometry","coneGeometry","translate","line","setDirection","setLength","AxisHelper","CubicPoly","t0","t1","c0","c1","c2","c3","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","CatmullRomCurve3","CubicBezierCurve3","QuadraticBezierCurve3","LineCurve3","ArcCurve","aRadius","ClosedSplineCurve3","SplineCurve3","Spline","EPSILON","isInteger","isFinite","assign","nextKey","_listeners","hasEventListener","listenerArray","dispatchEvent","MOUSE","LEFT","MIDDLE","RIGHT","RGBEFormat","RAD2DEG","rnd","euclideanModulo","mapLinear","a1","a2","b1","b2","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isVector2","setScalar","scalar","setX","setY","setComponent","getComponent","addScalar","addScaledVector","subScalar","divide","clampScalar","minVal","maxVal","clampLength","roundToZero","negate","lengthSq","lengthManhattan","distanceTo","distanceToSquared","dx","dy","distanceToManhattan","lerpVectors","getY","rotateAround","meta","metadata","generator","wrap","toDataURL","getDataURL","transformUv","isVector4","setZ","setW","setAxisAngleFromQuaternion","acos","setAxisAngleFromRotationMatrix","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","slerp","qa","qb","qm","slerpFlat","dst","src0","srcOffset0","src1","srcOffset1","y0","z0","w0","y1","z1","w1","sqrSin","tDir","onChangeCallback","euler","isEuler","s1","s2","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","setFromUnitVectors","vFrom","vTo","inverse","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","applyMatrix3","qx","qy","qz","qw","iz","iw","project","unproject","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","angleTo","dz","setFromSpherical","sinPhiRadius","setFromCylindrical","setFromMatrixScale","sx","setFromMatrixColumn","sy","sz","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","y2","z2","wx","wy","wz","eye","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","applyToBufferAttribute","setXYZ","determinant","transpose","setPosition","throwOnDegenerate","t11","t12","t13","t14","det","detInv","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","makeShear","compose","invSX","invSY","invSZ","makePerspective","makeOrthographic","ColorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","setHex","setStyle","setHSL","hue2rgb","handleAlpha","copyGammaToLinear","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","optionalTarget","hue","saturation","hsl","lightness","delta","getStyle","offsetHSL","addColors","common","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","merged","uniforms_src","uniforms_dst","parameter_src","isMatrix3","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_template","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_flip","normal_fragment","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","lambert","phong","standard","dashed","tCube","tFlip","equirect","tEquirect","distanceRGBA","physical","setFromPoints","makeEmpty","expandByPoint","setFromCenterAndSize","box","isEmpty","getCenter","expandByVector","expandByScalar","containsBox","intersectsBox","clampPoint","distanceToPoint","intersect","union","isMaterial","newValue","currentValue","extractFromCache","isRoot","srcPlanes","dstPlanes","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","expandByObject","intersectsSphere","closestPoint","sphere","intersectsPlane","getBoundingSphere","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","getBoundingBox","setFromMatrix4","matrix4","transposeIntoArray","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","intersectLine","denominator","intersectsLine","startSign","endSign","coplanarPoint","m1","optionalNormalMatrix","referencePoint","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","computeBoundingSphere","negRadius","d1","d2","RotationOrders","asin","setFromVector3","reorder","newOrder","toVector3","optionalResult","channel","toggle","isObject3D","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","q1","rotateX","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","getObjectById","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","force","serialize","library","element","isRootObject","materials","uuids","child","isOrthographicCamera","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","zoomW","zoomH","scaleW","scaleH","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","skew","computeBoundingBox","addFace","tempNormals","tempUVs","tempUVs2","fl","vA","vB","vC","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","verticesMap","unique","changes","faceIndicesToRemove","idx","sortFacesByMaterialIndex","_id","newUvs1","newUvs2","setBit","getNormalIndex","normalsHash","getColorIndex","colorsHash","getUvIndex","uvsHash","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","uvsCopy","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","isBufferAttribute","setArray","setDynamic","copyAt","copyArray","copyColorsArray","copyIndicesArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","computeGroups","fromGeometry","morphTargetsPosition","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","getIndex","clearGroups","setDrawRange","direct","__directGeometry","lineDistance","fromDirectGeometry","pA","pB","pC","attributeArray1","attribute2","attributeArray2","toNonIndexed","array2","morphAttribute","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","invDet","intersectSphere","tca","radius2","thc","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","distanceSq","closestPointToPointParameter","startP","startEnd","clampToLine","startEnd2","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","midpoint","edgeList","projectedPoint","minDistance","setDrawMode","ml","morphTargetDictionary","uvIntersection","uv1","uv3","barycoord","checkIntersection","intersectionPointWorld","checkBufferGeometryIntersection","intersection","intersectionPoint","faceIndex","inverseMatrix","tempA","tempB","tempC","fvA","fvB","fvC","isMultiMaterial","faceMaterial","tl","targets","uvs_f","vecX","vecY","wantedRotation","isSpriteMaterial","intersectPoint","worldPosition","worldScale","guessSizeSq","level","addLevel","getObjectForDistance","matrixPosition","offsetMatrix","identityMatrix","gbone","pos","rotq","scl","sw","vec","skinWeight","linePrecision","precisionSq","vStart","vEnd","interSegment","interRay","distSq","nbVertices","testPoint","rayPointDistanceSq","localThresholdSq","distanceToRay","localThreshold","contour","triangulate","snip","verts","px","py","bX","bY","cX","cY","apx","apy","bpx","bpy","cpx","cpy","cCROSSap","bCROSScp","aCROSSbp","vertIndices","nv","removeDupEndPts","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","allPointsMap","allpoints","hl","shapeWithoutHoles","hole","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","indepHoles","failedCuts","minShapeIndex","h2","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","isCutLineInsideAngles","inShapePt","inHolePt","sIdx","nextIdx","intersectsShapeEdge","ihIdx","chkHole","hIdx","intersectsHoleEdge","removeHoles","triangles","pts","getArrays","positionAttribute","verticesArray","uvAttribute","IndexAttribute","sl","arrays","scalePt2","pt","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","sidewalls","layeroffset","steps","bevelSegments","slen1","vlen","slen2","f4","f3","addVertex","nextIndex","uvgen","generateTopUV","addUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","indicesArray","vector2","extrudePts","splineTube","binormal","position2","extrudePath","extrudeByPath","UVGenerator","WorldUVGenerator","getSpacedPoints","ahole","shapePoints","bs","vert","flen","contourMovements","oneHoleMovements","holesMovements","verticesMovements","buildLidFaces","extrudeMaterial","buildSideFaces","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","Geometries","freeze","isShadowMaterial","Materials","Cache","files","file","cached","dataUriRegex","dataUriRegexResult","mimeType","isBase64","atob","DOMParser","parseFromString","overrideMimeType","header","requestHeader","setPath","setResponseType","setWithCredentials","setMimeType","loader","loaded","texDatas","mipmapCount","loadTexture","isCubemap","texData","crossOrigin","setCrossOrigin","urls","isJPEG","search","arraySlice","from","isTypedArray","forceClone","isView","DataView","getKeyframeOrder","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","DefaultSettings_","getSettings_","copySampleValue_","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","offset1","offset0","weight1","weight0","KeyframeTrackPrototype","InterpolantFactoryMethodDiscrete","getValueSize","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","ValueTypeName","getInterpolation","timeOffset","trim","endTime","nKeys","valid","currTime","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","trackType","_getTrackTypeForValueTypeName","track","jsonTracks","frameTime","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","animationMorphTargets","clips","parseAnimation","animation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","setTextures","getTexture","typedArray","TYPED_ARRAYS","drawcalls","offsets","Handlers","handlers","regex","extractUrlBase","initMaterials","createMaterial","BlendingMode","textureLoader","materialLoader","fullPath","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapEmissiveRepeat","mapEmissiveOffset","mapEmissiveWrap","mapEmissiveAnisotropy","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapMetalnessRepeat","mapMetalnessOffset","mapMetalnessWrap","mapMetalnessAnisotropy","mapRoughnessRepeat","mapRoughnessOffset","mapRoughnessWrap","mapRoughnessAnisotropy","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","setTexturePath","parseModel","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","hasMaterial","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","parseMorphing","dstVertices","srcVertices","morphColors","parseAnimations","outputAnimations","morphAnimationClips","lastIndexOf","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","geometryLoader","bufferGeometryLoader","loadImage","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","UVMapping","getPoint","getUtoTmapping","getPoints","getLength","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","getTangent","pt1","getTangentAt","mat","MAX_VALUE","tz","isLineCurve","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","segmentLength","lens","cacheLengths","sums","resolution","isEllipseCurve","isSplineCurve","createPointsGeometry","createGeometry","createSpacedPointsGeometry","twoPi","deltaAngle","samePoints","intPoint","point0","point1","point2","point3","PathPrototype","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","absarc","absellipse","ellipse","firstPoint","lastPoint","getPointsHoles","holesPts","extractAllPoints","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","solid","holesFirst","tmpPoints","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sLen","sho","ho","hole_unassigned","s2Idx","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","isPointInsidePolygon","froms","tos","tmpHoles","createPath","glyph","glyphs","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","outline","_cachedOutline","ha","paths","line_height","yMax","yMin","underlineThickness","char","ret","createPaths","webkitAudioContext","setContext","decodeAudioData","audioBuffer","eyeRight","eyeLeft","xmin","xmax","eyeSepOnProjection","ymax","removeFilter","getFilter","setFilter","getMasterVolume","setMasterVolume","positionX","setValueAtTime","currentTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","setNodeSource","audioNode","setBuffer","play","createBufferSource","onended","onEnded","stop","getFilters","setFilters","setPlaybackRate","getPlaybackRate","getLoop","setLoop","getVolume","setVolume","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","maxDistance","setMaxDistance","getFrequencyData","getByteFrequencyData","getAverageFrequency","accumulate","accuIndex","currentWeight","mix","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","firstValidIndex","bindings","unbind","isAnimationObjectGroup","sanitizeNodeName","directoryRe","nodeRe","objectRe","propertyRe","trackRe","supportedObjectNames","matches","objectName","objectIndex","propertyIndex","lastDot","searchSkeleton","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","resolvedProperty","SetterByBindingTypeAndVersioning","targetObject","dest","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","nObjects","nCachedObjects","indicesByUUID","parsedPaths","nBindings","knownObject","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","startTimeScale","endTimeScale","now","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_update","deltaTime","timeDirection","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","interpolantValue","loopCount","_setEndings","handle_stop","pingPong","loopDelta","pending","atStart","atEnd","weightNow","weightThen","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","remove_empty_map","_","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","isInterleavedBuffer","setFromCamera","coords","intersectObjects","performance","getElapsedTime","getDelta","newTime","other","makeSafe","vec3","lastFrame","currentFrame","active","directionBackwards","mirroredLoop","autoCreateAnimations","firstAnimation","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","playAnimation","stopAnimation","keyframe","objPos","objNorm","coneLength","coneWidth","boneMatrix","matrixWorldInv","hx","hy","lightPlane","targetLine","setPoint","setColor","pz","SceneUtils","createMultiMaterialObject","detach","attach","construct","initFromArray","getControlPointsArray","reparametrizeByArcLength","samplingCoef","setColors","isIntersectionBox","isIntersectionSphere","random16","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBuffer","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","extrude","makeGeometry","fromAttribute","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","getChildByName","renderDepth","eulerOrder","useQuaternion","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraNear","shadowCameraFar","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","addIndex","addDrawCall","clearDrawCalls","computeOffsets","wrapAround","wrapRGB","metal","getCurrentRenderTarget","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","shadowMapCullFace","getData","GeometryUtils","geometry1","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","CullFaceFrontBack","FrontFaceDirectionCCW","BasicShadowMap","LoopOnce","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroSlopeEnding","WrapAroundEnding","LogLuvEncoding","CubeGeometry","Face4","LineStrip","LinePieces","MeshFaceMaterial","MultiMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","DynamicBufferAttribute","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","BoundingBoxHelper","EdgesHelper","WireframeHelper","XHRLoader","BinaryTextureLoader","Projector","projectVector","unprojectVector","pickingRay","CanvasRenderer","46","47","alphabet","seed","decoded"],"mappings":"CAAA,SAAUA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,IAAIS,YAAYb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAkD,IAAI,IAA1CL,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAAvb,EAA4ba,GAAG,SAAST,EAAQU,EAAOJ,GACvd,cAYA,SAAiCK,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAc,IAAIE,KAAa,GAAW,MAAPF,EAAe,IAAK,IAAIG,KAAOH,EAAWI,OAAOC,UAAUC,eAAeV,KAAKI,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,IAAUD,EAAOK,QAAUP,EAR1OQ,CAFCnB,EAAQ,WAYV,IAJX,SAAgCW,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,GAAQO,QAASP,GAF1ES,CAFDpB,EAAQ,kBAQEkB,UACjBG,WAELC,QAAQC,IAAI,KAAM,qBAEfC,gBAAgB,EAAEC,MAAQ,KAAKC,GAAG,SAAS1B,EAAQU,EAAOJ,GAC7D,aAcA,SAASqB,EAAgBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAZhHf,OAAOgB,eAAezB,EAAS,cAC3B0B,OAAO,IAGX,IAAIC,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAInC,EAAI,EAAGA,EAAImC,EAAM5B,OAAQP,IAAK,CAAE,IAAIoC,EAAaD,EAAMnC,GAAIoC,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMzB,OAAOgB,eAAeI,EAAQE,EAAWvB,IAAKuB,IAAiB,OAAO,SAAUR,EAAaY,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBL,EAAYb,UAAWyB,GAAiBC,GAAaR,EAAiBL,EAAaa,GAAqBb,GAA7gB,GAIfc,EAEJ,SAAgChC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,GAAQO,QAASP,GAFxES,CAFDpB,EAAQ,qBAQlB4C,EAAO,WAKP,SAASA,IACLjB,EAAgBkB,KAAMD,GAsD1B,OA7CAX,EAAaW,IACT9B,IAAK,WAOLkB,MAAO,WACUW,EAASzB,QAAQ4B,QAAQC,SAASC,SAAW,IAAMJ,EAAKK,KAAOL,EAAKM,WAE1EC,GAAGP,EAAKQ,mBAAoB,SAAUC,GAEzC/B,QAAQC,IAAI8B,EAAM,kBAI1BvC,IAAK,YACLwC,IAAK,WACD,MAAO,WASXxC,IAAK,OACLwC,IAAK,WACD,OAAO,OASXxC,IAAK,qBACLwC,IAAK,WACD,MAAO,YAIRV,EA5DA,GA+DXtC,EAAQY,QAAU0B,IAEfW,mBAAmB,KAAKC,GAAG,SAASxD,EAAQU,EAAOJ,GA4BtD,SAASmD,KA3BT/C,EAAOJ,QAEP,SAAeoD,EAAOC,EAAUC,GAO5B,SAASC,EAAMC,EAAKC,GAChB,GAAIF,EAAMH,OAAS,EACf,MAAM,IAAIvD,MAAM,iCAElB0D,EAAMH,MAGJI,GACAE,GAAO,EACPL,EAASG,GAETH,EAAWC,GACY,IAAhBC,EAAMH,OAAgBM,GAC7BL,EAAS,KAAMI,GAnBvB,IAAIC,GAAO,EAIX,OAHAJ,EAASA,GAAUH,EACnBI,EAAMH,MAAQA,EAEI,IAAVA,EAAeC,IAAaE,QAsBlCI,GAAG,SAASjE,EAAQU,EAAOJ,GAQjCI,EAAOJ,QAAU,SAAS4D,EAAaC,EAAOC,GAC5C,IAAIC,EAAQH,EAAYI,WAIxB,GAHAH,EAAQA,GAAS,EACjBC,EAAMA,GAAOC,EAETH,EAAYK,MAAS,OAAOL,EAAYK,MAAMJ,EAAOC,GAMzD,GAJID,EAAQ,IAAKA,GAASE,GACtBD,EAAM,IAAKA,GAAOC,GAClBD,EAAMC,IAASD,EAAMC,GAErBF,GAASE,GAASF,GAASC,GAAiB,IAAVC,EACpC,OAAO,IAAIG,YAAY,GAKzB,IAAK,IAFDC,EAAM,IAAIC,WAAWR,GACrBH,EAAS,IAAIW,WAAWN,EAAMD,GACzBlE,EAAIkE,EAAOQ,EAAK,EAAG1E,EAAImE,EAAKnE,IAAK0E,IACxCZ,EAAOY,GAAMF,EAAIxE,GAEnB,OAAO8D,EAAOa,aAGVC,GAAG,SAAS7E,EAAQU,EAAOJ,GAoBjC,SAASwE,EAAQC,GACfA,EAAOA,MACPlC,KAAKmC,GAAKD,EAAKE,KAAO,IACtBpC,KAAKqC,IAAMH,EAAKG,KAAO,IACvBrC,KAAKsC,OAASJ,EAAKI,QAAU,EAC7BtC,KAAKuC,OAASL,EAAKK,OAAS,GAAKL,EAAKK,QAAU,EAAIL,EAAKK,OAAS,EAClEvC,KAAKwC,SAAW,EApBlB3E,EAAOJ,QAAUwE,EA8BjBA,EAAQ9D,UAAUsE,SAAW,WAC3B,IAAIN,EAAKnC,KAAKmC,GAAKO,KAAKC,IAAI3C,KAAKsC,OAAQtC,KAAKwC,YAC9C,GAAIxC,KAAKuC,OAAQ,CACf,IAAIK,EAAQF,KAAKG,SACbC,EAAYJ,KAAKK,MAAMH,EAAO5C,KAAKuC,OAASJ,GAChDA,EAAoC,IAAN,EAAxBO,KAAKK,MAAa,GAAPH,IAAwBT,EAAKW,EAAYX,EAAKW,EAEjE,OAAgC,EAAzBJ,KAAKN,IAAID,EAAInC,KAAKqC,MAS3BJ,EAAQ9D,UAAU6E,MAAQ,WACxBhD,KAAKwC,SAAW,GASlBP,EAAQ9D,UAAU8E,OAAS,SAASb,GAClCpC,KAAKmC,GAAKC,GASZH,EAAQ9D,UAAU+E,OAAS,SAASb,GAClCrC,KAAKqC,IAAMA,GASbJ,EAAQ9D,UAAUgF,UAAY,SAASZ,GACrCvC,KAAKuC,OAASA,QAIVa,GAAG,SAASjG,EAAQU,EAAOJ,IAQjC,WACE,aAMA,IAAK,IAJD4F,EAAQ,mEAGRC,EAAS,IAAIzB,WAAW,KACnBzE,EAAI,EAAGA,EAAIiG,EAAM1F,OAAQP,IAChCkG,EAAOD,EAAME,WAAWnG,IAAMA,EAGhCK,EAAQ+F,OAAS,SAASnC,GACxB,IACAjE,EADIoE,EAAQ,IAAIK,WAAWR,GACxBoC,EAAMjC,EAAM7D,OAAQ+F,EAAS,GAEhC,IAAKtG,EAAI,EAAGA,EAAIqG,EAAKrG,GAAG,EACtBsG,GAAUL,EAAM7B,EAAMpE,IAAM,GAC5BsG,GAAUL,GAAmB,EAAX7B,EAAMpE,KAAW,EAAMoE,EAAMpE,EAAI,IAAM,GACzDsG,GAAUL,GAAuB,GAAf7B,EAAMpE,EAAI,KAAY,EAAMoE,EAAMpE,EAAI,IAAM,GAC9DsG,GAAUL,EAAqB,GAAf7B,EAAMpE,EAAI,IAS5B,OANKqG,EAAM,GAAO,EAChBC,EAASA,EAAOC,UAAU,EAAGD,EAAO/F,OAAS,GAAK,IACzC8F,EAAM,GAAM,IACrBC,EAASA,EAAOC,UAAU,EAAGD,EAAO/F,OAAS,GAAK,MAG7C+F,GAGTjG,EAAQmG,OAAU,SAASF,GACzB,IACqBtG,EACrByG,EAAUC,EAAUC,EAAUC,EAF1BC,EAA+B,IAAhBP,EAAO/F,OAC1B8F,EAAMC,EAAO/F,OAAWuG,EAAI,EAGM,MAA9BR,EAAOA,EAAO/F,OAAS,KACzBsG,IACkC,MAA9BP,EAAOA,EAAO/F,OAAS,IACzBsG,KAIJ,IAAI5C,EAAc,IAAIM,YAAYsC,GAClCzC,EAAQ,IAAIK,WAAWR,GAEvB,IAAKjE,EAAI,EAAGA,EAAIqG,EAAKrG,GAAG,EACtByG,EAAWP,EAAOI,EAAOH,WAAWnG,IACpC0G,EAAWR,EAAOI,EAAOH,WAAWnG,EAAE,IACtC2G,EAAWT,EAAOI,EAAOH,WAAWnG,EAAE,IACtC4G,EAAWV,EAAOI,EAAOH,WAAWnG,EAAE,IAEtCoE,EAAM0C,KAAQL,GAAY,EAAMC,GAAY,EAC5CtC,EAAM0C,MAAoB,GAAXJ,IAAkB,EAAMC,GAAY,EACnDvC,EAAM0C,MAAoB,EAAXH,IAAiB,EAAiB,GAAXC,EAGxC,OAAO3C,GAzDX,QA6DM8C,GAAG,SAAShH,EAAQU,EAAOJ,IACjC,SAAW2G,GAmDX,SAASC,EAAoBC,GAC3B,IAAK,IAAIlH,EAAI,EAAGA,EAAIkH,EAAI3G,OAAQP,IAAK,CACnC,IAAImH,EAAQD,EAAIlH,GAChB,GAAImH,EAAMxC,kBAAkBJ,YAAa,CACvC,IAAI6C,EAAMD,EAAMxC,OAIhB,GAAIwC,EAAM9C,aAAe+C,EAAI/C,WAAY,CACvC,IAAIgD,EAAO,IAAI5C,WAAW0C,EAAM9C,YAChCgD,EAAKC,IAAI,IAAI7C,WAAW2C,EAAKD,EAAMI,WAAYJ,EAAM9C,aACrD+C,EAAMC,EAAK1C,OAGbuC,EAAIlH,GAAKoH,IAKf,SAASI,EAAuBN,EAAKO,GACnCA,EAAUA,MAEV,IAAIC,EAAK,IAAIC,EACbV,EAAoBC,GAEpB,IAAK,IAAIlH,EAAI,EAAGA,EAAIkH,EAAI3G,OAAQP,IAC9B0H,EAAGE,OAAOV,EAAIlH,IAGhB,OAAQyH,EAAY,KAAIC,EAAGG,QAAQJ,EAAQK,MAAQJ,EAAGG,UAGxD,SAASE,EAAgBb,EAAKO,GAE5B,OADAR,EAAoBC,GACb,IAAIc,KAAKd,EAAKO,OAhFvB,IAAIE,EAAcX,EAAOW,aACpBX,EAAOiB,mBACPjB,EAAOkB,eACPlB,EAAOmB,eAMRC,EAAgB,WAClB,IAEE,OAAkB,IADV,IAAIJ,MAAM,OACTK,KACT,MAAM9I,GACN,OAAO,GALS,GAchB+I,EAA8BF,GAAiB,WACjD,IAEE,OAAkB,IADV,IAAIJ,MAAM,IAAIvD,YAAY,EAAE,MAC3B4D,KACT,MAAM9I,GACN,OAAO,GALwC,GAa/CgJ,EAAuBZ,GACtBA,EAAY5G,UAAU6G,QACtBD,EAAY5G,UAAU8G,QA6C3BpH,EAAOJ,QACD+H,EACKE,EAA8BtB,EAAOgB,KAAOD,EAC1CQ,EACFf,OAEP,IAIDlH,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,gBACrHC,GAAG,SAAS3I,EAAQU,EAAOJ,SAE3BsI,GAAG,SAAS5I,EAAQU,EAAOJ,GAKjC,IAAIiE,KAAWA,MAWf7D,EAAOJ,QAAU,SAASK,EAAKkI,GAE7B,GADI,iBAAmBA,IAAIA,EAAKlI,EAAIkI,IAChC,mBAAqBA,EAAI,MAAM,IAAI1I,MAAM,8BAC7C,IAAI2I,EAAOvE,EAAMhE,KAAKwI,UAAW,GACjC,OAAO,WACL,OAAOF,EAAGG,MAAMrI,EAAKmI,EAAKG,OAAO1E,EAAMhE,KAAKwI,oBAI1CG,IAAI,SAASlJ,EAAQU,EAAOJ,GAgBlC,SAAS6I,EAAQxI,GACf,GAAIA,EAAK,OAAOyI,EAAMzI,GAWxB,SAASyI,EAAMzI,GACb,IAAK,IAAIG,KAAOqI,EAAQnI,UACtBL,EAAIG,GAAOqI,EAAQnI,UAAUF,GAE/B,OAAOH,OA1Ba,IAAXD,IACTA,EAAOJ,QAAU6I,GAqCnBA,EAAQnI,UAAUmC,GAClBgG,EAAQnI,UAAUqI,iBAAmB,SAASC,EAAOT,GAInD,OAHAhG,KAAK0G,WAAa1G,KAAK0G,gBACtB1G,KAAK0G,WAAW,IAAMD,GAASzG,KAAK0G,WAAW,IAAMD,QACnDE,KAAKX,GACDhG,MAaTsG,EAAQnI,UAAUyI,KAAO,SAASH,EAAOT,GACvC,SAAS1F,IACPN,KAAK6G,IAAIJ,EAAOnG,GAChB0F,EAAGG,MAAMnG,KAAMkG,WAKjB,OAFA5F,EAAG0F,GAAKA,EACRhG,KAAKM,GAAGmG,EAAOnG,GACRN,MAaTsG,EAAQnI,UAAU0I,IAClBP,EAAQnI,UAAU2I,eAClBR,EAAQnI,UAAU4I,mBAClBT,EAAQnI,UAAU6I,oBAAsB,SAASP,EAAOT,GAItD,GAHAhG,KAAK0G,WAAa1G,KAAK0G,eAGnB,GAAKR,UAAUvI,OAEjB,OADAqC,KAAK0G,cACE1G,KAIT,IAAIiH,EAAYjH,KAAK0G,WAAW,IAAMD,GACtC,IAAKQ,EAAW,OAAOjH,KAGvB,GAAI,GAAKkG,UAAUvI,OAEjB,cADOqC,KAAK0G,WAAW,IAAMD,GACtBzG,KAKT,IAAK,IADDkH,EACK9J,EAAI,EAAGA,EAAI6J,EAAUtJ,OAAQP,IAEpC,IADA8J,EAAKD,EAAU7J,MACJ4I,GAAMkB,EAAGlB,KAAOA,EAAI,CAC7BiB,EAAUE,OAAO/J,EAAG,GACpB,MAGJ,OAAO4C,MAWTsG,EAAQnI,UAAUiJ,KAAO,SAASX,GAChCzG,KAAK0G,WAAa1G,KAAK0G,eACvB,IAAIT,KAAUvE,MAAMhE,KAAKwI,UAAW,GAChCe,EAAYjH,KAAK0G,WAAW,IAAMD,GAEtC,GAAIQ,EAEF,IAAK,IAAI7J,EAAI,EAAGqG,GADhBwD,EAAYA,EAAUvF,MAAM,IACI/D,OAAQP,EAAIqG,IAAOrG,EACjD6J,EAAU7J,GAAG+I,MAAMnG,KAAMiG,GAI7B,OAAOjG,MAWTsG,EAAQnI,UAAUkJ,UAAY,SAASZ,GAErC,OADAzG,KAAK0G,WAAa1G,KAAK0G,eAChB1G,KAAK0G,WAAW,IAAMD,QAW/BH,EAAQnI,UAAUmJ,aAAe,SAASb,GACxC,QAAUzG,KAAKqH,UAAUZ,GAAO9I,aAG5B4J,IAAI,SAASpK,EAAQU,EAAOJ,GAElCI,EAAOJ,QAAU,SAASP,EAAGsK,GAC3B,IAAIxB,EAAK,aACTA,EAAG7H,UAAYqJ,EAAErJ,UACjBjB,EAAEiB,UAAY,IAAI6H,EAClB9I,EAAEiB,UAAUsJ,YAAcvK,QAEtBwK,IAAI,SAASvK,EAAQU,EAAOJ,IAClC,SAAWkK,GAsJX,SAASC,IACP,IAAI9K,EACJ,IACEA,EAAIW,EAAQoK,QAAQC,MACpB,MAAMnL,IAOR,OAJKG,QAAwB,IAAZ6K,GAA2B,QAASA,IACnD7K,EAAI6K,EAAQI,IAAIC,OAGXlL,GA1JTW,EAAUI,EAAOJ,QAAUN,EAAQ,YAC3BuB,IA8GR,WAGE,MAAO,iBAAoBD,SACtBA,QAAQC,KACRuJ,SAAS9J,UAAUgI,MAAMzI,KAAKe,QAAQC,IAAKD,QAASyH,YAlH3DzI,EAAQyK,WAqER,SAAoBjC,GAClB,IAAIkC,EAAYnI,KAAKmI,UASrB,GAPAlC,EAAK,IAAMkC,EAAY,KAAO,IAC1BnI,KAAKoI,WACJD,EAAY,MAAQ,KACrBlC,EAAK,IACJkC,EAAY,MAAQ,KACrB,IAAM1K,EAAQ4K,SAASrI,KAAKsI,MAE3BH,EAAL,CAEA,IAAII,EAAI,UAAYvI,KAAKwI,MACzBvC,EAAKkB,OAAO,EAAG,EAAGoB,EAAG,kBAKrB,IAAIE,EAAQ,EACRC,EAAQ,EACZzC,EAAK,GAAG0C,QAAQ,cAAe,SAASC,GAClC,OAASA,IACbH,IACI,OAASG,IAGXF,EAAQD,MAIZxC,EAAKkB,OAAOuB,EAAO,EAAGH,KAlGxB9K,EAAQoL,KA2HR,SAAcC,GACZ,IACM,MAAQA,EACVrL,EAAQoK,QAAQkB,WAAW,SAE3BtL,EAAQoK,QAAQC,MAAQgB,EAE1B,MAAMnM,MAjIVc,EAAQmK,KAAOA,EACfnK,EAAQ0K,UA2BR,WAIE,SAAItC,SAAUA,OAAO8B,SAAmC,aAAxB9B,OAAO8B,QAAQzC,OAMvC8D,UAAYA,SAASC,iBAAmBD,SAASC,gBAAgBC,OAASF,SAASC,gBAAgBC,MAAMC,kBAE9GtD,QAAUA,OAAOpH,UAAYoH,OAAOpH,QAAQ2K,SAAYvD,OAAOpH,QAAQ4K,WAAaxD,OAAOpH,QAAQ6K,QAGnGC,WAAaA,UAAUC,WAAaD,UAAUC,UAAUC,cAAcb,MAAM,mBAAqBc,SAASC,OAAOC,GAAI,KAAO,IAE5HL,WAAaA,UAAUC,WAAaD,UAAUC,UAAUC,cAAcb,MAAM,uBA3CjFnL,EAAQoK,QAAU,oBAAsBgC,aACtB,IAAsBA,OAAOhC,QAC3BgC,OAAOhC,QAAQiC,MAsKnC,WACE,IACE,OAAOjE,OAAOkE,aACd,MAAOpN,KAxKSqN,GAMpBvM,EAAQwM,QACN,gBACA,cACA,YACA,aACA,aACA,WAmCFxM,EAAQyM,WAAWC,EAAI,SAASC,GAC9B,IACE,OAAOC,KAAKC,UAAUF,GACtB,MAAOnJ,GACP,MAAO,+BAAiCA,EAAIsJ,UAqGhD9M,EAAQ+M,OAAO5C,OAmBZlK,KAAKsC,KAAK7C,EAAQ,eAClBsN,UAAU,GAAGC,SAAW,KAAKC,IAAI,SAASxN,EAAQU,EAAOJ,GA4C5D,SAASmN,EAAYxC,GACnB,IAAchL,EAAVyN,EAAO,EAEX,IAAKzN,KAAKgL,EACRyC,GAAUA,GAAQ,GAAKA,EAAQzC,EAAU7E,WAAWnG,GACpDyN,GAAQ,EAGV,OAAOpN,EAAQwM,OAAOvH,KAAKoI,IAAID,GAAQpN,EAAQwM,OAAOtM,QAWxD,SAASoN,EAAY3C,GAEnB,SAASN,IAEP,GAAKA,EAAMkD,QAAX,CAEA,IAAIpF,EAAOkC,EAGPmD,GAAQ,IAAIC,KACZ/I,EAAK8I,GAAQE,GAAYF,GAC7BrF,EAAK0C,KAAOnG,EACZyD,EAAKwF,KAAOD,EACZvF,EAAKqF,KAAOA,EACZE,EAAWF,EAIX,IAAK,IADDhF,EAAO,IAAIoF,MAAMnF,UAAUvI,QACtBP,EAAI,EAAGA,EAAI6I,EAAKtI,OAAQP,IAC/B6I,EAAK7I,GAAK8I,UAAU9I,GAGtB6I,EAAK,GAAKxI,EAAQ6N,OAAOrF,EAAK,IAE1B,iBAAoBA,EAAK,IAE3BA,EAAKsF,QAAQ,MAIf,IAAI9C,EAAQ,EACZxC,EAAK,GAAKA,EAAK,GAAG0C,QAAQ,gBAAiB,SAASC,EAAO4C,GAEzD,GAAc,OAAV5C,EAAgB,OAAOA,EAC3BH,IACA,IAAIgD,EAAYhO,EAAQyM,WAAWsB,GACnC,GAAI,mBAAsBC,EAAW,CACnC,IAAIC,EAAMzF,EAAKwC,GACfG,EAAQ6C,EAAU/N,KAAKkI,EAAM8F,GAG7BzF,EAAKkB,OAAOsB,EAAO,GACnBA,IAEF,OAAOG,IAITnL,EAAQyK,WAAWxK,KAAKkI,EAAMK,IAElB6B,EAAMpJ,KAAOjB,EAAQiB,KAAOD,QAAQC,IAAIiN,KAAKlN,UACnD0H,MAAMP,EAAMK,IAapB,OAVA6B,EAAMM,UAAYA,EAClBN,EAAMkD,QAAUvN,EAAQuN,QAAQ5C,GAChCN,EAAMK,UAAY1K,EAAQ0K,YAC1BL,EAAMU,MAAQoC,EAAYxC,GAGtB,mBAAsB3K,EAAQmO,MAChCnO,EAAQmO,KAAK9D,GAGRA,GAtHTrK,EAAUI,EAAOJ,QAAUsN,EAAYjD,MAAQiD,EAAqB,QAAIA,GAChEO,OA6LR,SAAgBI,GACd,OAAIA,aAAepO,MAAcoO,EAAIG,OAASH,EAAInB,QAC3CmB,GA9LTjO,EAAQqO,QAyJR,WACErO,EAAQ+M,OAAO,KAzJjB/M,EAAQ+M,OA8HR,SAAgB1B,GACdrL,EAAQoL,KAAKC,GAEbrL,EAAQsO,SACRtO,EAAQuO,SAKR,IAAK,IAHDC,GAA+B,iBAAfnD,EAA0BA,EAAa,IAAImD,MAAM,UACjExI,EAAMwI,EAAMtO,OAEPP,EAAI,EAAGA,EAAIqG,EAAKrG,IAClB6O,EAAM7O,KAEW,OADtB0L,EAAamD,EAAM7O,GAAGuL,QAAQ,MAAO,QACtB,GACblL,EAAQuO,MAAMrF,KAAK,IAAIgD,OAAO,IAAMb,EAAWoD,OAAO,GAAK,MAE3DzO,EAAQsO,MAAMpF,KAAK,IAAIgD,OAAO,IAAMb,EAAa,QA5IvDrL,EAAQuN,QAmKR,SAAiBmB,GACf,IAAI/O,EAAGqG,EACP,IAAKrG,EAAI,EAAGqG,EAAMhG,EAAQuO,MAAMrO,OAAQP,EAAIqG,EAAKrG,IAC/C,GAAIK,EAAQuO,MAAM5O,GAAGgP,KAAKD,GACxB,OAAO,EAGX,IAAK/O,EAAI,EAAGqG,EAAMhG,EAAQsO,MAAMpO,OAAQP,EAAIqG,EAAKrG,IAC/C,GAAIK,EAAQsO,MAAM3O,GAAGgP,KAAKD,GACxB,OAAO,EAGX,OAAO,GA9KT1O,EAAQ4K,SAAWlL,EAAQ,MAM3BM,EAAQsO,SACRtO,EAAQuO,SAQRvO,EAAQyM,cAMR,IAAIiB,IAyKDhJ,GAAK,KAAKkK,IAAI,SAASlP,EAAQU,EAAOJ,GAEzCI,EAAOJ,QAAUN,EAAQ,iBAEtBmP,cAAc,KAAKC,IAAI,SAASpP,EAAQU,EAAOJ,GAElDI,EAAOJ,QAAUN,EAAQ,YAQzBU,EAAOJ,QAAQ+O,OAASrP,EAAQ,sBAE7BsP,WAAW,GAAGC,mBAAmB,KAAKC,IAAI,SAASxP,EAAQU,EAAOJ,IACrE,SAAW2G,GA4BX,SAASwI,EAAQC,EAAK3K,GACpB,KAAMlC,gBAAgB4M,GAAS,OAAO,IAAIA,EAAOC,EAAK3K,GAEtDA,EAAOA,MAEH2K,GAAO,iBAAoBA,IAC7B3K,EAAO2K,EACPA,EAAM,MAGJA,GACFA,EAAMC,EAASD,GACf3K,EAAK/B,SAAW0M,EAAIE,KACpB7K,EAAK8K,OAA0B,UAAjBH,EAAII,UAAyC,QAAjBJ,EAAII,SAC9C/K,EAAKgL,KAAOL,EAAIK,KACZL,EAAIM,QAAOjL,EAAKiL,MAAQN,EAAIM,QACvBjL,EAAK6K,OACd7K,EAAK/B,SAAW2M,EAAS5K,EAAK6K,MAAMA,MAGtC/M,KAAKgN,OAAS,MAAQ9K,EAAK8K,OAAS9K,EAAK8K,OACpC5I,EAAOlE,UAAY,WAAaA,SAAS+M,SAE1C/K,EAAK/B,WAAa+B,EAAKgL,OAEzBhL,EAAKgL,KAAOlN,KAAKgN,OAAS,MAAQ,MAGpChN,KAAKoN,MAAQlL,EAAKkL,QAAS,EAC3BpN,KAAKG,SAAW+B,EAAK/B,WAClBiE,EAAOlE,SAAWA,SAASC,SAAW,aACzCH,KAAKkN,KAAOhL,EAAKgL,OAAS9I,EAAOlE,UAAYA,SAASgN,KAChDhN,SAASgN,KACRlN,KAAKgN,OAAS,IAAM,IAC3BhN,KAAKmN,MAAQjL,EAAKiL,UACd,iBAAoBnN,KAAKmN,QAAOnN,KAAKmN,MAAQE,EAAQzJ,OAAO5D,KAAKmN,QACrEnN,KAAKsN,SAAU,IAAUpL,EAAKoL,QAC9BtN,KAAKuN,MAAQrL,EAAKqL,MAAQ,cAAc5E,QAAQ,MAAO,IAAM,IAC7D3I,KAAKwN,aAAetL,EAAKsL,WACzBxN,KAAKyN,OAAQ,IAAUvL,EAAKuL,MAC5BzN,KAAK0N,cAAgBxL,EAAKwL,YAC1B1N,KAAK2N,aAAezL,EAAKyL,WACzB3N,KAAK4N,eAAiB1L,EAAK0L,gBAAkB,IAC7C5N,KAAK6N,kBAAoB3L,EAAK2L,kBAC9B7N,KAAK8N,WAAa5L,EAAK4L,aAAe,UAAW,aACjD9N,KAAK+N,iBAAmB7L,EAAK6L,qBAC7B/N,KAAKgO,WAAa,GAClBhO,KAAKiO,eACLjO,KAAKkO,cAAgB,EACrBlO,KAAKmO,WAAajM,EAAKiM,YAAc,IACrCnO,KAAKoO,gBAAkBlM,EAAKkM,kBAAmB,EAC/CpO,KAAKqO,WAAa,KAClBrO,KAAKsO,mBAAqBpM,EAAKoM,mBAC/BtO,KAAKuO,mBAAoB,IAAUrM,EAAKqM,oBAAqBrM,EAAKqM,wBAE9D,IAASvO,KAAKuO,oBAAmBvO,KAAKuO,sBACtCvO,KAAKuO,mBAAqB,MAAQvO,KAAKuO,kBAAkBC,YAC3DxO,KAAKuO,kBAAkBC,UAAY,MAIrCxO,KAAKyO,IAAMvM,EAAKuM,KAAO,KACvBzO,KAAK/B,IAAMiE,EAAKjE,KAAO,KACvB+B,KAAK0O,WAAaxM,EAAKwM,YAAc,KACrC1O,KAAK2O,KAAOzM,EAAKyM,MAAQ,KACzB3O,KAAK4O,GAAK1M,EAAK0M,IAAM,KACrB5O,KAAK6O,QAAU3M,EAAK2M,SAAW,KAC/B7O,KAAK8O,wBAAiDC,IAA5B7M,EAAK4M,oBAA0C5M,EAAK4M,mBAC9E9O,KAAKgP,YAAc9M,EAAK8M,UAGxB,IAAIC,EAA+B,iBAAX7K,GAAuBA,EAC3C6K,EAAW7K,SAAW6K,IACpB/M,EAAKgN,cAAgBhR,OAAOiR,KAAKjN,EAAKgN,cAAcvR,OAAS,IAC/DqC,KAAKkP,aAAehN,EAAKgN,cAGvBhN,EAAKkN,eACPpP,KAAKoP,aAAelN,EAAKkN,eAK7BpP,KAAKqP,GAAK,KACVrP,KAAKsP,SAAW,KAChBtP,KAAKuP,aAAe,KACpBvP,KAAKwP,YAAc,KAGnBxP,KAAKyP,kBAAoB,KACzBzP,KAAK0P,iBAAmB,KAExB1P,KAAK2P,OAsFP,SAASC,EAAO9R,GACd,IAAId,KACJ,IAAK,IAAII,KAAKU,EACRA,EAAIM,eAAehB,KACrBJ,EAAEI,GAAKU,EAAIV,IAGf,OAAOJ,EAhNT,IAAI8Q,EAAa3Q,EAAQ,sBACrBmJ,EAAUnJ,EAAQ,qBAClB2K,EAAQ3K,EAAQ,SAAS,2BACzBsL,EAAQtL,EAAQ,WAChBqP,EAASrP,EAAQ,oBACjB2P,EAAW3P,EAAQ,YACnB0S,EAAY1S,EAAQ,aACpBkQ,EAAUlQ,EAAQ,WAMtBU,EAAOJ,QAAUmP,EAyGjBA,EAAOkD,uBAAwB,EAM/BxJ,EAAQsG,EAAOzO,WAQfyO,EAAOK,SAAWT,EAAOS,SAOzBL,EAAOA,OAASA,EAChBA,EAAOmD,UAAY5S,EAAQ,eAC3ByP,EAAOkB,WAAa3Q,EAAQ,sBAC5ByP,EAAOJ,OAASrP,EAAQ,oBAUxByP,EAAOzO,UAAU6R,gBAAkB,SAAU7D,GAC3CrE,EAAM,0BAA2BqE,GACjC,IAAIgB,EAAQyC,EAAM5P,KAAKmN,OAGvBA,EAAM8C,IAAMzD,EAAOS,SAGnBE,EAAM+C,UAAY/D,EAGlB,IAAItH,EAAU7E,KAAK+N,iBAAiB5B,OAmCpC,OAhCInM,KAAKqP,KAAIlC,EAAMgD,IAAMnQ,KAAKqP,IAEd,IAAIvB,EAAW3B,IAC7BgB,MAAOA,EACPiD,OAAQpQ,KACRoN,MAAOvI,EAAQuI,OAASpN,KAAKoN,MAC7BjN,SAAU0E,EAAQ1E,UAAYH,KAAKG,SACnC+M,KAAMrI,EAAQqI,MAAQlN,KAAKkN,KAC3BF,OAAQnI,EAAQmI,QAAUhN,KAAKgN,OAC/BO,KAAM1I,EAAQ0I,MAAQvN,KAAKuN,KAC3BC,WAAY3I,EAAQ2I,YAAcxN,KAAKwN,WACvCC,MAAO5I,EAAQ4I,OAASzN,KAAKyN,MAC7BC,YAAa7I,EAAQ6I,aAAe1N,KAAK0N,YACzCC,WAAY9I,EAAQ8I,YAAc3N,KAAK2N,WACvCE,kBAAmBhJ,EAAQgJ,mBAAqB7N,KAAK6N,kBACrDD,eAAgB/I,EAAQ+I,gBAAkB5N,KAAK4N,eAC/CO,WAAYtJ,EAAQsJ,YAAcnO,KAAKmO,WACvCM,IAAK5J,EAAQ4J,KAAOzO,KAAKyO,IACzBxQ,IAAK4G,EAAQ5G,KAAO+B,KAAK/B,IACzByQ,WAAY7J,EAAQ6J,YAAc1O,KAAK0O,WACvCC,KAAM9J,EAAQ8J,MAAQ3O,KAAK2O,KAC3BC,GAAI/J,EAAQ+J,IAAM5O,KAAK4O,GACvBC,QAAShK,EAAQgK,SAAW7O,KAAK6O,QACjCC,mBAAoBjK,EAAQiK,oBAAsB9O,KAAK8O,mBACvDP,kBAAmB1J,EAAQ0J,mBAAqBvO,KAAKuO,kBACrDW,aAAcrK,EAAQqK,cAAgBlP,KAAKkP,aAC3CF,UAAWnK,EAAQmK,WAAahP,KAAKgP,UACrCI,aAAcvK,EAAQuK,cAAgBpP,KAAKoP,aAC3CiB,eAAgBxL,EAAQwL,gBAAkBrQ,KAAKqQ,eAC/CC,UAAWzL,EAAQyL,gBAAa,KAqBpC1D,EAAOzO,UAAUwR,KAAO,WACtB,IAAIO,EACJ,GAAIlQ,KAAKoO,iBAAmBxB,EAAOkD,wBAAmE,IAA1C9P,KAAK8N,WAAWyC,QAAQ,aAClFL,EAAY,gBACP,CAAA,GAAI,IAAMlQ,KAAK8N,WAAWnQ,OAAQ,CAEvC,IAAIiI,EAAO5F,KAIX,YAHAwQ,WAAW,WACT5K,EAAKwB,KAAK,QAAS,4BAClB,GAGH8I,EAAYlQ,KAAK8N,WAAW,GAE9B9N,KAAKgO,WAAa,UAGlB,IACEkC,EAAYlQ,KAAKgQ,gBAAgBE,GACjC,MAAOvT,GAGP,OAFAqD,KAAK8N,WAAW2C,aAChBzQ,KAAK2P,OAIPO,EAAUP,OACV3P,KAAK0Q,aAAaR,IASpBtD,EAAOzO,UAAUuS,aAAe,SAAUR,GACxCpI,EAAM,uBAAwBoI,EAAU/D,MACxC,IAAIvG,EAAO5F,KAEPA,KAAKkQ,YACPpI,EAAM,iCAAkC9H,KAAKkQ,UAAU/D,MACvDnM,KAAKkQ,UAAUnJ,sBAIjB/G,KAAKkQ,UAAYA,EAGjBA,EACC5P,GAAG,QAAS,WACXsF,EAAK+K,YAENrQ,GAAG,SAAU,SAAUsQ,GACtBhL,EAAKiL,SAASD,KAEftQ,GAAG,QAAS,SAAU3D,GACrBiJ,EAAKkL,QAAQnU,KAEd2D,GAAG,QAAS,WACXsF,EAAKmL,QAAQ,sBAWjBnE,EAAOzO,UAAU6S,MAAQ,SAAU7E,GAQjC,SAAS8E,IACP,GAAIrL,EAAK0I,mBAAoB,CAC3B,IAAI4C,GAAsBlR,KAAKmR,gBAAkBvL,EAAKsK,UAAUiB,eAChEC,EAASA,GAAUF,EAEjBE,IAEJtJ,EAAM,8BAA+BqE,GACrC+D,EAAUmB,OAAQnM,KAAM,OAAQ1E,KAAM,WACtC0P,EAAUtJ,KAAK,SAAU,SAAU0K,GACjC,IAAIF,EACJ,GAAI,SAAWE,EAAIpM,MAAQ,UAAYoM,EAAI9Q,KAAM,CAI/C,GAHAsH,EAAM,4BAA6BqE,GACnCvG,EAAK2L,WAAY,EACjB3L,EAAKwB,KAAK,YAAa8I,IAClBA,EAAW,OAChBtD,EAAOkD,sBAAwB,cAAgBI,EAAU/D,KAEzDrE,EAAM,iCAAkClC,EAAKsK,UAAU/D,MACvDvG,EAAKsK,UAAUsB,MAAM,WACfJ,GACA,WAAaxL,EAAKoI,aACtBlG,EAAM,iDAEN2J,IAEA7L,EAAK8K,aAAaR,GAClBA,EAAUmB,OAAQnM,KAAM,aACxBU,EAAKwB,KAAK,UAAW8I,GACrBA,EAAY,KACZtK,EAAK2L,WAAY,EACjB3L,EAAK8L,eAEF,CACL5J,EAAM,8BAA+BqE,GACrC,IAAIlL,EAAM,IAAI3D,MAAM,eACpB2D,EAAIiP,UAAYA,EAAU/D,KAC1BvG,EAAKwB,KAAK,eAAgBnG,OAKhC,SAAS0Q,IACHP,IAGJA,GAAS,EAETK,IAEAvB,EAAU0B,QACV1B,EAAY,MAId,SAAS2B,EAAS5Q,GAChB,IAAI6Q,EAAQ,IAAIxU,MAAM,gBAAkB2D,GACxC6Q,EAAM5B,UAAYA,EAAU/D,KAE5BwF,IAEA7J,EAAM,mDAAoDqE,EAAMlL,GAEhE2E,EAAKwB,KAAK,eAAgB0K,GAG5B,SAASC,IACPF,EAAQ,oBAIV,SAASG,IACPH,EAAQ,iBAIV,SAASI,EAAWC,GACdhC,GAAagC,EAAG/F,OAAS+D,EAAU/D,OACrCrE,EAAM,6BAA8BoK,EAAG/F,KAAM+D,EAAU/D,MACvDwF,KAKJ,SAASF,IACPvB,EAAUpJ,eAAe,OAAQmK,GACjCf,EAAUpJ,eAAe,QAAS+K,GAClC3B,EAAUpJ,eAAe,QAASiL,GAClCnM,EAAKkB,eAAe,QAASkL,GAC7BpM,EAAKkB,eAAe,YAAamL,GAhGnCnK,EAAM,yBAA0BqE,GAChC,IAAI+D,EAAYlQ,KAAKgQ,gBAAgB7D,GAAQ6E,MAAO,IAChDI,GAAS,EACTxL,EAAO5F,KAEX4M,EAAOkD,uBAAwB,EA8F/BI,EAAUtJ,KAAK,OAAQqK,GACvBf,EAAUtJ,KAAK,QAASiL,GACxB3B,EAAUtJ,KAAK,QAASmL,GAExB/R,KAAK4G,KAAK,QAASoL,GACnBhS,KAAK4G,KAAK,YAAaqL,GAEvB/B,EAAUP,QASZ/C,EAAOzO,UAAUgU,OAAS,WASxB,GARArK,EAAM,eACN9H,KAAKgO,WAAa,OAClBpB,EAAOkD,sBAAwB,cAAgB9P,KAAKkQ,UAAU/D,KAC9DnM,KAAKoH,KAAK,QACVpH,KAAK0R,QAID,SAAW1R,KAAKgO,YAAchO,KAAKsN,SAAWtN,KAAKkQ,UAAUsB,MAAO,CACtE1J,EAAM,2BACN,IAAK,IAAI1K,EAAI,EAAGI,EAAIwC,KAAKsP,SAAS3R,OAAQP,EAAII,EAAGJ,IAC/C4C,KAAKgR,MAAMhR,KAAKsP,SAASlS,MAW/BwP,EAAOzO,UAAU0S,SAAW,SAAUD,GACpC,GAAI,YAAc5Q,KAAKgO,YAAc,SAAWhO,KAAKgO,YACjD,YAAchO,KAAKgO,WAQrB,OAPAlG,EAAM,uCAAwC8I,EAAO1L,KAAM0L,EAAOpQ,MAElER,KAAKoH,KAAK,SAAUwJ,GAGpB5Q,KAAKoH,KAAK,aAEFwJ,EAAO1L,MACb,IAAK,OACHlF,KAAKoS,YAAYvC,EAAUe,EAAOpQ,OAClC,MAEF,IAAK,OACHR,KAAKqS,UACLrS,KAAKoH,KAAK,QACV,MAEF,IAAK,QACH,IAAInG,EAAM,IAAI3D,MAAM,gBACpB2D,EAAI1D,KAAOqT,EAAOpQ,KAClBR,KAAK8Q,QAAQ7P,GACb,MAEF,IAAK,UACHjB,KAAKoH,KAAK,OAAQwJ,EAAOpQ,MACzBR,KAAKoH,KAAK,UAAWwJ,EAAOpQ,WAIhCsH,EAAM,8CAA+C9H,KAAKgO,aAW9DpB,EAAOzO,UAAUiU,YAAc,SAAU5R,GACvCR,KAAKoH,KAAK,YAAa5G,GACvBR,KAAKqP,GAAK7O,EAAK2P,IACfnQ,KAAKkQ,UAAU/C,MAAMgD,IAAM3P,EAAK2P,IAChCnQ,KAAKsP,SAAWtP,KAAKsS,eAAe9R,EAAK8O,UACzCtP,KAAKuP,aAAe/O,EAAK+O,aACzBvP,KAAKwP,YAAchP,EAAKgP,YACxBxP,KAAKmS,SAED,WAAanS,KAAKgO,aACtBhO,KAAKqS,UAGLrS,KAAK8G,eAAe,YAAa9G,KAAKuS,aACtCvS,KAAKM,GAAG,YAAaN,KAAKuS,eAS5B3F,EAAOzO,UAAUoU,YAAc,SAAUC,GACvCC,aAAazS,KAAK0P,kBAClB,IAAI9J,EAAO5F,KACX4F,EAAK8J,iBAAmBc,WAAW,WAC7B,WAAa5K,EAAKoI,YACtBpI,EAAKmL,QAAQ,iBACZyB,GAAY5M,EAAK2J,aAAe3J,EAAK4J,cAU1C5C,EAAOzO,UAAUkU,QAAU,WACzB,IAAIzM,EAAO5F,KACXyS,aAAa7M,EAAK6J,mBAClB7J,EAAK6J,kBAAoBe,WAAW,WAClC1I,EAAM,mDAAoDlC,EAAK4J,aAC/D5J,EAAK8M,OACL9M,EAAK2M,YAAY3M,EAAK4J,cACrB5J,EAAK2J,eASV3C,EAAOzO,UAAUuU,KAAO,WACtB,IAAI9M,EAAO5F,KACXA,KAAK2S,WAAW,OAAQ,WACtB/M,EAAKwB,KAAK,WAUdwF,EAAOzO,UAAUwS,QAAU,WACzB3Q,KAAKiO,YAAY9G,OAAO,EAAGnH,KAAKkO,eAKhClO,KAAKkO,cAAgB,EAEjB,IAAMlO,KAAKiO,YAAYtQ,OACzBqC,KAAKoH,KAAK,SAEVpH,KAAK0R,SAUT9E,EAAOzO,UAAUuT,MAAQ,WACnB,WAAa1R,KAAKgO,YAAchO,KAAKkQ,UAAUvQ,WAChDK,KAAKuR,WAAavR,KAAKiO,YAAYtQ,SACpCmK,EAAM,gCAAiC9H,KAAKiO,YAAYtQ,QACxDqC,KAAKkQ,UAAUmB,KAAKrR,KAAKiO,aAGzBjO,KAAKkO,cAAgBlO,KAAKiO,YAAYtQ,OACtCqC,KAAKoH,KAAK,WAcdwF,EAAOzO,UAAUyU,MACjBhG,EAAOzO,UAAUkT,KAAO,SAAUC,EAAKzM,EAASmB,GAE9C,OADAhG,KAAK2S,WAAW,UAAWrB,EAAKzM,EAASmB,GAClChG,MAaT4M,EAAOzO,UAAUwU,WAAa,SAAUzN,EAAM1E,EAAMqE,EAASmB,GAW3D,GAVI,mBAAsBxF,IACxBwF,EAAKxF,EACLA,OAAOuO,GAGL,mBAAsBlK,IACxBmB,EAAKnB,EACLA,EAAU,MAGR,YAAc7E,KAAKgO,YAAc,WAAahO,KAAKgO,WAAvD,EAIAnJ,EAAUA,OACFgO,UAAW,IAAUhO,EAAQgO,SAErC,IAAIjC,GACF1L,KAAMA,EACN1E,KAAMA,EACNqE,QAASA,GAEX7E,KAAKoH,KAAK,eAAgBwJ,GAC1B5Q,KAAKiO,YAAYtH,KAAKiK,GAClB5K,GAAIhG,KAAK4G,KAAK,QAASZ,GAC3BhG,KAAK0R,UASP9E,EAAOzO,UAAUyT,MAAQ,WAqBvB,SAASA,IACPhM,EAAKmL,QAAQ,gBACbjJ,EAAM,+CACNlC,EAAKsK,UAAU0B,QAGjB,SAASkB,IACPlN,EAAKkB,eAAe,UAAWgM,GAC/BlN,EAAKkB,eAAe,eAAgBgM,GACpClB,IAGF,SAASmB,IAEPnN,EAAKgB,KAAK,UAAWkM,GACrBlN,EAAKgB,KAAK,eAAgBkM,GAnC5B,GAAI,YAAc9S,KAAKgO,YAAc,SAAWhO,KAAKgO,WAAY,CAC/DhO,KAAKgO,WAAa,UAElB,IAAIpI,EAAO5F,KAEPA,KAAKiO,YAAYtQ,OACnBqC,KAAK4G,KAAK,QAAS,WACb5G,KAAKuR,UACPwB,IAEAnB,MAGK5R,KAAKuR,UACdwB,IAEAnB,IAsBJ,OAAO5R,MAST4M,EAAOzO,UAAU2S,QAAU,SAAU7P,GACnC6G,EAAM,kBAAmB7G,GACzB2L,EAAOkD,uBAAwB,EAC/B9P,KAAKoH,KAAK,QAASnG,GACnBjB,KAAK+Q,QAAQ,kBAAmB9P,IASlC2L,EAAOzO,UAAU4S,QAAU,SAAUiC,EAAQC,GAC3C,GAAI,YAAcjT,KAAKgO,YAAc,SAAWhO,KAAKgO,YAAc,YAAchO,KAAKgO,WAAY,CAChGlG,EAAM,iCAAkCkL,GACxC,IAAIpN,EAAO5F,KAGXyS,aAAazS,KAAKyP,mBAClBgD,aAAazS,KAAK0P,kBAGlB1P,KAAKkQ,UAAUnJ,mBAAmB,SAGlC/G,KAAKkQ,UAAU0B,QAGf5R,KAAKkQ,UAAUnJ,qBAGf/G,KAAKgO,WAAa,SAGlBhO,KAAKqP,GAAK,KAGVrP,KAAKoH,KAAK,QAAS4L,EAAQC,GAI3BrN,EAAKqI,eACLrI,EAAKsI,cAAgB,IAYzBtB,EAAOzO,UAAUmU,eAAiB,SAAUhD,GAE1C,IAAK,IADD4D,KACK9V,EAAI,EAAG+M,EAAImF,EAAS3R,OAAQP,EAAI+M,EAAG/M,KACrCqL,EAAMzI,KAAK8N,WAAYwB,EAASlS,KAAK8V,EAAiBvM,KAAK2I,EAASlS,IAE3E,OAAO8V,KAGNxV,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxHsN,cAAc,GAAGC,qBAAqB,GAAGC,oBAAoB,GAAGvL,MAAQ,GAAG4E,mBAAmB,GAAG4G,QAAU,GAAGzD,UAAY,GAAGxC,QAAU,GAAGP,SAAW,KAAKyG,IAAI,SAASpW,EAAQU,EAAOJ,GAqBzL,SAASsS,EAAW7N,GAClBlC,KAAKuN,KAAOrL,EAAKqL,KACjBvN,KAAKG,SAAW+B,EAAK/B,SACrBH,KAAKkN,KAAOhL,EAAKgL,KACjBlN,KAAKgN,OAAS9K,EAAK8K,OACnBhN,KAAKmN,MAAQjL,EAAKiL,MAClBnN,KAAK4N,eAAiB1L,EAAK0L,eAC3B5N,KAAK6N,kBAAoB3L,EAAK2L,kBAC9B7N,KAAKgO,WAAa,GAClBhO,KAAKoN,MAAQlL,EAAKkL,QAAS,EAC3BpN,KAAKoQ,OAASlO,EAAKkO,OACnBpQ,KAAK2N,WAAazL,EAAKyL,WAGvB3N,KAAKyO,IAAMvM,EAAKuM,IAChBzO,KAAK/B,IAAMiE,EAAKjE,IAChB+B,KAAK0O,WAAaxM,EAAKwM,WACvB1O,KAAK2O,KAAOzM,EAAKyM,KACjB3O,KAAK4O,GAAK1M,EAAK0M,GACf5O,KAAK6O,QAAU3M,EAAK2M,QACpB7O,KAAK8O,mBAAqB5M,EAAK4M,mBAC/B9O,KAAKgP,UAAY9M,EAAK8M,UAGtBhP,KAAKkP,aAAehN,EAAKgN,aACzBlP,KAAKoP,aAAelN,EAAKkN,aAzC3B,IAAI5C,EAASrP,EAAQ,oBACjBmJ,EAAUnJ,EAAQ,qBAMtBU,EAAOJ,QAAUsS,EAyCjBzJ,EAAQyJ,EAAU5R,WAUlB4R,EAAU5R,UAAU2S,QAAU,SAAUQ,EAAK2B,GAC3C,IAAIhS,EAAM,IAAI3D,MAAMgU,GAIpB,OAHArQ,EAAIiE,KAAO,iBACXjE,EAAIuS,YAAcP,EAClBjT,KAAKoH,KAAK,QAASnG,GACZjB,MAST+P,EAAU5R,UAAUwR,KAAO,WAMzB,MALI,WAAa3P,KAAKgO,YAAc,KAAOhO,KAAKgO,aAC9ChO,KAAKgO,WAAa,UAClBhO,KAAKyT,UAGAzT,MAST+P,EAAU5R,UAAUyT,MAAQ,WAM1B,MALI,YAAc5R,KAAKgO,YAAc,SAAWhO,KAAKgO,aACnDhO,KAAK0T,UACL1T,KAAK+Q,WAGA/Q,MAUT+P,EAAU5R,UAAUkT,KAAO,SAAUsC,GACnC,GAAI,SAAW3T,KAAKgO,WAGlB,MAAM,IAAI1Q,MAAM,sBAFhB0C,KAAK4S,MAAMe,IAYf5D,EAAU5R,UAAUgU,OAAS,WAC3BnS,KAAKgO,WAAa,OAClBhO,KAAKL,UAAW,EAChBK,KAAKoH,KAAK,SAUZ2I,EAAU5R,UAAUyV,OAAS,SAAUpT,GACrC,IAAIoQ,EAASpE,EAAOqH,aAAarT,EAAMR,KAAKoQ,OAAO/B,YACnDrO,KAAK6Q,SAASD,IAOhBb,EAAU5R,UAAU0S,SAAW,SAAUD,GACvC5Q,KAAKoH,KAAK,SAAUwJ,IAStBb,EAAU5R,UAAU4S,QAAU,WAC5B/Q,KAAKgO,WAAa,SAClBhO,KAAKoH,KAAK,YAGTiM,oBAAoB,GAAG3G,mBAAmB,KAAKoH,IAAI,SAAS3W,EAAQU,EAAOJ,IAC9E,SAAW2G,GAKX,IAAI2P,EAAiB5W,EAAQ,sBACzB6W,EAAM7W,EAAQ,iBACd8W,EAAQ9W,EAAQ,mBAChB+W,EAAY/W,EAAQ,eAMxBM,EAAQ0W,QAUR,SAAkBjS,GAChB,IACIkS,GAAK,EACLC,GAAK,EACL5G,GAAQ,IAAUvL,EAAKuL,MAE3B,GAAIrJ,EAAOlE,SAAU,CACnB,IAAIoU,EAAQ,WAAapU,SAAS+M,SAC9BC,EAAOhN,SAASgN,KAGfA,IACHA,EAAOoH,EAAQ,IAAM,IAGvBF,EAAKlS,EAAK/B,WAAaD,SAASC,UAAY+M,IAAShL,EAAKgL,KAC1DmH,EAAKnS,EAAK8K,SAAWsH,EAOvB,GAJApS,EAAKqS,QAAUH,EACflS,EAAKsS,QAAUH,EAGX,SAFE,IAAIN,EAAe7R,KAEHA,EAAKsL,WACzB,OAAO,IAAIwG,EAAI9R,GAEf,IAAKuL,EAAO,MAAM,IAAInQ,MAAM,kBAC5B,OAAO,IAAI2W,EAAM/R,IApCrBzE,EAAQyW,UAAYA,IAwCjBxW,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxH4O,kBAAkB,GAAGC,gBAAgB,GAAGC,cAAc,GAAGC,qBAAqB,KAAKC,IAAI,SAAS1X,EAAQU,EAAOJ,IAClH,SAAW2G,GAgCX,SAAS0Q,KAST,SAASC,EAAc7S,GACrB8S,EAAQtX,KAAKsC,KAAMkC,GAEnBlC,KAAKmN,MAAQnN,KAAKmN,UAIblG,IAEE7C,EAAO6Q,SAAQ7Q,EAAO6Q,WAC3BhO,EAAY7C,EAAO6Q,QAIrBjV,KAAKyI,MAAQxB,EAAUtJ,OAGvB,IAAIiI,EAAO5F,KACXiH,EAAUN,KAAK,SAAU2K,GACvB1L,EAAKgO,OAAOtC,KAIdtR,KAAKmN,MAAMhD,EAAInK,KAAKyI,MAGhBrE,EAAO4E,UAAY5E,EAAOoC,kBAC5BpC,EAAOoC,iBAAiB,eAAgB,WAClCZ,EAAKsP,SAAQtP,EAAKsP,OAAOrD,QAAUiD,KACtC,GAhEP,IAAIE,EAAU7X,EAAQ,aAClBgY,EAAUhY,EAAQ,qBAMtBU,EAAOJ,QAAUsX,EAMjB,IAOI9N,EAPAmO,EAAW,MACXC,EAAkB,OA0DtBF,EAAQJ,EAAcC,GAMtBD,EAAa5W,UAAUgT,gBAAiB,EAQxC4D,EAAa5W,UAAUuV,QAAU,WAC3B1T,KAAKkV,SACPlV,KAAKkV,OAAOI,WAAWC,YAAYvV,KAAKkV,QACxClV,KAAKkV,OAAS,MAGZlV,KAAKwV,OACPxV,KAAKwV,KAAKF,WAAWC,YAAYvV,KAAKwV,MACtCxV,KAAKwV,KAAO,KACZxV,KAAKyV,OAAS,MAGhBT,EAAQ7W,UAAUuV,QAAQhW,KAAKsC,OASjC+U,EAAa5W,UAAUuX,OAAS,WAC9B,IAAI9P,EAAO5F,KACPkV,EAASlM,SAAS2M,cAAc,UAEhC3V,KAAKkV,SACPlV,KAAKkV,OAAOI,WAAWC,YAAYvV,KAAKkV,QACxClV,KAAKkV,OAAS,MAGhBA,EAAOU,OAAQ,EACfV,EAAOW,IAAM7V,KAAK6M,MAClBqI,EAAOrD,QAAU,SAAUlV,GACzBiJ,EAAKkL,QAAQ,mBAAoBnU,IAGnC,IAAImZ,EAAW9M,SAAS+M,qBAAqB,UAAU,GACnDD,EACFA,EAASR,WAAWU,aAAad,EAAQY,IAExC9M,SAASiN,MAAQjN,SAASkN,MAAMC,YAAYjB,GAE/ClV,KAAKkV,OAASA,EAEE,oBAAuB3L,WAAa,SAAS6C,KAAK7C,UAAUC,YAG1EgH,WAAW,WACT,IAAIiF,EAASzM,SAAS2M,cAAc,UACpC3M,SAASkN,KAAKC,YAAYV,GAC1BzM,SAASkN,KAAKX,YAAYE,IACzB,MAYPV,EAAa5W,UAAUiY,QAAU,SAAU5V,EAAMwF,GA0B/C,SAASqQ,IACPC,IACAtQ,IAGF,SAASsQ,IACP,GAAI1Q,EAAK6P,OACP,IACE7P,EAAK4P,KAAKD,YAAY3P,EAAK6P,QAC3B,MAAO9Y,GACPiJ,EAAKkL,QAAQ,qCAAsCnU,GAIvD,IAEE,IAAI4Z,EAAO,oCAAsC3Q,EAAK4Q,SAAW,KACjEf,EAASzM,SAAS2M,cAAcY,GAChC,MAAO5Z,IACP8Y,EAASzM,SAAS2M,cAAc,WACzBxJ,KAAOvG,EAAK4Q,SACnBf,EAAOI,IAAM,eAGfJ,EAAOpG,GAAKzJ,EAAK4Q,SAEjB5Q,EAAK4P,KAAKW,YAAYV,GACtB7P,EAAK6P,OAASA,EApDhB,IAAI7P,EAAO5F,KAEX,IAAKA,KAAKwV,KAAM,CACd,IAGIC,EAHAD,EAAOxM,SAAS2M,cAAc,QAC9Bc,EAAOzN,SAAS2M,cAAc,YAC9BtG,EAAKrP,KAAKwW,SAAW,cAAgBxW,KAAKyI,MAG9C+M,EAAKkB,UAAY,WACjBlB,EAAKtM,MAAMyN,SAAW,WACtBnB,EAAKtM,MAAM0N,IAAM,UACjBpB,EAAKtM,MAAM2N,KAAO,UAClBrB,EAAKlW,OAAS+P,EACdmG,EAAKsB,OAAS,OACdtB,EAAKuB,aAAa,iBAAkB,SACpCN,EAAKtK,KAAO,IACZqJ,EAAKW,YAAYM,GACjBzN,SAASkN,KAAKC,YAAYX,GAE1BxV,KAAKwV,KAAOA,EACZxV,KAAKyW,KAAOA,EAGdzW,KAAKwV,KAAKwB,OAAShX,KAAK6M,MAgCxByJ,IAIA9V,EAAOA,EAAKmI,QAAQ0M,EAAiB,QACrCrV,KAAKyW,KAAKtX,MAAQqB,EAAKmI,QAAQyM,EAAU,OAEzC,IACEpV,KAAKwV,KAAKyB,SACV,MAAOta,IAELqD,KAAKyV,OAAOyB,YACdlX,KAAKyV,OAAO0B,mBAAqB,WACA,aAA3BvR,EAAK6P,OAAOzH,YACdqI,KAIJrW,KAAKyV,OAAO2B,OAASf,KAItB3Y,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxHwR,YAAY,GAAGC,oBAAoB,KAAKC,IAAI,SAASpa,EAAQU,EAAOJ,IACvE,SAAW2G,GAsBX,SAAS0Q,KAST,SAASd,EAAK9R,GAKZ,GAJA8S,EAAQtX,KAAKsC,KAAMkC,GACnBlC,KAAKqQ,eAAiBnO,EAAKmO,eAC3BrQ,KAAKkP,aAAehN,EAAKgN,aAErB9K,EAAOlE,SAAU,CACnB,IAAIoU,EAAQ,WAAapU,SAAS+M,SAC9BC,EAAOhN,SAASgN,KAGfA,IACHA,EAAOoH,EAAQ,IAAM,IAGvBtU,KAAKoU,GAAKlS,EAAK/B,WAAaiE,EAAOlE,SAASC,UAC1C+M,IAAShL,EAAKgL,KAChBlN,KAAKqU,GAAKnS,EAAK8K,SAAWsH,GA6F9B,SAASkD,EAAStV,GAChBlC,KAAK8W,OAAS5U,EAAK4U,QAAU,MAC7B9W,KAAK6M,IAAM3K,EAAK2K,IAChB7M,KAAKoU,KAAOlS,EAAKkS,GACjBpU,KAAKqU,KAAOnS,EAAKmS,GACjBrU,KAAK4V,OAAQ,IAAU1T,EAAK0T,MAC5B5V,KAAKQ,UAAOuO,IAAc7M,EAAK1B,KAAO0B,EAAK1B,KAAO,KAClDR,KAAKoN,MAAQlL,EAAKkL,MAClBpN,KAAKyX,SAAWvV,EAAKuV,SACrBzX,KAAKmR,eAAiBjP,EAAKiP,eAC3BnR,KAAK2N,WAAazL,EAAKyL,WACvB3N,KAAKqQ,eAAiBnO,EAAKmO,eAG3BrQ,KAAKyO,IAAMvM,EAAKuM,IAChBzO,KAAK/B,IAAMiE,EAAKjE,IAChB+B,KAAK0O,WAAaxM,EAAKwM,WACvB1O,KAAK2O,KAAOzM,EAAKyM,KACjB3O,KAAK4O,GAAK1M,EAAK0M,GACf5O,KAAK6O,QAAU3M,EAAK2M,QACpB7O,KAAK8O,mBAAqB5M,EAAK4M,mBAG/B9O,KAAKkP,aAAehN,EAAKgN,aAEzBlP,KAAK0X,SAkPP,SAASC,IACP,IAAK,IAAIva,KAAKoa,EAAQI,SAChBJ,EAAQI,SAASxZ,eAAehB,IAClCoa,EAAQI,SAASxa,GAAGya,QArZ1B,IAAI9D,EAAiB5W,EAAQ,sBACzB6X,EAAU7X,EAAQ,aAClBmJ,EAAUnJ,EAAQ,qBAClBgY,EAAUhY,EAAQ,qBAClB2K,EAAQ3K,EAAQ,SAAS,gCAM7BU,EAAOJ,QAAUuW,EACjBnW,EAAOJ,QAAQ+Z,QAAUA,EAuCzBrC,EAAQnB,EAAKgB,GAMbhB,EAAI7V,UAAUgT,gBAAiB,EAS/B6C,EAAI7V,UAAU2Z,QAAU,SAAU5V,GAsBhC,OArBAA,EAAOA,MACPA,EAAK2K,IAAM7M,KAAK6M,MAChB3K,EAAKkS,GAAKpU,KAAKoU,GACflS,EAAKmS,GAAKrU,KAAKqU,GACfnS,EAAKkL,MAAQpN,KAAKoN,QAAS,EAC3BlL,EAAKiP,eAAiBnR,KAAKmR,eAC3BjP,EAAKyL,WAAa3N,KAAK2N,WAGvBzL,EAAKuM,IAAMzO,KAAKyO,IAChBvM,EAAKjE,IAAM+B,KAAK/B,IAChBiE,EAAKwM,WAAa1O,KAAK0O,WACvBxM,EAAKyM,KAAO3O,KAAK2O,KACjBzM,EAAK0M,GAAK5O,KAAK4O,GACf1M,EAAK2M,QAAU7O,KAAK6O,QACpB3M,EAAK4M,mBAAqB9O,KAAK8O,mBAC/B5M,EAAKmO,eAAiBrQ,KAAKqQ,eAG3BnO,EAAKgN,aAAelP,KAAKkP,aAElB,IAAIsI,EAAQtV,IAWrB8R,EAAI7V,UAAUiY,QAAU,SAAU5V,EAAMwF,GACtC,IAAIyR,EAA2B,iBAATjX,QAA8BuO,IAATvO,EACvCuX,EAAM/X,KAAK8X,SAAUhB,OAAQ,OAAQtW,KAAMA,EAAMiX,SAAUA,IAC3D7R,EAAO5F,KACX+X,EAAIzX,GAAG,UAAW0F,GAClB+R,EAAIzX,GAAG,QAAS,SAAUW,GACxB2E,EAAKkL,QAAQ,iBAAkB7P,KAEjCjB,KAAKgY,QAAUD,GASjB/D,EAAI7V,UAAUuX,OAAS,WACrB5N,EAAM,YACN,IAAIiQ,EAAM/X,KAAK8X,UACXlS,EAAO5F,KACX+X,EAAIzX,GAAG,OAAQ,SAAUE,GACvBoF,EAAKgO,OAAOpT,KAEduX,EAAIzX,GAAG,QAAS,SAAUW,GACxB2E,EAAKkL,QAAQ,iBAAkB7P,KAEjCjB,KAAKiY,QAAUF,GA0CjBzR,EAAQkR,EAAQrZ,WAQhBqZ,EAAQrZ,UAAUuZ,OAAS,WACzB,IAAIxV,GAASkL,MAAOpN,KAAKoN,MAAOmH,QAASvU,KAAKoU,GAAII,QAASxU,KAAKqU,GAAI1G,WAAY3N,KAAK2N,YAGrFzL,EAAKuM,IAAMzO,KAAKyO,IAChBvM,EAAKjE,IAAM+B,KAAK/B,IAChBiE,EAAKwM,WAAa1O,KAAK0O,WACvBxM,EAAKyM,KAAO3O,KAAK2O,KACjBzM,EAAK0M,GAAK5O,KAAK4O,GACf1M,EAAK2M,QAAU7O,KAAK6O,QACpB3M,EAAK4M,mBAAqB9O,KAAK8O,mBAE/B,IAAIoJ,EAAMlY,KAAKkY,IAAM,IAAInE,EAAe7R,GACpC0D,EAAO5F,KAEX,IACE8H,EAAM,kBAAmB9H,KAAK8W,OAAQ9W,KAAK6M,KAC3CqL,EAAIvI,KAAK3P,KAAK8W,OAAQ9W,KAAK6M,IAAK7M,KAAK4V,OACrC,IACE,GAAI5V,KAAKkP,aAAc,CACrBgJ,EAAIC,uBAAyBD,EAAIC,uBAAsB,GACvD,IAAK,IAAI/a,KAAK4C,KAAKkP,aACblP,KAAKkP,aAAa9Q,eAAehB,IACnC8a,EAAIE,iBAAiBhb,EAAG4C,KAAKkP,aAAa9R,KAIhD,MAAOT,IAET,GAAI,SAAWqD,KAAK8W,OAClB,IACM9W,KAAKyX,SACPS,EAAIE,iBAAiB,eAAgB,4BAErCF,EAAIE,iBAAiB,eAAgB,4BAEvC,MAAOzb,IAGX,IACEub,EAAIE,iBAAiB,SAAU,OAC/B,MAAOzb,IAGL,oBAAqBub,IACvBA,EAAIG,iBAAkB,GAGpBrY,KAAKqQ,iBACP6H,EAAI1F,QAAUxS,KAAKqQ,gBAGjBrQ,KAAKsY,UACPJ,EAAId,OAAS,WACXxR,EAAK2S,UAEPL,EAAIrG,QAAU,WACZjM,EAAKkL,QAAQoH,EAAIM,gBAGnBN,EAAIf,mBAAqB,WACvB,GAAuB,IAAnBe,EAAIlK,WAAkB,CACxB,IAAIyK,EACJ,IACEA,EAAcP,EAAIQ,kBAAkB,gBACpC,MAAO/b,IACW,6BAAhB8b,IACFP,EAAIS,aAAe,eAGnB,IAAMT,EAAIlK,aACV,MAAQkK,EAAIU,QAAU,OAASV,EAAIU,OACrChT,EAAK2S,SAIL/H,WAAW,WACT5K,EAAKkL,QAAQoH,EAAIU,SAChB,KAKT9Q,EAAM,cAAe9H,KAAKQ,MAC1B0X,EAAI7G,KAAKrR,KAAKQ,MACd,MAAO7D,GAOP,YAHA6T,WAAW,WACT5K,EAAKkL,QAAQnU,IACZ,GAIDyH,EAAO4E,WACThJ,KAAKyI,MAAQ+O,EAAQqB,gBACrBrB,EAAQI,SAAS5X,KAAKyI,OAASzI,OAUnCwX,EAAQrZ,UAAU2a,UAAY,WAC5B9Y,KAAKoH,KAAK,WACVpH,KAAKyR,WASP+F,EAAQrZ,UAAUyV,OAAS,SAAUpT,GACnCR,KAAKoH,KAAK,OAAQ5G,GAClBR,KAAK8Y,aASPtB,EAAQrZ,UAAU2S,QAAU,SAAU7P,GACpCjB,KAAKoH,KAAK,QAASnG,GACnBjB,KAAKyR,SAAQ,IASf+F,EAAQrZ,UAAUsT,QAAU,SAAUsH,GACpC,QAAI,IAAuB/Y,KAAKkY,KAAO,OAASlY,KAAKkY,IAArD,CAUA,GANIlY,KAAKsY,SACPtY,KAAKkY,IAAId,OAASpX,KAAKkY,IAAIrG,QAAUiD,EAErC9U,KAAKkY,IAAIf,mBAAqBrC,EAG5BiE,EACF,IACE/Y,KAAKkY,IAAIL,QACT,MAAOlb,IAGPyH,EAAO4E,iBACFwO,EAAQI,SAAS5X,KAAKyI,OAG/BzI,KAAKkY,IAAM,OASbV,EAAQrZ,UAAUoa,OAAS,WACzB,IAAI/X,EACJ,IACE,IAAIiY,EACJ,IACEA,EAAczY,KAAKkY,IAAIQ,kBAAkB,gBACzC,MAAO/b,IAEP6D,EADkB,6BAAhBiY,EACKzY,KAAKkY,IAAIc,UAAYhZ,KAAKkY,IAAIM,aAE9BxY,KAAKkY,IAAIM,aAElB,MAAO7b,GACPqD,KAAK8Q,QAAQnU,GAEX,MAAQ6D,GACVR,KAAK4T,OAAOpT,IAUhBgX,EAAQrZ,UAAUma,OAAS,WACzB,YAAO,IAAuBlU,EAAO6U,iBAAmBjZ,KAAKqU,IAAMrU,KAAK2N,YAS1E6J,EAAQrZ,UAAU0Z,MAAQ,WACxB7X,KAAKyR,WASP+F,EAAQqB,cAAgB,EACxBrB,EAAQI,YAEJxT,EAAO4E,WACL5E,EAAO8S,YACT9S,EAAO8S,YAAY,WAAYS,GACtBvT,EAAOoC,kBAChBpC,EAAOoC,iBAAiB,eAAgBmR,GAAe,MAYxDja,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxHwR,YAAY,GAAGhE,oBAAoB,GAAGiE,oBAAoB,GAAGxP,MAAQ,GAAG8M,qBAAqB,KAAKsE,IAAI,SAAS/b,EAAQU,EAAOJ,GAmCjI,SAASuX,EAAS9S,GAChB,IAAIwL,EAAexL,GAAQA,EAAKwL,YAC3ByL,IAAWzL,IACd1N,KAAKmR,gBAAiB,GAExBpB,EAAUrS,KAAKsC,KAAMkC,GAnCvB,IAAI6N,EAAY5S,EAAQ,gBACpBkQ,EAAUlQ,EAAQ,WAClBqP,EAASrP,EAAQ,oBACjBgY,EAAUhY,EAAQ,qBAClBic,EAAQjc,EAAQ,SAChB2K,EAAQ3K,EAAQ,SAAS,4BAM7BU,EAAOJ,QAAUuX,EAMjB,IAAImE,EAGK,MADG,IADWhc,EAAQ,wBACEoX,SAAS,IACrBoE,aAsBrBxD,EAAQH,EAASjF,GAMjBiF,EAAQ7W,UAAUgO,KAAO,UASzB6I,EAAQ7W,UAAUsV,OAAS,WACzBzT,KAAKqZ,QAUPrE,EAAQ7W,UAAUqT,MAAQ,SAAU8H,GAKlC,SAAS9H,IACP1J,EAAM,UACNlC,EAAKoI,WAAa,SAClBsL,IAPF,IAAI1T,EAAO5F,KAUX,GARAA,KAAKgO,WAAa,UAQdhO,KAAKmU,UAAYnU,KAAKL,SAAU,CAClC,IAAI4Z,EAAQ,EAERvZ,KAAKmU,UACPrM,EAAM,+CACNyR,IACAvZ,KAAK4G,KAAK,eAAgB,WACxBkB,EAAM,gCACJyR,GAAS/H,OAIVxR,KAAKL,WACRmI,EAAM,+CACNyR,IACAvZ,KAAK4G,KAAK,QAAS,WACjBkB,EAAM,gCACJyR,GAAS/H,YAIfA,KAUJwD,EAAQ7W,UAAUkb,KAAO,WACvBvR,EAAM,WACN9H,KAAKmU,SAAU,EACfnU,KAAK0V,SACL1V,KAAKoH,KAAK,SASZ4N,EAAQ7W,UAAUyV,OAAS,SAAUpT,GACnC,IAAIoF,EAAO5F,KACX8H,EAAM,sBAAuBtH,GAkB7BgM,EAAOgN,cAAchZ,EAAMR,KAAKoQ,OAAO/B,WAjBxB,SAAUuC,EAAQnI,EAAO8Q,GAOtC,GALI,YAAc3T,EAAKoI,YACrBpI,EAAKuM,SAIH,UAAYvB,EAAO1L,KAErB,OADAU,EAAKmL,WACE,EAITnL,EAAKiL,SAASD,KAOZ,WAAa5Q,KAAKgO,aAEpBhO,KAAKmU,SAAU,EACfnU,KAAKoH,KAAK,gBAEN,SAAWpH,KAAKgO,WAClBhO,KAAKqZ,OAELvR,EAAM,uCAAwC9H,KAAKgO,cAWzDgH,EAAQ7W,UAAUuV,QAAU,WAG1B,SAAS9B,IACP9J,EAAM,wBACNlC,EAAKgN,QAAS1N,KAAM,WAJtB,IAAIU,EAAO5F,KAOP,SAAWA,KAAKgO,YAClBlG,EAAM,4BACN8J,MAIA9J,EAAM,wCACN9H,KAAK4G,KAAK,OAAQgL,KAYtBoD,EAAQ7W,UAAUyU,MAAQ,SAAUe,GAClC,IAAI/N,EAAO5F,KACXA,KAAKL,UAAW,EAChB,IAAI8Z,EAAa,WACf7T,EAAKjG,UAAW,EAChBiG,EAAKwB,KAAK,UAGZoF,EAAOkN,cAAc/F,EAAS3T,KAAKmR,eAAgB,SAAU3Q,GAC3DoF,EAAKwQ,QAAQ5V,EAAMiZ,MAUvBzE,EAAQ7W,UAAU0O,IAAM,WACtB,IAAIM,EAAQnN,KAAKmN,UACbwM,EAAS3Z,KAAKgN,OAAS,QAAU,OACjCE,EAAO,GAyBX,OAtBI,IAAUlN,KAAK6N,oBACjBV,EAAMnN,KAAK4N,gBAAkBwL,KAG1BpZ,KAAKmR,gBAAmBhE,EAAMgD,MACjChD,EAAMyM,IAAM,GAGdzM,EAAQE,EAAQ7J,OAAO2J,GAGnBnN,KAAKkN,OAAU,UAAYyM,GAAgC,MAAtBE,OAAO7Z,KAAKkN,OACjD,SAAWyM,GAAgC,KAAtBE,OAAO7Z,KAAKkN,SACnCA,EAAO,IAAMlN,KAAKkN,MAIhBC,EAAMxP,SACRwP,EAAQ,IAAMA,GAITwM,EAAS,QAD2B,IAAhC3Z,KAAKG,SAASoQ,QAAQ,KACD,IAAMvQ,KAAKG,SAAW,IAAMH,KAAKG,UAAY+M,EAAOlN,KAAKuN,KAAOJ,KAG/F2M,eAAe,GAAGxC,oBAAoB,GAAGxP,MAAQ,GAAG4E,mBAAmB,GAAGW,QAAU,GAAGuH,qBAAqB,GAAGwE,MAAQ,KAAKW,IAAI,SAAS5c,EAAQU,EAAOJ,IAC3J,SAAW2G,GA2CX,SAAS4V,EAAI9X,GACQA,GAAQA,EAAKwL,cAE9B1N,KAAKmR,gBAAiB,GAExBnR,KAAKuO,kBAAoBrM,EAAKqM,kBAC9BvO,KAAKia,sBAAwBC,IAAqBhY,EAAK8M,UACvDhP,KAAKsQ,UAAYpO,EAAKoO,UACjBtQ,KAAKia,wBACRE,EAAYC,GAEdrK,EAAUrS,KAAKsC,KAAMkC,GAjDvB,IAOIkY,EAPArK,EAAY5S,EAAQ,gBACpBqP,EAASrP,EAAQ,oBACjBkQ,EAAUlQ,EAAQ,WAClBgY,EAAUhY,EAAQ,qBAClBic,EAAQjc,EAAQ,SAChB2K,EAAQ3K,EAAQ,SAAS,8BACzB+c,EAAmB9V,EAAO+V,WAAa/V,EAAOiW,aAElD,GAAsB,oBAAXxU,OACT,IACEuU,EAAgBjd,EAAQ,MACxB,MAAOR,IASX,IAAIwd,EAAYD,EACXC,GAA+B,oBAAXtU,SACvBsU,EAAYC,GAOdvc,EAAOJ,QAAUuc,EA2BjB7E,EAAQ6E,EAAIjK,GAQZiK,EAAG7b,UAAUgO,KAAO,YAMpB6N,EAAG7b,UAAUgT,gBAAiB,EAQ9B6I,EAAG7b,UAAUsV,OAAS,WACpB,GAAKzT,KAAKsa,QAAV,CAKA,IAAIzN,EAAM7M,KAAK6M,MACXyD,EAAYtQ,KAAKsQ,UACjBpO,GACFkL,MAAOpN,KAAKoN,MACZmB,kBAAmBvO,KAAKuO,mBAI1BrM,EAAKuM,IAAMzO,KAAKyO,IAChBvM,EAAKjE,IAAM+B,KAAK/B,IAChBiE,EAAKwM,WAAa1O,KAAK0O,WACvBxM,EAAKyM,KAAO3O,KAAK2O,KACjBzM,EAAK0M,GAAK5O,KAAK4O,GACf1M,EAAK2M,QAAU7O,KAAK6O,QACpB3M,EAAK4M,mBAAqB9O,KAAK8O,mBAC3B9O,KAAKkP,eACPhN,EAAKqY,QAAUva,KAAKkP,cAElBlP,KAAKoP,eACPlN,EAAKkN,aAAepP,KAAKoP,cAG3B,IACEpP,KAAKwa,GAAKxa,KAAKia,sBAAyB3J,EAAY,IAAI6J,EAAUtN,EAAKyD,GAAa,IAAI6J,EAAUtN,GAAQ,IAAIsN,EAAUtN,EAAKyD,EAAWpO,GACxI,MAAOjB,GACP,OAAOjB,KAAKoH,KAAK,QAASnG,QAGD8N,IAAvB/O,KAAKwa,GAAGnM,aACVrO,KAAKmR,gBAAiB,GAGpBnR,KAAKwa,GAAGC,UAAYza,KAAKwa,GAAGC,SAASC,QACvC1a,KAAKmR,gBAAiB,EACtBnR,KAAKwa,GAAGnM,WAAa,cAErBrO,KAAKwa,GAAGnM,WAAa,cAGvBrO,KAAK2a,sBASPX,EAAG7b,UAAUwc,kBAAoB,WAC/B,IAAI/U,EAAO5F,KAEXA,KAAKwa,GAAGI,OAAS,WACfhV,EAAKuM,UAEPnS,KAAKwa,GAAGxI,QAAU,WAChBpM,EAAKmL,WAEP/Q,KAAKwa,GAAGK,UAAY,SAAUC,GAC5BlV,EAAKgO,OAAOkH,EAAGta,OAEjBR,KAAKwa,GAAG3I,QAAU,SAAUlV,GAC1BiJ,EAAKkL,QAAQ,kBAAmBnU,KAWpCqd,EAAG7b,UAAUyU,MAAQ,SAAUe,GA4C7B,SAASoH,IACPnV,EAAKwB,KAAK,SAIVoJ,WAAW,WACT5K,EAAKjG,UAAW,EAChBiG,EAAKwB,KAAK,UACT,GAnDL,IAAIxB,EAAO5F,KACXA,KAAKL,UAAW,EAKhB,IAAK,IADD4Z,EAAQ5F,EAAQhW,OACXP,EAAI,EAAGI,EAAI+b,EAAOnc,EAAII,EAAGJ,KAChC,SAAWwT,GACTpE,EAAOwO,aAAapK,EAAQhL,EAAKuL,eAAgB,SAAU3Q,GACzD,IAAKoF,EAAKqU,sBAAuB,CAE/B,IAAI/X,KACA0O,EAAO/L,UACT3C,EAAK2Q,SAAWjC,EAAO/L,QAAQgO,UAG7BjN,EAAK2I,oBACG,iBAAoB/N,EAAO4D,EAAO6W,OAAOxZ,WAAWjB,GAAQA,EAAK7C,QACjEiI,EAAK2I,kBAAkBC,YAC/BtM,EAAK2Q,UAAW,GAQtB,IACMjN,EAAKqU,sBAEPrU,EAAK4U,GAAGnJ,KAAK7Q,GAEboF,EAAK4U,GAAGnJ,KAAK7Q,EAAM0B,GAErB,MAAOvF,GACPmL,EAAM,2CAGNyR,GAASwB,MA/Bf,CAiCGpH,EAAQvW,KAqBf4c,EAAG7b,UAAU4S,QAAU,WACrBhB,EAAU5R,UAAU4S,QAAQrT,KAAKsC,OASnCga,EAAG7b,UAAUuV,QAAU,gBACE,IAAZ1T,KAAKwa,IACdxa,KAAKwa,GAAG5I,SAUZoI,EAAG7b,UAAU0O,IAAM,WACjB,IAAIM,EAAQnN,KAAKmN,UACbwM,EAAS3Z,KAAKgN,OAAS,MAAQ,KAC/BE,EAAO,GA0BX,OAvBIlN,KAAKkN,OAAU,QAAUyM,GAAgC,MAAtBE,OAAO7Z,KAAKkN,OAChD,OAASyM,GAAgC,KAAtBE,OAAO7Z,KAAKkN,SAChCA,EAAO,IAAMlN,KAAKkN,MAIhBlN,KAAK6N,oBACPV,EAAMnN,KAAK4N,gBAAkBwL,KAI1BpZ,KAAKmR,iBACRhE,EAAMyM,IAAM,IAGdzM,EAAQE,EAAQ7J,OAAO2J,IAGbxP,SACRwP,EAAQ,IAAMA,GAITwM,EAAS,QAD2B,IAAhC3Z,KAAKG,SAASoQ,QAAQ,KACD,IAAMvQ,KAAKG,SAAW,IAAMH,KAAKG,UAAY+M,EAAOlN,KAAKuN,KAAOJ,GAUlG6M,EAAG7b,UAAUmc,MAAQ,WACnB,SAASH,GAAe,iBAAkBA,GAAana,KAAKmM,OAAS6N,EAAG7b,UAAUgO,SAGjFzO,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxHiU,eAAe,GAAGxC,oBAAoB,GAAGxP,MAAQ,GAAG4E,mBAAmB,GAAGW,QAAU,GAAGmN,GAAK,EAAEpB,MAAQ,KAAK8B,IAAI,SAAS/d,EAAQU,EAAOJ,IAC1I,SAAW2G,GAGX,IAAI+W,EAAUhe,EAAQ,YAEtBU,EAAOJ,QAAU,SAAUyE,GACzB,IAAIqS,EAAUrS,EAAKqS,QAIfC,EAAUtS,EAAKsS,QAIf7G,EAAazL,EAAKyL,WAGtB,IACE,GAAI,oBAAuBoG,kBAAoBQ,GAAW4G,GACxD,OAAO,IAAIpH,eAEb,MAAOpX,IAKT,IACE,GAAI,oBAAuBsc,iBAAmBzE,GAAW7G,EACvD,OAAO,IAAIsL,eAEb,MAAOtc,IAET,IAAK4X,EACH,IACE,OAAO,IAAInQ,GAAQ,UAAUgC,OAAO,UAAUgV,KAAK,OAAM,qBACzD,MAAOze,QAIVe,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxHwV,WAAW,KAAKC,IAAI,SAASne,EAAQU,EAAOJ,IAC/C,SAAW2G,GA+HX,SAASmX,EAAmB3K,EAAQ9P,GAGlC,OAAOA,EADO,IAAMrD,EAAQkW,QAAQ/C,EAAO1L,MAAQ0L,EAAOpQ,KAAKA,MAQjE,SAASgb,EAAkB5K,EAAQO,EAAgBrQ,GACjD,IAAKqQ,EACH,OAAO1T,EAAQge,mBAAmB7K,EAAQ9P,GAG5C,IAAIN,EAAOoQ,EAAOpQ,KACdkb,EAAe,IAAI7Z,WAAWrB,GAC9Bmb,EAAe,IAAI9Z,WAAW,EAAIrB,EAAKiB,YAE3Cka,EAAa,GAAKhI,EAAQ/C,EAAO1L,MACjC,IAAK,IAAI9H,EAAI,EAAGA,EAAIse,EAAa/d,OAAQP,IACvCue,EAAave,EAAE,GAAKse,EAAate,GAGnC,OAAO0D,EAAS6a,EAAa5Z,QAG/B,SAAS6Z,EAAwBhL,EAAQO,EAAgBrQ,GACvD,IAAKqQ,EACH,OAAO1T,EAAQge,mBAAmB7K,EAAQ9P,GAG5C,IAAI+a,EAAK,IAAIC,WAKb,OAJAD,EAAGzE,OAAS,WACVxG,EAAOpQ,KAAOqb,EAAG3a,OACjBzD,EAAQud,aAAapK,EAAQO,GAAgB,EAAMrQ,IAE9C+a,EAAGE,kBAAkBnL,EAAOpQ,MAGrC,SAASwb,EAAWpL,EAAQO,EAAgBrQ,GAC1C,IAAKqQ,EACH,OAAO1T,EAAQge,mBAAmB7K,EAAQ9P,GAG5C,GAAImb,EACF,OAAOL,EAAwBhL,EAAQO,EAAgBrQ,GAGzD,IAAInD,EAAS,IAAIkE,WAAW,GAI5B,OAHAlE,EAAO,GAAKgW,EAAQ/C,EAAO1L,MAGpBpE,EAFI,IAAIsE,GAAMzH,EAAOoE,OAAQ6O,EAAOpQ,QAoF7C,SAAS0b,EAAU1b,GACjB,IACEA,EAAO2b,EAAKvY,OAAOpD,GAAQ4b,QAAQ,IACnC,MAAOzf,GACP,OAAO,EAET,OAAO6D,EAgFT,SAAS6b,EAAI/X,EAAKgY,EAAMvB,GAWtB,IAAK,IAVD7Z,EAAS,IAAImK,MAAM/G,EAAI3G,QACvB4e,EAAOC,EAAMlY,EAAI3G,OAAQod,GASpB3d,EAAI,EAAGA,EAAIkH,EAAI3G,OAAQP,KAPZ,SAASA,EAAGqf,EAAIvV,GAClCoV,EAAKG,EAAI,SAAS3K,EAAOR,GACvBpQ,EAAO9D,GAAKkU,EACZpK,EAAG4K,EAAO5Q,KAKZwb,CAActf,EAAGkH,EAAIlH,GAAImf,GAnW7B,IAMII,EANAxN,EAAOhS,EAAQ,UACfyf,EAAYzf,EAAQ,eACpB0f,EAAc1f,EAAQ,qBACtBqf,EAAQrf,EAAQ,SAChBgf,EAAOhf,EAAQ,UAGfiH,GAAUA,EAAOzC,cACnBgb,EAAgBxf,EAAQ,uBAU1B,IAAI2f,EAAiC,oBAAdvT,WAA6B,WAAW6C,KAAK7C,UAAUC,WAQ1EuT,EAAmC,oBAAdxT,WAA6B,aAAa6C,KAAK7C,UAAUC,WAM9EyS,EAAgBa,GAAaC,EAMjCtf,EAAQwP,SAAW,EAMnB,IAAI0G,EAAUlW,EAAQkW,SAClBhE,KAAU,EACViC,MAAU,EACVc,KAAU,EACVsK,KAAU,EACVzS,QAAU,EACV+C,QAAU,EACV1M,KAAU,GAGVqc,EAAc9N,EAAKwE,GAMnB1S,GAAQiE,KAAM,QAAS1E,KAAM,gBAM7B4E,EAAOjI,EAAQ,QAkBnBM,EAAQud,aAAe,SAAUpK,EAAQO,EAAgB+L,EAAYpc,GACrC,mBAAnBqQ,IACTrQ,EAAWqQ,EACXA,GAAiB,GAGO,mBAAf+L,IACTpc,EAAWoc,EACXA,EAAa,MAGf,IAAI1c,OAAwBuO,IAAhB6B,EAAOpQ,UACfuO,EACA6B,EAAOpQ,KAAKuB,QAAU6O,EAAOpQ,KAEjC,GAAI4D,EAAOzC,aAAenB,aAAgBmB,YACxC,OAAO6Z,EAAkB5K,EAAQO,EAAgBrQ,GAC5C,GAAIsE,GAAQ5E,aAAgB4D,EAAOgB,KACxC,OAAO4W,EAAWpL,EAAQO,EAAgBrQ,GAI5C,GAAIN,GAAQA,EAAKkD,OACf,OAAO6X,EAAmB3K,EAAQ9P,GAIpC,IAAIqc,EAAUxJ,EAAQ/C,EAAO1L,MAO7B,YAJI6J,IAAc6B,EAAOpQ,OACvB2c,GAAWD,EAAaf,EAAK3Y,OAAO4Z,OAAOxM,EAAOpQ,OAAS4b,QAAQ,IAAWgB,OAAOxM,EAAOpQ,OAGvFM,EAAS,GAAKqc,IAmEvB1f,EAAQge,mBAAqB,SAAS7K,EAAQ9P,GAC5C,IAAIyJ,EAAU,IAAM9M,EAAQkW,QAAQ/C,EAAO1L,MAC3C,GAAIE,GAAQwL,EAAOpQ,gBAAgB4D,EAAOgB,KAAM,CAC9C,IAAIyW,EAAK,IAAIC,WAKb,OAJAD,EAAGzE,OAAS,WACV,IAAIwC,EAAMiC,EAAG3a,OAAO+K,MAAM,KAAK,GAC/BnL,EAASyJ,EAAUqP,IAEdiC,EAAGwB,cAAczM,EAAOpQ,MAGjC,IAAI8c,EACJ,IACEA,EAAUF,OAAOG,aAAapX,MAAM,KAAM,IAAItE,WAAW+O,EAAOpQ,OAChE,MAAO7D,GAIP,IAAK,IAFD6gB,EAAQ,IAAI3b,WAAW+O,EAAOpQ,MAC9Bid,EAAQ,IAAIpS,MAAMmS,EAAM7f,QACnBP,EAAI,EAAGA,EAAIogB,EAAM7f,OAAQP,IAChCqgB,EAAMrgB,GAAKogB,EAAMpgB,GAEnBkgB,EAAUF,OAAOG,aAAapX,MAAM,KAAMsX,GAG5C,OADAlT,GAAWnG,EAAOsZ,KAAKJ,GAChBxc,EAASyJ,IAUlB9M,EAAQoW,aAAe,SAAUrT,EAAM6N,EAAYsP,GACjD,QAAa5O,IAATvO,EACF,OAAOS,EAGT,GAAoB,iBAATT,EAAmB,CAC5B,GAAuB,MAAnBA,EAAKod,OAAO,GACd,OAAOngB,EAAQogB,mBAAmBrd,EAAK0L,OAAO,GAAImC,GAGpD,GAAIsP,IAEW,KADbnd,EAAO0b,EAAU1b,IAEf,OAAOS,EAGPiE,EAAO1E,EAAKod,OAAO,GAEvB,OAAI/D,OAAO3U,IAASA,GAAS+X,EAAY/X,GAIrC1E,EAAK7C,OAAS,GACPuH,KAAM+X,EAAY/X,GAAO1E,KAAMA,EAAKmD,UAAU,KAE9CuB,KAAM+X,EAAY/X,IANpBjE,EAUX,IACIiE,EADU,IAAIrD,WAAWrB,GACV,GACfsd,EAAOjB,EAAYrc,EAAM,GAI7B,OAHI4E,GAAuB,SAAfiJ,IACVyP,EAAO,IAAI1Y,GAAM0Y,MAEV5Y,KAAM+X,EAAY/X,GAAO1E,KAAMsd,IAmB1CrgB,EAAQogB,mBAAqB,SAASvM,EAAKjD,GACzC,IAAInJ,EAAO+X,EAAY3L,EAAIsM,OAAO,IAClC,IAAKjB,EACH,OAASzX,KAAMA,EAAM1E,MAAQkD,QAAQ,EAAMlD,KAAM8Q,EAAIpF,OAAO,KAG9D,IAAI1L,EAAOmc,EAAc/Y,OAAO0N,EAAIpF,OAAO,IAM3C,MAJmB,SAAfmC,GAAyBjJ,IAC3B5E,EAAO,IAAI4E,GAAM5E,MAGV0E,KAAMA,EAAM1E,KAAMA,IAmB7B/C,EAAQic,cAAgB,SAAU/F,EAASxC,EAAgBrQ,GAoBzD,SAASid,EAAgBxT,GACvB,OAAOA,EAAQ5M,OAAS,IAAM4M,EApBF,mBAAnB4G,IACTrQ,EAAWqQ,EACXA,EAAiB,MAGnB,IAAIsG,EAAWmF,EAAUjJ,GAEzB,OAAIxC,GAAkBsG,EAChBrS,IAAS6W,EACJxe,EAAQugB,oBAAoBrK,EAAS7S,GAGvCrD,EAAQwgB,2BAA2BtK,EAAS7S,GAGhD6S,EAAQhW,YAcb0e,EAAI1I,EANJ,SAAmB/C,EAAQsN,GACzBzgB,EAAQud,aAAapK,IAAS6G,GAAmBtG,GAAgB,EAAO,SAAS5G,GAC/E2T,EAAa,KAAMH,EAAgBxT,OAIf,SAAStJ,EAAKkd,GACpC,OAAOrd,EAASqd,EAAQ/C,KAAK,OAdtBta,EAAS,OA8CpBrD,EAAQ+b,cAAgB,SAAUhZ,EAAM6N,EAAYvN,GAClD,GAAoB,iBAATN,EACT,OAAO/C,EAAQ2gB,sBAAsB5d,EAAM6N,EAAYvN,GAG/B,mBAAfuN,IACTvN,EAAWuN,EACXA,EAAa,MAGf,IAAIuC,EACJ,GAAa,KAATpQ,EAEF,OAAOM,EAASG,EAAK,EAAG,GAK1B,IAAK,IAFYpE,EAAGyU,EAAhB3T,EAAS,GAEJP,EAAI,EAAGI,EAAIgD,EAAK7C,OAAQP,EAAII,EAAGJ,IAAK,CAC3C,IAAIihB,EAAM7d,EAAKod,OAAOxgB,GAEtB,GAAY,MAARihB,EAAJ,CAKA,GAAe,KAAX1gB,GAAkBA,IAAWd,EAAIgd,OAAOlc,IAE1C,OAAOmD,EAASG,EAAK,EAAG,GAK1B,GAFAqQ,EAAM9Q,EAAK0L,OAAO9O,EAAI,EAAGP,GAErBc,GAAU2T,EAAI3T,OAEhB,OAAOmD,EAASG,EAAK,EAAG,GAG1B,GAAIqQ,EAAI3T,OAAQ,CAGd,GAFAiT,EAASnT,EAAQoW,aAAavC,EAAKjD,GAAY,GAE3CpN,EAAIiE,OAAS0L,EAAO1L,MAAQjE,EAAIT,OAASoQ,EAAOpQ,KAElD,OAAOM,EAASG,EAAK,EAAG,GAI1B,IAAI,IADMH,EAAS8P,EAAQxT,EAAIP,EAAGW,GACf,OAIrBJ,GAAKP,EACLc,EAAS,QA9BPA,GAAU0gB,EAiCd,MAAe,KAAX1gB,EAEKmD,EAASG,EAAK,EAAG,QAF1B,GAqBFxD,EAAQwgB,2BAA6B,SAAStK,EAAS7S,GACrD,IAAK6S,EAAQhW,OACX,OAAOmD,EAAS,IAAIa,YAAY,IASlC0a,EAAI1I,EANJ,SAAmB/C,EAAQsN,GACzBzgB,EAAQud,aAAapK,GAAQ,GAAM,EAAM,SAASpQ,GAChD,OAAO0d,EAAa,KAAM1d,MAIN,SAASS,EAAKqd,GACpC,IAAIC,EAAcD,EAAeE,OAAO,SAASC,EAAKva,GACpD,IAAIT,EAMJ,OAJEA,EADe,iBAANS,EACHA,EAAEvG,OAEFuG,EAAEzC,WAEHgd,EAAMhb,EAAIib,WAAW/gB,OAAS8F,EAAM,GAC1C,GAECkb,EAAc,IAAI9c,WAAW0c,GAE7BK,EAAc,EA8BlB,OA7BAN,EAAeO,QAAQ,SAAS3a,GAC9B,IAAI4a,EAAwB,iBAAN5a,EAClB6a,EAAK7a,EACT,GAAI4a,EAAU,CAEZ,IAAK,IADDE,EAAO,IAAInd,WAAWqC,EAAEvG,QACnBP,EAAI,EAAGA,EAAI8G,EAAEvG,OAAQP,IAC5B4hB,EAAK5hB,GAAK8G,EAAEX,WAAWnG,GAEzB2hB,EAAKC,EAAKjd,OAIV4c,EAAYC,KADVE,EAC2B,EAEA,EAI/B,IAAK,IADDG,EAASF,EAAGtd,WAAWid,WAClBthB,EAAI,EAAGA,EAAI6hB,EAAOthB,OAAQP,IACjCuhB,EAAYC,KAAiBlV,SAASuV,EAAO7hB,IAE/CuhB,EAAYC,KAAiB,IAG7B,IAAK,IADDI,EAAO,IAAInd,WAAWkd,GACjB3hB,EAAI,EAAGA,EAAI4hB,EAAKrhB,OAAQP,IAC/BuhB,EAAYC,KAAiBI,EAAK5hB,KAI/B0D,EAAS6d,EAAY5c,WAQhCtE,EAAQugB,oBAAsB,SAASrK,EAAS7S,GAgC9Cub,EAAI1I,EA/BJ,SAAmB/C,EAAQsN,GACzBzgB,EAAQud,aAAapK,GAAQ,GAAM,EAAM,SAASuM,GAChD,IAAI+B,EAAmB,IAAIrd,WAAW,GAEtC,GADAqd,EAAiB,GAAK,EACC,iBAAZ/B,EAAsB,CAE/B,IAAK,IADD6B,EAAO,IAAInd,WAAWsb,EAAQxf,QACzBP,EAAI,EAAGA,EAAI+f,EAAQxf,OAAQP,IAClC4hB,EAAK5hB,GAAK+f,EAAQ5Z,WAAWnG,GAE/B+f,EAAU6B,EAAKjd,OACfmd,EAAiB,GAAK,EASxB,IAAK,IAFDD,GAJO9B,aAAmBxb,YAC1Bwb,EAAQ1b,WACR0b,EAAQ1X,MAEKiZ,WACbS,EAAY,IAAItd,WAAWod,EAAOthB,OAAS,GACtCP,EAAI,EAAGA,EAAI6hB,EAAOthB,OAAQP,IACjC+hB,EAAU/hB,GAAKsM,SAASuV,EAAO7hB,IAIjC,GAFA+hB,EAAUF,EAAOthB,QAAU,IAEvByH,EAAM,CACR,IAAIga,EAAO,IAAIha,GAAM8Z,EAAiBnd,OAAQod,EAAUpd,OAAQob,IAChEe,EAAa,KAAMkB,OAKD,SAASne,EAAKkd,GACpC,OAAOrd,EAAS,IAAIsE,EAAK+Y,OAa7B1gB,EAAQ2gB,sBAAwB,SAAU5d,EAAM6N,EAAYvN,GAChC,mBAAfuN,IACTvN,EAAWuN,EACXA,EAAa,MAMf,IAHA,IAAIgR,EAAa7e,EACb8e,KAEGD,EAAW5d,WAAa,GAAG,CAKhC,IAAK,IAJD8d,EAAY,IAAI1d,WAAWwd,GAC3BP,EAA4B,IAAjBS,EAAU,GACrBC,EAAY,GAEPpiB,EAAI,EACU,MAAjBmiB,EAAUniB,GADEA,IAAK,CAIrB,GAAIoiB,EAAU7hB,OAAS,IACrB,OAAOmD,EAASG,EAAK,EAAG,GAG1Bue,GAAaD,EAAUniB,GAGzBiiB,EAAaxC,EAAYwC,EAAY,EAAIG,EAAU7hB,QACnD6hB,EAAY9V,SAAS8V,GAErB,IAAIlO,EAAMuL,EAAYwC,EAAY,EAAGG,GACrC,GAAIV,EACF,IACExN,EAAM8L,OAAOG,aAAapX,MAAM,KAAM,IAAItE,WAAWyP,IACrD,MAAO3U,GAEP,IAAI6gB,EAAQ,IAAI3b,WAAWyP,GAC3BA,EAAM,GACN,IAASlU,EAAI,EAAGA,EAAIogB,EAAM7f,OAAQP,IAChCkU,GAAO8L,OAAOG,aAAaC,EAAMpgB,IAKvCkiB,EAAQ3Y,KAAK2K,GACb+N,EAAaxC,EAAYwC,EAAYG,GAGvC,IAAIjG,EAAQ+F,EAAQ3hB,OACpB2hB,EAAQT,QAAQ,SAAS9c,EAAQ3E,GAC/B0D,EAASrD,EAAQoW,aAAa9R,EAAQsM,GAAY,GAAOjR,EAAGmc,QAI7D7b,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxH4Z,SAAS,GAAGC,SAAS,GAAGlD,MAAQ,EAAEmD,oBAAoB,EAAEC,qBAAqB,EAAER,KAAO,EAAES,cAAc,KAAKC,IAAI,SAAS3iB,EAAQU,EAAOJ,GAS1II,EAAOJ,QAAUS,OAAOiR,MAAQ,SAAerR,GAC7C,IAAIiiB,KACAC,EAAM9hB,OAAOC,UAAUC,eAE3B,IAAK,IAAIhB,KAAKU,EACRkiB,EAAItiB,KAAKI,EAAKV,IAChB2iB,EAAIpZ,KAAKvJ,GAGb,OAAO2iB,QAGHE,IAAI,SAAS9iB,EAAQU,EAAOJ,IAClC,SAAW2G,IAET,SAAS8b,GAqBV,SAASC,EAAWC,GAMnB,IALA,IAGIjhB,EACAkhB,EAJAC,KACAC,EAAU,EACV5iB,EAASyiB,EAAOziB,OAGb4iB,EAAU5iB,IAChBwB,EAAQihB,EAAO7c,WAAWgd,OACb,OAAUphB,GAAS,OAAUohB,EAAU5iB,EAG3B,QAAX,OADb0iB,EAAQD,EAAO7c,WAAWgd,OAEzBD,EAAO3Z,OAAe,KAARxH,IAAkB,KAAe,KAARkhB,GAAiB,QAIxDC,EAAO3Z,KAAKxH,GACZohB,KAGDD,EAAO3Z,KAAKxH,GAGd,OAAOmhB,EAIR,SAASE,EAAWC,GAKnB,IAJA,IAEIthB,EAFAxB,EAAS8iB,EAAM9iB,OACf8K,GAAS,EAET6X,EAAS,KACJ7X,EAAQ9K,IAChBwB,EAAQshB,EAAMhY,IACF,QAEX6X,GAAUI,GADVvhB,GAAS,SAC8B,GAAK,KAAQ,OACpDA,EAAQ,MAAiB,KAARA,GAElBmhB,GAAUI,EAAmBvhB,GAE9B,OAAOmhB,EAGR,SAASK,EAAiBC,EAAWxE,GACpC,GAAIwE,GAAa,OAAUA,GAAa,MAAQ,CAC/C,GAAIxE,EACH,MAAM9e,MACL,oBAAsBsjB,EAAUlC,SAAS,IAAImC,cAC7C,0BAGF,OAAO,EAER,OAAO,EAIR,SAASC,EAAWF,EAAWnQ,GAC9B,OAAOiQ,EAAqBE,GAAanQ,EAAS,GAAQ,KAG3D,SAASsQ,EAAgBH,EAAWxE,GACnC,GAAgC,IAAf,WAAZwE,GACJ,OAAOF,EAAmBE,GAE3B,IAAII,EAAS,GAiBb,OAhBgC,IAAf,WAAZJ,GACJI,EAASN,EAAqBE,GAAa,EAAK,GAAQ,KAEpB,IAAf,WAAZA,IACJD,EAAiBC,EAAWxE,KAChCwE,EAAY,OAEbI,EAASN,EAAqBE,GAAa,GAAM,GAAQ,KACzDI,GAAUF,EAAWF,EAAW,IAEI,IAAf,WAAZA,KACTI,EAASN,EAAqBE,GAAa,GAAM,EAAQ,KACzDI,GAAUF,EAAWF,EAAW,IAChCI,GAAUF,EAAWF,EAAW,IAEjCI,GAAUN,EAAgC,GAAZE,EAAoB,KAsBnD,SAASK,IACR,GAAIC,GAAaC,EAChB,MAAM7jB,MAAM,sBAGb,IAAI8jB,EAA0C,IAAvBC,EAAUH,GAGjC,GAFAA,IAEiC,MAAT,IAAnBE,GACJ,OAA0B,GAAnBA,EAIR,MAAM9jB,MAAM,6BAGb,SAASgkB,EAAalF,GACrB,IAAImF,EACAC,EACAC,EACAC,EACAd,EAEJ,GAAIM,EAAYC,EACf,MAAM7jB,MAAM,sBAGb,GAAI4jB,GAAaC,EAChB,OAAO,EAQR,GAJAI,EAA+B,IAAvBF,EAAUH,GAClBA,IAGsB,IAAT,IAARK,GACJ,OAAOA,EAIR,GAAsB,MAAT,IAARA,GAAuB,CAG3B,GAFAC,EAAQP,KACRL,GAAsB,GAARW,IAAiB,EAAKC,IACnB,IAChB,OAAOZ,EAEP,MAAMtjB,MAAM,6BAKd,GAAsB,MAAT,IAARikB,GAAuB,CAI3B,GAHAC,EAAQP,IACRQ,EAAQR,KACRL,GAAsB,GAARW,IAAiB,GAAOC,GAAS,EAAKC,IACnC,KAChB,OAAOd,EAAiBC,EAAWxE,GAAUwE,EAAY,MAEzD,MAAMtjB,MAAM,6BAKd,GAAsB,MAAT,IAARikB,KACJC,EAAQP,IACRQ,EAAQR,IACRS,EAAQT,KACRL,GAAsB,EAARW,IAAiB,GAASC,GAAS,GAC/CC,GAAS,EAAQC,IACF,OAAYd,GAAa,SACzC,OAAOA,EAIT,MAAMtjB,MAAM,0BArMb,IAAIqkB,EAAgC,iBAAXlkB,GAAuBA,EAG5CmkB,EAA8B,iBAAV/jB,GAAsBA,GAC7CA,EAAOJ,SAAWkkB,GAAe9jB,EAI9BoR,EAA8B,iBAAV7K,GAAsBA,EAC1C6K,EAAW7K,SAAW6K,GAAcA,EAAWpJ,SAAWoJ,IAC7DiR,EAAOjR,GAKR,IAyLIoS,EACAF,EACAD,EA3LAR,EAAqBtD,OAAOG,aA6M5BpB,GACH0F,QAAW,QACXre,OAtHD,SAAoB4c,EAAQle,GAS3B,IAPA,IAAIka,GAAS,KADbla,EAAOA,OACqBka,OAExB0F,EAAa3B,EAAWC,GACxBziB,EAASmkB,EAAWnkB,OACpB8K,GAAS,EAETsZ,EAAa,KACRtZ,EAAQ9K,GAEhBokB,GAAchB,EADFe,EAAWrZ,GACkB2T,GAE1C,OAAO2F,GA0GPne,OApBD,SAAoBme,EAAY7f,GAE/B,IAAIka,GAAS,KADbla,EAAOA,OACqBka,OAE5BiF,EAAYlB,EAAW4B,GACvBZ,EAAYE,EAAU1jB,OACtBujB,EAAY,EAGZ,IAFA,IACIc,EADAF,MAEoC,KAAhCE,EAAMV,EAAalF,KAC1B0F,EAAWnb,KAAKqb,GAEjB,OAAOxB,EAAWsB,KAanB,GACkB,mBAAVG,QACc,iBAAdA,OAAOC,KACdD,OAAOC,IAEPD,OAAO,WACN,OAAO9F,SAEF,GAAIwF,IAAgBA,EAAYQ,SACtC,GAAIP,EACHA,EAAWnkB,QAAU0e,MACf,CACN,IACI/d,KAAwBA,eAC5B,IAAK,IAAIH,KAAOke,EACf/d,EAAeV,KAAKye,EAAMle,KAAS0jB,EAAY1jB,GAAOke,EAAKle,SAI7DiiB,EAAK/D,KAAOA,EA1Pb,CA6PCnc,QAECtC,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,gBACrHuc,IAAI,SAASjlB,EAAQU,EAAOJ,IAClC,SAAW2G,GA4BX,SAASwY,EAAW9e,GAClB,IAAKA,GAAsB,iBAARA,EACjB,OAAO,EAGT,GAAIukB,EAAQvkB,GAAM,CAChB,IAAK,IAAIV,EAAI,EAAGI,EAAIM,EAAIH,OAAQP,EAAII,EAAGJ,IACrC,GAAIwf,EAAU9e,EAAIV,IAChB,OAAO,EAGX,OAAO,EAGT,GAA8B,mBAAlBgH,EAAO6W,QAAyB7W,EAAO6W,OAAOqH,UAAYle,EAAO6W,OAAOqH,SAASxkB,IAC3D,mBAAvBsG,EAAOzC,aAA8B7D,aAAe6D,aAC3D4gB,GAAkBzkB,aAAesH,MACjCod,GAAkB1kB,aAAe2kB,KAEnC,OAAO,EAIT,GAAI3kB,EAAI4kB,QAAgC,mBAAf5kB,EAAI4kB,QAA8C,IAArBxc,UAAUvI,OAC9D,OAAOif,EAAU9e,EAAI4kB,UAAU,GAGjC,IAAK,IAAIzkB,KAAOH,EACd,GAAII,OAAOC,UAAUC,eAAeV,KAAKI,EAAKG,IAAQ2e,EAAU9e,EAAIG,IAClE,OAAO,EAIX,OAAO,EAtDT,IAAIokB,EAAUllB,EAAQ,WAElBuhB,EAAWxgB,OAAOC,UAAUugB,SAC5B6D,EAAwC,mBAAhBne,EAAOgB,MAAsD,6BAA/BsZ,EAAShhB,KAAK0G,EAAOgB,MAC3Eod,EAAwC,mBAAhBpe,EAAOqe,MAAsD,6BAA/B/D,EAAShhB,KAAK0G,EAAOqe,MAM/E5kB,EAAOJ,QAAUmf,IA+Cdlf,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxH8c,QAAU,KAAKC,IAAI,SAASzlB,EAAQU,EAAOJ,GAC9C,IAAIihB,KAAcA,SAElB7gB,EAAOJ,QAAU4N,MAAMgX,SAAW,SAAUtC,GAC1C,MAA6B,kBAAtBrB,EAAShhB,KAAKqiB,SAGjB8C,IAAI,SAAS1lB,EAAQU,EAAOJ,GAUlC,IACEI,EAAOJ,QAAoC,oBAAnBsW,gBACtB,oBAAqB,IAAIA,eAC3B,MAAO9S,GAGPpD,EAAOJ,SAAU,QAGbqlB,IAAI,SAAS3lB,EAAQU,EAAOJ,GAElC,IAAI8S,KAAaA,QAEjB1S,EAAOJ,QAAU,SAASsiB,EAAKjiB,GAC7B,GAAIyS,EAAS,OAAOwP,EAAIxP,QAAQzS,GAChC,IAAK,IAAIV,EAAI,EAAGA,EAAI2iB,EAAIpiB,SAAUP,EAChC,GAAI2iB,EAAI3iB,KAAOU,EAAK,OAAOV,EAE7B,OAAQ,QAEJ2lB,IAAI,SAAS5lB,EAAQU,EAAOJ,GA+ClC,SAASulB,EAAMC,GAEb,MADAA,EAAM7F,OAAO6F,IACLtlB,OAAS,KAAjB,CAGA,IAAIiL,EAAQ,wHAAwHsa,KAClID,GAEF,GAAKra,EAAL,CAGA,IAAI/L,EAAIsmB,WAAWva,EAAM,IAEzB,QADYA,EAAM,IAAM,MAAMa,eAE5B,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAO5M,EAAIumB,EACb,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOvmB,EAAIwmB,EACb,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAOxmB,EAAIymB,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOzmB,EAAI0mB,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAO1mB,EAAIE,EACb,IAAK,eACL,IAAK,cACL,IAAK,QACL,IAAK,OACL,IAAK,KACH,OAAOF,EACT,QACE,UAYN,SAAS2mB,EAASrhB,GAChB,OAAIA,GAAMkhB,EACD3gB,KAAK+gB,MAAMthB,EAAKkhB,GAAK,IAE1BlhB,GAAMmhB,EACD5gB,KAAK+gB,MAAMthB,EAAKmhB,GAAK,IAE1BnhB,GAAMohB,EACD7gB,KAAK+gB,MAAMthB,EAAKohB,GAAK,IAE1BphB,GAAMpF,EACD2F,KAAK+gB,MAAMthB,EAAKpF,GAAK,IAEvBoF,EAAK,KAWd,SAASuhB,EAAQvhB,GACf,OAAOwhB,EAAOxhB,EAAIkhB,EAAG,QACnBM,EAAOxhB,EAAImhB,EAAG,SACdK,EAAOxhB,EAAIohB,EAAG,WACdI,EAAOxhB,EAAIpF,EAAG,WACdoF,EAAK,MAOT,SAASwhB,EAAOxhB,EAAItF,EAAGsP,GACrB,KAAIhK,EAAKtF,GAGT,OAAIsF,EAAS,IAAJtF,EACA6F,KAAKK,MAAMZ,EAAKtF,GAAK,IAAMsP,EAE7BzJ,KAAKkhB,KAAKzhB,EAAKtF,GAAK,IAAMsP,EAAO,IAlJ1C,IAAIpP,EAAI,IACJwmB,EAAQ,GAAJxmB,EACJumB,EAAQ,GAAJC,EACJF,EAAQ,GAAJC,EACJF,EAAQ,OAAJC,EAgBRxlB,EAAOJ,QAAU,SAASiO,EAAK7G,GAC7BA,EAAUA,MACV,IAAIK,SAAcwG,EAClB,GAAa,WAATxG,GAAqBwG,EAAI/N,OAAS,EACpC,OAAOqlB,EAAMtX,GACR,GAAa,WAATxG,IAAoC,IAAf2e,MAAMnY,GACpC,OAAO7G,EAAQif,KAAOJ,EAAQhY,GAAO8X,EAAS9X,GAEhD,MAAM,IAAIpO,MACR,wDACE+M,KAAKC,UAAUoB,UAuHfqY,IAAI,SAAS5mB,EAAQU,EAAOJ,IAClC,SAAW2G,GAQX,IAAI4f,EAAc,gBACdC,EAAe,sCACfC,EAAe,mEACfC,EAAe,uBACfC,EAAY,OACZC,EAAa,OAEjBxmB,EAAOJ,QAAU,SAAmB+C,GAClC,MAAI,iBAAmBA,GAASA,GAIhCA,EAAOA,EAAKmI,QAAQyb,EAAW,IAAIzb,QAAQ0b,EAAY,IAGnDjgB,EAAOiG,MAAQA,KAAK2Y,MACf3Y,KAAK2Y,MAAMxiB,GAGhBwjB,EAAY5X,KAAK5L,EAAKmI,QAAQsb,EAAc,KAC3Ctb,QAAQub,EAAc,KACtBvb,QAAQwb,EAAc,KAClB,IAAKlc,SAAS,UAAYzH,UAHnC,GAVS,QAgBR9C,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,gBACrHye,IAAI,SAASnnB,EAAQU,EAAOJ,GASlCA,EAAQ+F,OAAS,SAAU1F,GACzB,IAAImlB,EAAM,GAEV,IAAK,IAAI7lB,KAAKU,EACRA,EAAIM,eAAehB,KACjB6lB,EAAItlB,SAAQslB,GAAO,KACvBA,GAAOsB,mBAAmBnnB,GAAK,IAAMmnB,mBAAmBzmB,EAAIV,KAIhE,OAAO6lB,GAUTxlB,EAAQmG,OAAS,SAAS4gB,GAGxB,IAAK,IAFDC,KACAC,EAAQF,EAAGvY,MAAM,KACZ7O,EAAI,EAAGI,EAAIknB,EAAM/mB,OAAQP,EAAII,EAAGJ,IAAK,CAC5C,IAAIunB,EAAOD,EAAMtnB,GAAG6O,MAAM,KAC1BwY,EAAIG,mBAAmBD,EAAK,KAAOC,mBAAmBD,EAAK,IAE7D,OAAOF,QAGHI,IAAI,SAAS1nB,EAAQU,EAAOJ,GAQlC,IAAIqnB,EAAK,0OAELC,GACA,SAAU,WAAY,YAAa,WAAY,OAAQ,WAAY,OAAQ,OAAQ,WAAY,OAAQ,YAAa,OAAQ,QAAS,UAGzIlnB,EAAOJ,QAAU,SAAkBwlB,GAC/B,IAAIpN,EAAMoN,EACNzb,EAAIyb,EAAI1S,QAAQ,KAChB5T,EAAIsmB,EAAI1S,QAAQ,MAEV,GAAN/I,IAAiB,GAAN7K,IACXsmB,EAAMA,EAAItf,UAAU,EAAG6D,GAAKyb,EAAItf,UAAU6D,EAAG7K,GAAGgM,QAAQ,KAAM,KAAOsa,EAAItf,UAAUhH,EAAGsmB,EAAItlB,SAO9F,IAJA,IAAI4lB,EAAIuB,EAAG5B,KAAKD,GAAO,IACnBpW,KACAzP,EAAI,GAEDA,KACHyP,EAAIkY,EAAM3nB,IAAMmmB,EAAEnmB,IAAM,GAU5B,OAPU,GAANoK,IAAiB,GAAN7K,IACXkQ,EAAImY,OAASnP,EACbhJ,EAAIE,KAAOF,EAAIE,KAAKpJ,UAAU,EAAGkJ,EAAIE,KAAKpP,OAAS,GAAGgL,QAAQ,KAAM,KACpEkE,EAAIoY,UAAYpY,EAAIoY,UAAUtc,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,KAAM,KAC9EkE,EAAIqY,SAAU,GAGXrY,QAGLsY,IAAI,SAAShoB,EAAQU,EAAOJ,GAYlC,SAAS2nB,IACL,MAAM,IAAI9nB,MAAM,mCAEpB,SAAS+nB,IACL,MAAM,IAAI/nB,MAAM,qCAsBpB,SAASgoB,EAAWC,GAChB,GAAIC,IAAqBhV,WAErB,OAAOA,WAAW+U,EAAK,GAG3B,IAAKC,IAAqBJ,IAAqBI,IAAqBhV,WAEhE,OADAgV,EAAmBhV,WACZA,WAAW+U,EAAK,GAE3B,IAEI,OAAOC,EAAiBD,EAAK,GAC/B,MAAM5oB,GACJ,IAEI,OAAO6oB,EAAiB9nB,KAAK,KAAM6nB,EAAK,GAC1C,MAAM5oB,GAEJ,OAAO6oB,EAAiB9nB,KAAKsC,KAAMulB,EAAK,KAMpD,SAASE,EAAgBC,GACrB,GAAIC,IAAuBlT,aAEvB,OAAOA,aAAaiT,GAGxB,IAAKC,IAAuBN,IAAwBM,IAAuBlT,aAEvE,OADAkT,EAAqBlT,aACdA,aAAaiT,GAExB,IAEI,OAAOC,EAAmBD,GAC5B,MAAO/oB,GACL,IAEI,OAAOgpB,EAAmBjoB,KAAK,KAAMgoB,GACvC,MAAO/oB,GAGL,OAAOgpB,EAAmBjoB,KAAKsC,KAAM0lB,KAYjD,SAASE,IACAC,GAAaC,IAGlBD,GAAW,EACPC,EAAanoB,OACbooB,EAAQD,EAAa1f,OAAO2f,GAE5BC,GAAc,EAEdD,EAAMpoB,QACNsoB,KAIR,SAASA,IACL,IAAIJ,EAAJ,CAGA,IAAIrT,EAAU8S,EAAWM,GACzBC,GAAW,EAGX,IADA,IAAIpiB,EAAMsiB,EAAMpoB,OACV8F,GAAK,CAGP,IAFAqiB,EAAeC,EACfA,OACSC,EAAaviB,GACdqiB,GACAA,EAAaE,GAAYE,MAGjCF,GAAc,EACdviB,EAAMsiB,EAAMpoB,OAEhBmoB,EAAe,KACfD,GAAW,EACXJ,EAAgBjT,IAiBpB,SAAS2T,EAAKZ,EAAK9E,GACfzgB,KAAKulB,IAAMA,EACXvlB,KAAKygB,MAAQA,EAYjB,SAAS7f,KAhKT,IAOI4kB,EACAG,EARAhe,EAAU9J,EAAOJ,YAgBpB,WACG,IAEQ+nB,EADsB,mBAAfhV,WACYA,WAEA4U,EAEzB,MAAOzoB,GACL6oB,EAAmBJ,EAEvB,IAEQO,EADwB,mBAAjBlT,aACcA,aAEA4S,EAE3B,MAAO1oB,GACLgpB,EAAqBN,GAjB7B,GAwEA,IAEIS,EAFAC,KACAF,GAAW,EAEXG,GAAc,EAyClBre,EAAQye,SAAW,SAAUb,GACzB,IAAItf,EAAO,IAAIoF,MAAMnF,UAAUvI,OAAS,GACxC,GAAIuI,UAAUvI,OAAS,EACnB,IAAK,IAAIP,EAAI,EAAGA,EAAI8I,UAAUvI,OAAQP,IAClC6I,EAAK7I,EAAI,GAAK8I,UAAU9I,GAGhC2oB,EAAMpf,KAAK,IAAIwf,EAAKZ,EAAKtf,IACJ,IAAjB8f,EAAMpoB,QAAiBkoB,GACvBP,EAAWW,IASnBE,EAAKhoB,UAAU+nB,IAAM,WACjBlmB,KAAKulB,IAAIpf,MAAM,KAAMnG,KAAKygB,QAE9B9Y,EAAQ0e,MAAQ,UAChB1e,EAAQ2e,SAAU,EAClB3e,EAAQI,OACRJ,EAAQ4e,QACR5e,EAAQka,QAAU,GAClBla,EAAQ6e,YAIR7e,EAAQrH,GAAKM,EACb+G,EAAQ8e,YAAc7lB,EACtB+G,EAAQf,KAAOhG,EACf+G,EAAQd,IAAMjG,EACd+G,EAAQb,eAAiBlG,EACzB+G,EAAQZ,mBAAqBnG,EAC7B+G,EAAQP,KAAOxG,EACf+G,EAAQ+e,gBAAkB9lB,EAC1B+G,EAAQgf,oBAAsB/lB,EAE9B+G,EAAQN,UAAY,SAAU8E,GAAQ,UAEtCxE,EAAQif,QAAU,SAAUza,GACxB,MAAM,IAAI7O,MAAM,qCAGpBqK,EAAQkf,IAAM,WAAc,MAAO,KACnClf,EAAQmf,MAAQ,SAAUC,GACtB,MAAM,IAAIzpB,MAAM,mCAEpBqK,EAAQqf,MAAQ,WAAa,OAAO,QAE9BC,IAAI,SAAS9pB,EAAQU,EAAOJ,GAoClC,SAAS6F,EAAQuJ,EAAK3K,GACD,iBAAR2K,IACT3K,EAAO2K,EACPA,OAAMkC,GAGR7M,EAAOA,MAEP,IAQIglB,EARAC,EAASC,EAAIva,GACbmY,EAASmC,EAAOnC,OAChB3V,EAAK8X,EAAO9X,GACZ9B,EAAO4Z,EAAO5Z,KACd8Z,EAAgBC,EAAMjY,IAAO9B,KAAQ+Z,EAAMjY,GAAIkY,KAmBnD,OAlBoBrlB,EAAKslB,UAAYtlB,EAAK,0BACtB,IAAUA,EAAKulB,WAAaJ,GAK9Cvf,EAAM,+BAAgCkd,GACtCkC,EAAKQ,EAAQ1C,EAAQ9iB,KAEhBolB,EAAMjY,KACTvH,EAAM,yBAA0Bkd,GAChCsC,EAAMjY,GAAMqY,EAAQ1C,EAAQ9iB,IAE9BglB,EAAKI,EAAMjY,IAET8X,EAAOha,QAAUjL,EAAKiL,QACxBjL,EAAKiL,MAAQga,EAAOha,OAEf+Z,EAAG9W,OAAO+W,EAAO5Z,KAAMrL,GA7DhC,IAAIklB,EAAMjqB,EAAQ,SACdqP,EAASrP,EAAQ,oBACjBuqB,EAAUvqB,EAAQ,aAClB2K,EAAQ3K,EAAQ,SAAS,oBAM7BU,EAAOJ,QAAUA,EAAU6F,EAM3B,IAAIgkB,EAAQ7pB,EAAQkqB,YAuDpBlqB,EAAQwP,SAAWT,EAAOS,SAS1BxP,EAAQwC,QAAUqD,EAQlB7F,EAAQiqB,QAAUvqB,EAAQ,aAC1BM,EAAQmP,OAASzP,EAAQ,cAEtByqB,YAAY,GAAGnb,WAAW,GAAGob,QAAQ,GAAG/f,MAAQ,GAAGggB,mBAAmB,KAAKC,IAAI,SAAS5qB,EAAQU,EAAOJ,GAoC1G,SAASiqB,EAAS7a,EAAK3K,GACrB,KAAMlC,gBAAgB0nB,GAAU,OAAO,IAAIA,EAAQ7a,EAAK3K,GACpD2K,GAAQ,iBAAoBA,IAC9B3K,EAAO2K,EACPA,OAAMkC,IAER7M,EAAOA,OAEFqL,KAAOrL,EAAKqL,MAAQ,aACzBvN,KAAKunB,QACLvnB,KAAKgoB,QACLhoB,KAAKkC,KAAOA,EACZlC,KAAKioB,cAAmC,IAAtB/lB,EAAK+lB,cACvBjoB,KAAKkoB,qBAAqBhmB,EAAKgmB,sBAAwBC,EAAAA,GACvDnoB,KAAKooB,kBAAkBlmB,EAAKkmB,mBAAqB,KACjDpoB,KAAKqoB,qBAAqBnmB,EAAKmmB,sBAAwB,KACvDroB,KAAKsoB,oBAAoBpmB,EAAKomB,qBAAuB,IACrDtoB,KAAKuoB,QAAU,IAAItmB,GACjBG,IAAKpC,KAAKooB,oBACV/lB,IAAKrC,KAAKqoB,uBACV9lB,OAAQvC,KAAKsoB,wBAEftoB,KAAKwS,QAAQ,MAAQtQ,EAAKsQ,QAAU,IAAQtQ,EAAKsQ,SACjDxS,KAAKgO,WAAa,SAClBhO,KAAK6M,IAAMA,EACX7M,KAAKwoB,cACLxoB,KAAKyoB,SAAW,KAChBzoB,KAAK0oB,UAAW,EAChB1oB,KAAK2oB,gBACL,IAAIC,EAAU1mB,EAAKsK,QAAUA,EAC7BxM,KAAK6oB,QAAU,IAAID,EAAQE,QAC3B9oB,KAAK+oB,QAAU,IAAIH,EAAQI,QAC3BhpB,KAAKipB,aAAmC,IAArB/mB,EAAK+mB,YACpBjpB,KAAKipB,aAAajpB,KAAK2P,OA/D7B,IAAIuZ,EAAM/rB,EAAQ,oBACdyP,EAASzP,EAAQ,YACjBmJ,EAAUnJ,EAAQ,qBAClBqP,EAASrP,EAAQ,oBACjBmD,EAAKnD,EAAQ,QACbwO,EAAOxO,EAAQ,kBACf2K,EAAQ3K,EAAQ,SAAS,4BACzBoT,EAAUpT,EAAQ,WAClB8E,EAAU9E,EAAQ,UAMlB6iB,EAAM9hB,OAAOC,UAAUC,eAM3BP,EAAOJ,QAAUiqB,EAoDjBA,EAAQvpB,UAAUgrB,QAAU,WAC1BnpB,KAAKoH,KAAKjB,MAAMnG,KAAMkG,WACtB,IAAK,IAAIkjB,KAAOppB,KAAKunB,KACfvH,EAAItiB,KAAKsC,KAAKunB,KAAM6B,IACtBppB,KAAKunB,KAAK6B,GAAKhiB,KAAKjB,MAAMnG,KAAKunB,KAAK6B,GAAMljB,YAWhDwhB,EAAQvpB,UAAUkrB,gBAAkB,WAClC,IAAK,IAAID,KAAOppB,KAAKunB,KACfvH,EAAItiB,KAAKsC,KAAKunB,KAAM6B,KACtBppB,KAAKunB,KAAK6B,GAAK/Z,GAAKrP,KAAKspB,WAAWF,KAa1C1B,EAAQvpB,UAAUmrB,WAAa,SAAUF,GACvC,OAAgB,MAARA,EAAc,GAAMA,EAAM,KAAQppB,KAAKupB,OAAOla,IAOxD/I,EAAQohB,EAAQvpB,WAUhBupB,EAAQvpB,UAAU8pB,aAAe,SAAU7d,GACzC,OAAKlE,UAAUvI,QACfqC,KAAKwpB,gBAAkBpf,EAChBpK,MAFuBA,KAAKwpB,eAarC9B,EAAQvpB,UAAU+pB,qBAAuB,SAAU9d,GACjD,OAAKlE,UAAUvI,QACfqC,KAAKypB,sBAAwBrf,EACtBpK,MAFuBA,KAAKypB,uBAarC/B,EAAQvpB,UAAUiqB,kBAAoB,SAAUhe,GAC9C,OAAKlE,UAAUvI,QACfqC,KAAK0pB,mBAAqBtf,EAC1BpK,KAAKuoB,SAAWvoB,KAAKuoB,QAAQtlB,OAAOmH,GAC7BpK,MAHuBA,KAAK0pB,oBAMrChC,EAAQvpB,UAAUmqB,oBAAsB,SAAUle,GAChD,OAAKlE,UAAUvI,QACfqC,KAAK2pB,qBAAuBvf,EAC5BpK,KAAKuoB,SAAWvoB,KAAKuoB,QAAQplB,UAAUiH,GAChCpK,MAHuBA,KAAK2pB,sBAcrCjC,EAAQvpB,UAAUkqB,qBAAuB,SAAUje,GACjD,OAAKlE,UAAUvI,QACfqC,KAAK4pB,sBAAwBxf,EAC7BpK,KAAKuoB,SAAWvoB,KAAKuoB,QAAQrlB,OAAOkH,GAC7BpK,MAHuBA,KAAK4pB,uBAarClC,EAAQvpB,UAAUqU,QAAU,SAAUpI,GACpC,OAAKlE,UAAUvI,QACfqC,KAAK6pB,SAAWzf,EACTpK,MAFuBA,KAAK6pB,UAYrCnC,EAAQvpB,UAAU2rB,qBAAuB,YAElC9pB,KAAK+pB,cAAgB/pB,KAAKwpB,eAA2C,IAA1BxpB,KAAKuoB,QAAQ/lB,UAE3DxC,KAAKgqB,aAYTtC,EAAQvpB,UAAUwR,KAClB+X,EAAQvpB,UAAU8B,QAAU,SAAU+F,EAAI9D,GAExC,GADA4F,EAAM,gBAAiB9H,KAAKgO,aACvBhO,KAAKgO,WAAWuC,QAAQ,QAAS,OAAOvQ,KAE7C8H,EAAM,aAAc9H,KAAK6M,KACzB7M,KAAKupB,OAASL,EAAIlpB,KAAK6M,IAAK7M,KAAKkC,MACjC,IAAIkO,EAASpQ,KAAKupB,OACd3jB,EAAO5F,KACXA,KAAKgO,WAAa,UAClBhO,KAAKiqB,eAAgB,EAGrB,IAAIC,EAAU5pB,EAAG8P,EAAQ,OAAQ,WAC/BxK,EAAKgV,SACL5U,GAAMA,MAIJmkB,EAAW7pB,EAAG8P,EAAQ,QAAS,SAAU5P,GAK3C,GAJAsH,EAAM,iBACNlC,EAAK6L,UACL7L,EAAKoI,WAAa,SAClBpI,EAAKujB,QAAQ,gBAAiB3oB,GAC1BwF,EAAI,CACN,IAAI/E,EAAM,IAAI3D,MAAM,oBACpB2D,EAAIT,KAAOA,EACXwF,EAAG/E,QAGH2E,EAAKkkB,yBAKT,IAAI,IAAU9pB,KAAK6pB,SAAU,CAC3B,IAAIrX,EAAUxS,KAAK6pB,SACnB/hB,EAAM,wCAAyC0K,GAG/C,IAAI4X,EAAQ5Z,WAAW,WACrB1I,EAAM,qCAAsC0K,GAC5C0X,EAAQG,UACRja,EAAOwB,QACPxB,EAAOhJ,KAAK,QAAS,WACrBxB,EAAKujB,QAAQ,kBAAmB3W,IAC/BA,GAEHxS,KAAKgoB,KAAKrhB,MACR0jB,QAAS,WACP5X,aAAa2X,MAQnB,OAHApqB,KAAKgoB,KAAKrhB,KAAKujB,GACflqB,KAAKgoB,KAAKrhB,KAAKwjB,GAERnqB,MAST0nB,EAAQvpB,UAAUyc,OAAS,WACzB9S,EAAM,QAGN9H,KAAKyR,UAGLzR,KAAKgO,WAAa,OAClBhO,KAAKoH,KAAK,QAGV,IAAIgJ,EAASpQ,KAAKupB,OAClBvpB,KAAKgoB,KAAKrhB,KAAKrG,EAAG8P,EAAQ,OAAQzE,EAAK3L,KAAM,YAC7CA,KAAKgoB,KAAKrhB,KAAKrG,EAAG8P,EAAQ,OAAQzE,EAAK3L,KAAM,YAC7CA,KAAKgoB,KAAKrhB,KAAKrG,EAAG8P,EAAQ,OAAQzE,EAAK3L,KAAM,YAC7CA,KAAKgoB,KAAKrhB,KAAKrG,EAAG8P,EAAQ,QAASzE,EAAK3L,KAAM,aAC9CA,KAAKgoB,KAAKrhB,KAAKrG,EAAG8P,EAAQ,QAASzE,EAAK3L,KAAM,aAC9CA,KAAKgoB,KAAKrhB,KAAKrG,EAAGN,KAAK+oB,QAAS,UAAWpd,EAAK3L,KAAM,gBASxD0nB,EAAQvpB,UAAUmsB,OAAS,WACzBtqB,KAAKyoB,SAAW,IAAIvd,KACpBlL,KAAKmpB,QAAQ,SASfzB,EAAQvpB,UAAUosB,OAAS,WACzBvqB,KAAKmpB,QAAQ,OAAQ,IAAIje,KAASlL,KAAKyoB,WASzCf,EAAQvpB,UAAUqsB,OAAS,SAAUhqB,GACnCR,KAAK+oB,QAAQ0B,IAAIjqB,IASnBknB,EAAQvpB,UAAUusB,UAAY,SAAU9Z,GACtC5Q,KAAKoH,KAAK,SAAUwJ,IAStB8W,EAAQvpB,UAAU0T,QAAU,SAAU5Q,GACpC6G,EAAM,QAAS7G,GACfjB,KAAKmpB,QAAQ,QAASloB,IAUxBymB,EAAQvpB,UAAUiS,OAAS,SAAUgZ,EAAKlnB,GAiBxC,SAASyoB,KACDpa,EAAQ3K,EAAK4iB,WAAYpY,IAC7BxK,EAAK4iB,WAAW7hB,KAAKyJ,GAlBzB,IAAIA,EAASpQ,KAAKunB,KAAK6B,GACvB,IAAKhZ,EAAQ,CACXA,EAAS,IAAIxD,EAAO5M,KAAMopB,EAAKlnB,GAC/BlC,KAAKunB,KAAK6B,GAAOhZ,EACjB,IAAIxK,EAAO5F,KACXoQ,EAAO9P,GAAG,aAAcqqB,GACxBva,EAAO9P,GAAG,UAAW,WACnB8P,EAAOf,GAAKzJ,EAAK0jB,WAAWF,KAG1BppB,KAAKipB,aAEP0B,IAUJ,OAAOva,GASTsX,EAAQvpB,UAAUksB,QAAU,SAAUja,GACpC,IAAI3H,EAAQ8H,EAAQvQ,KAAKwoB,WAAYpY,IAChC3H,GAAOzI,KAAKwoB,WAAWrhB,OAAOsB,EAAO,GACtCzI,KAAKwoB,WAAW7qB,QAEpBqC,KAAK4R,SAUP8V,EAAQvpB,UAAUyS,OAAS,SAAUA,GACnC9I,EAAM,oBAAqB8I,GAC3B,IAAIhL,EAAO5F,KACP4Q,EAAOzD,OAAyB,IAAhByD,EAAO1L,OAAY0L,EAAOwY,KAAO,IAAMxY,EAAOzD,OAE7DvH,EAAK8iB,SAWR9iB,EAAK+iB,aAAahiB,KAAKiK,IATvBhL,EAAK8iB,UAAW,EAChB1oB,KAAK6oB,QAAQrlB,OAAOoN,EAAQ,SAAU0N,GACpC,IAAK,IAAIlhB,EAAI,EAAGA,EAAIkhB,EAAe3gB,OAAQP,IACzCwI,EAAK2jB,OAAO3W,MAAM0L,EAAelhB,GAAIwT,EAAO/L,SAE9Ce,EAAK8iB,UAAW,EAChB9iB,EAAKglB,yBAcXlD,EAAQvpB,UAAUysB,mBAAqB,WACrC,GAAI5qB,KAAK2oB,aAAahrB,OAAS,IAAMqC,KAAK0oB,SAAU,CAClD,IAAImC,EAAO7qB,KAAK2oB,aAAalY,QAC7BzQ,KAAK4Q,OAAOia,KAUhBnD,EAAQvpB,UAAUsT,QAAU,WAC1B3J,EAAM,WAGN,IAAK,IADDgjB,EAAa9qB,KAAKgoB,KAAKrqB,OAClBP,EAAI,EAAGA,EAAI0tB,EAAY1tB,IACpB4C,KAAKgoB,KAAKvX,QAChB4Z,UAGNrqB,KAAK2oB,gBACL3oB,KAAK0oB,UAAW,EAChB1oB,KAAKyoB,SAAW,KAEhBzoB,KAAK+oB,QAAQsB,WASf3C,EAAQvpB,UAAUyT,MAClB8V,EAAQvpB,UAAU4sB,WAAa,WAC7BjjB,EAAM,cACN9H,KAAKiqB,eAAgB,EACrBjqB,KAAK+pB,cAAe,EAChB,YAAc/pB,KAAKgO,YAGrBhO,KAAKyR,UAEPzR,KAAKuoB,QAAQvlB,QACbhD,KAAKgO,WAAa,SACdhO,KAAKupB,QAAQvpB,KAAKupB,OAAO3X,SAS/B8V,EAAQvpB,UAAU6T,QAAU,SAAUgB,GACpClL,EAAM,WAEN9H,KAAKyR,UACLzR,KAAKuoB,QAAQvlB,QACbhD,KAAKgO,WAAa,SAClBhO,KAAKoH,KAAK,QAAS4L,GAEfhT,KAAKwpB,gBAAkBxpB,KAAKiqB,eAC9BjqB,KAAKgqB,aAUTtC,EAAQvpB,UAAU6rB,UAAY,WAC5B,GAAIhqB,KAAK+pB,cAAgB/pB,KAAKiqB,cAAe,OAAOjqB,KAEpD,IAAI4F,EAAO5F,KAEX,GAAIA,KAAKuoB,QAAQ/lB,UAAYxC,KAAKypB,sBAChC3hB,EAAM,oBACN9H,KAAKuoB,QAAQvlB,QACbhD,KAAKmpB,QAAQ,oBACbnpB,KAAK+pB,cAAe,MACf,CACL,IAAIiB,EAAQhrB,KAAKuoB,QAAQ9lB,WACzBqF,EAAM,0CAA2CkjB,GAEjDhrB,KAAK+pB,cAAe,EACpB,IAAIK,EAAQ5Z,WAAW,WACjB5K,EAAKqkB,gBAETniB,EAAM,wBACNlC,EAAKujB,QAAQ,oBAAqBvjB,EAAK2iB,QAAQ/lB,UAC/CoD,EAAKujB,QAAQ,eAAgBvjB,EAAK2iB,QAAQ/lB,UAGtCoD,EAAKqkB,eAETrkB,EAAK+J,KAAK,SAAU1O,GACdA,GACF6G,EAAM,2BACNlC,EAAKmkB,cAAe,EACpBnkB,EAAKokB,YACLpkB,EAAKujB,QAAQ,kBAAmBloB,EAAIT,QAEpCsH,EAAM,qBACNlC,EAAKqlB,mBAGRD,GAEHhrB,KAAKgoB,KAAKrhB,MACR0jB,QAAS,WACP5X,aAAa2X,QAYrB1C,EAAQvpB,UAAU8sB,YAAc,WAC9B,IAAIC,EAAUlrB,KAAKuoB,QAAQ/lB,SAC3BxC,KAAK+pB,cAAe,EACpB/pB,KAAKuoB,QAAQvlB,QACbhD,KAAKqpB,kBACLrpB,KAAKmpB,QAAQ,YAAa+B,MAGzBC,OAAO,GAAG1e,WAAW,GAAG2e,OAAS,EAAEC,iBAAiB,EAAEhY,oBAAoB,GAAGvL,MAAQ,GAAGwjB,mBAAmB,GAAGhY,QAAU,GAAGwU,mBAAmB,KAAKyD,IAAI,SAASpuB,EAAQU,EAAOJ,GAMlLI,EAAOJ,QAWP,SAAaK,EAAKgd,EAAI9U,GAEpB,OADAlI,EAAIwC,GAAGwa,EAAI9U,IAETqkB,QAAS,WACPvsB,EAAIgJ,eAAegU,EAAI9U,WAKvBwlB,IAAI,SAASruB,EAAQU,EAAOJ,GAuDlC,SAASmP,EAAQsa,EAAIkC,EAAKlnB,GACxBlC,KAAKknB,GAAKA,EACVlnB,KAAKopB,IAAMA,EACXppB,KAAKyrB,KAAOzrB,KACZA,KAAK0rB,IAAM,EACX1rB,KAAK2rB,QACL3rB,KAAK4rB,iBACL5rB,KAAK6rB,cACL7rB,KAAK8rB,WAAY,EACjB9rB,KAAK+rB,cAAe,EAChB7pB,GAAQA,EAAKiL,QACfnN,KAAKmN,MAAQjL,EAAKiL,OAEhBnN,KAAKknB,GAAG+B,aAAajpB,KAAK2P,OA9DhC,IAAInD,EAASrP,EAAQ,oBACjBmJ,EAAUnJ,EAAQ,qBAClB6uB,EAAU7uB,EAAQ,YAClBmD,EAAKnD,EAAQ,QACbwO,EAAOxO,EAAQ,kBACf2K,EAAQ3K,EAAQ,SAAS,2BACzBkQ,EAAUlQ,EAAQ,WAMtBU,EAAOJ,QAAoBmP,EAS3B,IAAIqf,GACFhsB,QAAS,EACTisB,cAAe,EACfC,gBAAiB,EACjB3D,WAAY,EACZuC,WAAY,EACZjZ,MAAO,EACPkY,UAAW,EACXoC,kBAAmB,EACnBC,iBAAkB,EAClBC,gBAAiB,EACjBvC,aAAc,EACdrX,KAAM,EACNsK,KAAM,GAOJ5V,EAAOd,EAAQnI,UAAUiJ,KA4B7Bd,EAAQsG,EAAOzO,WAQfyO,EAAOzO,UAAUouB,UAAY,WAC3B,IAAIvsB,KAAKgoB,KAAT,CAEA,IAAId,EAAKlnB,KAAKknB,GACdlnB,KAAKgoB,MACH1nB,EAAG4mB,EAAI,OAAQvb,EAAK3L,KAAM,WAC1BM,EAAG4mB,EAAI,SAAUvb,EAAK3L,KAAM,aAC5BM,EAAG4mB,EAAI,QAASvb,EAAK3L,KAAM,eAU/B4M,EAAOzO,UAAUwR,KACjB/C,EAAOzO,UAAU8B,QAAU,WACzB,OAAID,KAAK8rB,UAAkB9rB,MAE3BA,KAAKusB,YACLvsB,KAAKknB,GAAGvX,OACJ,SAAW3P,KAAKknB,GAAGlZ,YAAYhO,KAAK4a,SACxC5a,KAAKoH,KAAK,cACHpH,OAUT4M,EAAOzO,UAAUkT,KAAO,WACtB,IAAIpL,EAAO+lB,EAAQ9lB,WAGnB,OAFAD,EAAKsF,QAAQ,WACbvL,KAAKoH,KAAKjB,MAAMnG,KAAMiG,GACfjG,MAYT4M,EAAOzO,UAAUiJ,KAAO,SAAU0T,GAChC,GAAImR,EAAO7tB,eAAe0c,GAExB,OADA1T,EAAKjB,MAAMnG,KAAMkG,WACVlG,KAGT,IAAIiG,EAAO+lB,EAAQ9lB,WACf0K,GAAW1L,KAAMsH,EAAOggB,MAAOhsB,KAAMyF,GAoBzC,OAlBA2K,EAAO/L,WACP+L,EAAO/L,QAAQgO,UAAY7S,KAAKysB,QAAS,IAAUzsB,KAAKysB,MAAM5Z,SAG1D,mBAAsB5M,EAAKA,EAAKtI,OAAS,KAC3CmK,EAAM,iCAAkC9H,KAAK0rB,KAC7C1rB,KAAK2rB,KAAK3rB,KAAK0rB,KAAOzlB,EAAKymB,MAC3B9b,EAAOvB,GAAKrP,KAAK0rB,OAGf1rB,KAAK8rB,UACP9rB,KAAK4Q,OAAOA,GAEZ5Q,KAAK6rB,WAAWllB,KAAKiK,UAGhB5Q,KAAKysB,MAELzsB,MAUT4M,EAAOzO,UAAUyS,OAAS,SAAUA,GAClCA,EAAOwY,IAAMppB,KAAKopB,IAClBppB,KAAKknB,GAAGtW,OAAOA,IASjBhE,EAAOzO,UAAUyc,OAAS,WAIxB,GAHA9S,EAAM,kCAGF,MAAQ9H,KAAKopB,IACf,GAAIppB,KAAKmN,MAAO,CACd,IAAIA,EAA8B,iBAAfnN,KAAKmN,MAAqBE,EAAQ7J,OAAOxD,KAAKmN,OAASnN,KAAKmN,MAC/ErF,EAAM,uCAAwCqF,GAC9CnN,KAAK4Q,QAAQ1L,KAAMsH,EAAOmgB,QAASxf,MAAOA,SAE1CnN,KAAK4Q,QAAQ1L,KAAMsH,EAAOmgB,WAYhC/f,EAAOzO,UAAU6T,QAAU,SAAUgB,GACnClL,EAAM,aAAckL,GACpBhT,KAAK8rB,WAAY,EACjB9rB,KAAK+rB,cAAe,SACb/rB,KAAKqP,GACZrP,KAAKoH,KAAK,aAAc4L,IAU1BpG,EAAOzO,UAAUyuB,SAAW,SAAUhc,GACpC,GAAIA,EAAOwY,MAAQppB,KAAKopB,IAExB,OAAQxY,EAAO1L,MACb,KAAKsH,EAAOmgB,QACV3sB,KAAK6sB,YACL,MAEF,KAAKrgB,EAAOggB,MAIZ,KAAKhgB,EAAOsgB,aACV9sB,KAAK+sB,QAAQnc,GACb,MAEF,KAAKpE,EAAOwgB,IAIZ,KAAKxgB,EAAOygB,WACVjtB,KAAKktB,MAAMtc,GACX,MAEF,KAAKpE,EAAO2gB,WACVntB,KAAKotB,eACL,MAEF,KAAK5gB,EAAO6gB,MACVrtB,KAAKoH,KAAK,QAASwJ,EAAOpQ,QAYhCoM,EAAOzO,UAAU4uB,QAAU,SAAUnc,GACnC,IAAI3K,EAAO2K,EAAOpQ,SAClBsH,EAAM,oBAAqB7B,GAEvB,MAAQ2K,EAAOvB,KACjBvH,EAAM,mCACN7B,EAAKU,KAAK3G,KAAKstB,IAAI1c,EAAOvB,MAGxBrP,KAAK8rB,UACP1kB,EAAKjB,MAAMnG,KAAMiG,GAEjBjG,KAAK4rB,cAAcjlB,KAAKV,IAU5B2G,EAAOzO,UAAUmvB,IAAM,SAAUje,GAC/B,IAAIzJ,EAAO5F,KACPutB,GAAO,EACX,OAAO,WAEL,IAAIA,EAAJ,CACAA,GAAO,EACP,IAAItnB,EAAO+lB,EAAQ9lB,WACnB4B,EAAM,iBAAkB7B,GAExBL,EAAKgL,QACH1L,KAAMsH,EAAOwgB,IACb3d,GAAIA,EACJ7O,KAAMyF,OAYZ2G,EAAOzO,UAAU+uB,MAAQ,SAAUtc,GACjC,IAAI0c,EAAMttB,KAAK2rB,KAAK/a,EAAOvB,IACvB,mBAAsBie,GACxBxlB,EAAM,yBAA0B8I,EAAOvB,GAAIuB,EAAOpQ,MAClD8sB,EAAInnB,MAAMnG,KAAM4Q,EAAOpQ,aAChBR,KAAK2rB,KAAK/a,EAAOvB,KAExBvH,EAAM,aAAc8I,EAAOvB,KAU/BzC,EAAOzO,UAAU0uB,UAAY,WAC3B7sB,KAAK8rB,WAAY,EACjB9rB,KAAK+rB,cAAe,EACpB/rB,KAAKoH,KAAK,WACVpH,KAAKwtB,gBASP5gB,EAAOzO,UAAUqvB,aAAe,WAC9B,IAAIpwB,EACJ,IAAKA,EAAI,EAAGA,EAAI4C,KAAK4rB,cAAcjuB,OAAQP,IACzCgK,EAAKjB,MAAMnG,KAAMA,KAAK4rB,cAAcxuB,IAItC,IAFA4C,KAAK4rB,iBAEAxuB,EAAI,EAAGA,EAAI4C,KAAK6rB,WAAWluB,OAAQP,IACtC4C,KAAK4Q,OAAO5Q,KAAK6rB,WAAWzuB,IAE9B4C,KAAK6rB,eASPjf,EAAOzO,UAAUivB,aAAe,WAC9BtlB,EAAM,yBAA0B9H,KAAKopB,KACrCppB,KAAKqqB,UACLrqB,KAAKgS,QAAQ,yBAWfpF,EAAOzO,UAAUksB,QAAU,WACzB,GAAIrqB,KAAKgoB,KAAM,CAEb,IAAK,IAAI5qB,EAAI,EAAGA,EAAI4C,KAAKgoB,KAAKrqB,OAAQP,IACpC4C,KAAKgoB,KAAK5qB,GAAGitB,UAEfrqB,KAAKgoB,KAAO,KAGdhoB,KAAKknB,GAAGmD,QAAQrqB,OAUlB4M,EAAOzO,UAAUyT,MACjBhF,EAAOzO,UAAU4sB,WAAa,WAa5B,OAZI/qB,KAAK8rB,YACPhkB,EAAM,6BAA8B9H,KAAKopB,KACzCppB,KAAK4Q,QAAS1L,KAAMsH,EAAO2gB,cAI7BntB,KAAKqqB,UAEDrqB,KAAK8rB,WAEP9rB,KAAKgS,QAAQ,wBAERhS,MAWT4M,EAAOzO,UAAU0U,SAAW,SAAUA,GAGpC,OAFA7S,KAAKysB,MAAQzsB,KAAKysB,UAClBzsB,KAAKysB,MAAM5Z,SAAWA,EACf7S,QAGNmrB,OAAO,GAAGE,iBAAiB,EAAEhY,oBAAoB,GAAGvL,MAAQ,GAAGuF,QAAU,GAAGya,mBAAmB,GAAG2F,WAAW,KAAKC,IAAI,SAASvwB,EAAQU,EAAOJ,IACjJ,SAAW2G,GAMX,IAAI0I,EAAW3P,EAAQ,YACnB2K,EAAQ3K,EAAQ,SAAS,wBAM7BU,EAAOJ,QAWP,SAAcoP,EAAK8gB,GACjB,IAAI7vB,EAAM+O,EAGV8gB,EAAMA,GAAOvpB,EAAOlE,SAChB,MAAQ2M,IAAKA,EAAM8gB,EAAI1gB,SAAW,KAAO0gB,EAAI5gB,MAG7C,iBAAoBF,IAClB,MAAQA,EAAI+Q,OAAO,KAEnB/Q,EADE,MAAQA,EAAI+Q,OAAO,GACf+P,EAAI1gB,SAAWJ,EAEf8gB,EAAI5gB,KAAOF,GAIhB,sBAAsBT,KAAKS,KAC9B/E,EAAM,uBAAwB+E,GAE5BA,OADE,IAAuB8gB,EACnBA,EAAI1gB,SAAW,KAAOJ,EAEtB,WAAaA,GAKvB/E,EAAM,WAAY+E,GAClB/O,EAAMgP,EAASD,IAIZ/O,EAAIoP,OACH,cAAcd,KAAKtO,EAAImP,UACzBnP,EAAIoP,KAAO,KACF,eAAed,KAAKtO,EAAImP,YACjCnP,EAAIoP,KAAO,QAIfpP,EAAIyP,KAAOzP,EAAIyP,MAAQ,IAEvB,IACIR,GADkC,IAA3BjP,EAAIiP,KAAKwD,QAAQ,KACV,IAAMzS,EAAIiP,KAAO,IAAMjP,EAAIiP,KAO7C,OAJAjP,EAAIuR,GAAKvR,EAAImP,SAAW,MAAQF,EAAO,IAAMjP,EAAIoP,KAEjDpP,EAAI8vB,KAAO9vB,EAAImP,SAAW,MAAQF,GAAQ4gB,GAAOA,EAAIzgB,OAASpP,EAAIoP,KAAO,GAAM,IAAMpP,EAAIoP,MAElFpP,KAGNJ,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxHiC,MAAQ,GAAGgF,SAAW,KAAK+gB,IAAI,SAAS1wB,EAAQU,EAAOJ,IAC1D,SAAW2G,GAgCX,SAAS0pB,EAAmBttB,EAAM8e,GAChC,IAAK9e,EAAM,OAAOA,EAElB,GAAIutB,EAAMvtB,GAAO,CACf,IAAIwtB,GAAgBC,cAAc,EAAMC,IAAK5O,EAAQ3hB,QAErD,OADA2hB,EAAQ3Y,KAAKnG,GACNwtB,EACF,GAAI3L,EAAQ7hB,GAAO,CAExB,IAAK,IADD2tB,EAAU,IAAI9iB,MAAM7K,EAAK7C,QACpBP,EAAI,EAAGA,EAAIoD,EAAK7C,OAAQP,IAC/B+wB,EAAQ/wB,GAAK0wB,EAAmBttB,EAAKpD,GAAIkiB,GAE3C,OAAO6O,EACF,GAAoB,iBAAT3tB,KAAuBA,aAAgB0K,MAAO,CAC1DijB,KACJ,IAAK,IAAIlwB,KAAOuC,EACd2tB,EAAQlwB,GAAO6vB,EAAmBttB,EAAKvC,GAAMqhB,GAE/C,OAAO6O,EAET,OAAO3tB,EAkBT,SAAS4tB,EAAmB5tB,EAAM8e,GAChC,IAAK9e,EAAM,OAAOA,EAElB,GAAIA,GAAQA,EAAKytB,aACf,OAAO3O,EAAQ9e,EAAK0tB,KACf,GAAI7L,EAAQ7hB,GACjB,IAAK,IAAIpD,EAAI,EAAGA,EAAIoD,EAAK7C,OAAQP,IAC/BoD,EAAKpD,GAAKgxB,EAAmB5tB,EAAKpD,GAAIkiB,QAEnC,GAAoB,iBAAT9e,EAChB,IAAK,IAAIvC,KAAOuC,EACdA,EAAKvC,GAAOmwB,EAAmB5tB,EAAKvC,GAAMqhB,GAI9C,OAAO9e,EA9ET,IAAI6hB,EAAUllB,EAAQ,WAClB4wB,EAAQ5wB,EAAQ,eAChBuhB,EAAWxgB,OAAOC,UAAUugB,SAC5B6D,EAAwC,mBAAhBne,EAAOgB,MAAsD,6BAA/BsZ,EAAShhB,KAAK0G,EAAOgB,MAC3Eod,EAAwC,mBAAhBpe,EAAOqe,MAAsD,6BAA/B/D,EAAShhB,KAAK0G,EAAOqe,MAY/EhlB,EAAQ4wB,kBAAoB,SAASzd,GACnC,IAAI0O,KACAgP,EAAa1d,EAAOpQ,KACpBqqB,EAAOja,EAGX,OAFAia,EAAKrqB,KAAOstB,EAAmBQ,EAAYhP,GAC3CuL,EAAK0D,YAAcjP,EAAQ3hB,QACnBiT,OAAQia,EAAMvL,QAASA,IAmCjC7hB,EAAQ+wB,kBAAoB,SAAS5d,EAAQ0O,GAG3C,OAFA1O,EAAOpQ,KAAO4tB,EAAmBxd,EAAOpQ,KAAM8e,GAC9C1O,EAAO2d,iBAAcxf,EACd6B,GA+BTnT,EAAQgxB,YAAc,SAASjuB,EAAMM,GACnC,SAAS4tB,EAAa5wB,EAAK6wB,EAAQC,GACjC,IAAK9wB,EAAK,OAAOA,EAGjB,GAAKykB,GAAkBzkB,aAAesH,MACjCod,GAAkB1kB,aAAe2kB,KAAO,CAC3CoM,IAGA,IAAIC,EAAa,IAAIhT,WACrBgT,EAAW1X,OAAS,WACdwX,EACFA,EAAiBD,GAAU3uB,KAAKkB,OAGhC6tB,EAAe/uB,KAAKkB,SAIf2tB,GACL/tB,EAASiuB,IAIbD,EAAW/S,kBAAkBje,QACxB,GAAIukB,EAAQvkB,GACjB,IAAK,IAAIV,EAAI,EAAGA,EAAIU,EAAIH,OAAQP,IAC9BsxB,EAAa5wB,EAAIV,GAAIA,EAAGU,QAErB,GAAmB,iBAARA,IAAqBiwB,EAAMjwB,GAC3C,IAAK,IAAIG,KAAOH,EACd4wB,EAAa5wB,EAAIG,GAAMA,EAAKH,GAKlC,IAAI+wB,EAAe,EACfE,EAAevuB,EACnBkuB,EAAaK,GACRF,GACH/tB,EAASiuB,MAIVrxB,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,aACxHmpB,cAAc,GAAGrM,QAAU,KAAKsM,IAAI,SAAS9xB,EAAQU,EAAOJ,GAkH/D,SAASqrB,KAoCT,SAASoG,EAAepxB,GAGtB,IAAImlB,EAAM,GAAKnlB,EAAIoH,KAwBnB,OArBIzH,EAAQqvB,eAAiBhvB,EAAIoH,MAAQzH,EAAQwvB,aAAenvB,EAAIoH,OAClE+d,GAAOnlB,EAAIywB,YAAc,KAKvBzwB,EAAIsrB,KAAO,MAAQtrB,EAAIsrB,MACzBnG,GAAOnlB,EAAIsrB,IAAM,KAIf,MAAQtrB,EAAIuR,KACd4T,GAAOnlB,EAAIuR,IAIT,MAAQvR,EAAI0C,OACdyiB,GAAO5Y,KAAKC,UAAUxM,EAAI0C,OAG5BsH,EAAM,mBAAoBhK,EAAKmlB,GACxBA,EAaT,SAASkM,EAAerxB,EAAKgD,GAW3B4Z,EAAO+T,YAAY3wB,EATnB,SAAuBixB,GACrB,IAAIK,EAAiB1U,EAAO2T,kBAAkBU,GAC1ClE,EAAOqE,EAAeE,EAAexe,QACrC0O,EAAU8P,EAAe9P,QAE7BA,EAAQ/T,QAAQsf,GAChB/pB,EAASwe,KAab,SAAS0J,IACPhpB,KAAKqvB,cAAgB,KAwDvB,SAASC,EAAarM,GACpB,IAAI7lB,EAAI,EAEJ8G,GACFgB,KAAM2U,OAAOoJ,EAAIrF,OAAO,KAG1B,GAAI,MAAQngB,EAAQ8xB,MAAMrrB,EAAEgB,MAAO,OAAO4M,IAG1C,GAAIrU,EAAQqvB,eAAiB5oB,EAAEgB,MAAQzH,EAAQwvB,aAAe/oB,EAAEgB,KAAM,CAEpE,IADA,IAAIV,EAAM,GACiB,MAApBye,EAAIrF,SAASxgB,KAClBoH,GAAOye,EAAIrF,OAAOxgB,GACdA,GAAK6lB,EAAItlB,UAEf,GAAI6G,GAAOqV,OAAOrV,IAA0B,MAAlBye,EAAIrF,OAAOxgB,GACnC,MAAM,IAAIE,MAAM,uBAElB4G,EAAEqqB,YAAc1U,OAAOrV,GAIzB,GAAI,MAAQye,EAAIrF,OAAOxgB,EAAI,GAEzB,IADA8G,EAAEklB,IAAM,KACChsB,GAEH,OADAmL,EAAI0a,EAAIrF,OAAOxgB,MAEnB8G,EAAEklB,KAAO7gB,EACLnL,IAAM6lB,EAAItlB,eAGhBuG,EAAEklB,IAAM,IAIV,IAAI7M,EAAO0G,EAAIrF,OAAOxgB,EAAI,GAC1B,GAAI,KAAOmf,GAAQ1C,OAAO0C,IAASA,EAAM,CAEvC,IADArY,EAAEmL,GAAK,KACEjS,GAAG,CACV,IAAImL,EAAI0a,EAAIrF,OAAOxgB,GACnB,GAAI,MAAQmL,GAAKsR,OAAOtR,IAAMA,EAAG,GAC7BnL,EACF,MAGF,GADA8G,EAAEmL,IAAM4T,EAAIrF,OAAOxgB,GACfA,IAAM6lB,EAAItlB,OAAQ,MAExBuG,EAAEmL,GAAKwK,OAAO3V,EAAEmL,IASlB,OALI4T,EAAIrF,SAASxgB,KACf8G,EAAIsrB,EAAStrB,EAAG+e,EAAI/W,OAAO9O,KAG7B0K,EAAM,mBAAoBmb,EAAK/e,GACxBA,EAGT,SAASsrB,EAAStrB,EAAG+e,GACnB,IACE/e,EAAE1D,KAAO6J,KAAK2Y,MAAMC,GACpB,MAAMtmB,GACN,OAAOmV,IAET,OAAO5N,EAyBT,SAASurB,EAAoB7e,GAC3B5Q,KAAK0vB,UAAY9e,EACjB5Q,KAAKsf,WAkCP,SAASxN,IACP,OACE5M,KAAMzH,EAAQ4vB,MACd7sB,KAAM,gBAxYV,IAAIsH,EAAQ3K,EAAQ,SAAS,oBACzBmJ,EAAUnJ,EAAQ,qBAClBwyB,EAASxyB,EAAQ,eACjBud,EAASvd,EAAQ,YACjB4wB,EAAQ5wB,EAAQ,eAQpBM,EAAQwP,SAAW,EAQnBxP,EAAQ8xB,OACN,UACA,aACA,QACA,MACA,QACA,eACA,cASF9xB,EAAQkvB,QAAU,EAQlBlvB,EAAQ0vB,WAAa,EAQrB1vB,EAAQ+uB,MAAQ,EAQhB/uB,EAAQuvB,IAAM,EAQdvvB,EAAQ4vB,MAAQ,EAQhB5vB,EAAQqvB,aAAe,EAQvBrvB,EAAQwvB,WAAa,EAQrBxvB,EAAQqrB,QAAUA,EAQlBrrB,EAAQurB,QAAUA,EAoBlBF,EAAQ3qB,UAAUqF,OAAS,SAAS1F,EAAKgD,GAClChD,EAAIoH,OAASzH,EAAQ+uB,OAAS1uB,EAAIoH,OAASzH,EAAQuvB,MAAQ2C,EAAO7xB,EAAI0C,QACzE1C,EAAIoH,KAAOpH,EAAIoH,OAASzH,EAAQ+uB,MAAQ/uB,EAAQqvB,aAAervB,EAAQwvB,YAGzEnlB,EAAM,qBAAsBhK,GAExBL,EAAQqvB,eAAiBhvB,EAAIoH,MAAQzH,EAAQwvB,aAAenvB,EAAIoH,KAClEiqB,EAAerxB,EAAKgD,GAIpBA,GADeouB,EAAepxB,MAkFlCwI,EAAQ0iB,EAAQ7qB,WAUhB6qB,EAAQ7qB,UAAUssB,IAAM,SAAS3sB,GAC/B,IAAI8S,EACJ,GAAmB,iBAAR9S,EACT8S,EAAS0e,EAAaxxB,GAClBL,EAAQqvB,eAAiBlc,EAAO1L,MAAQzH,EAAQwvB,aAAerc,EAAO1L,MACxElF,KAAKqvB,cAAgB,IAAII,EAAoB7e,GAGI,IAA7C5Q,KAAKqvB,cAAcK,UAAUnB,aAC/BvuB,KAAKoH,KAAK,UAAWwJ,IAGvB5Q,KAAKoH,KAAK,UAAWwJ,OAGpB,CAAA,IAAImd,EAAMjwB,KAAQA,EAAI4F,OAYzB,MAAM,IAAIpG,MAAM,iBAAmBQ,GAXnC,IAAKkC,KAAKqvB,cACR,MAAM,IAAI/xB,MAAM,qDAEhBsT,EAAS5Q,KAAKqvB,cAAcO,eAAe9xB,MAEzCkC,KAAKqvB,cAAgB,KACrBrvB,KAAKoH,KAAK,UAAWwJ,MA4F7BoY,EAAQ7qB,UAAUksB,QAAU,WACtBrqB,KAAKqvB,eACPrvB,KAAKqvB,cAAcQ,0BA6BvBJ,EAAoBtxB,UAAUyxB,eAAiB,SAASE,GAEtD,GADA9vB,KAAKsf,QAAQ3Y,KAAKmpB,GACd9vB,KAAKsf,QAAQ3hB,SAAWqC,KAAK0vB,UAAUnB,YAAa,CACtD,IAAI3d,EAAS8J,EAAO8T,kBAAkBxuB,KAAK0vB,UAAW1vB,KAAKsf,SAE3D,OADAtf,KAAK6vB,yBACEjf,EAET,OAAO,MAST6e,EAAoBtxB,UAAU0xB,uBAAyB,WACrD7vB,KAAK0vB,UAAY,KACjB1vB,KAAKsf,cAUJyQ,WAAW,GAAGf,cAAc,GAAG3b,oBAAoB,GAAGvL,MAAQ,GAAG+X,cAAc,KAAKmQ,IAAI,SAAS7yB,EAAQU,EAAOJ,IACnH,SAAW2G,GAEXvG,EAAOJ,QAQP,SAAeK,GACb,OAAQsG,EAAO6W,QAAU7W,EAAO6W,OAAOqH,SAASxkB,IACxCsG,EAAOzC,aAAe7D,aAAe6D,eAG5CjE,KAAKsC,KAAuB,oBAAXoE,OAAyBA,OAAyB,oBAATwB,KAAuBA,KAAyB,oBAAXC,OAAyBA,gBACrHoqB,IAAI,SAAS9yB,EAAQU,EAAOJ,GAClCyI,UAAU,GAAG,IAAI,GAAGC,MAAM1I,EAAQyI,aAC/BgqB,IAAM,KAAKC,IAAI,SAAShzB,EAAQU,EAAOJ,IACzC,SAAU2G,EAAQgsB,GACC,iBAAZ3yB,QAA0C,IAAXI,EAAyBuyB,EAAQ3yB,GACrD,mBAAXwkB,QAAyBA,OAAOC,IAAMD,QAAQ,WAAYmO,GAChEA,EAAShsB,EAAOisB,MAAQjsB,EAAOisB,WAHjC,CAIErwB,KAAM,SAAWvC,GAAW,aAyG7B,SAAS6yB,KA2XT,SAASC,EAASC,EAAGpN,GAEpBpjB,KAAKwwB,EAAIA,GAAK,EACdxwB,KAAKojB,EAAIA,GAAK,EA6df,SAASqN,EAASC,EAAOC,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,EAAYtI,GAE/FxqB,OAAOgB,eAAgBc,KAAM,MAAQb,MAAO8xB,OAE5CjxB,KAAKkxB,KAAOC,GAAMC,eAElBpxB,KAAKmM,KAAO,GAEZnM,KAAK0wB,WAAkB3hB,IAAV2hB,EAAsBA,EAAQD,EAAQY,cACnDrxB,KAAKsxB,WAELtxB,KAAK2wB,aAAsB5hB,IAAZ4hB,EAAwBA,EAAUF,EAAQc,gBAEzDvxB,KAAK4wB,WAAkB7hB,IAAV6hB,EAAsBA,EAAQY,GAC3CxxB,KAAK6wB,WAAkB9hB,IAAV8hB,EAAsBA,EAAQW,GAE3CxxB,KAAK8wB,eAA0B/hB,IAAd+hB,EAA0BA,EAAYW,GACvDzxB,KAAK+wB,eAA0BhiB,IAAdgiB,EAA0BA,EAAYW,GAEvD1xB,KAAKgxB,gBAA4BjiB,IAAfiiB,EAA2BA,EAAa,EAE1DhxB,KAAKwL,YAAoBuD,IAAXvD,EAAuBA,EAASmmB,GAC9C3xB,KAAKkF,UAAgB6J,IAAT7J,EAAqBA,EAAO0sB,GAExC5xB,KAAK6xB,OAAS,IAAItB,EAAS,EAAG,GAC9BvwB,KAAK8xB,OAAS,IAAIvB,EAAS,EAAG,GAE9BvwB,KAAK+xB,iBAAkB,EACvB/xB,KAAKgyB,kBAAmB,EACxBhyB,KAAKiyB,OAAQ,EACbjyB,KAAKkyB,gBAAkB,EAMvBlyB,KAAK0oB,cAAwB3Z,IAAb2Z,EAAyBA,EAAWyJ,GAEpDnyB,KAAK6hB,QAAU,EACf7hB,KAAKoyB,SAAW,KAuPjB,SAASC,EAAS7B,EAAGpN,EAAGkP,EAAGC,GAE1BvyB,KAAKwwB,EAAIA,GAAK,EACdxwB,KAAKojB,EAAIA,GAAK,EACdpjB,KAAKsyB,EAAIA,GAAK,EACdtyB,KAAKuyB,OAAYxjB,IAANwjB,EAAoBA,EAAI,EAinBpC,SAASC,EAAmBC,EAAOC,EAAQ7tB,GAE1C7E,KAAKkxB,KAAOC,GAAMC,eAElBpxB,KAAKyyB,MAAQA,EACbzyB,KAAK0yB,OAASA,EAEd1yB,KAAK2yB,QAAU,IAAIN,EAAS,EAAG,EAAGI,EAAOC,GACzC1yB,KAAK4yB,aAAc,EAEnB5yB,KAAK6yB,SAAW,IAAIR,EAAS,EAAG,EAAGI,EAAOC,QAIf3jB,KAF3BlK,EAAUA,OAEGksB,YAA0BlsB,EAAQksB,UAAYU,IAE3DzxB,KAAK8yB,QAAU,IAAIrC,OAAS1hB,OAAWA,EAAWlK,EAAQ+rB,MAAO/rB,EAAQgsB,MAAOhsB,EAAQisB,UAAWjsB,EAAQksB,UAAWlsB,EAAQ2G,OAAQ3G,EAAQK,KAAML,EAAQmsB,WAAYnsB,EAAQ6jB,UAEhL1oB,KAAK+yB,iBAAsChkB,IAAxBlK,EAAQkuB,aAA4BluB,EAAQkuB,YAC/D/yB,KAAKgzB,mBAA0CjkB,IAA1BlK,EAAQmuB,eAA8BnuB,EAAQmuB,cACnEhzB,KAAKizB,kBAAwClkB,IAAzBlK,EAAQouB,aAA6BpuB,EAAQouB,aAAe,KA2DjF,SAASC,EAAuBT,EAAOC,EAAQ7tB,GAE9C2tB,EAAkB90B,KAAMsC,KAAMyyB,EAAOC,EAAQ7tB,GAE7C7E,KAAKmzB,eAAiB,EACtBnzB,KAAKozB,kBAAoB,EAgB1B,SAASC,EAAY7C,EAAGpN,EAAGkP,EAAGC,GAE7BvyB,KAAKszB,GAAK9C,GAAK,EACfxwB,KAAKuzB,GAAKnQ,GAAK,EACfpjB,KAAKwzB,GAAKlB,GAAK,EACftyB,KAAKyzB,QAAa1kB,IAANwjB,EAAoBA,EAAI,EA2lBrC,SAASmB,EAASlD,EAAGpN,EAAGkP,GAEvBtyB,KAAKwwB,EAAIA,GAAK,EACdxwB,KAAKojB,EAAIA,GAAK,EACdpjB,KAAKsyB,EAAIA,GAAK,EA0tBf,SAASqB,IAER3zB,KAAK4zB,UAEJ,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIL1tB,UAAUvI,OAAS,GAEvBc,QAAQqT,MAAO,iFAo4BjB,SAAS+hB,EAAarzB,EAAMiyB,EAAOC,EAAQlnB,EAAQtG,EAAMyrB,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAYtI,GAEjH+H,EAAQ/yB,KAAMsC,KAAM,KAAM2wB,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,EAAYtI,GAEjG1oB,KAAK0wB,OAAUlwB,KAAMA,EAAMiyB,MAAOA,EAAOC,OAAQA,GAEjD1yB,KAAK8wB,eAA0B/hB,IAAd+hB,EAA0BA,EAAYgD,GACvD9zB,KAAK+wB,eAA0BhiB,IAAdgiB,EAA0BA,EAAY+C,GAEvD9zB,KAAK+xB,iBAAkB,EACvB/xB,KAAKiyB,OAAQ,EACbjyB,KAAKkyB,gBAAkB,EAaxB,SAAS6B,EAAaC,EAAQrD,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,EAAYtI,GAEpGsL,OAAoBjlB,IAAXilB,EAAuBA,KAChCrD,OAAsB5hB,IAAZ4hB,EAAwBA,EAAUsD,GAE5CxD,EAAQ/yB,KAAMsC,KAAMg0B,EAAQrD,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,EAAYtI,GAEnG1oB,KAAKiyB,OAAQ,EA+Ed,SAASiC,IAERl0B,KAAKm0B,OACLn0B,KAAKqc,OAkBN,SAAS+X,EAAS3T,EAAO4T,EAASC,GAEjC,IAAIC,EAAY9T,EAAO,GAEvB,GAAK8T,GAAa,GAAKA,EAAY,EAAI,OAAO9T,EAI9C,IAAI5jB,EAAIw3B,EAAUC,EACjBx3B,EAAI03B,GAAe33B,GASpB,QAPWkS,IAANjS,IAEJA,EAAI,IAAI23B,aAAc53B,GACtB23B,GAAe33B,GAAMC,GAIL,IAAZu3B,EAAgB,CAEpBE,EAAUvI,QAASlvB,EAAG,GAEtB,IAAM,IAAIM,EAAI,EAAGy0B,EAAS,EAAGz0B,IAAMi3B,IAAYj3B,EAE9Cy0B,GAAUyC,EACV7T,EAAOrjB,GAAI4uB,QAASlvB,EAAG+0B,GAMzB,OAAO/0B,EAMR,SAAS43B,EAAeC,EAAU93B,GAEjC,IAAIC,EAAI83B,GAAe/3B,QAEZkS,IAANjS,IAEJA,EAAI,IAAI+3B,WAAYh4B,GACpB+3B,GAAe/3B,GAAMC,GAItB,IAAM,IAAIM,EAAI,EAAGA,IAAMP,IAAMO,EAC5BN,EAAGM,GAAMu3B,EAASG,mBAEnB,OAAOh4B,EAWR,SAASi4B,EAAYC,EAAI5qB,GAAM4qB,EAAGC,UAAWj1B,KAAKk1B,KAAM9qB,GACxD,SAAS+qB,EAAYH,EAAI5qB,GAAM4qB,EAAGI,UAAWp1B,KAAKk1B,KAAM9qB,GAIxD,SAASirB,EAAaL,EAAI5qB,QAEZ2E,IAAR3E,EAAEomB,EAAkBwE,EAAGM,WAAYt1B,KAAKk1B,KAAM9qB,GAC9C4qB,EAAGO,UAAWv1B,KAAKk1B,KAAM9qB,EAAEomB,EAAGpmB,EAAEgZ,GAItC,SAASoS,EAAaR,EAAI5qB,QAEZ2E,IAAR3E,EAAEomB,EACNwE,EAAGS,UAAWz1B,KAAKk1B,KAAM9qB,EAAEomB,EAAGpmB,EAAEgZ,EAAGhZ,EAAEkoB,QACpBvjB,IAAR3E,EAAEtN,EACXk4B,EAAGS,UAAWz1B,KAAKk1B,KAAM9qB,EAAEtN,EAAGsN,EAAEsrB,EAAGtrB,EAAE5C,GAErCwtB,EAAGW,WAAY31B,KAAKk1B,KAAM9qB,GAI5B,SAASwrB,EAAaZ,EAAI5qB,QAEZ2E,IAAR3E,EAAEomB,EAAkBwE,EAAGa,WAAY71B,KAAKk1B,KAAM9qB,GAC9C4qB,EAAGc,UAAW91B,KAAKk1B,KAAM9qB,EAAEomB,EAAGpmB,EAAEgZ,EAAGhZ,EAAEkoB,EAAGloB,EAAEmoB,GAMhD,SAASwD,EAAaf,EAAI5qB,GAEzB4qB,EAAGgB,iBAAkBh2B,KAAKk1B,MAAM,EAAO9qB,EAAEwpB,UAAYxpB,GAItD,SAAS6rB,EAAajB,EAAI5qB,QAEL2E,IAAf3E,EAAEwpB,SAENoB,EAAGkB,iBAAkBl2B,KAAKk1B,MAAM,EAAO9qB,IAIvC+rB,GAAUzxB,IAAK0F,EAAEwpB,UACjBoB,EAAGkB,iBAAkBl2B,KAAKk1B,MAAM,EAAOiB,KAMzC,SAASC,EAAapB,EAAI5qB,QAEL2E,IAAf3E,EAAEwpB,SAENoB,EAAGqB,iBAAkBr2B,KAAKk1B,MAAM,EAAO9qB,IAIvCksB,GAAU5xB,IAAK0F,EAAEwpB,UACjBoB,EAAGqB,iBAAkBr2B,KAAKk1B,MAAM,EAAOoB,KAQzC,SAASC,EAAYvB,EAAI5qB,EAAGuqB,GAE3B,IAAI6B,EAAO7B,EAASG,mBACpBE,EAAGI,UAAWp1B,KAAKk1B,KAAMsB,GACzB7B,EAAS8B,aAAcrsB,GAAKssB,GAAcF,GAI3C,SAASG,EAAY3B,EAAI5qB,EAAGuqB,GAE3B,IAAI6B,EAAO7B,EAASG,mBACpBE,EAAGI,UAAWp1B,KAAKk1B,KAAMsB,GACzB7B,EAASiC,eAAgBxsB,GAAKysB,GAAkBL,GAMjD,SAASM,EAAa9B,EAAI5qB,GAAM4qB,EAAG+B,WAAY/2B,KAAKk1B,KAAM9qB,GAC1D,SAAS4sB,EAAahC,EAAI5qB,GAAM4qB,EAAGiC,WAAYj3B,KAAKk1B,KAAM9qB,GAC1D,SAAS8sB,EAAalC,EAAI5qB,GAAM4qB,EAAGmC,WAAYn3B,KAAKk1B,KAAM9qB,GAI1D,SAASgtB,EAAmBlyB,GAE3B,OAASA,GAER,KAAK,KAAQ,OAAO6vB,EACpB,KAAK,MAAQ,OAAOM,EACpB,KAAK,MAAQ,OAAOG,EACpB,KAAK,MAAQ,OAAOI,EAEpB,KAAK,MAAQ,OAAOG,EACpB,KAAK,MAAQ,OAAOE,EACpB,KAAK,MAAQ,OAAOG,EAEpB,KAAK,MAAQ,KAAK,MAAQ,OAAOG,EACjC,KAAK,MAAQ,OAAOI,EAEpB,KAAK,KAAQ,KAAK,MAAQ,OAAOxB,EACjC,KAAK,MAAQ,KAAK,MAAQ,OAAO2B,EACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,EACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GAQnC,SAASG,EAAarC,EAAI5qB,GAAM4qB,EAAGsC,WAAYt3B,KAAKk1B,KAAM9qB,GAC1D,SAASmtB,EAAavC,EAAI5qB,GAAM4qB,EAAGwC,WAAYx3B,KAAKk1B,KAAM9qB,GAI1D,SAASqtB,EAAazC,EAAI5qB,GAEzB4qB,EAAGM,WAAYt1B,KAAKk1B,KAAMd,EAAShqB,EAAGpK,KAAKyF,KAAM,IAIlD,SAASiyB,EAAa1C,EAAI5qB,GAEzB4qB,EAAGW,WAAY31B,KAAKk1B,KAAMd,EAAShqB,EAAGpK,KAAKyF,KAAM,IAIlD,SAASkyB,EAAa3C,EAAI5qB,GAEzB4qB,EAAGa,WAAY71B,KAAKk1B,KAAMd,EAAShqB,EAAGpK,KAAKyF,KAAM,IAMlD,SAASmyB,EAAa5C,EAAI5qB,GAEzB4qB,EAAGgB,iBAAkBh2B,KAAKk1B,MAAM,EAAOd,EAAShqB,EAAGpK,KAAKyF,KAAM,IAI/D,SAASoyB,EAAa7C,EAAI5qB,GAEzB4qB,EAAGkB,iBAAkBl2B,KAAKk1B,MAAM,EAAOd,EAAShqB,EAAGpK,KAAKyF,KAAM,IAI/D,SAASqyB,EAAa9C,EAAI5qB,GAEzB4qB,EAAGqB,iBAAkBr2B,KAAKk1B,MAAM,EAAOd,EAAShqB,EAAGpK,KAAKyF,KAAM,KAM/D,SAASsyB,EAAa/C,EAAI5qB,EAAGuqB,GAE5B,IAAI93B,EAAIuN,EAAEzM,OACTq6B,EAAQtD,EAAeC,EAAU93B,GAElCm4B,EAAGwC,WAAYx3B,KAAKk1B,KAAM8C,GAE1B,IAAM,IAAI56B,EAAI,EAAGA,IAAMP,IAAMO,EAE5Bu3B,EAAS8B,aAAcrsB,EAAGhN,IAAOs5B,GAAcsB,EAAO56B,IAMxD,SAAS66B,EAAajD,EAAI5qB,EAAGuqB,GAE5B,IAAI93B,EAAIuN,EAAEzM,OACTq6B,EAAQtD,EAAeC,EAAU93B,GAElCm4B,EAAGwC,WAAYx3B,KAAKk1B,KAAM8C,GAE1B,IAAM,IAAI56B,EAAI,EAAGA,IAAMP,IAAMO,EAE5Bu3B,EAASiC,eAAgBxsB,EAAGhN,IAAOy5B,GAAkBmB,EAAO56B,IAQ9D,SAAS86B,EAAoBhzB,GAE5B,OAASA,GAER,KAAK,KAAQ,OAAOmyB,EACpB,KAAK,MAAQ,OAAOI,EACpB,KAAK,MAAQ,OAAOC,EACpB,KAAK,MAAQ,OAAOC,EAEpB,KAAK,MAAQ,OAAOC,EACpB,KAAK,MAAQ,OAAOC,EACpB,KAAK,MAAQ,OAAOC,EAEpB,KAAK,MAAQ,OAAOC,EACpB,KAAK,MAAQ,OAAOE,EAEpB,KAAK,KAAQ,KAAK,MAAQ,OAAOV,EACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOT,EACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,EACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GAQnC,SAASiB,EAAe9oB,EAAI+oB,EAAYlD,GAEvCl1B,KAAKqP,GAAKA,EACVrP,KAAKk1B,KAAOA,EACZl1B,KAAKq4B,SAAWjB,EAAmBgB,EAAWlzB,MAM/C,SAASozB,EAAkBjpB,EAAI+oB,EAAYlD,GAE1Cl1B,KAAKqP,GAAKA,EACVrP,KAAKk1B,KAAOA,EACZl1B,KAAKyF,KAAO2yB,EAAW3yB,KACvBzF,KAAKq4B,SAAWH,EAAoBE,EAAWlzB,MAMhD,SAASqzB,EAAmBlpB,GAE3BrP,KAAKqP,GAAKA,EAEV6kB,EAAiBx2B,KAAMsC,MAmCxB,SAASw4B,EAAYC,EAAWC,GAE/BD,EAAUtE,IAAIxtB,KAAM+xB,GACpBD,EAAUpc,IAAKqc,EAAcrpB,IAAOqpB,EAIrC,SAASC,EAAcP,EAAYlD,EAAMuD,GAExC,IAAIlrB,EAAO6qB,EAAWjsB,KACrBysB,EAAarrB,EAAK5P,OAKnB,IAFAk7B,GAAWC,UAAY,IAEX,CAEX,IAAIlwB,EAAQiwB,GAAW3V,KAAM3V,GAC5BwrB,EAAWF,GAAWC,UAEtBzpB,EAAKzG,EAAO,GACZowB,EAA2B,MAAfpwB,EAAO,GACnBqwB,EAAYrwB,EAAO,GAIpB,GAFKowB,IAAY3pB,GAAU,QAERN,IAAdkqB,GAAyC,MAAdA,GAAqBF,EAAW,IAAMH,EAAa,CAIlFJ,EAAYC,OAAyB1pB,IAAdkqB,EACrB,IAAId,EAAe9oB,EAAI+oB,EAAYlD,GACnC,IAAIoD,EAAkBjpB,EAAI+oB,EAAYlD,IAExC,MAMA,IAAyB3Y,EAAfkc,EAAUpc,IAAiBhN,QAEvBN,IAATwN,GAGJic,EAAYC,EADZlc,EAAO,IAAIgc,EAAmBlpB,IAK/BopB,EAAYlc,GAUf,SAAS2c,EAAelE,EAAImE,EAASxE,GAEpCT,EAAiBx2B,KAAMsC,MAEvBA,KAAK20B,SAAWA,EAIhB,IAAM,IAFF93B,EAAIm4B,EAAGoE,oBAAqBD,EAASnE,EAAGqE,iBAElCj8B,EAAI,EAAGA,EAAIP,IAAMO,EAAI,CAE9B,IAAIk8B,EAAOtE,EAAGuE,iBAAkBJ,EAAS/7B,GACxCmQ,EAAO+rB,EAAKntB,KAGbwsB,EAAcW,EAFNtE,EAAGwE,mBAAoBL,EAAS5rB,GAEdvN,OAuF5B,SAASy5B,EAAO38B,EAAG44B,EAAGluB,GAErB,YAAWuH,IAAN2mB,QAAyB3mB,IAANvH,EAGhBxH,KAAK0E,IAAK5H,GAIXkD,KAAK05B,OAAQ58B,EAAG44B,EAAGluB,GAovC3B,SAASmyB,EAAMv3B,EAAKC,GAEnBrC,KAAKoC,SAAgB2M,IAAR3M,EAAsBA,EAAM,IAAImuB,EAAWpI,EAAAA,EAAYA,EAAAA,GACpEnoB,KAAKqC,SAAgB0M,IAAR1M,EAAsBA,EAAM,IAAIkuB,GAAWpI,EAAAA,GAAYA,EAAAA,GAuNrE,SAASyR,EAAiBjF,EAAUkF,GAUnC,SAASjuB,IAER,IAAIkuB,EAAW,IAAIrF,eAChB,GAAK,EAAI,EAAG,EACb,GAAK,EAAI,EAAG,EACZ,EAAI,EAAI,EAAG,GACV,EAAI,EAAI,EAAG,IAGVsF,EAAQ,IAAIC,aACf,EAAG,EAAG,EACN,EAAG,EAAG,IAKPC,EAAmBjF,EAAGkF,eACtBC,EAAmBnF,EAAGkF,eAEtBlF,EAAGoF,WAAYpF,EAAGqF,aAAcJ,GAChCjF,EAAGsF,WAAYtF,EAAGqF,aAAcP,EAAU9E,EAAGuF,aAE7CvF,EAAGoF,WAAYpF,EAAGwF,qBAAsBL,GACxCnF,EAAGsF,WAAYtF,EAAGwF,qBAAsBT,EAAO/E,EAAGuF,aAIlDE,EAAmBzF,EAAG0F,gBACtBC,EAAmB3F,EAAG0F,gBAEtBE,EAAMC,YAAa7F,EAAG8F,WAAYL,GAClCzF,EAAG+F,WAAY/F,EAAG8F,WAAY,EAAG9F,EAAGgG,IAAK,GAAI,GAAI,EAAGhG,EAAGgG,IAAKhG,EAAGiG,cAAe,MAC9EjG,EAAGkG,cAAelG,EAAG8F,WAAY9F,EAAGmG,eAAgBnG,EAAGoG,eACvDpG,EAAGkG,cAAelG,EAAG8F,WAAY9F,EAAGqG,eAAgBrG,EAAGoG,eACvDpG,EAAGkG,cAAelG,EAAG8F,WAAY9F,EAAGsG,mBAAoBtG,EAAGuG,SAC3DvG,EAAGkG,cAAelG,EAAG8F,WAAY9F,EAAGwG,mBAAoBxG,EAAGuG,SAE3DX,EAAMC,YAAa7F,EAAG8F,WAAYH,GAClC3F,EAAG+F,WAAY/F,EAAG8F,WAAY,EAAG9F,EAAGyG,KAAM,GAAI,GAAI,EAAGzG,EAAGyG,KAAMzG,EAAGiG,cAAe,MAChFjG,EAAGkG,cAAelG,EAAG8F,WAAY9F,EAAGmG,eAAgBnG,EAAGoG,eACvDpG,EAAGkG,cAAelG,EAAG8F,WAAY9F,EAAGqG,eAAgBrG,EAAGoG,eACvDpG,EAAGkG,cAAelG,EAAG8F,WAAY9F,EAAGsG,mBAAoBtG,EAAGuG,SAC3DvG,EAAGkG,cAAelG,EAAG8F,WAAY9F,EAAGwG,mBAAoBxG,EAAGuG,SAE3DG,GAECC,cAEC,+BAEA,+BACA,sBACA,0BAEA,kCAEA,2BACA,qBAEA,oBACA,6BAEA,gBAEC,YAEA,uBAEA,2BAEC,iEACA,6DACA,6DACA,6DACA,6DACA,6DACA,6DACA,6DACA,6DAEA,2CACA,2CACA,2CACA,2CAEA,uEACA,uEAED,IAEA,uFAED,KAECvgB,KAAM,MAERwgB,gBAEC,+BAEA,yBACA,yBACA,sBAEA,oBACA,6BAEA,gBAIC,2BAEC,6CAID,kCAEC,wCAID,WAEC,wCACA,sCACA,0BACA,6BAED,IAED,KAECxgB,KAAM,OAIT+d,EAAU0C,EAAeH,GAEzBI,GACCC,OAAQ/G,EAAGgH,kBAAoB7C,EAAS,YACxC8C,GAAQjH,EAAGgH,kBAAoB7C,EAAS,OAGzC+C,GACCC,WAAgBnH,EAAGwE,mBAAoBL,EAAS,cAChD9c,IAAgB2Y,EAAGwE,mBAAoBL,EAAS,OAChDiD,aAAgBpH,EAAGwE,mBAAoBL,EAAS,gBAChDkD,QAAgBrH,EAAGwE,mBAAoBL,EAAS,WAChD3wB,MAAgBwsB,EAAGwE,mBAAoBL,EAAS,SAChDmD,MAAgBtH,EAAGwE,mBAAoBL,EAAS,SAChDoD,SAAgBvH,EAAGwE,mBAAoBL,EAAS,YAChDqD,eAAgBxH,EAAGwE,mBAAoBL,EAAS,mBA6LlD,SAAS0C,EAAeH,GAEvB,IAAIvC,EAAUnE,EAAG6G,gBAEbD,EAAiB5G,EAAGyH,aAAczH,EAAG0H,iBACrCf,EAAe3G,EAAGyH,aAAczH,EAAG2H,eAEnCC,EAAS,aAAejI,EAASkI,eAAiB,YAatD,OAXA7H,EAAG8H,aAAclB,EAAgBgB,EAASlB,EAAOE,gBACjD5G,EAAG8H,aAAcnB,EAAciB,EAASlB,EAAOC,cAE/C3G,EAAG+H,cAAenB,GAClB5G,EAAG+H,cAAepB,GAElB3G,EAAGgI,aAAc7D,EAASyC,GAC1B5G,EAAGgI,aAAc7D,EAASwC,GAE1B3G,EAAGiI,YAAa9D,GAETA,EAlXR,IAGIc,EAAcE,EACduB,EAAQvC,EAAS2C,EAAYI,EAE7BzB,EAAaE,EANb3F,EAAKL,EAASuI,QACdtC,EAAQjG,EAASiG,MA2KrB56B,KAAKm9B,OAAS,SAAWC,EAAOC,EAAQxK,GAEvC,GAAuB,IAAlBgH,EAAOl8B,OAAZ,CAEA,IAAI2/B,EAAe,IAAI5J,EAEnB6J,EAAY1K,EAASN,EAAIM,EAASP,EACrCkL,EAAiC,GAAb3K,EAASP,EAC7BmL,EAAkC,GAAb5K,EAASN,EAE3B9sB,EAAO,GAAKotB,EAASN,EACxB+J,EAAQ,IAAI/L,EAAS9qB,EAAO83B,EAAW93B,GAEpC+2B,EAAiB,IAAI9I,EAAS,EAAG,EAAG,GACvCgK,EAAuB,IAAInN,EAAS,EAAG,GAEpCoN,EAAY,IAAIhE,EAEpBgE,EAAUv7B,IAAIsC,IAAKmuB,EAASrC,EAAGqC,EAASzP,GACxCua,EAAUt7B,IAAIqC,IAAKmuB,EAASrC,GAAMqC,EAASP,EAAI,IAAMO,EAASzP,GAAMyP,EAASN,EAAI,UAEhExjB,IAAZoqB,GAEJvtB,IAIDopB,EAAG4I,WAAYzE,GAEfyB,EAAMiD,iBACNjD,EAAMkD,gBAAiBhC,EAAWC,QAClCnB,EAAMkD,gBAAiBhC,EAAWG,IAClCrB,EAAMmD,0BAKN/I,EAAGI,UAAW8G,EAASE,aAAc,GACrCpH,EAAGI,UAAW8G,EAAS7f,IAAK,GAE5B2Y,EAAGoF,WAAYpF,EAAGqF,aAAcJ,GAChCjF,EAAGgJ,oBAAqBlC,EAAWC,OAAQ,EAAG/G,EAAGiJ,OAAO,EAAO,GAAO,GACtEjJ,EAAGgJ,oBAAqBlC,EAAWG,GAAI,EAAGjH,EAAGiJ,OAAO,EAAO,GAAO,GAElEjJ,EAAGoF,WAAYpF,EAAGwF,qBAAsBL,GAExCS,EAAM9uB,QAASkpB,EAAGkJ,WAClBtD,EAAMtb,QAAQ6e,MAAMC,SAAS,GAE7B,IAAM,IAAIhhC,EAAI,EAAGI,EAAIq8B,EAAOl8B,OAAQP,EAAII,EAAGJ,IAAO,CAEjDqI,EAAO,GAAKotB,EAASN,EACrB+J,EAAM53B,IAAKe,EAAO83B,EAAW93B,GAI7B,IAAI44B,EAAQxE,EAAQz8B,GAkBpB,GAhBAkgC,EAAa54B,IAAK25B,EAAMC,YAAY1K,SAAU,IAAMyK,EAAMC,YAAY1K,SAAU,IAAMyK,EAAMC,YAAY1K,SAAU,KAElH0J,EAAaiB,aAAclB,EAAOmB,oBAClClB,EAAaiB,aAAclB,EAAOoB,kBAIlCjC,EAAe/3B,KAAM64B,GAIrBI,EAAqBlN,EAAIqC,EAASrC,EAAMgM,EAAehM,EAAIgN,EAAsBA,EAAoB,EACrGE,EAAqBta,EAAIyP,EAASzP,EAAMoZ,EAAepZ,EAAIqa,EAAuBA,EAAqB,GAI9C,IAApDE,EAAUe,cAAehB,GAAkC,CAI/D9C,EAAM+D,cAAe3J,EAAG4J,UACxBhE,EAAMC,YAAa7F,EAAG8F,WAAY,MAClCF,EAAM+D,cAAe3J,EAAG6J,UACxBjE,EAAMC,YAAa7F,EAAG8F,WAAYL,GAClCzF,EAAG8J,eAAgB9J,EAAG8F,WAAY,EAAG9F,EAAGgG,IAAK0C,EAAqBlN,EAAGkN,EAAqBta,EAAG,GAAI,GAAI,GAKrG4R,EAAGI,UAAW8G,EAASC,WAAY,GACnCnH,EAAGO,UAAW2G,EAASI,MAAOA,EAAM9L,EAAG8L,EAAMlZ,GAC7C4R,EAAGS,UAAWyG,EAASM,eAAgBA,EAAehM,EAAGgM,EAAepZ,EAAGoZ,EAAelK,GAE1FsI,EAAM9uB,QAASkpB,EAAG+J,OAClBnE,EAAMpwB,OAAQwqB,EAAGgK,YAEjBhK,EAAGiK,aAAcjK,EAAGkK,UAAW,EAAGlK,EAAGmK,eAAgB,GAKrDvE,EAAM+D,cAAe3J,EAAG4J,UACxBhE,EAAMC,YAAa7F,EAAG8F,WAAYH,GAClC3F,EAAG8J,eAAgB9J,EAAG8F,WAAY,EAAG9F,EAAGyG,KAAMiC,EAAqBlN,EAAGkN,EAAqBta,EAAG,GAAI,GAAI,GAKtG4R,EAAGI,UAAW8G,EAASC,WAAY,GACnCvB,EAAM9uB,QAASkpB,EAAGgK,YAElBpE,EAAM+D,cAAe3J,EAAG6J,UACxBjE,EAAMC,YAAa7F,EAAG8F,WAAYL,GAClCzF,EAAGiK,aAAcjK,EAAGkK,UAAW,EAAGlK,EAAGmK,eAAgB,GAKrDd,EAAMe,eAAe36B,KAAM+3B,GAEtB6B,EAAMgB,qBAEVhB,EAAMgB,qBAAsBhB,GAI5BA,EAAMiB,mBAMPtK,EAAGI,UAAW8G,EAASC,WAAY,GACnCvB,EAAMpwB,OAAQwqB,EAAG+J,OAEjB,IAAM,IAAI50B,EAAI,EAAGo1B,EAAKlB,EAAMmB,WAAW7hC,OAAQwM,EAAIo1B,EAAIp1B,IAAO,CAE7D,IAAIs1B,EAASpB,EAAMmB,WAAYr1B,GAE1Bs1B,EAAOpD,QAAU,MAASoD,EAAOnD,MAAQ,OAE7CE,EAAehM,EAAIiP,EAAOjP,EAC1BgM,EAAepZ,EAAIqc,EAAOrc,EAC1BoZ,EAAelK,EAAImN,EAAOnN,EAE1B7sB,EAAOg6B,EAAOh6B,KAAOg6B,EAAOnD,MAAQzJ,EAASN,EAE7C+J,EAAM9L,EAAI/qB,EAAO83B,EACjBjB,EAAMlZ,EAAI3d,EAEVuvB,EAAGS,UAAWyG,EAASM,eAAgBA,EAAehM,EAAGgM,EAAepZ,EAAGoZ,EAAelK,GAC1F0C,EAAGO,UAAW2G,EAASI,MAAOA,EAAM9L,EAAG8L,EAAMlZ,GAC7C4R,EAAGC,UAAWiH,EAASK,SAAUkD,EAAOlD,UAExCvH,EAAGC,UAAWiH,EAASG,QAASoD,EAAOpD,SACvCrH,EAAGS,UAAWyG,EAAS1zB,MAAOi3B,EAAOj3B,MAAM1L,EAAG2iC,EAAOj3B,MAAMktB,EAAG+J,EAAOj3B,MAAMhB,GAE3EozB,EAAM8E,YAAaD,EAAOE,SAAUF,EAAOG,cAAeH,EAAOI,SAAUJ,EAAOK,UAClFnL,EAAS8B,aAAcgJ,EAAO3M,QAAS,GAEvCkC,EAAGiK,aAAcjK,EAAGkK,UAAW,EAAGlK,EAAGmK,eAAgB,MAYzDvE,EAAMpwB,OAAQwqB,EAAGkJ,WACjBtD,EAAMpwB,OAAQwqB,EAAGgK,YACjBpE,EAAMtb,QAAQ6e,MAAMC,SAAS,GAE7BzJ,EAASoL,iBAmCX,SAASC,EAAcrL,EAAUsL,GAgBhC,SAASr0B,IAER,IAAIkuB,EAAW,IAAIrF,eAChB,IAAO,GAAM,EAAG,EAChB,IAAO,GAAM,EAAG,EAChB,GAAO,GAAM,EAAG,GAChB,GAAO,GAAM,EAAG,IAGfsF,EAAQ,IAAIC,aACf,EAAG,EAAG,EACN,EAAG,EAAG,IAGPC,EAAgBjF,EAAGkF,eACnBC,EAAgBnF,EAAGkF,eAEnBlF,EAAGoF,WAAYpF,EAAGqF,aAAcJ,GAChCjF,EAAGsF,WAAYtF,EAAGqF,aAAcP,EAAU9E,EAAGuF,aAE7CvF,EAAGoF,WAAYpF,EAAGwF,qBAAsBL,GACxCnF,EAAGsF,WAAYtF,EAAGwF,qBAAsBT,EAAO/E,EAAGuF,aAElDpB,EAAU0C,IAEVC,GACCnlB,SAAYqe,EAAGgH,kBAAoB7C,EAAS,YAC5C8C,GAAQjH,EAAGgH,kBAAoB7C,EAAS,OAGzC+C,GACCgE,SAAYlL,EAAGwE,mBAAoBL,EAAS,YAC5CgH,QAAWnL,EAAGwE,mBAAoBL,EAAS,WAE3CoD,SAAYvH,EAAGwE,mBAAoBL,EAAS,YAC5CmD,MAAUtH,EAAGwE,mBAAoBL,EAAS,SAE1C3wB,MAAUwsB,EAAGwE,mBAAoBL,EAAS,SAC1C9c,IAAQ2Y,EAAGwE,mBAAoBL,EAAS,OACxCkD,QAAWrH,EAAGwE,mBAAoBL,EAAS,WAE3CiH,gBAAkBpL,EAAGwE,mBAAoBL,EAAS,mBAClDsF,iBAAkBzJ,EAAGwE,mBAAoBL,EAAS,oBAElDkH,QAAWrL,EAAGwE,mBAAoBL,EAAS,WAC3CmH,WAActL,EAAGwE,mBAAoBL,EAAS,cAC9CoH,QAAWvL,EAAGwE,mBAAoBL,EAAS,WAC3CqH,OAAWxL,EAAGwE,mBAAoBL,EAAS,UAC3CsH,SAAYzL,EAAGwE,mBAAoBL,EAAS,YAE5CuH,UAAa1L,EAAGwE,mBAAoBL,EAAS,cAG9C,IAAIwH,EAAS33B,SAAS43B,gBAAiB,+BAAgC,UACvED,EAAOlO,MAAQ,EACfkO,EAAOjO,OAAS,EAEhB,IAAIwK,EAAUyD,EAAOE,WAAY,MACjC3D,EAAQ4D,UAAY,QACpB5D,EAAQ6D,SAAU,EAAG,EAAG,EAAG,IAE3BjO,EAAU,IAAIrC,EAASkQ,IACfK,aAAc,EAwKvB,SAASnF,IAER,IAAI1C,EAAUnE,EAAG6G,gBAEbF,EAAe3G,EAAGyH,aAAczH,EAAG2H,eACnCf,EAAiB5G,EAAGyH,aAAczH,EAAG0H,iBAsGzC,OApGA1H,EAAG8H,aAAcnB,GAEhB,aAAehH,EAASkI,eAAiB,UAEzC,qCAEA,gCACA,iCACA,0BACA,sBACA,yBACA,wBAEA,2BACA,qBAEA,oBAEA,gBAEC,iCAEA,2CAEA,wBACA,iGACA,iGAEA,sBAEA,gEACA,uCACA,oDAEA,+BAED,KAECzhB,KAAM,OAER4Z,EAAG8H,aAAclB,GAEhB,aAAejH,EAASkI,eAAiB,UAEzC,qCAEA,sBACA,yBACA,yBAEA,uBACA,yBACA,4BACA,yBACA,wBACA,2BAEA,oBAEA,gBAEC,wCAEA,wCAEA,mEAEA,uBAEC,iDACA,yBAEA,wBAEC,oDAED,WAEC,+BACA,wEACA,kDAED,IAEA,mFAED,IAED,KAECzhB,KAAM,OAER4Z,EAAG+H,cAAepB,GAClB3G,EAAG+H,cAAenB,GAElB5G,EAAGgI,aAAc7D,EAASwC,GAC1B3G,EAAGgI,aAAc7D,EAASyC,GAE1B5G,EAAGiI,YAAa9D,GAETA,EAIR,SAAS8H,EAAmB/jC,EAAGsK,GAE9B,OAAKtK,EAAEgkC,cAAgB15B,EAAE05B,YAEjBhkC,EAAEgkC,YAAc15B,EAAE05B,YAEdhkC,EAAEo1B,IAAM9qB,EAAE8qB,EAEd9qB,EAAE8qB,EAAIp1B,EAAEo1B,EAIR9qB,EAAE6H,GAAKnS,EAAEmS,GA/WlB,IAGI4qB,EAAcE,EACdhB,EAAS2C,EAAYI,EAErBpJ,EANAkC,EAAKL,EAASuI,QACdtC,EAAQjG,EAASiG,MASjBuG,EAAiB,IAAIzN,EACrB0N,EAAiB,IAAI/N,EACrBgO,EAAc,IAAI3N,EAoEtB1zB,KAAKm9B,OAAS,SAAWC,EAAOC,GAE/B,GAAwB,IAAnB4C,EAAQtiC,OAAb,MAIiBoR,IAAZoqB,GAEJvtB,IAIDopB,EAAG4I,WAAYzE,GAEfyB,EAAMiD,iBACNjD,EAAMkD,gBAAiBhC,EAAWnlB,UAClCikB,EAAMkD,gBAAiBhC,EAAWG,IAClCrB,EAAMmD,0BAENnD,EAAM9uB,QAASkpB,EAAGkJ,WAClBtD,EAAMpwB,OAAQwqB,EAAG+J,OAEjB/J,EAAGoF,WAAYpF,EAAGqF,aAAcJ,GAChCjF,EAAGgJ,oBAAqBlC,EAAWnlB,SAAU,EAAGqe,EAAGiJ,OAAO,EAAO,GAAO,GACxEjJ,EAAGgJ,oBAAqBlC,EAAWG,GAAI,EAAGjH,EAAGiJ,OAAO,EAAO,GAAO,GAElEjJ,EAAGoF,WAAYpF,EAAGwF,qBAAsBL,GAExCnF,EAAGqB,iBAAkB6F,EAASuC,kBAAkB,EAAOpB,EAAOoB,iBAAiB7K,UAE/EgH,EAAM+D,cAAe3J,EAAG4J,UACxB5J,EAAGI,UAAW8G,EAAS7f,IAAK,GAE5B,IAAIilB,EAAa,EACbC,EAAe,EACfC,EAAMpE,EAAMoE,IAEXA,GAEJxM,EAAGS,UAAWyG,EAASuE,SAAUe,EAAIh5B,MAAM1L,EAAG0kC,EAAIh5B,MAAMktB,EAAG8L,EAAIh5B,MAAMhB,GAEhEg6B,EAAIC,OAERzM,EAAGC,UAAWiH,EAASqE,QAASiB,EAAIE,MACpC1M,EAAGC,UAAWiH,EAASsE,OAAQgB,EAAIG,KAEnC3M,EAAGI,UAAW8G,EAASmE,QAAS,GAChCiB,EAAa,EACbC,EAAe,GAEJC,EAAII,YAEf5M,EAAGC,UAAWiH,EAASoE,WAAYkB,EAAIK,SAEvC7M,EAAGI,UAAW8G,EAASmE,QAAS,GAChCiB,EAAa,EACbC,EAAe,KAMhBvM,EAAGI,UAAW8G,EAASmE,QAAS,GAChCiB,EAAa,EACbC,EAAe,GAOhB,IAAM,IAAInkC,EAAI,EAAGI,EAAIyiC,EAAQtiC,OAAQP,EAAII,EAAGJ,KAEvCqiC,EAASQ,EAAS7iC,IAEfgjC,gBAAgB0B,iBAAkBzE,EAAOmB,mBAAoBiB,EAAOnB,aAC3EmB,EAAOnN,GAAMmN,EAAOW,gBAAgBxM,SAAU,IAI/CqM,EAAQ8B,KAAMd,GAMd,IAAM,IAFF3E,KAEMl/B,EAAI,EAAGI,EAAIyiC,EAAQtiC,OAAQP,EAAII,EAAGJ,IAAO,CAElD,IAAIqiC,EAASQ,EAAS7iC,GAClB4kC,EAAWvC,EAAOuC,SAEtB,IAA0B,IAArBA,EAASC,QAAd,CAEAxC,EAAOyC,eAAgBvN,EAAUyI,EAAOC,OAAQtuB,EAAWizB,OAAUjzB,GAErEimB,EAAGC,UAAWiH,EAASwE,UAAWsB,EAAStB,WAC3C1L,EAAGqB,iBAAkB6F,EAASkE,iBAAiB,EAAOX,EAAOW,gBAAgBxM,UAE7E6L,EAAOnB,YAAY6D,UAAWhB,EAAgBC,EAAgBC,GAE9D/E,EAAO,GAAM+E,EAAY7Q,EACzB8L,EAAO,GAAM+E,EAAYje,EAEzB,IAAIid,EAAU,EAETjD,EAAMoE,KAAOQ,EAASR,MAE1BnB,EAAUkB,GAIND,IAAejB,IAEnBrL,EAAGI,UAAW8G,EAASmE,QAASA,GAChCiB,EAAajB,GAIQ,OAAjB2B,EAAS3lB,KAEb2Y,EAAGO,UAAW2G,EAASgE,SAAU8B,EAAS3lB,IAAIwV,OAAOrB,EAAGwR,EAAS3lB,IAAIwV,OAAOzO,GAC5E4R,EAAGO,UAAW2G,EAASiE,QAAS6B,EAAS3lB,IAAIyV,OAAOtB,EAAGwR,EAAS3lB,IAAIyV,OAAO1O,KAI3E4R,EAAGO,UAAW2G,EAASgE,SAAU,EAAG,GACpClL,EAAGO,UAAW2G,EAASiE,QAAS,EAAG,IAIpCnL,EAAGC,UAAWiH,EAASG,QAAS2F,EAAS3F,SACzCrH,EAAGS,UAAWyG,EAAS1zB,MAAOw5B,EAASx5B,MAAM1L,EAAGklC,EAASx5B,MAAMktB,EAAGsM,EAASx5B,MAAMhB,GAEjFwtB,EAAGC,UAAWiH,EAASK,SAAUyF,EAASzF,UAC1CvH,EAAGM,WAAY4G,EAASI,MAAOA,GAE/B1B,EAAM8E,YAAasC,EAASrC,SAAUqC,EAASpC,cAAeoC,EAASnC,SAAUmC,EAASlC,SAAUkC,EAASI,mBAAoBJ,EAASK,cAAeL,EAASM,cAAeN,EAASO,oBAC1L3H,EAAMtb,QAAQ6e,MAAMqE,QAASR,EAASS,WACtC7H,EAAMtb,QAAQ6e,MAAMC,QAAS4D,EAASU,YAEjCV,EAAS3lB,IAEbsY,EAAS8B,aAAcuL,EAAS3lB,IAAK,GAIrCsY,EAAS8B,aAAc3D,EAAS,GAIjCkC,EAAGiK,aAAcjK,EAAGkK,UAAW,EAAGlK,EAAGmK,eAAgB,GAErDM,EAAOkD,cAAehO,EAAUyI,EAAOC,OAAQtuB,EAAWizB,OAAUjzB,IAMrE6rB,EAAMpwB,OAAQwqB,EAAGkJ,WAEjBvJ,EAASoL,iBA8IX,SAAS6C,IAER1kC,OAAOgB,eAAgBc,KAAM,MAAQb,MAAO0jC,OAE5C7iC,KAAKkxB,KAAOC,GAAMC,eAElBpxB,KAAKmM,KAAO,GACZnM,KAAKkF,KAAO,WAEZlF,KAAKwhC,KAAM,EACXxhC,KAAK8iC,QAAS,EAEd9iC,KAAK2/B,SAAWoD,GAChB/iC,KAAKgjC,KAAOC,GACZjjC,KAAKkjC,QAAUC,GACfnjC,KAAKojC,aAAeC,GAEpBrjC,KAAKq8B,QAAU,EACfr8B,KAAKsjC,aAAc,EAEnBtjC,KAAK6/B,SAAW0D,GAChBvjC,KAAK8/B,SAAW0D,GAChBxjC,KAAK4/B,cAAgB6D,GACrBzjC,KAAKqiC,cAAgB,KACrBriC,KAAKsiC,cAAgB,KACrBtiC,KAAKoiC,mBAAqB,KAE1BpiC,KAAK0jC,UAAYC,GACjB3jC,KAAKyiC,WAAY,EACjBziC,KAAK0iC,YAAa,EAElB1iC,KAAK4jC,eAAiB,KACtB5jC,KAAK6jC,kBAAmB,EACxB7jC,KAAK8jC,aAAc,EAEnB9jC,KAAK+jC,YAAa,EAElB/jC,KAAKgkC,UAAY,KAEjBhkC,KAAKikC,eAAgB,EACrBjkC,KAAKkkC,oBAAsB,EAC3BlkC,KAAKmkC,mBAAqB,EAE1BnkC,KAAKokC,WAAY,EAEjBpkC,KAAK0gC,UAAY,EACjB1gC,KAAKuiC,oBAAqB,EAE1BviC,KAAKqkC,SAAW,EAEhBrkC,KAAKiiC,SAAU,EAEfjiC,KAAKghC,aAAc,EAuSpB,SAASsD,EAAgBC,GAExB3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,iBAEZlF,KAAKwkC,WACLxkC,KAAKk8B,YAELl8B,KAAK27B,aAAe,gGACpB37B,KAAK47B,eAAiB,iEAEtB57B,KAAKykC,UAAY,EAEjBzkC,KAAK0kC,WAAY,EACjB1kC,KAAK2kC,mBAAqB,EAE1B3kC,KAAKwhC,KAAM,EACXxhC,KAAK8iC,QAAS,EACd9iC,KAAK4kC,UAAW,EAEhB5kC,KAAK6kC,UAAW,EAChB7kC,KAAK8kC,cAAe,EACpB9kC,KAAK+kC,cAAe,EAEpB/kC,KAAKglC,YACJC,aAAa,EACbC,WAAW,EACXC,aAAa,EACbC,kBAAkB,GAKnBplC,KAAKqlC,wBACJ78B,OAAW,EAAG,EAAG,GACjByzB,IAAQ,EAAG,GACXqJ,KAAS,EAAG,IAGbtlC,KAAKulC,yBAAsBx2B,OAEPA,IAAfw1B,SAE2Bx1B,IAA1Bw1B,EAAWzI,YAEfr9B,QAAQqT,MAAO,2FAIhB9R,KAAKwlC,UAAWjB,IA0ElB,SAASkB,EAAmBlB,GAE3B3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,oBAEZlF,KAAK0lC,aAAeC,GAEpB3lC,KAAK6kC,UAAW,EAChB7kC,KAAK8kC,cAAe,EAEpB9kC,KAAKqc,IAAM,KAEXrc,KAAK4lC,SAAW,KAEhB5lC,KAAK6lC,gBAAkB,KACvB7lC,KAAK8lC,kBAAoB,EACzB9lC,KAAK+lC,iBAAmB,EAExB/lC,KAAK0kC,WAAY,EACjB1kC,KAAK2kC,mBAAqB,EAE1B3kC,KAAKwhC,KAAM,EACXxhC,KAAK8iC,QAAS,EAEd9iC,KAAKwlC,UAAWjB,GAsCjB,SAASyB,EAAM5jC,EAAKC,GAEnBrC,KAAKoC,SAAgB2M,IAAR3M,EAAsBA,EAAM,IAAIsxB,EAAWvL,EAAAA,EAAYA,EAAAA,EAAYA,EAAAA,GAChFnoB,KAAKqC,SAAgB0M,IAAR1M,EAAsBA,EAAM,IAAIqxB,GAAWvL,EAAAA,GAAYA,EAAAA,GAAYA,EAAAA,GA6djF,SAAS8d,GAAQC,EAAQC,GAExBnmC,KAAKkmC,YAAsBn3B,IAAXm3B,EAAyBA,EAAS,IAAIxS,EACtD1zB,KAAKmmC,YAAsBp3B,IAAXo3B,EAAyBA,EAAS,EA4KnD,SAASC,KAERpmC,KAAK4zB,UAEJ,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAIF1tB,UAAUvI,OAAS,GAEvBc,QAAQqT,MAAO,iFAwTjB,SAASu0B,GAAOC,EAAQC,GAEvBvmC,KAAKsmC,YAAsBv3B,IAAXu3B,EAAyBA,EAAS,IAAI5S,EAAS,EAAG,EAAG,GACrE1zB,KAAKumC,cAA0Bx3B,IAAbw3B,EAA2BA,EAAW,EAsOzD,SAASC,GAASC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAErC9mC,KAAK+mC,aAEKh4B,IAAP03B,EAAqBA,EAAK,IAAIJ,QACvBt3B,IAAP23B,EAAqBA,EAAK,IAAIL,QACvBt3B,IAAP43B,EAAqBA,EAAK,IAAIN,QACvBt3B,IAAP63B,EAAqBA,EAAK,IAAIP,QACvBt3B,IAAP83B,EAAqBA,EAAK,IAAIR,QACvBt3B,IAAP+3B,EAAqBA,EAAK,IAAIT,IAyLlC,SAASW,GAAgBC,EAAWC,EAASC,EAAUC,GAkQtD,SAASC,EAAkBC,EAAQtF,EAAUuF,EAAcC,GAE1D,IAAIC,EAAWH,EAAOG,SAElBvmC,EAAS,KAETwmC,EAAmBC,EACnBC,EAAiBN,EAAOO,oBAS5B,GAPKN,IAEJG,EAAmBI,EACnBF,EAAiBN,EAAOS,wBAIlBH,EAmCN1mC,EAAS0mC,MAnCc,CAEvB,IAAII,GAAc,EAEbhG,EAAS8C,eAER2C,GAAYA,EAASQ,iBAEzBD,EAAcP,EAASS,iBAAmBT,EAASS,gBAAgBvxB,UAAY8wB,EAASS,gBAAgBvxB,SAAShZ,OAAS,EAE/G8pC,GAAYA,EAASU,aAEhCH,EAAcP,EAAS3C,cAAgB2C,EAAS3C,aAAannC,OAAS,IAMnE2pC,EAAOc,gBAAuC,IAAtBpG,EAAS6C,UAErCpmC,QAAQ4pC,KAAM,+EAAgFf,GAI/F,IAAIgB,EAAchB,EAAOc,eAAiBpG,EAAS6C,SAE/C0D,EAAe,EAEdP,IAAcO,GAAgBC,GAC9BF,IAAcC,GAAgBE,GAEnCvnC,EAASwmC,EAAkBa,GAQ5B,GAAKtB,EAAUyB,uBACY,IAAzB1G,EAAS8B,aAC0B,IAAnC9B,EAAS4B,eAAejmC,OAAe,CAKxC,IAAIgrC,EAAOznC,EAAOgwB,KAAM0X,EAAO5G,EAAS9Q,KAEpC2X,EAAsBC,EAAgBH,QAEb55B,IAAxB85B,IAEJA,KACAC,EAAgBH,GAASE,GAI1B,IAAIE,EAAiBF,EAAqBD,QAElB75B,IAAnBg6B,IAEJA,EAAiB7nC,EAAO0O,QACxBi5B,EAAqBD,GAASG,GAI/B7nC,EAAS6nC,EAIV7nC,EAAO+gC,QAAUD,EAASC,QAC1B/gC,EAAOwjC,UAAY1C,EAAS0C,UAE5B,IAAI1B,EAAOhB,EAASgB,KA6BpB,OA3BKgG,EAAMC,mBAAqBjG,GAAQkG,KAEvClG,EAAOC,IAIH+F,EAAMG,qBAELnG,IAASC,GAAYD,EAAOoG,GACvBpG,IAASoG,KAAWpG,EAAOC,KAItC/hC,EAAO8hC,KAAOA,EAEd9hC,EAAO4iC,YAAc9B,EAAS8B,YAC9B5iC,EAAO0iC,eAAiB5B,EAAS4B,eAEjC1iC,EAAOyjC,mBAAqB3C,EAAS2C,mBACrCzjC,EAAOujC,UAAYzC,EAASyC,UAEvB8C,QAA6Cx4B,IAA7B7N,EAAOg7B,SAASmN,UAEpCnoC,EAAOg7B,SAASmN,SAASlqC,MAAMsF,KAAM+iC,GAI/BtmC,EAIR,SAASooC,EAAchC,EAAQjK,EAAQkM,EAAchC,GAEpD,IAAwB,IAAnBD,EAAOrF,QAAZ,CAIA,GAFcqF,EAAOkC,OAAOp9B,KAAMixB,EAAOmM,UAEvBlC,EAAOmC,QAAUnC,EAAOoC,QAAUpC,EAAOqC,WAErDrC,EAAOsC,cAAkBtC,EAAOuC,eAAiBC,EAASC,iBAAkBzC,IAAa,CAE7FA,EAAOlH,gBAAgB0B,iBAAkByH,EAAa/K,mBAAoB8I,EAAOhJ,aAEjF,IAAImJ,EAAWN,EAAS6C,OAAQ1C,GAC5BtF,EAAWsF,EAAOtF,SAEtB,GAAK32B,MAAMgX,QAAS2f,GAInB,IAAM,IAFFiI,EAASxC,EAASwC,OAEZC,EAAI,EAAGC,EAAKF,EAAOtsC,OAAQusC,EAAIC,EAAID,IAAO,CAEnD,IAAIE,EAAQH,EAAQC,GAChBG,EAAgBrI,EAAUoI,EAAME,eAEpC,GAAKD,GAAiBA,EAAcpI,QAAU,CAEzCsI,EAAgBlD,EAAkBC,EAAQ+C,EAAe9C,EAAciD,GAC3EvD,EAAUwD,mBAAoBlB,EAAc,KAAM9B,EAAU8C,EAAejD,EAAQ8C,SAM/E,GAAKpI,EAASC,QAAU,CAE9B,IAAIsI,EAAgBlD,EAAkBC,EAAQtF,EAAUuF,EAAciD,GACtEvD,EAAUwD,mBAAoBlB,EAAc,KAAM9B,EAAU8C,EAAejD,EAAQ,OAUtF,IAAM,IAFFoD,EAAWpD,EAAOoD,SAEZttC,EAAI,EAAGI,EAAIktC,EAAS/sC,OAAQP,EAAII,EAAGJ,IAE5CksC,EAAcoB,EAAUttC,GAAKigC,EAAQkM,EAAchC,IA1arD,IAAIoD,EAAM1D,EAAU/J,QACnB0N,EAAS3D,EAAUrM,MACnBkP,EAAW,IAAItD,GACfqE,EAAoB,IAAIlX,EAExBmX,EAAgB5D,EAAQ6D,QAExBC,EAAiB,IAAIza,EACrB0a,EAAoB,IAAI1a,EAAS6W,EAAa8D,eAAgB9D,EAAa8D,gBAE3EC,EAAc,IAAIzX,EAClB8W,EAAsB,IAAI9W,EAE1B8U,EAAgB,EAChBC,EAAgB,EAEhB2C,EAAgE,GAAlC5C,EAAgBC,GAE9Cd,EAAkB,IAAIt8B,MAAO+/B,GAC7BtD,EAAqB,IAAIz8B,MAAO+/B,GAEhCtC,KAEGuC,GACH,IAAI3X,EAAS,EAAG,EAAG,GAAK,IAAIA,GAAW,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,EAAG,GACrE,IAAIA,EAAS,EAAG,GAAK,GAAK,IAAIA,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,GAAK,EAAG,IAGpE4X,GACH,IAAI5X,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,EAAG,GACnE,IAAIA,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,GAAK,IAGlE6X,GACH,IAAIlZ,EAAW,IAAIA,EAAW,IAAIA,EAClC,IAAIA,EAAW,IAAIA,EAAW,IAAIA,GAK/BmZ,EAAwB,IAAI/F,EAChC+F,EAAsB9F,aAAe+F,GACrCD,EAAsB5G,UAAW,EAKjC,IAAM,IAHF8G,EAAiBC,GAA0B,aAC3CC,EAAmBC,GAAcj8B,MAAO87B,EAAexP,UAEjD9+B,EAAI,EAAGA,IAAMguC,IAA8BhuC,EAAI,CAExD,IAAI4qC,EAAwC,IAAxB5qC,EAAIorC,GACpBF,EAAwC,IAAxBlrC,EAAIqrC,GAEpB8B,EAAgBiB,EAAsB57B,QAC1C26B,EAAczF,aAAekD,EAC7BuC,EAAc1F,SAAWyD,EAEzBX,EAAiBvqC,GAAMmtC,EAEvB,IAAIuB,EAAmB,IAAIxH,GAC1BE,SACCuH,cAAiB,IAElB7P,SAAU0P,EACVjQ,aAAc+P,EAAe/P,aAC7BC,eAAgB8P,EAAe9P,eAC/BkJ,aAAckD,EACdnD,SAAUyD,EACV1D,UAAU,IAGXkD,EAAoB1qC,GAAM0uC,EAM3B,IAAI9C,EAAQhpC,KAEZA,KAAKgL,SAAU,EAEfhL,KAAKgsC,YAAa,EAClBhsC,KAAKghC,aAAc,EAEnBhhC,KAAKkF,KAAO+mC,GAEZjsC,KAAKmpC,oBAAqB,EAC1BnpC,KAAKipC,mBAAoB,EAEzBjpC,KAAKm9B,OAAS,SAAWC,EAAOC,GAE/B,IAAuB,IAAlB2L,EAAMh+B,WACe,IAArBg+B,EAAMgD,aAA8C,IAAtBhD,EAAMhI,cAEX,IAAzB8J,EAAcntC,OAAnB,CAGAitC,EAAO9+B,QAAS6+B,EAAI5L,OACpB6L,EAAOtrB,QAAQ9W,MAAM0jC,SAAU,EAAG,EAAG,EAAG,GACxCtB,EAAOtrB,QAAQ6e,MAAMqE,SAAS,GAC9BoI,EAAOuB,gBAAgB,GAMvB,IAAM,IAFFC,EAEMhvC,EAAI,EAAGivC,EAAKvB,EAAcntC,OAAQP,EAAIivC,EAAIjvC,IAAO,CAE1D,IAAIkvC,EAAQxB,EAAe1tC,GACvBmvC,EAASD,EAAMC,OACfhF,EAAe+E,GAASA,EAAM/E,aAElC,QAAgBx4B,IAAXw9B,EAAL,CAOA,IAAIhD,EAAegD,EAAOlP,OAK1B,GAHA2N,EAAevmC,KAAM8nC,EAAOC,SAC5BxB,EAAe5oC,IAAK6oC,GAEf1D,EAAe,CAEnB,IAAIkF,EAAUzB,EAAexa,EACzBkc,EAAW1B,EAAe5nB,EAgB9BmoB,EAAiB,GAAI7mC,IAAe,EAAV+nC,EAAaC,EAAUD,EAASC,GAE1DnB,EAAiB,GAAI7mC,IAAK,EAAGgoC,EAAUD,EAASC,GAEhDnB,EAAiB,GAAI7mC,IAAe,EAAV+nC,EAAaC,EAAUD,EAASC,GAE1DnB,EAAiB,GAAI7mC,IAAK+nC,EAASC,EAAUD,EAASC,GAEtDnB,EAAiB,GAAI7mC,IAAe,EAAV+nC,EAAa,EAAGA,EAASC,GAEnDnB,EAAiB,GAAI7mC,IAAK+nC,EAAS,EAAGA,EAASC,GAE/C1B,EAAexa,GAAK,EACpBwa,EAAe5nB,GAAK,EAIrB,GAAoB,OAAfmpB,EAAOlwB,IAAe,CAE1B,IAAIswB,GAAS5b,UAAW+C,GAAehD,UAAWgD,GAAetoB,OAAQmmB,IAEzE4a,EAAOlwB,IAAM,IAAImW,EAAmBwY,EAAexa,EAAGwa,EAAe5nB,EAAGupB,GACxEJ,EAAOlwB,IAAIyW,QAAQ3mB,KAAOmgC,EAAMngC,KAAO,aAEvCo9B,EAAaqD,yBAITL,EAAOM,mBAEXN,EAAOvC,OAAQsC,GAIhB,IAAIQ,EAAYP,EAAOlwB,IACnB0wB,EAAeR,EAAOS,OAE1BxC,EAAoByC,sBAAuBX,EAAMhO,aACjDiL,EAAa5yB,SAASlS,KAAM+lC,GAEvBjD,GAEJ6E,EAAY,EAKZW,EAAaG,iBAAmB1C,EAAoBha,GAAKga,EAAoBpnB,GAAKonB,EAAoBlY,KAItG8Z,EAAY,EAEZjB,EAAY8B,sBAAuBX,EAAMhtC,OAAOg/B,aAChDiL,EAAa4D,OAAQhC,GACrB5B,EAAa6D,oBAIbL,EAAaroC,IACZ,GAAK,EAAK,EAAK,GACf,EAAK,GAAK,EAAK,GACf,EAAK,EAAK,GAAK,GACf,EAAK,EAAK,EAAK,GAGhBqoC,EAAaM,SAAU9D,EAAa9K,kBACpCsO,EAAaM,SAAU9D,EAAa/K,qBAIrCyI,EAAUqG,gBAAiBR,GAC3B7F,EAAUsG,QAKV,IAAM,IAAIC,EAAO,EAAGA,EAAOpB,EAAWoB,IAAU,CAE/C,GAAKjG,EAAe,CAEnB4D,EAAY1mC,KAAM8kC,EAAa5yB,UAC/Bw0B,EAAY1gB,IAAK4gB,EAAgBmC,IACjCjE,EAAakE,GAAGhpC,KAAM6mC,EAASkC,IAC/BjE,EAAa4D,OAAQhC,GACrB5B,EAAa6D,oBAEb,IAAIM,EAAenC,EAAiBiC,GACpC5C,EAAO/X,SAAU6a,GAMlB7C,EAAkB/I,iBAAkByH,EAAa9K,iBAAkB8K,EAAa/K,oBAChFsL,EAAS6D,cAAe9C,GAIxBvB,EAAclM,EAAOC,EAAQkM,EAAchC,SAhI3C9oC,QAAQ4pC,KAAM,wBAAyBiE,EAAO,kBAuIhD,IAAIsB,EAAa3G,EAAU4G,gBACvBC,EAAa7G,EAAU8G,gBAC3B9G,EAAU+G,cAAeJ,EAAYE,GAErC9E,EAAMhI,aAAc,IA0LtB,SAASiN,GAAiBjZ,GAIzB,SAASkF,EAAcgU,EAAWC,GAEjC,IAAI1tB,EAAQytB,EAAUztB,MAClB2tB,EAAQF,EAAUG,QAAUrZ,EAAGsZ,aAAetZ,EAAGuF,YAEjDx4B,EAASizB,EAAGkF,eAEhBlF,EAAGoF,WAAY+T,EAAYpsC,GAC3BizB,EAAGsF,WAAY6T,EAAY1tB,EAAO2tB,GAElCF,EAAUK,mBAEV,IAAIrpC,EAAO8vB,EAAGiJ,MAoCd,OAlCKxd,aAAiBgU,aAErBvvB,EAAO8vB,EAAGiJ,MAECxd,aAAiB+tB,aAE5B/vC,QAAQ4pC,KAAM,wEAEH5nB,aAAiBuZ,YAE5B90B,EAAO8vB,EAAGmK,eAEC1e,aAAiBguB,WAE5BvpC,EAAO8vB,EAAG0Z,MAECjuB,aAAiBkuB,YAE5BzpC,EAAO8vB,EAAG4Z,aAECnuB,aAAiBoU,WAE5B3vB,EAAO8vB,EAAG6Z,IAECpuB,aAAiBquB,UAE5B5pC,EAAO8vB,EAAG+Z,KAECtuB,aAAiB5e,aAE5BqD,EAAO8vB,EAAGiG,gBAKVl5B,OAAQA,EACRmD,KAAMA,EACN8pC,gBAAiBvuB,EAAMwuB,kBACvBptB,QAASqsB,EAAUrsB,SAKrB,SAASqtB,EAAcntC,EAAQmsC,EAAWC,GAEzC,IAAI1tB,EAAQytB,EAAUztB,MAClB0uB,EAAcjB,EAAUiB,YAE5Bna,EAAGoF,WAAY+T,EAAYpsC,IAEA,IAAtBmsC,EAAUG,QAEdrZ,EAAGsF,WAAY6T,EAAY1tB,EAAOuU,EAAGuF,cAEF,IAAxB4U,EAAYtuC,MAIvBm0B,EAAGoa,cAAejB,EAAY,EAAG1tB,GAEA,IAAtB0uB,EAAYtuC,MAEvBpC,QAAQqT,MAAO,4KAIfkjB,EAAGoa,cAAejB,EAAYgB,EAAYtd,OAASpR,EAAMwuB,kBACxDxuB,EAAM4uB,SAAUF,EAAYtd,OAAQsd,EAAYtd,OAASsd,EAAYtuC,QAEtEsuC,EAAYtuC,OAAS,GArFvB,IAAIye,KAyIJ,OAEC7e,IA9CD,SAAcytC,GAIb,OAFKA,EAAUoB,+BAA+BpB,EAAYA,EAAU1tC,MAE7D8e,EAAS4uB,EAAUhd,OA2C1Bqe,OAvCD,SAAiBrB,GAEXA,EAAUoB,+BAA+BpB,EAAYA,EAAU1tC,MAEpE,IAAIA,EAAO8e,EAAS4uB,EAAUhd,MAEzB1wB,IAEJw0B,EAAGwa,aAAchvC,EAAKuB,eAEfud,EAAS4uB,EAAUhd,QA8B3B8Y,OAxBD,SAAiBkE,EAAWC,GAEtBD,EAAUoB,+BAA+BpB,EAAYA,EAAU1tC,MAEpE,IAAIA,EAAO8e,EAAS4uB,EAAUhd,WAEhBniB,IAATvO,EAEJ8e,EAAS4uB,EAAUhd,MAASgJ,EAAcgU,EAAWC,GAE1C3tC,EAAKqhB,QAAUqsB,EAAUrsB,UAEpCqtB,EAAc1uC,EAAKuB,OAAQmsC,EAAWC,GAEtC3tC,EAAKqhB,QAAUqsB,EAAUrsB,WAsB5B,SAAS4tB,GAAOjf,EAAGpN,EAAGkP,EAAGod,GAExB1vC,KAAKszB,GAAK9C,GAAK,EACfxwB,KAAKuzB,GAAKnQ,GAAK,EACfpjB,KAAKwzB,GAAKlB,GAAK,EACftyB,KAAK2vC,OAASD,GAASD,GAAMG,aAkV9B,SAASC,KAER7vC,KAAK8vC,KAAO,EAgDb,SAASC,KAER7xC,OAAOgB,eAAgBc,KAAM,MAAQb,MAAO6wC,OAE5ChwC,KAAKkxB,KAAOC,GAAMC,eAElBpxB,KAAKmM,KAAO,GACZnM,KAAKkF,KAAO,WAEZlF,KAAKiwC,OAAS,KACdjwC,KAAK0qC,YAEL1qC,KAAKytC,GAAKsC,GAASG,UAAUtgC,QAE7B,IAAI+G,EAAW,IAAI+c,EACf6I,EAAW,IAAIkT,GACfU,EAAa,IAAI9c,EACjBiJ,EAAQ,IAAI5I,EAAS,EAAG,EAAG,GAc/B6I,EAAS6T,SAZT,WAECD,EAAWE,aAAc9T,GAAU,KAWpC4T,EAAWC,SAPX,WAEC7T,EAAS+T,kBAAmBH,OAAYphC,GAAW,KAOpD7Q,OAAOmB,iBAAkBW,MACxB2W,UACClX,YAAY,EACZN,MAAOwX,GAER4lB,UACC98B,YAAY,EACZN,MAAOo9B,GAER4T,YACC1wC,YAAY,EACZN,MAAOgxC,GAER7T,OACC78B,YAAY,EACZN,MAAOm9B,GAER8D,iBACCjhC,MAAO,IAAIw0B,GAEZ4c,cACCpxC,MAAO,IAAIinC,MAIbpmC,KAAKgtC,OAAS,IAAIrZ,EAClB3zB,KAAKs+B,YAAc,IAAI3K,EAEvB3zB,KAAKwwC,iBAAmBT,GAASU,wBACjCzwC,KAAK0wC,wBAAyB,EAE9B1wC,KAAKwpC,OAAS,IAAIqG,GAClB7vC,KAAKiiC,SAAU,EAEfjiC,KAAK4pC,YAAa,EAClB5pC,KAAK2wC,eAAgB,EAErB3wC,KAAK6pC,eAAgB,EACrB7pC,KAAKkhC,YAAc,EAEnBlhC,KAAK4wC,YAwqBN,SAASC,KAERd,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,SAEZlF,KAAKw+B,mBAAqB,IAAI7K,EAC9B3zB,KAAKy+B,iBAAmB,IAAI9K,EA0D7B,SAASmd,GAAoBj6B,EAAMk6B,EAAOn6B,EAAKo6B,EAAQtP,EAAMC,GAE5DkP,GAAOnzC,KAAMsC,MAEbA,KAAKkF,KAAO,qBAEZlF,KAAKixC,KAAO,EACZjxC,KAAKgf,KAAO,KAEZhf,KAAK6W,KAAOA,EACZ7W,KAAK+wC,MAAQA,EACb/wC,KAAK4W,IAAMA,EACX5W,KAAKgxC,OAASA,EAEdhxC,KAAK0hC,UAAkB3yB,IAAT2yB,EAAuBA,EAAO,GAC5C1hC,KAAK2hC,SAAgB5yB,IAAR4yB,EAAsBA,EAAM,IAEzC3hC,KAAK4sC,yBA2GN,SAASsE,GAAmBC,EAAKC,EAAQ1P,EAAMC,GAE9CkP,GAAOnzC,KAAMsC,MAEbA,KAAKkF,KAAO,oBAEZlF,KAAKmxC,SAAcpiC,IAARoiC,EAAoBA,EAAM,GACrCnxC,KAAKixC,KAAO,EAEZjxC,KAAK0hC,UAAgB3yB,IAAT2yB,EAAqBA,EAAO,GACxC1hC,KAAK2hC,SAAc5yB,IAAR4yB,EAAoBA,EAAM,IACrC3hC,KAAKqxC,MAAQ,GAEbrxC,KAAKoxC,YAAoBriC,IAAXqiC,EAAuBA,EAAS,EAC9CpxC,KAAKgf,KAAO,KAEZhf,KAAKsxC,UAAY,GACjBtxC,KAAKuxC,WAAa,EAElBvxC,KAAK4sC,yBAsMN,SAAS4E,GAAOt0C,EAAGsK,EAAGe,EAAG+9B,EAAQ99B,EAAO8hC,GAEvCtqC,KAAK9C,EAAIA,EACT8C,KAAKwH,EAAIA,EACTxH,KAAKuI,EAAIA,EAETvI,KAAKsmC,OAAWA,GAAUA,EAAOmL,UAAcnL,EAAS,IAAI5S,EAC5D1zB,KAAK0xC,cAAgBrmC,MAAMgX,QAASikB,GAAWA,KAE/CtmC,KAAKwI,MAAUA,GAASA,EAAMmpC,QAAYnpC,EAAQ,IAAIixB,EACtDz5B,KAAKojC,aAAe/3B,MAAMgX,QAAS7Z,GAAUA,KAE7CxI,KAAKsqC,mBAAkCv7B,IAAlBu7B,EAA8BA,EAAgB,EAmDpE,SAASsH,KAAoB,OAAO/wC,KAEpC,SAASgxC,KAER3zC,OAAOgB,eAAgBc,KAAM,MAAQb,MAAOyyC,OAE5C5xC,KAAKkxB,KAAOC,GAAMC,eAElBpxB,KAAKmM,KAAO,GACZnM,KAAKkF,KAAO,WAEZlF,KAAK85B,YACL95B,KAAKiK,UACLjK,KAAK+5B,SACL/5B,KAAK8xC,mBAEL9xC,KAAK8kC,gBACL9kC,KAAK+kC,gBAEL/kC,KAAK+xC,eACL/xC,KAAKgyC,eAELhyC,KAAKiyC,iBAELjyC,KAAKkyC,YAAc,KACnBlyC,KAAKmyC,eAAiB,KAItBnyC,KAAKoyC,oBAAqB,EAC1BpyC,KAAKqyC,oBAAqB,EAC1BryC,KAAKsyC,eAAgB,EACrBtyC,KAAKuyC,mBAAoB,EACzBvyC,KAAKwyC,kBAAmB,EACxBxyC,KAAKyyC,yBAA0B,EAC/BzyC,KAAK0yC,kBAAmB,EAu2CzB,SAASC,GAAiBlyB,EAAOmyB,EAAUC,GAE1C,GAAKxnC,MAAMgX,QAAS5B,GAEnB,MAAM,IAAIxhB,UAAW,yDAItBe,KAAKkxB,KAAOC,GAAMC,eAClBpxB,KAAKmM,KAAO,GAEZnM,KAAKygB,MAAQA,EACbzgB,KAAK4yC,SAAWA,EAChB5yC,KAAKa,WAAkBkO,IAAV0R,EAAsBA,EAAM9iB,OAASi1C,EAAW,EAC7D5yC,KAAK6yC,YAA4B,IAAfA,EAElB7yC,KAAKquC,SAAU,EACfruC,KAAKmvC,aAAgBtd,OAAQ,EAAGhxB,OAAS,GAEzCb,KAAKuuC,iBAAmB,aAExBvuC,KAAK6hB,QAAU,EAyThB,SAASixB,GAAqBryB,EAAOmyB,GAEpCD,GAAgBj1C,KAAMsC,KAAM,IAAI8uC,UAAWruB,GAASmyB,GAQrD,SAASG,GAAsBtyB,EAAOmyB,GAErCD,GAAgBj1C,KAAMsC,KAAM,IAAI6B,WAAY4e,GAASmyB,GAQtD,SAASI,GAA6BvyB,EAAOmyB,GAE5CD,GAAgBj1C,KAAMsC,KAAM,IAAIizC,kBAAmBxyB,GAASmyB,GAQ7D,SAASM,GAAsBzyB,EAAOmyB,GAErCD,GAAgBj1C,KAAMsC,KAAM,IAAIyuC,WAAYhuB,GAASmyB,GAQtD,SAASO,GAAuB1yB,EAAOmyB,GAEtCD,GAAgBj1C,KAAMsC,KAAM,IAAIg6B,YAAavZ,GAASmyB,GAQvD,SAASQ,GAAsB3yB,EAAOmyB,GAErCD,GAAgBj1C,KAAMsC,KAAM,IAAI60B,WAAYpU,GAASmyB,GAQtD,SAASS,GAAuB5yB,EAAOmyB,GAEtCD,GAAgBj1C,KAAMsC,KAAM,IAAI2uC,YAAaluB,GAASmyB,GAQvD,SAASU,GAAwB7yB,EAAOmyB,GAEvCD,GAAgBj1C,KAAMsC,KAAM,IAAIy0B,aAAchU,GAASmyB,GAQxD,SAASW,GAAwB9yB,EAAOmyB,GAEvCD,GAAgBj1C,KAAMsC,KAAM,IAAIwuC,aAAc/tB,GAASmyB,GAWxD,SAASY,KAERxzC,KAAKyzC,WACLzzC,KAAK85B,YACL95B,KAAK0zC,WACL1zC,KAAKiK,UACLjK,KAAK2zC,OACL3zC,KAAK4zC,QAEL5zC,KAAKiqC,UAELjqC,KAAK8kC,gBAEL9kC,KAAK+xC,eACL/xC,KAAKgyC,eAILhyC,KAAKkyC,YAAc,KACnBlyC,KAAKmyC,eAAiB,KAItBnyC,KAAKqyC,oBAAqB,EAC1BryC,KAAKuyC,mBAAoB,EACzBvyC,KAAKwyC,kBAAmB,EACxBxyC,KAAKsyC,eAAgB,EACrBtyC,KAAK0yC,kBAAmB,EAoOzB,SAASmB,GAAUpzB,GAElB,GAAsB,IAAjBA,EAAM9iB,OAAe,OAASwqB,EAAAA,EAInC,IAAM,IAFF9lB,EAAMoe,EAAO,GAEPrjB,EAAI,EAAGI,EAAIijB,EAAM9iB,OAAQP,EAAII,IAAMJ,EAEvCqjB,EAAOrjB,GAAMiF,IAAMA,EAAMoe,EAAOrjB,IAItC,OAAOiF,EASR,SAASyxC,KAER51C,OAAOgB,eAAgBc,KAAM,MAAQb,MAAOyyC,OAE5C5xC,KAAKkxB,KAAOC,GAAMC,eAElBpxB,KAAKmM,KAAO,GACZnM,KAAKkF,KAAO,iBAEZlF,KAAKyI,MAAQ,KACbzI,KAAK87B,cAEL97B,KAAKkoC,mBAELloC,KAAKiqC,UAELjqC,KAAKkyC,YAAc,KACnBlyC,KAAKmyC,eAAiB,KAEtBnyC,KAAK+zC,WAAczyC,MAAO,EAAGT,MAAOsnB,EAAAA,GA6iCrC,SAAS6rB,GAAavhB,EAAOC,EAAQyL,EAAO8V,EAAeC,EAAgBC,GAE1EtC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,cAEZlF,KAAKukC,YACJ9R,MAAOA,EACPC,OAAQA,EACRyL,MAAOA,EACP8V,cAAeA,EACfC,eAAgBA,EAChBC,cAAeA,GAGhBn0C,KAAKo0C,mBAAoB,IAAIC,GAAmB5hB,EAAOC,EAAQyL,EAAO8V,EAAeC,EAAgBC,IACrGn0C,KAAKs0C,gBASN,SAASD,GAAmB5hB,EAAOC,EAAQyL,EAAO8V,EAAeC,EAAgBC,GAmDhF,SAASI,EAAYt3C,EAAGmN,EAAGmoB,EAAGiiB,EAAMC,EAAMhiB,EAAOC,EAAQyL,EAAOuW,EAAOC,EAAOrK,GAE7E,IAaIsK,EAAIC,EAbJC,EAAeriB,EAAQiiB,EACvBK,EAAgBriB,EAASiiB,EAEzBK,EAAYviB,EAAQ,EACpBwiB,EAAaviB,EAAS,EACtBwiB,EAAY/W,EAAQ,EAEpBgX,EAAST,EAAQ,EACjBU,EAAST,EAAQ,EAEjBU,EAAgB,EAChBC,EAAa,EAIbC,EAAS,IAAI7hB,EAIjB,IAAMmhB,EAAK,EAAGA,EAAKO,EAAQP,IAAQ,CAElC,IAAIzxB,EAAIyxB,EAAKE,EAAgBE,EAE7B,IAAML,EAAK,EAAGA,EAAKO,EAAQP,IAAQ,CAElC,IAAIpkB,EAAIokB,EAAKE,EAAeE,EAI5BO,EAAQt4C,GAAMuzB,EAAIgkB,EAClBe,EAAQnrC,GAAMgZ,EAAIqxB,EAClBc,EAAQhjB,GAAM2iB,EAIdpb,EAASnzB,KAAM4uC,EAAO/kB,EAAG+kB,EAAOnyB,EAAGmyB,EAAOjjB,GAI1CijB,EAAQt4C,GAAM,EACds4C,EAAQnrC,GAAM,EACdmrC,EAAQhjB,GAAM4L,EAAQ,EAAI,GAAM,EAIhCuV,EAAQ/sC,KAAM4uC,EAAO/kB,EAAG+kB,EAAOnyB,EAAGmyB,EAAOjjB,GAIzCqhB,EAAIhtC,KAAMiuC,EAAKF,GACff,EAAIhtC,KAAM,EAAMkuC,EAAKF,GAIrBU,GAAiB,GAYnB,IAAMR,EAAK,EAAGA,EAAKF,EAAOE,IAEzB,IAAMD,EAAK,EAAGA,EAAKF,EAAOE,IAAQ,CAEjC,IAAI13C,EAAIs4C,EAAmBZ,EAAKO,EAASN,EACrCrtC,EAAIguC,EAAmBZ,EAAKO,GAAWN,EAAK,GAC5CtsC,EAAIitC,GAAqBZ,EAAK,GAAMO,GAAWN,EAAK,GACpDxxB,EAAImyB,GAAqBZ,EAAK,GAAMO,EAASN,EAIjDpB,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,GAIpBiyB,GAAc,EAQhBtM,EAAMyM,SAAUC,EAAYJ,EAAYhL,GAIxCoL,GAAcJ,EAIdE,GAAoBH,EArJrBvB,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,oBAEZlF,KAAKukC,YACJ9R,MAAOA,EACPC,OAAQA,EACRyL,MAAOA,EACP8V,cAAeA,EACfC,eAAgBA,EAChBC,cAAeA,GAGhB,IAAInL,EAAQhpC,KAIZi0C,EAAgBvxC,KAAKK,MAAOkxC,IAAmB,EAC/CC,EAAiBxxC,KAAKK,MAAOmxC,IAAoB,EAKjD,IAAIT,KACA3Z,KACA4Z,KACAC,KAIA6B,EAAmB,EACnBE,EAAa,EAIjBnB,EAAY,IAAK,IAAK,KAAO,GAAK,EAAGpW,EAAOzL,EAAUD,EAhBtD0hB,EAAgBzxC,KAAKK,MAAOoxC,IAAmB,EAgB8BD,EAAgB,GAC7FK,EAAY,IAAK,IAAK,IAAO,GAAK,EAAGpW,EAAOzL,GAAUD,EAAQ0hB,EAAeD,EAAgB,GAC7FK,EAAY,IAAK,IAAK,IAAO,EAAK,EAAG9hB,EAAO0L,EAAUzL,EAAQuhB,EAAeE,EAAgB,GAC7FI,EAAY,IAAK,IAAK,IAAO,GAAK,EAAG9hB,EAAO0L,GAAUzL,EAAQuhB,EAAeE,EAAgB,GAC7FI,EAAY,IAAK,IAAK,IAAO,GAAK,EAAG9hB,EAAOC,EAAUyL,EAAQ8V,EAAeC,EAAgB,GAC7FK,EAAY,IAAK,IAAK,KAAO,GAAK,EAAG9hB,EAAOC,GAAUyL,EAAQ8V,EAAeC,EAAgB,GAI7Fl0C,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IAsH3D,SAASkC,GAAepjB,EAAOC,EAAQuhB,EAAeC,GAErDrC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,gBAEZlF,KAAKukC,YACJ9R,MAAOA,EACPC,OAAQA,EACRuhB,cAAeA,EACfC,eAAgBA,GAGjBl0C,KAAKo0C,mBAAoB,IAAI0B,GAAqBrjB,EAAOC,EAAQuhB,EAAeC,IAChFl0C,KAAKs0C,gBASN,SAASwB,GAAqBrjB,EAAOC,EAAQuhB,EAAeC,GAE3DJ,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,sBAEZlF,KAAKukC,YACJ9R,MAAOA,EACPC,OAAQA,EACRuhB,cAAeA,EACfC,eAAgBA,GAGjB,IAYIU,EAAIC,EAZJkB,EAAatjB,EAAQ,EACrBujB,EAActjB,EAAS,EAEvBgiB,EAAQhyC,KAAKK,MAAOkxC,IAAmB,EACvCU,EAAQjyC,KAAKK,MAAOmxC,IAAoB,EAExCiB,EAAST,EAAQ,EACjBU,EAAST,EAAQ,EAEjBsB,EAAgBxjB,EAAQiiB,EACxBwB,EAAiBxjB,EAASiiB,EAM1BlB,KACA3Z,KACA4Z,KACAC,KAIJ,IAAMkB,EAAK,EAAGA,EAAKO,EAAQP,IAAQ,CAElC,IAAIzxB,EAAIyxB,EAAKqB,EAAiBF,EAE9B,IAAMpB,EAAK,EAAGA,EAAKO,EAAQP,IAAQ,CAElC,IAAIpkB,EAAIokB,EAAKqB,EAAgBF,EAE7Bjc,EAASnzB,KAAM6pB,GAAKpN,EAAG,GAEvBswB,EAAQ/sC,KAAM,EAAG,EAAG,GAEpBgtC,EAAIhtC,KAAMiuC,EAAKF,GACff,EAAIhtC,KAAM,EAAMkuC,EAAKF,IAQvB,IAAME,EAAK,EAAGA,EAAKF,EAAOE,IAEzB,IAAMD,EAAK,EAAGA,EAAKF,EAAOE,IAAQ,CAEjC,IAAI13C,EAAI03C,EAAKO,EAASN,EAClBrtC,EAAIotC,EAAKO,GAAWN,EAAK,GACzBtsC,EAAMqsC,EAAK,EAAMO,GAAWN,EAAK,GACjCxxB,EAAMuxB,EAAK,EAAMO,EAASN,EAI9BpB,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,GAQtBrjB,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IA2C3D,SAASwC,GAAmB5R,GAE3B3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,oBAEZlF,KAAKwI,MAAQ,IAAIixB,EAAO,UAExBz5B,KAAKqc,IAAM,KAEXrc,KAAKo2C,SAAW,KAChBp2C,KAAKq2C,kBAAoB,EAEzBr2C,KAAKs2C,MAAQ,KACbt2C,KAAKu2C,eAAiB,EAEtBv2C,KAAKw2C,YAAc,KAEnBx2C,KAAK4lC,SAAW,KAEhB5lC,KAAKy2C,OAAS,KACdz2C,KAAK02C,QAAUC,GACf32C,KAAK42C,aAAe,EACpB52C,KAAK62C,gBAAkB,IAEvB72C,KAAK0kC,WAAY,EACjB1kC,KAAK2kC,mBAAqB,EAC1B3kC,KAAK82C,iBAAmB,QACxB92C,KAAK+2C,kBAAoB,QAEzB/2C,KAAK6kC,UAAW,EAChB7kC,KAAK8kC,cAAe,EAEpB9kC,KAAK8iC,QAAS,EAEd9iC,KAAKwlC,UAAWjB,GAgDjB,SAASyS,GAAKC,EAAQC,GAErBl3C,KAAKi3C,YAAsBloC,IAAXkoC,EAAyBA,EAAS,IAAIvjB,EACtD1zB,KAAKk3C,eAA4BnoC,IAAdmoC,EAA4BA,EAAY,IAAIxjB,EA+gBhE,SAASyjB,GAAO71C,EAAOC,GAEtBvB,KAAKsB,WAAoByN,IAAVzN,EAAwBA,EAAQ,IAAIoyB,EACnD1zB,KAAKuB,SAAgBwN,IAARxN,EAAsBA,EAAM,IAAImyB,EA2H9C,SAAS0jB,GAAUl6C,EAAGsK,EAAGe,GAExBvI,KAAK9C,OAAY6R,IAAN7R,EAAoBA,EAAI,IAAIw2B,EACvC1zB,KAAKwH,OAAYuH,IAANvH,EAAoBA,EAAI,IAAIksB,EACvC1zB,KAAKuI,OAAYwG,IAANxG,EAAoBA,EAAI,IAAImrB,EA0PxC,SAAS2jB,GAAM5P,EAAUzF,GAExB+N,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,OAEZlF,KAAKynC,cAAwB14B,IAAb04B,EAAyBA,EAAW,IAAIqM,GACxD9zC,KAAKgiC,cAAwBjzB,IAAbizB,EAAyBA,EAAW,IAAImU,IAAqB3tC,MAAuB,SAAhB9F,KAAKG,WAEzF7C,KAAKs3C,SAAWC,GAEhBv3C,KAAKw3C,qBAyWN,SAASC,GAAiB9iB,EAAUiG,EAAO8c,EAASnV,GAqFnD,SAAS2J,EAAU1jC,EAAOmvC,GAEzB/c,EAAMtb,QAAQ9W,MAAM0jC,SAAU1jC,EAAM1L,EAAG0L,EAAMktB,EAAGltB,EAAMhB,EAAGmwC,EAAOpV,GArFjE,IAGIqV,EAAaC,EACbC,EAAWC,EAJXnK,EAAa,IAAInU,EAAO,GACxBqU,EAAa,EAwFjB,OAECD,cAAe,WAEd,OAAOD,GAGRI,cAAe,SAAWxlC,EAAOmvC,GAEhC/J,EAAWlpC,IAAK8D,GAEhB0jC,EAAU0B,EADVE,OAAuB/+B,IAAV4oC,EAAsBA,EAAQ,IAI5C5J,cAAe,WAEd,OAAOD,GAGRkK,cAAe,SAAWL,GAGzBzL,EAAU0B,EADVE,EAAa6J,IAIdxa,OA5GD,SAAiBC,EAAOC,EAAQ4a,GAE/B,IAAIC,EAAa9a,EAAM8a,WAEH,OAAfA,EAEJhM,EAAU0B,EAAYE,GAEXoK,GAAcA,EAAWvG,UAEpCzF,EAAUgM,EAAY,GACtBD,GAAa,IAITtjB,EAASwjB,WAAaF,IAE1BtjB,EAAS4Y,MAAO5Y,EAASyjB,eAAgBzjB,EAAS0jB,eAAgB1jB,EAAS2jB,kBAIvEJ,GAAcA,EAAWK,oBAEVxpC,IAAd+oC,IAEJA,EAAY,IAAI5G,GAEhB6G,EAAU,IAAIV,GACb,IAAIhD,GAAmB,EAAG,EAAG,GAC7B,IAAI/P,GACHpI,SAAUyP,GAAU6M,KAAKtc,SACzBP,aAAcgQ,GAAU6M,KAAK7c,aAC7BC,eAAgB+P,GAAU6M,KAAK5c,eAC/BoH,KAAMoG,GACN3G,WAAW,EACXC,YAAY,EACZlB,KAAK,MAMRsW,EAAUrZ,iBAAiBh6B,KAAM44B,EAAOoB,kBAExCqZ,EAAUxZ,YAAYma,gBAAiBpb,EAAOiB,aAC9CwZ,EAAUtZ,mBAAmBka,WAAYZ,EAAUxZ,aAEnDyZ,EAAQ/V,SAAS9F,SAAkB,MAAE/8B,MAAQ+4C,EAC7CH,EAAQ3X,gBAAgB0B,iBAAkBgW,EAAUtZ,mBAAoBuZ,EAAQzZ,aAEhFoZ,EAAQ1N,OAAQ+N,GAEhBpjB,EAAS8V,mBAAoBqN,EAAW,KAAMC,EAAQtQ,SAAUsQ,EAAQ/V,SAAU+V,EAAS,OAEhFG,GAAcA,EAAWS,iBAEf5pC,IAAhB6oC,IAEJA,EAAc,IAAI9G,IAAsB,EAAG,EAAG,GAAK,EAAG,EAAG,GAEzD+G,EAAY,IAAIR,GACf,IAAIvB,GAAqB,EAAG,GAC5B,IAAIK,IAAqB1T,WAAW,EAAOC,YAAY,EAAOlB,KAAK,MAKrEqW,EAAU7V,SAAS3lB,IAAM67B,EAEzBR,EAAQ1N,OAAQ6N,GAEhBljB,EAAS8V,mBAAoBmN,EAAa,KAAMC,EAAUpQ,SAAUoQ,EAAU7V,SAAU6V,EAAW,SA+CtG,SAAS5W,GAAmB/jC,EAAGsK,GAE9B,OAAKtK,EAAEgkC,cAAgB15B,EAAE05B,YAEjBhkC,EAAEgkC,YAAc15B,EAAE05B,YAEdhkC,EAAEi8B,SAAW3xB,EAAE2xB,SAAWj8B,EAAEi8B,UAAY3xB,EAAE2xB,QAE9Cj8B,EAAEi8B,QAAQ9pB,GAAK7H,EAAE2xB,QAAQ9pB,GAErBnS,EAAE8kC,SAAS3yB,KAAO7H,EAAEw6B,SAAS3yB,GAEjCnS,EAAE8kC,SAAS3yB,GAAK7H,EAAEw6B,SAAS3yB,GAEvBnS,EAAEo1B,IAAM9qB,EAAE8qB,EAEdp1B,EAAEo1B,EAAI9qB,EAAE8qB,EAIRp1B,EAAEmS,GAAK7H,EAAE6H,GAMlB,SAASupC,GAA0B17C,EAAGsK,GAErC,OAAKtK,EAAEgkC,cAAgB15B,EAAE05B,YAEjBhkC,EAAEgkC,YAAc15B,EAAE05B,YAEnBhkC,EAAEo1B,IAAM9qB,EAAE8qB,EAET9qB,EAAE8qB,EAAIp1B,EAAEo1B,EAIRp1B,EAAEmS,GAAK7H,EAAE6H,GAMlB,SAASwpC,KAER,IAAIC,KACAC,GAAoB,EAEpBzV,KACA0V,GAAyB,EA4E7B,OACCF,OAAQA,EACRxV,YAAaA,EAEb13B,KA9ED,WAECmtC,GAAoB,EACpBC,GAAyB,GA4EzBryC,KAxED,SAAe2gC,EAAQG,EAAUzF,EAAU1P,EAAG8X,GAE7C,IAAI3pB,EAAOhY,EAINu5B,EAASsB,aAEb7iB,EAAQ6iB,EACR76B,IAAWuwC,IAIXv4B,EAAQq4B,EACRrwC,IAAWswC,GAMZ,IAAIE,EAAax4B,EAAOhY,GAEnBwwC,GAEJA,EAAW5pC,GAAKi4B,EAAOj4B,GACvB4pC,EAAW3R,OAASA,EACpB2R,EAAWxR,SAAWA,EACtBwR,EAAWjX,SAAWA,EACtBiX,EAAW9f,QAAU6I,EAAS7I,QAC9B8f,EAAW/X,YAAcoG,EAAOpG,YAChC+X,EAAW3mB,EAAIA,EACf2mB,EAAW7O,MAAQA,IAInB6O,GACC5pC,GAAIi4B,EAAOj4B,GACXi4B,OAAQA,EACRG,SAAUA,EACVzF,SAAUA,EACV7I,QAAS6I,EAAS7I,QAClB+H,YAAaoG,EAAOpG,YACpB5O,EAAGA,EACH8X,MAAOA,GAIR3pB,EAAM9Z,KAAMsyC,KA0BbC,OApBD,WAECJ,EAAOn7C,OAASo7C,EAAkB,EAClCzV,EAAY3lC,OAASq7C,EAAuB,GAmB5CjX,KAfD,WAEC+W,EAAO/W,KAAMd,IACbqC,EAAYvB,KAAM6W,MAiBpB,SAASO,KAER,IAAIC,KA0BJ,OACC34C,IAzBD,SAAc28B,EAAOC,GAEpB,IAAIxyB,EAAOuyB,EAAM/tB,GAAK,IAAMguB,EAAOhuB,GAC/BgqC,EAAOD,EAAOvuC,GAWlB,YATckE,IAATsqC,IAIJA,EAAO,IAAIR,GACXO,EAAOvuC,GAASwuC,GAIVA,GAYPC,QARD,WAECF,OAeF,SAASG,GAA4BvkB,EAAIgQ,EAAYwU,GAEpD,IAAIC,EAQAv0C,EAAM8pC,EA0CVhvC,KAAK05C,QAhDL,SAAkBv6C,GAEjBs6C,EAAOt6C,GA+CRa,KAAK21C,SAzCL,SAAmBx2C,GAElB+F,EAAO/F,EAAM+F,KACb8pC,EAAkB7vC,EAAM6vC,iBAuCzBhvC,KAAKm9B,OAnCL,SAAiB77B,EAAOT,GAEvBm0B,EAAGiK,aAAcwa,EAAM54C,EAAOqE,EAAM5D,EAAQ0tC,GAE5CwK,EAAWG,QACXH,EAAW1f,UAAYj5B,EAElB44C,IAASzkB,EAAGkK,YAAYsa,EAAWzf,OAASl5B,EAAQ,IA6B1Db,KAAK45C,gBAzBL,SAA0BnS,EAAUnmC,EAAOT,GAE1C,IAAIg5C,EAAY7U,EAAWvkC,IAAK,0BAEb,OAAdo5C,GAOLA,EAAUC,2BAA4BL,EAAM54C,EAAOqE,EAAM5D,EAAQ0tC,EAAiBvH,EAASsS,mBAE3FP,EAAWG,QACXH,EAAW1f,UAAYj5B,EAAQ4mC,EAASsS,kBAEnCN,IAASzkB,EAAGkK,YAAYsa,EAAWzf,OAAS0N,EAASsS,kBAAoBl5C,EAAQ,IAVrFpC,QAAQqT,MAAO,0IA2BlB,SAASkoC,GAAqBhlB,EAAIgQ,EAAYwU,GAE7C,IAAIC,EAqDJz5C,KAAK05C,QAnDL,SAAkBv6C,GAEjBs6C,EAAOt6C,GAkDRa,KAAKm9B,OA9CL,SAAiB77B,EAAOT,GAEvBm0B,EAAGilB,WAAYR,EAAMn4C,EAAOT,GAE5B24C,EAAWG,QACXH,EAAW1f,UAAYj5B,EAElB44C,IAASzkB,EAAGkK,YAAYsa,EAAWzf,OAASl5B,EAAQ,IAwC1Db,KAAK45C,gBApCL,SAA0BnS,EAAUnmC,EAAOT,GAE1C,IAAIg5C,EAAY7U,EAAWvkC,IAAK,0BAEhC,GAAmB,OAAdo5C,EAAL,CAOA,IAAIljC,EAAW8wB,EAAS3L,WAAWnlB,SAE9BA,EAAS24B,8BAEbzuC,EAAQ8V,EAASnW,KAAKK,MAEtBg5C,EAAUK,yBAA0BT,EAAM,EAAG54C,EAAO4mC,EAASsS,oBAI7DF,EAAUK,yBAA0BT,EAAMn4C,EAAOT,EAAO4mC,EAASsS,mBAIlEP,EAAWG,QACXH,EAAW1f,UAAYj5B,EAAQ4mC,EAASsS,kBAEnCN,IAASzkB,EAAGkK,YAAYsa,EAAWzf,OAAS0N,EAASsS,kBAAoBl5C,EAAQ,QAtBrFpC,QAAQqT,MAAO,mIAsClB,SAASqoC,GAAiBnlB,EAAI8G,EAAYse,GAKzC,SAASC,EAAmB5zC,GAE3B,IAAIghC,EAAWhhC,EAAMnH,OACjBg7C,EAAiBC,EAAY9S,EAASp4B,IAEZ,OAAzBirC,EAAe7xC,OAEnBqzB,EAAWyT,OAAQ+K,EAAe7xC,OAInC,IAAM,IAAI0D,KAAQmuC,EAAexe,WAEhCA,EAAWyT,OAAQ+K,EAAexe,WAAY3vB,IAI/Cs7B,EAASzgC,oBAAqB,UAAWqzC,UAElCE,EAAY9S,EAASp4B,IAI5B,IAAI6+B,EAAYsM,EAAqB/S,EAASp4B,IAEzC6+B,IAEJpS,EAAWyT,OAAQrB,UACZsM,EAAqB/S,EAASp4B,MAItC6+B,EAAYsM,EAAqBF,EAAejrC,OAI/CysB,EAAWyT,OAAQrB,UACZsM,EAAqBF,EAAejrC,KAM5C+qC,EAAWG,aA9CZ,IAAIA,KACAC,KA2KJ,OAEC/5C,IA5HD,SAAc6mC,EAAQG,GAErB,IAAI6S,EAAiBC,EAAY9S,EAASp4B,IAE1C,OAAKirC,IAEL7S,EAASjhC,iBAAkB,UAAW6zC,GAEjC5S,EAASQ,iBAEbqS,EAAiB7S,EAENA,EAASU,kBAEcp5B,IAA7B04B,EAASgT,kBAEbhT,EAASgT,iBAAkB,IAAI3G,IAAiB4G,cAAepT,IAIhEgT,EAAiB7S,EAASgT,iBAI3BF,EAAY9S,EAASp4B,IAAOirC,EAE5BF,EAAWG,aAEJD,IAiGPtQ,OA7FD,SAAiBvC,GAEhB,IAAIh/B,EAAQg/B,EAASh/B,MACjBkyC,EAAqBlT,EAAS3L,WAEnB,OAAVrzB,GAEJqzB,EAAWkO,OAAQvhC,EAAOusB,EAAGwF,sBAI9B,IAAM,IAAIruB,KAAQwuC,EAEjB7e,EAAWkO,OAAQ2Q,EAAoBxuC,GAAQ6oB,EAAGqF,cAMnD,IAAI6N,EAAkBT,EAASS,gBAE/B,IAAM,IAAI/7B,KAAQ+7B,EAIjB,IAAM,IAFFznB,EAAQynB,EAAiB/7B,GAEnB/O,EAAI,EAAGI,EAAIijB,EAAM9iB,OAAQP,EAAII,EAAGJ,IAEzC0+B,EAAWkO,OAAQvpB,EAAOrjB,GAAK43B,EAAGqF,eAoEpCugB,sBA5DD,SAAgCnT,GAE/B,IAAIyG,EAAYsM,EAAqB/S,EAASp4B,IAE9C,GAAK6+B,EAAY,OAAOA,EAExB,IAAIuF,KAEAoH,EAAgBpT,EAASh/B,MACzBkyC,EAAqBlT,EAAS3L,WAIlC,GAAuB,OAAlB+e,EAIJ,IAAM,IAAIz9C,EAAI,EAAGI,GAFbijB,EAAQo6B,EAAcp6B,OAEC9iB,OAAQP,EAAII,EAAGJ,GAAK,EAAI,CAElD,IAAIF,EAAIujB,EAAOrjB,EAAI,GACfoK,EAAIiZ,EAAOrjB,EAAI,GACfmL,EAAIkY,EAAOrjB,EAAI,GAEnBq2C,EAAQ9sC,KAAMzJ,EAAGsK,EAAGA,EAAGe,EAAGA,EAAGrL,QAQ9B,IAAM,IAFFujB,EAAQk6B,EAAmBhkC,SAAS8J,MAE9BrjB,EAAI,EAAGI,EAAMijB,EAAM9iB,OAAS,EAAM,EAAGP,EAAII,EAAGJ,GAAK,EAAI,CAE9D,IAAIF,EAAIE,EAAI,EACRoK,EAAIpK,EAAI,EACRmL,EAAInL,EAAI,EAEZq2C,EAAQ9sC,KAAMzJ,EAAGsK,EAAGA,EAAGe,EAAGA,EAAGrL,GAc/B,OANAgxC,EAAY,IAAM2F,GAAUJ,GAAY,MAAQJ,GAAwBF,IAAyBM,EAAS,GAE1G3X,EAAWkO,OAAQkE,EAAWlZ,EAAGwF,sBAEjCggB,EAAqB/S,EAASp4B,IAAO6+B,EAE9BA,IAmBT,SAAS4M,KAER,IAAIhY,KAEJ,OAECriC,IAAK,SAAW6rC,GAEf,QAA4Bv9B,IAAvB+zB,EAAQwJ,EAAMj9B,IAElB,OAAOyzB,EAAQwJ,EAAMj9B,IAItB,IAAI6sB,EAEJ,OAASoQ,EAAMpnC,MAEd,IAAK,mBACJg3B,GACCgb,UAAW,IAAIxjB,EACflrB,MAAO,IAAIixB,EAEX8S,QAAQ,EACRwO,WAAY,EACZC,aAAc,EACdC,cAAe,IAAI1qB,GAEpB,MAED,IAAK,YACJ2L,GACCvlB,SAAU,IAAI+c,EACdwjB,UAAW,IAAIxjB,EACflrB,MAAO,IAAIixB,EACXyhB,SAAU,EACVC,QAAS,EACTC,YAAa,EACbC,MAAO,EAEP9O,QAAQ,EACRwO,WAAY,EACZC,aAAc,EACdC,cAAe,IAAI1qB,GAEpB,MAED,IAAK,aACJ2L,GACCvlB,SAAU,IAAI+c,EACdlrB,MAAO,IAAIixB,EACXyhB,SAAU,EACVG,MAAO,EAEP9O,QAAQ,EACRwO,WAAY,EACZC,aAAc,EACdC,cAAe,IAAI1qB,GAEpB,MAED,IAAK,kBACJ2L,GACCgb,UAAW,IAAIxjB,EACf4nB,SAAU,IAAI7hB,EACd8hB,YAAa,IAAI9hB,GAElB,MAED,IAAK,gBACJyC,GACC1zB,MAAO,IAAIixB,EACX9iB,SAAU,IAAI+c,EACd8nB,UAAW,IAAI9nB,EACf+nB,WAAY,IAAI/nB,GASnB,OAFAoP,EAAQwJ,EAAMj9B,IAAO6sB,EAEdA,IAYV,SAASwf,GAAc1mB,EAAIulB,EAAYf,GAEtC,IAAImC,KAmCJ,OAEC3R,OAnCD,SAAiB1C,GAEhB,IAAIsU,EAAQpC,EAAWoC,MAEnBnU,EAAWH,EAAOG,SAClB6S,EAAiBC,EAAW95C,IAAK6mC,EAAQG,GAkB7C,OAdKkU,EAAYrB,EAAejrC,MAASusC,IAEnCnU,EAASU,YAEbmS,EAAeuB,iBAAkBvU,GAIlCiT,EAAWvQ,OAAQsQ,GAEnBqB,EAAYrB,EAAejrC,IAAOusC,GAI5BtB,GAaP/M,MATD,WAECoO,OAiBF,SAASG,GAAgB17B,GAIxB,IAAM,IAFF27B,EAAQ37B,EAAOnU,MAAO,MAEhB7O,EAAI,EAAGA,EAAI2+C,EAAMp+C,OAAQP,IAElC2+C,EAAO3+C,GAAQA,EAAI,EAAM,KAAO2+C,EAAO3+C,GAIxC,OAAO2+C,EAAM3gC,KAAM,MAIpB,SAAS4gC,GAAahnB,EAAI9vB,EAAMkb,GAE/B,IAAIsb,EAAS1G,EAAGyH,aAAcv3B,GAoB9B,OAlBA8vB,EAAG8H,aAAcpB,EAAQtb,GACzB4U,EAAG+H,cAAerB,IAE0C,IAAvD1G,EAAGinB,mBAAoBvgB,EAAQ1G,EAAGknB,iBAEtCz9C,QAAQqT,MAAO,+CAIuB,KAAlCkjB,EAAGmnB,iBAAkBzgB,IAEzBj9B,QAAQ4pC,KAAM,2CAA4CnjC,IAAS8vB,EAAG2H,cAAgB,SAAW,WAAY3H,EAAGmnB,iBAAkBzgB,GAAUogB,GAAgB17B,IAOtJsb,EAUR,SAAS0gB,GAAuB1zB,GAE/B,OAASA,GAER,KAAKyJ,GACJ,OAAS,SAAS,aACnB,KAAKkqB,GACJ,OAAS,OAAO,aACjB,KAAKC,GACJ,OAAS,OAAO,aACjB,KAAKC,GACJ,OAAS,OAAO,kBACjB,KAAKC,GACJ,OAAS,OAAO,mBACjB,KAAKC,GACJ,OAAS,OAAO,oBACjB,KAAKC,GACJ,OAAS,QAAQ,oCAClB,QACC,MAAM,IAAIp/C,MAAO,yBAA2BorB,IAM/C,SAASi0B,GAA0BC,EAAcl0B,GAEhD,IAAIm0B,EAAaT,GAAuB1zB,GACxC,MAAO,QAAUk0B,EAAe,2BAA6BC,EAAY,GAAM,WAAaA,EAAY,GAAM,MAI/G,SAASC,GAA0BF,EAAcl0B,GAEhD,IAAIm0B,EAAaT,GAAuB1zB,GACxC,MAAO,QAAUk0B,EAAe,mCAAqCC,EAAY,GAAMA,EAAY,GAAM,MAI1G,SAASE,GAAwBH,EAAcI,GAE9C,IAAIC,EAEJ,OAASD,GAER,KAAKE,GACJD,EAAkB,SAClB,MAED,KAAKE,GACJF,EAAkB,WAClB,MAED,KAAKG,GACJH,EAAkB,aAClB,MAED,KAAKI,GACJJ,EAAkB,kBAClB,MAED,QACC,MAAM,IAAI3/C,MAAO,4BAA8B0/C,GAIjD,MAAO,QAAUJ,EAAe,2BAA6BK,EAAkB,0BAIhF,SAASK,GAAoBtY,EAAYT,EAAYgZ,GAWpD,QATAvY,EAAaA,OAGCC,aAAeV,EAAWiZ,cAAgBjZ,EAAWkZ,SAAWlZ,EAAWmZ,WAAanZ,EAAWoZ,YAAgB,kDAAoD,IAClL3Y,EAAWE,WAAaX,EAAWqZ,yBAA4BL,EAAmB98C,IAAK,kBAAqB,wCAA0C,GACtJukC,EAAuB,aAAKuY,EAAmB98C,IAAK,sBAAyB,2CAA6C,IAC1HukC,EAAWI,kBAAoBb,EAAWkS,SAAY8G,EAAmB98C,IAAK,0BAA6B,gDAAkD,IAGlJo9C,OAAQC,IAAkB1iC,KAAM,MAI/C,SAAS2iC,GAAiBvZ,GAEzB,IAAIwZ,KAEJ,IAAM,IAAI7xC,KAAQq4B,EAAU,CAE3B,IAAIrlC,EAAQqlC,EAASr4B,IAEN,IAAVhN,GAEL6+C,EAAOr3C,KAAM,WAAawF,EAAO,IAAMhN,GAIxC,OAAO6+C,EAAO5iC,KAAM,MAIrB,SAAS6iC,GAAyBjpB,EAAImE,EAAS+kB,GAM9C,IAAM,IAJFpiB,KAEAj/B,EAAIm4B,EAAGoE,oBAAqBD,EAASnE,EAAGmpB,mBAElC/gD,EAAI,EAAGA,EAAIP,EAAGO,IAAO,CAE9B,IACI+O,EADO6oB,EAAGopB,gBAAiBjlB,EAAS/7B,GACxB+O,KAIhB2vB,EAAY3vB,GAAS6oB,EAAGgH,kBAAmB7C,EAAShtB,GAIrD,OAAO2vB,EAIR,SAASgiB,GAAiB19B,GAEzB,MAAkB,KAAXA,EAIR,SAASi+B,GAAkBj+B,EAAQmkB,GAElC,OAAOnkB,EACLzX,QAAS,kBAAmB47B,EAAW+Z,cACvC31C,QAAS,mBAAoB47B,EAAWga,eACxC51C,QAAS,wBAAyB47B,EAAWia,mBAC7C71C,QAAS,oBAAqB47B,EAAWka,gBACzC91C,QAAS,mBAAoB47B,EAAWma,eAI3C,SAASC,GAAev+B,GAEvB,IAAIw+B,EAAU,kCAgBd,OAAOx+B,EAAOzX,QAASi2C,EAdvB,SAAkBh2C,EAAOi2C,GAExB,IAAIl2C,EAAUm2C,GAAaD,GAE3B,QAAiB9vC,IAAZpG,EAEJ,MAAM,IAAIrL,MAAO,6BAA+BuhD,EAAU,KAI3D,OAAOF,GAAeh2C,KAQxB,SAASo2C,GAAa3+B,GAErB,IAAIw+B,EAAU,sEAgBd,OAAOx+B,EAAOzX,QAASi2C,EAdvB,SAAkBh2C,EAAOtH,EAAOC,EAAKy9C,GAIpC,IAAM,IAFFC,EAAS,GAEH7hD,EAAIsM,SAAUpI,GAASlE,EAAIsM,SAAUnI,GAAOnE,IAErD6hD,GAAUD,EAAQr2C,QAAS,WAAY,KAAOvL,EAAI,MAInD,OAAO6hD,IAQT,SAASC,GAAcvqB,EAAUp3B,EAAMykC,EAAUtG,EAAQ6I,GAExD,IAAIvP,EAAKL,EAASuI,QAEd8H,EAAahD,EAASgD,WACtBR,EAAUxC,EAASwC,QAEnB7I,EAAeD,EAAOC,aACtBC,EAAiBF,EAAOE,eAExBujB,EAAsB,uBAErB5a,EAAW6a,gBAAkBnT,GAEjCkT,EAAsB,qBAEX5a,EAAW6a,gBAAkBC,KAExCF,EAAsB,2BAIvB,IAAIG,EAAmB,mBACnBC,EAAmB,yBACnBC,EAAuB,2BAE3B,GAAKjb,EAAWkS,OAAS,CAExB,OAASzU,EAASyU,OAAO9lB,SAExB,KAAKsD,GACL,KAAKwrB,GACJH,EAAmB,mBACnB,MAED,KAAKI,GACL,KAAKC,GACJL,EAAmB,sBACnB,MAED,KAAKM,GACL,KAAKC,GACJP,EAAmB,sBACnB,MAED,KAAKQ,GACJR,EAAmB,qBAKrB,OAAStd,EAASyU,OAAO9lB,SAExB,KAAK8uB,GACL,KAAKI,GACJN,EAAmB,yBAKrB,OAASvd,EAAS0U,SAEjB,KAAKC,GACJ6I,EAAuB,2BACvB,MAED,KAAKO,GACJP,EAAuB,sBACvB,MAED,KAAKQ,GACJR,EAAuB,uBAO1B,IAcIS,EAAcC,EAddC,EAAsBxrB,EAASyrB,YAAc,EAAMzrB,EAASyrB,YAAc,EAM1EC,EAAmB/C,GAAoBtY,EAAYT,EAAY5P,EAASqQ,YAExEsb,EAAgBvC,GAAiBvZ,GAIjCrL,EAAUnE,EAAG6G,gBAIZmG,EAASue,qBAEbN,GAECK,EAEA,MAECzC,OAAQC,IAAkB1iC,KAAM,MAElC8kC,GAECG,EACAC,EAEA,MAECzC,OAAQC,IAAkB1iC,KAAM,QAIlC6kC,GAEC,aAAe1b,EAAWP,UAAY,UACtC,aAAeO,EAAWP,UAAY,QAEtC,uBAAyBtI,EAAOvvB,KAEhCm0C,EAEA/b,EAAWic,uBAAyB,0BAA4B,GAEhE,wBAA0BL,EAE1B,qBAAuB5b,EAAWkc,SAChClc,EAAWmc,QAAUnc,EAAW/C,IAAQ,kBAAoB,GAC5D+C,EAAWmc,QAAUnc,EAAWoc,OAAW,mBAAqB,GAElEpc,EAAWloB,IAAM,kBAAoB,GACrCkoB,EAAWkS,OAAS,qBAAuB,GAC3ClS,EAAWkS,OAAS,WAAa8I,EAAmB,GACpDhb,EAAW6R,SAAW,uBAAyB,GAC/C7R,EAAW+R,MAAQ,oBAAsB,GACzC/R,EAAWqc,YAAc,0BAA4B,GACrDrc,EAAWkZ,QAAU,sBAAwB,GAC7ClZ,EAAWmZ,UAAY,wBAA0B,GACjDnZ,EAAWsB,iBAAmBtB,EAAWic,uBAAyB,8BAAgC,GAClGjc,EAAWiS,YAAc,0BAA4B,GACrDjS,EAAWsc,aAAe,2BAA6B,GACvDtc,EAAWuc,aAAe,2BAA6B,GACvDvc,EAAWqB,SAAW,uBAAyB,GAC/CrB,EAAWnB,aAAe,oBAAsB,GAEhDmB,EAAWoZ,YAAc,sBAAwB,GAEjDpZ,EAAWM,SAAW,uBAAyB,GAC/CN,EAAWwc,iBAAmB,uBAAyB,GAEvDxc,EAAWO,aAAe,2BAA6B,GACvDP,EAAWQ,eAA2C,IAA3BR,EAAWoZ,YAAwB,2BAA6B,GAC3FpZ,EAAWyc,YAAc,uBAAyB,GAClDzc,EAAW0c,UAAY,qBAAuB,GAE9C,+BAAiC1c,EAAW2c,kBAE5C3c,EAAW4c,iBAAmB,wBAA0B,GACxD5c,EAAW4c,iBAAmB,WAAahC,EAAsB,GAEjE5a,EAAW6c,gBAAkB,8BAAgC,GAE7D7c,EAAWqZ,uBAAyB,0BAA4B,GAChErZ,EAAWqZ,wBAA0BjpB,EAASqQ,WAAWvkC,IAAK,kBAAqB,8BAAgC,GAEnH,4BACA,gCACA,iCACA,2BACA,6BACA,+BAEA,2BACA,yBACA,qBAEA,mBAEA,0BAEA,SAEA,0BAEA,iCACA,iCACA,iCACA,iCAEA,4BAEA,mCACA,mCACA,mCACA,mCAEA,UAEA,mCACA,mCACA,mCACA,mCAEA,WAEA,SAEA,sBAEA,8BACA,+BAEA,SAEA,MAECo9C,OAAQC,IAAkB1iC,KAAM,MAElC8kC,GAECG,EAEA,aAAe9b,EAAWP,UAAY,UACtC,aAAeO,EAAWP,UAAY,QAEtC,uBAAyBtI,EAAOvvB,KAEhCm0C,EAEA/b,EAAW7D,UAAY,qBAAuB6D,EAAW7D,UAAY,GAErE,wBAA0Byf,EAExB5b,EAAWmc,QAAUnc,EAAW/C,IAAQ,kBAAoB,GAC5D+C,EAAWmc,QAAUnc,EAAWoc,OAAW,mBAAqB,GAElEpc,EAAWloB,IAAM,kBAAoB,GACrCkoB,EAAWkS,OAAS,qBAAuB,GAC3ClS,EAAWkS,OAAS,WAAa6I,EAAmB,GACpD/a,EAAWkS,OAAS,WAAa8I,EAAmB,GACpDhb,EAAWkS,OAAS,WAAa+I,EAAuB,GACxDjb,EAAW6R,SAAW,uBAAyB,GAC/C7R,EAAW+R,MAAQ,oBAAsB,GACzC/R,EAAWqc,YAAc,0BAA4B,GACrDrc,EAAWkZ,QAAU,sBAAwB,GAC7ClZ,EAAWmZ,UAAY,wBAA0B,GACjDnZ,EAAWiS,YAAc,0BAA4B,GACrDjS,EAAWsc,aAAe,2BAA6B,GACvDtc,EAAWuc,aAAe,2BAA6B,GACvDvc,EAAWqB,SAAW,uBAAyB,GAC/CrB,EAAWnB,aAAe,oBAAsB,GAEhDmB,EAAW8c,YAAc,0BAA4B,GAErD9c,EAAWoZ,YAAc,sBAAwB,GAEjDpZ,EAAWyc,YAAc,uBAAyB,GAClDzc,EAAW0c,UAAY,qBAAuB,GAE9C,+BAAiC1c,EAAW2c,kBAC5C,kCAAoC3c,EAAW2c,kBAAoB3c,EAAW+c,qBAE9E/c,EAAW4c,iBAAmB,wBAA0B,GACxD5c,EAAW4c,iBAAmB,WAAahC,EAAsB,GAEjE5a,EAAWhC,mBAAqB,8BAAgC,GAEhEgC,EAAWgd,wBAA0B,oCAAsC,GAE3Ehd,EAAWqZ,uBAAyB,0BAA4B,GAChErZ,EAAWqZ,wBAA0BjpB,EAASqQ,WAAWvkC,IAAK,kBAAqB,8BAAgC,GAEnH8jC,EAAWkS,QAAU9hB,EAASqQ,WAAWvkC,IAAK,0BAA6B,0BAA4B,GAEvG,2BACA,+BAEE8jC,EAAWyY,cAAgBwE,GAAkB,uBAAyB,GACtEjd,EAAWyY,cAAgBwE,GAAkB1C,GAAyC,0BAAI,GAC1Fva,EAAWyY,cAAgBwE,GAAkBzE,GAAwB,cAAexY,EAAWyY,aAAgB,GAEjHzY,EAAWH,UAAY,oBAAsB,GAE3CG,EAAWkd,gBAAkBld,EAAWmd,aAAend,EAAWod,gBAAkBpd,EAAWqd,oBAAwB9C,GAAuC,wBAAI,GACpKva,EAAWmd,YAAc/E,GAA0B,mBAAoBpY,EAAWmd,aAAgB,GAClGnd,EAAWod,eAAiBhF,GAA0B,sBAAuBpY,EAAWod,gBAAmB,GAC3Gpd,EAAWqd,oBAAsBjF,GAA0B,2BAA4BpY,EAAWqd,qBAAwB,GAC1Hrd,EAAWkd,eAAiB3E,GAA0B,sBAAuBvY,EAAWkd,gBAAmB,GAE3Gld,EAAWmB,aAAe,yBAA2B1D,EAAS0D,aAAe,GAE7E,MAECmY,OAAQC,IAAkB1iC,KAAM,OAKnCugB,EAAe0iB,GADf1iB,EAAegjB,GAAehjB,GACiB4I,GAG/C3I,EAAiByiB,GADjBziB,EAAiB+iB,GAAe/iB,GACmB2I,GAE5CvC,EAAS6f,mBAEflmB,EAAeojB,GAAapjB,GAC5BC,EAAiBmjB,GAAanjB,IAI/B,IAAIkmB,EAAa7B,EAAetkB,EAC5BomB,EAAe7B,EAAiBtkB,EAKhComB,EAAiBhG,GAAahnB,EAAIA,EAAG2H,cAAemlB,GACpDG,EAAmBjG,GAAahnB,EAAIA,EAAG0H,gBAAiBqlB,GAE5D/sB,EAAGgI,aAAc7D,EAAS6oB,GAC1BhtB,EAAGgI,aAAc7D,EAAS8oB,QAIYlzC,IAAjCizB,EAASuD,oBAEbvQ,EAAGktB,mBAAoB/oB,EAAS,EAAG6I,EAASuD,sBAEL,IAA5BhB,EAAWO,cAGtB9P,EAAGktB,mBAAoB/oB,EAAS,EAAG,YAIpCnE,EAAGiI,YAAa9D,GAEhB,IAAIgpB,EAAantB,EAAGotB,kBAAmBjpB,GACnCkpB,EAAYrtB,EAAGmnB,iBAAkB6F,GACjCM,EAActtB,EAAGmnB,iBAAkB8F,GAEnCM,GAAW,EACXC,GAAkB,GAKqC,IAAtDxtB,EAAGoE,oBAAqBD,EAASnE,EAAGytB,cAExCF,GAAW,EAEX9jD,QAAQqT,MAAO,qCAAsCkjB,EAAG0tB,WAAY,qBAAsB1tB,EAAGoE,oBAAqBD,EAASnE,EAAG2tB,iBAAmB,uBAAwBR,EAAYE,EAAWC,IAEtK,KAAfH,EAEX1jD,QAAQ4pC,KAAM,6CAA8C8Z,GAEnC,KAAdE,GAAoC,KAAhBC,IAE/BE,GAAkB,GAIdA,IAEJxiD,KAAK4iD,aAEJL,SAAUA,EACVvgB,SAAUA,EAEVmgB,WAAYA,EAEZxmB,cAECj9B,IAAK2jD,EACLzlB,OAAQqjB,GAITrkB,gBAECl9B,IAAK4jD,EACL1lB,OAAQsjB,KAUXlrB,EAAG6tB,aAAcb,GACjBhtB,EAAG6tB,aAAcZ,GAIjB,IAAIa,EAEJ9iD,KAAK+iD,YAAc,WASlB,YAPwBh0C,IAAnB+zC,IAEJA,EACC,IAAI5pB,EAAelE,EAAImE,EAASxE,IAI3BmuB,GAMR,IAAIE,EAyDJ,OAvDAhjD,KAAKijD,cAAgB,WAQpB,YAN0Bl0C,IAArBi0C,IAEJA,EAAmB/E,GAAyBjpB,EAAImE,IAI1C6pB,GAMRhjD,KAAKqqB,QAAU,WAEd2K,EAAGkuB,cAAe/pB,GAClBn5B,KAAKm5B,aAAUpqB,GAMhB7Q,OAAOmB,iBAAkBW,MAExBk8B,UACCz7B,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,wDACProC,KAAK+iD,gBAKdjnB,YACCr7B,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,4DACProC,KAAKijD,oBAUfjjD,KAAKqP,GAAK8zC,KACVnjD,KAAKzC,KAAOA,EACZyC,KAAKojD,UAAY,EACjBpjD,KAAKm5B,QAAUA,EACfn5B,KAAK27B,aAAeqmB,EACpBhiD,KAAK47B,eAAiBqmB,EAEfjiD,KAQR,SAASqjD,GAAe1uB,EAAUyS,GAgCjC,SAASkc,EAAehc,GAEvB,IACIic,EADWjc,EAAOkc,SACDD,MAErB,GAAKnc,EAAaqc,oBAEjB,OAAO,KAWP,IAAIC,EAAkBtc,EAAauc,kBAC/BC,EAAkBlhD,KAAKK,OAAS2gD,EAAkB,IAAO,GAEzDjD,EAAW/9C,KAAKN,IAAKwhD,EAAiBL,EAAM5lD,QAEhD,OAAK8iD,EAAW8C,EAAM5lD,QAErBc,QAAQ4pC,KAAM,qCAAuCkb,EAAM5lD,OAAS,6BAA+B8iD,EAAW,KACvG,GAIDA,EAMT,SAASoD,EAA2BxnC,EAAKynC,GAExC,IAAIp7B,EAwBJ,OAtBOrM,EAIKA,EAAIs8B,UAEfjwB,EAAWrM,EAAIqM,SAEJrM,EAAI0nC,sBAEftlD,QAAQ4pC,KAAM,6HACd3f,EAAWrM,EAAIyW,QAAQpK,UATvBA,EAAWyJ,GAcPzJ,IAAayJ,IAAkB2xB,IAEnCp7B,EAAWg0B,IAILh0B,EA5FR,IAAIs7B,KAEAC,GACHxe,kBAAmB,QACnBye,mBAAoB,SACpB/N,kBAAmB,QACnBgO,oBAAqB,UACrBC,kBAAmB,QACnBC,iBAAkB,QAClBC,qBAAsB,WACtBC,qBAAsB,WACtBC,kBAAmB,QACnBC,mBAAoB,SACpBC,eAAgB,UAGbC,GACH,YAAa,yBAA0B,MAAO,cAAe,SAAU,aAAc,iBACrF,WAAY,QAAS,cAAe,sBAAuB,UAAW,YAAa,kBAAmB,cACtG,eAAgB,eAAgB,cAChC,WAAY,UAAW,eAAgB,MAAO,SAAU,SACxD,cAAe,kBAAmB,yBAA0B,WAC5D,WAAY,mBAAoB,eAAgB,eAChD,kBAAmB,kBAAmB,qBACtC,eAAgB,iBAAkB,gBAAiB,gBAAiB,oBACpE,mBAAoB,gBAAiB,cAAe,0BACpD,YAAa,cAAe,YAAa,oBAAqB,sBAAuB,eAAgB,aAsEtG3kD,KAAK4kD,cAAgB,SAAW5iB,EAAUc,EAAQtB,EAAKqjB,EAAaC,EAAmBxd,GAEtF,IAAIyd,EAAWd,EAAWjiB,EAAS98B,MAK/Bu7C,EAAWnZ,EAAOc,cAAgBkb,EAAehc,GAAW,EAC5DtD,EAAYrP,EAASkI,eAEG,OAAvBmF,EAASgC,YAEbA,EAAYoD,EAAa4d,gBAAiBhjB,EAASgC,cAEhChC,EAASgC,WAE3BvlC,QAAQ4pC,KAAM,oCAAqCrG,EAASgC,UAAW,uBAAwBA,EAAW,YAM5G,IAAIihB,EAAsBtwB,EAASuwB,kBA8EnC,OA1ECH,SAAUA,EAEV/gB,UAAWA,EACXwc,uBAAwBpZ,EAAa+d,eACrC1D,eAAgBoC,EAA+BoB,EAA+BA,EAAoBnyB,QAA3B,KAAoC6B,EAASywB,aACpH/oC,MAAQ2lB,EAAS3lB,IACjBqlC,YAAamC,EAA2B7hB,EAAS3lB,IAAKsY,EAAS0wB,YAC/D5O,SAAWzU,EAASyU,OACpB6O,WAAYtjB,EAASyU,QAAUzU,EAASyU,OAAO9lB,QAC/CgxB,eAAgBkC,EAA2B7hB,EAASyU,OAAQ9hB,EAAS0wB,YACrE7H,eAAmBxb,EAASyU,SAAgBzU,EAASyU,OAAO9lB,UAAY+uB,IAA+B1d,EAASyU,OAAO9lB,UAAYgvB,IACnIvJ,WAAapU,EAASoU,SACtBE,QAAUtU,EAASsU,MACnBsK,cAAgB5e,EAAS4e,YACzBgB,oBAAqBiC,EAA2B7hB,EAAS4e,YAAajsB,EAAS0wB,YAC/E5H,UAAYzb,EAASyb,QACrBC,YAAc1b,EAAS0b,UACvB7X,kBAAoB7D,EAAS6D,gBAC7Bgb,eAAiB7e,EAAS6e,aAC1BC,eAAiB9e,EAAS8e,aAC1BtK,cAAgBxU,EAASwU,YACzB5Q,WAAa5D,EAAS4D,SAEtByb,cAAgBrf,EAASqf,YAEzB3K,QAAS1U,EAAS0U,QAElBtT,aAAcpB,EAASoB,aAEvB5B,MAAQA,EACRkf,OAAQ1e,EAASR,IACjBmf,OAAUnf,GAAOA,EAAII,UAErB+b,YAAa3b,EAASkB,UAAYqiB,GAElCnE,gBAAiBpf,EAASof,gBAC1BxD,uBAAwBxW,EAAawW,uBAErC/Y,SAAU7C,EAAS6C,UAAY4b,EAAW,EAC1CA,SAAUA,EACVM,iBAAkB3Z,EAAaqc,oBAE/B3e,aAAc9C,EAAS8C,aACvBC,aAAc/C,EAAS+C,aACvBygB,gBAAiB7wB,EAAS6wB,gBAC1BC,gBAAiB9wB,EAAS8wB,gBAE1BnH,aAAcxb,EAAO4iB,YAAY/nD,OACjC8gD,eAAgB3b,EAAO6iB,MAAMhoD,OAC7B4gD,cAAezb,EAAO8iB,KAAKjoD,OAC3B6gD,kBAAmB1b,EAAO+iB,SAASloD,OACnC+gD,cAAe5b,EAAOgjB,KAAKnoD,OAE3BujD,kBAAmB2D,EACnBvD,oBAAqBwD,EAErB1gB,UAAWpC,EAASoC,UAEpB+c,iBAAkBxsB,EAASmY,UAAU9hC,SAAWs8B,EAAOqJ,eAAiB7N,EAAOiI,QAAQptC,OAAS,EAChGyhD,cAAezqB,EAASmY,UAAU5nC,KAElC83C,YAAaroB,EAASqoB,YACtBuE,wBAAyB5sB,EAAS4sB,wBAElChf,mBAAoBP,EAASO,mBAE7B7B,UAAWsB,EAAStB,UACpBsgB,YAAahf,EAASgB,OAASkG,GAC/B+X,UAAWjf,EAASgB,OAASoG,GAE7B1D,kBAA0C32B,IAA1BizB,EAAS0D,cAA+B1D,EAAS0D,eAQnE1lC,KAAK+lD,eAAiB,SAAW/jB,EAAUuC,GAE1C,IAAI9jB,KAaJ,GAXK8jB,EAAWwgB,SAEftkC,EAAM9Z,KAAM49B,EAAWwgB,WAIvBtkC,EAAM9Z,KAAMq7B,EAASpG,gBACrBnb,EAAM9Z,KAAMq7B,EAASrG,oBAII5sB,IAArBizB,EAASwC,QAEb,IAAM,IAAIr4B,KAAQ61B,EAASwC,QAE1B/jB,EAAM9Z,KAAMwF,GACZsU,EAAM9Z,KAAMq7B,EAASwC,QAASr4B,IAMhC,IAAM,IAAI/O,EAAI,EAAGA,EAAIunD,EAAehnD,OAAQP,IAE3CqjB,EAAM9Z,KAAM49B,EAAYogB,EAAgBvnD,KAQzC,OAJAqjB,EAAM9Z,KAAMq7B,EAASgkB,gBAAgBtnC,YAErC+B,EAAM9Z,KAAMguB,EAASywB,aAEd3kC,EAAMrF,QAIdpb,KAAKimD,eAAiB,SAAWjkB,EAAUtG,EAAQ6I,EAAYhnC,GAK9D,IAAM,IAHF47B,EAGMj1B,EAAI,EAAGgiD,EAAKlC,EAASrmD,OAAQuG,EAAIgiD,EAAIhiD,IAAO,CAErD,IAAIiiD,EAAcnC,EAAU9/C,GAE5B,GAAKiiD,EAAY5oD,OAASA,EAAO,IAEhC47B,EAAUgtB,GACC/C,UAEX,OAaF,YAPiBr0C,IAAZoqB,IAEJA,EAAU,IAAI+lB,GAAcvqB,EAAUp3B,EAAMykC,EAAUtG,EAAQ6I,GAC9Dyf,EAASr9C,KAAMwyB,IAITA,GAIRn5B,KAAKomD,eAAiB,SAAWjtB,GAEhC,GAA8B,KAAtBA,EAAQiqB,UAAkB,CAGjC,IAAIhmD,EAAI4mD,EAASzzC,QAAS4oB,GAC1B6qB,EAAU5mD,GAAM4mD,EAAUA,EAASrmD,OAAS,GAC5CqmD,EAASt3B,MAGTyM,EAAQ9O,YAOVrqB,KAAKgkD,SAAWA,EAQjB,SAASqC,GAAe1b,EAAK3F,EAAYpK,EAAO0rB,EAAYlf,EAAcmf,EAAgBnM,GAMzF,SAASoM,EAAgB91B,EAAO+1B,GAE/B,GAAK/1B,EAAM+B,MAAQg0B,GAAW/1B,EAAMgC,OAAS+zB,EAAU,CAKtD,IAAInqB,EAAQmqB,EAAU/jD,KAAKL,IAAKquB,EAAM+B,MAAO/B,EAAMgC,QAE/CiO,EAAS33B,SAAS43B,gBAAiB,+BAAgC,UASvE,OARAD,EAAOlO,MAAQ/vB,KAAKK,MAAO2tB,EAAM+B,MAAQ6J,GACzCqE,EAAOjO,OAAShwB,KAAKK,MAAO2tB,EAAMgC,OAAS4J,GAE7BqE,EAAOE,WAAY,MACzB6lB,UAAWh2B,EAAO,EAAG,EAAGA,EAAM+B,MAAO/B,EAAMgC,OAAQ,EAAG,EAAGiO,EAAOlO,MAAOkO,EAAOjO,QAEtFj0B,QAAQ4pC,KAAM,0CAA4C3X,EAAM+B,MAAQ,IAAM/B,EAAMgC,OAAS,iBAAmBiO,EAAOlO,MAAQ,IAAMkO,EAAOjO,OAAQhC,GAE7IiQ,EAIR,OAAOjQ,EAIR,SAASi2B,EAAcj2B,GAEtB,OAAOS,GAAMw1B,aAAcj2B,EAAM+B,QAAWtB,GAAMw1B,aAAcj2B,EAAMgC,QAIvE,SAASk0B,EAAgBl2B,GAExB,GAAKA,aAAiBm2B,kBAAoBn2B,aAAiBo2B,kBAAoB,CAE9E,IAAInmB,EAAS33B,SAAS43B,gBAAiB,+BAAgC,UASvE,OARAD,EAAOlO,MAAQtB,GAAM41B,kBAAmBr2B,EAAM+B,OAC9CkO,EAAOjO,OAASvB,GAAM41B,kBAAmBr2B,EAAMgC,QAEjCiO,EAAOE,WAAY,MACzB6lB,UAAWh2B,EAAO,EAAG,EAAGiQ,EAAOlO,MAAOkO,EAAOjO,QAErDj0B,QAAQ4pC,KAAM,mDAAqD3X,EAAM+B,MAAQ,IAAM/B,EAAMgC,OAAS,iBAAmBiO,EAAOlO,MAAQ,IAAMkO,EAAOjO,OAAQhC,GAEtJiQ,EAIR,OAAOjQ,EAIR,SAASs2B,EAAwBl0B,GAEhC,OAASA,EAAQlC,QAAUY,IAAuBsB,EAAQjC,QAAUW,IACjEsB,EAAQ/B,YAAc+C,IAAiBhB,EAAQ/B,YAAcU,GAIjE,SAASw1B,EAA6Bn0B,EAAS6zB,GAE9C,OAAO7zB,EAAQf,iBAAmB40B,GACjC7zB,EAAQ/B,YAAc+C,IAAiBhB,EAAQ/B,YAAcU,GAM/D,SAASy1B,EAAgB7pD,GAExB,OAAKA,IAAMy2B,IAAiBz2B,IAAM8pD,IAA8B9pD,IAAM+pD,GAE9Dzc,EAAIpP,QAILoP,EAAI0c,OAMZ,SAASC,EAAkB7gD,GAE1B,IAAIqsB,EAAUrsB,EAAMnH,OAEpBwzB,EAAQ9rB,oBAAqB,UAAWsgD,GAExCC,EAAmBz0B,GAEnBsnB,EAAWoN,WAKZ,SAASC,EAAuBhhD,GAE/B,IAAIihD,EAAejhD,EAAMnH,OAEzBooD,EAAa1gD,oBAAqB,UAAWygD,GAE7CE,EAAwBD,GAExBtN,EAAWoN,WAMZ,SAASD,EAAmBz0B,GAE3B,IAAI80B,EAAoBtB,EAAW7lD,IAAKqyB,GAExC,GAAKA,EAAQpC,OAASk3B,EAAkBC,0BAIvCld,EAAImd,cAAeF,EAAkBC,+BAE/B,CAIN,QAAuC94C,IAAlC64C,EAAkBG,YAA4B,OAEnDpd,EAAImd,cAAeF,EAAkBI,gBAKtC1B,EAAW/W,OAAQzc,GAIpB,SAAS60B,EAAwBD,GAEhC,IAAIO,EAAyB3B,EAAW7lD,IAAKinD,GACzCE,EAAoBtB,EAAW7lD,IAAKinD,EAAa50B,SAErD,GAAO40B,EAAP,CAcA,QAZ0C34C,IAArC64C,EAAkBI,gBAEtBrd,EAAImd,cAAeF,EAAkBI,gBAIjCN,EAAaz0B,cAEjBy0B,EAAaz0B,aAAaqmB,UAItBoO,EAAaQ,wBAEjB,IAAM,IAAI9qD,EAAI,EAAGA,EAAI,EAAGA,IAEvButC,EAAIwd,kBAAmBF,EAAuBG,mBAAoBhrD,IAC7D6qD,EAAuBI,oBAAqB1d,EAAI2d,mBAAoBL,EAAuBI,mBAAoBjrD,SAMrHutC,EAAIwd,kBAAmBF,EAAuBG,oBACzCH,EAAuBI,oBAAqB1d,EAAI2d,mBAAoBL,EAAuBI,oBAIjG/B,EAAW/W,OAAQmY,EAAa50B,SAChCwzB,EAAW/W,OAAQmY,IAQpB,SAASjxB,EAAc3D,EAASy1B,GAE/B,IAAIX,EAAoBtB,EAAW7lD,IAAKqyB,GAExC,GAAKA,EAAQjR,QAAU,GAAK+lC,EAAkBY,YAAc11B,EAAQjR,QAAU,CAE7E,IAAI6O,EAAQoC,EAAQpC,MAEpB,QAAe3hB,IAAV2hB,EAEJjyB,QAAQ4pC,KAAM,wEAAyEvV,OAEjF,CAAA,IAAwB,IAAnBpC,EAAMra,SAOjB,YADAoyC,EAAeb,EAAmB90B,EAASy1B,GAJ3C9pD,QAAQ4pC,KAAM,yEAA0EvV,IAW1F8H,EAAM+D,cAAegM,EAAI/L,SAAW2pB,GACpC3tB,EAAMC,YAAa8P,EAAI7P,WAAY8sB,EAAkBI,gBA+HtD,SAASU,EAAsBC,EAAa71B,EAAS81B,GAEpD,IAAI/O,EAkCJ,GAhCK+O,GAEJje,EAAIzP,cAAeytB,EAAahe,EAAIxP,eAAgBorB,EAAgBzzB,EAAQlC,QAC5E+Z,EAAIzP,cAAeytB,EAAahe,EAAItP,eAAgBkrB,EAAgBzzB,EAAQjC,QAE5E8Z,EAAIzP,cAAeytB,EAAahe,EAAIrP,mBAAoBirB,EAAgBzzB,EAAQhC,YAChF6Z,EAAIzP,cAAeytB,EAAahe,EAAInP,mBAAoB+qB,EAAgBzzB,EAAQ/B,cAIhF4Z,EAAIzP,cAAeytB,EAAahe,EAAIxP,eAAgBwP,EAAIvP,eACxDuP,EAAIzP,cAAeytB,EAAahe,EAAItP,eAAgBsP,EAAIvP,eAEnDtI,EAAQlC,QAAUY,IAAuBsB,EAAQjC,QAAUW,IAE/D/yB,QAAQ4pC,KAAM,gIAAiIvV,GAIhJ6X,EAAIzP,cAAeytB,EAAahe,EAAIrP,mBAAoB4rB,EAAgBp0B,EAAQhC,YAChF6Z,EAAIzP,cAAeytB,EAAahe,EAAInP,mBAAoB0rB,EAAgBp0B,EAAQ/B,YAE3E+B,EAAQ/B,YAAc+C,IAAiBhB,EAAQ/B,YAAcU,IAEjEhzB,QAAQ4pC,KAAM,kIAAmIvV,IAMnJ+mB,EAAY7U,EAAWvkC,IAAK,kCAEX,CAEhB,GAAKqyB,EAAQ5tB,OAAS2jD,IAA8D,OAAjD7jB,EAAWvkC,IAAK,4BAAwC,OAC3F,GAAKqyB,EAAQ5tB,OAAS4jD,IAAuE,OAAtD9jB,EAAWvkC,IAAK,iCAA6C,QAE/FqyB,EAAQ9B,WAAa,GAAKs1B,EAAW7lD,IAAKqyB,GAAUi2B,uBAExDpe,EAAIqe,cAAeL,EAAa9O,EAAUoP,2BAA4BvmD,KAAKN,IAAK0wB,EAAQ9B,WAAYoW,EAAa8hB,qBACjH5C,EAAW7lD,IAAKqyB,GAAUi2B,oBAAsBj2B,EAAQ9B,aAQ3D,SAASy3B,EAAeb,EAAmB90B,EAASy1B,QAEZx5C,IAAlC64C,EAAkBG,cAEtBH,EAAkBG,aAAc,EAEhCj1B,EAAQtsB,iBAAkB,UAAW8gD,GAErCM,EAAkBI,eAAiBrd,EAAIjQ,gBAEvC0f,EAAWoN,YAIZ5sB,EAAM+D,cAAegM,EAAI/L,SAAW2pB,GACpC3tB,EAAMC,YAAa8P,EAAI7P,WAAY8sB,EAAkBI,gBAErDrd,EAAIwe,YAAaxe,EAAIye,oBAAqBt2B,EAAQb,OAClD0Y,EAAIwe,YAAaxe,EAAI0e,+BAAgCv2B,EAAQd,kBAC7D2Y,EAAIwe,YAAaxe,EAAI2e,iBAAkBx2B,EAAQZ,iBAE/C,IAAIxB,EAAQ81B,EAAgB1zB,EAAQpC,MAAO0W,EAAa8D,gBAEnD8b,EAAwBl0B,KAAuC,IAA1B6zB,EAAcj2B,KAEvDA,EAAQk2B,EAAgBl2B,IAIzB,IAAIk4B,EAAoBjC,EAAcj2B,GACtC64B,EAAWhD,EAAgBzzB,EAAQtnB,QACnCg+C,EAASjD,EAAgBzzB,EAAQ5tB,MAEjCwjD,EAAsB/d,EAAI7P,WAAYhI,EAAS81B,GAE/C,IAAIa,EAAQn4B,EAAUwB,EAAQxB,QAE9B,GAAKwB,EAAQ42B,eAAiB,CAI7B,IAAIC,EAAiBhf,EAAIif,gBAEzB,GAAK92B,EAAQ5tB,OAAS2jD,GAAY,CAEjC,IAAMgB,EAAY,MAAM,IAAIvsD,MAAM,kDAClCqsD,EAAiBhf,EAAImf,wBAEVD,IAGXF,EAAiBhf,EAAIof,mBAIjBj3B,EAAQtnB,SAAWw+C,IAAeL,IAAmBhf,EAAIif,iBAKxD92B,EAAQ5tB,OAAS+kD,IAAqBn3B,EAAQ5tB,OAASglD,KAEpDzrD,QAAQ4pC,KAAM,+FAErBvV,EAAQ5tB,KAAO+kD,GACfT,EAASjD,EAAgBzzB,EAAQ5tB,OAQ9B4tB,EAAQtnB,SAAW2+C,KAEvBR,EAAiBhf,EAAIyf,cAKhBt3B,EAAQ5tB,OAASmlD,KAErB5rD,QAAQ4pC,KAAM,oFAEdvV,EAAQ5tB,KAAOmlD,GACfb,EAASjD,EAAgBzzB,EAAQ5tB,QAMnC01B,EAAMG,WAAY4P,EAAI7P,WAAY,EAAG6uB,EAAgBj5B,EAAM+B,MAAO/B,EAAMgC,OAAQ,EAAG62B,EAAUC,EAAQ,WAE/F,GAAK12B,EAAQw3B,cAMnB,GAAKh5B,EAAQ3zB,OAAS,GAAKirD,EAAoB,CAE9C,IAAM,IAAIxrD,EAAI,EAAGivC,EAAK/a,EAAQ3zB,OAAQP,EAAIivC,EAAIjvC,IAE7CqsD,EAASn4B,EAASl0B,GAClBw9B,EAAMG,WAAY4P,EAAI7P,WAAY19B,EAAGmsD,EAAUE,EAAOh3B,MAAOg3B,EAAO/2B,OAAQ,EAAG62B,EAAUC,EAAQC,EAAOjpD,MAIzGsyB,EAAQf,iBAAkB,OAI1B6I,EAAMG,WAAY4P,EAAI7P,WAAY,EAAGyuB,EAAU74B,EAAM+B,MAAO/B,EAAMgC,OAAQ,EAAG62B,EAAUC,EAAQ94B,EAAMlwB,WAIhG,GAAKsyB,EAAQy3B,oBAEnB,IAAM,IAAIntD,EAAI,EAAGivC,EAAK/a,EAAQ3zB,OAAQP,EAAIivC,EAAIjvC,IAE7CqsD,EAASn4B,EAASl0B,GAEb01B,EAAQtnB,SAAWmmB,IAAcmB,EAAQtnB,SAAWg/C,GAEnD5vB,EAAM6vB,8BAA8Bl6C,QAASg5C,IAAe,EAEhE3uB,EAAM8vB,qBAAsB/f,EAAI7P,WAAY19B,EAAGmsD,EAAUE,EAAOh3B,MAAOg3B,EAAO/2B,OAAQ,EAAG+2B,EAAOjpD,MAIhG/B,QAAQ4pC,KAAM,kGAMfzN,EAAMG,WAAY4P,EAAI7P,WAAY19B,EAAGmsD,EAAUE,EAAOh3B,MAAOg3B,EAAO/2B,OAAQ,EAAG62B,EAAUC,EAAQC,EAAOjpD,WAc1G,GAAK8wB,EAAQ3zB,OAAS,GAAKirD,EAAoB,CAE9C,IAAM,IAAIxrD,EAAI,EAAGivC,EAAK/a,EAAQ3zB,OAAQP,EAAIivC,EAAIjvC,IAE7CqsD,EAASn4B,EAASl0B,GAClBw9B,EAAMG,WAAY4P,EAAI7P,WAAY19B,EAAGmsD,EAAUA,EAAUC,EAAQC,GAIlE32B,EAAQf,iBAAkB,OAI1B6I,EAAMG,WAAY4P,EAAI7P,WAAY,EAAGyuB,EAAUA,EAAUC,EAAQ94B,GAM9Du2B,EAA6Bn0B,EAAS81B,IAAsBje,EAAIggB,eAAgBhgB,EAAI7P,YAEzF8sB,EAAkBY,UAAY11B,EAAQjR,QAEjCiR,EAAQV,UAAWU,EAAQV,SAAUU,GAO3C,SAAS83B,EAAyBC,EAAanD,EAAcoD,EAAYC,GAExE,IAAIxB,EAAWhD,EAAgBmB,EAAa50B,QAAQtnB,QAChDg+C,EAASjD,EAAgBmB,EAAa50B,QAAQ5tB,MAClD01B,EAAMG,WAAYgwB,EAAe,EAAGxB,EAAU7B,EAAaj1B,MAAOi1B,EAAah1B,OAAQ,EAAG62B,EAAUC,EAAQ,MAC5G7e,EAAIqgB,gBAAiBrgB,EAAIsgB,YAAaJ,GACtClgB,EAAIugB,qBAAsBvgB,EAAIsgB,YAAaH,EAAYC,EAAezE,EAAW7lD,IAAKinD,EAAa50B,SAAUk1B,eAAgB,GAC7Hrd,EAAIqgB,gBAAiBrgB,EAAIsgB,YAAa,MAKvC,SAASE,EAA0BC,EAAc1D,GAEhD/c,EAAI0gB,iBAAkB1gB,EAAI2gB,aAAcF,GAEnC1D,EAAa30B,cAAiB20B,EAAa10B,eAE/C2X,EAAI4gB,oBAAqB5gB,EAAI2gB,aAAc3gB,EAAIof,kBAAmBrC,EAAaj1B,MAAOi1B,EAAah1B,QACnGiY,EAAI6gB,wBAAyB7gB,EAAIsgB,YAAatgB,EAAI8gB,iBAAkB9gB,EAAI2gB,aAAcF,IAE3E1D,EAAa30B,aAAe20B,EAAa10B,eAEpD2X,EAAI4gB,oBAAqB5gB,EAAI2gB,aAAc3gB,EAAIyf,cAAe1C,EAAaj1B,MAAOi1B,EAAah1B,QAC/FiY,EAAI6gB,wBAAyB7gB,EAAIsgB,YAAatgB,EAAI+gB,yBAA0B/gB,EAAI2gB,aAAcF,IAK9FzgB,EAAI4gB,oBAAqB5gB,EAAI2gB,aAAc3gB,EAAIghB,MAAOjE,EAAaj1B,MAAOi1B,EAAah1B,QAIxFiY,EAAI0gB,iBAAkB1gB,EAAI2gB,aAAc,MAKzC,SAASM,EAAmBf,EAAanD,GAGxC,GADeA,GAAgBA,EAAaQ,wBAC9B,MAAM,IAAI5qD,MAAM,4DAI9B,GAFAqtC,EAAIqgB,gBAAiBrgB,EAAIsgB,YAAaJ,IAE9BnD,EAAaz0B,eAAgBy0B,EAAaz0B,aAAay2B,eAE9D,MAAM,IAAIpsD,MAAM,uEAKXgpD,EAAW7lD,IAAKinD,EAAaz0B,cAAe+0B,gBAChDN,EAAaz0B,aAAavC,MAAM+B,QAAUi1B,EAAaj1B,OACvDi1B,EAAaz0B,aAAavC,MAAMgC,SAAWg1B,EAAah1B,SACzDg1B,EAAaz0B,aAAavC,MAAM+B,MAAQi1B,EAAaj1B,MACrDi1B,EAAaz0B,aAAavC,MAAMgC,OAASg1B,EAAah1B,OACtDg1B,EAAaz0B,aAAa+N,aAAc,GAGzCvK,EAAcixB,EAAaz0B,aAAc,GAEzC,IAAI44B,EAAoBvF,EAAW7lD,IAAKinD,EAAaz0B,cAAe+0B,eAEpE,GAAKN,EAAaz0B,aAAaznB,SAAWw+C,GAEzCrf,EAAIugB,qBAAsBvgB,EAAIsgB,YAAatgB,EAAI8gB,iBAAkB9gB,EAAI7P,WAAY+wB,EAAmB,OAE9F,CAAA,GAAKnE,EAAaz0B,aAAaznB,SAAW2+C,GAMhD,MAAM,IAAI7sD,MAAM,+BAJhBqtC,EAAIugB,qBAAsBvgB,EAAIsgB,YAAatgB,EAAI+gB,yBAA0B/gB,EAAI7P,WAAY+wB,EAAmB,IAW9G,SAASC,EAAwBpE,GAEhC,IAAIO,EAAyB3B,EAAW7lD,IAAKinD,GAEzCqE,GAAoD,IAAzCrE,EAAaQ,wBAE5B,GAAKR,EAAaz0B,aAAe,CAEhC,GAAK84B,EAAS,MAAM,IAAIzuD,MAAM,4DAE9BsuD,EAAmB3D,EAAuBG,mBAAoBV,QAI9D,GAAKqE,EAAS,CAEb9D,EAAuBI,sBAEvB,IAAM,IAAIjrD,EAAI,EAAGA,EAAI,EAAGA,IAEvButC,EAAIqgB,gBAAiBrgB,EAAIsgB,YAAahD,EAAuBG,mBAAoBhrD,IACjF6qD,EAAuBI,mBAAoBjrD,GAAMutC,EAAIqhB,qBACrDb,EAA0BlD,EAAuBI,mBAAoBjrD,GAAKsqD,QAM3E/c,EAAIqgB,gBAAiBrgB,EAAIsgB,YAAahD,EAAuBG,oBAC7DH,EAAuBI,mBAAqB1d,EAAIqhB,qBAChDb,EAA0BlD,EAAuBI,mBAAoBX,GAMvE/c,EAAIqgB,gBAAiBrgB,EAAIsgB,YAAa,MA7qBvC,IAAIpB,EAAgD,oBAA3BoC,wBAA0CthB,aAAeshB,uBAywBlFjsD,KAAKy2B,aAAeA,EACpBz2B,KAAK42B,eArjBL,SAAyB9D,EAASy1B,GAEjC,IAAIX,EAAoBtB,EAAW7lD,IAAKqyB,GAExC,GAA8B,IAAzBA,EAAQpC,MAAM/yB,OAElB,GAAKm1B,EAAQjR,QAAU,GAAK+lC,EAAkBY,YAAc11B,EAAQjR,QAAU,CAEtE+lC,EAAkBC,4BAExB/0B,EAAQtsB,iBAAkB,UAAW8gD,GAErCM,EAAkBC,0BAA4Bld,EAAIjQ,gBAElD0f,EAAWoN,YAIZ5sB,EAAM+D,cAAegM,EAAI/L,SAAW2pB,GACpC3tB,EAAMC,YAAa8P,EAAIuhB,iBAAkBtE,EAAkBC,2BAE3Dld,EAAIwe,YAAaxe,EAAIye,oBAAqBt2B,EAAQb,OAOlD,IAAM,IALFk6B,EAAiBr5B,GAAWA,EAAQy3B,oBACpCD,EAAkBx3B,EAAQpC,MAAO,IAAOoC,EAAQpC,MAAO,GAAI45B,cAE3D8B,KAEMhvD,EAAI,EAAGA,EAAI,EAAGA,IAQtBgvD,EAAWhvD,GANL+uD,GAAkB7B,EAMPA,EAAgBx3B,EAAQpC,MAAOtzB,GAAIszB,MAAQoC,EAAQpC,MAAOtzB,GAJ1DopD,EAAgB1zB,EAAQpC,MAAOtzB,GAAKgqC,EAAailB,gBAUpE,IACAzD,EAAoBjC,EADRyF,EAAW,IAEvB7C,EAAWhD,EAAgBzzB,EAAQtnB,QACnCg+C,EAASjD,EAAgBzzB,EAAQ5tB,MAIjC,IAFAwjD,EAAsB/d,EAAIuhB,iBAAkBp5B,EAAS81B,GAE3CxrD,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAO+uD,EAgBN,IAAM,IAFF1C,EAAQn4B,EAAU86B,EAAWhvD,GAAIk0B,QAE3BnnB,EAAI,EAAGo1B,EAAKjO,EAAQ3zB,OAAQwM,EAAIo1B,EAAIp1B,IAE7Cs/C,EAASn4B,EAASnnB,GAEb2oB,EAAQtnB,SAAWmmB,IAAcmB,EAAQtnB,SAAWg/C,GAEnD5vB,EAAM6vB,8BAA8Bl6C,QAASg5C,IAAe,EAEhE3uB,EAAM8vB,qBAAsB/f,EAAI2hB,4BAA8BlvD,EAAG+M,EAAGo/C,EAAUE,EAAOh3B,MAAOg3B,EAAO/2B,OAAQ,EAAG+2B,EAAOjpD,MAIrH/B,QAAQ4pC,KAAM,mGAMfzN,EAAMG,WAAY4P,EAAI2hB,4BAA8BlvD,EAAG+M,EAAGo/C,EAAUE,EAAOh3B,MAAOg3B,EAAO/2B,OAAQ,EAAG62B,EAAUC,EAAQC,EAAOjpD,WAhC1H8pD,EAEJ1vB,EAAMG,WAAY4P,EAAI2hB,4BAA8BlvD,EAAG,EAAGmsD,EAAU6C,EAAWhvD,GAAIq1B,MAAO25B,EAAWhvD,GAAIs1B,OAAQ,EAAG62B,EAAUC,EAAQ4C,EAAWhvD,GAAIoD,MAIrJo6B,EAAMG,WAAY4P,EAAI2hB,4BAA8BlvD,EAAG,EAAGmsD,EAAUA,EAAUC,EAAQ4C,EAAWhvD,IAoC/F6pD,EAA6Bn0B,EAAS81B,IAE1Cje,EAAIggB,eAAgBhgB,EAAIuhB,kBAIzBtE,EAAkBY,UAAY11B,EAAQjR,QAEjCiR,EAAQV,UAAWU,EAAQV,SAAUU,QAI1C8H,EAAM+D,cAAegM,EAAI/L,SAAW2pB,GACpC3tB,EAAMC,YAAa8P,EAAIuhB,iBAAkBtE,EAAkBC,4BA0c9D7nD,KAAKusD,sBAlcL,SAAgCz5B,EAASy1B,GAExC3tB,EAAM+D,cAAegM,EAAI/L,SAAW2pB,GACpC3tB,EAAMC,YAAa8P,EAAIuhB,iBAAkB5F,EAAW7lD,IAAKqyB,GAAUk1B,iBAgcpEhoD,KAAKwsD,kBA1FL,SAA4B9E,GAE3B,IAAIO,EAAyB3B,EAAW7lD,IAAKinD,GACzCE,EAAoBtB,EAAW7lD,IAAKinD,EAAa50B,SAErD40B,EAAalhD,iBAAkB,UAAWihD,GAE1CG,EAAkBI,eAAiBrd,EAAIjQ,gBAEvC0f,EAAWoN,WAEX,IAAIuE,GAAoD,IAAzCrE,EAAaQ,wBACxBuE,EAAqB9F,EAAce,GAIvC,GAAKqE,EAIJ,IAFA9D,EAAuBG,sBAEbhrD,EAAI,EAAGA,EAAI,EAAGA,IAEvB6qD,EAAuBG,mBAAoBhrD,GAAMutC,EAAI+hB,yBAMtDzE,EAAuBG,mBAAqBzd,EAAI+hB,oBAMjD,GAAKX,EAAS,CAEbnxB,EAAMC,YAAa8P,EAAIuhB,iBAAkBtE,EAAkBI,gBAC3DU,EAAsB/d,EAAIuhB,iBAAkBxE,EAAa50B,QAAS25B,GAElE,IAAM,IAAIrvD,EAAI,EAAGA,EAAI,EAAGA,IAEvBwtD,EAAyB3C,EAAuBG,mBAAoBhrD,GAAKsqD,EAAc/c,EAAIgiB,kBAAmBhiB,EAAI2hB,4BAA8BlvD,GAI5I6pD,EAA6BS,EAAa50B,QAAS25B,IAAuB9hB,EAAIggB,eAAgBhgB,EAAIuhB,kBACvGtxB,EAAMC,YAAa8P,EAAIuhB,iBAAkB,WAIzCtxB,EAAMC,YAAa8P,EAAI7P,WAAY8sB,EAAkBI,gBACrDU,EAAsB/d,EAAI7P,WAAY4sB,EAAa50B,QAAS25B,GAC5D7B,EAAyB3C,EAAuBG,mBAAoBV,EAAc/c,EAAIgiB,kBAAmBhiB,EAAI7P,YAExGmsB,EAA6BS,EAAa50B,QAAS25B,IAAuB9hB,EAAIggB,eAAgBhgB,EAAI7P,YACvGF,EAAMC,YAAa8P,EAAI7P,WAAY,MAM/B4sB,EAAa30B,aAEjB+4B,EAAwBpE,IA4B1B1nD,KAAK4sD,yBAtBL,SAAmClF,GAElC,IAAI50B,EAAU40B,EAAa50B,QAG3B,GAAKm0B,EAA6Bn0B,EAFT6zB,EAAce,IAE2B,CAEjE,IAAIpoD,EAASooD,EAAaQ,wBAA0Bvd,EAAIuhB,iBAAmBvhB,EAAI7P,WAC3E+xB,EAAevG,EAAW7lD,IAAKqyB,GAAUk1B,eAE7CptB,EAAMC,YAAav7B,EAAQutD,GAC3BliB,EAAIggB,eAAgBrrD,GACpBs7B,EAAMC,YAAav7B,EAAQ,QAkB9B,SAASwtD,KAER,IAAIxG,KA8BJ,OACC7lD,IA7BD,SAAc6mC,GAEb,IAAIpW,EAAOoW,EAAOpW,KACd7U,EAAMiqC,EAAYp1B,GAStB,YAPaniB,IAARsN,IAEJA,KACAiqC,EAAYp1B,GAAS7U,GAIfA,GAkBPkzB,OAdD,SAAiBjI,UAETgf,EAAYhf,EAAOpW,OAa1Bqc,MATD,WAEC+Y,OAgBF,SAASyG,GAAY/3B,EAAIgQ,EAAYuhB,GA0VpC,SAAS7rB,EAAex1B,EAAM5F,EAAQuB,GAErC,IAAIL,EAAO,IAAIqB,WAAY,GACvBixB,EAAUkC,EAAG0F,gBAEjB1F,EAAG6F,YAAa31B,EAAM4tB,GACtBkC,EAAGkG,cAAeh2B,EAAM8vB,EAAGwG,mBAAoBxG,EAAGuG,SAClDvG,EAAGkG,cAAeh2B,EAAM8vB,EAAGsG,mBAAoBtG,EAAGuG,SAElD,IAAM,IAAIn+B,EAAI,EAAGA,EAAIyD,EAAOzD,IAE3B43B,EAAG+F,WAAYz7B,EAASlC,EAAG,EAAG43B,EAAGyG,KAAM,EAAG,EAAG,EAAGzG,EAAGyG,KAAMzG,EAAGiG,cAAez6B,GAI5E,OAAOsyB,EAiGR,SAAStoB,EAAQ6E,IAEY,IAAvB+3B,EAAc/3B,KAElB2lB,EAAGxqB,OAAQ6E,GACX+3B,EAAc/3B,IAAO,GAMvB,SAASvD,EAASuD,IAEW,IAAvB+3B,EAAc/3B,KAElB2lB,EAAGlpB,QAASuD,GACZ+3B,EAAc/3B,IAAO,GAgCvB,SAASqwB,EAAaC,EAAUC,EAAeC,EAAUC,EAAUsC,EAAoBC,EAAeC,EAAeC,GAE/G5C,IAAaqtB,GAEjBxiD,EAAQwqB,EAAG+J,OAIXjzB,EAASkpB,EAAG+J,OAINY,IAAastB,IAAsBttB,IAAautB,GAAmB3qB,IAAuB4qB,IAE3FxtB,IAAaytB,GAEZ7qB,GAEJvN,EAAGq4B,sBAAuBr4B,EAAGs4B,SAAUt4B,EAAGs4B,UAC1Ct4B,EAAGu4B,kBAAmBv4B,EAAGw4B,IAAKx4B,EAAGw4B,IAAKx4B,EAAGw4B,IAAKx4B,EAAGw4B,OAIjDx4B,EAAG4K,cAAe5K,EAAGs4B,UACrBt4B,EAAGy4B,UAAWz4B,EAAG04B,UAAW14B,EAAGw4B,MAIrB7tB,IAAaguB,GAEnBprB,GAEJvN,EAAGq4B,sBAAuBr4B,EAAGs4B,SAAUt4B,EAAGs4B,UAC1Ct4B,EAAGu4B,kBAAmBv4B,EAAG44B,KAAM54B,EAAG44B,KAAM54B,EAAG64B,oBAAqB74B,EAAG84B,uBAInE94B,EAAG4K,cAAe5K,EAAGs4B,UACrBt4B,EAAGy4B,UAAWz4B,EAAG44B,KAAM54B,EAAG64B,sBAIhBluB,IAAaouB,GAEnBxrB,GAEJvN,EAAGq4B,sBAAuBr4B,EAAGs4B,SAAUt4B,EAAGs4B,UAC1Ct4B,EAAGu4B,kBAAmBv4B,EAAG44B,KAAM54B,EAAGg5B,UAAWh5B,EAAG44B,KAAM54B,EAAG04B,aAIzD14B,EAAG4K,cAAe5K,EAAGs4B,UACrBt4B,EAAGy4B,UAAWz4B,EAAG44B,KAAM54B,EAAGg5B,YAMtBzrB,GAEJvN,EAAGq4B,sBAAuBr4B,EAAGs4B,SAAUt4B,EAAGs4B,UAC1Ct4B,EAAGu4B,kBAAmBv4B,EAAGw4B,IAAKx4B,EAAG84B,oBAAqB94B,EAAGw4B,IAAKx4B,EAAG84B,uBAIjE94B,EAAGq4B,sBAAuBr4B,EAAGs4B,SAAUt4B,EAAGs4B,UAC1Ct4B,EAAGu4B,kBAAmBv4B,EAAG04B,UAAW14B,EAAG84B,oBAAqB94B,EAAGw4B,IAAKx4B,EAAG84B,sBAMzEZ,EAAkBvtB,EAClBwtB,EAA2B5qB,GAIvB5C,IAAastB,IAEjB7qB,EAAqBA,GAAsBxC,EAC3CyC,EAAgBA,GAAiBxC,EACjCyC,EAAgBA,GAAiBxC,EAE5BF,IAAkBquB,GAAwB7rB,IAAuB8rB,IAErEl5B,EAAGq4B,sBAAuB9G,EAAgB3mB,GAAiB2mB,EAAgBnkB,IAE3E6rB,EAAuBruB,EACvBsuB,EAA4B9rB,GAIxBvC,IAAasuB,GAAmBruB,IAAasuB,GAAmB/rB,IAAkBgsB,GAAwB/rB,IAAkBgsB,IAEhIt5B,EAAGu4B,kBAAmBhH,EAAgB1mB,GAAY0mB,EAAgBzmB,GAAYymB,EAAgBlkB,GAAiBkkB,EAAgBjkB,IAE/H6rB,EAAkBtuB,EAClBuuB,EAAkBtuB,EAClBuuB,EAAuBhsB,EACvBisB,EAAuBhsB,KAMxB2rB,EAAuB,KACvBE,EAAkB,KAClBC,EAAkB,KAClBF,EAA4B,KAC5BG,EAAuB,KACvBC,EAAuB,MA6BzB,SAASC,EAActN,GAEjBuN,IAAqBvN,IAEpBA,EAEJjsB,EAAGy5B,UAAWz5B,EAAG05B,IAIjB15B,EAAGy5B,UAAWz5B,EAAG25B,KAIlBH,EAAmBvN,GAMrB,SAAS2N,EAAaC,GAEhBA,IAAaC,IAEjBtkD,EAAQwqB,EAAGkJ,WAEN2wB,IAAaE,IAEZF,IAAaG,GAEjBh6B,EAAG65B,SAAU75B,EAAGi6B,MAELJ,IAAaK,GAExBl6B,EAAG65B,SAAU75B,EAAGm6B,OAIhBn6B,EAAG65B,SAAU75B,EAAGo6B,kBAQlBtjD,EAASkpB,EAAGkJ,WAIb6wB,EAAkBF,EAgBnB,SAASQ,EAAkBprB,EAAe3hC,EAAQ01B,GAE5CiM,GAEJz5B,EAAQwqB,EAAGs6B,qBAENC,IAA+BjtD,GAAUktD,IAA8Bx3B,IAE3EhD,EAAGiP,cAAe3hC,EAAQ01B,GAE1Bu3B,EAA6BjtD,EAC7BktD,EAA4Bx3B,IAM7BlsB,EAASkpB,EAAGs6B,qBA8Bd,SAAS3wB,EAAe8wB,QAEJ1gD,IAAd0gD,IAA0BA,EAAYz6B,EAAG4J,SAAW8wB,EAAc,GAElEC,IAAuBF,IAE3Bz6B,EAAG2J,cAAe8wB,GAClBE,EAAqBF,GA9cvB,IAAIG,EAAc,IA7SlB,WAEC,IAAIC,GAAS,EAETrnD,EAAQ,IAAI6pB,EACZy9B,EAAmB,KACnBC,EAAoB,IAAI19B,EAE5B,OAEC+L,QAAS,SAAW4xB,GAEdF,IAAqBE,GAAeH,IAExC76B,EAAGg7B,UAAWA,EAAWA,EAAWA,EAAWA,GAC/CF,EAAmBE,IAMrBC,UAAW,SAAWC,GAErBL,EAASK,GAIVhkB,SAAU,SAAWpvC,EAAG44B,EAAGluB,EAAGtK,EAAGqlC,IAEJ,IAAvBA,IAEJzlC,GAAKI,EAAGw4B,GAAKx4B,EAAGsK,GAAKtK,GAItBsL,EAAM9D,IAAK5H,EAAG44B,EAAGluB,EAAGtK,IAEuB,IAAtC6yD,EAAkBI,OAAQ3nD,KAE9BwsB,EAAG4Y,WAAY9wC,EAAG44B,EAAGluB,EAAGtK,GACxB6yD,EAAkBtrD,KAAM+D,KAM1BxF,MAAO,WAEN6sD,GAAS,EAETC,EAAmB,KACnBC,EAAkBrrD,IAAK,EAAG,EAAG,EAAG,MA2P/BquB,EAAc,IAnPlB,WAEC,IAAI88B,GAAS,EAETO,EAAmB,KACnBC,EAAmB,KACnBC,EAAoB,KAExB,OAEC9tB,QAAS,SAAWC,GAEdA,EAEJj4B,EAAQwqB,EAAGgK,YAIXlzB,EAASkpB,EAAGgK,aAMdZ,QAAS,SAAWmyB,GAEdH,IAAqBG,GAAeV,IAExC76B,EAAGu7B,UAAWA,GACdH,EAAmBG,IAMrBC,QAAS,SAAW9sB,GAEnB,GAAK2sB,IAAqB3sB,EAAY,CAErC,GAAKA,EAEJ,OAASA,GAER,KAAK+sB,GAEJz7B,EAAG0O,UAAW1O,EAAG07B,OACjB,MAED,KAAKC,GAEJ37B,EAAG0O,UAAW1O,EAAG47B,QACjB,MAED,KAAKC,GAEJ77B,EAAG0O,UAAW1O,EAAG87B,MACjB,MAED,KAAKntB,GAEJ3O,EAAG0O,UAAW1O,EAAG+7B,QACjB,MAED,KAAKC,GAEJh8B,EAAG0O,UAAW1O,EAAGi8B,OACjB,MAED,KAAKC,GAEJl8B,EAAG0O,UAAW1O,EAAGm8B,QACjB,MAED,KAAKC,GAEJp8B,EAAG0O,UAAW1O,EAAGq8B,SACjB,MAED,KAAKC,GAEJt8B,EAAG0O,UAAW1O,EAAGu8B,UACjB,MAED,QAECv8B,EAAG0O,UAAW1O,EAAG+7B,aAMnB/7B,EAAG0O,UAAW1O,EAAG+7B,QAIlBV,EAAmB3sB,IAMrBusB,UAAW,SAAWC,GAErBL,EAASK,GAIVhkB,SAAU,SAAW/N,GAEfmyB,IAAsBnyB,IAE1BnJ,EAAGw8B,WAAYrzB,GACfmyB,EAAoBnyB,IAMtBn7B,MAAO,WAEN6sD,GAAS,EAETO,EAAmB,KACnBC,EAAmB,KACnBC,EAAoB,QAwHnBt9B,EAAgB,IAhHpB,WAEC,IAAI68B,GAAS,EAET4B,EAAqB,KACrBC,EAAqB,KACrBC,EAAoB,KACpBC,EAAyB,KACzBC,EAAqB,KACrBC,EAAsB,KACtBC,EAAsB,KACtBC,EAAsB,KAE1B,OAECxvB,QAAS,SAAWyvB,GAEdA,EAEJznD,EAAQwqB,EAAGk9B,cAIXpmD,EAASkpB,EAAGk9B,eAMd9zB,QAAS,SAAW+zB,GAEdV,IAAuBU,GAAiBtC,IAE5C76B,EAAGm9B,YAAaA,GAChBV,EAAqBU,IAMvB3B,QAAS,SAAW4B,EAAaC,EAAYF,GAEvCT,IAAuBU,GACvBT,IAAuBU,GACvBT,IAA2BO,IAE/Bn9B,EAAGo9B,YAAaA,EAAaC,EAAYF,GAEzCT,EAAqBU,EACrBT,EAAoBU,EACpBT,EAAyBO,IAM3BG,MAAO,SAAWC,EAAaC,EAAcC,GAEvCZ,IAAwBU,GACxBT,IAAwBU,GACxBT,IAAwBU,IAE5Bz9B,EAAG09B,UAAWH,EAAaC,EAAcC,GAEzCZ,EAAqBU,EACrBT,EAAsBU,EACtBT,EAAsBU,IAMxBxC,UAAW,SAAWC,GAErBL,EAASK,GAIVhkB,SAAU,SAAWymB,GAEfX,IAAwBW,IAE5B39B,EAAG49B,aAAcD,GACjBX,EAAsBW,IAMxB3vD,MAAO,WAEN6sD,GAAS,EAET4B,EAAqB,KACrBC,EAAqB,KACrBC,EAAoB,KACpBC,EAAyB,KACzBC,EAAqB,KACrBC,EAAsB,KACtBC,EAAsB,KACtBC,EAAsB,QAcrBa,EAAsB79B,EAAG89B,aAAc99B,EAAG+9B,oBAC1CC,EAAgB,IAAInxD,WAAYgxD,GAChCI,EAAoB,IAAIpxD,WAAYgxD,GACpCK,EAAoB,IAAIrxD,WAAYgxD,GAEpCzrB,KAEA+rB,EAA2B,KAE3BjG,EAAkB,KAClBe,EAAuB,KACvBE,EAAkB,KAClBC,EAAkB,KAClBF,EAA4B,KAC5BG,EAAuB,KACvBC,EAAuB,KACvBnB,GAA2B,EAE3BqB,EAAmB,KACnBO,EAAkB,KAElBqE,EAAmB,KAEnB7D,EAA6B,KAC7BC,EAA4B,KAE5B6D,EAAqB,KAErB3D,EAAc16B,EAAG89B,aAAc99B,EAAGs+B,kCAElCzxC,EAAUsB,WAAY,kBAAkBD,KAAM8R,EAAG89B,aAAc99B,EAAGu+B,UAAa,IAC/EC,EAAqBrwC,WAAYtB,IAAa,EAE9C8tC,EAAqB,KACrB8D,KAEAC,EAAiB,IAAIrhC,EACrBshC,EAAkB,IAAIthC,EAqBtBuhC,KAugBJ,OAtgBAA,EAAe5+B,EAAG8F,YAAeJ,EAAe1F,EAAG8F,WAAY9F,EAAG8F,WAAY,GAC9E84B,EAAe5+B,EAAGk3B,kBAAqBxxB,EAAe1F,EAAGk3B,iBAAkBl3B,EAAGs3B,4BAA6B,IAugB1GhtC,SACC9W,MAAOonD,EACPzxB,MAAOpL,EACP4/B,QAAS3/B,GAGVpnB,KAzgBD,WAECgkD,EAAY1jB,SAAU,EAAG,EAAG,EAAG,GAC/BnZ,EAAYmZ,SAAU,GACtBlZ,EAAckZ,SAAU,GAExB1hC,EAAQwqB,EAAGgK,YACXjM,EAAYy9B,QAAS7sB,IAErB4qB,GAAc,GACdK,EAAaI,IACbxkD,EAAQwqB,EAAGkJ,WAEX1zB,EAAQwqB,EAAG+J,OACXW,EAAaqD,KA4fblF,eAxfD,WAEC,IAAM,IAAIzgC,EAAI,EAAGI,EAAIw1D,EAAcr1D,OAAQP,EAAII,EAAGJ,IAEjD41D,EAAe51D,GAAM,GAqftB0gC,gBA/eD,SAA0BoQ,GAEzB8kB,EAAe9kB,GAAc,EAEW,IAAnC+kB,EAAmB/kB,KAEvBlZ,EAAG6+B,wBAAyB3lB,GAC5B+kB,EAAmB/kB,GAAc,GAIM,IAAnCglB,EAAmBhlB,KAEPlJ,EAAWvkC,IAAK,0BAEtBqzD,yBAA0B5lB,EAAW,GAC/CglB,EAAmBhlB,GAAc,IAgelC6lB,0BA1dD,SAAoC7lB,EAAW8lB,GAE9ChB,EAAe9kB,GAAc,EAEW,IAAnC+kB,EAAmB/kB,KAEvBlZ,EAAG6+B,wBAAyB3lB,GAC5B+kB,EAAmB/kB,GAAc,GAI7BglB,EAAmBhlB,KAAgB8lB,IAEvBhvB,EAAWvkC,IAAK,0BAEtBqzD,yBAA0B5lB,EAAW8lB,GAC/Cd,EAAmBhlB,GAAc8lB,IA2clCj2B,wBArcD,WAEC,IAAM,IAAI3gC,EAAI,EAAGI,EAAIy1D,EAAkBt1D,OAAQP,IAAMI,IAAMJ,EAErD61D,EAAmB71D,KAAQ41D,EAAe51D,KAE9C43B,EAAGi/B,yBAA0B72D,GAC7B61D,EAAmB71D,GAAM,IA+b3BoN,OAAQA,EACRsB,QAASA,EACT2+C,4BAnaD,WAEC,GAAkC,OAA7B0I,IAEJA,KAEKnuB,EAAWvkC,IAAK,mCAChBukC,EAAWvkC,IAAK,kCAChBukC,EAAWvkC,IAAK,kCAIpB,IAAM,IAFFyzD,EAAUl/B,EAAG89B,aAAc99B,EAAGm/B,4BAExB/2D,EAAI,EAAGA,EAAI82D,EAAQv2D,OAAQP,IAEpC+1D,EAAyBxsD,KAAMutD,EAAS92D,IAQ3C,OAAO+1D,GA+YPzzB,YAAaA,EACb00B,YAxRD,SAAsBpyB,GAErBA,EAASgB,OAASkG,GACfp9B,EAASkpB,EAAGkJ,WACZ1zB,EAAQwqB,EAAGkJ,WAEdqwB,EAAcvsB,EAASgB,OAASoG,KAEP,IAAzBpH,EAASsB,YACN5D,EAAasC,EAASrC,SAAUqC,EAASpC,cAAeoC,EAASnC,SAAUmC,EAASlC,SAAUkC,EAASI,mBAAoBJ,EAASK,cAAeL,EAASM,cAAeN,EAASO,oBACpL7C,EAAastB,IAEhBj6B,EAAYy9B,QAASxuB,EAAS0B,WAC9B3Q,EAAYyP,QAASR,EAASS,WAC9B1P,EAAYqL,QAAS4D,EAASU,YAC9BktB,EAAYxxB,QAAS4D,EAAS+B,YAE9BsrB,EAAkBrtB,EAASiC,cAAejC,EAASkC,oBAAqBlC,EAASmC,qBAyQjFoqB,aAAcA,EACdK,YAAaA,EAEbyF,aAhND,SAAuB5hC,GAEjBA,IAAU2gC,IAETI,GAAqBx+B,EAAGs/B,UAAW7hC,GAExC2gC,EAAmB3gC,IA2MpB48B,iBAAkBA,EAElBkF,eAhLD,WAEC,OAAOlB,GA+KPlnB,eA3KD,SAAyBvZ,GAExBygC,EAAqBzgC,EAEhBA,EAEJpoB,EAAQwqB,EAAGw/B,cAIX1oD,EAASkpB,EAAGw/B,eAmKb71B,cAAeA,EACf9D,YA/ID,SAAsB45B,EAAW5H,GAEJ,OAAvB8C,GAEJhxB,IAID,IAAI+1B,EAAejB,EAAsB9D,QAEnB5gD,IAAjB2lD,IAEJA,GAAiBxvD,UAAM6J,EAAW+jB,aAAS/jB,GAC3C0kD,EAAsB9D,GAAuB+E,GAIzCA,EAAaxvD,OAASuvD,GAAaC,EAAa5hC,UAAY+5B,IAEhE73B,EAAG6F,YAAa45B,EAAW5H,GAAgB+G,EAAea,IAE1DC,EAAaxvD,KAAOuvD,EACpBC,EAAa5hC,QAAU+5B,IA0HxBnC,qBApHD,WAEC,IAEC11B,EAAG01B,qBAAqBvkD,MAAO6uB,EAAI9uB,WAElC,MAAQ4L,GAETrT,QAAQqT,MAAO,oBAAqBA,KA6GrCipB,WAvGD,WAEC,IAEC/F,EAAG+F,WAAW50B,MAAO6uB,EAAI9uB,WAExB,MAAQ4L,GAETrT,QAAQqT,MAAO,oBAAqBA,KAiGrC6gB,QAzFD,SAAkBA,IAEyB,IAArC+gC,EAAevD,OAAQx9B,KAE3BqC,EAAGrC,QAASA,EAAQnC,EAAGmC,EAAQvP,EAAGuP,EAAQL,EAAGK,EAAQJ,GACrDmhC,EAAejvD,KAAMkuB,KAqFtBE,SA/ED,SAAmBA,IAE0B,IAAvC8gC,EAAgBxD,OAAQt9B,KAE5BmC,EAAGnC,SAAUA,EAASrC,EAAGqC,EAASzP,EAAGyP,EAASP,EAAGO,EAASN,GAC1DohC,EAAgBlvD,KAAMouB,KA4EvB7vB,MApED,WAEC,IAAM,IAAI5F,EAAI,EAAGA,EAAI61D,EAAkBt1D,OAAQP,IAEd,IAA3B61D,EAAmB71D,KAEvB43B,EAAGi/B,yBAA0B72D,GAC7B61D,EAAmB71D,GAAM,GAM3BgqC,KAEA+rB,EAA2B,KAE3BxD,EAAqB,KACrB8D,KAEAvG,EAAkB,KAElBsB,EAAmB,KACnBO,EAAkB,KAElBa,EAAY5sD,QACZ+vB,EAAY/vB,QACZgwB,EAAchwB,UAmDhB,SAAS2xD,GAAmB3/B,EAAIgQ,EAAYT,GAwB3C,SAASygB,EAAiBhhB,GAEzB,GAAmB,UAAdA,EAAwB,CAE5B,GAAKhP,EAAG4/B,yBAA0B5/B,EAAG2H,cAAe3H,EAAG6/B,YAAa7wB,UAAY,GAC3EhP,EAAG4/B,yBAA0B5/B,EAAG0H,gBAAiB1H,EAAG6/B,YAAa7wB,UAAY,EAEjF,MAAO,QAIRA,EAAY,UAIb,MAAmB,YAAdA,GAEChP,EAAG4/B,yBAA0B5/B,EAAG2H,cAAe3H,EAAG8/B,cAAe9wB,UAAY,GAC7EhP,EAAG4/B,yBAA0B5/B,EAAG0H,gBAAiB1H,EAAG8/B,cAAe9wB,UAAY,EAE5E,UAMF,OAhDR,IAAI+wB,EAoDA/wB,OAAqCj1B,IAAzBw1B,EAAWP,UAA0BO,EAAWP,UAAY,QACxEgxB,EAAehQ,EAAiBhhB,GAE/BgxB,IAAiBhxB,IAErBvlC,QAAQ4pC,KAAM,uBAAwBrE,EAAW,uBAAwBgxB,EAAc,YACvFhxB,EAAYgxB,GAIb,IAAIpX,GAA+D,IAAtCrZ,EAAWqZ,0BAAsC5Y,EAAWvkC,IAAK,kBAE1FivD,EAAc16B,EAAG89B,aAAc99B,EAAGigC,yBAClCC,EAAoBlgC,EAAG89B,aAAc99B,EAAGmgC,gCACxCjqB,EAAiBlW,EAAG89B,aAAc99B,EAAGogC,kBACrC/I,EAAiBr3B,EAAG89B,aAAc99B,EAAGqgC,2BAErCC,EAAgBtgC,EAAG89B,aAAc99B,EAAG+9B,oBACpCpP,EAAoB3uB,EAAG89B,aAAc99B,EAAGugC,4BACxCC,EAAcxgC,EAAG89B,aAAc99B,EAAGygC,qBAClCC,EAAsB1gC,EAAG89B,aAAc99B,EAAG2gC,8BAE1CxQ,EAAiB+P,EAAoB,EACrCU,IAA2B5wB,EAAWvkC,IAAK,qBAG/C,OAECyoD,iBA9ED,WAEC,QAAuBn6C,IAAlBgmD,EAA8B,OAAOA,EAE1C,IAAIlb,EAAY7U,EAAWvkC,IAAK,kCAYhC,OARCs0D,EAFkB,OAAdlb,EAEY7kB,EAAG89B,aAAcjZ,EAAUgc,gCAI3B,GAmEjB7Q,gBAAiBA,EAEjBhhB,UAAWA,EACX4Z,uBAAwBA,EAExB8R,YAAaA,EACbwF,kBAAmBA,EACnBhqB,eAAgBA,EAChBmhB,eAAgBA,EAEhBiJ,cAAeA,EACf3R,kBAAmBA,EACnB6R,YAAaA,EACbE,oBAAqBA,EAErBvQ,eAAgBA,EAChByQ,sBAAuBA,EACvBnS,oBAtByB0B,GAAkByQ,GAgC7C,SAASE,GAAar1C,GAErBywB,GAAkBxzC,KAAMsC,MAExBA,KAAK+1D,QAAUt1C,MAgBhB,SAASu1C,GAAcrhC,GAEtB,IAAIqU,EAAQhpC,KAERi2D,EAAS,KACTC,EAAY,KAEX,gBAAiBrwD,SAErBqwD,EAAY,IAAIrwD,OAAOswD,aAIxB,IAAI33B,EAAqB,IAAI7K,EAEzByiC,EAAiB,IAAIziC,EACrB0iC,EAAwB,IAAI1iC,EAE5B2iC,EAAU,IAAIplB,GAClBolB,EAAQC,OAAS,IAAIlkC,EAAS,EAAK,EAAK,GAAK,GAC7CikC,EAAQ9sB,OAAOh/B,OAAQ,GAEvB,IAAIgsD,EAAU,IAAItlB,GAClBslB,EAAQD,OAAS,IAAIlkC,EAAS,GAAK,EAAK,GAAK,GAC7CmkC,EAAQhtB,OAAOh/B,OAAQ,GAEvB,IAAIisD,EAAW,IAAIX,IAAeQ,EAASE,IAC3CC,EAASjtB,OAAOh/B,OAAQ,GACxBisD,EAASjtB,OAAOh/B,OAAQ,GAIxB,IAAIksD,EAAaC,EAuBjB9wD,OAAOW,iBAAkB,yBArBzB,WAEC,GAAKyvD,EAAOW,aAAe,CAE1B,IAAIC,EAAgBZ,EAAOa,iBAAkB,QACzCC,EAAcF,EAAcE,YAC5BC,EAAeH,EAAcG,aAEjCL,EAAoBhiC,EAASsiC,gBAC7BP,EAAc/hC,EAASuiC,UAEvBviC,EAASwiC,qBAAoC,EAAdJ,EAAiBC,EAAc,QAEnDhuB,EAAMh+B,SAEjB2pB,EAASwiC,qBAAsBT,EAAYjkC,MAAOikC,EAAYhkC,OAAQikC,KAMK,GAI7E32D,KAAKgL,SAAU,EACfhL,KAAKo3D,UAAW,EAEhBp3D,KAAKq3D,UAAY,WAEhB,OAAOpB,GAIRj2D,KAAKs3D,UAAY,SAAWn4D,QAEZ4P,IAAV5P,IAAsB82D,EAAS92D,IAIrCa,KAAKu3D,UAAY,SAAWl6B,GAE3B,GAAgB,OAAX44B,EAAkB,OAAO54B,EAE9B44B,EAAOuB,UAAYn6B,EAAOqE,KAC1Bu0B,EAAOwB,SAAWp6B,EAAOsE,IAEzBs0B,EAAOyB,aAAcxB,GAIrB,IAAIyB,EAAOzB,EAAUyB,KAEE,OAAlBA,EAAKhhD,SAET0mB,EAAO1mB,SAASihD,UAAWD,EAAKhhD,UAIhC0mB,EAAO1mB,SAASjS,IAAK,EAAG,EAAG,GAIF,OAArBizD,EAAKE,aAETx6B,EAAO8S,WAAWynB,UAAWD,EAAKE,aAInCx6B,EAAO+P,oBAEP,IAAI0qB,EAAkB7B,EAAO6B,gBAY7B,GAVK93D,KAAKo3D,UAAYU,IAErB1B,EAAewB,UAAWE,EAAgBC,4BAC1C1B,EAAsB3d,WAAY0d,GAElC/4B,EAAOiB,YAAY+O,SAAU+oB,GAC7B/4B,EAAOmB,mBAAmB6O,SAAUgpB,KAIR,IAAxBJ,EAAOW,aAAyB,OAAOv5B,EAI5Co5B,EAASn4B,YAAY75B,KAAM44B,EAAOiB,aAClCm4B,EAASj4B,mBAAmB/5B,KAAM44B,EAAOmB,oBAEzC83B,EAAQ93B,mBAAmBo5B,UAAW1B,EAAU8B,gBAChDxB,EAAQh4B,mBAAmBo5B,UAAW1B,EAAU+B,iBAE3Cj4D,KAAKo3D,UAAYU,IAErBxB,EAAQ93B,mBAAmB6O,SAAUgpB,GACrCG,EAAQh4B,mBAAmB6O,SAAUgpB,IAItC,IAAIpmB,EAAS5S,EAAO4S,OAEJ,OAAXA,IAEJzR,EAAmBka,WAAYzI,EAAO3R,aAEtCg4B,EAAQ93B,mBAAmB6O,SAAU7O,GACrCg4B,EAAQh4B,mBAAmB6O,SAAU7O,IAMtC83B,EAAQh4B,YAAYoa,WAAY4d,EAAQ93B,oBACxCg4B,EAAQl4B,YAAYoa,WAAY8d,EAAQh4B,oBAExC83B,EAAQ73B,iBAAiBm5B,UAAW1B,EAAUgC,sBAC9C1B,EAAQ/3B,iBAAiBm5B,UAAW1B,EAAUiC,uBAK9C1B,EAASh4B,iBAAiBh6B,KAAM6xD,EAAQ73B,kBAIxC,IAAI+K,EAASysB,EAAOmC,YAEpB,GAAK5uB,EAAO7rC,OAAS,CAEpB,IAAI06D,EAAQ7uB,EAAQ,GAEM,OAArB6uB,EAAMC,YAAmD,IAA5BD,EAAMC,WAAW36D,QAElD24D,EAAQC,OAAOqB,UAAWS,EAAMC,YAIN,OAAtBD,EAAME,aAAqD,IAA7BF,EAAME,YAAY56D,QAEpD64D,EAAQD,OAAOqB,UAAWS,EAAME,aAMlC,OAAO9B,GAIRz2D,KAAKw4D,kBAAoB,WAExB,OAAOpC,GAIRp2D,KAAKy4D,YAAc,WAEbxC,GAAUA,EAAOW,cAAeX,EAAOwC,eAU9C,SAASC,GAAiB1jC,GAEzB,IAAIgQ,KAEJ,OAECvkC,IAAK,SAAW0L,GAEf,QAA4B4C,IAAvBi2B,EAAY74B,GAEhB,OAAO64B,EAAY74B,GAIpB,IAAI0tC,EAEJ,OAAS1tC,GAER,IAAK,sBACJ0tC,EAAY7kB,EAAG2jC,aAAc,wBAA2B3jC,EAAG2jC,aAAc,4BAA+B3jC,EAAG2jC,aAAc,8BACzH,MAED,IAAK,iCACJ9e,EAAY7kB,EAAG2jC,aAAc,mCAAsC3jC,EAAG2jC,aAAc,uCAA0C3jC,EAAG2jC,aAAc,yCAC/I,MAED,IAAK,gCACJ9e,EAAY7kB,EAAG2jC,aAAc,kCAAqC3jC,EAAG2jC,aAAc,sCAAyC3jC,EAAG2jC,aAAc,wCAC7I,MAED,IAAK,iCACJ9e,EAAY7kB,EAAG2jC,aAAc,mCAAsC3jC,EAAG2jC,aAAc,yCACpF,MAED,IAAK,gCACJ9e,EAAY7kB,EAAG2jC,aAAc,iCAC7B,MAED,QACC9e,EAAY7kB,EAAG2jC,aAAcxsD,GAY/B,OARmB,OAAd0tC,GAEJp7C,QAAQ4pC,KAAM,wBAA0Bl8B,EAAO,6BAIhD64B,EAAY74B,GAAS0tC,EAEdA,IAYV,SAAS+e,KA8FR,SAASC,IAEHC,EAAQ35D,QAAU45D,IAEtBD,EAAQ35D,MAAQ45D,EAChBD,EAAQ93B,YAAcg4B,EAAkB,GAIzChwB,EAAMiwB,UAAYD,EAClBhwB,EAAMkwB,gBAAkB,EAIzB,SAASC,EAAepyB,EAAQ1J,EAAQ+7B,EAAWC,GAElD,IAAIC,EAAqB,OAAXvyB,EAAkBA,EAAOppC,OAAS,EAC/C47D,EAAW,KAEZ,GAAiB,IAAZD,EAAgB,CAIpB,GAFAC,EAAWT,EAAQ35D,OAEI,IAAlBk6D,GAAuC,OAAbE,EAAoB,CAElD,IAAIC,EAAWJ,EAAsB,EAAVE,EAC1BG,EAAap8B,EAAOmB,mBAErBk7B,EAAiBC,gBAAiBF,IAEhB,OAAbF,GAAqBA,EAAS57D,OAAS67D,KAE3CD,EAAW,IAAI9kC,aAAc+kC,IAI9B,IAAM,IAAIp8D,EAAI,EAAGw8D,EAAKR,EACjBh8D,IAAMk8D,IAAYl8D,EAAGw8D,GAAM,EAE/BC,EAAMp1D,KAAMsiC,EAAQ3pC,IAClBmhC,aAAck7B,EAAYC,GAE5BG,EAAMvzB,OAAOta,QAASutC,EAAUK,GAChCL,EAAUK,EAAK,GAAMC,EAAMtzB,SAM7BuyB,EAAQ35D,MAAQo6D,EAChBT,EAAQ93B,aAAc,EAMvB,OAFAgI,EAAMiwB,UAAYK,EAEXC,EApJR,IAAIvwB,EAAQhpC,KAEX+4D,EAAc,KACdC,EAAkB,EAClBtwB,GAAuB,EACvBoxB,GAAmB,EAEnBD,EAAQ,IAAIxzB,GACZqzB,EAAmB,IAAItzB,GAEvB0yB,GAAY35D,MAAO,KAAM6hC,aAAa,GAEvChhC,KAAK84D,QAAUA,EACf94D,KAAKi5D,UAAY,EACjBj5D,KAAKk5D,gBAAkB,EAEvBl5D,KAAK4L,KAAO,SAAUm7B,EAAQgzB,EAAqB18B,GAElD,IAAIryB,EACe,IAAlB+7B,EAAOppC,QACPo8D,GAGoB,IAApBf,GACAtwB,EAOD,OALAA,EAAuBqxB,EAEvBhB,EAAcI,EAAepyB,EAAQ1J,EAAQ,GAC7C27B,EAAkBjyB,EAAOppC,OAElBqN,GAIRhL,KAAKg6D,aAAe,WAEnBF,GAAmB,EACnBX,EAAe,OAIhBn5D,KAAKi6D,WAAa,WAEjBH,GAAmB,EACnBjB,KAID74D,KAAKk6D,SAAW,SAAUnzB,EAAQlD,EAAkBC,EAAazG,EAAQ/V,EAAO6yC,GAE/E,IAAOzxB,GACM,OAAX3B,GAAqC,IAAlBA,EAAOppC,QAC1Bm8D,IAAsBh2B,EAGlBg2B,EAGJX,EAAe,MAIfN,QAGK,CAEN,IAAIuB,EAAUN,EAAmB,EAAId,EACpCqB,EAAoB,EAAVD,EAEVb,EAAWjyC,EAAMgzC,eAAiB,KAEnCxB,EAAQ35D,MAAQo6D,EAEhBA,EAAWJ,EAAepyB,EAAQ1J,EAAQg9B,EAASF,GAEnD,IAAM,IAAI/8D,EAAI,EAAGA,IAAMi9D,IAAYj9D,EAElCm8D,EAAUn8D,GAAM27D,EAAa37D,GAI9BkqB,EAAMgzC,cAAgBf,EACtBv5D,KAAKk5D,gBAAkBr1B,EAAmB7jC,KAAKi5D,UAAY,EAC3Dj5D,KAAKi5D,WAAamB,IA8ErB,SAASG,GAAeh2B,GAoQvB,SAASi2B,IAER,OAAgC,OAAzBC,EAAgCC,GAAc,EAItD,SAASC,IAER//B,GAAMhvB,OAENgvB,GAAMjI,QAASioC,GAAgBn2D,KAAMo2D,IAAWC,eAAgBJ,KAChE9/B,GAAM/H,SAAUkoC,GAAiBt2D,KAAMu2D,IAAYF,eAAgBJ,KAIpE,SAAS36B,IAERk7B,EAAkB,KAClBC,GAAiB,KAEjBC,GAA0B,GAC1BC,IAAuB,EAEvBxgC,GAAM53B,QAqNP,SAASq4D,EAAe50D,GAEvBA,EAAM60D,iBAENv7B,IACA46B,IAEArU,GAAW/Y,QACXmK,GAAQnK,QAIT,SAASguB,EAAmB90D,GAE3B,IAAIu7B,EAAWv7B,EAAMnH,OAErB0iC,EAASh7B,oBAAqB,UAAWu0D,GAEzCC,EAAoBx5B,GAMrB,SAASw5B,EAAoBx5B,GAE5By5B,EAAiCz5B,GAEjCskB,GAAW/W,OAAQvN,GAKpB,SAASy5B,EAAiCz5B,GAEzC,IAAImkB,EAAcG,GAAW7lD,IAAKuhC,GAAW7I,QAE7C6I,EAAS7I,aAAUpqB,OAEEA,IAAhBo3C,GAEJuV,GAAatV,eAAgBD,GAQ/B,SAASwV,EAAuBr0B,EAAQnO,EAAS6I,GAEhDsF,EAAOnK,OAAQ,SAAWmK,GAEzBs0B,EAAMC,sBAAuBv0B,EAAQnO,EAAS6I,KAoGhD,SAAS85B,EAAkB5+D,EAAGsK,GAE7B,OAAO9E,KAAKoI,IAAKtD,EAAG,IAAQ9E,KAAKoI,IAAK5N,EAAG,IA0N1C,SAAS6+D,EAAuB/5B,EAAU7I,EAASsO,EAAUu0B,GAE5D,GAAKv0B,GAAYA,EAASw0B,2BAE2B,OAA/Cj3B,GAAWvkC,IAAK,0BAEpBhC,QAAQqT,MAAO,sJAJjB,MAWoB/C,IAAfitD,IAA2BA,EAAa,GAE7CphC,GAAMiD,iBAEN,IAAI8c,EAAqBlT,EAAS3L,WAE9BogC,EAAoB/iC,EAAQ8pB,gBAE5BkZ,EAAiCn6B,EAASqD,uBAE9C,IAAM,IAAIl5B,KAAQ+vD,EAAoB,CAErC,IAAIE,EAAmBF,EAAmB/vD,GAE1C,GAAKiwD,GAAoB,EAAI,CAE5B,IAAIC,EAAoB1hB,EAAoBxuC,GAE5C,QAA2B4C,IAAtBstD,EAAkC,CAEtC,IAAIxpB,EAAawpB,EAAkBxpB,WAC/BptC,EAAO42D,EAAkBzpB,SAEzB1E,EAAYpS,GAAWr7B,IAAK47D,GAE5Bt6D,EAASmsC,EAAUnsC,OACnBmD,EAAOgpC,EAAUhpC,KACjB8pC,EAAkBd,EAAUc,gBAEhC,GAAKqtB,EAAkB/sB,6BAA+B,CAErD,IAAI9uC,EAAO67D,EAAkB77D,KACzB87D,EAAS97D,EAAK87D,OACdzqC,EAASwqC,EAAkBxqC,OAE1BrxB,GAAQA,EAAK+7D,8BAEjB3hC,GAAMm5B,0BAA2BqI,EAAkB57D,EAAKwzD,uBAEpBjlD,IAA/B04B,EAASsS,oBAEbtS,EAASsS,kBAAoBv5C,EAAKwzD,iBAAmBxzD,EAAKK,QAM3D+5B,GAAMkD,gBAAiBs+B,GAIxBzxB,GAAIvQ,WAAYuQ,GAAItQ,aAAct4B,GAClC4oC,GAAI3M,oBAAqBo+B,EAAkB32D,EAAMP,EAAM2tC,EAAYypB,EAASttB,GAAmBgtB,EAAaM,EAASzqC,GAAWmd,QAI3HqtB,EAAkBG,4BAEtB5hC,GAAMm5B,0BAA2BqI,EAAkBC,EAAkBrI,uBAEjCjlD,IAA/B04B,EAASsS,oBAEbtS,EAASsS,kBAAoBsiB,EAAkBrI,iBAAmBqI,EAAkBx7D,QAMrF+5B,GAAMkD,gBAAiBs+B,GAIxBzxB,GAAIvQ,WAAYuQ,GAAItQ,aAAct4B,GAClC4oC,GAAI3M,oBAAqBo+B,EAAkB32D,EAAMP,EAAM2tC,EAAY,EAAGmpB,EAAav2D,EAAOupC,QAIrF,QAAwCjgC,IAAnCotD,EAA+C,CAE1D,IAAIh9D,EAAQg9D,EAAgChwD,GAE5C,QAAe4C,IAAV5P,EAEJ,OAASA,EAAMxB,QAEd,KAAK,EACJgtC,GAAI8xB,gBAAiBL,EAAkBj9D,GACvC,MAED,KAAK,EACJwrC,GAAI+xB,gBAAiBN,EAAkBj9D,GACvC,MAED,KAAK,EACJwrC,GAAIgyB,gBAAiBP,EAAkBj9D,GACvC,MAED,QACCwrC,GAAIiyB,gBAAiBR,EAAkBj9D,MAY7Cy7B,GAAMmD,2BAoQP,SAAS8+B,EAAev1B,EAAQjK,EAAQy/B,GAEvC,GAAOx1B,EAAOrF,QAAd,CAIA,GAFcqF,EAAOkC,OAAOp9B,KAAMixB,EAAOmM,QAIxC,GAAKlC,EAAOy1B,QAEXj6B,EAAOn8B,KAAM2gC,QAEP,GAAKA,EAAO01B,SAEX11B,EAAOuC,gBAAiBC,GAASmzB,iBAAkB31B,IAEzDrH,EAAQt5B,KAAM2gC,QAIT,GAAKA,EAAO41B,YAElB19B,EAAW74B,KAAM2gC,QAEX,GAAKA,EAAO61B,wBAEbL,GAEJM,GAASnwB,sBAAuB3F,EAAOhJ,aACrCC,aAAcsM,IAIjBwyB,EAAkB12D,KAAM2gC,EAAQ,KAAMA,EAAOtF,SAAUo7B,GAAS9qC,EAAG,WAE7D,IAAKgV,EAAOmC,QAAUnC,EAAOoC,QAAUpC,EAAOqC,YAE/CrC,EAAOc,eAEXd,EAAOkc,SAASxZ,UAIV1C,EAAOuC,eAAiBC,GAASC,iBAAkBzC,IAAW,CAE/Dw1B,GAEJM,GAASnwB,sBAAuB3F,EAAOhJ,aACrCC,aAAcsM,IAIjB,IAAIpD,EAAWiQ,GAAQ1N,OAAQ1C,GAC3BtF,EAAWsF,EAAOtF,SAEtB,GAAK32B,MAAMgX,QAAS2f,GAInB,IAAM,IAFFiI,EAASxC,EAASwC,OAEZ7sC,EAAI,EAAGI,EAAIysC,EAAOtsC,OAAQP,EAAII,EAAGJ,IAAO,CAEjD,IAAIgtC,EAAQH,EAAQ7sC,GAChBitC,EAAgBrI,EAAUoI,EAAME,eAE/BD,GAAiBA,EAAcpI,SAEnCo7B,EAAkB12D,KAAM2gC,EAAQG,EAAU4C,EAAe+yB,GAAS9qC,EAAG8X,QAM5DpI,EAASC,SAEpBo7B,EAAkB12D,KAAM2gC,EAAQG,EAAUzF,EAAUo7B,GAAS9qC,EAAG,MAYpE,IAAM,IAFFoY,EAAWpD,EAAOoD,SAEZttC,EAAI,EAAGI,EAAIktC,EAAS/sC,OAAQP,EAAII,EAAGJ,IAE5Cy/D,EAAenyB,EAAUttC,GAAKigC,EAAQy/B,IAMxC,SAASQ,EAAeC,EAAYngC,EAAOC,EAAQmgC,GAElD,IAAM,IAAIpgE,EAAI,EAAGI,EAAI+/D,EAAW5/D,OAAQP,EAAII,EAAGJ,IAAO,CAErD,IAAI67C,EAAaskB,EAAYngE,GAEzBkqC,EAAS2R,EAAW3R,OACpBG,EAAWwR,EAAWxR,SACtBzF,OAAgCjzB,IAArByuD,EAAiCvkB,EAAWjX,SAAWw7B,EAClEpzB,EAAQ6O,EAAW7O,MAEvB,GAAK/M,EAAOogC,cAAgB,CAE3BC,GAAsBrgC,EAItB,IAAM,IAFF04B,EAAU14B,EAAO04B,QAEX5rD,EAAI,EAAGo1B,EAAKw2B,EAAQp4D,OAAQwM,EAAIo1B,EAAIp1B,IAAO,CAEpD,IAAIwzD,EAAU5H,EAAS5rD,GAEvB,GAAKm9B,EAAOkC,OAAOp9B,KAAMuxD,EAAQn0B,QAAW,CAE3C,IAAI+sB,EAASoH,EAAQpH,OAEjB/lC,EAAI+lC,EAAO/lC,EAAIotC,GACfx6C,EAAImzC,EAAOnzC,EAAIy6C,GACfprC,EAAQ8jC,EAAOjkC,EAAIsrC,GACnBlrC,EAAS6jC,EAAOhkC,EAAIsrC,GAExBjC,EAAMkC,YAAattC,EAAGpN,EAAGqP,EAAOC,GAChCkpC,EAAMmC,WAAYvtC,EAAGpN,EAAGqP,EAAOC,GAC/BkpC,EAAMzvB,gBAAgB,GAEtB7C,EAAchC,EAAQlK,EAAOugC,EAASl2B,EAAUzF,EAAUoI,UAQ5DszB,GAAsB,KAEtBp0B,EAAchC,EAAQlK,EAAOC,EAAQoK,EAAUzF,EAAUoI,IAQ5D,SAASd,EAAchC,EAAQlK,EAAOC,EAAQoK,EAAUzF,EAAUoI,GAOjE,GALA9C,EAAOlH,gBAAgB0B,iBAAkBzE,EAAOmB,mBAAoB8I,EAAOhJ,aAC3EgJ,EAAOiJ,aAAaopB,gBAAiBryB,EAAOlH,iBAE5CkH,EAAOpF,eAAgB05B,EAAOx+B,EAAOC,EAAQoK,EAAUzF,EAAUoI,GAE5D9C,EAAO61B,wBAA0B,CAErCviC,GAAMw5B,YAAapyB,GAEnB,IAAI7I,EAAU6kC,EAAY3gC,EAAQD,EAAMoE,IAAKQ,EAAUsF,GAEvD6zB,GAA0B,GAE1BQ,EAAuBr0B,EAAQnO,EAAS6I,QAIxC45B,EAAMnxB,mBAAoBpN,EAAQD,EAAMoE,IAAKiG,EAAUzF,EAAUsF,EAAQ8C,GAI1E9C,EAAO3E,cAAei5B,EAAOx+B,EAAOC,EAAQoK,EAAUzF,EAAUoI,GAIjE,SAAS6zB,EAAcj8B,EAAUR,EAAK8F,GAErC,IAAI42B,EAAqB5X,GAAW7lD,IAAKuhC,GAErCuC,EAAam3B,GAAa9W,cAC7B5iB,EAAUkF,GAAS1F,EAAK28B,GAAUlF,UAAWkF,GAAUjF,gBAAiB5xB,GAErE/pC,EAAOm+D,GAAa3V,eAAgB/jB,EAAUuC,GAE9CpL,EAAU+kC,EAAmB/kC,QAC7BilC,GAAgB,EAEpB,QAAiBrvD,IAAZoqB,EAGJ6I,EAASx7B,iBAAkB,UAAW+0D,QAEhC,GAAKpiC,EAAQ57B,OAASA,EAG5Bk+D,EAAiCz5B,OAE3B,CAAA,QAA6BjzB,IAAxBw1B,EAAWwgB,SAGtB,OAKAqZ,GAAgB,EAIjB,GAAKA,EAAgB,CAEpB,GAAK75B,EAAWwgB,SAAW,CAE1B,IAAIrpB,EAASiQ,GAAWpH,EAAWwgB,UAEnCmZ,EAAmBxiC,QAClBvvB,KAAM61B,EAAS98B,KACfg3B,SAAU2P,GAAcj8B,MAAO8rB,EAAOQ,UACtCP,aAAcD,EAAOC,aACrBC,eAAgBF,EAAOE,qBAKxBsiC,EAAmBxiC,QAClBvvB,KAAM61B,EAAS98B,KACfg3B,SAAU8F,EAAS9F,SACnBP,aAAcqG,EAASrG,aACvBC,eAAgBoG,EAASpG,gBAK3BoG,EAASgkB,gBAAiBkY,EAAmBxiC,QAE7CvC,EAAUuiC,GAAazV,eAAgBjkB,EAAUk8B,EAAmBxiC,OAAQ6I,EAAYhnC,GAExF2gE,EAAmB/kC,QAAUA,EAC7B6I,EAAS7I,QAAUA,EAIpB,IAAI+iC,EAAoB/iC,EAAQ8pB,gBAEhC,GAAKjhB,EAAS8C,aAAe,CAE5B9C,EAASq8B,yBAA2B,EAEpC,IAAUjhE,EAAI,EAAGA,EAAIw+D,EAAMpW,gBAAiBpoD,IAEtC8+D,EAAmB,cAAgB9+D,IAAO,GAE9C4kC,EAASq8B,2BAQZ,GAAKr8B,EAAS+C,aAAe,CAE5B/C,EAASs8B,yBAA2B,EAEpC,IAAM,IAAIlhE,EAAI,EAAGA,EAAIw+D,EAAMnW,gBAAiBroD,IAEtC8+D,EAAmB,cAAgB9+D,IAAO,GAE9C4kC,EAASs8B,2BAQZ,IAAIpiC,EAAWgiC,EAAmBxiC,OAAOQ,UAElC8F,EAAS6f,kBACb7f,EAASue,uBACW,IAAtBve,EAAS4C,WAETs5B,EAAmBhd,kBAAoBid,GAAUlF,UACjDiF,EAAmBhF,gBAAkBiF,GAAUjF,gBAC/Ch9B,EAAS0H,eAAiBu6B,GAAUrF,SAIrCoF,EAAmB18B,IAAMA,EAIzB08B,EAAmBK,WAAar3B,GAAQr8B,KAEnCm3B,EAASc,SAIb5G,EAASsiC,kBAAkBr/D,MAAQ+nC,GAAQu3B,QAC3CviC,EAASwiC,kBAAkBv/D,MAAQ+nC,GAAQwe,YAC3CxpB,EAASyiC,WAAWx/D,MAAQ+nC,GAAQ0e,KACpC1pB,EAAS0iC,eAAez/D,MAAQ+nC,GAAQ2e,SACxC3pB,EAAS2iC,YAAY1/D,MAAQ+nC,GAAQye,MACrCzpB,EAAS4iC,iBAAiB3/D,MAAQ+nC,GAAQ4e,KAE1C5pB,EAAS6iC,qBAAqB5/D,MAAQ+nC,GAAQ63B,qBAC9C7iC,EAAS8iC,wBAAwB7/D,MAAQ+nC,GAAQ83B,wBACjD9iC,EAAS+iC,cAAc9/D,MAAQ+nC,GAAQ+3B,cACvC/iC,EAASgjC,iBAAiB//D,MAAQ+nC,GAAQg4B,iBAC1ChjC,EAASijC,eAAehgE,MAAQ+nC,GAAQi4B,eACxCjjC,EAASkjC,kBAAkBjgE,MAAQ+nC,GAAQk4B,mBAK5C,IAAIC,EAAenB,EAAmB/kC,QAAQ4pB,cAC7Cuc,EACCpmC,EAAcqmC,aAAcF,EAAalrC,IAAK+H,GAEhDgiC,EAAmBoB,aAAeA,EAInC,SAAStB,EAAY3gC,EAAQmE,EAAKQ,EAAUsF,GAE3Ck4B,GAAoB,EAEpB,IAAItB,EAAqB5X,GAAW7lD,IAAKuhC,GAEzC,GAAKy9B,KAECC,IAAyBriC,IAAW69B,IAAiB,CAEzD,IAAIyE,EACHtiC,IAAW69B,IACXl5B,EAAS3yB,KAAO+rD,GAKjB+C,GAAUjE,SACTl4B,EAAS4B,eAAgB5B,EAAS6B,iBAAkB7B,EAAS8B,YAC7DzG,EAAQ6gC,EAAoByB,IAMD,IAAzB39B,EAAShB,mBAEuBjyB,IAA/BmvD,EAAmB/kC,QAEvB6I,EAAShB,aAAc,EAEZgB,EAASR,KAAO08B,EAAmB18B,MAAQA,EAEtDQ,EAAShB,aAAc,EAEZgB,EAASc,QAAUo7B,EAAmBK,aAAer3B,GAAQr8B,KAExEm3B,EAAShB,aAAc,OAE6BjyB,IAAzCmvD,EAAmBhd,mBAC5Bgd,EAAmBhd,oBAAsBid,GAAUlF,WACrDiF,EAAmBhF,kBAAoBiF,GAAUjF,kBAEjDl3B,EAAShB,aAAc,IAMpBgB,EAAShB,cAEbi9B,EAAcj8B,EAAUR,EAAK8F,GAC7BtF,EAAShB,aAAc,GAIxB,IAAI4+B,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,EAEhB3mC,EAAU+kC,EAAmB/kC,QAChC4mC,EAAa5mC,EAAQ4pB,cACrBid,EAAa9B,EAAmBxiC,OAAOQ,SAqBxC,GAnBK/C,EAAQ9pB,KAAO4rD,IAEnBtwB,GAAI/M,WAAYzE,EAAQA,SACxB8hC,EAAkB9hC,EAAQ9pB,GAE1BuwD,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,GAIZ99B,EAAS3yB,KAAO+rD,KAEpBA,GAAqBp5B,EAAS3yB,GAE9BwwD,GAAkB,GAIdD,GAAkBviC,IAAW69B,GAAiB,CA6BlD,GA3BA6E,EAAW1nC,SAAUsS,GAAK,mBAAoBtN,EAAOoB,kBAEhD2I,GAAawW,wBAEjBmiB,EAAW1nC,SAAUsS,GAAK,gBACzB,GAAQjoC,KAAKhE,IAAK2+B,EAAOsE,IAAM,GAAQj/B,KAAKu9D,MAMzC/E,MAAqBwC,IAAuBrgC,KAEhD69B,GAAmBwC,IAAuBrgC,EAM1CwiC,GAAkB,EAClBC,GAAgB,GAOZ99B,EAAS6f,kBACb7f,EAASk+B,qBACTl+B,EAASm+B,wBACTn+B,EAASyU,OAAS,CAElB,IAAI2pB,EAAUL,EAAW1jD,IAAIgkD,oBAEZtxD,IAAZqxD,GAEJA,EAAQ/nC,SAAUsS,GACjByyB,GAASnwB,sBAAuB5P,EAAOiB,eAMrC0D,EAASk+B,qBACbl+B,EAASs+B,uBACTt+B,EAASu+B,qBACTv+B,EAASm+B,wBACTn+B,EAAS6f,kBACT7f,EAAS6C,WAETk7B,EAAW1nC,SAAUsS,GAAK,aAActN,EAAOmB,oBAUjD,GAAKwD,EAAS6C,SAAW,CAExBk7B,EAAWS,YAAa71B,GAAKrD,EAAQ,cACrCy4B,EAAWS,YAAa71B,GAAKrD,EAAQ,qBAErC,IAAIkc,EAAWlc,EAAOkc,SAEtB,GAAKA,EAAW,CAEf,IAAID,EAAQC,EAASD,MAErB,GAAKnc,GAAaqc,oBAAsB,CAEvC,QAA8B10C,IAAzBy0C,EAASid,YAA4B,CAUzC,IAAIh7D,EAAO/C,KAAKg+D,KAAqB,EAAfnd,EAAM5lD,QAC5B8H,EAAO0rB,GAAMwvC,eAAgBj+D,KAAKkhB,KAAMne,IACxCA,EAAO/C,KAAKL,IAAKoD,EAAM,GAEvB,IAAIm7D,EAAe,IAAInsC,aAAchvB,EAAOA,EAAO,GACnDm7D,EAAal8D,IAAK8+C,EAASod,cAE3B,IAAIH,EAAc,IAAI5sC,EAAa+sC,EAAcn7D,EAAMA,EAAMksB,GAAYk3B,IAEzErF,EAASod,aAAeA,EACxBpd,EAASid,YAAcA,EACvBjd,EAASqd,gBAAkBp7D,EAI5Bs6D,EAAW1nC,SAAUsS,GAAK,cAAe6Y,EAASid,aAClDV,EAAW1nC,SAAUsS,GAAK,kBAAmB6Y,EAASqd,sBAItDd,EAAWS,YAAa71B,GAAK6Y,EAAU,iBAoH1C,OA5GKqc,IAEJE,EAAW1nC,SAAUsS,GAAK,sBAAuBixB,EAAMkF,qBACvDf,EAAW1nC,SAAUsS,GAAK,wBAAyBixB,EAAMmF,uBAEpD/+B,EAASc,QAWbk+B,EAA+BhB,EAAYF,GAMvCt+B,GAAOQ,EAASR,KAEpBy/B,EAAoBjB,EAAYx+B,IAI5BQ,EAASu+B,qBACbv+B,EAASs+B,uBACTt+B,EAASk+B,qBACTl+B,EAASm+B,wBACTn+B,EAASk/B,sBACTl/B,EAASm/B,sBAETC,EAAuBpB,EAAYh+B,GAM/BA,EAASq/B,oBAEbC,EAAqBtB,EAAYh+B,GAEtBA,EAASu/B,sBAEpBD,EAAqBtB,EAAYh+B,GACjCw/B,EAAqBxB,EAAYh+B,IAEtBA,EAASy/B,iBAEpBC,EAAuB1B,EAAYh+B,GAExBA,EAASs+B,sBAEpBqB,EAAwB3B,EAAYh+B,GAEzBA,EAAS4/B,mBAEpBC,EAAqB7B,EAAYh+B,GAEtBA,EAASk+B,oBAEpB4B,EAAsB9B,EAAYh+B,GAEvBA,EAAS+/B,uBAEpBC,EAAyBhC,EAAYh+B,GAE1BA,EAASm+B,uBAEpB8B,EAAyBjC,EAAYh+B,GAE1BA,EAASm/B,oBAEfn/B,EAAS6D,kBAEbm6B,EAAWn6B,gBAAgB1mC,MAAQ6iC,EAAS6D,gBAC5Cm6B,EAAWl6B,kBAAkB3mC,MAAQ6iC,EAAS8D,kBAC9Ck6B,EAAWj6B,iBAAiB5mC,MAAQ6iC,EAAS+D,kBAInC/D,EAASk/B,sBAEpBgB,EAAuBlC,EAAYh+B,QAOTjzB,IAAtBixD,EAAWmC,SAAuBnC,EAAWmC,OAAOhjE,MAAQijE,GAAYC,sBAClDtzD,IAAtBixD,EAAWsC,SAAuBtC,EAAWsC,OAAOnjE,MAAQijE,GAAYG,iBAE7ErpC,EAAcspC,OACb73B,GAAKuzB,EAAmBoB,aAAcU,EAAYpE,IAOpDmE,EAAW1nC,SAAUsS,GAAK,kBAAmBrD,EAAOlH,iBACpD2/B,EAAW1nC,SAAUsS,GAAK,eAAgBrD,EAAOiJ,cACjDwvB,EAAW1nC,SAAUsS,GAAK,cAAerD,EAAOhJ,aAEzCnF,EAMR,SAASioC,EAAuBllC,EAAU8F,GAEzC9F,EAASG,QAAQl9B,MAAQ6iC,EAAS3F,QAElCH,EAASumC,QAAQtjE,MAAQ6iC,EAASx5B,MAE7Bw5B,EAAS0gC,UAEbxmC,EAASwmC,SAASvjE,MAAMsF,KAAMu9B,EAAS0gC,UAAW5H,eAAgB94B,EAAS2gC,mBAI5EzmC,EAAS7f,IAAIld,MAAQ6iC,EAAS3lB,IAC9B6f,EAASsa,YAAYr3C,MAAQ6iC,EAASwU,YACtCta,EAAS0J,SAASzmC,MAAQ6iC,EAAS4D,SAE9B5D,EAASoU,WAEbla,EAASka,SAASj3C,MAAQ6iC,EAASoU,SACnCla,EAASma,kBAAkBl3C,MAAQ6iC,EAASqU,mBAIxCrU,EAASsU,QAEbpa,EAASoa,MAAMn3C,MAAQ6iC,EAASsU,MAChCpa,EAASqa,eAAep3C,MAAQ6iC,EAASuU,gBAY1C,IAAIqsB,EAwCJ,GAtCK5gC,EAAS3lB,IAEbumD,EAAa5gC,EAAS3lB,IAEX2lB,EAASwU,YAEpBosB,EAAa5gC,EAASwU,YAEXxU,EAAS6D,gBAEpB+8B,EAAa5gC,EAAS6D,gBAEX7D,EAAS0b,UAEpBklB,EAAa5gC,EAAS0b,UAEX1b,EAASyb,QAEpBmlB,EAAa5gC,EAASyb,QAEXzb,EAAS6e,aAEpB+hB,EAAa5gC,EAAS6e,aAEX7e,EAAS8e,aAEpB8hB,EAAa5gC,EAAS8e,aAEX9e,EAAS4D,SAEpBg9B,EAAa5gC,EAAS4D,SAEX5D,EAAS4e,cAEpBgiB,EAAa5gC,EAAS4e,kBAIH7xC,IAAf6zD,EAA2B,CAG1BA,EAAW7e,sBAEf6e,EAAaA,EAAW9vC,SAIzB,IAAIjB,EAAS+wC,EAAW/wC,OACpBC,EAAS8wC,EAAW9wC,OAExBoK,EAAS2mC,aAAa1jE,MAAMuF,IAAKmtB,EAAOrB,EAAGqB,EAAOzO,EAAG0O,EAAOtB,EAAGsB,EAAO1O,GAIvE8Y,EAASua,OAAOt3C,MAAQ6iC,EAASyU,OAMjCva,EAAS4mC,WAAW3jE,MAAc6iC,EAASyU,QAAUzU,EAASyU,OAAO8B,eAA0B,EAAN,EAEzFrc,EAAS0a,aAAaz3C,MAAQ6iC,EAAS4U,aACvC1a,EAAS2a,gBAAgB13C,MAAQ6iC,EAAS6U,gBAI3C,SAASyqB,EAAqBplC,EAAU8F,GAEvC9F,EAASumC,QAAQtjE,MAAQ6iC,EAASx5B,MAClC0zB,EAASG,QAAQl9B,MAAQ6iC,EAAS3F,QAInC,SAASmlC,EAAqBtlC,EAAU8F,GAEvC9F,EAAS6mC,SAAS5jE,MAAQ6iC,EAAS+gC,SACnC7mC,EAAS8mC,UAAU7jE,MAAQ6iC,EAAS+gC,SAAW/gC,EAASihC,QACxD/mC,EAASI,MAAMn9B,MAAQ6iC,EAAS1F,MAIjC,SAASolC,EAAuBxlC,EAAU8F,GASzC,GAPA9F,EAASumC,QAAQtjE,MAAQ6iC,EAASx5B,MAClC0zB,EAASG,QAAQl9B,MAAQ6iC,EAAS3F,QAClCH,EAASz2B,KAAKtG,MAAQ6iC,EAASv8B,KAAOi1D,GACtCx+B,EAASI,MAAMn9B,MAAkB,GAAV0+D,GAEvB3hC,EAAS7f,IAAIld,MAAQ6iC,EAAS3lB,IAER,OAAjB2lB,EAAS3lB,IAAe,CAE5B,IAAIwV,EAASmQ,EAAS3lB,IAAIwV,OACtBC,EAASkQ,EAAS3lB,IAAIyV,OAE1BoK,EAAS2mC,aAAa1jE,MAAMuF,IAAKmtB,EAAOrB,EAAGqB,EAAOzO,EAAG0O,EAAOtB,EAAGsB,EAAO1O,IAMxE,SAAS69C,EAAoB/kC,EAAUsF,GAEtCtF,EAASuE,SAASthC,MAAQqiC,EAAIh5B,MAEzBg5B,EAAIC,OAERvF,EAASqE,QAAQphC,MAAQqiC,EAAIE,KAC7BxF,EAASsE,OAAOrhC,MAAQqiC,EAAIG,KAEjBH,EAAII,YAEf1F,EAASoE,WAAWnhC,MAAQqiC,EAAIK,SAMlC,SAAS8/B,EAAwBzlC,EAAU8F,GAErCA,EAAS4e,cAEb1kB,EAAS0kB,YAAYzhD,MAAQ6iC,EAAS4e,aAMxC,SAASkhB,EAAsB5lC,EAAU8F,GAExC9F,EAASgnC,SAAS/jE,MAAQ6iC,EAASkhC,SACnChnC,EAASinC,UAAUhkE,MAAQuD,KAAKL,IAAK2/B,EAASmhC,UAAW,MAEpDnhC,EAAS4e,cAEb1kB,EAAS0kB,YAAYzhD,MAAQ6iC,EAAS4e,aAIlC5e,EAASyb,UAEbvhB,EAASuhB,QAAQt+C,MAAQ6iC,EAASyb,QAClCvhB,EAASknC,UAAUjkE,MAAQ6iC,EAASohC,WAIhCphC,EAAS0b,YAEbxhB,EAASwhB,UAAUv+C,MAAQ6iC,EAAS0b,UACpCxhB,EAASmnC,YAAYlkE,MAAMsF,KAAMu9B,EAASqhC,cAItCrhC,EAAS6D,kBAEb3J,EAAS2J,gBAAgB1mC,MAAQ6iC,EAAS6D,gBAC1C3J,EAAS4J,kBAAkB3mC,MAAQ6iC,EAAS8D,kBAC5C5J,EAAS6J,iBAAiB5mC,MAAQ6iC,EAAS+D,kBAM7C,SAAS87B,EAAqB3lC,EAAU8F,GAEvC8/B,EAAsB5lC,EAAU8F,GAE3BA,EAASqf,cAEbnlB,EAASmlB,YAAYliD,MAAQ6iC,EAASqf,aAMxC,SAAS4gB,EAAyB/lC,EAAU8F,GAE3C9F,EAASonC,UAAUnkE,MAAQ6iC,EAASshC,UACpCpnC,EAASqnC,UAAUpkE,MAAQ6iC,EAASuhC,UAE/BvhC,EAAS6e,eAEb3kB,EAAS2kB,aAAa1hD,MAAQ6iC,EAAS6e,cAInC7e,EAAS8e,eAEb5kB,EAAS4kB,aAAa3hD,MAAQ6iC,EAAS8e,cAInC9e,EAAS4e,cAEb1kB,EAAS0kB,YAAYzhD,MAAQ6iC,EAAS4e,aAIlC5e,EAASyb,UAEbvhB,EAASuhB,QAAQt+C,MAAQ6iC,EAASyb,QAClCvhB,EAASknC,UAAUjkE,MAAQ6iC,EAASohC,WAIhCphC,EAAS0b,YAEbxhB,EAASwhB,UAAUv+C,MAAQ6iC,EAAS0b,UACpCxhB,EAASmnC,YAAYlkE,MAAMsF,KAAMu9B,EAASqhC,cAItCrhC,EAAS6D,kBAEb3J,EAAS2J,gBAAgB1mC,MAAQ6iC,EAAS6D,gBAC1C3J,EAAS4J,kBAAkB3mC,MAAQ6iC,EAAS8D,kBAC5C5J,EAAS6J,iBAAiB5mC,MAAQ6iC,EAAS+D,kBAIvC/D,EAASyU,SAGbva,EAASsnC,gBAAgBrkE,MAAQ6iC,EAASwhC,iBAM5C,SAASxB,EAAyB9lC,EAAU8F,GAE3C9F,EAASunC,UAAUtkE,MAAQ6iC,EAASyhC,UACpCvnC,EAASwnC,mBAAmBvkE,MAAQ6iC,EAAS0hC,mBAE7CzB,EAAyB/lC,EAAU8F,GAIpC,SAASkgC,EAAuBhmC,EAAU8F,GAEpCA,EAASyb,UAEbvhB,EAASuhB,QAAQt+C,MAAQ6iC,EAASyb,QAClCvhB,EAASknC,UAAUjkE,MAAQ6iC,EAASohC,WAIhCphC,EAAS0b,YAEbxhB,EAASwhB,UAAUv+C,MAAQ6iC,EAAS0b,UACpCxhB,EAASmnC,YAAYlkE,MAAMsF,KAAMu9B,EAASqhC,cAItCrhC,EAAS6D,kBAEb3J,EAAS2J,gBAAgB1mC,MAAQ6iC,EAAS6D,gBAC1C3J,EAAS4J,kBAAkB3mC,MAAQ6iC,EAAS8D,kBAC5C5J,EAAS6J,iBAAiB5mC,MAAQ6iC,EAAS+D,kBAQ7C,SAASi7B,EAA+B9kC,EAAU/8B,GAEjD+8B,EAASsiC,kBAAkBx9B,YAAc7hC,EAEzC+8B,EAASwiC,kBAAkB19B,YAAc7hC,EACzC+8B,EAAS2iC,YAAY79B,YAAc7hC,EACnC+8B,EAASyiC,WAAW39B,YAAc7hC,EAClC+8B,EAAS0iC,eAAe59B,YAAc7hC,EACtC+8B,EAAS4iC,iBAAiB99B,YAAc7hC,EAMzC,SAASwkE,EAAc7gC,GAItB,IAAM,IAFF8gC,EAAqB,EAEfxmE,EAAI,EAAGI,EAAIslC,EAAOnlC,OAAQP,EAAII,EAAGJ,IAAO,CAEjD,IAAIkvC,EAAQxJ,EAAQ1lC,GAEfkvC,EAAM1C,aAEV1C,GAAQ6D,QAAS64B,GAAuBt3B,EACxCs3B,KAMF18B,GAAQ6D,QAAQptC,OAASimE,EAI1B,SAASC,EAAa/gC,EAAQzF,GAE7B,IAAI7/B,EAAGsmE,EAAIx3B,EAAOC,EAEjB/jC,EACAu7D,EACA7oB,EACApO,EAJAhwC,EAAI,EAAG44B,EAAI,EAAGluB,EAAI,EAMlBiyD,EAAap8B,EAAOmB,mBAEpBwlC,EAAoB,EACpBC,EAAc,EACdC,EAAa,EACbC,EAAiB,EACjBC,EAAa,EAEd,IAAM5mE,EAAI,EAAGsmE,EAAKhhC,EAAOnlC,OAAQH,EAAIsmE,EAAItmE,IAUxC,GARA8uC,EAAQxJ,EAAQtlC,GAEhBgL,EAAQ8jC,EAAM9jC,MACdu7D,EAAYz3B,EAAMy3B,UAClB7oB,EAAW5O,EAAM4O,SAEjBpO,EAAcR,EAAMC,QAAUD,EAAMC,OAAOlwB,IAAQiwB,EAAMC,OAAOlwB,IAAIyW,QAAU,KAEzEwZ,EAAM+3B,eAEVvnE,GAAK0L,EAAM1L,EAAIinE,EACfruC,GAAKltB,EAAMktB,EAAIquC,EACfv8D,GAAKgB,EAAMhB,EAAIu8D,OAET,GAAKz3B,EAAMg4B,oBAEbpoC,EAAWqoC,GAAW9jE,IAAK6rC,IAEtB9jC,MAAM/D,KAAM6nC,EAAM9jC,OAAQsyD,eAAgBxuB,EAAMy3B,WACzD7nC,EAASgb,UAAUjK,sBAAuBX,EAAMhO,aAChD8+B,GAASnwB,sBAAuBX,EAAMhtC,OAAOg/B,aAC7CpC,EAASgb,UAAUstB,IAAKpH,IACxBlhC,EAASgb,UAAUutB,mBAAoBhL,GAEvCv9B,EAASqQ,OAASD,EAAM1C,WAEnB0C,EAAM1C,aAEV2C,EAASD,EAAMC,OAEfrQ,EAAS6e,WAAaxO,EAAOm4B,KAC7BxoC,EAAS8e,aAAezO,EAAOpG,OAC/BjK,EAAS+e,cAAgB1O,EAAOC,SAIjCtF,GAAQ63B,qBAAsBiF,GAAsBl3B,EACpD5F,GAAQ83B,wBAAyBgF,GAAsB13B,EAAMC,OAAOS,OACpE9F,GAAQwe,YAAase,GAAsB9nC,EAE3C8nC,SAEM,GAAK13B,EAAMq4B,aAEbzoC,EAAWqoC,GAAW9jE,IAAK6rC,IAEtB31B,SAASs2B,sBAAuBX,EAAMhO,aAC/CpC,EAASvlB,SAAS4nB,aAAck7B,GAEhCv9B,EAAS1zB,MAAM/D,KAAM+D,GAAQsyD,eAAgBiJ,GAC7C7nC,EAASgf,SAAWA,EAEpBhf,EAASgb,UAAUjK,sBAAuBX,EAAMhO,aAChD8+B,GAASnwB,sBAAuBX,EAAMhtC,OAAOg/B,aAC7CpC,EAASgb,UAAUstB,IAAKpH,IACxBlhC,EAASgb,UAAUutB,mBAAoBhL,GAEvCv9B,EAASif,QAAUz4C,KAAKkiE,IAAKt4B,EAAMu4B,OACnC3oC,EAASkf,YAAc14C,KAAKkiE,IAAKt4B,EAAMu4B,OAAU,EAAIv4B,EAAMw4B,WAC3D5oC,EAASmf,MAA6B,IAAnB/O,EAAM4O,SAAmB,EAAM5O,EAAM+O,MAExDnf,EAASqQ,OAASD,EAAM1C,WAEnB0C,EAAM1C,aAEV2C,EAASD,EAAMC,OAEfrQ,EAAS6e,WAAaxO,EAAOm4B,KAC7BxoC,EAAS8e,aAAezO,EAAOpG,OAC/BjK,EAAS+e,cAAgB1O,EAAOC,SAIjCtF,GAAQ+3B,cAAeiF,GAAep3B,EACtC5F,GAAQg4B,iBAAkBgF,GAAe53B,EAAMC,OAAOS,OACtD9F,GAAQ0e,KAAMse,GAAehoC,EAE7BgoC,SAEM,GAAK53B,EAAMy4B,iBAEb7oC,EAAWqoC,GAAW9jE,IAAK6rC,IAGtB9jC,MACP/D,KAAM+D,GACNsyD,eAAgBiJ,GAAcz3B,EAAM7Z,MAAQ6Z,EAAM5Z,SAKpDwJ,EAASvlB,SAASs2B,sBAAuBX,EAAMhO,aAC/CpC,EAASvlB,SAAS4nB,aAAck7B,GAGhCuL,GAAUC,WACVC,GAASzgE,KAAM6nC,EAAMhO,aACrB4mC,GAASC,YAAa1L,GACtBuL,GAAUvsB,gBAAiBysB,IAE3BhpC,EAASsf,UAAU92C,IAAmB,GAAd4nC,EAAM7Z,MAA4B,EAAK,GAC/DyJ,EAASuf,WAAW/2C,IAAkB,EAAoB,GAAf4nC,EAAM5Z,OAAc,GAE/DwJ,EAASsf,UAAUjd,aAAcymC,IACjC9oC,EAASuf,WAAWld,aAAcymC,IAKlC99B,GAAQ2e,SAAUse,GAAmBjoC,EAErCioC,SAEM,GAAK73B,EAAM/E,cAEbrL,EAAWqoC,GAAW9jE,IAAK6rC,IAEtB31B,SAASs2B,sBAAuBX,EAAMhO,aAC/CpC,EAASvlB,SAAS4nB,aAAck7B,GAEhCv9B,EAAS1zB,MAAM/D,KAAM6nC,EAAM9jC,OAAQsyD,eAAgBxuB,EAAMy3B,WACzD7nC,EAASgf,SAAW5O,EAAM4O,SAC1Bhf,EAASmf,MAA6B,IAAnB/O,EAAM4O,SAAmB,EAAM5O,EAAM+O,MAExDnf,EAASqQ,OAASD,EAAM1C,WAEnB0C,EAAM1C,aAEV2C,EAASD,EAAMC,OAEfrQ,EAAS6e,WAAaxO,EAAOm4B,KAC7BxoC,EAAS8e,aAAezO,EAAOpG,OAC/BjK,EAAS+e,cAAgB1O,EAAOC,SAIjCtF,GAAQi4B,eAAgB8E,GAAgBn3B,EACxC5F,GAAQk4B,kBAAmB6E,GAAgB33B,EAAMC,OAAOS,OACxD9F,GAAQye,MAAOse,GAAgB/nC,EAE/B+nC,SAEM,GAAK33B,EAAM84B,kBAAoB,CAErC,IAAIlpC,EAAWqoC,GAAW9jE,IAAK6rC,GAE/BpQ,EAASgb,UAAUjK,sBAAuBX,EAAMhO,aAChDpC,EAASgb,UAAUutB,mBAAoBhL,GACvCv9B,EAASgb,UAAUmuB,YAEnBnpC,EAASof,SAAS72C,KAAM6nC,EAAM9jC,OAAQsyD,eAAgBiJ,GACtD7nC,EAASqf,YAAY92C,KAAM6nC,EAAMiP,aAAcuf,eAAgBiJ,GAE/D78B,GAAQ4e,KAAMse,GAAeloC,EAE7BkoC,IAMFl9B,GAAQu3B,QAAS,GAAM3hE,EACvBoqC,GAAQu3B,QAAS,GAAM/oC,EACvBwR,GAAQu3B,QAAS,GAAMj3D,EAEvB0/B,GAAQwe,YAAY/nD,OAASqmE,EAC7B98B,GAAQ0e,KAAKjoD,OAASumE,EACtBh9B,GAAQ2e,SAASloD,OAASwmE,EAC1Bj9B,GAAQye,MAAMhoD,OAASsmE,EACvB/8B,GAAQ4e,KAAKnoD,OAASymE,EAGtBl9B,GAAQr8B,KAAOm5D,EAAoB,IAAMC,EAAc,IAAMC,EAAa,IAAMC,EAAiB,IAAMC,EAAa,IAAMl9B,GAAQ6D,QAAQptC,OA4Q3I,SAAS4oD,EAAgBriD,GAExB,IAAI21C,EAEJ,GAAK31C,IAAMohE,GAAiB,OAAO36B,GAAI46B,OACvC,GAAKrhE,IAAMstB,GAAsB,OAAOmZ,GAAIvP,cAC5C,GAAKl3B,IAAMshE,GAAyB,OAAO76B,GAAI86B,gBAE/C,GAAKvhE,IAAM4vB,GAAgB,OAAO6W,GAAIpP,QACtC,GAAKr3B,IAAMijD,GAA6B,OAAOxc,GAAI+6B,uBACnD,GAAKxhE,IAAMkjD,GAA4B,OAAOzc,GAAIg7B,sBAElD,GAAKzhE,IAAMutB,GAAe,OAAOkZ,GAAI0c,OACrC,GAAKnjD,IAAM0hE,GAA4B,OAAOj7B,GAAIk7B,sBAClD,GAAK3hE,IAAMwtB,GAA2B,OAAOiZ,GAAIm7B,qBAEjD,GAAK5hE,IAAM0tB,GAAmB,OAAO+Y,GAAI1P,cACzC,GAAK/2B,IAAM6hE,GAAwB,OAAOp7B,GAAIq7B,uBAC9C,GAAK9hE,IAAM+hE,GAAwB,OAAOt7B,GAAIu7B,uBAC9C,GAAKhiE,IAAMiiE,GAAuB,OAAOx7B,GAAIy7B,qBAE7C,GAAKliE,IAAMmiE,GAAW,OAAO17B,GAAIoE,KACjC,GAAK7qC,IAAMoiE,GAAY,OAAO37B,GAAI+D,MAClC,GAAKxqC,IAAM+lD,GAAoB,OAAOtf,GAAIxL,eAC1C,GAAKj7B,IAAMqiE,GAAU,OAAO57B,GAAIkE,IAChC,GAAK3qC,IAAMgmD,GAAkB,OAAOvf,GAAIiE,aACxC,GAAK1qC,IAAM2kD,GAAY,OAAOle,GAAI1M,MAElC,GAAK/5B,IAAM4kD,IAIS,QAFnBjP,EAAY7U,GAAWvkC,IAAK,2BAEF,OAAOo5C,EAAU2sB,eAI5C,GAAKtiE,IAAMuiE,GAAc,OAAO97B,GAAI+7B,MACpC,GAAKxiE,IAAMsmD,GAAY,OAAO7f,GAAI3P,IAClC,GAAK92B,IAAMytB,GAAa,OAAOgZ,GAAIlP,KACnC,GAAKv3B,IAAMyiE,GAAkB,OAAOh8B,GAAIi8B,UACxC,GAAK1iE,IAAM2iE,GAAuB,OAAOl8B,GAAIm8B,gBAC7C,GAAK5iE,IAAM8lD,GAAc,OAAOrf,GAAIif,gBACpC,GAAK1lD,IAAMimD,GAAqB,OAAOxf,GAAIyf,cAE3C,GAAKlmD,IAAMu/B,GAAc,OAAOkH,GAAI2iB,SACpC,GAAKppD,IAAM6iE,GAAmB,OAAOp8B,GAAIq8B,cACzC,GAAK9iE,IAAM+iE,GAA0B,OAAOt8B,GAAIu8B,sBAEhD,GAAKhjE,IAAMijE,GAAa,OAAOx8B,GAAIijB,KACnC,GAAK1pD,IAAMkjE,GAAY,OAAOz8B,GAAI6iB,IAClC,GAAKtpD,IAAMmjE,GAAiB,OAAO18B,GAAIqjB,UACvC,GAAK9pD,IAAMojE,GAAyB,OAAO38B,GAAIkjB,oBAC/C,GAAK3pD,IAAMq/B,GAAiB,OAAOoH,GAAI+iB,UACvC,GAAKxpD,IAAMs/B,GAAyB,OAAOmH,GAAImjB,oBAC/C,GAAK5pD,IAAMqjE,GAAiB,OAAO58B,GAAI68B,UACvC,GAAKtjE,IAAMujE,GAAyB,OAAO98B,GAAI+8B,oBAE/C,GAAKxjE,IAAMyjE,GAAiB,OAAOh9B,GAAIi9B,UACvC,GAAK1jE,IAAM2jE,GAAyB,OAAOl9B,GAAIm9B,oBAC/C,GAAK5jE,IAAM6jE,GAAyB,OAAOp9B,GAAIq9B,mBAE/C,IAAK9jE,IAAM+jE,IAAwB/jE,IAAMgkE,IACxChkE,IAAMikE,IAAyBjkE,IAAMkkE,KAIlB,QAFnBvuB,EAAY7U,GAAWvkC,IAAK,kCAEF,CAEzB,GAAKyD,IAAM+jE,GAAuB,OAAOpuB,EAAUwuB,6BACnD,GAAKnkE,IAAMgkE,GAAwB,OAAOruB,EAAUyuB,8BACpD,GAAKpkE,IAAMikE,GAAwB,OAAOtuB,EAAU0uB,8BACpD,GAAKrkE,IAAMkkE,GAAwB,OAAOvuB,EAAU2uB,8BAMtD,IAAKtkE,IAAMukE,IAA2BvkE,IAAMwkE,IAC3CxkE,IAAMykE,IAA4BzkE,IAAM0kE,KAIrB,QAFnB/uB,EAAY7U,GAAWvkC,IAAK,mCAEF,CAEzB,GAAKyD,IAAMukE,GAA0B,OAAO5uB,EAAUgvB,gCACtD,GAAK3kE,IAAMwkE,GAA0B,OAAO7uB,EAAUivB,gCACtD,GAAK5kE,IAAMykE,GAA2B,OAAO9uB,EAAUkvB,iCACvD,GAAK7kE,IAAM0kE,GAA2B,OAAO/uB,EAAUmvB,iCAMzD,GAAK9kE,IAAM+kE,IAIS,QAFnBpvB,EAAY7U,GAAWvkC,IAAK,kCAEF,OAAOo5C,EAAUqvB,0BAI5C,IAAKhlE,IAAMilE,IAAejlE,IAAMklE,KAIZ,QAFnBvvB,EAAY7U,GAAWvkC,IAAK,qBAEF,CAEzB,GAAKyD,IAAMilE,GAAc,OAAOtvB,EAAUwvB,QAC1C,GAAKnlE,IAAMklE,GAAc,OAAOvvB,EAAUyvB,QAM5C,OAAKplE,IAAMmmD,IAIS,QAFnBxQ,EAAY7U,GAAWvkC,IAAK,wBAEKo5C,EAAU0vB,wBAIrC,EApvFR9qE,QAAQC,IAAK,sBAAuB8qE,IAIpC,IAAIC,OAAgC16D,KAFpCw1B,EAAaA,OAEY5D,OAAuB4D,EAAW5D,OAAS33B,SAAS43B,gBAAiB,+BAAgC,UAC7H8oC,OAAkC36D,IAAvBw1B,EAAWrH,QAAwBqH,EAAWrH,QAAU,KAEnEysC,OAA8B56D,IAArBw1B,EAAWoT,OAAsBpT,EAAWoT,MACrDiyB,OAA8B76D,IAArBw1B,EAAWpG,OAAsBoG,EAAWpG,MACrD0rC,OAAkC96D,IAAvBw1B,EAAWouB,SAAwBpuB,EAAWouB,QACzDmX,OAAsC/6D,IAAzBw1B,EAAWwlC,WAA0BxlC,EAAWwlC,UAC7DC,OAAwDj7D,IAAlCw1B,EAAWhC,oBAAmCgC,EAAWhC,mBAC/E0nC,OAA8Dl7D,IAArCw1B,EAAW2lC,uBAAsC3lC,EAAW2lC,sBAElFpnC,KAEAu6B,EAAoB,KAEpB8M,EAAkB,IAAI11C,aAAc,GAEpCwL,KACAT,KAIJx/B,KAAKoqE,WAAaX,EAClBzpE,KAAKk9B,QAAU,KAIfl9B,KAAKm4C,WAAY,EACjBn4C,KAAKo4C,gBAAiB,EACtBp4C,KAAKq4C,gBAAiB,EACtBr4C,KAAKs4C,kBAAmB,EAIxBt4C,KAAK88D,aAAc,EAInB98D,KAAK4jC,kBACL5jC,KAAK0oC,sBAAuB,EAI5B1oC,KAAKogD,YAAc,EACnBpgD,KAAKqlD,YAAa,EAClBrlD,KAAKolD,aAAc,EAInBplD,KAAKuhD,yBAA0B,EAI/BvhD,KAAKg9C,YAAcE,GACnBl9C,KAAK8gE,oBAAsB,EAC3B9gE,KAAK+gE,sBAAwB,EAI7B/gE,KAAKwlD,gBAAkB,EACvBxlD,KAAKylD,gBAAkB,EAIvB,IAAImW,EAAQ57D,KAIXi7D,EAAkB,KAClBR,EAAuB,KACvB4P,GAAsB,KACtBjP,IAAuB,EACvBD,GAA0B,GAE1BD,GAAiB,KACjBwC,GAAsB,KAEtB9C,GAAkB,IAAIvoC,EACtBi4C,GAAsB,KAEtBvP,GAAmB,IAAI1oC,EAIvBmtC,GAAoB,EAIpB5B,GAAS6L,EAAQh3C,MACjBorC,GAAU4L,EAAQ/2C,OAElBgoC,GAAc,EAEdG,GAAW,IAAIxoC,EAAS,EAAG,EAAGurC,GAAQC,IACtC0M,IAAe,EAEfvP,GAAY,IAAI3oC,EAAS,EAAG,EAAGurC,GAAQC,IAIvC/zB,GAAW,IAAItD,GAIf23B,GAAY,IAAIvF,GAChB6G,IAAmB,EACnBC,IAAwB,EAIxB70B,GAAoB,IAAIlX,EAExBypC,GAAW,IAAI1pC,EACfwxC,GAAW,IAAIvxC,EACfqxC,GAAY,IAAIrxC,EAIhBuT,IAECr8B,KAAM,GAEN4zD,SAAW,EAAG,EAAG,GACjB/Y,eACAqZ,wBACAC,2BACApZ,QACAqZ,iBACAC,oBACArZ,YACAF,SACAwZ,kBACAC,qBACAtZ,QAEA/a,YAMDy/B,IACCjwB,WAAY,EACZiN,SAAU,GAGXijB,IAEC7uB,MAAO,EACPjC,MAAO,EACP7f,SAAU,EACVC,MAAO,EACP2wC,OAAQ,GAIV1qE,KAAKs5B,MAEJ6D,OAAQstC,GACRE,OAAQH,GACRxmB,SAAU,MAOX,IAAIrZ,GAEJ,IAEC,IAAIigC,IACHjzB,MAAOgyB,EACPxrC,MAAOyrC,EACPjX,QAASkX,EACTE,UAAWD,EACXvnC,mBAAoBynC,EACpBE,sBAAuBD,GAKxB,GAAa,QAFbt/B,GAAM++B,GAAYD,EAAQ5oC,WAAY,QAAS+pC,KAAuBnB,EAAQ5oC,WAAY,qBAAsB+pC,KAI/G,MAAuC,OAAlCnB,EAAQ5oC,WAAY,SAElB,8DAIA,qCAQ8B9xB,IAAjC47B,GAAIiqB,2BAERjqB,GAAIiqB,yBAA2B,WAE9B,OAASiW,SAAY,EAAGC,SAAY,EAAG9mC,UAAa,KAMtDylC,EAAQjjE,iBAAkB,mBAAoB60D,GAAe,GAE5D,MAAQvpD,GAETrT,QAAQqT,MAAO,wBAA0BA,GAI1C,IAAIkzB,GAAa,IAAI0zB,GAAiB/tB,IAEtC3F,GAAWvkC,IAAK,uBAChBukC,GAAWvkC,IAAK,qBAChBukC,GAAWvkC,IAAK,4BAChBukC,GAAWvkC,IAAK,0BAChBukC,GAAWvkC,IAAK,iCAChBukC,GAAWvkC,IAAK,4BAChBukC,GAAWvkC,IAAK,0BAEXukC,GAAWvkC,IAAK,4BAEpBqzC,GAAei3B,SAAW,YAI3B,IAAI3jC,GAAe,IAAIutB,GAAmBhqB,GAAK3F,GAAYT,GAEvD3J,GAAQ,IAAImyB,GAAYpiB,GAAK3F,GAAYuhB,GAEzCD,GAAa,IAAIwG,GACjBtF,GAAW,IAAInB,GAAe1b,GAAK3F,GAAYpK,GAAO0rB,GAAYlf,GAAcmf,EAAgBikB,IAChG1uC,GAAa,IAAImS,GAAiBtD,IAClC4P,GAAa,IAAIJ,GAAiBxP,GAAK7O,GAAY0uC,IACnD9yB,GAAU,IAAIgE,GAAc/Q,GAAK4P,GAAYkwB,IAC7C/O,GAAe,IAAIrY,GAAerjD,KAAMonC,IACxCm9B,GAAa,IAAIzpB,GACjBkwB,GAAc,IAAI7xB,GAElBjB,GAAa,IAAIT,GAAiBz3C,KAAM46B,GAAO8c,GAASsyB,GACxDiB,GAAK,IAAIjV,GAAch2D,MAE3BA,KAAKs5B,KAAK0qB,SAAW0X,GAAa1X,SAElC,IAAIknB,GAAiB,IAAIlxB,GAAqBrP,GAAK3F,GAAYylC,IAC3DU,GAAwB,IAAI5xB,GAA4B5O,GAAK3F,GAAYylC,IA+B7E9P,IAEA36D,KAAKk9B,QAAUyN,GACf3qC,KAAKonC,aAAeA,GACpBpnC,KAAKglC,WAAaA,GAClBhlC,KAAKsmD,WAAaA,GAClBtmD,KAAKgrE,YAAcA,GACnBhrE,KAAK46B,MAAQA,GACb56B,KAAKirE,GAAKA,GAIV,IAAIn+B,GAAY,IAAI9F,GAAgBhnC,KAAMknC,GAASwQ,GAAStQ,IAE5DpnC,KAAK8sC,UAAYA,GAKjB,IAAIs+B,GAAe,IAAIprC,EAAchgC,KAAMigC,GACvCorC,GAAkB,IAAIzxC,EAAiB55B,KAAMw/B,GAIjDx/B,KAAK6gC,WAAa,WAEjB,OAAO8J,IAIR3qC,KAAKsrE,qBAAuB,WAE3B,OAAO3gC,GAAI2gC,wBAIZtrE,KAAKurE,iBAAmB,WAEvB,IAAI1xB,EAAY7U,GAAWvkC,IAAK,sBAC3Bo5C,GAAYA,EAAU2xB,eAI5BxrE,KAAKkpD,iBAAmB,WAEvB,OAAO9hB,GAAa8hB,oBAIrBlpD,KAAK68B,aAAe,WAEnB,OAAOuK,GAAapD,WAIrBhkC,KAAKi3D,cAAgB,WAEpB,OAAOyD,IAIR16D,KAAKyrE,cAAgB,SAAWtsE,QAEhB4P,IAAV5P,IAELu7D,GAAcv7D,EAEda,KAAK0rE,QAAS9N,GAAQC,IAAS,KAIhC79D,KAAKk3D,QAAU,WAEd,OACCzkC,MAAOmrC,GACPlrC,OAAQmrC,KAKV79D,KAAK0rE,QAAU,SAAWj5C,EAAOC,EAAQi5C,GAExC,IAAI1V,EAASgV,GAAG5T,YAEXpB,GAAUA,EAAOW,aAErBn4D,QAAQ4pC,KAAM,0EAKfu1B,GAASnrC,EACTorC,GAAUnrC,EAEV+2C,EAAQh3C,MAAQA,EAAQioC,GACxB+O,EAAQ/2C,OAASA,EAASgoC,IAEL,IAAhBiR,IAEJlC,EAAQvgE,MAAMupB,MAAQA,EAAQ,KAC9Bg3C,EAAQvgE,MAAMwpB,OAASA,EAAS,MAIjC1yB,KAAK89D,YAAa,EAAG,EAAGrrC,EAAOC,KAIhC1yB,KAAK4rE,qBAAuB,WAE3B,OACCn5C,MAAOmrC,GAASlD,GAChBhoC,OAAQmrC,GAAUnD,KAKpB16D,KAAKm3D,qBAAuB,SAAW1kC,EAAOC,EAAQm5C,GAErDjO,GAASnrC,EACTorC,GAAUnrC,EAEVgoC,GAAcmR,EAEdpC,EAAQh3C,MAAQA,EAAQo5C,EACxBpC,EAAQ/2C,OAASA,EAASm5C,EAE1B7rE,KAAK89D,YAAa,EAAG,EAAGrrC,EAAOC,IAIhC1yB,KAAK89D,YAAc,SAAWttC,EAAGpN,EAAGqP,EAAOC,GAE1CsoC,GAAUt2D,IAAK8rB,EAAGqtC,GAAUz6C,EAAIsP,EAAQD,EAAOC,GAC/CkI,GAAM/H,SAAUkoC,GAAiBt2D,KAAMu2D,IAAYF,eAAgBJ,MAIpE16D,KAAK+9D,WAAa,SAAWvtC,EAAGpN,EAAGqP,EAAOC,GAEzCmoC,GAASn2D,IAAK8rB,EAAGqtC,GAAUz6C,EAAIsP,EAAQD,EAAOC,GAC9CkI,GAAMjI,QAASioC,GAAgBn2D,KAAMo2D,IAAWC,eAAgBJ,MAIjE16D,KAAKmsC,eAAiB,SAAW2/B,GAEhClxC,GAAMuR,eAAgBo+B,GAAeuB,IAMtC9rE,KAAK6tC,cAAgBqK,GAAWrK,cAChC7tC,KAAKguC,cAAgBkK,GAAWlK,cAChChuC,KAAK+tC,cAAgBmK,GAAWnK,cAChC/tC,KAAKg4C,cAAgBE,GAAWF,cAEhCh4C,KAAKutC,MAAQ,SAAW/kC,EAAO21B,EAAOw0B,GAErC,IAAIoZ,EAAO,QAEIh9D,IAAVvG,GAAuBA,KAAQujE,GAAQphC,GAAIqhC,wBACjCj9D,IAAVovB,GAAuBA,KAAQ4tC,GAAQphC,GAAIshC,wBAC/Bl9D,IAAZ4jD,GAAyBA,KAAUoZ,GAAQphC,GAAIuhC,oBAEpDvhC,GAAI4C,MAAOw+B,IAIZ/rE,KAAK4tC,WAAa,WAEjB5tC,KAAKutC,OAAO,GAAM,GAAO,IAI1BvtC,KAAKwxD,WAAa,WAEjBxxD,KAAKutC,OAAO,GAAO,GAAM,IAI1BvtC,KAAK4yD,aAAe,WAEnB5yD,KAAKutC,OAAO,GAAO,GAAO,IAI3BvtC,KAAKmsE,YAAc,SAAWzkB,EAAcl/C,EAAO21B,EAAOw0B,GAEzD3yD,KAAKstC,gBAAiBoa,GACtB1nD,KAAKutC,MAAO/kC,EAAO21B,EAAOw0B,IAM3B3yD,KAAK+/B,aAAeA,EAEpB//B,KAAKs5C,QAAU,WAEdmwB,EAAQziE,oBAAqB,mBAAoBq0D,GAAe,GAEhE2P,GAAY1xB,WAiEbt5C,KAAK67D,sBAAwB,SAAWv0B,EAAQnO,EAAS6I,GAExDpH,GAAMiD,iBAEN,IAAIve,EAAUgnC,GAAW7lD,IAAK6mC,GAEzBA,EAAO8kC,eAAkB9sD,EAAQ3I,WAAW2I,EAAQ3I,SAAWg0B,GAAIzQ,gBACnEoN,EAAO+kC,aAAgB/sD,EAAQgnB,SAAShnB,EAAQgnB,OAASqE,GAAIzQ,gBAC7DoN,EAAOglC,SAAYhtD,EAAQ2c,KAAK3c,EAAQ2c,GAAK0O,GAAIzQ,gBACjDoN,EAAOilC,YAAejtD,EAAQ9W,QAAQ8W,EAAQ9W,MAAQmiC,GAAIzQ,gBAE/D,IAAIgiC,EAAoB/iC,EAAQ8pB,gBAYhC,GAVK3b,EAAO8kC,eAEXzhC,GAAIvQ,WAAYuQ,GAAItQ,aAAc/a,EAAQ3I,UAC1Cg0B,GAAIrQ,WAAYqQ,GAAItQ,aAAciN,EAAOklC,cAAe7hC,GAAI2D,cAE5D1T,GAAMkD,gBAAiBo+B,EAAkBvlD,UACzCg0B,GAAI3M,oBAAqBk+B,EAAkBvlD,SAAU,EAAGg0B,GAAI1M,OAAO,EAAO,EAAG,IAIzEqJ,EAAO+kC,WAAa,CAIxB,GAFA1hC,GAAIvQ,WAAYuQ,GAAItQ,aAAc/a,EAAQgnB,SAEnCtE,EAASk+B,sBACbl+B,EAASm+B,yBACTn+B,EAASk/B,sBACXl/B,EAASkB,UAAYqiB,GAErB,IAAM,IAAInoD,EAAI,EAAGI,EAAmB,EAAf8pC,EAAOzmC,MAAWzD,EAAII,EAAGJ,GAAK,EAAI,CAEtD,IAAIqjB,EAAQ6mB,EAAOmlC,YAEfC,GAAOjsD,EAAOrjB,EAAI,GAAMqjB,EAAOrjB,EAAI,GAAMqjB,EAAOrjB,EAAI,IAAQ,EAC5DuvE,GAAOlsD,EAAOrjB,EAAI,GAAMqjB,EAAOrjB,EAAI,GAAMqjB,EAAOrjB,EAAI,IAAQ,EAC5DwvE,GAAOnsD,EAAOrjB,EAAI,GAAMqjB,EAAOrjB,EAAI,GAAMqjB,EAAOrjB,EAAI,IAAQ,EAEhEqjB,EAAOrjB,EAAI,GAAMsvE,EACjBjsD,EAAOrjB,EAAI,GAAMuvE,EACjBlsD,EAAOrjB,EAAI,GAAMwvE,EAEjBnsD,EAAOrjB,EAAI,GAAMsvE,EACjBjsD,EAAOrjB,EAAI,GAAMuvE,EACjBlsD,EAAOrjB,EAAI,GAAMwvE,EAEjBnsD,EAAOrjB,EAAI,GAAMsvE,EACjBjsD,EAAOrjB,EAAI,GAAMuvE,EACjBlsD,EAAOrjB,EAAI,GAAMwvE,EAMnBjiC,GAAIrQ,WAAYqQ,GAAItQ,aAAciN,EAAOmlC,YAAa9hC,GAAI2D,cAE1D1T,GAAMkD,gBAAiBo+B,EAAkB51B,QAEzCqE,GAAI3M,oBAAqBk+B,EAAkB51B,OAAQ,EAAGqE,GAAI1M,OAAO,EAAO,EAAG,GAIvEqJ,EAAOglC,QAAUtqC,EAAS3lB,MAE9BsuB,GAAIvQ,WAAYuQ,GAAItQ,aAAc/a,EAAQ2c,IAC1C0O,GAAIrQ,WAAYqQ,GAAItQ,aAAciN,EAAOulC,QAASliC,GAAI2D,cAEtD1T,GAAMkD,gBAAiBo+B,EAAkBjgC,IAEzC0O,GAAI3M,oBAAqBlC,GAAWG,GAAI,EAAG0O,GAAI1M,OAAO,EAAO,EAAG,IAI5DqJ,EAAOilC,WAAavqC,EAASoB,eAAiBC,KAElDsH,GAAIvQ,WAAYuQ,GAAItQ,aAAc/a,EAAQ9W,OAC1CmiC,GAAIrQ,WAAYqQ,GAAItQ,aAAciN,EAAOwlC,WAAYniC,GAAI2D,cAEzD1T,GAAMkD,gBAAiBo+B,EAAkB1zD,OAEzCmiC,GAAI3M,oBAAqBk+B,EAAkB1zD,MAAO,EAAGmiC,GAAI1M,OAAO,EAAO,EAAG,IAI3ErD,GAAMmD,0BAEN4M,GAAIsP,WAAYtP,GAAIzL,UAAW,EAAGoI,EAAOzmC,OAEzCymC,EAAOzmC,MAAQ,GAUhBb,KAAKyqC,mBAAqB,SAAWpN,EAAQmE,EAAKiG,EAAUzF,EAAUsF,EAAQ8C,GAE7ExP,GAAMw5B,YAAapyB,GAEnB,IAAI7I,EAAU6kC,EAAY3gC,EAAQmE,EAAKQ,EAAUsF,GAC7CylC,EAAkBtlC,EAASp4B,GAAK,IAAM8pB,EAAQ9pB,GAAK,MAA+B,IAAvB2yB,EAAS0C,WAEpEsoC,GAAgB,EAEfD,IAAoB5R,KAExBA,GAA0B4R,EAC1BC,GAAgB,GAMjB,IAAIC,EAAwB3lC,EAAO2lC,sBAEnC,QAA+Bl+D,IAA1Bk+D,EAAsC,CAM1C,IAAM,IAFFC,KAEM9vE,EAAI,EAAGI,EAAIyvE,EAAsBtvE,OAAQP,EAAII,EAAGJ,IAAO,CAE5D+vE,EAAYF,EAAuB7vE,GACvC8vE,EAAiBvmE,MAAQwmE,EAAW/vE,IAIrC8vE,EAAiBnrC,KAAM+5B,GAElBoR,EAAiBvvE,OAAS,IAE9BuvE,EAAiBvvE,OAAS,GAM3B,IAAM,IAFFuqC,EAAkBT,EAASS,gBAErB9qC,EAAI,EAAGI,EAAI0vE,EAAiBvvE,OAAQP,EAAII,EAAGJ,IAAO,CAE3D,IAAI+vE,EAAYD,EAAkB9vE,GAGlC,GAFA+sE,EAAiB/sE,GAAM+vE,EAAW,GAEV,IAAnBA,EAAW,GAAY,CAEvB1kE,EAAQ0kE,EAAW,IAEQ,IAA1BnrC,EAAS8C,cAAyBoD,EAAgBvxB,UAAW8wB,EAASmO,aAAc,cAAgBx4C,EAAG8qC,EAAgBvxB,SAAUlO,KACvG,IAA1Bu5B,EAAS+C,cAAyBmD,EAAgB5B,QAASmB,EAASmO,aAAc,cAAgBx4C,EAAG8qC,EAAgB5B,OAAQ79B,SAInG,IAA1Bu5B,EAAS8C,cAAwB2C,EAAS2lC,gBAAiB,cAAgBhwE,IACjD,IAA1B4kC,EAAS+C,cAAwB0C,EAAS2lC,gBAAiB,cAAgBhwE,GAMlF,IAAM,IAAIA,EAAI8vE,EAAiBvvE,OAAQ0uC,EAAK89B,EAAgBxsE,OAAQP,EAAIivC,EAAIjvC,IAE3E+sE,EAAiB/sE,GAAM,EAIxB+7B,EAAQ4pB,cAAc1qB,SAAUsS,GAAK,wBAAyBw/B,GAE9D6C,GAAgB,EAMjB,IAAIvkE,EAAQg/B,EAASh/B,MACjBkO,EAAW8wB,EAAS3L,WAAWnlB,SAC/B02D,EAAc,GAEU,IAAvBrrC,EAAS0C,YAEbj8B,EAAQ8xC,GAAWK,sBAAuBnT,GAC1C4lC,EAAc,GAIf,IAAIn/B,EACAvZ,EAAWu2C,GAEA,OAAVziE,IAEJylC,EAAYpS,GAAWr7B,IAAKgI,IAE5BksB,EAAWw2C,IACFx1B,SAAUzH,IAIf8+B,IAEJjR,EAAuB/5B,EAAU7I,EAASsO,GAE3B,OAAVh/B,GAEJkiC,GAAIvQ,WAAYuQ,GAAInQ,qBAAsB0T,EAAUnsC,SAQtD,IAAIurE,EAAY,EAED,OAAV7kE,EAEJ6kE,EAAY7kE,EAAM5H,WAEMkO,IAAb4H,IAEX22D,EAAY32D,EAAS9V,OAItB,IAAI0sE,EAAa9lC,EAASsM,UAAUzyC,MAAQ+rE,EACxCG,EAAa/lC,EAASsM,UAAUlzC,MAAQwsE,EAExC33B,EAAuB,OAAVtL,EAAiBA,EAAM9oC,MAAQ+rE,EAAc,EAC1D/3B,EAAuB,OAAVlL,EAAiBA,EAAMvpC,MAAQwsE,EAAcllD,EAAAA,EAE1DslD,EAAY/qE,KAAKL,IAAKkrE,EAAY73B,GAClCg4B,EAAUhrE,KAAKN,IAAKkrE,EAAWC,EAAaC,EAAY93B,EAAaJ,GAAe,EAEpFq4B,EAAYjrE,KAAKL,IAAK,EAAGqrE,EAAUD,EAAY,GAEnD,GAAmB,IAAdE,EAAL,CAIA,GAAKrmC,EAAOmC,OAEX,IAA4B,IAAvBzH,EAAS0C,UAEb9J,GAAMy5B,aAAcryB,EAAS2C,mBAAqB61B,KAClD7lC,EAAS+kB,QAAS/O,GAAIijC,YAItB,OAAStmC,EAAOgQ,UAEf,KAAKC,GACJ5iB,EAAS+kB,QAAS/O,GAAIzL,WACtB,MAED,KAAK2uC,GACJl5C,EAAS+kB,QAAS/O,GAAImjC,gBACtB,MAED,KAAKC,GACJp5C,EAAS+kB,QAAS/O,GAAIqjC,mBAQnB,GAAK1mC,EAAOoC,OAAS,CAE3B,IAAI4qB,EAAYtyB,EAASyC,eAEN11B,IAAdulD,IAA0BA,EAAY,GAE3C15B,GAAMy5B,aAAcC,EAAYkG,KAE3BlzB,EAAO2mC,eAEXt5C,EAAS+kB,QAAS/O,GAAIijC,OAEXtmC,EAAO4mC,WAElBv5C,EAAS+kB,QAAS/O,GAAIwjC,WAItBx5C,EAAS+kB,QAAS/O,GAAIyjC,iBAIZ9mC,EAAOqC,UAElBhV,EAAS+kB,QAAS/O,GAAI0jC,QAIlB5mC,GAAYA,EAASw0B,0BAEpBx0B,EAASsS,kBAAoB,GAEjCplB,EAASilB,gBAAiBnS,EAAUgmC,EAAWE,GAMhDh5C,EAASwI,OAAQswC,EAAWE,KAuI9B3tE,KAAKsuE,QAAU,SAAWlxC,EAAOC,GAEhCyF,KAEA1F,EAAMmxC,SAAU,SAAWjnC,GAErBA,EAAOy1B,SAEXj6B,EAAOn8B,KAAM2gC,KAMfu8B,EAAa/gC,EAAQzF,GAErBD,EAAMmxC,SAAU,SAAWjnC,GAE1B,GAAKA,EAAOtF,SAEX,GAAK32B,MAAMgX,QAASilB,EAAOtF,UAE1B,IAAM,IAAI5kC,EAAI,EAAGA,EAAIkqC,EAAOtF,SAASrkC,OAAQP,IAE5C6gE,EAAc32B,EAAOtF,SAAU5kC,GAAKggC,EAAMoE,IAAK8F,QAMhD22B,EAAc32B,EAAOtF,SAAU5E,EAAMoE,IAAK8F,MAY9CtnC,KAAKwuE,QAAU,SAAW1tE,GAEzB,SAAS2tE,IAER3tE,KAEEmqE,GAAG5T,aAAexxD,QAAS6oE,sBAAuBD,IAInDxD,GAAG5T,aAAexxD,QAAS6oE,sBAAuBD,IAIrDzuE,KAAKm9B,OAAS,SAAWC,EAAOC,EAAQqqB,EAAczP,GAErD,GAAS5a,GAAUA,EAAOsxC,SAA1B,CASAxT,GAA0B,GAC1BC,IAAuB,EACvBF,GAAiB,MAIS,IAArB99B,EAAM4O,YAAsB5O,EAAMgQ,oBAIhB,OAAlB/P,EAAO4S,QAAkB5S,EAAO+P,oBAEhC69B,GAAGjgE,UAEPqyB,EAAS4tC,GAAG1T,UAAWl6B,IAIxBwN,GAAkB/I,iBAAkBzE,EAAOoB,iBAAkBpB,EAAOmB,oBACpEsL,GAAS6D,cAAe9C,IAExB/H,EAAOnlC,OAAS,EAChBsiC,EAAQtiC,OAAS,EACjB6hC,EAAW7hC,OAAS,EAEpB+hE,GAAwB1/D,KAAK0oC,qBAC7B+2B,GAAmBtB,GAAUvyD,KAAM5L,KAAK4jC,eAAgB87B,GAAuBriC,IAE/EggC,EAAoB2N,GAAYvqE,IAAK28B,EAAOC,IAC1BzxB,OAElBixD,EAAez/B,EAAOC,EAAQu+B,EAAMkB,aAEpCO,EAAkBnkB,UAES,IAAtB0iB,EAAMkB,aAEVO,EAAkBt7B,OAMd09B,IAAmBtB,GAAUnE,eAElC2J,EAAc7gC,GAEdgK,GAAU3P,OAAQC,EAAOC,GAEzBwmC,EAAa/gC,EAAQzF,GAEhBoiC,IAAmBtB,GAAUlE,aAIlCwQ,GAAY7uB,QACZ6uB,GAAY9wB,MAAQ,EACpB8wB,GAAY3wC,SAAW,EACvB2wC,GAAY1wC,MAAQ,EACpB0wC,GAAYC,OAAS,OAEC37D,IAAjB24C,IAEJA,EAAe,MAIhB1nD,KAAKstC,gBAAiBoa,GAItBxP,GAAW/a,OAAQC,EAAOC,EAAQ4a,GAIlC,IAAI22B,EAAgBvR,EAAkBvkB,OAClC+1B,EAAqBxR,EAAkB/5B,YAE3C,GAAKlG,EAAMogC,iBAAmB,CAE7B,IAAIA,EAAmBpgC,EAAMogC,iBAExBoR,EAAcjxE,QAAS2/D,EAAesR,EAAexxC,EAAOC,EAAQmgC,GACpEqR,EAAmBlxE,QAAS2/D,EAAeuR,EAAoBzxC,EAAOC,EAAQmgC,QAM9EoR,EAAcjxE,QAAS2/D,EAAesR,EAAexxC,EAAOC,GAI5DwxC,EAAmBlxE,QAAS2/D,EAAeuR,EAAoBzxC,EAAOC,GAM5E+tC,GAAajuC,OAAQC,EAAOC,GAC5BguC,GAAgBluC,OAAQC,EAAOC,EAAQ09B,IAIlCrT,GAEJF,GAASoF,yBAA0BlF,GAMpC9sB,GAAMtb,QAAQ6e,MAAMqE,SAAS,GAC7B5H,GAAMtb,QAAQ6e,MAAMC,SAAS,GAC7BxD,GAAMtb,QAAQ9W,MAAM41B,SAAS,GAExBf,EAAOogC,eAEX7B,EAAMzvB,gBAAgB,GAIlB8+B,GAAGjgE,SAEPigE,GAAGxS,mBAnIHh6D,QAAQqT,MAAO,2EAo1CjB9R,KAAK8uE,eAAiB,SAAWjgB,EAAUkgB,GAE1Cn0C,GAAMg0B,YAAaC,GACnBj0B,GAAM2zB,aAAcwgB,IAAuBC,KAsB5ChvE,KAAK80B,iBAhBL,WAEC,IAAIm6C,EAAczP,GAUlB,OARKyP,GAAe7nC,GAAasoB,aAEhCjxD,QAAQ4pC,KAAM,sCAAwC4mC,EAAc,+CAAiD7nC,GAAasoB,aAInI8P,IAAqB,EAEdyP,GAORjvE,KAAKy2B,aAAiB,WAErB,IAAIy4C,GAAS,EAGb,OAAO,SAAuBp8C,EAASy1B,GAEjCz1B,GAAWA,EAAQixB,sBAEhBmrB,IAENzwE,QAAQ4pC,KAAM,gHACd6mC,GAAS,GAIVp8C,EAAUA,EAAQA,SAInB00B,GAAS/wB,aAAc3D,EAASy1B,IApBd,GA0BpBvoD,KAAKmvE,WAAe,WAEnB,IAAID,GAAS,EAEb,OAAO,SAAqBp8C,EAASy1B,GAE7B2mB,IAENzwE,QAAQ4pC,KAAM,6EACd6mC,GAAS,GAIV1nB,GAAS/wB,aAAc3D,EAASy1B,IAbhB,GAmBlBvoD,KAAK42B,eAAmB,WAEvB,IAAIs4C,GAAS,EAEb,OAAO,SAAyBp8C,EAASy1B,GAGnCz1B,GAAWA,EAAQo1B,0BAEhBgnB,IAENzwE,QAAQ4pC,KAAM,uHACd6mC,GAAS,GAIVp8C,EAAUA,EAAQA,SAMZA,GAAWA,EAAQylB,eACvBltC,MAAMgX,QAASyQ,EAAQpC,QAAoC,IAAzBoC,EAAQpC,MAAM/yB,OAKlD6pD,GAAS5wB,eAAgB9D,EAASy1B,GAMlCf,GAAS+E,sBAAuBz5B,EAASy1B,IAlCtB,GA0CtBvoD,KAAKklD,gBAAkB,WAEtB,OAAOuV,GAIRz6D,KAAKstC,gBAAkB,SAAWoa,GAEjC+S,EAAuB/S,EAElBA,QAAsE34C,IAAtDu3C,GAAW7lD,IAAKinD,GAAeU,oBAEnDZ,GAASgF,kBAAmB9E,GAI7B,IACImD,EADAkB,EAAWrE,GAAgBA,EAAaQ,wBAG5C,GAAKR,EAAe,CAEnB,IAAIO,EAAyB3B,GAAW7lD,IAAKinD,GAI5CmD,EAFIkB,EAEU9D,EAAuBG,mBAAoBV,EAAav0B,gBAIxD80B,EAAuBG,mBAItCwS,GAAgBn2D,KAAMijD,EAAa/0B,SACnC23C,GAAsB5iB,EAAa90B,YAEnCmoC,GAAiBt2D,KAAMijD,EAAa70B,eAIpCg4B,EAAc,KAEd+P,GAAgBn2D,KAAMo2D,IAAWC,eAAgBJ,IACjD4P,GAAsBC,GAEtBxP,GAAiBt2D,KAAMu2D,IAAYF,eAAgBJ,IAgBpD,GAZK2P,KAAwBxf,IAE5BlgB,GAAIqgB,gBAAiBrgB,GAAIsgB,YAAaJ,GACtCwf,GAAsBxf,GAIvBjwB,GAAMjI,QAASioC,IACfhgC,GAAMuR,eAAgBm+B,IAEtB1vC,GAAM/H,SAAUkoC,IAEXhP,EAAS,CAEb,IAAInE,EAAoBtB,GAAW7lD,IAAKinD,EAAa50B,SACrD6X,GAAIugB,qBAAsBvgB,GAAIsgB,YAAatgB,GAAIgiB,kBAAmBhiB,GAAI2hB,4BAA8B5E,EAAav0B,eAAgBy0B,EAAkBI,eAAgBN,EAAat0B,qBAMlLpzB,KAAKovE,uBAAyB,SAAW1nB,EAAcl3B,EAAGpN,EAAGqP,EAAOC,EAAQ3wB,GAE3E,GAAS2lD,GAAgBA,EAAa3D,oBAAtC,CAOA,IAAI8G,EAAcvE,GAAW7lD,IAAKinD,GAAeU,mBAEjD,GAAKyC,EAAc,CAElB,IAAIwkB,GAAU,EAETxkB,IAAgBwf,KAEpB1/B,GAAIqgB,gBAAiBrgB,GAAIsgB,YAAaJ,GAEtCwkB,GAAU,GAIX,IAEC,IAAIv8C,EAAU40B,EAAa50B,QACvBw8C,EAAgBx8C,EAAQtnB,OACxBm9C,EAAc71B,EAAQ5tB,KAE1B,GAAKoqE,IAAkB39C,IAAc40B,EAAgB+oB,KAAoB3kC,GAAImoB,aAAcnoB,GAAI4kC,kCAG9F,YADA9wE,QAAQqT,MAAO,6GAKhB,KAAK62C,IAAgB/2B,IAAoB20B,EAAgBoC,KAAkBhe,GAAImoB,aAAcnoB,GAAI6kC,iCAC5F7mB,IAAgBE,KAAe7jB,GAAWvkC,IAAK,sBAAyBukC,GAAWvkC,IAAK,8BACxFkoD,IAAgBG,IAAiB9jB,GAAWvkC,IAAK,gCAGrD,YADAhC,QAAQqT,MAAO,uHAKX64B,GAAI8kC,uBAAwB9kC,GAAIsgB,eAAkBtgB,GAAI+kC,qBAInDl/C,GAAK,GAAKA,GAAOk3B,EAAaj1B,MAAQA,GAAerP,GAAK,GAAKA,GAAOskC,EAAah1B,OAASA,GAElGiY,GAAIglC,WAAYn/C,EAAGpN,EAAGqP,EAAOC,EAAQ6zB,EAAgB+oB,GAAiB/oB,EAAgBoC,GAAe5mD,GAMtGtD,QAAQqT,MAAO,8GAIf,QAEIu9D,GAEJ1kC,GAAIqgB,gBAAiBrgB,GAAIsgB,YAAaof,WA7DxC5rE,QAAQqT,MAAO,6FA8MlB,SAAS89D,GAAUpnE,EAAOq5B,GAEzB7hC,KAAKmM,KAAO,GAEZnM,KAAKwI,MAAQ,IAAIixB,EAAOjxB,GACxBxI,KAAK6hC,aAAwB9yB,IAAZ8yB,EAA0BA,EAAU,MA2BtD,SAASguC,GAAMrnE,EAAOk5B,EAAMC,GAE3B3hC,KAAKmM,KAAO,GAEZnM,KAAKwI,MAAQ,IAAIixB,EAAOjxB,GAExBxI,KAAK0hC,UAAkB3yB,IAAT2yB,EAAuBA,EAAO,EAC5C1hC,KAAK2hC,SAAgB5yB,IAAR4yB,EAAsBA,EAAM,IA2B1C,SAASmuC,KAER//B,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,QAEZlF,KAAKk4C,WAAa,KAClBl4C,KAAKwhC,IAAM,KACXxhC,KAAKw9D,iBAAmB,KAExBx9D,KAAKgsC,YAAa,EAyCnB,SAAS+jC,GAAWj9C,EAASrtB,EAAMy1C,EAAUvb,EAAUn3B,GAEtDunC,GAASryC,KAAMsC,MAEfA,KAAKw/B,cAELx/B,KAAKo/B,eAAiB,IAAI1L,EAC1B1zB,KAAKq/B,0BAAuBtwB,OAEXA,IAAZ+jB,GAEJ9yB,KAAKyqB,IAAKqI,EAASrtB,EAAMy1C,EAAUvb,EAAUn3B,GA8F/C,SAASwnE,GAAgBzrC,GAExB3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,iBAEZlF,KAAKwI,MAAQ,IAAIixB,EAAO,UACxBz5B,KAAKqc,IAAM,KAEXrc,KAAKu8B,SAAW,EAEhBv8B,KAAKwhC,KAAM,EACXxhC,KAAK8iC,QAAS,EAEd9iC,KAAKwlC,UAAWjB,GA0BjB,SAAS0rC,GAAQjuC,GAEhB+N,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,SAEZlF,KAAKgiC,cAA0BjzB,IAAbizB,EAA2BA,EAAW,IAAIguC,GAyD7D,SAASE,KAERngC,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,MAEZhH,OAAOmB,iBAAkBW,MACxBmwE,QACC1wE,YAAY,EACZN,YAmKH,SAASixE,GAAU7sB,EAAO8sB,GAWzB,GAPA9sB,EAAQA,MAERvjD,KAAKujD,MAAQA,EAAM7hD,MAAO,GAC1B1B,KAAK4gE,aAAe,IAAInsC,aAAkC,GAApBz0B,KAAKujD,MAAM5lD,aAI3BoR,IAAjBshE,EAEJrwE,KAAKswE,yBAIL,GAAKtwE,KAAKujD,MAAM5lD,SAAW0yE,EAAa1yE,OAEvCqC,KAAKqwE,aAAeA,EAAa3uE,MAAO,OAElC,CAENjD,QAAQ4pC,KAAM,oDAEdroC,KAAKqwE,gBAEL,IAAM,IAAIjzE,EAAI,EAAGivC,EAAKrsC,KAAKujD,MAAM5lD,OAAQP,EAAIivC,EAAIjvC,IAEhD4C,KAAKqwE,aAAa1pE,KAAM,IAAIgtB,IA8HhC,SAAS48C,KAERxgC,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,OAkBb,SAASsrE,GAAa/oC,EAAUzF,GAE/BqV,GAAK35C,KAAMsC,KAAMynC,EAAUzF,GAE3BhiC,KAAKkF,KAAO,cAEZlF,KAAKywE,SAAW,WAChBzwE,KAAK0wE,WAAa,IAAI/8C,EACtB3zB,KAAK2wE,kBAAoB,IAAIh9C,EAE7B,IACI6vB,EAAW,IAAI4sB,GADPpwE,KAAK4wE,aAGjB5wE,KAAK2L,KAAM63C,EAAUxjD,KAAKs+B,aAE1Bt+B,KAAK6wE,uBAkMN,SAASrsB,GAAmBjgB,GAE3B3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,oBAEZlF,KAAKwI,MAAQ,IAAIixB,EAAO,UAExBz5B,KAAKykC,UAAY,EACjBzkC,KAAK8wE,QAAU,QACf9wE,KAAK+wE,SAAW,QAEhB/wE,KAAK8iC,QAAS,EAEd9iC,KAAKwlC,UAAWjB,GA2BjB,SAASysC,GAAMvpC,EAAUzF,EAAUyX,GAElC,GAAc,IAATA,EAGJ,OADAh7C,QAAQ4pC,KAAM,mGACP,IAAI4oC,GAAcxpC,EAAUzF,GAIpC+N,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,OAEZlF,KAAKynC,cAAwB14B,IAAb04B,EAAyBA,EAAW,IAAIqM,GACxD9zC,KAAKgiC,cAAwBjzB,IAAbizB,EAAyBA,EAAW,IAAIwiB,IAAqBh8C,MAAuB,SAAhB9F,KAAKG,WA2K1F,SAASouE,GAAcxpC,EAAUzF,GAEhCgvC,GAAKtzE,KAAMsC,KAAMynC,EAAUzF,GAE3BhiC,KAAKkF,KAAO,eAgBb,SAASgsE,GAAUzpC,EAAUzF,GAE5BgvC,GAAKtzE,KAAMsC,KAAMynC,EAAUzF,GAE3BhiC,KAAKkF,KAAO,WA0Bb,SAASw/C,GAAgBngB,GAExB3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,iBAEZlF,KAAKwI,MAAQ,IAAIixB,EAAO,UAExBz5B,KAAKqc,IAAM,KAEXrc,KAAKyF,KAAO,EACZzF,KAAKohD,iBAAkB,EAEvBphD,KAAK8iC,QAAS,EAEd9iC,KAAKwlC,UAAWjB,GA4BjB,SAAS4sC,GAAQ1pC,EAAUzF,GAE1B+N,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,SAEZlF,KAAKynC,cAAwB14B,IAAb04B,EAAyBA,EAAW,IAAIqM,GACxD9zC,KAAKgiC,cAAwBjzB,IAAbizB,EAAyBA,EAAW,IAAI0iB,IAAkBl8C,MAAuB,SAAhB9F,KAAKG,WAkIvF,SAASuuE,KAERrhC,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,QAcb,SAASmsE,GAAcC,EAAO3gD,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,GAQxF,SAASgZ,IAER0kC,sBAAuB1kC,GAElBsnC,EAAMtjE,YAAcsjE,EAAMC,oBAE9BvoC,EAAMhI,aAAc,GAZtBvQ,EAAQ/yB,KAAMsC,KAAMsxE,EAAO3gD,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,GAEtFhxB,KAAK+xB,iBAAkB,EAEvB,IAAIiX,EAAQhpC,KAcZgqC,IAWD,SAASwnC,GAAmBlgD,EAASmB,EAAOC,EAAQlnB,EAAQtG,EAAMyrB,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAYtI,GAE1H+H,EAAQ/yB,KAAMsC,KAAM,KAAM2wB,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,EAAYtI,GAEjG1oB,KAAK0wB,OAAU+B,MAAOA,EAAOC,OAAQA,GACrC1yB,KAAKsxB,QAAUA,EAKftxB,KAAKiyB,OAAQ,EAKbjyB,KAAK+xB,iBAAkB,EAaxB,SAAS0/C,GAAe9wC,EAAQhQ,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,GAE1FP,EAAQ/yB,KAAMsC,KAAM2gC,EAAQhQ,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,GAEvFhxB,KAAKghC,aAAc,EAYpB,SAAS0wC,GAAcj/C,EAAOC,EAAQxtB,EAAMyrB,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAYxlB,GAIpG,IAFAA,OAAoBuD,IAAXvD,EAAuBA,EAASw+C,MAEzBA,IAAex+C,IAAW2+C,GAEzC,MAAM,IAAI7sD,MAAO,yFAIJyR,IAAT7J,GAAsBsG,IAAWw+C,KAAc9kD,EAAO+kD,SAC7Cl7C,IAAT7J,GAAsBsG,IAAW2+C,KAAqBjlD,EAAOmlD,IAElE55B,EAAQ/yB,KAAMsC,KAAM,KAAM2wB,EAASC,EAAOC,EAAOC,EAAWC,EAAWvlB,EAAQtG,EAAM8rB,GAErFhxB,KAAK0wB,OAAU+B,MAAOA,EAAOC,OAAQA,GAErC1yB,KAAK8wB,eAA0B/hB,IAAd+hB,EAA0BA,EAAYgD,GACvD9zB,KAAK+wB,eAA0BhiB,IAAdgiB,EAA0BA,EAAY+C,GAEvD9zB,KAAKiyB,OAAQ,EACbjyB,KAAK+xB,iBAAkB,EAaxB,SAAS4/C,GAAmBlqC,GAE3BqM,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,oBAIZ,IAII9H,EAAG+M,EAAG3M,EAAGR,EAAG40E,EACiBj1E,EAAGk1E,EAAOC,EACvC7zE,EACA89B,EAPAjC,KAKAi4C,GAAS,EAAG,GAAKC,KACZ7iE,GAAS,IAAK,IAAK,KAK5B,GAAKs4B,GAAYA,EAASU,WAAa,CAItC,IAAIpO,EAAQ0N,EAAS1N,MAErB,IAAM38B,EAAI,EAAGI,EAAIu8B,EAAMp8B,OAAQP,EAAII,EAAGJ,IAAO,CAE5C,IAAIowC,EAAOzT,EAAO38B,GAElB,IAAM+M,EAAI,EAAGA,EAAI,EAAGA,IAEnB0nE,EAAQrkC,EAAMr+B,EAAMhF,IACpB2nE,EAAQtkC,EAAMr+B,GAAQhF,EAAI,GAAM,IAChC4nE,EAAM,GAAMrvE,KAAKN,IAAKyvE,EAAOC,GAC7BC,EAAM,GAAMrvE,KAAKL,IAAKwvE,EAAOC,QAIP/iE,IAAjBijE,EAFL/zE,EAAM8zE,EAAM,GAAM,IAAMA,EAAM,MAI7BC,EAAO/zE,IAAUg0E,OAAQF,EAAM,GAAKG,OAAQH,EAAM,KAUrD,IAAM9zE,KAAO+zE,EAEZr1E,EAAIq1E,EAAO/zE,GAEX89B,EAAS0L,EAAS3N,SAAUn9B,EAAEs1E,QAC9Bn4C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAE1CyJ,EAAS0L,EAAS3N,SAAUn9B,EAAEu1E,QAC9Bp4C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,QAIrC,GAAKmV,GAAYA,EAASQ,iBAAmB,CAEnD,IAAItxB,EAAU88B,EAASxJ,EACnBG,EAAO9oC,EACP2wE,EAAQC,EAIZ,GAFAn2C,EAAS,IAAIrI,EAEW,OAAnB+T,EAASh/B,MAAiB,CAgB9B,IAZAkO,EAAW8wB,EAAS3L,WAAWnlB,SAC/B88B,EAAUhM,EAASh/B,MAGI,KAFvBwhC,EAASxC,EAASwC,QAENtsC,SAEXssC,IAAa3oC,MAAO,EAAGT,MAAO4yC,EAAQ5yC,MAAOypC,cAAe,KAMvDttC,EAAI,EAAG40E,EAAK3nC,EAAOtsC,OAAQX,EAAI40E,IAAO50E,EAO3C,IAAMI,EAHNkE,GAFA8oC,EAAQH,EAAQjtC,IAEFsE,MAGG9D,EAAM8D,EAFf8oC,EAAMvpC,MAE0BzD,EAAII,EAAGJ,GAAK,EAEnD,IAAM+M,EAAI,EAAGA,EAAI,EAAGA,IAEnB0nE,EAAQp+B,EAAQ0+B,KAAM/0E,EAAI+M,GAC1B2nE,EAAQr+B,EAAQ0+B,KAAM/0E,GAAM+M,EAAI,GAAM,GACtC4nE,EAAM,GAAMrvE,KAAKN,IAAKyvE,EAAOC,GAC7BC,EAAM,GAAMrvE,KAAKL,IAAKwvE,EAAOC,QAIP/iE,IAAjBijE,EAFL/zE,EAAM8zE,EAAM,GAAM,IAAMA,EAAM,MAI7BC,EAAO/zE,IAAUg0E,OAAQF,EAAM,GAAKG,OAAQH,EAAM,KAYtD,IAAM9zE,KAAO+zE,EAEZr1E,EAAIq1E,EAAO/zE,GAEX89B,EAAOq2C,oBAAqBz7D,EAAUha,EAAEs1E,QACxCn4C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAE1CyJ,EAAOq2C,oBAAqBz7D,EAAUha,EAAEu1E,QACxCp4C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,QAU3C,IAAMl1B,EAAI,EAAGI,GAFbmZ,EAAW8wB,EAAS3L,WAAWnlB,UAEH9V,MAAQ,EAAKzD,EAAII,EAAGJ,IAE/C,IAAM+M,EAAI,EAAGA,EAAI,EAAGA,IAKnB8nE,EAAS,EAAI70E,EAAI+M,EACjB4xB,EAAOq2C,oBAAqBz7D,EAAUs7D,GACtCn4C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAE1C4/C,EAAS,EAAI90E,GAAQ+M,EAAI,GAAM,EAC/B4xB,EAAOq2C,oBAAqBz7D,EAAUu7D,GACtCp4C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAY9CtyB,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IAiBtE,SAASu4C,GAAoBC,EAAMC,EAAQC,GAE1C3gC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,qBAEZlF,KAAKukC,YACJ+tC,KAAMA,EACNC,OAAQA,EACRC,OAAQA,GAGTxyE,KAAKo0C,mBAAoB,IAAIq+B,GAA0BH,EAAMC,EAAQC,IACrExyE,KAAKs0C,gBASN,SAASm+B,GAA0BH,EAAMC,EAAQC,GAEhD1+B,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,2BAEZlF,KAAKukC,YACJ+tC,KAAMA,EACNC,OAAQA,EACRC,OAAQA,GAKT,IAYIp1E,EAAG+M,EAZHspC,KACA3Z,KACA4Z,KACAC,KAIArN,EAAS,IAAI5S,EAEb+S,EAAK,IAAI/S,EAAWgT,EAAK,IAAIhT,EAC7Bg/C,EAAK,IAAIh/C,EAAWi/C,EAAK,IAAIj/C,EAM7Bk/C,EAAaL,EAAS,EAE1B,IAAMn1E,EAAI,EAAGA,GAAKo1E,EAAQp1E,IAAO,CAEhC,IAAIgN,EAAIhN,EAAIo1E,EAEZ,IAAMroE,EAAI,EAAGA,GAAKooE,EAAQpoE,IAAO,CAEhC,IAAIlN,EAAIkN,EAAIooE,EAIZ9rC,EAAK6rC,EAAMr1E,EAAGmN,EAAGq8B,GACjB3M,EAASnzB,KAAM8/B,EAAGjW,EAAGiW,EAAGrjB,EAAGqjB,EAAGnU,GAMzBr1B,EA9BG,MA8BQ,GAEfypC,EAAK4rC,EAAMr1E,EAhCJ,KAgCamN,EAAGs8B,GACvBgsC,EAAGG,WAAYpsC,EAAIC,KAInBA,EAAK4rC,EAAMr1E,EArCJ,KAqCamN,EAAGs8B,GACvBgsC,EAAGG,WAAYnsC,EAAID,IAIfr8B,EA1CG,MA0CQ,GAEfs8B,EAAK4rC,EAAMr1E,EAAGmN,EA5CP,KA4CgBs8B,GACvBisC,EAAGE,WAAYpsC,EAAIC,KAInBA,EAAK4rC,EAAMr1E,EAAGmN,EAjDP,KAiDgBs8B,GACvBisC,EAAGE,WAAYnsC,EAAID,IAMpBH,EAAOwsC,aAAcJ,EAAIC,GAAKtN,YAC9B3xB,EAAQ/sC,KAAM2/B,EAAO9V,EAAG8V,EAAOljB,EAAGkjB,EAAOhU,GAIzCqhB,EAAIhtC,KAAM1J,EAAGmN,IAQf,IAAMhN,EAAI,EAAGA,EAAIo1E,EAAQp1E,IAExB,IAAM+M,EAAI,EAAGA,EAAIooE,EAAQpoE,IAAO,CAE/B,IAAIjN,EAAIE,EAAIw1E,EAAazoE,EACrB3C,EAAIpK,EAAIw1E,EAAazoE,EAAI,EACzB5B,GAAMnL,EAAI,GAAMw1E,EAAazoE,EAAI,EACjCkZ,GAAMjmB,EAAI,GAAMw1E,EAAazoE,EAIjCspC,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,GAQtBrjB,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IAgB3D,SAASo/B,GAAoBj5C,EAAU2Z,EAAStN,EAAQ6sC,GAEvDnhC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,qBAEZlF,KAAKukC,YACJzK,SAAUA,EACV2Z,QAASA,EACTtN,OAAQA,EACR6sC,OAAQA,GAGThzE,KAAKo0C,mBAAoB,IAAI6+B,GAA0Bn5C,EAAU2Z,EAAStN,EAAQ6sC,IAClFhzE,KAAKs0C,gBASN,SAAS2+B,GAA0Bn5C,EAAU2Z,EAAStN,EAAQ6sC,GA2E7D,SAASE,EAAeh2E,EAAGsK,EAAGe,EAAGyqE,GAEhC,IAMI51E,EAAG+M,EANHgpE,EAAOzwE,KAAKC,IAAK,EAAGqwE,GAIpB5oE,KAMJ,IAAMhN,EAAI,EAAGA,GAAK+1E,EAAM/1E,IAAO,CAE9BgN,EAAGhN,MAEH,IAAIg2E,EAAKl2E,EAAE0S,QAAQyjE,KAAM9qE,EAAGnL,EAAI+1E,GAC5BG,EAAK9rE,EAAEoI,QAAQyjE,KAAM9qE,EAAGnL,EAAI+1E,GAE5BI,EAAOJ,EAAO/1E,EAElB,IAAM+M,EAAI,EAAGA,GAAKopE,EAAMppE,IAItBC,EAAGhN,GAAK+M,GAFE,IAANA,GAAW/M,IAAM+1E,EAEPC,EAIAA,EAAGxjE,QAAQyjE,KAAMC,EAAInpE,EAAIopE,GAU1C,IAAMn2E,EAAI,EAAGA,EAAI+1E,EAAM/1E,IAEtB,IAAM+M,EAAI,EAAGA,EAAI,GAAMgpE,EAAO/1E,GAAM,EAAG+M,IAAO,CAE7C,IAAI+/B,EAAIxnC,KAAKK,MAAOoH,EAAI,GAEnBA,EAAI,GAAM,GAEdqpE,EAAYppE,EAAGhN,GAAK8sC,EAAI,IACxBspC,EAAYppE,EAAGhN,EAAI,GAAK8sC,IACxBspC,EAAYppE,EAAGhN,GAAK8sC,MAIpBspC,EAAYppE,EAAGhN,GAAK8sC,EAAI,IACxBspC,EAAYppE,EAAGhN,EAAI,GAAK8sC,EAAI,IAC5BspC,EAAYppE,EAAGhN,EAAI,GAAK8sC,MAsD5B,SAASupC,IAIR,IAAM,IAAIr2E,EAAI,EAAGA,EAAIs2E,EAAS/1E,OAAQP,GAAK,EAAI,CAI9C,IAAIu2E,EAAKD,EAAUt2E,EAAI,GACnBw2E,EAAKF,EAAUt2E,EAAI,GACnBy2E,EAAKH,EAAUt2E,EAAI,GAEnBiF,EAAMK,KAAKL,IAAKsxE,EAAIC,EAAIC,GACxBzxE,EAAMM,KAAKN,IAAKuxE,EAAIC,EAAIC,GAIvBxxE,EAAM,IAAOD,EAAM,KAElBuxE,EAAK,KAAMD,EAAUt2E,EAAI,IAAO,GAChCw2E,EAAK,KAAMF,EAAUt2E,EAAI,IAAO,GAChCy2E,EAAK,KAAMH,EAAUt2E,EAAI,IAAO,KAQxC,SAASo2E,EAAYz3C,GAEpB9B,EAAatzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI/C,SAASwhD,EAAkBrrE,EAAOszB,GAEjC,IAAIugC,EAAiB,EAAR7zD,EAEbszB,EAAOvL,EAAIsJ,EAAUwiC,EAAS,GAC9BvgC,EAAO3Y,EAAI0W,EAAUwiC,EAAS,GAC9BvgC,EAAOzJ,EAAIwH,EAAUwiC,EAAS,GAI/B,SAASyX,IAYR,IAAM,IAVF72E,EAAI,IAAIw2B,EACRlsB,EAAI,IAAIksB,EACRnrB,EAAI,IAAImrB,EAERsgD,EAAW,IAAItgD,EAEfugD,EAAM,IAAI1jD,EACV2jD,EAAM,IAAI3jD,EACV4jD,EAAM,IAAI5jD,EAEJnzB,EAAI,EAAG+M,EAAI,EAAG/M,EAAI68B,EAAat8B,OAAQP,GAAK,EAAG+M,GAAK,EAAI,CAEjEjN,EAAEwH,IAAKu1B,EAAc78B,EAAI,GAAK68B,EAAc78B,EAAI,GAAK68B,EAAc78B,EAAI,IACvEoK,EAAE9C,IAAKu1B,EAAc78B,EAAI,GAAK68B,EAAc78B,EAAI,GAAK68B,EAAc78B,EAAI,IACvEmL,EAAE7D,IAAKu1B,EAAc78B,EAAI,GAAK68B,EAAc78B,EAAI,GAAK68B,EAAc78B,EAAI,IAEvE62E,EAAIvvE,IAAKgvE,EAAUvpE,EAAI,GAAKupE,EAAUvpE,EAAI,IAC1C+pE,EAAIxvE,IAAKgvE,EAAUvpE,EAAI,GAAKupE,EAAUvpE,EAAI,IAC1CgqE,EAAIzvE,IAAKgvE,EAAUvpE,EAAI,GAAKupE,EAAUvpE,EAAI,IAE1C6pE,EAASvvE,KAAMvH,GAAIutB,IAAKjjB,GAAIijB,IAAKliB,GAAI6rE,aAAc,GAEnD,IAAIC,EAAMC,EAASN,GAEnBO,EAAWN,EAAK9pE,EAAI,EAAGjN,EAAGm3E,GAC1BE,EAAWL,EAAK/pE,EAAI,EAAG3C,EAAG6sE,GAC1BE,EAAWJ,EAAKhqE,EAAI,EAAG5B,EAAG8rE,IAM5B,SAASE,EAAWt4C,EAAIqgC,EAAQ/mB,EAAQ++B,GAEhCA,EAAU,GAAkB,IAATr4C,EAAGzL,IAE5BkjD,EAAUpX,GAAWrgC,EAAGzL,EAAI,GAIT,IAAb+kB,EAAO/kB,GAA4B,IAAb+kB,EAAOjjB,IAEnCohD,EAAUpX,GAAWgY,EAAU,EAAI5xE,KAAK8xE,GAAK,IAQ/C,SAASF,EAAS/+B,GAEjB,OAAO7yC,KAAK+xE,MAAOl/B,EAAOjjB,GAAKijB,EAAO/kB,GAOvC,SAASkkD,EAAan/B,GAErB,OAAO7yC,KAAK+xE,OAASl/B,EAAOnyB,EAAG1gB,KAAKg+D,KAAQnrB,EAAO/kB,EAAI+kB,EAAO/kB,EAAQ+kB,EAAOjjB,EAAIijB,EAAOjjB,IAlSzFwhB,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,2BAEZlF,KAAKukC,YACJzK,SAAUA,EACV2Z,QAASA,EACTtN,OAAQA,EACR6sC,OAAQA,GAGT7sC,EAASA,GAAU,EAKnB,IAAIlM,KACAy5C,MAgCJ,SAAoBV,GAQnB,IAAM,IANF91E,EAAI,IAAIw2B,EACRlsB,EAAI,IAAIksB,EACRnrB,EAAI,IAAImrB,EAIFt2B,EAAI,EAAGA,EAAIq2C,EAAQ91C,OAAQP,GAAK,EAIzC02E,EAAkBrgC,EAASr2C,EAAI,GAAKF,GACpC42E,EAAkBrgC,EAASr2C,EAAI,GAAKoK,GACpCssE,EAAkBrgC,EAASr2C,EAAI,GAAKmL,GAIpC2qE,EAAeh2E,EAAGsK,EAAGe,EAAGyqE,GA9C1B2B,CATA3B,EAASA,GAAU,GA8HnB,SAAuB7sC,GAMtB,IAAM,IAJFpK,EAAS,IAAIrI,EAIPt2B,EAAI,EAAGA,EAAI68B,EAAat8B,OAAQP,GAAK,EAE9C2+B,EAAOvL,EAAIyJ,EAAc78B,EAAI,GAC7B2+B,EAAO3Y,EAAI6W,EAAc78B,EAAI,GAC7B2+B,EAAOzJ,EAAI2H,EAAc78B,EAAI,GAE7B2+B,EAAOspC,YAAYvK,eAAgB30B,GAEnClM,EAAc78B,EAAI,GAAM2+B,EAAOvL,EAC/ByJ,EAAc78B,EAAI,GAAM2+B,EAAO3Y,EAC/B6W,EAAc78B,EAAI,GAAM2+B,EAAOzJ,EAjIjCsiD,CAAczuC,GAuId,WAIC,IAAM,IAFFpK,EAAS,IAAIrI,EAEPt2B,EAAI,EAAGA,EAAI68B,EAAat8B,OAAQP,GAAK,EAAI,CAElD2+B,EAAOvL,EAAIyJ,EAAc78B,EAAI,GAC7B2+B,EAAO3Y,EAAI6W,EAAc78B,EAAI,GAC7B2+B,EAAOzJ,EAAI2H,EAAc78B,EAAI,GAE7B,IAAIH,EAAIq3E,EAASv4C,GAAW,EAAIr5B,KAAK8xE,GAAK,GACtCpqE,EAAIsqE,EAAa34C,GAAWr5B,KAAK8xE,GAAK,GAC1Cd,EAAS/sE,KAAM1J,EAAG,EAAImN,GAIvB2pE,IAEAN,IArJDoB,GAIA70E,KAAK41C,aAAc,WAAY,IAAItC,GAAwBrZ,EAAc,IACzEj6B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBrZ,EAAav4B,QAAS,IAC/E1B,KAAK41C,aAAc,KAAM,IAAItC,GAAwBogC,EAAU,IAE/C,IAAXV,EAEJhzE,KAAK80E,uBAIL90E,KAAK+0E,mBAuQP,SAASC,GAAqB7uC,EAAQ6sC,GAErCnhC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,sBAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6sC,OAAQA,GAGThzE,KAAKo0C,mBAAoB,IAAI6gC,GAA2B9uC,EAAQ6sC,IAChEhzE,KAAKs0C,gBASN,SAAS2gC,GAA2B9uC,EAAQ6sC,GAE3C,IAAIl5C,GACH,EAAI,EAAI,GAAO,GAAK,EAAI,GAAO,EAAI,GAAK,EAAM,GAAK,GAAK,GAGrD2Z,GACH,EAAI,EAAI,EAAM,EAAI,EAAI,EAAM,EAAI,EAAI,EAAM,EAAI,EAAI,GAGnDw/B,GAAyBv1E,KAAMsC,KAAM85B,EAAU2Z,EAAStN,EAAQ6sC,GAEhEhzE,KAAKkF,KAAO,4BAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6sC,OAAQA,GAeV,SAASkC,GAAoB/uC,EAAQ6sC,GAEpCnhC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,qBAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6sC,OAAQA,GAGThzE,KAAKo0C,mBAAoB,IAAI+gC,GAA0BhvC,EAAQ6sC,IAC/DhzE,KAAKs0C,gBASN,SAAS6gC,GAA0BhvC,EAAQ6sC,GAE1C,IAAIl5C,GACH,EAAG,EAAG,GAAO,EAAG,EAAG,EAAM,EAAG,EAAG,EAAM,GAAK,EAAG,EAAM,EAAG,EAAG,EAAM,EAAG,GAAK,GAGpE2Z,GACH,EAAG,EAAG,EAAM,EAAG,EAAG,EAAM,EAAG,EAAG,EAAM,EAAG,EAAG,EAAM,EAAG,EAAG,EAAM,EAAG,EAAG,EAAM,EAAG,EAAG,EAAM,EAAG,EAAG,GAG3Fw/B,GAAyBv1E,KAAMsC,KAAM85B,EAAU2Z,EAAStN,EAAQ6sC,GAEhEhzE,KAAKkF,KAAO,2BAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6sC,OAAQA,GAeV,SAASoC,GAAqBjvC,EAAQ6sC,GAEpCnhC,GAASn0C,KAAMsC,MAEhBA,KAAKkF,KAAO,sBAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6sC,OAAQA,GAGThzE,KAAKo0C,mBAAoB,IAAIihC,GAA2BlvC,EAAQ6sC,IAChEhzE,KAAKs0C,gBASN,SAAS+gC,GAA2BlvC,EAAQ6sC,GAE3C,IAAIp2E,GAAM,EAAI8F,KAAKg+D,KAAM,IAAQ,EAE7B5mC,IACD,EAAIl9B,EAAI,EAAM,EAAIA,EAAI,GAAO,GAAKA,EAAI,EAAM,GAAKA,EAAI,EACtD,GAAK,EAAIA,EAAM,EAAI,EAAIA,EAAM,GAAK,GAAKA,EAAM,EAAI,GAAKA,EACtDA,EAAI,GAAK,EAAMA,EAAI,EAAI,GAAOA,EAAI,GAAK,GAAOA,EAAI,EAAI,GAGpD62C,GACF,EAAG,GAAK,EAAM,EAAI,EAAI,EAAM,EAAI,EAAI,EAAM,EAAI,EAAG,GAAO,EAAG,GAAI,GAC/D,EAAI,EAAI,EAAM,EAAG,GAAK,EAAK,GAAI,GAAK,EAAK,GAAK,EAAI,EAAM,EAAI,EAAI,EAChE,EAAI,EAAI,EAAM,EAAI,EAAI,EAAM,EAAI,EAAI,EAAM,EAAI,EAAI,EAAM,EAAI,EAAI,EAChE,EAAI,EAAI,EAAM,EAAI,EAAG,GAAO,EAAI,EAAG,GAAO,EAAI,EAAI,EAAM,EAAI,EAAI,GAGlEw/B,GAAyBv1E,KAAMsC,KAAM85B,EAAU2Z,EAAStN,EAAQ6sC,GAEhEhzE,KAAKkF,KAAO,4BAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6sC,OAAQA,GAeV,SAASsC,GAAsBnvC,EAAQ6sC,GAEtCnhC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,uBAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6sC,OAAQA,GAGThzE,KAAKo0C,mBAAoB,IAAImhC,GAA4BpvC,EAAQ6sC,IACjEhzE,KAAKs0C,gBASN,SAASihC,GAA4BpvC,EAAQ6sC,GAE5C,IAAIp2E,GAAM,EAAI8F,KAAKg+D,KAAM,IAAQ,EAC7B5jE,EAAI,EAAIF,EAERk9B,IAGD,GAAK,GAAK,GAAQ,GAAK,EAAI,GAC3B,EAAI,GAAK,GAAQ,EAAI,EAAI,EACzB,GAAK,GAAK,EAAO,GAAK,EAAI,EAC1B,EAAI,GAAK,EAAO,EAAI,EAAI,EAGzB,GAAKh9B,GAAKF,EAAO,GAAKE,EAAIF,EAC1B,EAAIE,GAAKF,EAAO,EAAIE,EAAIF,GAGvBE,GAAKF,EAAI,GAAQE,EAAIF,EAAI,EAC1BE,GAAKF,EAAI,EAAOE,EAAIF,EAAI,GAGvBA,EAAI,GAAKE,EAAOF,EAAI,GAAKE,GACzBF,EAAI,EAAIE,EAAOF,EAAI,EAAIE,GAGtB22C,GACF,EAAG,GAAK,EAAQ,EAAI,EAAG,GAAS,EAAG,GAAI,GACvC,EAAG,GAAI,GAAS,EAAG,GAAK,EAAQ,EAAI,EAAG,GACxC,GAAK,EAAI,EAAO,GAAK,EAAG,GAAQ,GAAI,GAAK,EACxC,EAAI,EAAG,GAAS,EAAG,GAAK,EAAQ,EAAI,EAAG,GACvC,EAAG,GAAK,EAAQ,EAAI,EAAG,GAAS,EAAG,GAAI,GACvC,EAAG,GAAK,EAAQ,EAAI,EAAG,GAAS,EAAG,GAAI,GACvC,EAAG,GAAI,GAAS,EAAG,GAAK,EAAQ,EAAI,EAAG,GACxC,GAAK,EAAI,EAAO,GAAK,EAAG,GAAQ,GAAI,GAAK,EACxC,EAAG,GAAI,GAAS,EAAG,GAAK,EAAQ,EAAI,EAAI,EACzC,GAAK,EAAI,EAAO,GAAK,EAAG,GAAQ,GAAI,GAAK,EACzC,GAAK,EAAG,GAAQ,GAAI,GAAK,EAAO,GAAK,EAAG,GACvC,EAAG,GAAI,GAAS,EAAG,GAAK,EAAQ,EAAI,EAAI,GAG1Cw/B,GAAyBv1E,KAAMsC,KAAM85B,EAAU2Z,EAAStN,EAAQ6sC,GAEhEhzE,KAAKkF,KAAO,6BAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6sC,OAAQA,GAoBV,SAASwC,GAAcjoE,EAAMkoE,EAAiBtvC,EAAQuvC,EAAgBC,EAAQC,GAE7E/jC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,eAEZlF,KAAKukC,YACJh3B,KAAMA,EACNkoE,gBAAiBA,EACjBtvC,OAAQA,EACRuvC,eAAgBA,EAChBC,OAAQA,QAGM5mE,IAAV6mE,GAAsBn3E,QAAQ4pC,KAAM,+CAEzC,IAAIwtC,EAAiB,IAAIC,GAAoBvoE,EAAMkoE,EAAiBtvC,EAAQuvC,EAAgBC,GAI5F31E,KAAK+1E,SAAWF,EAAeE,SAC/B/1E,KAAK0zC,QAAUmiC,EAAeniC,QAC9B1zC,KAAKg2E,UAAYH,EAAeG,UAIhCh2E,KAAKo0C,mBAAoByhC,GACzB71E,KAAKs0C,gBASN,SAASwhC,GAAoBvoE,EAAMkoE,EAAiBtvC,EAAQuvC,EAAgBC,GAiF3E,SAASM,EAAiB74E,GAIzB,IAAI84E,EAAI3oE,EAAK4oE,WAAY/4E,EAAIq4E,GAIzBW,EAAIC,EAAO3iC,QAASt2C,GACpBk5E,EAAID,EAAOL,UAAW54E,GAI1B,IAAM+M,EAAI,EAAGA,GAAKurE,EAAgBvrE,IAAO,CAExC,IAAIC,EAAID,EAAIurE,EAAiBhzE,KAAK8xE,GAAK,EAEnC+B,EAAQ7zE,KAAK6zE,IAAKnsE,GAClBw6D,GAAQliE,KAAKkiE,IAAKx6D,GAItBk8B,EAAO9V,EAAMo0C,EAAMwR,EAAE5lD,EAAI+lD,EAAMD,EAAE9lD,EACjC8V,EAAOljB,EAAMwhD,EAAMwR,EAAEhzD,EAAImzD,EAAMD,EAAElzD,EACjCkjB,EAAOhU,EAAMsyC,EAAMwR,EAAE9jD,EAAIikD,EAAMD,EAAEhkD,EACjCgU,EAAO++B,YAEP3xB,EAAQ/sC,KAAM2/B,EAAO9V,EAAG8V,EAAOljB,EAAGkjB,EAAOhU,GAIzCyJ,EAAOvL,EAAI0lD,EAAE1lD,EAAI2V,EAASG,EAAO9V,EACjCuL,EAAO3Y,EAAI8yD,EAAE9yD,EAAI+iB,EAASG,EAAOljB,EACjC2Y,EAAOzJ,EAAI4jD,EAAE5jD,EAAI6T,EAASG,EAAOhU,EAEjCwH,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,IAM5C,SAASkkD,IAER,IAAMrsE,EAAI,EAAGA,GAAKsrE,EAAiBtrE,IAElC,IAAM/M,EAAI,EAAGA,GAAKs4E,EAAgBt4E,IAAO,CAExC,IAAIF,GAAMw4E,EAAiB,IAAQvrE,EAAI,IAAQ/M,EAAI,GAC/CoK,GAAMkuE,EAAiB,GAAMvrE,GAAM/M,EAAI,GACvCmL,GAAMmtE,EAAiB,GAAMvrE,EAAI/M,EACjCimB,GAAMqyD,EAAiB,IAAQvrE,EAAI,GAAM/M,EAI7Cq2C,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,IAQvB,SAASwxD,IAER,IAAMz3E,EAAI,EAAGA,GAAKq4E,EAAiBr4E,IAElC,IAAM+M,EAAI,EAAGA,GAAKurE,EAAgBvrE,IAEjC8xB,EAAGzL,EAAIpzB,EAAIq4E,EACXx5C,EAAG7Y,EAAIjZ,EAAIurE,EAEX/hC,EAAIhtC,KAAMs1B,EAAGzL,EAAGyL,EAAG7Y,GAvJtB0wB,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,qBAEZlF,KAAKukC,YACJh3B,KAAMA,EACNkoE,gBAAiBA,EACjBtvC,OAAQA,EACRuvC,eAAgBA,EAChBC,OAAQA,GAGTF,EAAkBA,GAAmB,GACrCtvC,EAASA,GAAU,EACnBuvC,EAAiBA,GAAkB,EACnCC,EAASA,IAAU,EAEnB,IAAIU,EAAS9oE,EAAKkpE,oBAAqBhB,EAAiBE,GAIxD31E,KAAK+1E,SAAWM,EAAON,SACvB/1E,KAAK0zC,QAAU2iC,EAAO3iC,QACtB1zC,KAAKg2E,UAAYK,EAAOL,UAIxB,IAII54E,EAAG+M,EAJH4xB,EAAS,IAAIrI,EACb4S,EAAS,IAAI5S,EACbuI,EAAK,IAAI1L,EAMTuJ,KACA4Z,KACAC,KACAF,MAeJ,WAEC,IAAMr2C,EAAI,EAAGA,EAAIq4E,EAAiBr4E,IAEjC64E,EAAiB74E,GASlB64E,GAA8B,IAAXN,EAAqBF,EAAkB,GAK1DZ,IAIA2B,IAjCDE,GAIA12E,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IA4H3D,SAASgjC,GAAmBxwC,EAAQywC,EAAMnB,EAAiBC,EAAgBxxE,EAAG2yE,EAAGC,GAEhFjlC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,oBAEZlF,KAAKukC,YACJ4B,OAAQA,EACRywC,KAAMA,EACNnB,gBAAiBA,EACjBC,eAAgBA,EAChBxxE,EAAGA,EACH2yE,EAAGA,QAGiB9nE,IAAhB+nE,GAA4Br4E,QAAQ4pC,KAAM,4FAE/CroC,KAAKo0C,mBAAoB,IAAI2iC,GAAyB5wC,EAAQywC,EAAMnB,EAAiBC,EAAgBxxE,EAAG2yE,IACxG72E,KAAKs0C,gBASN,SAASyiC,GAAyB5wC,EAAQywC,EAAMnB,EAAiBC,EAAgBxxE,EAAG2yE,GAqInF,SAASG,EAA0B/5E,EAAGiH,EAAG2yE,EAAG1wC,EAAQxvB,GAEnD,IAAIsgE,EAAKv0E,KAAKkiE,IAAK3nE,GACfi6E,EAAKx0E,KAAK6zE,IAAKt5E,GACfk6E,EAAUN,EAAI3yE,EAAIjH,EAClBm6E,EAAK10E,KAAKkiE,IAAKuS,GAEnBxgE,EAAS6Z,EAAI2V,GAAW,EAAIixC,GAAO,GAAMH,EACzCtgE,EAASyM,EAAI+iB,GAAW,EAAIixC,GAAOF,EAAK,GACxCvgE,EAAS2b,EAAI6T,EAASzjC,KAAK6zE,IAAKY,GAAY,GA5I7CrjC,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,0BAEZlF,KAAKukC,YACJ4B,OAAQA,EACRywC,KAAMA,EACNnB,gBAAiBA,EACjBC,eAAgBA,EAChBxxE,EAAGA,EACH2yE,EAAGA,GAGJ1wC,EAASA,GAAU,IACnBywC,EAAOA,GAAQ,GACfnB,EAAkB/yE,KAAKK,MAAO0yE,IAAqB,GACnDC,EAAiBhzE,KAAKK,MAAO2yE,IAAoB,EACjDxxE,EAAIA,GAAK,EACT2yE,EAAIA,GAAK,EAIT,IAOIz5E,EAAG+M,EAPHspC,KACA3Z,KACA4Z,KACAC,KAMA5X,EAAS,IAAIrI,EACb4S,EAAS,IAAI5S,EAEb2jD,EAAK,IAAI3jD,EACT4jD,EAAK,IAAI5jD,EAET4iD,EAAI,IAAI5iD,EACR6jD,EAAI,IAAI7jD,EACR0iD,EAAI,IAAI1iD,EAIZ,IAAMt2B,EAAI,EAAGA,GAAKq4E,IAAoBr4E,EAAI,CAIzC,IAAIH,EAAIG,EAAIq4E,EAAkBvxE,EAAIxB,KAAK8xE,GAAK,EAoB5C,IAfAwC,EAA0B/5E,EAAGiH,EAAG2yE,EAAG1wC,EAAQkxC,GAC3CL,EAA0B/5E,EAAI,IAAMiH,EAAG2yE,EAAG1wC,EAAQmxC,GAIlDC,EAAE1E,WAAYyE,EAAID,GAClBjB,EAAEoB,WAAYF,EAAID,GAClBf,EAAExD,aAAcyE,EAAGnB,GACnBA,EAAEtD,aAAcwD,EAAGiB,GAInBjB,EAAEjR,YACF+Q,EAAE/Q,YAEIl7D,EAAI,EAAGA,GAAKurE,IAAmBvrE,EAAI,CAKxC,IAAIC,EAAID,EAAIurE,EAAiBhzE,KAAK8xE,GAAK,EACnCiD,GAAOb,EAAOl0E,KAAKkiE,IAAKx6D,GACxBstE,EAAKd,EAAOl0E,KAAK6zE,IAAKnsE,GAK1B2xB,EAAOvL,EAAI6mD,EAAG7mD,GAAMinD,EAAKrB,EAAE5lD,EAAIknD,EAAKpB,EAAE9lD,GACtCuL,EAAO3Y,EAAIi0D,EAAGj0D,GAAMq0D,EAAKrB,EAAEhzD,EAAIs0D,EAAKpB,EAAElzD,GACtC2Y,EAAOzJ,EAAI+kD,EAAG/kD,GAAMmlD,EAAKrB,EAAE9jD,EAAIolD,EAAKpB,EAAEhkD,GAEtCwH,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI1CgU,EAAOusC,WAAY92C,EAAQs7C,GAAKhS,YAEhC3xB,EAAQ/sC,KAAM2/B,EAAO9V,EAAG8V,EAAOljB,EAAGkjB,EAAOhU,GAIzCqhB,EAAIhtC,KAAMvJ,EAAIq4E,GACd9hC,EAAIhtC,KAAMwD,EAAIurE,IAQhB,IAAMvrE,EAAI,EAAGA,GAAKsrE,EAAiBtrE,IAElC,IAAM/M,EAAI,EAAGA,GAAKs4E,EAAgBt4E,IAAO,CAIxC,IAAIF,GAAMw4E,EAAiB,IAAQvrE,EAAI,IAAQ/M,EAAI,GAC/CoK,GAAMkuE,EAAiB,GAAMvrE,GAAM/M,EAAI,GACvCmL,GAAMmtE,EAAiB,GAAMvrE,EAAI/M,EACjCimB,GAAMqyD,EAAiB,IAAQvrE,EAAI,GAAM/M,EAI7Cq2C,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,GAQtBrjB,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IA8B3D,SAASgkC,GAAexxC,EAAQywC,EAAMlB,EAAgBD,EAAiBmC,GAEtE/lC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,gBAEZlF,KAAKukC,YACJ4B,OAAQA,EACRywC,KAAMA,EACNlB,eAAgBA,EAChBD,gBAAiBA,EACjBmC,IAAKA,GAGN53E,KAAKo0C,mBAAoB,IAAIyjC,GAAqB1xC,EAAQywC,EAAMlB,EAAgBD,EAAiBmC,IACjG53E,KAAKs0C,gBASN,SAASujC,GAAqB1xC,EAAQywC,EAAMlB,EAAgBD,EAAiBmC,GAE5E9jC,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,sBAEZlF,KAAKukC,YACJ4B,OAAQA,EACRywC,KAAMA,EACNlB,eAAgBA,EAChBD,gBAAiBA,EACjBmC,IAAKA,GAGNzxC,EAASA,GAAU,IACnBywC,EAAOA,GAAQ,GACflB,EAAiBhzE,KAAKK,MAAO2yE,IAAoB,EACjDD,EAAkB/yE,KAAKK,MAAO0yE,IAAqB,EACnDmC,EAAMA,GAAiB,EAAVl1E,KAAK8xE,GAIlB,IAWIrqE,EAAG/M,EAXHq2C,KACA3Z,KACA4Z,KACAC,KAIAzN,EAAS,IAAIxS,EACbqI,EAAS,IAAIrI,EACb4S,EAAS,IAAI5S,EAMjB,IAAMvpB,EAAI,EAAGA,GAAKurE,EAAgBvrE,IAEjC,IAAM/M,EAAI,EAAGA,GAAKq4E,EAAiBr4E,IAAO,CAEzC,IAAIH,EAAIG,EAAIq4E,EAAkBmC,EAC1BxtE,EAAID,EAAIurE,EAAiBhzE,KAAK8xE,GAAK,EAIvCz4C,EAAOvL,GAAM2V,EAASywC,EAAOl0E,KAAKkiE,IAAKx6D,IAAQ1H,KAAKkiE,IAAK3nE,GACzD8+B,EAAO3Y,GAAM+iB,EAASywC,EAAOl0E,KAAKkiE,IAAKx6D,IAAQ1H,KAAK6zE,IAAKt5E,GACzD8+B,EAAOzJ,EAAIskD,EAAOl0E,KAAK6zE,IAAKnsE,GAE5B0vB,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI1C4T,EAAO1V,EAAI2V,EAASzjC,KAAKkiE,IAAK3nE,GAC9BipC,EAAO9iB,EAAI+iB,EAASzjC,KAAK6zE,IAAKt5E,GAC9BqpC,EAAOusC,WAAY92C,EAAQmK,GAASm/B,YAEpC3xB,EAAQ/sC,KAAM2/B,EAAO9V,EAAG8V,EAAOljB,EAAGkjB,EAAOhU,GAIzCqhB,EAAIhtC,KAAMvJ,EAAIq4E,GACd9hC,EAAIhtC,KAAMwD,EAAIurE,GAQhB,IAAMvrE,EAAI,EAAGA,GAAKurE,EAAgBvrE,IAEjC,IAAM/M,EAAI,EAAGA,GAAKq4E,EAAiBr4E,IAAO,CAIzC,IAAIF,GAAMu4E,EAAkB,GAAMtrE,EAAI/M,EAAI,EACtCoK,GAAMiuE,EAAkB,IAAQtrE,EAAI,GAAM/M,EAAI,EAC9CmL,GAAMktE,EAAkB,IAAQtrE,EAAI,GAAM/M,EAC1CimB,GAAMoyD,EAAkB,GAAMtrE,EAAI/M,EAItCq2C,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,GAQtBrjB,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IAstB3D,SAASmkC,GAAiBC,EAAQlzE,GAEjCgtC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,kBAEZlF,KAAKukC,YACJwzC,OAAQA,EACRlzE,QAASA,GAGV7E,KAAKo0C,mBAAoB,IAAI4jC,GAAuBD,EAAQlzE,IAC5D7E,KAAKs0C,gBASN,SAAS0jC,GAAuBD,EAAQlzE,QAEZ,IAAf,IAMZivC,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,wBAEZ6yE,EAAS1sE,MAAMgX,QAAS01D,GAAWA,GAAWA,GAE9C/3E,KAAKi4E,aAAcF,EAAQlzE,GAE3B7E,KAAK80E,wBA2vBN,SAASoD,GAAeC,EAAM5zC,GAE7BsN,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,eAEZlF,KAAKukC,YACJ4zC,KAAMA,EACN5zC,WAAYA,GAGbvkC,KAAKo0C,mBAAoB,IAAIgkC,GAAoBD,EAAM5zC,IACvDvkC,KAAKs0C,gBASN,SAAS8jC,GAAoBD,EAAM5zC,GAIlC,IAAI8zC,GAFJ9zC,EAAaA,OAES8zC,KAEtB,IAASA,IAAQA,EAAKC,OAGrB,OADA75E,QAAQqT,MAAO,wEACR,IAAI+/B,GAIZ,IAAIkmC,EAASM,EAAKE,eAAgBJ,EAAM5zC,EAAW9+B,KAAM8+B,EAAWi0C,eAIpEj0C,EAAWk0C,YAA+B1pE,IAAtBw1B,EAAW7R,OAAuB6R,EAAW7R,OAAS,QAIvC3jB,IAA9Bw1B,EAAWm0C,iBAA+Bn0C,EAAWm0C,eAAiB,SAC7C3pE,IAAzBw1B,EAAWo0C,YAA0Bp0C,EAAWo0C,UAAY,QAChC5pE,IAA5Bw1B,EAAWq0C,eAA6Br0C,EAAWq0C,cAAe,GAEvEZ,GAAsBt6E,KAAMsC,KAAM+3E,EAAQxzC,GAE1CvkC,KAAKkF,KAAO,qBAeb,SAAS2zE,GAAgB1yC,EAAQ8N,EAAeC,EAAgB4kC,EAAUC,EAAWC,EAAYC,GAEhGpnC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,iBAEZlF,KAAKukC,YACJ4B,OAAQA,EACR8N,cAAeA,EACfC,eAAgBA,EAChB4kC,SAAUA,EACVC,UAAWA,EACXC,WAAYA,EACZC,YAAaA,GAGdj5E,KAAKo0C,mBAAoB,IAAI8kC,GAAsB/yC,EAAQ8N,EAAeC,EAAgB4kC,EAAUC,EAAWC,EAAYC,IAC3Hj5E,KAAKs0C,gBASN,SAAS4kC,GAAsB/yC,EAAQ8N,EAAeC,EAAgB4kC,EAAUC,EAAWC,EAAYC,GAEtGnlC,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,uBAEZlF,KAAKukC,YACJ4B,OAAQA,EACR8N,cAAeA,EACfC,eAAgBA,EAChB4kC,SAAUA,EACVC,UAAWA,EACXC,WAAYA,EACZC,YAAaA,GAGd9yC,EAASA,GAAU,GAEnB8N,EAAgBvxC,KAAKL,IAAK,EAAGK,KAAKK,MAAOkxC,IAAmB,GAC5DC,EAAiBxxC,KAAKL,IAAK,EAAGK,KAAKK,MAAOmxC,IAAoB,GAE9D4kC,OAAwB/pE,IAAb+pE,EAAyBA,EAAW,EAC/CC,OAA0BhqE,IAAdgqE,EAA0BA,EAAsB,EAAVr2E,KAAK8xE,GAKvD,IAEI5/B,EAAIC,EAFJskC,GAHJH,OAA4BjqE,IAAfiqE,EAA2BA,EAAa,IACrDC,OAA8BlqE,IAAhBkqE,EAA4BA,EAAcv2E,KAAK8xE,IAMzD/rE,EAAQ,EACR2wE,KAEAr9C,EAAS,IAAIrI,EACb4S,EAAS,IAAI5S,EAIb+f,KACA3Z,KACA4Z,KACAC,KAIJ,IAAMkB,EAAK,EAAGA,GAAMX,EAAgBW,IAAQ,CAE3C,IAAIwkC,KAEAjvE,EAAIyqC,EAAKX,EAEb,IAAMU,EAAK,EAAGA,GAAMX,EAAeW,IAAQ,CAE1C,IAAI33C,EAAI23C,EAAKX,EAIblY,EAAOvL,GAAM2V,EAASzjC,KAAKkiE,IAAKkU,EAAW77E,EAAI87E,GAAcr2E,KAAK6zE,IAAKyC,EAAa5uE,EAAI6uE,GACxFl9C,EAAO3Y,EAAI+iB,EAASzjC,KAAKkiE,IAAKoU,EAAa5uE,EAAI6uE,GAC/Cl9C,EAAOzJ,EAAI6T,EAASzjC,KAAK6zE,IAAKuC,EAAW77E,EAAI87E,GAAcr2E,KAAK6zE,IAAKyC,EAAa5uE,EAAI6uE,GAEtFn/C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI1CgU,EAAO5hC,IAAKq3B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAAI+yC,YAC3C3xB,EAAQ/sC,KAAM2/B,EAAO9V,EAAG8V,EAAOljB,EAAGkjB,EAAOhU,GAIzCqhB,EAAIhtC,KAAM1J,EAAG,EAAImN,GAEjBivE,EAAY1yE,KAAM8B,KAInB2wE,EAAKzyE,KAAM0yE,GAMZ,IAAMxkC,EAAK,EAAGA,EAAKX,EAAgBW,IAElC,IAAMD,EAAK,EAAGA,EAAKX,EAAeW,IAAQ,CAEzC,IAAI13C,EAAIk8E,EAAMvkC,GAAMD,EAAK,GACrBptC,EAAI4xE,EAAMvkC,GAAMD,GAChBrsC,EAAI6wE,EAAMvkC,EAAK,GAAKD,GACpBvxB,EAAI+1D,EAAMvkC,EAAK,GAAKD,EAAK,IAEjB,IAAPC,GAAYmkC,EAAa,IAAIvlC,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,IACjDwxB,IAAOX,EAAiB,GAAKilC,EAAWz2E,KAAK8xE,KAAK/gC,EAAQ9sC,KAAMa,EAAGe,EAAG8a,GAQ7ErjB,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IAc3D,SAAS2lC,GAAcC,EAAaC,EAAaC,EAAeC,EAAaV,EAAYC,GAExFpnC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,eAEZlF,KAAKukC,YACJg1C,YAAaA,EACbC,YAAaA,EACbC,cAAeA,EACfC,YAAaA,EACbV,WAAYA,EACZC,YAAaA,GAGdj5E,KAAKo0C,mBAAoB,IAAIulC,GAAoBJ,EAAaC,EAAaC,EAAeC,EAAaV,EAAYC,IACnHj5E,KAAKs0C,gBASN,SAASqlC,GAAoBJ,EAAaC,EAAaC,EAAeC,EAAaV,EAAYC,GAE9FnlC,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,qBAEZlF,KAAKukC,YACJg1C,YAAaA,EACbC,YAAaA,EACbC,cAAeA,EACfC,YAAaA,EACbV,WAAYA,EACZC,YAAaA,GAGdM,EAAcA,GAAe,GAC7BC,EAAcA,GAAe,GAE7BR,OAA4BjqE,IAAfiqE,EAA2BA,EAAa,EACrDC,OAA8BlqE,IAAhBkqE,EAA4BA,EAAwB,EAAVv2E,KAAK8xE,GAE7DiF,OAAkC1qE,IAAlB0qE,EAA8B/2E,KAAKL,IAAK,EAAGo3E,GAAkB,EAK7E,IAOIG,EAKAzvE,EAAG/M,EAZHq2C,KACA3Z,KACA4Z,KACAC,KAKAxN,EAASozC,EACTM,GAAiBL,EAAcD,IAbnCG,OAA8B3qE,IAAhB2qE,EAA4Bh3E,KAAKL,IAAK,EAAGq3E,GAAgB,GAcnE39C,EAAS,IAAIrI,EACbuI,EAAK,IAAI1L,EAKb,IAAMpmB,EAAI,EAAGA,GAAKuvE,EAAavvE,IAAO,CAErC,IAAM/M,EAAI,EAAGA,GAAKq8E,EAAer8E,IAIhCw8E,EAAUZ,EAAa57E,EAAIq8E,EAAgBR,EAI3Cl9C,EAAOvL,EAAI2V,EAASzjC,KAAKkiE,IAAKgV,GAC9B79C,EAAO3Y,EAAI+iB,EAASzjC,KAAK6zE,IAAKqD,GAE9B9/C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI1CohB,EAAQ/sC,KAAM,EAAG,EAAG,GAIpBs1B,EAAGzL,GAAMuL,EAAOvL,EAAIgpD,EAAc,GAAM,EACxCv9C,EAAG7Y,GAAM2Y,EAAO3Y,EAAIo2D,EAAc,GAAM,EAExC7lC,EAAIhtC,KAAMs1B,EAAGzL,EAAGyL,EAAG7Y,GAMpB+iB,GAAU0zC,EAMX,IAAM1vE,EAAI,EAAGA,EAAIuvE,EAAavvE,IAAO,CAEpC,IAAI2vE,EAAoB3vE,GAAMsvE,EAAgB,GAE9C,IAAMr8E,EAAI,EAAGA,EAAIq8E,EAAer8E,IAAO,CAItC,IAAIF,EAFJ08E,EAAUx8E,EAAI08E,EAGVtyE,EAAIoyE,EAAUH,EAAgB,EAC9BlxE,EAAIqxE,EAAUH,EAAgB,EAC9Bp2D,EAAIu2D,EAAU,EAIlBnmC,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,IAQtBrjB,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IAgB3D,SAASomC,GAAerP,EAAQsP,EAAUlB,EAAUC,GAEnDlnC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,gBAEZlF,KAAKukC,YACJmmC,OAAQA,EACRsP,SAAUA,EACVlB,SAAUA,EACVC,UAAWA,GAGZ/4E,KAAKo0C,mBAAoB,IAAI6lC,GAAqBvP,EAAQsP,EAAUlB,EAAUC,IAC9E/4E,KAAKs0C,gBASN,SAAS2lC,GAAqBvP,EAAQsP,EAAUlB,EAAUC,GAEzDjlC,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,sBAEZlF,KAAKukC,YACJmmC,OAAQA,EACRsP,SAAUA,EACVlB,SAAUA,EACVC,UAAWA,GAGZiB,EAAWt3E,KAAKK,MAAOi3E,IAAc,GACrClB,EAAWA,GAAY,EACvBC,EAAYA,GAAuB,EAAVr2E,KAAK8xE,GAI9BuE,EAAY5nD,GAAM+oD,MAAOnB,EAAW,EAAa,EAAVr2E,KAAK8xE,IAK5C,IAMI2F,EAIA/8E,EAAG+M,EAVHspC,KACA3Z,KACA6Z,KAKAymC,EAAkB,EAAMJ,EACxBj+C,EAAS,IAAIrI,EACbuI,EAAK,IAAI1L,EAKb,IAAMnzB,EAAI,EAAGA,GAAK48E,EAAU58E,IAAO,CAElC,IAAIi9E,EAAMvB,EAAW17E,EAAIg9E,EAAkBrB,EAEvCxC,EAAM7zE,KAAK6zE,IAAK8D,GAChBzV,EAAMliE,KAAKkiE,IAAKyV,GAEpB,IAAMlwE,EAAI,EAAGA,GAAOugE,EAAO/sE,OAAS,EAAKwM,IAIxC4xB,EAAOvL,EAAIk6C,EAAQvgE,GAAIqmB,EAAI+lD,EAC3Bx6C,EAAO3Y,EAAIsnD,EAAQvgE,GAAIiZ,EACvB2Y,EAAOzJ,EAAIo4C,EAAQvgE,GAAIqmB,EAAIo0C,EAE3B9qC,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI1C2J,EAAGzL,EAAIpzB,EAAI48E,EACX/9C,EAAG7Y,EAAIjZ,GAAMugE,EAAO/sE,OAAS,GAE7Bg2C,EAAIhtC,KAAMs1B,EAAGzL,EAAGyL,EAAG7Y,GASrB,IAAMhmB,EAAI,EAAGA,EAAI48E,EAAU58E,IAE1B,IAAM+M,EAAI,EAAGA,EAAMugE,EAAO/sE,OAAS,EAAKwM,IAAO,CAI9C,IAAIjN,EAFJi9E,EAAOhwE,EAAI/M,EAAIstE,EAAO/sE,OAGlB6J,EAAI2yE,EAAOzP,EAAO/sE,OAClB4K,EAAI4xE,EAAOzP,EAAO/sE,OAAS,EAC3B0lB,EAAI82D,EAAO,EAIf1mC,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,GAmBtB,GAXArjB,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IAI1D3zC,KAAK80E,uBAKAiE,IAAwB,EAAVr2E,KAAK8xE,GAAS,CAEhC,IAAI9gC,EAAU1zC,KAAK87B,WAAWwK,OAAO7lB,MACjC65D,EAAK,IAAI5mD,EACT6mD,EAAK,IAAI7mD,EACT72B,EAAI,IAAI62B,EAMZ,IAFAymD,EAAOH,EAAWtP,EAAO/sE,OAAS,EAE5BP,EAAI,EAAG+M,EAAI,EAAG/M,EAAIstE,EAAO/sE,OAAQP,IAAM+M,GAAK,EAIjDmwE,EAAG9pD,EAAIkjB,EAASvpC,EAAI,GACpBmwE,EAAGl3D,EAAIswB,EAASvpC,EAAI,GACpBmwE,EAAGhoD,EAAIohB,EAASvpC,EAAI,GAIpBowE,EAAG/pD,EAAIkjB,EAASymC,EAAOhwE,EAAI,GAC3BowE,EAAGn3D,EAAIswB,EAASymC,EAAOhwE,EAAI,GAC3BowE,EAAGjoD,EAAIohB,EAASymC,EAAOhwE,EAAI,GAI3BtN,EAAE26E,WAAY8C,EAAIC,GAAKlV,YAIvB3xB,EAASvpC,EAAI,GAAMupC,EAASymC,EAAOhwE,EAAI,GAAMtN,EAAE2zB,EAC/CkjB,EAASvpC,EAAI,GAAMupC,EAASymC,EAAOhwE,EAAI,GAAMtN,EAAEumB,EAC/CswB,EAASvpC,EAAI,GAAMupC,EAASymC,EAAOhwE,EAAI,GAAMtN,EAAEy1B,GAkBlD,SAASkoD,GAAezC,EAAQS,GAE/B3mC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,gBAEkB,iBAAlBszE,IAEX/5E,QAAQ4pC,KAAM,4DAEdmwC,EAAgBA,EAAcA,eAI/Bx4E,KAAKukC,YACJwzC,OAAQA,EACRS,cAAeA,GAGhBx4E,KAAKo0C,mBAAoB,IAAIqmC,GAAqB1C,EAAQS,IAC1Dx4E,KAAKs0C,gBASN,SAASmmC,GAAqB1C,EAAQS,GAwDrC,SAASkC,EAAUC,GAElB,IAAIv9E,EAAGI,EAAGo9E,EAENC,EAAc/gD,EAASn8B,OAAS,EAChC+sE,EAASiQ,EAAMG,cAAetC,GAE9BuC,EAAgBrQ,EAAOiQ,MACvBK,EAAatQ,EAAOuQ,MAIxB,IAAiD,IAA5CC,GAAWC,YAAaJ,GAM5B,IAJAA,EAAgBA,EAAcK,UAIxBh+E,EAAI,EAAGI,EAAIw9E,EAAWr9E,OAAQP,EAAII,EAAGJ,IAE1Cw9E,EAAYI,EAAY59E,IAEqB,IAAxC89E,GAAWC,YAAaP,KAE5BI,EAAY59E,GAAMw9E,EAAUQ,WAQ/B,IAAIrhD,EAAQmhD,GAAWG,iBAAkBN,EAAeC,GAIxD,IAAM59E,EAAI,EAAGI,EAAIw9E,EAAWr9E,OAAQP,EAAII,EAAGJ,IAE1Cw9E,EAAYI,EAAY59E,GACxB29E,EAAgBA,EAAc30E,OAAQw0E,GAMvC,IAAMx9E,EAAI,EAAGI,EAAIu9E,EAAcp9E,OAAQP,EAAII,EAAGJ,IAAO,CAEpD,IAAI2+B,EAASg/C,EAAe39E,GAE5B08B,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG,GACnCswB,EAAQ/sC,KAAM,EAAG,EAAG,GACpBgtC,EAAIhtC,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,GAM5B,IAAMhmB,EAAI,EAAGI,EAAIu8B,EAAMp8B,OAAQP,EAAII,EAAGJ,IAAO,CAE5C,IAAIowC,EAAOzT,EAAO38B,GAEdF,EAAIswC,EAAM,GAAMqtC,EAChBrzE,EAAIgmC,EAAM,GAAMqtC,EAChBtyE,EAAIilC,EAAM,GAAMqtC,EAEpBpnC,EAAQ9sC,KAAMzJ,EAAGsK,EAAGe,GACpB+sC,GAAc,GAxHhBxB,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,sBAEZlF,KAAKukC,YACJwzC,OAAQA,EACRS,cAAeA,GAGhBA,EAAgBA,GAAiB,GAIjC,IAAI/kC,KACA3Z,KACA4Z,KACAC,KAIA+B,EAAa,EACbJ,EAAa,EAIjB,IAAiC,IAA5BjqC,MAAMgX,QAAS01D,GAEnB2C,EAAU3C,QAIV,IAAM,IAAI36E,EAAI,EAAGA,EAAI26E,EAAOp6E,OAAQP,IAEnCs9E,EAAU3C,EAAQ36E,IAElB4C,KAAKy1C,SAAUC,EAAYJ,EAAYl4C,GAEvCs4C,GAAcJ,EACdA,EAAa,EAQft1C,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IAuF3D,SAAS2nC,GAAe7zC,EAAU8zC,GAEjCznC,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,gBAEZlF,KAAKukC,YACJg3C,eAAgBA,GAGjBA,OAAsCxsE,IAAnBwsE,EAAiCA,EAAiB,EAIrE,IAKiC1J,EAAOC,EACpC7zE,EAIAu9E,EAVA1hD,KAIA2hD,EAAe/4E,KAAKkiE,IAAKzzC,GAAMuqD,QAAUH,GACzCxJ,GAAS,EAAG,GAAKC,KACZ7iE,GAAS,IAAK,IAAK,KAMvBs4B,EAASQ,kBAEbuzC,EAAY,IAAI3pC,IACNuC,mBAAoB3M,GAI9B+zC,EAAY/zC,EAAS73B,QAItB4rE,EAAUlnC,gBACVknC,EAAUG,qBAOV,IAAM,IALFC,EAAiBJ,EAAU1hD,SAC3BC,EAAQyhD,EAAUzhD,MAIZ38B,EAAI,EAAGI,EAAIu8B,EAAMp8B,OAAQP,EAAII,EAAGJ,IAIzC,IAAM,IAFFowC,EAAOzT,EAAO38B,GAER+M,EAAI,EAAGA,EAAI,EAAGA,IAEvB0nE,EAAQrkC,EAAMr+B,EAAMhF,IACpB2nE,EAAQtkC,EAAMr+B,GAAQhF,EAAI,GAAM,IAChC4nE,EAAM,GAAMrvE,KAAKN,IAAKyvE,EAAOC,GAC7BC,EAAM,GAAMrvE,KAAKL,IAAKwvE,EAAOC,QAIP/iE,IAAjBijE,EAFL/zE,EAAM8zE,EAAM,GAAM,IAAMA,EAAM,IAI7BC,EAAO/zE,IAAUg0E,OAAQF,EAAM,GAAKG,OAAQH,EAAM,GAAK8J,MAAOz+E,EAAG0+E,WAAO/sE,GAIxEijE,EAAO/zE,GAAM69E,MAAQ1+E,EAUxB,IAAMa,KAAO+zE,EAAQ,CAEpB,IAAIr1E,EAAIq1E,EAAO/zE,GAIf,QAAiB8Q,IAAZpS,EAAEm/E,OAAuB/hD,EAAOp9B,EAAEk/E,OAAQv1C,OAAOy1C,IAAKhiD,EAAOp9B,EAAEm/E,OAAQx1C,SAAYm1C,EAAe,CAEtG,IAAI1/C,EAAS6/C,EAAgBj/E,EAAEs1E,QAC/Bn4C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAE1CyJ,EAAS6/C,EAAgBj/E,EAAEu1E,QAC3Bp4C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,IAQ5CtyB,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IActE,SAASkiD,GAAkBC,EAAWC,EAAcxpD,EAAQgjD,EAAgBxhC,EAAgBioC,EAAWnD,EAAYC,GAElHpnC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,mBAEZlF,KAAKukC,YACJ03C,UAAWA,EACXC,aAAcA,EACdxpD,OAAQA,EACRgjD,eAAgBA,EAChBxhC,eAAgBA,EAChBioC,UAAWA,EACXnD,WAAYA,EACZC,YAAaA,GAGdj5E,KAAKo0C,mBAAoB,IAAIgoC,GAAwBH,EAAWC,EAAcxpD,EAAQgjD,EAAgBxhC,EAAgBioC,EAAWnD,EAAYC,IAC7Ij5E,KAAKs0C,gBASN,SAAS8nC,GAAwBH,EAAWC,EAAcxpD,EAAQgjD,EAAgBxhC,EAAgBioC,EAAWnD,EAAYC,GA8JxH,SAASoD,EAAazlE,GAErB,IAAI4Z,EAAG8rD,EAAkBC,EAErBtgD,EAAK,IAAI1L,EACTwL,EAAS,IAAIrI,EAEb4hB,EAAa,EAEbnP,GAAmB,IAARvvB,EAAiBqlE,EAAYC,EACxCM,GAAiB,IAAR5lE,EAAiB,GAAM,EASpC,IANA0lE,EAAmB7zE,EAMb+nB,EAAI,EAAGA,GAAKklD,EAAgBllD,IAIjCsJ,EAASnzB,KAAM,EAAG80C,EAAa+gC,EAAM,GAIrC9oC,EAAQ/sC,KAAM,EAAG61E,EAAM,GAIvB7oC,EAAIhtC,KAAM,GAAK,IAIf8B,IAUD,IAJA8zE,EAAiB9zE,EAIX+nB,EAAI,EAAGA,GAAKklD,EAAgBllD,IAAO,CAExC,IACIisD,EADIjsD,EAAIklD,EACIuD,EAAcD,EAE1B0D,EAAWh6E,KAAKkiE,IAAK6X,GACrBE,EAAWj6E,KAAK6zE,IAAKkG,GAIzB1gD,EAAOvL,EAAI2V,EAASw2C,EACpB5gD,EAAO3Y,EAAIq4B,EAAa+gC,EACxBzgD,EAAOzJ,EAAI6T,EAASu2C,EACpB5iD,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI1CohB,EAAQ/sC,KAAM,EAAG61E,EAAM,GAIvBvgD,EAAGzL,EAAiB,GAAXksD,EAAmB,GAC5BzgD,EAAG7Y,EAAiB,GAAXu5D,EAAiBH,EAAS,GACnC7oC,EAAIhtC,KAAMs1B,EAAGzL,EAAGyL,EAAG7Y,GAInB3a,IAMD,IAAM+nB,EAAI,EAAGA,EAAIklD,EAAgBllD,IAAO,CAEvC,IAAIjoB,EAAI+zE,EAAmB9rD,EACvBpzB,EAAIm/E,EAAiB/rD,GAEZ,IAAR5Z,EAIJ68B,EAAQ9sC,KAAMvJ,EAAGA,EAAI,EAAGmL,GAMxBkrC,EAAQ9sC,KAAMvJ,EAAI,EAAGA,EAAGmL,GAIzB+sC,GAAc,EAMftM,EAAMyM,SAAUC,EAAYJ,GAAoB,IAAR1+B,EAAe,EAAI,GAI3D8+B,GAAcJ,EAvQfxB,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,yBAEZlF,KAAKukC,YACJ03C,UAAWA,EACXC,aAAcA,EACdxpD,OAAQA,EACRgjD,eAAgBA,EAChBxhC,eAAgBA,EAChBioC,UAAWA,EACXnD,WAAYA,EACZC,YAAaA,GAGd,IAAIjwC,EAAQhpC,KAEZi8E,OAA0BltE,IAAdktE,EAA0BA,EAAY,GAClDC,OAAgCntE,IAAjBmtE,EAA6BA,EAAe,GAC3DxpD,OAAoB3jB,IAAX2jB,EAAuBA,EAAS,IAEzCgjD,EAAiBhzE,KAAKK,MAAO2yE,IAAoB,EACjDxhC,EAAiBxxC,KAAKK,MAAOmxC,IAAoB,EAEjDioC,OAA0BptE,IAAdotE,GAA0BA,EACtCnD,OAA4BjqE,IAAfiqE,EAA2BA,EAAa,EACrDC,OAA8BlqE,IAAhBkqE,EAA4BA,EAAc,EAAMv2E,KAAK8xE,GAInE,IAAI/gC,KACA3Z,KACA4Z,KACAC,KAIAlrC,EAAQ,EACRm0E,KACAnhC,EAAa/oB,EAAS,EACtBgjB,EAAa,GAoBjB,WAEC,IAAIllB,EAAGpN,EACHkjB,EAAS,IAAI5S,EACbqI,EAAS,IAAIrI,EAEb4hB,EAAa,EAGbunC,GAAUX,EAAeD,GAAcvpD,EAI3C,IAAMtP,EAAI,EAAGA,GAAK8wB,EAAgB9wB,IAAO,CAExC,IAAI05D,KAEA1yE,EAAIgZ,EAAI8wB,EAIR/N,EAAS/7B,GAAM8xE,EAAeD,GAAcA,EAEhD,IAAMzrD,EAAI,EAAGA,GAAKklD,EAAgBllD,IAAO,CAExC,IAAIvzB,EAAIuzB,EAAIklD,EAER+G,EAAQx/E,EAAIg8E,EAAcD,EAE1B2D,EAAWj6E,KAAK6zE,IAAKkG,GACrBC,EAAWh6E,KAAKkiE,IAAK6X,GAIzB1gD,EAAOvL,EAAI2V,EAASw2C,EACpB5gD,EAAO3Y,GAAMhZ,EAAIsoB,EAAS+oB,EAC1B1f,EAAOzJ,EAAI6T,EAASu2C,EACpB5iD,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI1CgU,EAAO5hC,IAAKi4E,EAAUE,EAAOH,GAAWrX,YACxC3xB,EAAQ/sC,KAAM2/B,EAAO9V,EAAG8V,EAAOljB,EAAGkjB,EAAOhU,GAIzCqhB,EAAIhtC,KAAM1J,EAAG,EAAImN,GAIjB0yE,EAASn2E,KAAM8B,KAMhBm0E,EAAWj2E,KAAMm2E,GAMlB,IAAMtsD,EAAI,EAAGA,EAAIklD,EAAgBllD,IAEhC,IAAMpN,EAAI,EAAGA,EAAI8wB,EAAgB9wB,IAAO,CAIvC,IAAIlmB,EAAI0/E,EAAYx5D,GAAKoN,GACrBhpB,EAAIo1E,EAAYx5D,EAAI,GAAKoN,GACzBjoB,EAAIq0E,EAAYx5D,EAAI,GAAKoN,EAAI,GAC7BnN,EAAIu5D,EAAYx5D,GAAKoN,EAAI,GAI7BijB,EAAQ9sC,KAAMzJ,EAAGsK,EAAG6b,GACpBowB,EAAQ9sC,KAAMa,EAAGe,EAAG8a,GAIpBiyB,GAAc,EAQhBtM,EAAMyM,SAAUC,EAAYJ,EAAY,GAIxCI,GAAcJ,EA5GfynC,IAEmB,IAAdZ,IAECF,EAAY,GAAII,GAAa,GAC7BH,EAAe,GAAIG,GAAa,IAMtCr8E,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IA4N3D,SAASqpC,GAAc72C,EAAQzT,EAAQgjD,EAAgBxhC,EAAgBioC,EAAWnD,EAAYC,GAE7F+C,GAAiBt+E,KAAMsC,KAAM,EAAGmmC,EAAQzT,EAAQgjD,EAAgBxhC,EAAgBioC,EAAWnD,EAAYC,GAEvGj5E,KAAKkF,KAAO,eAEZlF,KAAKukC,YACJ4B,OAAQA,EACRzT,OAAQA,EACRgjD,eAAgBA,EAChBxhC,eAAgBA,EAChBioC,UAAWA,EACXnD,WAAYA,EACZC,YAAaA,GAUf,SAASgE,GAAoB92C,EAAQzT,EAAQgjD,EAAgBxhC,EAAgBioC,EAAWnD,EAAYC,GAEnGmD,GAAuB1+E,KAAMsC,KAAM,EAAGmmC,EAAQzT,EAAQgjD,EAAgBxhC,EAAgBioC,EAAWnD,EAAYC,GAE7Gj5E,KAAKkF,KAAO,qBAEZlF,KAAKukC,YACJ4B,OAAQA,EACRzT,OAAQA,EACRgjD,eAAgBA,EAChBxhC,eAAgBA,EAChBioC,UAAWA,EACXnD,WAAYA,EACZC,YAAaA,GAgBf,SAASiE,GAAgB/2C,EAAQ6zC,EAAUhB,EAAYC,GAEtDpnC,GAASn0C,KAAMsC,MAEfA,KAAKkF,KAAO,iBAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6zC,SAAUA,EACVhB,WAAYA,EACZC,YAAaA,GAGdj5E,KAAKo0C,mBAAoB,IAAI+oC,GAAsBh3C,EAAQ6zC,EAAUhB,EAAYC,IACjFj5E,KAAKs0C,gBASN,SAAS6oC,GAAsBh3C,EAAQ6zC,EAAUhB,EAAYC,GAE5DnlC,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,uBAEZlF,KAAKukC,YACJ4B,OAAQA,EACR6zC,SAAUA,EACVhB,WAAYA,EACZC,YAAaA,GAGd9yC,EAASA,GAAU,GACnB6zC,OAAwBjrE,IAAbirE,EAAyBt3E,KAAKL,IAAK,EAAG23E,GAAa,EAE9DhB,OAA4BjqE,IAAfiqE,EAA2BA,EAAa,EACrDC,OAA8BlqE,IAAhBkqE,EAA4BA,EAAwB,EAAVv2E,KAAK8xE,GAI7D,IAOIp3E,EAAGL,EAPH02C,KACA3Z,KACA4Z,KACAC,KAKA5X,EAAS,IAAIrI,EACbuI,EAAK,IAAI1L,EAQb,IAJAuJ,EAASnzB,KAAM,EAAG,EAAG,GACrB+sC,EAAQ/sC,KAAM,EAAG,EAAG,GACpBgtC,EAAIhtC,KAAM,GAAK,IAET5J,EAAI,EAAGK,EAAI,EAAGL,GAAKi9E,EAAUj9E,IAAMK,GAAK,EAAI,CAEjD,IAAIw8E,EAAUZ,EAAaj8E,EAAIi9E,EAAWf,EAI1Cl9C,EAAOvL,EAAI2V,EAASzjC,KAAKkiE,IAAKgV,GAC9B79C,EAAO3Y,EAAI+iB,EAASzjC,KAAK6zE,IAAKqD,GAE9B9/C,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAI1CohB,EAAQ/sC,KAAM,EAAG,EAAG,GAIpBs1B,EAAGzL,GAAMsJ,EAAU18B,GAAM+oC,EAAS,GAAM,EACxClK,EAAG7Y,GAAM0W,EAAU18B,EAAI,GAAM+oC,EAAS,GAAM,EAE5CwN,EAAIhtC,KAAMs1B,EAAGzL,EAAGyL,EAAG7Y,GAMpB,IAAMhmB,EAAI,EAAGA,GAAK48E,EAAU58E,IAE3Bq2C,EAAQ9sC,KAAMvJ,EAAGA,EAAI,EAAG,GAMzB4C,KAAK21C,SAAUlC,GACfzzC,KAAK41C,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACrE95B,KAAK41C,aAAc,SAAU,IAAItC,GAAwBI,EAAS,IAClE1zC,KAAK41C,aAAc,KAAM,IAAItC,GAAwBK,EAAK,IA8D3D,SAASypC,GAAgB74C,GAExBD,EAAe5mC,KAAMsC,MACpBk8B,SAAU2P,GAAcwxC,OACvBjb,GAAYt/B,QAEXzG,SAAWl9B,MAAO,MAGpBw8B,aAAcmjB,GAA2B,YACzCljB,eAAgBkjB,GAA2B,cAG5C9+C,KAAK8iC,QAAS,EACd9iC,KAAKsjC,aAAc,EAEnBplC,OAAOmB,iBAAkBW,MACxBq8B,SACC58B,YAAY,EACZgB,IAAK,WACJ,OAAOT,KAAKk8B,SAASG,QAAQl9B,OAE9BuF,IAAK,SAAWvF,GACfa,KAAKk8B,SAASG,QAAQl9B,MAAQA,MAKjCa,KAAKwlC,UAAWjB,GAajB,SAAS+4C,GAAmB/4C,GAE3BD,EAAe5mC,KAAMsC,KAAMukC,GAE3BvkC,KAAKkF,KAAO,oBA4Db,SAASo/C,GAAsB/f,GAE9B3B,EAASllC,KAAMsC,MAEfA,KAAKwkC,SAAY+4C,SAAY,IAE7Bv9E,KAAKkF,KAAO,uBAEZlF,KAAKwI,MAAQ,IAAIixB,EAAO,UACxBz5B,KAAKsjE,UAAY,GACjBtjE,KAAKujE,UAAY,GAEjBvjE,KAAKqc,IAAM,KAEXrc,KAAKo2C,SAAW,KAChBp2C,KAAKq2C,kBAAoB,EAEzBr2C,KAAKs2C,MAAQ,KACbt2C,KAAKu2C,eAAiB,EAEtBv2C,KAAK0iE,SAAW,IAAIjpC,EAAO,GAC3Bz5B,KAAK2iE,kBAAoB,EACzB3iE,KAAK4gD,YAAc,KAEnB5gD,KAAKy9C,QAAU,KACfz9C,KAAKojE,UAAY,EAEjBpjE,KAAK09C,UAAY,KACjB19C,KAAKqjE,YAAc,IAAI9yC,EAAS,EAAG,GAEnCvwB,KAAK6lC,gBAAkB,KACvB7lC,KAAK8lC,kBAAoB,EACzB9lC,KAAK+lC,iBAAmB,EAExB/lC,KAAK6gD,aAAe,KAEpB7gD,KAAK8gD,aAAe,KAEpB9gD,KAAK4lC,SAAW,KAEhB5lC,KAAKy2C,OAAS,KACdz2C,KAAKwjE,gBAAkB,EAEvBxjE,KAAK62C,gBAAkB,IAEvB72C,KAAK0kC,WAAY,EACjB1kC,KAAK2kC,mBAAqB,EAC1B3kC,KAAK82C,iBAAmB,QACxB92C,KAAK+2C,kBAAoB,QAEzB/2C,KAAK6kC,UAAW,EAChB7kC,KAAK8kC,cAAe,EACpB9kC,KAAK+kC,cAAe,EAEpB/kC,KAAKwlC,UAAWjB,GAyEjB,SAASggB,GAAsBhgB,GAE9B+f,GAAqB5mD,KAAMsC,MAE3BA,KAAKwkC,SAAYg5C,SAAY,IAE7Bx9E,KAAKkF,KAAO,uBAEZlF,KAAK42C,aAAe,GAEpB52C,KAAKyjE,UAAY,EACjBzjE,KAAK0jE,mBAAqB,EAE1B1jE,KAAKwlC,UAAWjB,GA0EjB,SAAS6f,GAAmB7f,GAE3B3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,oBAEZlF,KAAKwI,MAAQ,IAAIixB,EAAO,UACxBz5B,KAAKkjE,SAAW,IAAIzpC,EAAO,SAC3Bz5B,KAAKmjE,UAAY,GAEjBnjE,KAAKqc,IAAM,KAEXrc,KAAKo2C,SAAW,KAChBp2C,KAAKq2C,kBAAoB,EAEzBr2C,KAAKs2C,MAAQ,KACbt2C,KAAKu2C,eAAiB,EAEtBv2C,KAAK0iE,SAAW,IAAIjpC,EAAO,GAC3Bz5B,KAAK2iE,kBAAoB,EACzB3iE,KAAK4gD,YAAc,KAEnB5gD,KAAKy9C,QAAU,KACfz9C,KAAKojE,UAAY,EAEjBpjE,KAAK09C,UAAY,KACjB19C,KAAKqjE,YAAc,IAAI9yC,EAAS,EAAG,GAEnCvwB,KAAK6lC,gBAAkB,KACvB7lC,KAAK8lC,kBAAoB,EACzB9lC,KAAK+lC,iBAAmB,EAExB/lC,KAAKw2C,YAAc,KAEnBx2C,KAAK4lC,SAAW,KAEhB5lC,KAAKy2C,OAAS,KACdz2C,KAAK02C,QAAUC,GACf32C,KAAK42C,aAAe,EACpB52C,KAAK62C,gBAAkB,IAEvB72C,KAAK0kC,WAAY,EACjB1kC,KAAK2kC,mBAAqB,EAC1B3kC,KAAK82C,iBAAmB,QACxB92C,KAAK+2C,kBAAoB,QAEzB/2C,KAAK6kC,UAAW,EAChB7kC,KAAK8kC,cAAe,EACpB9kC,KAAK+kC,cAAe,EAEpB/kC,KAAKwlC,UAAWjB,GAqEjB,SAAS8f,GAAkB9f,GAE1B6f,GAAkB1mD,KAAMsC,MAExBA,KAAKwkC,SAAYi5C,KAAQ,IAEzBz9E,KAAKkF,KAAO,mBAEZlF,KAAKqhD,YAAc,KAEnBrhD,KAAKwlC,UAAWjB,GA6CjB,SAAS2f,GAAoB3f,GAE5B3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,qBAEZlF,KAAKy9C,QAAU,KACfz9C,KAAKojE,UAAY,EAEjBpjE,KAAK09C,UAAY,KACjB19C,KAAKqjE,YAAc,IAAI9yC,EAAS,EAAG,GAEnCvwB,KAAK6lC,gBAAkB,KACvB7lC,KAAK8lC,kBAAoB,EACzB9lC,KAAK+lC,iBAAmB,EAExB/lC,KAAK0kC,WAAY,EACjB1kC,KAAK2kC,mBAAqB,EAE1B3kC,KAAKwhC,KAAM,EACXxhC,KAAK8iC,QAAS,EAEd9iC,KAAK6kC,UAAW,EAChB7kC,KAAK8kC,cAAe,EACpB9kC,KAAK+kC,cAAe,EAEpB/kC,KAAKwlC,UAAWjB,GAwEjB,SAAS4f,GAAqB5f,GAE7B3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,sBAEZlF,KAAKwI,MAAQ,IAAIixB,EAAO,UAExBz5B,KAAKqc,IAAM,KAEXrc,KAAKo2C,SAAW,KAChBp2C,KAAKq2C,kBAAoB,EAEzBr2C,KAAKs2C,MAAQ,KACbt2C,KAAKu2C,eAAiB,EAEtBv2C,KAAK0iE,SAAW,IAAIjpC,EAAO,GAC3Bz5B,KAAK2iE,kBAAoB,EACzB3iE,KAAK4gD,YAAc,KAEnB5gD,KAAKw2C,YAAc,KAEnBx2C,KAAK4lC,SAAW,KAEhB5lC,KAAKy2C,OAAS,KACdz2C,KAAK02C,QAAUC,GACf32C,KAAK42C,aAAe,EACpB52C,KAAK62C,gBAAkB,IAEvB72C,KAAK0kC,WAAY,EACjB1kC,KAAK2kC,mBAAqB,EAC1B3kC,KAAK82C,iBAAmB,QACxB92C,KAAK+2C,kBAAoB,QAEzB/2C,KAAK6kC,UAAW,EAChB7kC,KAAK8kC,cAAe,EACpB9kC,KAAK+kC,cAAe,EAEpB/kC,KAAKwlC,UAAWjB,GAgEjB,SAASkgB,GAAoBlgB,GAE5B3B,EAASllC,KAAMsC,MAEfA,KAAKkF,KAAO,qBAEZlF,KAAKwI,MAAQ,IAAIixB,EAAO,UAExBz5B,KAAKykC,UAAY,EAEjBzkC,KAAKs8B,MAAQ,EACbt8B,KAAK+iE,SAAW,EAChB/iE,KAAKijE,QAAU,EAEfjjE,KAAK8iC,QAAS,EAEd9iC,KAAKwlC,UAAWjB,GA8FjB,SAASm5C,GAAgBnlE,EAAQolE,EAAY7sE,GAE5C,IAAIk4B,EAAQhpC,KAER49E,GAAY,EAAOC,EAAc,EAAGC,EAAa,EAErD99E,KAAK+9E,aAAUhvE,EACf/O,KAAKuY,OAASA,EACdvY,KAAK29E,WAAaA,EAClB39E,KAAK8Q,QAAUA,EAEf9Q,KAAKg+E,UAAY,SAAW52D,GAE3B02D,KAEmB,IAAdF,QAEmB7uE,IAAlBi6B,EAAM+0C,SAEV/0C,EAAM+0C,QAAS32D,EAAKy2D,EAAaC,GAMnCF,GAAY,GAIb59E,KAAKi+E,QAAU,SAAW72D,GAEzBy2D,SAE0B9uE,IAArBi6B,EAAM20C,YAEV30C,EAAM20C,WAAYv2D,EAAKy2D,EAAaC,GAIhCD,IAAgBC,IAEpBF,GAAY,OAEU7uE,IAAjBi6B,EAAMzwB,QAEVywB,EAAMzwB,WAQTvY,KAAKk+E,UAAY,SAAW92D,QAEJrY,IAAlBi6B,EAAMl4B,SAEVk4B,EAAMl4B,QAASsW,IAclB,SAAS+2D,GAAYC,GAEpBp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GAiPtD,SAASC,GAAyBF,GAEjCp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GAGrDr+E,KAAK4oB,QAAU,KAiIhB,SAAS21D,GAAmBH,GAE3Bp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GAGrDr+E,KAAK4oB,QAAU,KAiFhB,SAAS41D,GAAaJ,GAErBp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GA+FtD,SAASI,GAAmBL,GAE3Bp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GAkEtD,SAASK,GAAeN,GAEvBp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GAsDtD,SAASM,GAAOn2E,EAAOu7D,GAEtBh0B,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,QAEZlF,KAAKwI,MAAQ,IAAIixB,EAAOjxB,GACxBxI,KAAK+jE,eAA0Bh1D,IAAdg1D,EAA0BA,EAAY,EAEvD/jE,KAAK2wC,mBAAgB5hC,EA+CtB,SAAS6vE,GAAiBtjC,EAAUC,EAAawoB,GAEhD4a,GAAMjhF,KAAMsC,KAAMs7C,EAAUyoB,GAE5B/jE,KAAKkF,KAAO,kBAEZlF,KAAK4pC,gBAAa76B,EAElB/O,KAAK2W,SAASlS,KAAMsrC,GAASG,WAC7BlwC,KAAK6+E,eAEL7+E,KAAKu7C,YAAc,IAAI9hB,EAAO8hB,GA0B/B,SAASujC,GAAazhD,GAErBr9B,KAAKq9B,OAASA,EAEdr9B,KAAK0kE,KAAO,EACZ1kE,KAAKmmC,OAAS,EAEdnmC,KAAKwsC,QAAU,IAAIjc,EAAS,IAAK,KAEjCvwB,KAAKqc,IAAM,KACXrc,KAAKgtC,OAAS,IAAIrZ,EA8CnB,SAASorD,KAERD,GAAYphF,KAAMsC,KAAM,IAAIkxC,GAAmB,GAAI,EAAG,GAAK,MAmC5D,SAAS8tC,GAAWx2E,EAAOu7D,EAAW7oB,EAAU2pB,EAAOC,EAAUzpB,GAEhEsjC,GAAMjhF,KAAMsC,KAAMwI,EAAOu7D,GAEzB/jE,KAAKkF,KAAO,YAEZlF,KAAK2W,SAASlS,KAAMsrC,GAASG,WAC7BlwC,KAAK6+E,eAEL7+E,KAAKV,OAAS,IAAIywC,GAElB7xC,OAAOgB,eAAgBc,KAAM,SAC5BS,IAAK,WAGJ,OAAOT,KAAK+jE,UAAYrhE,KAAK8xE,IAE9B9vE,IAAK,SAAWu6E,GAGfj/E,KAAK+jE,UAAYkb,EAAQv8E,KAAK8xE,MAIhCx0E,KAAKk7C,cAA0BnsC,IAAbmsC,EAA2BA,EAAW,EACxDl7C,KAAK6kE,WAAoB91D,IAAV81D,EAAwBA,EAAQniE,KAAK8xE,GAAK,EACzDx0E,KAAK8kE,cAA0B/1D,IAAb+1D,EAA2BA,EAAW,EACxD9kE,KAAKq7C,WAAoBtsC,IAAVssC,EAAwBA,EAAQ,EAE/Cr7C,KAAKusC,OAAS,IAAIwyC,GAkCnB,SAASG,GAAY12E,EAAOu7D,EAAW7oB,EAAUG,GAEhDsjC,GAAMjhF,KAAMsC,KAAMwI,EAAOu7D,GAEzB/jE,KAAKkF,KAAO,aAEZhH,OAAOgB,eAAgBc,KAAM,SAC5BS,IAAK,WAGJ,OAAwB,EAAjBT,KAAK+jE,UAAgBrhE,KAAK8xE,IAGlC9vE,IAAK,SAAWu6E,GAGfj/E,KAAK+jE,UAAYkb,GAAU,EAAIv8E,KAAK8xE,OAItCx0E,KAAKk7C,cAA0BnsC,IAAbmsC,EAA2BA,EAAW,EACxDl7C,KAAKq7C,WAAoBtsC,IAAVssC,EAAwBA,EAAQ,EAE/Cr7C,KAAKusC,OAAS,IAAIuyC,GAAa,IAAI5tC,GAAmB,GAAI,EAAG,GAAK,MA6BnE,SAASiuC,KAERL,GAAYphF,KAAMsC,KAAM,IAAI8wC,IAAsB,EAAG,EAAG,GAAK,EAAG,GAAK,MAetE,SAASsuC,GAAkB52E,EAAOu7D,GAEjC4a,GAAMjhF,KAAMsC,KAAMwI,EAAOu7D,GAEzB/jE,KAAKkF,KAAO,mBAEZlF,KAAK2W,SAASlS,KAAMsrC,GAASG,WAC7BlwC,KAAK6+E,eAEL7+E,KAAKV,OAAS,IAAIywC,GAElB/vC,KAAKusC,OAAS,IAAI4yC,GA4BnB,SAASE,GAAc72E,EAAOu7D,GAE7B4a,GAAMjhF,KAAMsC,KAAMwI,EAAOu7D,GAEzB/jE,KAAKkF,KAAO,eAEZlF,KAAK4pC,gBAAa76B,EAgBnB,SAASuwE,GAAe92E,EAAOu7D,EAAWtxC,EAAOC,GAEhDisD,GAAMjhF,KAAMsC,KAAMwI,EAAOu7D,GAEzB/jE,KAAKkF,KAAO,gBAEZlF,KAAK2W,SAASjS,IAAK,EAAG,EAAG,GACzB1E,KAAK6+E,eAEL7+E,KAAKyyB,WAAoB1jB,IAAV0jB,EAAwBA,EAAQ,GAC/CzyB,KAAK0yB,YAAsB3jB,IAAX2jB,EAAyBA,EAAS,GAmOnD,SAAS6sD,GAAaC,EAAoBC,EAAcC,EAAY/jE,GAEnE3b,KAAKw/E,mBAAqBA,EAC1Bx/E,KAAK2/E,aAAe,EAEpB3/E,KAAK2b,kBAAgC5M,IAAjB4M,EAClBA,EAAe,IAAI8jE,EAAah4E,YAAai4E,GAC/C1/E,KAAKy/E,aAAeA,EACpBz/E,KAAK4/E,UAAYF,EA4OlB,SAASG,GAAkBL,EAAoBC,EAAcC,EAAY/jE,GAExE4jE,GAAY7hF,KACVsC,KAAMw/E,EAAoBC,EAAcC,EAAY/jE,GAEtD3b,KAAK8/E,aAAe,EACpB9/E,KAAK+/E,aAAe,EACpB//E,KAAKggF,aAAe,EACpBhgF,KAAKigF,aAAe,EAyIrB,SAASC,GAAmBV,EAAoBC,EAAcC,EAAY/jE,GAEzE4jE,GAAY7hF,KAAMsC,KAAMw/E,EAAoBC,EAAcC,EAAY/jE,GA0CvE,SAASwkE,GAAqBX,EAAoBC,EAAcC,EAAY/jE,GAE3E4jE,GAAY7hF,KAAMsC,KAAMw/E,EAAoBC,EAAcC,EAAY/jE,GAoXvE,SAASykE,GAA0Bj0E,EAAMk0E,EAAOC,EAAQC,GAEvD,QAAcxxE,IAAT5C,EAAqB,MAAM,IAAI7O,MAAO,2BAE3C,QAAeyR,IAAVsxE,GAAwC,IAAjBA,EAAM1iF,OAEjC,MAAM,IAAIL,MAAO,+BAAiC6O,GAInDnM,KAAKmM,KAAOA,EAEZnM,KAAKqgF,MAAQG,GAAeC,aAAcJ,EAAOrgF,KAAK0gF,gBACtD1gF,KAAKsgF,OAASE,GAAeC,aAAcH,EAAQtgF,KAAK2gF,iBAExD3gF,KAAK4gF,iBAAkBL,GAAiBvgF,KAAK6gF,sBAE7C7gF,KAAK8gF,WACL9gF,KAAK+gF,WAcN,SAASC,GAAqB70E,EAAMk0E,EAAOC,EAAQC,GAElDH,GAAyB1iF,KAAMsC,KAAMmM,EAAMk0E,EAAOC,EAAQC,GAuB3D,SAASU,GAA6BzB,EAAoBC,EAAcC,EAAY/jE,GAEnF4jE,GAAY7hF,KAAMsC,KAAMw/E,EAAoBC,EAAcC,EAAY/jE,GAwCvE,SAASulE,GAAyB/0E,EAAMk0E,EAAOC,EAAQC,GAEtDH,GAAyB1iF,KAAMsC,KAAMmM,EAAMk0E,EAAOC,EAAQC,GAmC3D,SAASY,GAAqBh1E,EAAMk0E,EAAOC,EAAQC,GAElDH,GAAyB1iF,KAAMsC,KAAMmM,EAAMk0E,EAAOC,EAAQC,GA2B3D,SAASa,GAAqBj1E,EAAMk0E,EAAOC,EAAQC,GAElDH,GAAyB1iF,KAAMsC,KAAMmM,EAAMk0E,EAAOC,EAAQC,GA8B3D,SAASc,GAAsBl1E,EAAMk0E,EAAOC,GAE3CF,GAAyB1iF,KAAMsC,KAAMmM,EAAMk0E,EAAOC,GAiCnD,SAASgB,GAAoBn1E,EAAMk0E,EAAOC,EAAQC,GAEjDH,GAAyB1iF,KAAMsC,KAAMmM,EAAMk0E,EAAOC,EAAQC,GA+B3D,SAASgB,GAAep1E,EAAMk0E,EAAOC,EAAQC,GAE5CH,GAAyBj6E,MAAOnG,KAAMkG,WA4IvC,SAASs7E,GAAer1E,EAAM1J,EAAUg/E,GAEvCzhF,KAAKmM,KAAOA,EACZnM,KAAKyhF,OAASA,EACdzhF,KAAKyC,cAA0BsM,IAAbtM,EAA2BA,GAAa,EAE1DzC,KAAKkxB,KAAOC,GAAMC,eAGbpxB,KAAKyC,SAAW,GAEpBzC,KAAK0hF,gBAIN1hF,KAAK+gF,WA0UN,SAASY,GAAgBvD,GAExBp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GACrDr+E,KAAKwnD,YAgJN,SAASo6B,GAAsBxD,GAE9Bp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GAgGtD,SAASwD,KAER7hF,KAAK8hF,YAAc,aACnB9hF,KAAK+hF,eAAiB,aACtB/hF,KAAKgiF,eAAiB,aAwUvB,SAASC,GAAY7D,GAEI,kBAAZA,IAEX3/E,QAAQ4pC,KAAM,6EACd+1C,OAAUrvE,GAIX/O,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GAErDr+E,KAAKqY,iBAAkB,EAsiBxB,SAAS6pE,GAAc9D,GAEtBp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GACrDr+E,KAAKmiF,YAAc,GAswBpB,SAASC,GAAYxlF,EAAG6pC,EAAIC,EAAIC,EAAIC,GAEnC,IAAIy7C,EAAmB,IAAZ17C,EAAKF,GACZ67C,EAAmB,IAAZ17C,EAAKF,GACZ67C,EAAK3lF,EAAIA,EAEb,OAAS,EAAI8pC,EAAK,EAAIC,EAAK07C,EAAKC,IADvB1lF,EAAI2lF,KACmC,EAAI77C,EAAK,EAAIC,EAAK,EAAI07C,EAAKC,GAAOC,EAAKF,EAAKzlF,EAAI8pC,EAMjG,SAAS87C,GAAmB5lF,EAAGsH,GAE9B,IAAIgmC,EAAI,EAAIttC,EACZ,OAAOstC,EAAIA,EAAIhmC,EAIhB,SAASu+E,GAAmB7lF,EAAGsH,GAE9B,OAAO,GAAM,EAAItH,GAAMA,EAAIsH,EAI5B,SAASw+E,GAAmB9lF,EAAGsH,GAE9B,OAAOtH,EAAIA,EAAIsH,EAIhB,SAASy+E,GAAiB/lF,EAAG6pC,EAAIC,EAAIC,GAEpC,OAAO67C,GAAmB5lF,EAAG6pC,GAAOg8C,GAAmB7lF,EAAG8pC,GACzDg8C,GAAmB9lF,EAAG+pC,GAMxB,SAASi8C,GAAehmF,EAAGsH,GAE1B,IAAIgmC,EAAI,EAAIttC,EACZ,OAAOstC,EAAIA,EAAIA,EAAIhmC,EAIpB,SAAS2+E,GAAejmF,EAAGsH,GAE1B,IAAIgmC,EAAI,EAAIttC,EACZ,OAAO,EAAIstC,EAAIA,EAAIttC,EAAIsH,EAIxB,SAAS4+E,GAAelmF,EAAGsH,GAE1B,OAAO,GAAM,EAAItH,GAAMA,EAAIA,EAAIsH,EAIhC,SAAS6+E,GAAenmF,EAAGsH,GAE1B,OAAOtH,EAAIA,EAAIA,EAAIsH,EAIpB,SAAS8+E,GAAapmF,EAAG6pC,EAAIC,EAAIC,EAAIC,GAEpC,OAAOg8C,GAAehmF,EAAG6pC,GAAOo8C,GAAejmF,EAAG8pC,GAAOo8C,GAAelmF,EAAG+pC,GAC1Eo8C,GAAenmF,EAAGgqC,GAuCpB,SAASq8C,KAERjjF,KAAKkjF,mBAAqB,IAqV3B,SAASC,GAAWb,EAAIc,GAEvBH,GAAMvlF,KAAMsC,MAEZA,KAAKsiF,GAAKA,EACVtiF,KAAKojF,GAAKA,EAkDX,SAASC,KAERJ,GAAMvlF,KAAMsC,MAEZA,KAAKsjF,UAELtjF,KAAKujF,WAAY,EA4NlB,SAASC,GAAcC,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEpFf,GAAMvlF,KAAMsC,MAEZA,KAAKyjF,GAAKA,EACVzjF,KAAK0jF,GAAKA,EAEV1jF,KAAK2jF,QAAUA,EACf3jF,KAAK4jF,QAAUA,EAEf5jF,KAAK6jF,YAAcA,EACnB7jF,KAAK8jF,UAAYA,EAEjB9jF,KAAK+jF,WAAaA,EAElB/jF,KAAKgkF,UAAYA,GAAa,EAqE/B,SAASC,GAAavZ,GAErBuY,GAAMvlF,KAAMsC,MAEZA,KAAK0qE,YAAsB37D,IAAX27D,KAA8BA,EA6B/C,SAASwZ,GAAkB7B,EAAIC,EAAIc,EAAIe,GAEtClB,GAAMvlF,KAAMsC,MAEZA,KAAKqiF,GAAKA,EACVriF,KAAKsiF,GAAKA,EACVtiF,KAAKojF,GAAKA,EACVpjF,KAAKmkF,GAAKA,EAkBX,SAASC,GAAsB/B,EAAIC,EAAIc,GAEtCH,GAAMvlF,KAAMsC,MAEZA,KAAKqiF,GAAKA,EACVriF,KAAKsiF,GAAKA,EACVtiF,KAAKojF,GAAKA,EA+IX,SAASiB,GAAM3Z,GAEd2Y,GAAU3lF,KAAMsC,MAChBA,KAAKskF,aAAe,IAAI/zD,EAEnBm6C,GAEJ1qE,KAAKukF,WAAY7Z,GAoBnB,SAAS8Z,KAERH,GAAKl+E,MAAOnG,KAAMkG,WAElBlG,KAAKi7E,SAgDN,SAASwJ,KAERzkF,KAAK0kF,YACL1kF,KAAK2kF,YAAc,KAgRpB,SAASC,GAAMpkF,GAEdR,KAAKQ,KAAOA,EAgLb,SAASqkF,GAAYzG,GAEpBp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GAsEtD,SAASyG,GAAa1G,GAErBp+E,KAAKo+E,aAAwBrvE,IAAZqvE,EAA0BA,EAAUC,GA8BtD,SAAS0G,KAER/kF,KAAKkF,KAAO,eAEZlF,KAAKoxC,OAAS,EAEdpxC,KAAKglF,OAAS,KAEdhlF,KAAKs2D,QAAU,IAAIplB,GACnBlxC,KAAKs2D,QAAQ9sB,OAAOh/B,OAAQ,GAC5BxK,KAAKs2D,QAAQ9lB,kBAAmB,EAEhCxwC,KAAKw2D,QAAU,IAAItlB,GACnBlxC,KAAKw2D,QAAQhtB,OAAOh/B,OAAQ,GAC5BxK,KAAKw2D,QAAQhmB,kBAAmB,EAiFjC,SAASy0C,GAAYvjD,EAAMC,EAAKujD,GAE/Bn1C,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,aAEZ,IAEIigF,EAAW,IAAIj0C,GAFT,GAAa,EAE4BxP,EAAMC,GACzDwjD,EAAS13C,GAAG/oC,IAAK,GAAK,EAAG,GACzBygF,EAASh4C,OAAQ,IAAIzZ,EAAS,EAAG,EAAG,IACpC1zB,KAAKyqB,IAAK06D,GAEV,IAAIC,EAAW,IAAIl0C,GAPT,GAAa,EAO4BxP,EAAMC,GACzDyjD,EAAS33C,GAAG/oC,IAAK,GAAK,EAAG,GACzB0gF,EAASj4C,OAAQ,IAAIzZ,GAAW,EAAG,EAAG,IACtC1zB,KAAKyqB,IAAK26D,GAEV,IAAIC,EAAW,IAAIn0C,GAZT,GAAa,EAY4BxP,EAAMC,GACzD0jD,EAAS53C,GAAG/oC,IAAK,EAAG,EAAG,GACvB2gF,EAASl4C,OAAQ,IAAIzZ,EAAS,EAAG,EAAG,IACpC1zB,KAAKyqB,IAAK46D,GAEV,IAAIC,EAAW,IAAIp0C,GAjBT,GAAa,EAiB4BxP,EAAMC,GACzD2jD,EAAS73C,GAAG/oC,IAAK,EAAG,GAAK,GACzB4gF,EAASn4C,OAAQ,IAAIzZ,EAAS,GAAK,EAAG,IACtC1zB,KAAKyqB,IAAK66D,GAEV,IAAIC,EAAW,IAAIr0C,GAtBT,GAAa,EAsB4BxP,EAAMC,GACzD4jD,EAAS93C,GAAG/oC,IAAK,GAAK,EAAG,GACzB6gF,EAASp4C,OAAQ,IAAIzZ,EAAS,EAAG,EAAG,IACpC1zB,KAAKyqB,IAAK86D,GAEV,IAAIC,EAAW,IAAIt0C,GA3BT,GAAa,EA2B4BxP,EAAMC,GACzD6jD,EAAS/3C,GAAG/oC,IAAK,GAAK,EAAG,GACzB8gF,EAASr4C,OAAQ,IAAIzZ,EAAS,EAAG,GAAK,IACtC1zB,KAAKyqB,IAAK+6D,GAEV,IAAI3gF,GAAY2G,OAAQg/C,GAAW15B,UAAWW,GAAcV,UAAWU,IAEvEzxB,KAAK0nD,aAAe,IAAIx0B,EAAuBgyD,EAAgBA,EAAgBrgF,GAC/E7E,KAAK0nD,aAAa50B,QAAQ3mB,KAAO,aAEjCnM,KAAKylF,cAAgB,SAAW9wD,EAAUyI,GAEpB,OAAhBp9B,KAAKiwC,QAAkBjwC,KAAKotC,oBAEjC,IAAIsa,EAAe1nD,KAAK0nD,aACpB31B,EAAkB21B,EAAa50B,QAAQf,gBAE3C21B,EAAa50B,QAAQf,iBAAkB,EAEvC21B,EAAav0B,eAAiB,EAC9BwB,EAASwI,OAAQC,EAAO+nD,EAAUz9B,GAElCA,EAAav0B,eAAiB,EAC9BwB,EAASwI,OAAQC,EAAOgoD,EAAU19B,GAElCA,EAAav0B,eAAiB,EAC9BwB,EAASwI,OAAQC,EAAOioD,EAAU39B,GAElCA,EAAav0B,eAAiB,EAC9BwB,EAASwI,OAAQC,EAAOkoD,EAAU59B,GAElCA,EAAav0B,eAAiB,EAC9BwB,EAASwI,OAAQC,EAAOmoD,EAAU79B,GAElCA,EAAa50B,QAAQf,gBAAkBA,EAEvC21B,EAAav0B,eAAiB,EAC9BwB,EAASwI,OAAQC,EAAOooD,EAAU99B,GAElC/yB,EAAS2Y,gBAAiB,OAa5B,SAASo4C,KAER31C,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,gBAEZlF,KAAKk9B,QAAUyoD,GAAa9kD,aAE5B7gC,KAAK4lF,KAAO5lF,KAAKk9B,QAAQ2oD,aACzB7lF,KAAK4lF,KAAK3lF,QAASD,KAAKk9B,QAAQ4oD,aAEhC9lF,KAAK69C,OAAS,KAiHf,SAASkoC,GAAOC,GAEfj2C,GAASryC,KAAMsC,MAEfA,KAAKkF,KAAO,QAEZlF,KAAKk9B,QAAU8oD,EAAS9oD,QAExBl9B,KAAK4lF,KAAO5lF,KAAKk9B,QAAQ2oD,aACzB7lF,KAAK4lF,KAAK3lF,QAAS+lF,EAASC,YAE5BjmF,KAAKkmF,UAAW,EAEhBlmF,KAAK+B,OAAS,KACd/B,KAAKmmF,MAAO,EACZnmF,KAAKomF,UAAY,EACjBpmF,KAAKqmF,aAAe,EACpBrmF,KAAKsmF,WAAY,EACjBtmF,KAAKumF,oBAAqB,EAC1BvmF,KAAKwmF,WAAa,QAElBxmF,KAAKymF,WAmRN,SAASC,GAAiBV,GAEzBD,GAAMroF,KAAMsC,KAAMgmF,GAElBhmF,KAAK2mF,OAAS3mF,KAAKk9B,QAAQ0pD,eAC3B5mF,KAAK2mF,OAAO1mF,QAASD,KAAK4lF,MAqF3B,SAASiB,GAAeC,EAAOC,GAE9B/mF,KAAKgnF,SAAWF,EAAM5pD,QAAQ+pD,iBAC9BjnF,KAAKgnF,SAASD,aAAsBh4E,IAAZg4E,EAAwBA,EAAU,KAE1D/mF,KAAKQ,KAAO,IAAIqB,WAAY7B,KAAKgnF,SAASE,mBAE1CJ,EAAMK,YAAYlnF,QAASD,KAAKgnF,UAwCjC,SAASI,GAAexgE,EAASygE,EAAUzH,GAE1C5/E,KAAK4mB,QAAUA,EACf5mB,KAAK4/E,UAAYA,EAEjB,IACC0H,EADGn5C,EAAaK,aAGjB,OAAS64C,GAER,IAAK,aACJC,EAActnF,KAAKunF,OACnB,MAED,IAAK,SACL,IAAK,OACJp5C,EAAa9iC,MACbi8E,EAActnF,KAAKwnF,QACnB,MAED,QACCF,EAActnF,KAAKynF,MAIrBznF,KAAK+B,OAAS,IAAIosC,EAAwB,EAAZyxC,GAY9B5/E,KAAK0nF,iBAAmBJ,EAExBtnF,KAAK2nF,iBAAmB,EAExB3nF,KAAK4nF,SAAW,EAChB5nF,KAAK6nF,eAAiB,EAmKvB,SAASC,GAAWC,EAAax6E,EAAMy6E,GAEtC,IAAIC,EAAaD,GAAsBE,GAAgBC,eAAgB56E,GAEvEvN,KAAKooF,aAAeL,EACpB/nF,KAAKqoF,UAAYN,EAAYO,WAAY/6E,EAAM06E,GA4DhD,SAASC,GAAiBK,EAAUh7E,EAAM06E,GAEzCjoF,KAAKuN,KAAOA,EACZvN,KAAKioF,WAAaA,GAAcC,GAAgBC,eAAgB56E,GAEhEvN,KAAKwoF,KAAON,GAAgBO,SAAUF,EAAUvoF,KAAKioF,WAAWS,WAAcH,EAE9EvoF,KAAKuoF,SAAWA,EAsqBjB,SAASI,GAAsBC,GAE9B5oF,KAAKkxB,KAAOC,GAAMC,eAGlBpxB,KAAKmnC,SAAW97B,MAAMlN,UAAUuD,MAAMhE,KAAMwI,WAE5ClG,KAAK6oF,gBAAkB,EAGvB,IAAIp1C,KACJzzC,KAAK8oF,eAAiBr1C,EAEtB,IAAM,IAAIr2C,EAAI,EAAGP,EAAIqJ,UAAUvI,OAAQP,IAAMP,IAAMO,EAElDq2C,EAASvtC,UAAW9I,GAAI8zB,MAAS9zB,EAIlC4C,KAAK+oF,UACL/oF,KAAKgpF,gBACLhpF,KAAKqoF,aACLroF,KAAKipF,0BAEL,IAAIjgD,EAAQhpC,KAEZA,KAAKkpF,OAEJxxC,SACCn+B,YAAc,OAAOyvB,EAAM7B,SAASxpC,QACpCwrF,YAAc,OAAOnpF,KAAKuZ,MAAQyvB,EAAM6/C,kBAGzCO,wBAA0B,OAAOpgD,EAAMq/C,UAAU1qF,SA2TnD,SAAS0rF,GAAiBC,EAAOC,EAAMC,GAEtCxpF,KAAKypF,OAASH,EACdtpF,KAAK0pF,MAAQH,EACbvpF,KAAK2pF,WAAaH,GAAa,KAW/B,IAAM,IATF/H,EAAS8H,EAAK9H,OACjBmI,EAAUnI,EAAO9jF,OACjBksF,EAAe,IAAIx+E,MAAOu+E,GAEvBE,GACFC,YAAcC,GACdC,UAAYD,IAGJ5sF,EAAI,EAAGA,IAAMwsF,IAAYxsF,EAAI,CAEtC,IAAI8sF,EAAczI,EAAQrkF,GAAI+sF,kBAAmB,MACjDN,EAAczsF,GAAM8sF,EACpBA,EAAYE,SAAWN,EAIxB9pF,KAAKqqF,qBAAuBP,EAE5B9pF,KAAKsqF,cAAgBT,EAGrB7pF,KAAKuqF,kBAAoB,IAAIl/E,MAAOu+E,GAEpC5pF,KAAKwqF,YAAc,KACnBxqF,KAAKyqF,kBAAoB,KAEzBzqF,KAAK0qF,sBAAwB,KAC7B1qF,KAAK2qF,mBAAqB,KAE1B3qF,KAAKmmF,KAAOyE,GACZ5qF,KAAK6qF,YAAc,EAInB7qF,KAAK8qF,WAAa,KAIlB9qF,KAAK+qF,KAAO,EAEZ/qF,KAAKgrF,UAAY,EACjBhrF,KAAKirF,oBAAsB,EAE3BjrF,KAAKkrF,OAAS,EACdlrF,KAAKmrF,iBAAmB,EAExBnrF,KAAKorF,YAAcjjE,EAAAA,EAEnBnoB,KAAKqrF,QAAS,EACdrrF,KAAKgL,SAAU,EAEfhL,KAAKsrF,mBAAqB,EAE1BtrF,KAAKurF,kBAAoB,EACzBvrF,KAAKwrF,gBAAkB,EAulBxB,SAASC,GAAgBvrE,GAExBlgB,KAAK0rF,MAAQxrE,EACblgB,KAAK2rF,qBACL3rF,KAAK4rF,WAAa,EAElB5rF,KAAK+qF,KAAO,EAEZ/qF,KAAKgrF,UAAY,EAwsBlB,SAASa,GAAS1sF,GAEK,iBAAVA,IAEXV,QAAQ4pC,KAAM,sDACdlpC,EAAQ+G,UAAW,IAIpBlG,KAAKb,MAAQA,EAcd,SAAS2sF,KAERh4C,GAAep2C,KAAMsC,MAErBA,KAAKkF,KAAO,0BACZlF,KAAK+5C,uBAAoBhrC,EA4D1B,SAASg9E,GAA4BC,EAAmBp5C,EAAU/gB,EAAQghB,GAEzE7yC,KAAKkxB,KAAOC,GAAMC,eAElBpxB,KAAKQ,KAAOwrF,EACZhsF,KAAK4yC,SAAWA,EAChB5yC,KAAK6xB,OAASA,EAEd7xB,KAAK6yC,YAA4B,IAAfA,EAkInB,SAASo5C,GAAmBxrE,EAAO67C,GAElCt8D,KAAKkxB,KAAOC,GAAMC,eAElBpxB,KAAKygB,MAAQA,EACbzgB,KAAKs8D,OAASA,EACdt8D,KAAKa,WAAkBkO,IAAV0R,EAAsBA,EAAM9iB,OAAS2+D,EAAS,EAE3Dt8D,KAAKquC,SAAU,EACfruC,KAAKmvC,aAAgBtd,OAAQ,EAAGhxB,OAAS,GAEzCb,KAAKuuC,iBAAmB,aAExBvuC,KAAK6hB,QAAU,EA+FhB,SAASqqE,GAA4BzrE,EAAO67C,EAAQtI,GAEnDi4B,GAAkBvuF,KAAMsC,KAAMygB,EAAO67C,GAErCt8D,KAAKg0D,iBAAmBA,GAAoB,EA0B7C,SAASm4B,GAA0B1rE,EAAOmyB,EAAUohB,GAEnDrhB,GAAgBj1C,KAAMsC,KAAMygB,EAAOmyB,GAEnC5yC,KAAKg0D,iBAAmBA,GAAoB,EA4B7C,SAASo4B,GAAWn1C,EAAQC,EAAWxV,EAAMC,GAE5C3hC,KAAKqsF,IAAM,IAAIr1C,GAAKC,EAAQC,GAG5Bl3C,KAAK0hC,KAAOA,GAAQ,EACpB1hC,KAAK2hC,IAAMA,GAAOxZ,EAAAA,EAElBnoB,KAAKssF,QACJj1C,QACA25B,QACAd,OACAiB,QAAU3iE,UAAW,GACrByhE,WAGD/xE,OAAOmB,iBAAkBW,KAAKssF,QAC7BC,YACC9rF,IAAK,WAEJ,OADAhC,QAAQ4pC,KAAM,yEACProC,KAAKmxE,WAOhB,SAASqb,GAAStvF,EAAGsK,GAEpB,OAAOtK,EAAEg+C,SAAW1zC,EAAE0zC,SAIvB,SAASuxC,GAAiBnlD,EAAQolD,EAAWC,EAAYC,GAExD,IAAwB,IAAnBtlD,EAAOrF,UAEZqF,EAAOulD,QAASH,EAAWC,IAER,IAAdC,GAIJ,IAAM,IAFFliD,EAAWpD,EAAOoD,SAEZttC,EAAI,EAAGI,EAAIktC,EAAS/sC,OAAQP,EAAII,EAAGJ,IAE5CqvF,GAAiB/hD,EAAUttC,GAAKsvF,EAAWC,GAAY,GAiF1D,SAASG,GAAOC,GAEf/sF,KAAK+sF,eAA4Bh+E,IAAdg+E,GAA4BA,EAE/C/sF,KAAKomF,UAAY,EACjBpmF,KAAKgtF,QAAU,EACfhtF,KAAKitF,YAAc,EAEnBjtF,KAAKktF,SAAU,EAqEhB,SAASC,GAAWhnD,EAAQk0C,EAAKoC,GAMhC,OAJAz8E,KAAKmmC,YAAsBp3B,IAAXo3B,EAAyBA,EAAS,EAClDnmC,KAAKq6E,SAAgBtrE,IAARsrE,EAAsBA,EAAM,EACzCr6E,KAAKy8E,WAAoB1tE,IAAV0tE,EAAwBA,EAAQ,EAExCz8E,KAuER,SAASotF,GAAajnD,EAAQs2C,EAAOr5D,GAMpC,OAJApjB,KAAKmmC,YAAsBp3B,IAAXo3B,EAAyBA,EAAS,EAClDnmC,KAAKy8E,WAAoB1tE,IAAV0tE,EAAwBA,EAAQ,EAC/Cz8E,KAAKojB,OAAYrU,IAANqU,EAAoBA,EAAI,EAE5BpjB,KAgDR,SAASqtF,GAAgB5lD,EAAUzF,GAElCqV,GAAK35C,KAAMsC,KAAMynC,EAAUzF,GAE3BhiC,KAAKstF,iBACLttF,KAAKutF,kBAKL,IAAIC,EAAYxtF,KAAKynC,SAAS3C,aAAannC,OAKvC8vF,EAAWD,EAAY,EAEvBE,EAAMF,EAAY,EAEtBxtF,KAAK2tF,gBAPM,YAEM,EAKuBF,EAAUC,GAClD1tF,KAAK4tF,mBARM,YAQoB,GAwShC,SAASC,GAAuB7rD,GAE/B+N,GAASryC,KAAMsC,MAEfA,KAAKgiC,SAAWA,EAChBhiC,KAAKm9B,OAAS,SAAW2wD,KAc1B,SAASC,GAAqBzmD,EAAQ7hC,EAAMuoF,EAAKvpD,GAEhDzkC,KAAKsnC,OAASA,EAEdtnC,KAAKyF,UAAkBsJ,IAATtJ,EAAuBA,EAAO,EAE5C,IAAI+C,OAAkBuG,IAARi/E,EAAsBA,EAAM,SAEtCv7D,OAAwB1jB,IAAd01B,EAA4BA,EAAY,EAIlDwpD,EAAW,EAEXC,EAAcluF,KAAKsnC,OAAOG,SAEzBymD,GAAeA,EAAY/lD,WAE/B8lD,EAAsC,EAA3BC,EAAYn0D,MAAMp8B,OAElBuwF,GAAeA,EAAYjmD,mBAEtCgmD,EAAWC,EAAYpyD,WAAWwK,OAAOzlC,OAM1C,IAAI4mC,EAAW,IAAIqM,GAEfq6C,EAAY,IAAI76C,GAAmC,EAAX26C,EAAe,EAAG,GAE9DxmD,EAASmO,aAAc,WAAYu4C,GAEnCld,GAAavzE,KAAMsC,KAAMynC,EAAU,IAAI+c,IAAqBh8C,MAAOA,EAAOi8B,UAAWhS,KAIrFzyB,KAAKwwC,kBAAmB,EAExBxwC,KAAKgqC,SAyGN,SAASokD,GAAiB9hD,GAEzByD,GAASryC,KAAMsC,MAEfA,KAAKssC,MAAQA,EACbtsC,KAAKssC,MAAMc,oBAEXptC,KAAKgtC,OAASV,EAAMhO,YACpBt+B,KAAKwwC,kBAAmB,EAYxB,IAAM,IAVF/I,EAAW,IAAIqM,GAEfq6C,GACH,EAAG,EAAG,EAAK,EAAK,EAAK,EACrB,EAAG,EAAG,EAAK,EAAK,EAAK,EACrB,EAAG,EAAG,GAAK,EAAK,EAAK,EACrB,EAAG,EAAG,EAAK,EAAK,EAAK,EACrB,EAAG,EAAG,EAAK,GAAK,EAAK,GAGZ/wF,EAAI,EAAG+M,EAAI,EAAW/M,EAAJ,GAAWA,IAAM+M,IAAO,CAEnD,IAAIu8B,EAAOtpC,EAFgB,GAENsF,KAAK8xE,GAAK,EAC3B7tC,EAAOx8B,EAHgB,GAGNzH,KAAK8xE,GAAK,EAE/B2Z,EAAUxnF,KACTjE,KAAKkiE,IAAKl+B,GAAMhkC,KAAK6zE,IAAK7vC,GAAM,EAChChkC,KAAKkiE,IAAKj+B,GAAMjkC,KAAK6zE,IAAK5vC,GAAM,GAKlCc,EAASmO,aAAc,WAAY,IAAItC,GAAwB66C,EAAW,IAE1E,IAAInsD,EAAW,IAAIwiB,IAAqBhjB,KAAK,IAE7CxhC,KAAKquF,KAAO,IAAIpd,GAAcxpC,EAAUzF,GACxChiC,KAAKyqB,IAAKzqB,KAAKquF,MAEfruF,KAAKgqC,SA+CN,SAASskD,GAAahnD,GAErB,IAAIinD,KAECjnD,GAAUA,EAAOknD,QAErBD,EAAS5nF,KAAM2gC,GAIhB,IAAM,IAAIlqC,EAAI,EAAGA,EAAIkqC,EAAOoD,SAAS/sC,OAAQP,IAE5CmxF,EAAS5nF,KAAKR,MAAOooF,EAAUD,GAAahnD,EAAOoD,SAAUttC,KAI9D,OAAOmxF,EAIR,SAASE,GAAgBnnD,GAYxB,IAAM,IAVFic,EAAQ+qC,GAAahnD,GAErBG,EAAW,IAAIqM,GAEfha,KACA7vB,KAEAykF,EAAS,IAAIj1D,EAAO,EAAG,EAAG,GAC1Bk1D,EAAS,IAAIl1D,EAAO,EAAG,EAAG,GAEpBr8B,EAAI,EAAGA,EAAImmD,EAAM5lD,OAAQP,IAAO,CAEzC,IAAIwxF,EAAOrrC,EAAOnmD,GAEbwxF,EAAK3+C,QAAU2+C,EAAK3+C,OAAOu+C,SAE/B10D,EAASnzB,KAAM,EAAG,EAAG,GACrBmzB,EAASnzB,KAAM,EAAG,EAAG,GACrBsD,EAAOtD,KAAM+nF,EAAO5xF,EAAG4xF,EAAOh5D,EAAGg5D,EAAOlnF,GACxCyC,EAAOtD,KAAMgoF,EAAO7xF,EAAG6xF,EAAOj5D,EAAGi5D,EAAOnnF,IAM1CigC,EAASmO,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACzE2N,EAASmO,aAAc,QAAS,IAAItC,GAAwBrpC,EAAQ,IAEpE,IAAI+3B,EAAW,IAAIwiB,IAAqBphB,aAAcyrD,GAAcpsD,WAAW,EAAOC,YAAY,EAAOY,aAAa,IAEtH2tC,GAAavzE,KAAMsC,KAAMynC,EAAUzF,GAEnChiC,KAAKkgB,KAAOonB,EACZtnC,KAAKujD,MAAQA,EAEbvjD,KAAKgtC,OAAS1F,EAAOhJ,YACrBt+B,KAAKwwC,kBAAmB,EAExBxwC,KAAKkiC,iBAsDN,SAAS4sD,GAAkBxiD,EAAOyiD,GAEjC/uF,KAAKssC,MAAQA,EACbtsC,KAAKssC,MAAMc,oBAEX,IAAI3F,EAAW,IAAIyxC,GAAsB6V,EAAY,EAAG,GACpD/sD,EAAW,IAAImU,IAAqBzR,WAAW,EAAMlD,KAAK,IAC9DQ,EAASx5B,MAAM/D,KAAMzE,KAAKssC,MAAM9jC,OAEhC6uC,GAAK35C,KAAMsC,KAAMynC,EAAUzF,GAE3BhiC,KAAKgtC,OAAShtC,KAAKssC,MAAMhO,YACzBt+B,KAAKwwC,kBAAmB,EA+DzB,SAASw+C,GAAqB1iD,GAE7ByD,GAASryC,KAAMsC,MAEfA,KAAKssC,MAAQA,EACbtsC,KAAKssC,MAAMc,oBAEXptC,KAAKgtC,OAASV,EAAMhO,YACpBt+B,KAAKwwC,kBAAmB,EAExB,IAAIxO,EAAW,IAAIwiB,IAAqBh8C,MAAO8jC,EAAM9jC,QAEjDi/B,EAAW,IAAIqM,GAEnBrM,EAASmO,aAAc,WAAY,IAAIjD,GAAiB,IAAIle,aAAc,IAAS,IAEnFz0B,KAAKyqB,IAAK,IAAIumD,GAAMvpC,EAAUzF,IAE9BhiC,KAAKgqC,SAgDN,SAASilD,GAAuB3iD,EAAO7mC,GAEtCsqC,GAASryC,KAAMsC,MAEfA,KAAKssC,MAAQA,EACbtsC,KAAKssC,MAAMc,oBAEXptC,KAAKgtC,OAASV,EAAMhO,YACpBt+B,KAAKwwC,kBAAmB,EAExB,IAAI/I,EAAW,IAAI0tC,GAA0B1vE,GAC7CgiC,EAASynD,QAAmB,GAAVxsF,KAAK8xE,IAEvB,IAAIxyC,EAAW,IAAImU,IAAqB/S,aAAcyrD,GAAcnqD,WAAW,IAE3E/tB,EAAW8wB,EAAS0nD,aAAc,YAClCllF,EAAS,IAAIwqB,aAA+B,EAAjB9d,EAAS9V,OAExC4mC,EAASmO,aAAc,QAAS,IAAIjD,GAAiB1oC,EAAQ,IAE7DjK,KAAKyqB,IAAK,IAAI4sB,GAAM5P,EAAUzF,IAE9BhiC,KAAKgqC,SAkDN,SAASolD,GAAY3pF,EAAM4pF,EAAWX,EAAQC,GAE7ClpF,EAAOA,GAAQ,GACf4pF,EAAYA,GAAa,GACzBX,EAAS,IAAIj1D,OAAkB1qB,IAAX2/E,EAAuBA,EAAS,SACpDC,EAAS,IAAIl1D,OAAkB1qB,IAAX4/E,EAAuBA,EAAS,SAQpD,IAAM,IANFzoD,EAASmpD,EAAY,EACrBC,EAAO7pF,EAAO4pF,EACdE,EAAW9pF,EAAO,EAElBq0B,KAAe7vB,KAET7M,EAAI,EAAG+M,EAAI,EAAG+/B,GAAMqlD,EAAUnyF,GAAKiyF,EAAWjyF,IAAM8sC,GAAKolD,EAAO,CAEzEx1D,EAASnzB,MAAQ4oF,EAAU,EAAGrlD,EAAGqlD,EAAU,EAAGrlD,GAC9CpQ,EAASnzB,KAAMujC,EAAG,GAAKqlD,EAAUrlD,EAAG,EAAGqlD,GAEvC,IAAI/mF,EAAQpL,IAAM8oC,EAASwoD,EAASC,EAEpCnmF,EAAMwjB,QAAS/hB,EAAQE,GAAKA,GAAK,EACjC3B,EAAMwjB,QAAS/hB,EAAQE,GAAKA,GAAK,EACjC3B,EAAMwjB,QAAS/hB,EAAQE,GAAKA,GAAK,EACjC3B,EAAMwjB,QAAS/hB,EAAQE,GAAKA,GAAK,EAIlC,IAAIs9B,EAAW,IAAIqM,GACnBrM,EAASmO,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACzE2N,EAASmO,aAAc,QAAS,IAAItC,GAAwBrpC,EAAQ,IAEpE,IAAI+3B,EAAW,IAAIwiB,IAAqBphB,aAAcyrD,KAEtD5d,GAAavzE,KAAMsC,KAAMynC,EAAUzF,GAapC,SAASwtD,GAAiBrpD,EAAQspD,EAASC,EAASL,EAAWX,EAAQC,GAEtExoD,EAASA,GAAU,GACnBspD,EAAUA,GAAW,GACrBC,EAAUA,GAAW,EACrBL,EAAYA,GAAa,GACzBX,EAAS,IAAIj1D,OAAkB1qB,IAAX2/E,EAAuBA,EAAS,SACpDC,EAAS,IAAIl1D,OAAkB1qB,IAAX4/E,EAAuBA,EAAS,SAEpD,IAGIn+D,EAAG8B,EACHloB,EAAGhN,EAAG+M,EAAGrN,EAAG0L,EAJZsxB,KACA7vB,KAOJ,IAAM7M,EAAI,EAAGA,GAAKqyF,EAASryF,IAE1BgN,EAAMhN,EAAIqyF,GAAwB,EAAV/sF,KAAK8xE,IAE7BhkD,EAAI9tB,KAAK6zE,IAAKnsE,GAAM+7B,EACpB7T,EAAI5vB,KAAKkiE,IAAKx6D,GAAM+7B,EAEpBrM,EAASnzB,KAAM,EAAG,EAAG,GACrBmzB,EAASnzB,KAAM6pB,EAAG,EAAG8B,GAErB9pB,EAAc,EAAJpL,EAAUsxF,EAASC,EAE7B1kF,EAAOtD,KAAM6B,EAAM1L,EAAG0L,EAAMktB,EAAGltB,EAAMhB,GACrCyC,EAAOtD,KAAM6B,EAAM1L,EAAG0L,EAAMktB,EAAGltB,EAAMhB,GAMtC,IAAMpK,EAAI,EAAGA,GAAKsyF,EAAStyF,IAM1B,IAJAoL,EAAc,EAAJpL,EAAUsxF,EAASC,EAE7B7xF,EAAIqpC,EAAWA,EAASupD,EAAUtyF,EAE5B+M,EAAI,EAAGA,EAAIklF,EAAWllF,IAI3BC,EAAMD,EAAIklF,GAA0B,EAAV3sF,KAAK8xE,IAE/BhkD,EAAI9tB,KAAK6zE,IAAKnsE,GAAMtN,EACpBw1B,EAAI5vB,KAAKkiE,IAAKx6D,GAAMtN,EAEpBg9B,EAASnzB,KAAM6pB,EAAG,EAAG8B,GACrBroB,EAAOtD,KAAM6B,EAAM1L,EAAG0L,EAAMktB,EAAGltB,EAAMhB,GAIrC4C,GAAQD,EAAI,GAAMklF,GAA0B,EAAV3sF,KAAK8xE,IAEvChkD,EAAI9tB,KAAK6zE,IAAKnsE,GAAMtN,EACpBw1B,EAAI5vB,KAAKkiE,IAAKx6D,GAAMtN,EAEpBg9B,EAASnzB,KAAM6pB,EAAG,EAAG8B,GACrBroB,EAAOtD,KAAM6B,EAAM1L,EAAG0L,EAAMktB,EAAGltB,EAAMhB,GAMvC,IAAIigC,EAAW,IAAIqM,GACnBrM,EAASmO,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACzE2N,EAASmO,aAAc,QAAS,IAAItC,GAAwBrpC,EAAQ,IAEpE,IAAI+3B,EAAW,IAAIwiB,IAAqBphB,aAAcyrD,KAEtD5d,GAAavzE,KAAMsC,KAAMynC,EAAUzF,GAYpC,SAAS2tD,GAAmBroD,EAAQ7hC,EAAMuoF,EAAKvpD,GAI9CzkC,KAAKsnC,OAASA,EAEdtnC,KAAKyF,UAAkBsJ,IAATtJ,EAAuBA,EAAO,EAE5C,IAAI+C,OAAkBuG,IAARi/E,EAAsBA,EAAM,SAEtCv7D,OAAwB1jB,IAAd01B,EAA4BA,EAAY,EAIlDwpD,EAAW,EAEXC,EAAcluF,KAAKsnC,OAAOG,SAEzBymD,GAAeA,EAAY/lD,WAE/B8lD,EAAWC,EAAYn0D,MAAMp8B,OAI7Bc,QAAQ4pC,KAAM,sGAMf,IAAIZ,EAAW,IAAIqM,GAEfq6C,EAAY,IAAI76C,GAAmC,EAAX26C,EAAe,EAAG,GAE9DxmD,EAASmO,aAAc,WAAYu4C,GAEnCld,GAAavzE,KAAMsC,KAAMynC,EAAU,IAAI+c,IAAqBh8C,MAAOA,EAAOi8B,UAAWhS,KAIrFzyB,KAAKwwC,kBAAmB,EACxBxwC,KAAKgqC,SAqEN,SAAS4lD,GAAwBtjD,EAAO7mC,GAEvCsqC,GAASryC,KAAMsC,MAEfA,KAAKssC,MAAQA,EACbtsC,KAAKssC,MAAMc,oBAEXptC,KAAKgtC,OAASV,EAAMhO,YACpBt+B,KAAKwwC,kBAAmB,OAEVzhC,IAATtJ,IAAqBA,EAAO,GAEjC,IAAIgiC,EAAW,IAAIqM,GACnBrM,EAASmO,aAAc,WAAY,IAAItC,KACpC7tC,EAAQA,EAAM,EACdA,EAAQA,EAAM,EACdA,GAAQA,EAAM,GACdA,GAAQA,EAAM,GACdA,EAAQA,EAAM,GACd,IAEH,IAAIu8B,EAAW,IAAIwiB,IAAqBhjB,KAAK,IAE7CxhC,KAAKyqB,IAAK,IAAIumD,GAAMvpC,EAAUzF,KAE9ByF,EAAW,IAAIqM,IACN8B,aAAc,WAAY,IAAItC,IAA0B,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,IAErFtzC,KAAKyqB,IAAK,IAAIumD,GAAMvpC,EAAUzF,IAE9BhiC,KAAKgqC,SAsDN,SAAS6lD,GAAcxyD,GAiEtB,SAASyyD,EAAS5yF,EAAGsK,EAAGgB,GAEvBunF,EAAU7yF,EAAGsL,GACbunF,EAAUvoF,EAAGgB,GAId,SAASunF,EAAU1gF,EAAI7G,GAEtBsxB,EAASnzB,KAAM,EAAG,EAAG,GACrBsD,EAAOtD,KAAM6B,EAAM1L,EAAG0L,EAAMktB,EAAGltB,EAAMhB,QAEbuH,IAAnBihF,EAAU3gF,KAEd2gF,EAAU3gF,OAIX2gF,EAAU3gF,GAAK1I,KAAQmzB,EAASn8B,OAAS,EAAM,GAjFhD,IAAI8pC,EAAW,IAAIqM,GACf9R,EAAW,IAAIwiB,IAAqBh8C,MAAO,SAAU46B,aAAc6sD,KAEnEn2D,KACA7vB,KAEA+lF,KAIAE,EAAe,IAAIz2D,EAAO,UAC1B02D,EAAY,IAAI12D,EAAO,UACvB22D,EAAU,IAAI32D,EAAO,OACrB42D,EAAc,IAAI52D,EAAO,UACzB62D,EAAa,IAAI72D,EAAO,SAI5Bq2D,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GAIrBJ,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GAIrBJ,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GACrBJ,EAAS,KAAM,KAAMI,GAIrBJ,EAAS,IAAK,KAAMK,GACpBL,EAAS,IAAK,KAAMK,GACpBL,EAAS,IAAK,KAAMK,GACpBL,EAAS,IAAK,KAAMK,GAIpBL,EAAS,KAAM,KAAMM,GACrBN,EAAS,KAAM,KAAMM,GACrBN,EAAS,KAAM,KAAMM,GAIrBN,EAAS,IAAK,IAAKO,GACnBP,EAAS,IAAK,IAAKQ,GAInBR,EAAS,MAAO,MAAOQ,GACvBR,EAAS,MAAO,MAAOQ,GAEvBR,EAAS,MAAO,MAAOQ,GACvBR,EAAS,MAAO,MAAOQ,GAwBvB7oD,EAASmO,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACzE2N,EAASmO,aAAc,QAAS,IAAItC,GAAwBrpC,EAAQ,IAEpEgnE,GAAavzE,KAAMsC,KAAMynC,EAAUzF,GAEnChiC,KAAKq9B,OAASA,EACTr9B,KAAKq9B,OAAOuP,wBAAyB5sC,KAAKq9B,OAAOuP,yBAEtD5sC,KAAKgtC,OAAS3P,EAAOiB,YACrBt+B,KAAKwwC,kBAAmB,EAExBxwC,KAAKgwF,SAAWA,EAEhBhwF,KAAKgqC,SA8FN,SAASumD,GAAWjpD,EAAQ9+B,GAE3BxI,KAAKsnC,OAASA,OAECv4B,IAAVvG,IAAsBA,EAAQ,UAEnC,IAAIirC,EAAU,IAAIzZ,aAAe,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAClGm0D,EAAY,IAAI15D,aAAc,IAE9BgT,EAAW,IAAIqM,GACnBrM,EAASkO,SAAU,IAAIhD,GAAiBc,EAAS,IACjDhM,EAASmO,aAAc,WAAY,IAAIjD,GAAiBw7C,EAAW,IAEnEld,GAAavzE,KAAMsC,KAAMynC,EAAU,IAAI+c,IAAqBh8C,MAAOA,KAEnExI,KAAKwwC,kBAAmB,EAExBxwC,KAAKgqC,SA8FN,SAASwmD,GAAazpE,EAAKkwB,EAAQt5C,EAAQ6K,EAAOioF,EAAYC,GAI7D3gD,GAASryC,KAAMsC,WAEA+O,IAAVvG,IAAsBA,EAAQ,eACnBuG,IAAXpR,IAAuBA,EAAS,QACjBoR,IAAf0hF,IAA2BA,EAAa,GAAM9yF,QAChCoR,IAAd2hF,IAA0BA,EAAY,GAAMD,QAE3B1hF,IAAjB4hF,MAEJA,GAAe,IAAI78C,IACN8B,aAAc,WAAY,IAAItC,IAA0B,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,KAEzFs9C,GAAe,IAAIxU,GAAwB,EAAG,GAAK,EAAG,EAAG,IAC5CyU,UAAW,GAAK,GAAK,IAInC7wF,KAAK2W,SAASlS,KAAMwyC,GAEpBj3C,KAAK8wF,KAAO,IAAI9f,GAAM2f,GAAc,IAAInsC,IAAqBh8C,MAAOA,KACpExI,KAAK8wF,KAAKtgD,kBAAmB,EAC7BxwC,KAAKyqB,IAAKzqB,KAAK8wF,MAEf9wF,KAAKquF,KAAO,IAAIh3C,GAAMu5C,GAAc,IAAIz6C,IAAqB3tC,MAAOA,KACpExI,KAAKquF,KAAK79C,kBAAmB,EAC7BxwC,KAAKyqB,IAAKzqB,KAAKquF,MAEfruF,KAAK+wF,aAAchqE,GACnB/mB,KAAKgxF,UAAWrzF,EAAQ8yF,EAAYC,GAgErC,SAASO,GAAYxrF,GAIpB,IAAIq0B,GACH,EAAG,EAAG,EAHPr0B,EAAOA,GAAQ,EAGE,EAAG,EACnB,EAAG,EAAG,EAAI,EAAGA,EAAM,EACnB,EAAG,EAAG,EAAI,EAAG,EAAGA,GAGbwE,GACH,EAAG,EAAG,EAAI,EAAG,GAAK,EAClB,EAAG,EAAG,EAAI,GAAK,EAAG,EAClB,EAAG,EAAG,EAAI,EAAG,GAAK,GAGfw9B,EAAW,IAAIqM,GACnBrM,EAASmO,aAAc,WAAY,IAAItC,GAAwBxZ,EAAU,IACzE2N,EAASmO,aAAc,QAAS,IAAItC,GAAwBrpC,EAAQ,IAEpE,IAAI+3B,EAAW,IAAIwiB,IAAqBphB,aAAcyrD,KAEtD5d,GAAavzE,KAAMsC,KAAMynC,EAAUzF,GA6BpC,SAASkvD,KAYR,SAAStlF,EAAM+nE,EAAIC,EAAIud,EAAIC,GAE1BC,EAAK1d,EACL2d,EAAKH,EACLI,GAAO,EAAI5d,EAAK,EAAIC,EAAK,EAAIud,EAAKC,EAClCI,EAAK,EAAI7d,EAAK,EAAIC,EAAKud,EAAKC,EAf7B,IAAIC,EAAK,EAAGC,EAAK,EAAGC,EAAK,EAAGC,EAAK,EAmBjC,OAECC,eAAgB,SAAW9d,EAAIC,EAAIC,EAAI6d,EAAIC,GAE1C/lF,EAAMgoE,EAAIC,EAAI8d,GAAY9d,EAAKF,GAAMge,GAAYD,EAAK9d,KAIvDge,yBAA0B,SAAWje,EAAIC,EAAIC,EAAI6d,EAAIG,EAAKC,EAAKC,GAG9D,IAAIX,GAAOxd,EAAKD,GAAOke,GAAQhe,EAAKF,IAASke,EAAMC,IAAUje,EAAKD,GAAOke,EACrEvP,GAAO1O,EAAKD,GAAOke,GAAQJ,EAAK9d,IAASke,EAAMC,IAAUL,EAAK7d,GAAOke,EAMzEnmF,EAAMgoE,EAAIC,EAHVud,GAAMU,EACNvP,GAAMuP,IAMPE,KAAM,SAAWp1F,GAEhB,IAAI2lF,EAAK3lF,EAAIA,EAEb,OAAOy0F,EAAKC,EAAK10F,EAAI20F,EAAKhP,EAAKiP,GADtBjP,EAAK3lF,KAgBjB,SAASq1F,GAAkBvnB,GAE1BuY,GAAMvlF,KAAMsC,MAEP0qE,EAAO/sE,OAAS,GAAIc,QAAQ4pC,KAAM,oEAEvCroC,KAAK0qE,OAASA,MACd1qE,KAAK21E,QAAS,EAsFf,SAASuc,GAAmB7P,EAAIC,EAAIc,EAAIe,GAEvClB,GAAMvlF,KAAMsC,MAEZA,KAAKqiF,GAAKA,EACVriF,KAAKsiF,GAAKA,EACVtiF,KAAKojF,GAAKA,EACVpjF,KAAKmkF,GAAKA,EAmBX,SAASgO,GAAuB9P,EAAIC,EAAIc,GAEvCH,GAAMvlF,KAAMsC,MAEZA,KAAKqiF,GAAKA,EACVriF,KAAKsiF,GAAKA,EACVtiF,KAAKojF,GAAKA,EAmBX,SAASgP,GAAY9P,EAAIc,GAExBH,GAAMvlF,KAAMsC,MAEZA,KAAKsiF,GAAKA,EACVtiF,KAAKojF,GAAKA,EAyBX,SAASiP,GAAU5O,EAAIC,EAAI4O,EAASzO,EAAaC,EAAWC,GAE3DP,GAAa9lF,KAAMsC,KAAMyjF,EAAIC,EAAI4O,EAASA,EAASzO,EAAaC,EAAWC,GA6N5E,SAASwO,GAAoB7nB,GAE5BjsE,QAAQ4pC,KAAM,qFAEd4pD,GAAiBv0F,KAAMsC,KAAM0qE,GAC7B1qE,KAAKkF,KAAO,aACZlF,KAAK21E,QAAS,EAQf,SAAS6c,GAAc9nB,GAEtBjsE,QAAQ4pC,KAAM,+EAEd4pD,GAAiBv0F,KAAMsC,KAAM0qE,GAC7B1qE,KAAKkF,KAAO,aAQb,SAASutF,GAAQ/nB,GAEhBjsE,QAAQ4pC,KAAM,sEAEd4pD,GAAiBv0F,KAAMsC,KAAM0qE,GAC7B1qE,KAAKkF,KAAO,kBAz+yCW6J,IAAnB8K,OAAO64E,UAEX74E,OAAO64E,QAAUhwF,KAAKC,IAAK,GAAK,UAIPoM,IAArB8K,OAAO84E,YAKX94E,OAAO84E,UAAY,SAAWxzF,GAE7B,MAAwB,iBAAVA,GAAsByzF,SAAUzzF,IAAWuD,KAAKK,MAAO5D,KAAYA,SAQhE4P,IAAdrM,KAAK85E,OAIT95E,KAAK85E,KAAO,SAAWhsD,GAEtB,OAASA,EAAI,GAAQ,EAAMA,EAAI,EAAM,GAAMA,SAMZzhB,IAA5B9G,SAAS9J,UAAUgO,MAKvBjO,OAAOgB,eAAgB+I,SAAS9J,UAAW,QAE1CsC,IAAK,WAEJ,OAAOT,KAAK0e,WAAW9V,MAAO,6BAA+B,WAQzCmG,IAAlB7Q,OAAO20F,SAOV30F,OAAO20F,OAAS,SAAWvzF,GAI1B,QAAgByP,IAAXzP,GAAmC,OAAXA,EAE5B,MAAM,IAAIL,UAAW,8CAMtB,IAAM,IAFFqhB,EAASpiB,OAAQoB,GAEXmJ,EAAQ,EAAGA,EAAQvC,UAAUvI,OAAQ8K,IAAW,CAEzD,IAAIuc,EAAS9e,UAAWuC,GAExB,QAAgBsG,IAAXiW,GAAmC,OAAXA,EAE5B,IAAM,IAAI8tE,KAAW9tE,EAEf9mB,OAAOC,UAAUC,eAAeV,KAAMsnB,EAAQ8tE,KAElDxyE,EAAQwyE,GAAY9tE,EAAQ8tE,IAUhC,OAAOxyE,IAcVpiB,OAAO20F,OAAQviE,EAAgBnyB,WAE9BqI,iBAAkB,SAAWtB,EAAM8gF,QAETj3E,IAApB/O,KAAK+yF,aAA2B/yF,KAAK+yF,eAE1C,IAAI1rF,EAAYrH,KAAK+yF,gBAEMhkF,IAAtB1H,EAAWnC,KAEfmC,EAAWnC,QAIqC,IAA5CmC,EAAWnC,GAAOqL,QAASy1E,IAE/B3+E,EAAWnC,GAAOyB,KAAMq/E,IAM1BgN,iBAAkB,SAAW9tF,EAAM8gF,GAElC,QAAyBj3E,IAApB/O,KAAK+yF,WAA2B,OAAO,EAE5C,IAAI1rF,EAAYrH,KAAK+yF,WAErB,YAA6BhkF,IAAtB1H,EAAWnC,KAAoE,IAA5CmC,EAAWnC,GAAOqL,QAASy1E,IAItEh/E,oBAAqB,SAAW9B,EAAM8gF,GAErC,QAAyBj3E,IAApB/O,KAAK+yF,WAAV,CAEA,IACIE,EADYjzF,KAAK+yF,WACU7tF,GAE/B,QAAuB6J,IAAlBkkF,EAA8B,CAElC,IAAIxqF,EAAQwqF,EAAc1iF,QAASy1E,IAElB,IAAZv9E,GAEJwqF,EAAc9rF,OAAQsB,EAAO,MAQhCyqF,cAAe,SAAWzsF,GAEzB,QAAyBsI,IAApB/O,KAAK+yF,WAAV,CAEA,IACIE,EADYjzF,KAAK+yF,WACUtsF,EAAMvB,MAErC,QAAuB6J,IAAlBkkF,EAA8B,CAElCxsF,EAAMnH,OAASU,KAIf,IAAM,IAFFygB,EAAQwyE,EAAcvxF,MAAO,GAEvBtE,EAAI,EAAGI,EAAIijB,EAAM9iB,OAAQP,EAAII,EAAGJ,IAEzCqjB,EAAOrjB,GAAIM,KAAMsC,KAAMyG,QAU3B,IAAI+iE,GAAW,KACX2pB,IAAUC,KAAM,EAAGC,OAAQ,EAAGC,MAAO,GACrCxkC,GAAe,EACfE,GAAe,EACfE,GAAgB,EAEhB8f,GAAuB,EAGvB/iC,GAAe,EACfoT,GAAmB,EACnBpc,GAAY,EACZmG,GAAW,EACXF,GAAa,EACbqc,GAAc,EACdpiB,GAAgB,EAChBE,GAAW,EACX4sD,GAAa,EACbpB,GAAe,EACf7hC,GAAa,EACbjqB,GAAiB,EACjBqqB,GAAmB,EACnBO,GAAsB,EACtBI,GAAmB,EACnBd,GAAiB,EACjBxpB,GAAc,IACdsjC,GAAmB,IACnBE,GAA0B,IAC1BkC,GAAc,IACdC,GAAc,IACdjC,GAAa,IACbC,GAAY,IACZC,GAAiB,IACjBC,GAAyB,IACzB/jC,GAAiB,IACjBC,GAAyB,IACzB+jC,GAAiB,IACjBE,GAAyB,IACzBE,GAAiB,IACjBE,GAAyB,IACzBE,GAAyB,IACzBtX,GAAa,EACbE,GAAc,EACdE,GAAY,EACZltB,GAAiB,EACjBqtB,GAAa,EACbE,GAAoB,EACpBE,GAAe,EACfE,GAAgB,EAChB3a,GAAoB,EACpBoJ,GAAe,EACfC,GAAe,EACfwB,GAAgB,EAChBtE,GAAoB,EACpBC,GAAsB,EACtBC,GAAwB,EACxBC,GAAoB,EAEpBppB,GAAwB,IACxBwrB,GAAwB,IACxBG,GAAmC,IACnCC,GAAmC,IACnCC,GAA6B,IAC7BJ,GAA0B,IAC1BC,GAA0B,IAC1B2lB,GAAiB,IACjB9zC,GAAsB,KACtBg0C,GAAyB,KACzB1xC,GAAgB,KAChBqzB,GAA6B,KAC7BC,GAA4B,KAC5B31B,GAAe,KACfm0C,GAA4B,KAC5Bl0C,GAA2B,KAC3BE,GAAmB,KACnBy0C,GAAW,KACXC,GAAY,KACZrc,GAAoB,KACpBsc,GAAU,KACVrc,GAAkB,KAClBrB,GAAY,KACZC,GAAgB,KAChBid,GAAwB,KACxBE,GAAwB,KACxBE,GAAuB,KACvB9b,GAAqB,KACrBoc,GAAc,KACdjc,GAAY,KACZ74B,GAAa,KACbg1C,GAAkB,KAClBE,GAAuB,KACvB0sB,GAAa5hE,GACbq4B,GAAc,KACdG,GAAqB,KACrB8d,GAAuB,KACvBC,GAAwB,KACxBC,GAAwB,KACxBC,GAAwB,KACxBK,GAA0B,KAC1BC,GAA0B,KAC1BC,GAA2B,KAC3BC,GAA2B,KAC3BK,GAAkB,KAElB2hB,GAAa,KAKbZ,GAAsB,KAGtBzyC,GAAoB,EACpBs2B,GAAwB,EACxBE,GAAsB,EACtB57C,GAAiB,IACjBkqB,GAAe,KACfK,GAAgB,KAChBJ,GAAe,KAEfC,GAAgB,KAChBC,GAAiB,KACjBC,GAAe,KACf9W,GAAoB,KACpB8F,GAAmB,KAOnBta,IAEHuqD,QAASh5E,KAAK8xE,GAAK,IACnBgf,QAAS,IAAM9wF,KAAK8xE,GAEpBpjD,aAAc,WAIb,IAEat0B,EAFTuG,EAAQ,iEAAiE4I,MAAO,IAChFilB,EAAO,IAAI7lB,MAAO,IAClBooF,EAAM,EAEV,OAAO,WAEN,IAAM,IAAIr2F,EAAI,EAAGA,EAAI,GAAIA,IAEb,IAANA,GAAiB,KAANA,GAAkB,KAANA,GAAkB,KAANA,EAEvC8zB,EAAM9zB,GAAM,IAEK,KAANA,EAEX8zB,EAAM9zB,GAAM,KAIPq2F,GAAO,IAAOA,EAAM,SAA8B,SAAhB/wF,KAAKG,SAAyB,GACrE/F,EAAU,GAAN22F,EACJA,IAAa,EACbviE,EAAM9zB,GAAMiG,EAAe,KAANjG,EAAmB,EAAJN,EAAY,EAAMA,IAMxD,OAAOo0B,EAAK9V,KAAM,KA/BN,GAqCd8+D,MAAO,SAAW/6E,EAAOiD,EAAKC,GAE7B,OAAOK,KAAKL,IAAKD,EAAKM,KAAKN,IAAKC,EAAKlD,KAOtCu0F,gBAAiB,SAAW72F,EAAG0mB,GAE9B,OAAW1mB,EAAI0mB,EAAMA,GAAMA,GAM5BowE,UAAW,SAAWnjE,EAAGojE,EAAIC,EAAIC,EAAIC,GAEpC,OAAOD,GAAOtjE,EAAIojE,IAASG,EAAKD,IAASD,EAAKD,IAM/CvgB,KAAM,SAAW7iD,EAAGpN,EAAGxmB,GAEtB,OAAS,EAAIA,GAAM4zB,EAAI5zB,EAAIwmB,GAM5B4wE,WAAY,SAAWxjE,EAAGpuB,EAAKC,GAE9B,OAAKmuB,GAAKpuB,EAAa,EAClBouB,GAAKnuB,EAAa,GAEvBmuB,GAAMA,EAAIpuB,IAAUC,EAAMD,IAEfouB,GAAM,EAAI,EAAIA,IAI1ByjE,aAAc,SAAWzjE,EAAGpuB,EAAKC,GAEhC,OAAKmuB,GAAKpuB,EAAa,EAClBouB,GAAKnuB,EAAa,GAEvBmuB,GAAMA,EAAIpuB,IAAUC,EAAMD,IAEfouB,EAAIA,GAAMA,GAAU,EAAJA,EAAQ,IAAO,KAM3C0jE,QAAS,SAAWC,EAAKC,GAExB,OAAOD,EAAMzxF,KAAKK,MAAOL,KAAKG,UAAauxF,EAAOD,EAAM,KAMzDE,UAAW,SAAWF,EAAKC,GAE1B,OAAOD,EAAMzxF,KAAKG,UAAauxF,EAAOD,IAMvCG,gBAAiB,SAAWC,GAE3B,OAAOA,GAAU,GAAM7xF,KAAKG,WAI7B2xF,SAAU,SAAWC,GAEpB,OAAOA,EAAUtjE,GAAMuqD,SAIxBgZ,SAAU,SAAWC,GAEpB,OAAOA,EAAUxjE,GAAMqiE,SAIxB7sC,aAAc,SAAWxnD,GAExB,OAAqC,IAA5BA,EAAUA,EAAQ,IAAyB,IAAVA,GAI3C4nD,kBAAmB,SAAW5nD,GAE7B,OAAOuD,KAAKC,IAAK,EAAGD,KAAK+gB,MAAO/gB,KAAKhE,IAAKS,GAAUuD,KAAKu9D,OAI1DU,eAAgB,SAAWxhE,GAU1B,OARAA,IACAA,GAASA,GAAS,EAClBA,GAASA,GAAS,EAClBA,GAASA,GAAS,EAClBA,GAASA,GAAS,EAClBA,GAASA,GAAS,KAClBA,IAsBFjB,OAAOmB,iBAAkBkxB,EAAQpyB,WAEhCs0B,OAEChyB,IAAK,WAEJ,OAAOT,KAAKwwB,GAIb9rB,IAAK,SAAWvF,GAEfa,KAAKwwB,EAAIrxB,IAMXuzB,QAECjyB,IAAK,WAEJ,OAAOT,KAAKojB,GAIb1e,IAAK,SAAWvF,GAEfa,KAAKojB,EAAIjkB,MAQZjB,OAAO20F,OAAQtiE,EAAQpyB,WAEtBy2F,WAAW,EAEXlwF,IAAK,SAAW8rB,EAAGpN,GAKlB,OAHApjB,KAAKwwB,EAAIA,EACTxwB,KAAKojB,EAAIA,EAEFpjB,MAIR60F,UAAW,SAAWC,GAKrB,OAHA90F,KAAKwwB,EAAIskE,EACT90F,KAAKojB,EAAI0xE,EAEF90F,MAIR+0F,KAAM,SAAWvkE,GAIhB,OAFAxwB,KAAKwwB,EAAIA,EAEFxwB,MAIRg1F,KAAM,SAAW5xE,GAIhB,OAFApjB,KAAKojB,EAAIA,EAEFpjB,MAIRi1F,aAAc,SAAWxsF,EAAOtJ,GAE/B,OAASsJ,GAER,KAAK,EAAGzI,KAAKwwB,EAAIrxB,EAAO,MACxB,KAAK,EAAGa,KAAKojB,EAAIjkB,EAAO,MACxB,QAAS,MAAM,IAAI7B,MAAO,0BAA4BmL,GAIvD,OAAOzI,MAIRk1F,aAAc,SAAWzsF,GAExB,OAASA,GAER,KAAK,EAAG,OAAOzI,KAAKwwB,EACpB,KAAK,EAAG,OAAOxwB,KAAKojB,EACpB,QAAS,MAAM,IAAI9lB,MAAO,0BAA4BmL,KAMxDmH,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKwwB,EAAGxwB,KAAKojB,IAI3C3e,KAAM,SAAW2F,GAKhB,OAHApK,KAAKwwB,EAAIpmB,EAAEomB,EACXxwB,KAAKojB,EAAIhZ,EAAEgZ,EAEJpjB,MAIRyqB,IAAK,SAAWrgB,EAAGmoB,GAElB,YAAWxjB,IAANwjB,GAEJ9zB,QAAQ4pC,KAAM,yFACProC,KAAKw3E,WAAYptE,EAAGmoB,KAI5BvyB,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EAELpjB,OAIRm1F,UAAW,SAAWp4F,GAKrB,OAHAiD,KAAKwwB,GAAKzzB,EACViD,KAAKojB,GAAKrmB,EAEHiD,MAIRw3E,WAAY,SAAWt6E,EAAGsK,GAKzB,OAHAxH,KAAKwwB,EAAItzB,EAAEszB,EAAIhpB,EAAEgpB,EACjBxwB,KAAKojB,EAAIlmB,EAAEkmB,EAAI5b,EAAE4b,EAEVpjB,MAIRo1F,gBAAiB,SAAWhrF,EAAGrN,GAK9B,OAHAiD,KAAKwwB,GAAKpmB,EAAEomB,EAAIzzB,EAChBiD,KAAKojB,GAAKhZ,EAAEgZ,EAAIrmB,EAETiD,MAIRwkE,IAAK,SAAWp6D,EAAGmoB,GAElB,YAAWxjB,IAANwjB,GAEJ9zB,QAAQ4pC,KAAM,yFACProC,KAAK6yE,WAAYzoE,EAAGmoB,KAI5BvyB,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EAELpjB,OAIRq1F,UAAW,SAAWt4F,GAKrB,OAHAiD,KAAKwwB,GAAKzzB,EACViD,KAAKojB,GAAKrmB,EAEHiD,MAIR6yE,WAAY,SAAW31E,EAAGsK,GAKzB,OAHAxH,KAAKwwB,EAAItzB,EAAEszB,EAAIhpB,EAAEgpB,EACjBxwB,KAAKojB,EAAIlmB,EAAEkmB,EAAI5b,EAAE4b,EAEVpjB,MAIRqtC,SAAU,SAAWjjC,GAKpB,OAHApK,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EAELpjB,MAIR86D,eAAgB,SAAWg6B,GAK1B,OAHA90F,KAAKwwB,GAAKskE,EACV90F,KAAKojB,GAAK0xE,EAEH90F,MAIRs1F,OAAQ,SAAWlrF,GAKlB,OAHApK,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EAELpjB,MAIRo0E,aAAc,SAAW0gB,GAExB,OAAO90F,KAAK86D,eAAgB,EAAIg6B,IAIjC1yF,IAAK,SAAWgI,GAKf,OAHApK,KAAKwwB,EAAI9tB,KAAKN,IAAKpC,KAAKwwB,EAAGpmB,EAAEomB,GAC7BxwB,KAAKojB,EAAI1gB,KAAKN,IAAKpC,KAAKojB,EAAGhZ,EAAEgZ,GAEtBpjB,MAIRqC,IAAK,SAAW+H,GAKf,OAHApK,KAAKwwB,EAAI9tB,KAAKL,IAAKrC,KAAKwwB,EAAGpmB,EAAEomB,GAC7BxwB,KAAKojB,EAAI1gB,KAAKL,IAAKrC,KAAKojB,EAAGhZ,EAAEgZ,GAEtBpjB,MAIRk6E,MAAO,SAAW93E,EAAKC,GAOtB,OAHArC,KAAKwwB,EAAI9tB,KAAKL,IAAKD,EAAIouB,EAAG9tB,KAAKN,IAAKC,EAAImuB,EAAGxwB,KAAKwwB,IAChDxwB,KAAKojB,EAAI1gB,KAAKL,IAAKD,EAAIghB,EAAG1gB,KAAKN,IAAKC,EAAI+gB,EAAGpjB,KAAKojB,IAEzCpjB,MAIRu1F,YAAa,WAEZ,IAAInzF,EAAM,IAAImuB,EACVluB,EAAM,IAAIkuB,EAEd,OAAO,SAAsBilE,EAAQC,GAKpC,OAHArzF,EAAIsC,IAAK8wF,EAAQA,GACjBnzF,EAAIqC,IAAK+wF,EAAQA,GAEVz1F,KAAKk6E,MAAO93E,EAAKC,IAVb,GAgBbqzF,YAAa,SAAWtzF,EAAKC,GAE5B,IAAI1E,EAASqC,KAAKrC,SAElB,OAAOqC,KAAKo0E,aAAcz2E,GAAU,GAAIm9D,eAAgBp4D,KAAKL,IAAKD,EAAKM,KAAKN,IAAKC,EAAK1E,MAIvFoF,MAAO,WAKN,OAHA/C,KAAKwwB,EAAI9tB,KAAKK,MAAO/C,KAAKwwB,GAC1BxwB,KAAKojB,EAAI1gB,KAAKK,MAAO/C,KAAKojB,GAEnBpjB,MAIR4jB,KAAM,WAKL,OAHA5jB,KAAKwwB,EAAI9tB,KAAKkhB,KAAM5jB,KAAKwwB,GACzBxwB,KAAKojB,EAAI1gB,KAAKkhB,KAAM5jB,KAAKojB,GAElBpjB,MAIRyjB,MAAO,WAKN,OAHAzjB,KAAKwwB,EAAI9tB,KAAK+gB,MAAOzjB,KAAKwwB,GAC1BxwB,KAAKojB,EAAI1gB,KAAK+gB,MAAOzjB,KAAKojB,GAEnBpjB,MAIR21F,YAAa,WAKZ,OAHA31F,KAAKwwB,EAAMxwB,KAAKwwB,EAAI,EAAM9tB,KAAKkhB,KAAM5jB,KAAKwwB,GAAM9tB,KAAKK,MAAO/C,KAAKwwB,GACjExwB,KAAKojB,EAAMpjB,KAAKojB,EAAI,EAAM1gB,KAAKkhB,KAAM5jB,KAAKojB,GAAM1gB,KAAKK,MAAO/C,KAAKojB,GAE1DpjB,MAIR41F,OAAQ,WAKP,OAHA51F,KAAKwwB,GAAMxwB,KAAKwwB,EAChBxwB,KAAKojB,GAAMpjB,KAAKojB,EAETpjB,MAIR+7E,IAAK,SAAW3xE,GAEf,OAAOpK,KAAKwwB,EAAIpmB,EAAEomB,EAAIxwB,KAAKojB,EAAIhZ,EAAEgZ,GAIlCyyE,SAAU,WAET,OAAO71F,KAAKwwB,EAAIxwB,KAAKwwB,EAAIxwB,KAAKojB,EAAIpjB,KAAKojB,GAIxCzlB,OAAQ,WAEP,OAAO+E,KAAKg+D,KAAM1gE,KAAKwwB,EAAIxwB,KAAKwwB,EAAIxwB,KAAKojB,EAAIpjB,KAAKojB,IAInD0yE,gBAAiB,WAEhB,OAAOpzF,KAAKoI,IAAK9K,KAAKwwB,GAAM9tB,KAAKoI,IAAK9K,KAAKojB,IAI5CiiD,UAAW,WAEV,OAAOrlE,KAAKo0E,aAAcp0E,KAAKrC,UAAY,IAI5CknE,MAAO,WAIN,IAAIA,EAAQniE,KAAK+xE,MAAOz0E,KAAKojB,EAAGpjB,KAAKwwB,GAIrC,OAFKq0C,EAAQ,IAAIA,GAAS,EAAIniE,KAAK8xE,IAE5B3P,GAIRkxB,WAAY,SAAW3rF,GAEtB,OAAO1H,KAAKg+D,KAAM1gE,KAAKg2F,kBAAmB5rF,KAI3C4rF,kBAAmB,SAAW5rF,GAE7B,IAAI6rF,EAAKj2F,KAAKwwB,EAAIpmB,EAAEomB,EAAG0lE,EAAKl2F,KAAKojB,EAAIhZ,EAAEgZ,EACvC,OAAO6yE,EAAKA,EAAKC,EAAKA,GAIvBC,oBAAqB,SAAW/rF,GAE/B,OAAO1H,KAAKoI,IAAK9K,KAAKwwB,EAAIpmB,EAAEomB,GAAM9tB,KAAKoI,IAAK9K,KAAKojB,EAAIhZ,EAAEgZ,IAIxD4tE,UAAW,SAAWrzF,GAErB,OAAOqC,KAAKqlE,YAAYvK,eAAgBn9D,IAIzC01E,KAAM,SAAWjpE,EAAGutC,GAKnB,OAHA33C,KAAKwwB,IAAOpmB,EAAEomB,EAAIxwB,KAAKwwB,GAAMmnB,EAC7B33C,KAAKojB,IAAOhZ,EAAEgZ,EAAIpjB,KAAKojB,GAAMu0B,EAEtB33C,MAIRo2F,YAAa,SAAW9T,EAAIc,EAAIzrC,GAE/B,OAAO33C,KAAK6yE,WAAYuQ,EAAId,GAAKxnB,eAAgBnjB,GAAQltB,IAAK63D,IAI/DnyB,OAAQ,SAAW/lD,GAElB,OAAWA,EAAEomB,IAAMxwB,KAAKwwB,GAASpmB,EAAEgZ,IAAMpjB,KAAKojB,GAI/Cw0C,UAAW,SAAWn3C,EAAOoR,GAO5B,YALgB9iB,IAAX8iB,IAAuBA,EAAS,GAErC7xB,KAAKwwB,EAAI/P,EAAOoR,GAChB7xB,KAAKojB,EAAI3C,EAAOoR,EAAS,GAElB7xB,MAIRgsB,QAAS,SAAWvL,EAAOoR,GAQ1B,YANe9iB,IAAV0R,IAAsBA,WACX1R,IAAX8iB,IAAuBA,EAAS,GAErCpR,EAAOoR,GAAW7xB,KAAKwwB,EACvB/P,EAAOoR,EAAS,GAAM7xB,KAAKojB,EAEpB3C,GAIR2xD,oBAAqB,SAAWlkC,EAAWzlC,EAAOopB,GAWjD,YATgB9iB,IAAX8iB,GAEJpzB,QAAQ4pC,KAAM,uEAIfroC,KAAKwwB,EAAI0d,EAAUikC,KAAM1pE,GACzBzI,KAAKojB,EAAI8qB,EAAUmoD,KAAM5tF,GAElBzI,MAIRs2F,aAAc,SAAWpwD,EAAQ2+B,GAEhC,IAAIt8D,EAAI7F,KAAKkiE,IAAKC,GAAS9nE,EAAI2F,KAAK6zE,IAAK1R,GAErCr0C,EAAIxwB,KAAKwwB,EAAI0V,EAAO1V,EACpBpN,EAAIpjB,KAAKojB,EAAI8iB,EAAO9iB,EAKxB,OAHApjB,KAAKwwB,EAAIA,EAAIjoB,EAAI6a,EAAIrmB,EAAImpC,EAAO1V,EAChCxwB,KAAKojB,EAAIoN,EAAIzzB,EAAIqmB,EAAI7a,EAAI29B,EAAO9iB,EAEzBpjB,QAYT,IAAIixB,GAAY,EA6ChBR,EAAQY,mBAAgBtiB,EACxB0hB,EAAQc,gBA9vBQ,IAgwBhBrzB,OAAOgB,eAAgBuxB,EAAQtyB,UAAW,eAEzCuG,IAAK,SAAWvF,IAEA,IAAVA,GAAiBa,KAAK6hB,aAM7B3jB,OAAO20F,OAAQpiE,EAAQtyB,UAAWmyB,EAAgBnyB,WAEjDsJ,YAAagpB,EAEbkoB,WAAW,EAEX/oC,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWugB,GA6BhB,OA3BAhlB,KAAKmM,KAAO6Y,EAAO7Y,KAEnBnM,KAAK0wB,MAAQ1L,EAAO0L,MACpB1wB,KAAKsxB,QAAUtM,EAAOsM,QAAQ5vB,MAAO,GAErC1B,KAAK2wB,QAAU3L,EAAO2L,QAEtB3wB,KAAK4wB,MAAQ5L,EAAO4L,MACpB5wB,KAAK6wB,MAAQ7L,EAAO6L,MAEpB7wB,KAAK8wB,UAAY9L,EAAO8L,UACxB9wB,KAAK+wB,UAAY/L,EAAO+L,UAExB/wB,KAAKgxB,WAAahM,EAAOgM,WAEzBhxB,KAAKwL,OAASwZ,EAAOxZ,OACrBxL,KAAKkF,KAAO8f,EAAO9f,KAEnBlF,KAAK6xB,OAAOptB,KAAMugB,EAAO6M,QACzB7xB,KAAK8xB,OAAOrtB,KAAMugB,EAAO8M,QAEzB9xB,KAAK+xB,gBAAkB/M,EAAO+M,gBAC9B/xB,KAAKgyB,iBAAmBhN,EAAOgN,iBAC/BhyB,KAAKiyB,MAAQjN,EAAOiN,MACpBjyB,KAAKkyB,gBAAkBlN,EAAOkN,gBAC9BlyB,KAAK0oB,SAAW1D,EAAO0D,SAEhB1oB,MAIR0iB,OAAQ,SAAW6zE,GAElB,QAAoCxnF,IAA/BwnF,EAAK/uC,SAAUxnD,KAAKkxB,MAExB,OAAOqlE,EAAK/uC,SAAUxnD,KAAKkxB,MAkC5B,IAAI5Q,GACHk2E,UACC30E,QAAS,IACT3c,KAAM,UACNuxF,UAAW,kBAGZvlE,KAAMlxB,KAAKkxB,KACX/kB,KAAMnM,KAAKmM,KAEXwkB,QAAS3wB,KAAK2wB,QAEdmB,QAAU9xB,KAAK8xB,OAAOtB,EAAGxwB,KAAK8xB,OAAO1O,GACrCyO,QAAU7xB,KAAK6xB,OAAOrB,EAAGxwB,KAAK6xB,OAAOzO,GACrCszE,MAAQ12F,KAAK4wB,MAAO5wB,KAAK6wB,OAEzBE,UAAW/wB,KAAK+wB,UAChBD,UAAW9wB,KAAK8wB,UAChBE,WAAYhxB,KAAKgxB,WAEjBiB,MAAOjyB,KAAKiyB,OAGb,QAAoBljB,IAAf/O,KAAK0wB,MAAsB,CAI/B,IAAIA,EAAQ1wB,KAAK0wB,WAEG3hB,IAAf2hB,EAAMQ,OAEVR,EAAMQ,KAAOC,GAAMC,qBAIeriB,IAA9BwnF,EAAKviE,OAAQtD,EAAMQ,QAEvBqlE,EAAKviE,OAAQtD,EAAMQ,OAClBA,KAAMR,EAAMQ,KACZ9J,IArEH,SAAqBsJ,GAEpB,IAAIiQ,EAgBJ,YAdyB5xB,IAApB2hB,EAAMimE,UAEVh2D,EAASjQ,IAITiQ,EAAS33B,SAAS43B,gBAAiB,+BAAgC,WAC5DnO,MAAQ/B,EAAM+B,MACrBkO,EAAOjO,OAAShC,EAAMgC,OAEtBiO,EAAOE,WAAY,MAAO6lB,UAAWh2B,EAAO,EAAG,EAAGA,EAAM+B,MAAO/B,EAAMgC,SAIjEiO,EAAOlO,MAAQ,MAAQkO,EAAOjO,OAAS,KAEpCiO,EAAOg2D,UAAW,aAAc,IAIhCh2D,EAAOg2D,UAAW,aA6CnBC,CAAYlmE,KAKnBpQ,EAAOoQ,MAAQA,EAAMQ,KAMtB,OAFAqlE,EAAK/uC,SAAUxnD,KAAKkxB,MAAS5Q,EAEtBA,GAIRg5B,QAAS,WAERt5C,KAAKkzF,eAAiBhuF,KAAM,aAI7B2xF,YAAa,SAAW56D,GAEvB,GA35Bc,MA25BTj8B,KAAK2wB,QAAV,CAKA,GAHAsL,EAAGoR,SAAUrtC,KAAK8xB,QAClBmK,EAAGxR,IAAKzqB,KAAK6xB,QAERoK,EAAGzL,EAAI,GAAKyL,EAAGzL,EAAI,EAEvB,OAASxwB,KAAK4wB,OAEb,KAAK00C,GAEJrpC,EAAGzL,EAAIyL,EAAGzL,EAAI9tB,KAAKK,MAAOk5B,EAAGzL,GAC7B,MAED,KAAKgB,GAEJyK,EAAGzL,EAAIyL,EAAGzL,EAAI,EAAI,EAAI,EACtB,MAED,KAAKg1C,GAEwC,IAAvC9iE,KAAKoI,IAAKpI,KAAKK,MAAOk5B,EAAGzL,GAAM,GAEnCyL,EAAGzL,EAAI9tB,KAAKkhB,KAAMqY,EAAGzL,GAAMyL,EAAGzL,EAI9ByL,EAAGzL,EAAIyL,EAAGzL,EAAI9tB,KAAKK,MAAOk5B,EAAGzL,GASjC,GAAKyL,EAAG7Y,EAAI,GAAK6Y,EAAG7Y,EAAI,EAEvB,OAASpjB,KAAK6wB,OAEb,KAAKy0C,GAEJrpC,EAAG7Y,EAAI6Y,EAAG7Y,EAAI1gB,KAAKK,MAAOk5B,EAAG7Y,GAC7B,MAED,KAAKoO,GAEJyK,EAAG7Y,EAAI6Y,EAAG7Y,EAAI,EAAI,EAAI,EACtB,MAED,KAAKoiD,GAEwC,IAAvC9iE,KAAKoI,IAAKpI,KAAKK,MAAOk5B,EAAG7Y,GAAM,GAEnC6Y,EAAG7Y,EAAI1gB,KAAKkhB,KAAMqY,EAAG7Y,GAAM6Y,EAAG7Y,EAI9B6Y,EAAG7Y,EAAI6Y,EAAG7Y,EAAI1gB,KAAKK,MAAOk5B,EAAG7Y,GAS5BpjB,KAAKiyB,QAETgK,EAAG7Y,EAAI,EAAI6Y,EAAG7Y,OAyBjBllB,OAAO20F,OAAQxgE,EAAQl0B,WAEtB24F,WAAW,EAEXpyF,IAAK,SAAW8rB,EAAGpN,EAAGkP,EAAGC,GAOxB,OALAvyB,KAAKwwB,EAAIA,EACTxwB,KAAKojB,EAAIA,EACTpjB,KAAKsyB,EAAIA,EACTtyB,KAAKuyB,EAAIA,EAEFvyB,MAIR60F,UAAW,SAAWC,GAOrB,OALA90F,KAAKwwB,EAAIskE,EACT90F,KAAKojB,EAAI0xE,EACT90F,KAAKsyB,EAAIwiE,EACT90F,KAAKuyB,EAAIuiE,EAEF90F,MAIR+0F,KAAM,SAAWvkE,GAIhB,OAFAxwB,KAAKwwB,EAAIA,EAEFxwB,MAIRg1F,KAAM,SAAW5xE,GAIhB,OAFApjB,KAAKojB,EAAIA,EAEFpjB,MAIR+2F,KAAM,SAAWzkE,GAIhB,OAFAtyB,KAAKsyB,EAAIA,EAEFtyB,MAIRg3F,KAAM,SAAWzkE,GAIhB,OAFAvyB,KAAKuyB,EAAIA,EAEFvyB,MAIRi1F,aAAc,SAAWxsF,EAAOtJ,GAE/B,OAASsJ,GAER,KAAK,EAAGzI,KAAKwwB,EAAIrxB,EAAO,MACxB,KAAK,EAAGa,KAAKojB,EAAIjkB,EAAO,MACxB,KAAK,EAAGa,KAAKsyB,EAAInzB,EAAO,MACxB,KAAK,EAAGa,KAAKuyB,EAAIpzB,EAAO,MACxB,QAAS,MAAM,IAAI7B,MAAO,0BAA4BmL,GAIvD,OAAOzI,MAIRk1F,aAAc,SAAWzsF,GAExB,OAASA,GAER,KAAK,EAAG,OAAOzI,KAAKwwB,EACpB,KAAK,EAAG,OAAOxwB,KAAKojB,EACpB,KAAK,EAAG,OAAOpjB,KAAKsyB,EACpB,KAAK,EAAG,OAAOtyB,KAAKuyB,EACpB,QAAS,MAAM,IAAIj1B,MAAO,0BAA4BmL,KAMxDmH,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKwwB,EAAGxwB,KAAKojB,EAAGpjB,KAAKsyB,EAAGtyB,KAAKuyB,IAI3D9tB,KAAM,SAAW2F,GAOhB,OALApK,KAAKwwB,EAAIpmB,EAAEomB,EACXxwB,KAAKojB,EAAIhZ,EAAEgZ,EACXpjB,KAAKsyB,EAAIloB,EAAEkoB,EACXtyB,KAAKuyB,OAAcxjB,IAAR3E,EAAEmoB,EAAoBnoB,EAAEmoB,EAAI,EAEhCvyB,MAIRyqB,IAAK,SAAWrgB,EAAGmoB,GAElB,YAAWxjB,IAANwjB,GAEJ9zB,QAAQ4pC,KAAM,yFACProC,KAAKw3E,WAAYptE,EAAGmoB,KAI5BvyB,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EACZpjB,KAAKsyB,GAAKloB,EAAEkoB,EACZtyB,KAAKuyB,GAAKnoB,EAAEmoB,EAELvyB,OAIRm1F,UAAW,SAAWp4F,GAOrB,OALAiD,KAAKwwB,GAAKzzB,EACViD,KAAKojB,GAAKrmB,EACViD,KAAKsyB,GAAKv1B,EACViD,KAAKuyB,GAAKx1B,EAEHiD,MAIRw3E,WAAY,SAAWt6E,EAAGsK,GAOzB,OALAxH,KAAKwwB,EAAItzB,EAAEszB,EAAIhpB,EAAEgpB,EACjBxwB,KAAKojB,EAAIlmB,EAAEkmB,EAAI5b,EAAE4b,EACjBpjB,KAAKsyB,EAAIp1B,EAAEo1B,EAAI9qB,EAAE8qB,EACjBtyB,KAAKuyB,EAAIr1B,EAAEq1B,EAAI/qB,EAAE+qB,EAEVvyB,MAIRo1F,gBAAiB,SAAWhrF,EAAGrN,GAO9B,OALAiD,KAAKwwB,GAAKpmB,EAAEomB,EAAIzzB,EAChBiD,KAAKojB,GAAKhZ,EAAEgZ,EAAIrmB,EAChBiD,KAAKsyB,GAAKloB,EAAEkoB,EAAIv1B,EAChBiD,KAAKuyB,GAAKnoB,EAAEmoB,EAAIx1B,EAETiD,MAIRwkE,IAAK,SAAWp6D,EAAGmoB,GAElB,YAAWxjB,IAANwjB,GAEJ9zB,QAAQ4pC,KAAM,yFACProC,KAAK6yE,WAAYzoE,EAAGmoB,KAI5BvyB,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EACZpjB,KAAKsyB,GAAKloB,EAAEkoB,EACZtyB,KAAKuyB,GAAKnoB,EAAEmoB,EAELvyB,OAIRq1F,UAAW,SAAWt4F,GAOrB,OALAiD,KAAKwwB,GAAKzzB,EACViD,KAAKojB,GAAKrmB,EACViD,KAAKsyB,GAAKv1B,EACViD,KAAKuyB,GAAKx1B,EAEHiD,MAIR6yE,WAAY,SAAW31E,EAAGsK,GAOzB,OALAxH,KAAKwwB,EAAItzB,EAAEszB,EAAIhpB,EAAEgpB,EACjBxwB,KAAKojB,EAAIlmB,EAAEkmB,EAAI5b,EAAE4b,EACjBpjB,KAAKsyB,EAAIp1B,EAAEo1B,EAAI9qB,EAAE8qB,EACjBtyB,KAAKuyB,EAAIr1B,EAAEq1B,EAAI/qB,EAAE+qB,EAEVvyB,MAIR86D,eAAgB,SAAWg6B,GAO1B,OALA90F,KAAKwwB,GAAKskE,EACV90F,KAAKojB,GAAK0xE,EACV90F,KAAKsyB,GAAKwiE,EACV90F,KAAKuyB,GAAKuiE,EAEH90F,MAIRu+B,aAAc,SAAWhb,GAExB,IAAIiN,EAAIxwB,KAAKwwB,EAAGpN,EAAIpjB,KAAKojB,EAAGkP,EAAItyB,KAAKsyB,EAAGC,EAAIvyB,KAAKuyB,EAC7C51B,EAAI4mB,EAAEqQ,SAOV,OALA5zB,KAAKwwB,EAAI7zB,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAM21B,EAAI31B,EAAG,IAAO41B,EAC1DvyB,KAAKojB,EAAIzmB,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAM21B,EAAI31B,EAAG,IAAO41B,EAC1DvyB,KAAKsyB,EAAI31B,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,IAAO21B,EAAI31B,EAAG,IAAO41B,EAC3DvyB,KAAKuyB,EAAI51B,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,IAAO21B,EAAI31B,EAAG,IAAO41B,EAEpDvyB,MAIRo0E,aAAc,SAAW0gB,GAExB,OAAO90F,KAAK86D,eAAgB,EAAIg6B,IAIjCmC,2BAA4B,SAAWpgB,GAMtC72E,KAAKuyB,EAAI,EAAI7vB,KAAKw0F,KAAMrgB,EAAEtkD,GAE1B,IAAIx1B,EAAI2F,KAAKg+D,KAAM,EAAImW,EAAEtkD,EAAIskD,EAAEtkD,GAgB/B,OAdKx1B,EAAI,MAEPiD,KAAKwwB,EAAI,EACTxwB,KAAKojB,EAAI,EACTpjB,KAAKsyB,EAAI,IAITtyB,KAAKwwB,EAAIqmD,EAAErmD,EAAIzzB,EACfiD,KAAKojB,EAAIyzD,EAAEzzD,EAAIrmB,EACfiD,KAAKsyB,EAAIukD,EAAEvkD,EAAIv1B,GAIViD,MAIRm3F,+BAAgC,SAAW5zE,GAM1C,IAAIshD,EAAOr0C,EAAGpN,EAAGkP,EAIhB8kE,EAAK7zE,EAAEqQ,SAEPyjE,EAAMD,EAAI,GAAKE,EAAMF,EAAI,GAAKG,EAAMH,EAAI,GACxCI,EAAMJ,EAAI,GAAKK,EAAML,EAAI,GAAKM,EAAMN,EAAI,GACxCO,EAAMP,EAAI,GAAKQ,EAAMR,EAAI,GAAKS,EAAMT,EAAI,IAEzC,GAAO10F,KAAKoI,IAAKwsF,EAAME,GATZ,KAUJ90F,KAAKoI,IAAKysF,EAAMI,GAVZ,KAWJj1F,KAAKoI,IAAK4sF,EAAME,GAXZ,IAWgC,CAM1C,GAAOl1F,KAAKoI,IAAKwsF,EAAME,GAhBZ,IAiBJ90F,KAAKoI,IAAKysF,EAAMI,GAjBZ,IAkBJj1F,KAAKoI,IAAK4sF,EAAME,GAlBZ,IAmBJl1F,KAAKoI,IAAKusF,EAAMI,EAAMI,EAAM,GAnBxB,GAyBV,OAFA73F,KAAK0E,IAAK,EAAG,EAAG,EAAG,GAEZ1E,KAMR6kE,EAAQniE,KAAK8xE,GAEb,IAAIsjB,GAAOT,EAAM,GAAM,EACnBU,GAAON,EAAM,GAAM,EACnBO,GAAOH,EAAM,GAAM,EACnBI,GAAOX,EAAME,GAAQ,EACrBU,GAAOX,EAAMI,GAAQ,EACrBQ,GAAOT,EAAME,GAAQ,EA4DzB,OA1DOE,EAAKC,GAAUD,EAAKE,EAIrBF,EA7CI,KA+CRtnE,EAAI,EACJpN,EAAI,WACJkP,EAAI,aAKJlP,EAAI60E,GADJznE,EAAI9tB,KAAKg+D,KAAMo3B,IAEfxlE,EAAI4lE,EAAK1nE,GAICunE,EAAKC,EAIXD,EA/DI,KAiERvnE,EAAI,WACJpN,EAAI,EACJkP,EAAI,aAKJ9B,EAAIynE,GADJ70E,EAAI1gB,KAAKg+D,KAAMq3B,IAEfzlE,EAAI6lE,EAAK/0E,GAQL40E,EAjFI,KAmFRxnE,EAAI,WACJpN,EAAI,WACJkP,EAAI,IAKJ9B,EAAI0nE,GADJ5lE,EAAI5vB,KAAKg+D,KAAMs3B,IAEf50E,EAAI+0E,EAAK7lE,GAMXtyB,KAAK0E,IAAK8rB,EAAGpN,EAAGkP,EAAGuyC,GAEZ7kE,KAMR,IAAIjD,EAAI2F,KAAKg+D,MAAQk3B,EAAMF,IAAUE,EAAMF,IACtBH,EAAMI,IAAUJ,EAAMI,IACtBH,EAAMF,IAAUE,EAAMF,IAY3C,OAVK50F,KAAKoI,IAAK/N,GAAM,OAAQA,EAAI,GAKjCiD,KAAKwwB,GAAMonE,EAAMF,GAAQ36F,EACzBiD,KAAKojB,GAAMm0E,EAAMI,GAAQ56F,EACzBiD,KAAKsyB,GAAMklE,EAAMF,GAAQv6F,EACzBiD,KAAKuyB,EAAI7vB,KAAKw0F,MAAQG,EAAMI,EAAMI,EAAM,GAAM,GAEvC73F,MAIRoC,IAAK,SAAWgI,GAOf,OALApK,KAAKwwB,EAAI9tB,KAAKN,IAAKpC,KAAKwwB,EAAGpmB,EAAEomB,GAC7BxwB,KAAKojB,EAAI1gB,KAAKN,IAAKpC,KAAKojB,EAAGhZ,EAAEgZ,GAC7BpjB,KAAKsyB,EAAI5vB,KAAKN,IAAKpC,KAAKsyB,EAAGloB,EAAEkoB,GAC7BtyB,KAAKuyB,EAAI7vB,KAAKN,IAAKpC,KAAKuyB,EAAGnoB,EAAEmoB,GAEtBvyB,MAIRqC,IAAK,SAAW+H,GAOf,OALApK,KAAKwwB,EAAI9tB,KAAKL,IAAKrC,KAAKwwB,EAAGpmB,EAAEomB,GAC7BxwB,KAAKojB,EAAI1gB,KAAKL,IAAKrC,KAAKojB,EAAGhZ,EAAEgZ,GAC7BpjB,KAAKsyB,EAAI5vB,KAAKL,IAAKrC,KAAKsyB,EAAGloB,EAAEkoB,GAC7BtyB,KAAKuyB,EAAI7vB,KAAKL,IAAKrC,KAAKuyB,EAAGnoB,EAAEmoB,GAEtBvyB,MAIRk6E,MAAO,SAAW93E,EAAKC,GAStB,OALArC,KAAKwwB,EAAI9tB,KAAKL,IAAKD,EAAIouB,EAAG9tB,KAAKN,IAAKC,EAAImuB,EAAGxwB,KAAKwwB,IAChDxwB,KAAKojB,EAAI1gB,KAAKL,IAAKD,EAAIghB,EAAG1gB,KAAKN,IAAKC,EAAI+gB,EAAGpjB,KAAKojB,IAChDpjB,KAAKsyB,EAAI5vB,KAAKL,IAAKD,EAAIkwB,EAAG5vB,KAAKN,IAAKC,EAAIiwB,EAAGtyB,KAAKsyB,IAChDtyB,KAAKuyB,EAAI7vB,KAAKL,IAAKD,EAAImwB,EAAG7vB,KAAKN,IAAKC,EAAIkwB,EAAGvyB,KAAKuyB,IAEzCvyB,MAIRu1F,YAAa,WAEZ,IAAInzF,EAAKC,EAET,OAAO,SAAsBmzF,EAAQC,GAYpC,YAVa1mF,IAAR3M,IAEJA,EAAM,IAAIiwB,EACVhwB,EAAM,IAAIgwB,GAIXjwB,EAAIsC,IAAK8wF,EAAQA,EAAQA,EAAQA,GACjCnzF,EAAIqC,IAAK+wF,EAAQA,EAAQA,EAAQA,GAE1Bz1F,KAAKk6E,MAAO93E,EAAKC,IAhBb,GAsBbqzF,YAAa,SAAWtzF,EAAKC,GAE5B,IAAI1E,EAASqC,KAAKrC,SAElB,OAAOqC,KAAKo0E,aAAcz2E,GAAU,GAAIm9D,eAAgBp4D,KAAKL,IAAKD,EAAKM,KAAKN,IAAKC,EAAK1E,MAIvFoF,MAAO,WAON,OALA/C,KAAKwwB,EAAI9tB,KAAKK,MAAO/C,KAAKwwB,GAC1BxwB,KAAKojB,EAAI1gB,KAAKK,MAAO/C,KAAKojB,GAC1BpjB,KAAKsyB,EAAI5vB,KAAKK,MAAO/C,KAAKsyB,GAC1BtyB,KAAKuyB,EAAI7vB,KAAKK,MAAO/C,KAAKuyB,GAEnBvyB,MAIR4jB,KAAM,WAOL,OALA5jB,KAAKwwB,EAAI9tB,KAAKkhB,KAAM5jB,KAAKwwB,GACzBxwB,KAAKojB,EAAI1gB,KAAKkhB,KAAM5jB,KAAKojB,GACzBpjB,KAAKsyB,EAAI5vB,KAAKkhB,KAAM5jB,KAAKsyB,GACzBtyB,KAAKuyB,EAAI7vB,KAAKkhB,KAAM5jB,KAAKuyB,GAElBvyB,MAIRyjB,MAAO,WAON,OALAzjB,KAAKwwB,EAAI9tB,KAAK+gB,MAAOzjB,KAAKwwB,GAC1BxwB,KAAKojB,EAAI1gB,KAAK+gB,MAAOzjB,KAAKojB,GAC1BpjB,KAAKsyB,EAAI5vB,KAAK+gB,MAAOzjB,KAAKsyB,GAC1BtyB,KAAKuyB,EAAI7vB,KAAK+gB,MAAOzjB,KAAKuyB,GAEnBvyB,MAIR21F,YAAa,WAOZ,OALA31F,KAAKwwB,EAAMxwB,KAAKwwB,EAAI,EAAM9tB,KAAKkhB,KAAM5jB,KAAKwwB,GAAM9tB,KAAKK,MAAO/C,KAAKwwB,GACjExwB,KAAKojB,EAAMpjB,KAAKojB,EAAI,EAAM1gB,KAAKkhB,KAAM5jB,KAAKojB,GAAM1gB,KAAKK,MAAO/C,KAAKojB,GACjEpjB,KAAKsyB,EAAMtyB,KAAKsyB,EAAI,EAAM5vB,KAAKkhB,KAAM5jB,KAAKsyB,GAAM5vB,KAAKK,MAAO/C,KAAKsyB,GACjEtyB,KAAKuyB,EAAMvyB,KAAKuyB,EAAI,EAAM7vB,KAAKkhB,KAAM5jB,KAAKuyB,GAAM7vB,KAAKK,MAAO/C,KAAKuyB,GAE1DvyB,MAIR41F,OAAQ,WAOP,OALA51F,KAAKwwB,GAAMxwB,KAAKwwB,EAChBxwB,KAAKojB,GAAMpjB,KAAKojB,EAChBpjB,KAAKsyB,GAAMtyB,KAAKsyB,EAChBtyB,KAAKuyB,GAAMvyB,KAAKuyB,EAETvyB,MAIR+7E,IAAK,SAAW3xE,GAEf,OAAOpK,KAAKwwB,EAAIpmB,EAAEomB,EAAIxwB,KAAKojB,EAAIhZ,EAAEgZ,EAAIpjB,KAAKsyB,EAAIloB,EAAEkoB,EAAItyB,KAAKuyB,EAAInoB,EAAEmoB,GAIhEsjE,SAAU,WAET,OAAO71F,KAAKwwB,EAAIxwB,KAAKwwB,EAAIxwB,KAAKojB,EAAIpjB,KAAKojB,EAAIpjB,KAAKsyB,EAAItyB,KAAKsyB,EAAItyB,KAAKuyB,EAAIvyB,KAAKuyB,GAI5E50B,OAAQ,WAEP,OAAO+E,KAAKg+D,KAAM1gE,KAAKwwB,EAAIxwB,KAAKwwB,EAAIxwB,KAAKojB,EAAIpjB,KAAKojB,EAAIpjB,KAAKsyB,EAAItyB,KAAKsyB,EAAItyB,KAAKuyB,EAAIvyB,KAAKuyB,IAIvFujE,gBAAiB,WAEhB,OAAOpzF,KAAKoI,IAAK9K,KAAKwwB,GAAM9tB,KAAKoI,IAAK9K,KAAKojB,GAAM1gB,KAAKoI,IAAK9K,KAAKsyB,GAAM5vB,KAAKoI,IAAK9K,KAAKuyB,IAItF8yC,UAAW,WAEV,OAAOrlE,KAAKo0E,aAAcp0E,KAAKrC,UAAY,IAI5CqzF,UAAW,SAAWrzF,GAErB,OAAOqC,KAAKqlE,YAAYvK,eAAgBn9D,IAIzC01E,KAAM,SAAWjpE,EAAGutC,GAOnB,OALA33C,KAAKwwB,IAAOpmB,EAAEomB,EAAIxwB,KAAKwwB,GAAMmnB,EAC7B33C,KAAKojB,IAAOhZ,EAAEgZ,EAAIpjB,KAAKojB,GAAMu0B,EAC7B33C,KAAKsyB,IAAOloB,EAAEkoB,EAAItyB,KAAKsyB,GAAMqlB,EAC7B33C,KAAKuyB,IAAOnoB,EAAEmoB,EAAIvyB,KAAKuyB,GAAMolB,EAEtB33C,MAIRo2F,YAAa,SAAW9T,EAAIc,EAAIzrC,GAE/B,OAAO33C,KAAK6yE,WAAYuQ,EAAId,GAAKxnB,eAAgBnjB,GAAQltB,IAAK63D,IAI/DnyB,OAAQ,SAAW/lD,GAElB,OAAWA,EAAEomB,IAAMxwB,KAAKwwB,GAASpmB,EAAEgZ,IAAMpjB,KAAKojB,GAAShZ,EAAEkoB,IAAMtyB,KAAKsyB,GAASloB,EAAEmoB,IAAMvyB,KAAKuyB,GAI3FqlC,UAAW,SAAWn3C,EAAOoR,GAS5B,YAPgB9iB,IAAX8iB,IAAuBA,EAAS,GAErC7xB,KAAKwwB,EAAI/P,EAAOoR,GAChB7xB,KAAKojB,EAAI3C,EAAOoR,EAAS,GACzB7xB,KAAKsyB,EAAI7R,EAAOoR,EAAS,GACzB7xB,KAAKuyB,EAAI9R,EAAOoR,EAAS,GAElB7xB,MAIRgsB,QAAS,SAAWvL,EAAOoR,GAU1B,YARe9iB,IAAV0R,IAAsBA,WACX1R,IAAX8iB,IAAuBA,EAAS,GAErCpR,EAAOoR,GAAW7xB,KAAKwwB,EACvB/P,EAAOoR,EAAS,GAAM7xB,KAAKojB,EAC3B3C,EAAOoR,EAAS,GAAM7xB,KAAKsyB,EAC3B7R,EAAOoR,EAAS,GAAM7xB,KAAKuyB,EAEpB9R,GAIR2xD,oBAAqB,SAAWlkC,EAAWzlC,EAAOopB,GAajD,YAXgB9iB,IAAX8iB,GAEJpzB,QAAQ4pC,KAAM,uEAIfroC,KAAKwwB,EAAI0d,EAAUikC,KAAM1pE,GACzBzI,KAAKojB,EAAI8qB,EAAUmoD,KAAM5tF,GACzBzI,KAAKsyB,EAAI4b,EAAUkqD,KAAM3vF,GACzBzI,KAAKuyB,EAAI2b,EAAUmqD,KAAM5vF,GAElBzI,QAyCT9B,OAAO20F,OAAQrgE,EAAkBr0B,UAAWmyB,EAAgBnyB,WAE3D4lD,qBAAqB,EAErB2nB,QAAS,SAAWj5C,EAAOC,GAErB1yB,KAAKyyB,QAAUA,GAASzyB,KAAK0yB,SAAWA,IAE5C1yB,KAAKyyB,MAAQA,EACbzyB,KAAK0yB,OAASA,EAEd1yB,KAAKs5C,WAINt5C,KAAK6yB,SAASnuB,IAAK,EAAG,EAAG+tB,EAAOC,GAChC1yB,KAAK2yB,QAAQjuB,IAAK,EAAG,EAAG+tB,EAAOC,IAIhC9iB,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWugB,GAahB,OAXAhlB,KAAKyyB,MAAQzN,EAAOyN,MACpBzyB,KAAK0yB,OAAS1N,EAAO0N,OAErB1yB,KAAK6yB,SAASpuB,KAAMugB,EAAO6N,UAE3B7yB,KAAK8yB,QAAU9N,EAAO8N,QAAQljB,QAE9B5P,KAAK+yB,YAAc/N,EAAO+N,YAC1B/yB,KAAKgzB,cAAgBhO,EAAOgO,cAC5BhzB,KAAKizB,aAAejO,EAAOiO,aAEpBjzB,MAIRs5C,QAAS,WAERt5C,KAAKkzF,eAAiBhuF,KAAM,eAmB9BguB,EAAsB/0B,UAAYD,OAAOwZ,OAAQ8a,EAAkBr0B,WACnE+0B,EAAsB/0B,UAAUsJ,YAAcyrB,EAE9CA,EAAsB/0B,UAAU+pD,yBAA0B,EAkB1DhqD,OAAO20F,OAAQx/D,GAEdilE,MAAO,SAAWC,EAAIC,EAAIC,EAAI77F,GAE7B,OAAO67F,EAAGh0F,KAAM8zF,GAAKD,MAAOE,EAAI57F,IAIjC87F,UAAW,SAAWC,EAAKv/B,EAAWw/B,EAAMC,EAAYC,EAAMC,EAAYn8F,GAIzE,IAAI+2E,EAAKilB,EAAMC,EAAa,GAC3BG,EAAKJ,EAAMC,EAAa,GACxBI,EAAKL,EAAMC,EAAa,GACxBK,EAAKN,EAAMC,EAAa,GAExBjlB,EAAKklB,EAAMC,EAAa,GACxBI,EAAKL,EAAMC,EAAa,GACxBK,EAAKN,EAAMC,EAAa,GACxBM,EAAKP,EAAMC,EAAa,GAEzB,GAAKG,IAAOG,GAAM1lB,IAAOC,GAAMolB,IAAOG,GAAMF,IAAOG,EAAK,CAEvD,IAAIr8F,EAAI,EAAIH,EAEXgoE,EAAM+O,EAAKC,EAAKolB,EAAKG,EAAKF,EAAKG,EAAKF,EAAKG,EAEzCtyE,EAAQ69C,GAAO,EAAI,GAAM,EACzB00B,EAAS,EAAI10B,EAAMA,EAGpB,GAAK00B,EAASz/E,OAAO64E,QAAU,CAE9B,IAAInc,EAAM7zE,KAAKg+D,KAAM44B,GACpB71F,EAAMf,KAAK+xE,MAAO8B,EAAK3R,EAAM79C,GAE9BhqB,EAAI2F,KAAK6zE,IAAKx5E,EAAI0G,GAAQ8yE,EAC1B35E,EAAI8F,KAAK6zE,IAAK35E,EAAI6G,GAAQ8yE,EAI3B,IAAIgjB,EAAO38F,EAAImqB,EAQf,GANA4sD,EAAKA,EAAK52E,EAAI62E,EAAK2lB,EACnBP,EAAKA,EAAKj8F,EAAIo8F,EAAKI,EACnBN,EAAKA,EAAKl8F,EAAIq8F,EAAKG,EACnBL,EAAKA,EAAKn8F,EAAIs8F,EAAKE,EAGdx8F,IAAM,EAAIH,EAAI,CAElB,IAAIS,EAAI,EAAIqF,KAAKg+D,KAAMiT,EAAKA,EAAKqlB,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,GAE1DvlB,GAAMt2E,EACN27F,GAAM37F,EACN47F,GAAM57F,EACN67F,GAAM77F,GAMRs7F,EAAKv/B,GAAcua,EACnBglB,EAAKv/B,EAAY,GAAM4/B,EACvBL,EAAKv/B,EAAY,GAAM6/B,EACvBN,EAAKv/B,EAAY,GAAM8/B,KAMzBh7F,OAAOmB,iBAAkBg0B,EAAWl1B,WAEnCqyB,GAEC/vB,IAAK,WAEJ,OAAOT,KAAKszB,IAIb5uB,IAAK,SAAWvF,GAEfa,KAAKszB,GAAKn0B,EACVa,KAAKw5F,qBAMPp2E,GAEC3iB,IAAK,WAEJ,OAAOT,KAAKuzB,IAIb7uB,IAAK,SAAWvF,GAEfa,KAAKuzB,GAAKp0B,EACVa,KAAKw5F,qBAMPlnE,GAEC7xB,IAAK,WAEJ,OAAOT,KAAKwzB,IAIb9uB,IAAK,SAAWvF,GAEfa,KAAKwzB,GAAKr0B,EACVa,KAAKw5F,qBAMPjnE,GAEC9xB,IAAK,WAEJ,OAAOT,KAAKyzB,IAIb/uB,IAAK,SAAWvF,GAEfa,KAAKyzB,GAAKt0B,EACVa,KAAKw5F,uBAQRt7F,OAAO20F,OAAQx/D,EAAWl1B,WAEzBuG,IAAK,SAAW8rB,EAAGpN,EAAGkP,EAAGC,GASxB,OAPAvyB,KAAKszB,GAAK9C,EACVxwB,KAAKuzB,GAAKnQ,EACVpjB,KAAKwzB,GAAKlB,EACVtyB,KAAKyzB,GAAKlB,EAEVvyB,KAAKw5F,mBAEEx5F,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKszB,GAAItzB,KAAKuzB,GAAIvzB,KAAKwzB,GAAIxzB,KAAKyzB,KAI9DhvB,KAAM,SAAW0rC,GAShB,OAPAnwC,KAAKszB,GAAK6c,EAAW3f,EACrBxwB,KAAKuzB,GAAK4c,EAAW/sB,EACrBpjB,KAAKwzB,GAAK2c,EAAW7d,EACrBtyB,KAAKyzB,GAAK0c,EAAW5d,EAErBvyB,KAAKw5F,mBAEEx5F,MAIRqwC,aAAc,SAAWopD,EAAOzvD,GAE/B,IAASyvD,IAASA,EAAMC,QAEvB,MAAM,IAAIp8F,MAAO,oGAIlB,IAAIkzB,EAAIipE,EAAMnmE,GAAIlQ,EAAIq2E,EAAMlmE,GAAIjB,EAAImnE,EAAMjmE,GAAIkc,EAAQ+pD,EAAM/pD,MAMxDk1B,EAAMliE,KAAKkiE,IACX2R,EAAM7zE,KAAK6zE,IAEX+a,EAAK1sB,EAAKp0C,EAAI,GACd+gE,EAAK3sB,EAAKxhD,EAAI,GACdouE,EAAK5sB,EAAKtyC,EAAI,GAEdqnE,EAAKpjB,EAAK/lD,EAAI,GACdopE,EAAKrjB,EAAKnzD,EAAI,GACdy2E,EAAKtjB,EAAKjkD,EAAI,GAgDlB,MA9Ce,QAAVod,GAEJ1vC,KAAKszB,GAAKqmE,EAAKpI,EAAKC,EAAKF,EAAKsI,EAAKC,EACnC75F,KAAKuzB,GAAK+9D,EAAKsI,EAAKpI,EAAKmI,EAAKpI,EAAKsI,EACnC75F,KAAKwzB,GAAK89D,EAAKC,EAAKsI,EAAKF,EAAKC,EAAKpI,EACnCxxF,KAAKyzB,GAAK69D,EAAKC,EAAKC,EAAKmI,EAAKC,EAAKC,GAEd,QAAVnqD,GAEX1vC,KAAKszB,GAAKqmE,EAAKpI,EAAKC,EAAKF,EAAKsI,EAAKC,EACnC75F,KAAKuzB,GAAK+9D,EAAKsI,EAAKpI,EAAKmI,EAAKpI,EAAKsI,EACnC75F,KAAKwzB,GAAK89D,EAAKC,EAAKsI,EAAKF,EAAKC,EAAKpI,EACnCxxF,KAAKyzB,GAAK69D,EAAKC,EAAKC,EAAKmI,EAAKC,EAAKC,GAEd,QAAVnqD,GAEX1vC,KAAKszB,GAAKqmE,EAAKpI,EAAKC,EAAKF,EAAKsI,EAAKC,EACnC75F,KAAKuzB,GAAK+9D,EAAKsI,EAAKpI,EAAKmI,EAAKpI,EAAKsI,EACnC75F,KAAKwzB,GAAK89D,EAAKC,EAAKsI,EAAKF,EAAKC,EAAKpI,EACnCxxF,KAAKyzB,GAAK69D,EAAKC,EAAKC,EAAKmI,EAAKC,EAAKC,GAEd,QAAVnqD,GAEX1vC,KAAKszB,GAAKqmE,EAAKpI,EAAKC,EAAKF,EAAKsI,EAAKC,EACnC75F,KAAKuzB,GAAK+9D,EAAKsI,EAAKpI,EAAKmI,EAAKpI,EAAKsI,EACnC75F,KAAKwzB,GAAK89D,EAAKC,EAAKsI,EAAKF,EAAKC,EAAKpI,EACnCxxF,KAAKyzB,GAAK69D,EAAKC,EAAKC,EAAKmI,EAAKC,EAAKC,GAEd,QAAVnqD,GAEX1vC,KAAKszB,GAAKqmE,EAAKpI,EAAKC,EAAKF,EAAKsI,EAAKC,EACnC75F,KAAKuzB,GAAK+9D,EAAKsI,EAAKpI,EAAKmI,EAAKpI,EAAKsI,EACnC75F,KAAKwzB,GAAK89D,EAAKC,EAAKsI,EAAKF,EAAKC,EAAKpI,EACnCxxF,KAAKyzB,GAAK69D,EAAKC,EAAKC,EAAKmI,EAAKC,EAAKC,GAEd,QAAVnqD,IAEX1vC,KAAKszB,GAAKqmE,EAAKpI,EAAKC,EAAKF,EAAKsI,EAAKC,EACnC75F,KAAKuzB,GAAK+9D,EAAKsI,EAAKpI,EAAKmI,EAAKpI,EAAKsI,EACnC75F,KAAKwzB,GAAK89D,EAAKC,EAAKsI,EAAKF,EAAKC,EAAKpI,EACnCxxF,KAAKyzB,GAAK69D,EAAKC,EAAKC,EAAKmI,EAAKC,EAAKC,IAIpB,IAAX7vD,GAAmBhqC,KAAKw5F,mBAEtBx5F,MAIR85F,iBAAkB,SAAWC,EAAMl1B,GAMlC,IAAIm1B,EAAYn1B,EAAQ,EAAG9nE,EAAI2F,KAAK6zE,IAAKyjB,GASzC,OAPAh6F,KAAKszB,GAAKymE,EAAKvpE,EAAIzzB,EACnBiD,KAAKuzB,GAAKwmE,EAAK32E,EAAIrmB,EACnBiD,KAAKwzB,GAAKumE,EAAKznE,EAAIv1B,EACnBiD,KAAKyzB,GAAK/wB,KAAKkiE,IAAKo1B,GAEpBh6F,KAAKw5F,mBAEEx5F,MAIRi6F,sBAAuB,SAAW12E,GAMjC,IAOCxmB,EAPGq6F,EAAK7zE,EAAEqQ,SAEVyjE,EAAMD,EAAI,GAAKE,EAAMF,EAAI,GAAKG,EAAMH,EAAI,GACxCI,EAAMJ,EAAI,GAAKK,EAAML,EAAI,GAAKM,EAAMN,EAAI,GACxCO,EAAMP,EAAI,GAAKQ,EAAMR,EAAI,GAAKS,EAAMT,EAAI,IAExC8C,EAAQ7C,EAAMI,EAAMI,EA2CrB,OAxCKqC,EAAQ,GAEZn9F,EAAI,GAAM2F,KAAKg+D,KAAMw5B,EAAQ,GAE7Bl6F,KAAKyzB,GAAK,IAAO12B,EACjBiD,KAAKszB,IAAOskE,EAAMF,GAAQ36F,EAC1BiD,KAAKuzB,IAAOgkE,EAAMI,GAAQ56F,EAC1BiD,KAAKwzB,IAAOgkE,EAAMF,GAAQv6F,GAEfs6F,EAAMI,GAAOJ,EAAMQ,GAE9B96F,EAAI,EAAM2F,KAAKg+D,KAAM,EAAM22B,EAAMI,EAAMI,GAEvC73F,KAAKyzB,IAAOmkE,EAAMF,GAAQ36F,EAC1BiD,KAAKszB,GAAK,IAAOv2B,EACjBiD,KAAKuzB,IAAO+jE,EAAME,GAAQz6F,EAC1BiD,KAAKwzB,IAAO+jE,EAAMI,GAAQ56F,GAEf06F,EAAMI,GAEjB96F,EAAI,EAAM2F,KAAKg+D,KAAM,EAAM+2B,EAAMJ,EAAMQ,GAEvC73F,KAAKyzB,IAAO8jE,EAAMI,GAAQ56F,EAC1BiD,KAAKszB,IAAOgkE,EAAME,GAAQz6F,EAC1BiD,KAAKuzB,GAAK,IAAOx2B,EACjBiD,KAAKwzB,IAAOkkE,EAAME,GAAQ76F,IAI1BA,EAAI,EAAM2F,KAAKg+D,KAAM,EAAMm3B,EAAMR,EAAMI,GAEvCz3F,KAAKyzB,IAAO+jE,EAAMF,GAAQv6F,EAC1BiD,KAAKszB,IAAOikE,EAAMI,GAAQ56F,EAC1BiD,KAAKuzB,IAAOmkE,EAAME,GAAQ76F,EAC1BiD,KAAKwzB,GAAK,IAAOz2B,GAIlBiD,KAAKw5F,mBAEEx5F,MAIRm6F,mBAAoB,WAInB,IACIr9F,EADAwlF,EAAK,IAAI5uD,EAKb,OAAO,SAA6B0mE,EAAOC,GA+B1C,YA7BYtrF,IAAPuzE,IAAmBA,EAAK,IAAI5uD,IAEjC52B,EAAIs9F,EAAMre,IAAKse,GAAQ,GANd,MAURv9F,EAAI,EAEC4F,KAAKoI,IAAKsvF,EAAM5pE,GAAM9tB,KAAKoI,IAAKsvF,EAAM9nE,GAE1CgwD,EAAG59E,KAAO01F,EAAMh3E,EAAGg3E,EAAM5pE,EAAG,GAI5B8xD,EAAG59E,IAAK,GAAK01F,EAAM9nE,EAAG8nE,EAAMh3E,IAM7Bk/D,EAAGxP,aAAcsnB,EAAOC,GAIzBr6F,KAAKszB,GAAKgvD,EAAG9xD,EACbxwB,KAAKuzB,GAAK+uD,EAAGl/D,EACbpjB,KAAKwzB,GAAK8uD,EAAGhwD,EACbtyB,KAAKyzB,GAAK32B,EAEHkD,KAAKqlE,aAxCM,GA8CpBi1B,QAAS,WAER,OAAOt6F,KAAKu6F,YAAYl1B,aAIzBk1B,UAAW,WAQV,OANAv6F,KAAKszB,KAAQ,EACbtzB,KAAKuzB,KAAQ,EACbvzB,KAAKwzB,KAAQ,EAEbxzB,KAAKw5F,mBAEEx5F,MAIR+7E,IAAK,SAAW3xE,GAEf,OAAOpK,KAAKszB,GAAKlpB,EAAEkpB,GAAKtzB,KAAKuzB,GAAKnpB,EAAEmpB,GAAKvzB,KAAKwzB,GAAKppB,EAAEopB,GAAKxzB,KAAKyzB,GAAKrpB,EAAEqpB,IAIvEoiE,SAAU,WAET,OAAO71F,KAAKszB,GAAKtzB,KAAKszB,GAAKtzB,KAAKuzB,GAAKvzB,KAAKuzB,GAAKvzB,KAAKwzB,GAAKxzB,KAAKwzB,GAAKxzB,KAAKyzB,GAAKzzB,KAAKyzB,IAInF91B,OAAQ,WAEP,OAAO+E,KAAKg+D,KAAM1gE,KAAKszB,GAAKtzB,KAAKszB,GAAKtzB,KAAKuzB,GAAKvzB,KAAKuzB,GAAKvzB,KAAKwzB,GAAKxzB,KAAKwzB,GAAKxzB,KAAKyzB,GAAKzzB,KAAKyzB,KAI9F4xC,UAAW,WAEV,IAAI7nE,EAAIwC,KAAKrC,SAsBb,OApBW,IAANH,GAEJwC,KAAKszB,GAAK,EACVtzB,KAAKuzB,GAAK,EACVvzB,KAAKwzB,GAAK,EACVxzB,KAAKyzB,GAAK,IAIVj2B,EAAI,EAAIA,EAERwC,KAAKszB,GAAKtzB,KAAKszB,GAAK91B,EACpBwC,KAAKuzB,GAAKvzB,KAAKuzB,GAAK/1B,EACpBwC,KAAKwzB,GAAKxzB,KAAKwzB,GAAKh2B,EACpBwC,KAAKyzB,GAAKzzB,KAAKyzB,GAAKj2B,GAIrBwC,KAAKw5F,mBAEEx5F,MAIRqtC,SAAU,SAAWwpC,EAAG3yE,GAEvB,YAAW6K,IAAN7K,GAEJzF,QAAQ4pC,KAAM,0GACProC,KAAKw6F,oBAAqB3jB,EAAG3yE,IAI9BlE,KAAKw6F,oBAAqBx6F,KAAM62E,IAIxC1R,YAAa,SAAW0R,GAEvB,OAAO72E,KAAKw6F,oBAAqB3jB,EAAG72E,OAIrCw6F,oBAAqB,SAAWt9F,EAAGsK,GAIlC,IAAIizF,EAAMv9F,EAAEo2B,GAAIonE,EAAMx9F,EAAEq2B,GAAIonE,EAAMz9F,EAAEs2B,GAAIonE,EAAM19F,EAAEu2B,GAC5ConE,EAAMrzF,EAAE8rB,GAAIwnE,EAAMtzF,EAAE+rB,GAAIwnE,EAAMvzF,EAAEgsB,GAAIwnE,EAAMxzF,EAAEisB,GAShD,OAPAzzB,KAAKszB,GAAKmnE,EAAMO,EAAMJ,EAAMC,EAAMH,EAAMK,EAAMJ,EAAMG,EACpD96F,KAAKuzB,GAAKmnE,EAAMM,EAAMJ,EAAME,EAAMH,EAAME,EAAMJ,EAAMM,EACpD/6F,KAAKwzB,GAAKmnE,EAAMK,EAAMJ,EAAMG,EAAMN,EAAMK,EAAMJ,EAAMG,EACpD76F,KAAKyzB,GAAKmnE,EAAMI,EAAMP,EAAMI,EAAMH,EAAMI,EAAMH,EAAMI,EAEpD/6F,KAAKw5F,mBAEEx5F,MAIRs4F,MAAO,SAAWE,EAAI57F,GAErB,GAAW,IAANA,EAAU,OAAOoD,KACtB,GAAW,IAANpD,EAAU,OAAOoD,KAAKyE,KAAM+zF,GAEjC,IAAIhoE,EAAIxwB,KAAKszB,GAAIlQ,EAAIpjB,KAAKuzB,GAAIjB,EAAItyB,KAAKwzB,GAAIjB,EAAIvyB,KAAKyzB,GAIhDwnE,EAAe1oE,EAAIimE,EAAG/kE,GAAKjD,EAAIgoE,EAAGllE,GAAKlQ,EAAIo1E,EAAGjlE,GAAKjB,EAAIkmE,EAAGhlE,GAiB9D,GAfKynE,EAAe,GAEnBj7F,KAAKyzB,IAAO+kE,EAAG/kE,GACfzzB,KAAKszB,IAAOklE,EAAGllE,GACftzB,KAAKuzB,IAAOilE,EAAGjlE,GACfvzB,KAAKwzB,IAAOglE,EAAGhlE,GAEfynE,GAAiBA,GAIjBj7F,KAAKyE,KAAM+zF,GAIPyC,GAAgB,EAOpB,OALAj7F,KAAKyzB,GAAKlB,EACVvyB,KAAKszB,GAAK9C,EACVxwB,KAAKuzB,GAAKnQ,EACVpjB,KAAKwzB,GAAKlB,EAEHtyB,KAIR,IAAIk7F,EAAex4F,KAAKg+D,KAAM,EAAMu6B,EAAeA,GAEnD,GAAKv4F,KAAKoI,IAAKowF,GAAiB,KAO/B,OALAl7F,KAAKyzB,GAAK,IAAQlB,EAAIvyB,KAAKyzB,IAC3BzzB,KAAKszB,GAAK,IAAQ9C,EAAIxwB,KAAKszB,IAC3BtzB,KAAKuzB,GAAK,IAAQnQ,EAAIpjB,KAAKuzB,IAC3BvzB,KAAKwzB,GAAK,IAAQlB,EAAItyB,KAAKwzB,IAEpBxzB,KAIR,IAAIm7F,EAAYz4F,KAAK+xE,MAAOymB,EAAcD,GACtCG,EAAS14F,KAAK6zE,KAAO,EAAI35E,GAAMu+F,GAAcD,EAChDG,EAAS34F,KAAK6zE,IAAK35E,EAAIu+F,GAAcD,EAStC,OAPAl7F,KAAKyzB,GAAOlB,EAAI6oE,EAASp7F,KAAKyzB,GAAK4nE,EACnCr7F,KAAKszB,GAAO9C,EAAI4qE,EAASp7F,KAAKszB,GAAK+nE,EACnCr7F,KAAKuzB,GAAOnQ,EAAIg4E,EAASp7F,KAAKuzB,GAAK8nE,EACnCr7F,KAAKwzB,GAAOlB,EAAI8oE,EAASp7F,KAAKwzB,GAAK6nE,EAEnCr7F,KAAKw5F,mBAEEx5F,MAIRmwD,OAAQ,SAAWhgB,GAElB,OAASA,EAAW7c,KAAOtzB,KAAKszB,IAAU6c,EAAW5c,KAAOvzB,KAAKuzB,IAAU4c,EAAW3c,KAAOxzB,KAAKwzB,IAAU2c,EAAW1c,KAAOzzB,KAAKyzB,IAIpImkC,UAAW,SAAWn3C,EAAOoR,GAW5B,YATgB9iB,IAAX8iB,IAAuBA,EAAS,GAErC7xB,KAAKszB,GAAK7S,EAAOoR,GACjB7xB,KAAKuzB,GAAK9S,EAAOoR,EAAS,GAC1B7xB,KAAKwzB,GAAK/S,EAAOoR,EAAS,GAC1B7xB,KAAKyzB,GAAKhT,EAAOoR,EAAS,GAE1B7xB,KAAKw5F,mBAEEx5F,MAIRgsB,QAAS,SAAWvL,EAAOoR,GAU1B,YARe9iB,IAAV0R,IAAsBA,WACX1R,IAAX8iB,IAAuBA,EAAS,GAErCpR,EAAOoR,GAAW7xB,KAAKszB,GACvB7S,EAAOoR,EAAS,GAAM7xB,KAAKuzB,GAC3B9S,EAAOoR,EAAS,GAAM7xB,KAAKwzB,GAC3B/S,EAAOoR,EAAS,GAAM7xB,KAAKyzB,GAEpBhT,GAIR2vB,SAAU,SAAWtvC,GAIpB,OAFAd,KAAKw5F,iBAAmB14F,EAEjBd,MAIRw5F,iBAAkB,eAqBnBt7F,OAAO20F,OAAQn/D,EAAQv1B,WAEtBszC,WAAW,EAEX/sC,IAAK,SAAW8rB,EAAGpN,EAAGkP,GAMrB,OAJAtyB,KAAKwwB,EAAIA,EACTxwB,KAAKojB,EAAIA,EACTpjB,KAAKsyB,EAAIA,EAEFtyB,MAIR60F,UAAW,SAAWC,GAMrB,OAJA90F,KAAKwwB,EAAIskE,EACT90F,KAAKojB,EAAI0xE,EACT90F,KAAKsyB,EAAIwiE,EAEF90F,MAIR+0F,KAAM,SAAWvkE,GAIhB,OAFAxwB,KAAKwwB,EAAIA,EAEFxwB,MAIRg1F,KAAM,SAAW5xE,GAIhB,OAFApjB,KAAKojB,EAAIA,EAEFpjB,MAIR+2F,KAAM,SAAWzkE,GAIhB,OAFAtyB,KAAKsyB,EAAIA,EAEFtyB,MAIRi1F,aAAc,SAAWxsF,EAAOtJ,GAE/B,OAASsJ,GAER,KAAK,EAAGzI,KAAKwwB,EAAIrxB,EAAO,MACxB,KAAK,EAAGa,KAAKojB,EAAIjkB,EAAO,MACxB,KAAK,EAAGa,KAAKsyB,EAAInzB,EAAO,MACxB,QAAS,MAAM,IAAI7B,MAAO,0BAA4BmL,GAIvD,OAAOzI,MAIRk1F,aAAc,SAAWzsF,GAExB,OAASA,GAER,KAAK,EAAG,OAAOzI,KAAKwwB,EACpB,KAAK,EAAG,OAAOxwB,KAAKojB,EACpB,KAAK,EAAG,OAAOpjB,KAAKsyB,EACpB,QAAS,MAAM,IAAIh1B,MAAO,0BAA4BmL,KAMxDmH,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKwwB,EAAGxwB,KAAKojB,EAAGpjB,KAAKsyB,IAInD7tB,KAAM,SAAW2F,GAMhB,OAJApK,KAAKwwB,EAAIpmB,EAAEomB,EACXxwB,KAAKojB,EAAIhZ,EAAEgZ,EACXpjB,KAAKsyB,EAAIloB,EAAEkoB,EAEJtyB,MAIRyqB,IAAK,SAAWrgB,EAAGmoB,GAElB,YAAWxjB,IAANwjB,GAEJ9zB,QAAQ4pC,KAAM,yFACProC,KAAKw3E,WAAYptE,EAAGmoB,KAI5BvyB,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EACZpjB,KAAKsyB,GAAKloB,EAAEkoB,EAELtyB,OAIRm1F,UAAW,SAAWp4F,GAMrB,OAJAiD,KAAKwwB,GAAKzzB,EACViD,KAAKojB,GAAKrmB,EACViD,KAAKsyB,GAAKv1B,EAEHiD,MAIRw3E,WAAY,SAAWt6E,EAAGsK,GAMzB,OAJAxH,KAAKwwB,EAAItzB,EAAEszB,EAAIhpB,EAAEgpB,EACjBxwB,KAAKojB,EAAIlmB,EAAEkmB,EAAI5b,EAAE4b,EACjBpjB,KAAKsyB,EAAIp1B,EAAEo1B,EAAI9qB,EAAE8qB,EAEVtyB,MAIRo1F,gBAAiB,SAAWhrF,EAAGrN,GAM9B,OAJAiD,KAAKwwB,GAAKpmB,EAAEomB,EAAIzzB,EAChBiD,KAAKojB,GAAKhZ,EAAEgZ,EAAIrmB,EAChBiD,KAAKsyB,GAAKloB,EAAEkoB,EAAIv1B,EAETiD,MAIRwkE,IAAK,SAAWp6D,EAAGmoB,GAElB,YAAWxjB,IAANwjB,GAEJ9zB,QAAQ4pC,KAAM,yFACProC,KAAK6yE,WAAYzoE,EAAGmoB,KAI5BvyB,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EACZpjB,KAAKsyB,GAAKloB,EAAEkoB,EAELtyB,OAIRq1F,UAAW,SAAWt4F,GAMrB,OAJAiD,KAAKwwB,GAAKzzB,EACViD,KAAKojB,GAAKrmB,EACViD,KAAKsyB,GAAKv1B,EAEHiD,MAIR6yE,WAAY,SAAW31E,EAAGsK,GAMzB,OAJAxH,KAAKwwB,EAAItzB,EAAEszB,EAAIhpB,EAAEgpB,EACjBxwB,KAAKojB,EAAIlmB,EAAEkmB,EAAI5b,EAAE4b,EACjBpjB,KAAKsyB,EAAIp1B,EAAEo1B,EAAI9qB,EAAE8qB,EAEVtyB,MAIRqtC,SAAU,SAAWjjC,EAAGmoB,GAEvB,YAAWxjB,IAANwjB,GAEJ9zB,QAAQ4pC,KAAM,mGACProC,KAAKs7F,gBAAiBlxF,EAAGmoB,KAIjCvyB,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EACZpjB,KAAKsyB,GAAKloB,EAAEkoB,EAELtyB,OAIR86D,eAAgB,SAAWg6B,GAM1B,OAJA90F,KAAKwwB,GAAKskE,EACV90F,KAAKojB,GAAK0xE,EACV90F,KAAKsyB,GAAKwiE,EAEH90F,MAIRs7F,gBAAiB,SAAWp+F,EAAGsK,GAM9B,OAJAxH,KAAKwwB,EAAItzB,EAAEszB,EAAIhpB,EAAEgpB,EACjBxwB,KAAKojB,EAAIlmB,EAAEkmB,EAAI5b,EAAE4b,EACjBpjB,KAAKsyB,EAAIp1B,EAAEo1B,EAAI9qB,EAAE8qB,EAEVtyB,MAIRu7F,WAAY,WAEX,IAAIprD,EAAa,IAAI9c,EAErB,OAAO,SAAqBomE,GAQ3B,OANSA,GAASA,EAAMC,SAEvBj7F,QAAQqT,MAAO,+FAIT9R,KAAKw7F,gBAAiBrrD,EAAWE,aAAcopD,KAZ5C,GAkBZgC,eAAgB,WAEf,IAAItrD,EAAa,IAAI9c,EAErB,OAAO,SAAyB0mE,EAAMl1B,GAErC,OAAO7kE,KAAKw7F,gBAAiBrrD,EAAW2pD,iBAAkBC,EAAMl1B,KANlD,GAYhB62B,aAAc,SAAWn4E,GAExB,IAAIiN,EAAIxwB,KAAKwwB,EAAGpN,EAAIpjB,KAAKojB,EAAGkP,EAAItyB,KAAKsyB,EACjC31B,EAAI4mB,EAAEqQ,SAMV,OAJA5zB,KAAKwwB,EAAI7zB,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAM21B,EAC5CtyB,KAAKojB,EAAIzmB,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAM21B,EAC5CtyB,KAAKsyB,EAAI31B,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAM21B,EAErCtyB,MAIRu+B,aAAc,SAAWhb,GAExB,IAAIiN,EAAIxwB,KAAKwwB,EAAGpN,EAAIpjB,KAAKojB,EAAGkP,EAAItyB,KAAKsyB,EACjC31B,EAAI4mB,EAAEqQ,SAENrB,EAAI,GAAM51B,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,IAAO21B,EAAI31B,EAAG,KAMzD,OAJAqD,KAAKwwB,GAAM7zB,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAO21B,EAAI31B,EAAG,KAAS41B,EAC/DvyB,KAAKojB,GAAMzmB,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAO21B,EAAI31B,EAAG,KAAS41B,EAC/DvyB,KAAKsyB,GAAM31B,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,IAAO21B,EAAI31B,EAAG,KAAS41B,EAExDvyB,MAIRw7F,gBAAiB,SAAW3kB,GAE3B,IAAIrmD,EAAIxwB,KAAKwwB,EAAGpN,EAAIpjB,KAAKojB,EAAGkP,EAAItyB,KAAKsyB,EACjCqpE,EAAK9kB,EAAErmD,EAAGorE,EAAK/kB,EAAEzzD,EAAGy4E,EAAKhlB,EAAEvkD,EAAGwpE,EAAKjlB,EAAEtkD,EAIrCqiB,EAAMknD,EAAKtrE,EAAIorE,EAAKtpE,EAAIupE,EAAKz4E,EAC7ByxB,EAAMinD,EAAK14E,EAAIy4E,EAAKrrE,EAAImrE,EAAKrpE,EAC7BypE,EAAMD,EAAKxpE,EAAIqpE,EAAKv4E,EAAIw4E,EAAKprE,EAC7BwrE,GAAOL,EAAKnrE,EAAIorE,EAAKx4E,EAAIy4E,EAAKvpE,EAQlC,OAJAtyB,KAAKwwB,EAAIokB,EAAKknD,EAAKE,GAAOL,EAAK9mD,GAAOgnD,EAAKE,GAAOH,EAClD57F,KAAKojB,EAAIyxB,EAAKinD,EAAKE,GAAOJ,EAAKG,GAAOJ,EAAK/mD,GAAOinD,EAClD77F,KAAKsyB,EAAIypE,EAAKD,EAAKE,GAAOH,EAAKjnD,GAAOgnD,EAAK/mD,GAAO8mD,EAE3C37F,MAIRi8F,QAAS,WAER,IAAIjvD,EAAS,IAAIrZ,EAEjB,OAAO,SAAkB0J,GAGxB,OADA2P,EAAOlL,iBAAkBzE,EAAOoB,iBAAkBuO,EAAO0L,WAAYrb,EAAOiB,cACrEt+B,KAAKu+B,aAAcyO,IAPnB,GAaTkvD,UAAW,WAEV,IAAIlvD,EAAS,IAAIrZ,EAEjB,OAAO,SAAoB0J,GAG1B,OADA2P,EAAOlL,iBAAkBzE,EAAOiB,YAAa0O,EAAO0L,WAAYrb,EAAOoB,mBAChEz+B,KAAKu+B,aAAcyO,IAPjB,GAaXy3B,mBAAoB,SAAWlhD,GAK9B,IAAIiN,EAAIxwB,KAAKwwB,EAAGpN,EAAIpjB,KAAKojB,EAAGkP,EAAItyB,KAAKsyB,EACjC31B,EAAI4mB,EAAEqQ,SAMV,OAJA5zB,KAAKwwB,EAAI7zB,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAO21B,EAC7CtyB,KAAKojB,EAAIzmB,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,GAAO21B,EAC7CtyB,KAAKsyB,EAAI31B,EAAG,GAAM6zB,EAAI7zB,EAAG,GAAMymB,EAAIzmB,EAAG,IAAO21B,EAEtCtyB,KAAKqlE,aAIbiwB,OAAQ,SAAWlrF,GAMlB,OAJApK,KAAKwwB,GAAKpmB,EAAEomB,EACZxwB,KAAKojB,GAAKhZ,EAAEgZ,EACZpjB,KAAKsyB,GAAKloB,EAAEkoB,EAELtyB,MAIRo0E,aAAc,SAAW0gB,GAExB,OAAO90F,KAAK86D,eAAgB,EAAIg6B,IAIjC1yF,IAAK,SAAWgI,GAMf,OAJApK,KAAKwwB,EAAI9tB,KAAKN,IAAKpC,KAAKwwB,EAAGpmB,EAAEomB,GAC7BxwB,KAAKojB,EAAI1gB,KAAKN,IAAKpC,KAAKojB,EAAGhZ,EAAEgZ,GAC7BpjB,KAAKsyB,EAAI5vB,KAAKN,IAAKpC,KAAKsyB,EAAGloB,EAAEkoB,GAEtBtyB,MAIRqC,IAAK,SAAW+H,GAMf,OAJApK,KAAKwwB,EAAI9tB,KAAKL,IAAKrC,KAAKwwB,EAAGpmB,EAAEomB,GAC7BxwB,KAAKojB,EAAI1gB,KAAKL,IAAKrC,KAAKojB,EAAGhZ,EAAEgZ,GAC7BpjB,KAAKsyB,EAAI5vB,KAAKL,IAAKrC,KAAKsyB,EAAGloB,EAAEkoB,GAEtBtyB,MAIRk6E,MAAO,SAAW93E,EAAKC,GAQtB,OAJArC,KAAKwwB,EAAI9tB,KAAKL,IAAKD,EAAIouB,EAAG9tB,KAAKN,IAAKC,EAAImuB,EAAGxwB,KAAKwwB,IAChDxwB,KAAKojB,EAAI1gB,KAAKL,IAAKD,EAAIghB,EAAG1gB,KAAKN,IAAKC,EAAI+gB,EAAGpjB,KAAKojB,IAChDpjB,KAAKsyB,EAAI5vB,KAAKL,IAAKD,EAAIkwB,EAAG5vB,KAAKN,IAAKC,EAAIiwB,EAAGtyB,KAAKsyB,IAEzCtyB,MAIRu1F,YAAa,WAEZ,IAAInzF,EAAM,IAAIsxB,EACVrxB,EAAM,IAAIqxB,EAEd,OAAO,SAAsB8hE,EAAQC,GAKpC,OAHArzF,EAAIsC,IAAK8wF,EAAQA,EAAQA,GACzBnzF,EAAIqC,IAAK+wF,EAAQA,EAAQA,GAElBz1F,KAAKk6E,MAAO93E,EAAKC,IAVb,GAgBbqzF,YAAa,SAAWtzF,EAAKC,GAE5B,IAAI1E,EAASqC,KAAKrC,SAElB,OAAOqC,KAAKo0E,aAAcz2E,GAAU,GAAIm9D,eAAgBp4D,KAAKL,IAAKD,EAAKM,KAAKN,IAAKC,EAAK1E,MAIvFoF,MAAO,WAMN,OAJA/C,KAAKwwB,EAAI9tB,KAAKK,MAAO/C,KAAKwwB,GAC1BxwB,KAAKojB,EAAI1gB,KAAKK,MAAO/C,KAAKojB,GAC1BpjB,KAAKsyB,EAAI5vB,KAAKK,MAAO/C,KAAKsyB,GAEnBtyB,MAIR4jB,KAAM,WAML,OAJA5jB,KAAKwwB,EAAI9tB,KAAKkhB,KAAM5jB,KAAKwwB,GACzBxwB,KAAKojB,EAAI1gB,KAAKkhB,KAAM5jB,KAAKojB,GACzBpjB,KAAKsyB,EAAI5vB,KAAKkhB,KAAM5jB,KAAKsyB,GAElBtyB,MAIRyjB,MAAO,WAMN,OAJAzjB,KAAKwwB,EAAI9tB,KAAK+gB,MAAOzjB,KAAKwwB,GAC1BxwB,KAAKojB,EAAI1gB,KAAK+gB,MAAOzjB,KAAKojB,GAC1BpjB,KAAKsyB,EAAI5vB,KAAK+gB,MAAOzjB,KAAKsyB,GAEnBtyB,MAIR21F,YAAa,WAMZ,OAJA31F,KAAKwwB,EAAMxwB,KAAKwwB,EAAI,EAAM9tB,KAAKkhB,KAAM5jB,KAAKwwB,GAAM9tB,KAAKK,MAAO/C,KAAKwwB,GACjExwB,KAAKojB,EAAMpjB,KAAKojB,EAAI,EAAM1gB,KAAKkhB,KAAM5jB,KAAKojB,GAAM1gB,KAAKK,MAAO/C,KAAKojB,GACjEpjB,KAAKsyB,EAAMtyB,KAAKsyB,EAAI,EAAM5vB,KAAKkhB,KAAM5jB,KAAKsyB,GAAM5vB,KAAKK,MAAO/C,KAAKsyB,GAE1DtyB,MAIR41F,OAAQ,WAMP,OAJA51F,KAAKwwB,GAAMxwB,KAAKwwB,EAChBxwB,KAAKojB,GAAMpjB,KAAKojB,EAChBpjB,KAAKsyB,GAAMtyB,KAAKsyB,EAETtyB,MAIR+7E,IAAK,SAAW3xE,GAEf,OAAOpK,KAAKwwB,EAAIpmB,EAAEomB,EAAIxwB,KAAKojB,EAAIhZ,EAAEgZ,EAAIpjB,KAAKsyB,EAAIloB,EAAEkoB,GAMjDujE,SAAU,WAET,OAAO71F,KAAKwwB,EAAIxwB,KAAKwwB,EAAIxwB,KAAKojB,EAAIpjB,KAAKojB,EAAIpjB,KAAKsyB,EAAItyB,KAAKsyB,GAI1D30B,OAAQ,WAEP,OAAO+E,KAAKg+D,KAAM1gE,KAAKwwB,EAAIxwB,KAAKwwB,EAAIxwB,KAAKojB,EAAIpjB,KAAKojB,EAAIpjB,KAAKsyB,EAAItyB,KAAKsyB,IAIrEwjE,gBAAiB,WAEhB,OAAOpzF,KAAKoI,IAAK9K,KAAKwwB,GAAM9tB,KAAKoI,IAAK9K,KAAKojB,GAAM1gB,KAAKoI,IAAK9K,KAAKsyB,IAIjE+yC,UAAW,WAEV,OAAOrlE,KAAKo0E,aAAcp0E,KAAKrC,UAAY,IAI5CqzF,UAAW,SAAWrzF,GAErB,OAAOqC,KAAKqlE,YAAYvK,eAAgBn9D,IAIzC01E,KAAM,SAAWjpE,EAAGutC,GAMnB,OAJA33C,KAAKwwB,IAAOpmB,EAAEomB,EAAIxwB,KAAKwwB,GAAMmnB,EAC7B33C,KAAKojB,IAAOhZ,EAAEgZ,EAAIpjB,KAAKojB,GAAMu0B,EAC7B33C,KAAKsyB,IAAOloB,EAAEkoB,EAAItyB,KAAKsyB,GAAMqlB,EAEtB33C,MAIRo2F,YAAa,SAAW9T,EAAIc,EAAIzrC,GAE/B,OAAO33C,KAAK6yE,WAAYuQ,EAAId,GAAKxnB,eAAgBnjB,GAAQltB,IAAK63D,IAI/D6Z,MAAO,SAAW/xF,EAAGmoB,GAEpB,QAAWxjB,IAANwjB,EAGJ,OADA9zB,QAAQ4pC,KAAM,6FACProC,KAAK8yE,aAAc1oE,EAAGmoB,GAI9B,IAAI/B,EAAIxwB,KAAKwwB,EAAGpN,EAAIpjB,KAAKojB,EAAGkP,EAAItyB,KAAKsyB,EAMrC,OAJAtyB,KAAKwwB,EAAIpN,EAAIhZ,EAAEkoB,EAAIA,EAAIloB,EAAEgZ,EACzBpjB,KAAKojB,EAAIkP,EAAIloB,EAAEomB,EAAIA,EAAIpmB,EAAEkoB,EACzBtyB,KAAKsyB,EAAI9B,EAAIpmB,EAAEgZ,EAAIA,EAAIhZ,EAAEomB,EAElBxwB,MAIR8yE,aAAc,SAAW51E,EAAGsK,GAE3B,IAAI40F,EAAKl/F,EAAEszB,EAAG6rE,EAAKn/F,EAAEkmB,EAAGk5E,EAAKp/F,EAAEo1B,EAC3BiqE,EAAK/0F,EAAEgpB,EAAGgsE,EAAKh1F,EAAE4b,EAAGq5E,EAAKj1F,EAAE8qB,EAM/B,OAJAtyB,KAAKwwB,EAAI6rE,EAAKI,EAAKH,EAAKE,EACxBx8F,KAAKojB,EAAIk5E,EAAKC,EAAKH,EAAKK,EACxBz8F,KAAKsyB,EAAI8pE,EAAKI,EAAKH,EAAKE,EAEjBv8F,MAIR08F,gBAAiB,SAAWnnD,GAE3B,IAAIu/C,EAASv/C,EAAOwmC,IAAK/7E,MAASu1C,EAAOsgD,WAEzC,OAAO71F,KAAKyE,KAAM8wC,GAASulB,eAAgBg6B,IAI5C6H,eAAgB,WAEf,IAAIra,EAAK,IAAI5uD,EAEb,OAAO,SAAyBkpE,GAI/B,OAFAta,EAAG79E,KAAMzE,MAAO08F,gBAAiBE,GAE1B58F,KAAKwkE,IAAK8d,IARH,GAchBua,QAAS,WAKR,IAAIva,EAAK,IAAI5uD,EAEb,OAAO,SAAkB4S,GAExB,OAAOtmC,KAAKwkE,IAAK8d,EAAG79E,KAAM6hC,GAASw0B,eAAgB,EAAI96D,KAAK+7E,IAAKz1C,MAT1D,GAeTw2D,QAAS,SAAW1yF,GAEnB,IAAIqyE,EAAQz8E,KAAK+7E,IAAK3xE,GAAQ1H,KAAKg+D,KAAM1gE,KAAK61F,WAAazrF,EAAEyrF,YAI7D,OAAOnzF,KAAKw0F,KAAM/lE,GAAM+oD,MAAOuC,GAAS,EAAG,KAI5CsZ,WAAY,SAAW3rF,GAEtB,OAAO1H,KAAKg+D,KAAM1gE,KAAKg2F,kBAAmB5rF,KAI3C4rF,kBAAmB,SAAW5rF,GAE7B,IAAI6rF,EAAKj2F,KAAKwwB,EAAIpmB,EAAEomB,EAAG0lE,EAAKl2F,KAAKojB,EAAIhZ,EAAEgZ,EAAG25E,EAAK/8F,KAAKsyB,EAAIloB,EAAEkoB,EAE1D,OAAO2jE,EAAKA,EAAKC,EAAKA,EAAK6G,EAAKA,GAIjC5G,oBAAqB,SAAW/rF,GAE/B,OAAO1H,KAAKoI,IAAK9K,KAAKwwB,EAAIpmB,EAAEomB,GAAM9tB,KAAKoI,IAAK9K,KAAKojB,EAAIhZ,EAAEgZ,GAAM1gB,KAAKoI,IAAK9K,KAAKsyB,EAAIloB,EAAEkoB,IAInF0qE,iBAAkB,SAAWjgG,GAE5B,IAAIkgG,EAAev6F,KAAK6zE,IAAKx5E,EAAEs9E,KAAQt9E,EAAEopC,OAMzC,OAJAnmC,KAAKwwB,EAAIysE,EAAev6F,KAAK6zE,IAAKx5E,EAAE0/E,OACpCz8E,KAAKojB,EAAI1gB,KAAKkiE,IAAK7nE,EAAEs9E,KAAQt9E,EAAEopC,OAC/BnmC,KAAKsyB,EAAI2qE,EAAev6F,KAAKkiE,IAAK7nE,EAAE0/E,OAE7Bz8E,MAIRk9F,mBAAoB,SAAW30F,GAM9B,OAJAvI,KAAKwwB,EAAIjoB,EAAE49B,OAASzjC,KAAK6zE,IAAKhuE,EAAEk0E,OAChCz8E,KAAKojB,EAAI7a,EAAE6a,EACXpjB,KAAKsyB,EAAI/pB,EAAE49B,OAASzjC,KAAKkiE,IAAKr8D,EAAEk0E,OAEzBz8E,MAIRitC,sBAAuB,SAAW1pB,GAEjC,IAAI5mB,EAAI4mB,EAAEqQ,SAMV,OAJA5zB,KAAKwwB,EAAI7zB,EAAG,IACZqD,KAAKojB,EAAIzmB,EAAG,IACZqD,KAAKsyB,EAAI31B,EAAG,IAELqD,MAIRm9F,mBAAoB,SAAW55E,GAE9B,IAAI65E,EAAKp9F,KAAKq9F,oBAAqB95E,EAAG,GAAI5lB,SACtC2/F,EAAKt9F,KAAKq9F,oBAAqB95E,EAAG,GAAI5lB,SACtC4/F,EAAKv9F,KAAKq9F,oBAAqB95E,EAAG,GAAI5lB,SAM1C,OAJAqC,KAAKwwB,EAAI4sE,EACTp9F,KAAKojB,EAAIk6E,EACTt9F,KAAKsyB,EAAIirE,EAEFv9F,MAIRq9F,oBAAqB,SAAW95E,EAAG9a,GAElC,OAAOzI,KAAK43D,UAAWr0C,EAAEqQ,SAAkB,EAARnrB,IAIpC0nD,OAAQ,SAAW/lD,GAElB,OAAWA,EAAEomB,IAAMxwB,KAAKwwB,GAASpmB,EAAEgZ,IAAMpjB,KAAKojB,GAAShZ,EAAEkoB,IAAMtyB,KAAKsyB,GAIrEslC,UAAW,SAAWn3C,EAAOoR,GAQ5B,YANgB9iB,IAAX8iB,IAAuBA,EAAS,GAErC7xB,KAAKwwB,EAAI/P,EAAOoR,GAChB7xB,KAAKojB,EAAI3C,EAAOoR,EAAS,GACzB7xB,KAAKsyB,EAAI7R,EAAOoR,EAAS,GAElB7xB,MAIRgsB,QAAS,SAAWvL,EAAOoR,GAS1B,YAPe9iB,IAAV0R,IAAsBA,WACX1R,IAAX8iB,IAAuBA,EAAS,GAErCpR,EAAOoR,GAAW7xB,KAAKwwB,EACvB/P,EAAOoR,EAAS,GAAM7xB,KAAKojB,EAC3B3C,EAAOoR,EAAS,GAAM7xB,KAAKsyB,EAEpB7R,GAIR2xD,oBAAqB,SAAWlkC,EAAWzlC,EAAOopB,GAYjD,YAVgB9iB,IAAX8iB,GAEJpzB,QAAQ4pC,KAAM,uEAIfroC,KAAKwwB,EAAI0d,EAAUikC,KAAM1pE,GACzBzI,KAAKojB,EAAI8qB,EAAUmoD,KAAM5tF,GACzBzI,KAAKsyB,EAAI4b,EAAUkqD,KAAM3vF,GAElBzI,QAsCT9B,OAAO20F,OAAQl/D,EAAQx1B,WAEtBq/F,WAAW,EAEX94F,IAAK,SAAW+4F,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAE1F,IAAIpH,EAAKp3F,KAAK4zB,SAOd,OALAwjE,EAAI,GAAMqG,EAAKrG,EAAI,GAAMsG,EAAKtG,EAAI,GAAMuG,EAAKvG,EAAI,IAAOwG,EACxDxG,EAAI,GAAMyG,EAAKzG,EAAI,GAAM0G,EAAK1G,EAAI,GAAM2G,EAAK3G,EAAI,IAAO4G,EACxD5G,EAAI,GAAM6G,EAAK7G,EAAI,GAAM8G,EAAK9G,EAAI,IAAO+G,EAAK/G,EAAI,IAAOgH,EACzDhH,EAAI,GAAMiH,EAAKjH,EAAI,GAAMkH,EAAKlH,EAAI,IAAOmH,EAAKnH,EAAI,IAAOoH,EAElDx+F,MAIRilE,SAAU,WAWT,OATAjlE,KAAK0E,IAEJ,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIH1E,MAIR4P,MAAO,WAEN,OAAO,IAAI+jB,GAAUikC,UAAW53D,KAAK4zB,WAItCnvB,KAAM,SAAW8e,GAEhB,IAAI6zE,EAAKp3F,KAAK4zB,SACV6qE,EAAKl7E,EAAEqQ,SAOX,OALAwjE,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GACvErH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GACvErH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,IAAOqH,EAAI,IAAMrH,EAAI,IAAOqH,EAAI,IAC1ErH,EAAI,IAAOqH,EAAI,IAAMrH,EAAI,IAAOqH,EAAI,IAAMrH,EAAI,IAAOqH,EAAI,IAAMrH,EAAI,IAAOqH,EAAI,IAEvEz+F,MAIR0+F,aAAc,SAAWn7E,GAExB,IAAI6zE,EAAKp3F,KAAK4zB,SAAU6qE,EAAKl7E,EAAEqQ,SAM/B,OAJAwjE,EAAI,IAAOqH,EAAI,IACfrH,EAAI,IAAOqH,EAAI,IACfrH,EAAI,IAAOqH,EAAI,IAERz+F,MAIR2+F,aAAc,SAAWC,EAAOC,EAAOC,GAMtC,OAJAF,EAAMvB,oBAAqBr9F,KAAM,GACjC6+F,EAAMxB,oBAAqBr9F,KAAM,GACjC8+F,EAAMzB,oBAAqBr9F,KAAM,GAE1BA,MAIR++F,UAAW,SAAWH,EAAOC,EAAOC,GASnC,OAPA9+F,KAAK0E,IACJk6F,EAAMpuE,EAAGquE,EAAMruE,EAAGsuE,EAAMtuE,EAAG,EAC3BouE,EAAMx7E,EAAGy7E,EAAMz7E,EAAG07E,EAAM17E,EAAG,EAC3Bw7E,EAAMtsE,EAAGusE,EAAMvsE,EAAGwsE,EAAMxsE,EAAG,EAC3B,EAAS,EAAS,EAAS,GAGrBtyB,MAIRy4C,gBAAiB,WAEhB,IAAI6pC,EAAK,IAAI5uD,EAEb,OAAO,SAA0BnQ,GAEhC,IAAI6zE,EAAKp3F,KAAK4zB,SACV6qE,EAAKl7E,EAAEqQ,SAEPorE,EAAS,EAAI1c,EAAG+a,oBAAqB95E,EAAG,GAAI5lB,SAC5CshG,EAAS,EAAI3c,EAAG+a,oBAAqB95E,EAAG,GAAI5lB,SAC5CuhG,EAAS,EAAI5c,EAAG+a,oBAAqB95E,EAAG,GAAI5lB,SAchD,OAZAy5F,EAAI,GAAMqH,EAAI,GAAMO,EACpB5H,EAAI,GAAMqH,EAAI,GAAMO,EACpB5H,EAAI,GAAMqH,EAAI,GAAMO,EAEpB5H,EAAI,GAAMqH,EAAI,GAAMQ,EACpB7H,EAAI,GAAMqH,EAAI,GAAMQ,EACpB7H,EAAI,GAAMqH,EAAI,GAAMQ,EAEpB7H,EAAI,GAAMqH,EAAI,GAAMS,EACpB9H,EAAI,GAAMqH,EAAI,GAAMS,EACpB9H,EAAI,IAAOqH,EAAI,IAAOS,EAEfl/F,MAzBQ,GA+BjBm/F,sBAAuB,SAAW1F,GAExBA,GAASA,EAAMC,SAEvBj7F,QAAQqT,MAAO,wGAIhB,IAAIslF,EAAKp3F,KAAK4zB,SAEVpD,EAAIipE,EAAMjpE,EAAGpN,EAAIq2E,EAAMr2E,EAAGkP,EAAImnE,EAAMnnE,EACpCp1B,EAAIwF,KAAKkiE,IAAKp0C,GAAKhpB,EAAI9E,KAAK6zE,IAAK/lD,GACjCjoB,EAAI7F,KAAKkiE,IAAKxhD,GAAKC,EAAI3gB,KAAK6zE,IAAKnzD,GACjCzmB,EAAI+F,KAAKkiE,IAAKtyC,GAAKj1B,EAAIqF,KAAK6zE,IAAKjkD,GAErC,GAAqB,QAAhBmnE,EAAM/pD,MAAkB,CAE5B,IAAI0vD,EAAKliG,EAAIP,EAAG0iG,EAAKniG,EAAIG,EAAGiiG,EAAK93F,EAAI7K,EAAG4iG,EAAK/3F,EAAInK,EAEjD+5F,EAAI,GAAM7uF,EAAI5L,EACdy6F,EAAI,IAAQ7uF,EAAIlL,EAChB+5F,EAAI,GAAM/zE,EAEV+zE,EAAI,GAAMiI,EAAKC,EAAKj8E,EACpB+zE,EAAI,GAAMgI,EAAKG,EAAKl8E,EACpB+zE,EAAI,IAAQ5vF,EAAIe,EAEhB6uF,EAAI,GAAMmI,EAAKH,EAAK/7E,EACpB+zE,EAAI,GAAMkI,EAAKD,EAAKh8E,EACpB+zE,EAAI,IAAOl6F,EAAIqL,OAET,GAAqB,QAAhBkxF,EAAM/pD,MAAkB,CAEnC,IAAI8vD,EAAKj3F,EAAI5L,EAAG8iG,EAAKl3F,EAAIlL,EAAGqiG,EAAKr8E,EAAI1mB,EAAGgjG,EAAKt8E,EAAIhmB,EAEjD+5F,EAAI,GAAMoI,EAAKG,EAAKn4F,EACpB4vF,EAAI,GAAMsI,EAAKl4F,EAAIi4F,EACnBrI,EAAI,GAAMl6F,EAAImmB,EAEd+zE,EAAI,GAAMl6F,EAAIG,EACd+5F,EAAI,GAAMl6F,EAAIP,EACdy6F,EAAI,IAAQ5vF,EAEZ4vF,EAAI,GAAMqI,EAAKj4F,EAAIk4F,EACnBtI,EAAI,GAAMuI,EAAKH,EAAKh4F,EACpB4vF,EAAI,IAAOl6F,EAAIqL,OAET,GAAqB,QAAhBkxF,EAAM/pD,MAAkB,CAEnC,IAAI8vD,EAAKj3F,EAAI5L,EAAG8iG,EAAKl3F,EAAIlL,EAAGqiG,EAAKr8E,EAAI1mB,EAAGgjG,EAAKt8E,EAAIhmB,EAEjD+5F,EAAI,GAAMoI,EAAKG,EAAKn4F,EACpB4vF,EAAI,IAAQl6F,EAAIG,EAChB+5F,EAAI,GAAMsI,EAAKD,EAAKj4F,EAEpB4vF,EAAI,GAAMqI,EAAKC,EAAKl4F,EACpB4vF,EAAI,GAAMl6F,EAAIP,EACdy6F,EAAI,GAAMuI,EAAKH,EAAKh4F,EAEpB4vF,EAAI,IAAQl6F,EAAImmB,EAChB+zE,EAAI,GAAM5vF,EACV4vF,EAAI,IAAOl6F,EAAIqL,OAET,GAAqB,QAAhBkxF,EAAM/pD,MAAkB,CAEnC,IAAI0vD,EAAKliG,EAAIP,EAAG0iG,EAAKniG,EAAIG,EAAGiiG,EAAK93F,EAAI7K,EAAG4iG,EAAK/3F,EAAInK,EAEjD+5F,EAAI,GAAM7uF,EAAI5L,EACdy6F,EAAI,GAAMkI,EAAKj8E,EAAIg8E,EACnBjI,EAAI,GAAMgI,EAAK/7E,EAAIk8E,EAEnBnI,EAAI,GAAM7uF,EAAIlL,EACd+5F,EAAI,GAAMmI,EAAKl8E,EAAI+7E,EACnBhI,EAAI,GAAMiI,EAAKh8E,EAAIi8E,EAEnBlI,EAAI,IAAQ/zE,EACZ+zE,EAAI,GAAM5vF,EAAIe,EACd6uF,EAAI,IAAOl6F,EAAIqL,OAET,GAAqB,QAAhBkxF,EAAM/pD,MAAkB,CAEnC,IAAIkwD,EAAK1iG,EAAIqL,EAAGs3F,EAAK3iG,EAAImmB,EAAGy8E,EAAKt4F,EAAIe,EAAGw3F,EAAKv4F,EAAI6b,EAEjD+zE,EAAI,GAAM7uF,EAAI5L,EACdy6F,EAAI,GAAM2I,EAAKH,EAAKviG,EACpB+5F,EAAI,GAAM0I,EAAKziG,EAAIwiG,EAEnBzI,EAAI,GAAM/5F,EACV+5F,EAAI,GAAMl6F,EAAIP,EACdy6F,EAAI,IAAQ5vF,EAAI7K,EAEhBy6F,EAAI,IAAQ/zE,EAAI1mB,EAChBy6F,EAAI,GAAMyI,EAAKxiG,EAAIyiG,EACnB1I,EAAI,IAAOwI,EAAKG,EAAK1iG,OAEf,GAAqB,QAAhBo8F,EAAM/pD,MAAkB,CAEnC,IAAIkwD,EAAK1iG,EAAIqL,EAAGs3F,EAAK3iG,EAAImmB,EAAGy8E,EAAKt4F,EAAIe,EAAGw3F,EAAKv4F,EAAI6b,EAEjD+zE,EAAI,GAAM7uF,EAAI5L,EACdy6F,EAAI,IAAQ/5F,EACZ+5F,EAAI,GAAM/zE,EAAI1mB,EAEdy6F,EAAI,GAAMwI,EAAKviG,EAAI0iG,EACnB3I,EAAI,GAAMl6F,EAAIP,EACdy6F,EAAI,GAAMyI,EAAKxiG,EAAIyiG,EAEnB1I,EAAI,GAAM0I,EAAKziG,EAAIwiG,EACnBzI,EAAI,GAAM5vF,EAAI7K,EACdy6F,EAAI,IAAO2I,EAAK1iG,EAAIuiG,EAerB,OAVAxI,EAAI,GAAM,EACVA,EAAI,GAAM,EACVA,EAAI,IAAO,EAGXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EAEJp3F,MAIRggG,2BAA4B,SAAWnpB,GAEtC,IAAIugB,EAAKp3F,KAAK4zB,SAEVpD,EAAIqmD,EAAEvjD,GAAIlQ,EAAIyzD,EAAEtjD,GAAIjB,EAAIukD,EAAErjD,GAAIjB,EAAIskD,EAAEpjD,GACpCogD,EAAKrjD,EAAIA,EAAGyvE,EAAK78E,EAAIA,EAAG88E,EAAK5tE,EAAIA,EACjCwlE,EAAKtnE,EAAIqjD,EAAIokB,EAAKznE,EAAIyvE,EAAI/H,EAAK1nE,EAAI0vE,EACnCnI,EAAK30E,EAAI68E,EAAI9H,EAAK/0E,EAAI88E,EAAIlI,EAAK1lE,EAAI4tE,EACnCC,EAAK5tE,EAAIshD,EAAIusB,EAAK7tE,EAAI0tE,EAAII,EAAK9tE,EAAI2tE,EAyBvC,OAvBA9I,EAAI,GAAM,GAAMW,EAAKC,GACrBZ,EAAI,GAAMa,EAAKoI,EACfjJ,EAAI,GAAMc,EAAKkI,EAEfhJ,EAAI,GAAMa,EAAKoI,EACfjJ,EAAI,GAAM,GAAMU,EAAKE,GACrBZ,EAAI,GAAMe,EAAKgI,EAEf/I,EAAI,GAAMc,EAAKkI,EACfhJ,EAAI,GAAMe,EAAKgI,EACf/I,EAAI,IAAO,GAAMU,EAAKC,GAGtBX,EAAI,GAAM,EACVA,EAAI,GAAM,EACVA,EAAI,IAAO,EAGXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EAEJp3F,MAIRmtC,OAAQ,WAEP,IAAI3c,EAAI,IAAIkD,EACRtQ,EAAI,IAAIsQ,EACRpB,EAAI,IAAIoB,EAEZ,OAAO,SAAiB4sE,EAAKhhG,EAAQmuC,GAEpC,IAAI2pD,EAAKp3F,KAAK4zB,SAyCd,OAvCAtB,EAAEugD,WAAYytB,EAAKhhG,GAEG,IAAjBgzB,EAAEujE,aAINvjE,EAAEA,EAAI,GAIPA,EAAE+yC,YACF70C,EAAEsiD,aAAcrlC,EAAInb,GAEE,IAAjB9B,EAAEqlE,aAIoB,IAArBnzF,KAAKoI,IAAK2iC,EAAGnb,GAEjBA,EAAE9B,GAAK,KAIP8B,EAAEA,GAAK,KAIRA,EAAE+yC,YACF70C,EAAEsiD,aAAcrlC,EAAInb,IAIrB9B,EAAE60C,YACFjiD,EAAE0vD,aAAcxgD,EAAG9B,GAEnB4mE,EAAI,GAAM5mE,EAAEA,EAAG4mE,EAAI,GAAMh0E,EAAEoN,EAAG4mE,EAAI,GAAM9kE,EAAE9B,EAC1C4mE,EAAI,GAAM5mE,EAAEpN,EAAGg0E,EAAI,GAAMh0E,EAAEA,EAAGg0E,EAAI,GAAM9kE,EAAElP,EAC1Cg0E,EAAI,GAAM5mE,EAAE8B,EAAG8kE,EAAI,GAAMh0E,EAAEkP,EAAG8kE,EAAI,IAAO9kE,EAAEA,EAEpCtyB,MAjDD,GAuDRqtC,SAAU,SAAW9pB,EAAG1mB,GAEvB,YAAWkS,IAANlS,GAEJ4B,QAAQ4pC,KAAM,oGACProC,KAAK8hC,iBAAkBve,EAAG1mB,IAI3BmD,KAAK8hC,iBAAkB9hC,KAAMujB,IAIrC4hD,YAAa,SAAW5hD,GAEvB,OAAOvjB,KAAK8hC,iBAAkBve,EAAGvjB,OAIlC8hC,iBAAkB,SAAW5kC,EAAGsK,GAE/B,IAAI43F,EAAKliG,EAAE02B,SACP0rE,EAAK93F,EAAEosB,SACPwjE,EAAKp3F,KAAK4zB,SAEV2sE,EAAMnB,EAAI,GAAKoB,EAAMpB,EAAI,GAAKqB,EAAMrB,EAAI,GAAKsB,EAAMtB,EAAI,IACvDuB,EAAMvB,EAAI,GAAKwB,EAAMxB,EAAI,GAAKyB,EAAMzB,EAAI,GAAK0B,EAAM1B,EAAI,IACvD2B,EAAM3B,EAAI,GAAK4B,EAAM5B,EAAI,GAAK6B,EAAM7B,EAAI,IAAM8B,EAAM9B,EAAI,IACxD+B,EAAM/B,EAAI,GAAKgC,EAAMhC,EAAI,GAAKiC,EAAMjC,EAAI,IAAMkC,EAAMlC,EAAI,IAExDmC,EAAMjC,EAAI,GAAKkC,EAAMlC,EAAI,GAAKmC,EAAMnC,EAAI,GAAKoC,EAAMpC,EAAI,IACvDqC,EAAMrC,EAAI,GAAKsC,EAAMtC,EAAI,GAAKuC,EAAMvC,EAAI,GAAKwC,EAAMxC,EAAI,IACvDyC,EAAMzC,EAAI,GAAK0C,EAAM1C,EAAI,GAAK2C,EAAM3C,EAAI,IAAM4C,EAAM5C,EAAI,IACxD6C,EAAM7C,EAAI,GAAK8C,EAAM9C,EAAI,GAAK+C,EAAM/C,EAAI,IAAMgD,EAAMhD,EAAI,IAsB5D,OApBAlI,EAAI,GAAMmJ,EAAMgB,EAAMf,EAAMmB,EAAMlB,EAAMsB,EAAMrB,EAAMyB,EACpD/K,EAAI,GAAMmJ,EAAMiB,EAAMhB,EAAMoB,EAAMnB,EAAMuB,EAAMtB,EAAM0B,EACpDhL,EAAI,GAAMmJ,EAAMkB,EAAMjB,EAAMqB,EAAMpB,EAAMwB,EAAMvB,EAAM2B,EACpDjL,EAAI,IAAOmJ,EAAMmB,EAAMlB,EAAMsB,EAAMrB,EAAMyB,EAAMxB,EAAM4B,EAErDlL,EAAI,GAAMuJ,EAAMY,EAAMX,EAAMe,EAAMd,EAAMkB,EAAMjB,EAAMqB,EACpD/K,EAAI,GAAMuJ,EAAMa,EAAMZ,EAAMgB,EAAMf,EAAMmB,EAAMlB,EAAMsB,EACpDhL,EAAI,GAAMuJ,EAAMc,EAAMb,EAAMiB,EAAMhB,EAAMoB,EAAMnB,EAAMuB,EACpDjL,EAAI,IAAOuJ,EAAMe,EAAMd,EAAMkB,EAAMjB,EAAMqB,EAAMpB,EAAMwB,EAErDlL,EAAI,GAAM2J,EAAMQ,EAAMP,EAAMW,EAAMV,EAAMc,EAAMb,EAAMiB,EACpD/K,EAAI,GAAM2J,EAAMS,EAAMR,EAAMY,EAAMX,EAAMe,EAAMd,EAAMkB,EACpDhL,EAAI,IAAO2J,EAAMU,EAAMT,EAAMa,EAAMZ,EAAMgB,EAAMf,EAAMmB,EACrDjL,EAAI,IAAO2J,EAAMW,EAAMV,EAAMc,EAAMb,EAAMiB,EAAMhB,EAAMoB,EAErDlL,EAAI,GAAM+J,EAAMI,EAAMH,EAAMO,EAAMN,EAAMU,EAAMT,EAAMa,EACpD/K,EAAI,GAAM+J,EAAMK,EAAMJ,EAAMQ,EAAMP,EAAMW,EAAMV,EAAMc,EACpDhL,EAAI,IAAO+J,EAAMM,EAAML,EAAMS,EAAMR,EAAMY,EAAMX,EAAMe,EACrDjL,EAAI,IAAO+J,EAAMO,EAAMN,EAAMU,EAAMT,EAAMa,EAAMZ,EAAMgB,EAE9CtiG,MAIR86D,eAAgB,SAAW/9D,GAE1B,IAAIq6F,EAAKp3F,KAAK4zB,SAOd,OALAwjE,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,KAAQr6F,EACtDq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,KAAQr6F,EACtDq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,KAAQr6F,EAAGq6F,EAAI,KAAQr6F,EACvDq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,KAAQr6F,EAAGq6F,EAAI,KAAQr6F,EAEhDiD,MAIRuiG,uBAAwB,WAEvB,IAAIjgB,EAAK,IAAI5uD,EAEb,OAAO,SAAiCwa,GAEvC,IAAM,IAAI9wC,EAAI,EAAGI,EAAI0wC,EAAUrtC,MAAOzD,EAAII,EAAGJ,IAE5CklF,EAAG9xD,EAAI0d,EAAUikC,KAAM/0E,GACvBklF,EAAGl/D,EAAI8qB,EAAUmoD,KAAMj5F,GACvBklF,EAAGhwD,EAAI4b,EAAUkqD,KAAMh7F,GAEvBklF,EAAG/jD,aAAcv+B,MAEjBkuC,EAAUs0D,OAAQplG,EAAGklF,EAAG9xD,EAAG8xD,EAAGl/D,EAAGk/D,EAAGhwD,GAIrC,OAAO4b,GAlBe,GAwBxBu0D,YAAa,WAEZ,IAAIrL,EAAKp3F,KAAK4zB,SAEV6pE,EAAMrG,EAAI,GAAKsG,EAAMtG,EAAI,GAAKuG,EAAMvG,EAAI,GAAKwG,EAAMxG,EAAI,IACvDyG,EAAMzG,EAAI,GAAK0G,EAAM1G,EAAI,GAAK2G,EAAM3G,EAAI,GAAK4G,EAAM5G,EAAI,IACvD6G,EAAM7G,EAAI,GAAK8G,EAAM9G,EAAI,GAAK+G,EAAM/G,EAAI,IAAMgH,EAAMhH,EAAI,IAM5D,OALUA,EAAI,KAOVwG,EAAMG,EAAMG,EACXP,EAAMK,EAAME,EACZN,EAAME,EAAMK,EACZT,EAAMM,EAAMG,EACZR,EAAMG,EAAMM,EACZV,EAAMK,EAAMK,GAZQhH,EAAI,KAezBqG,EAAMM,EAAMK,EACXX,EAAMO,EAAMG,EACZP,EAAMC,EAAMM,EACZR,EAAME,EAAMO,EACZT,EAAMK,EAAMC,EACZL,EAAMG,EAAME,GApBuB7G,EAAI,MAuBxCqG,EAAMO,EAAME,EACXT,EAAMK,EAAMM,EACZR,EAAMC,EAAMK,EACZR,EAAMG,EAAMO,EACZR,EAAME,EAAMG,EACZP,EAAMM,EAAMC,GA5BuC7G,EAAI,MA+BxDuG,EAAMG,EAAMG,EACXR,EAAMM,EAAMG,EACZT,EAAMK,EAAMK,EACZR,EAAME,EAAMK,EACZR,EAAMG,EAAMM,EACZT,EAAMK,EAAME,IAOlByE,UAAW,WAEV,IACI1gF,EADAo1E,EAAKp3F,KAAK4zB,SAWd,OARA5R,EAAMo1E,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMp1E,EAC5CA,EAAMo1E,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMp1E,EAC5CA,EAAMo1E,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMp1E,EAE5CA,EAAMo1E,EAAI,GAAKA,EAAI,GAAMA,EAAI,IAAMA,EAAI,IAAOp1E,EAC9CA,EAAMo1E,EAAI,GAAKA,EAAI,GAAMA,EAAI,IAAMA,EAAI,IAAOp1E,EAC9CA,EAAMo1E,EAAI,IAAMA,EAAI,IAAOA,EAAI,IAAMA,EAAI,IAAOp1E,EAEzChiB,MAIR2iG,YAAa,SAAWv4F,GAEvB,IAAIgtF,EAAKp3F,KAAK4zB,SAMd,OAJAwjE,EAAI,IAAOhtF,EAAEomB,EACb4mE,EAAI,IAAOhtF,EAAEgZ,EACbg0E,EAAI,IAAOhtF,EAAEkoB,EAENtyB,MAIR04C,WAAY,SAAWn1B,EAAGq/E,GAGzB,IAAIxL,EAAKp3F,KAAK4zB,SACb6qE,EAAKl7E,EAAEqQ,SAEP6pE,EAAMgB,EAAI,GAAKZ,EAAMY,EAAI,GAAKR,EAAMQ,EAAI,GAAKJ,EAAMI,EAAI,GACvDf,EAAMe,EAAI,GAAKX,EAAMW,EAAI,GAAKP,EAAMO,EAAI,GAAKH,EAAMG,EAAI,GACvDd,EAAMc,EAAI,GAAKV,EAAMU,EAAI,GAAKN,EAAMM,EAAI,IAAMF,EAAME,EAAI,IACxDb,EAAMa,EAAI,IAAMT,EAAMS,EAAI,IAAML,EAAMK,EAAI,IAAMD,EAAMC,EAAI,IAE1DoE,EAAM9E,EAAMK,EAAME,EAAMN,EAAMG,EAAMG,EAAMN,EAAME,EAAMK,EAAMT,EAAMM,EAAMG,EAAMR,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,EAC5GsE,EAAMlF,EAAMO,EAAMG,EAAMX,EAAMS,EAAME,EAAMV,EAAMM,EAAMK,EAAMb,EAAMU,EAAMG,EAAMZ,EAAMO,EAAMM,EAAMd,EAAMS,EAAMK,EAC5GuE,EAAMpF,EAAMK,EAAMM,EAAMV,EAAMG,EAAMO,EAAMV,EAAME,EAAMS,EAAMb,EAAMM,EAAMO,EAAMZ,EAAMG,EAAMU,EAAMd,EAAMK,EAAMS,EAC5GwE,EAAMpF,EAAMG,EAAMG,EAAMP,EAAMK,EAAME,EAAMN,EAAME,EAAMK,EAAMT,EAAMM,EAAMG,EAAMR,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,EAEzG6E,EAAMxF,EAAMoF,EAAMhF,EAAMiF,EAAM7E,EAAM8E,EAAM1E,EAAM2E,EAEpD,GAAa,IAARC,EAAY,CAEhB,IAAI3xF,EAAM,oEAEV,IAA2B,IAAtBsxF,EAEJ,MAAM,IAAItlG,MAAOgU,GAQlB,OAJC7S,QAAQ4pC,KAAM/2B,GAIRtR,KAAKilE,WAIb,IAAIi+B,EAAS,EAAID,EAsBjB,OApBA7L,EAAI,GAAMyL,EAAMK,EAChB9L,EAAI,IAAQ4G,EAAMG,EAAME,EAAMN,EAAMK,EAAMC,EAAML,EAAMC,EAAMM,EAAMV,EAAMO,EAAMG,EAAMR,EAAME,EAAMO,EAAMX,EAAMM,EAAMK,GAAQ0E,EAC1H9L,EAAI,IAAQ0G,EAAMM,EAAMC,EAAML,EAAME,EAAMG,EAAML,EAAMC,EAAMK,EAAMT,EAAMO,EAAME,EAAMR,EAAMG,EAAMO,EAAMX,EAAMK,EAAMM,GAAQ0E,EAC1H9L,EAAI,IAAQ2G,EAAMG,EAAMG,EAAMP,EAAMK,EAAME,EAAMN,EAAME,EAAMK,EAAMT,EAAMM,EAAMG,EAAMR,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,GAAQ2E,EAE1H9L,EAAI,GAAM0L,EAAMI,EAChB9L,EAAI,IAAQuG,EAAMS,EAAMC,EAAMT,EAAMO,EAAME,EAAMT,EAAMK,EAAMM,EAAMd,EAAMW,EAAMG,EAAMZ,EAAMM,EAAMO,EAAMf,EAAMU,EAAMK,GAAQ0E,EAC1H9L,EAAI,IAAQwG,EAAMM,EAAMG,EAAMX,EAAMU,EAAMC,EAAMT,EAAMK,EAAMK,EAAMb,EAAMW,EAAME,EAAMZ,EAAMO,EAAMO,EAAMf,EAAMS,EAAMM,GAAQ0E,EAC1H9L,EAAI,IAAQsG,EAAMS,EAAME,EAAMV,EAAMO,EAAMG,EAAMV,EAAMM,EAAMK,EAAMb,EAAMU,EAAMG,EAAMZ,EAAMO,EAAMM,EAAMd,EAAMS,EAAMK,GAAQ2E,EAE1H9L,EAAI,GAAM2L,EAAMG,EAChB9L,EAAI,IAAQwG,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,EAAMT,EAAMC,EAAMU,EAAMd,EAAMO,EAAMO,EAAMZ,EAAME,EAAMW,EAAMf,EAAMM,EAAMS,GAAQ0E,EAC1H9L,EAAI,KAASsG,EAAMM,EAAMK,EAAMT,EAAME,EAAMO,EAAMT,EAAMC,EAAMS,EAAMb,EAAMO,EAAMM,EAAMZ,EAAMG,EAAMW,EAAMf,EAAMK,EAAMU,GAAQ0E,EAC3H9L,EAAI,KAASuG,EAAMG,EAAMO,EAAMX,EAAMK,EAAMM,EAAMV,EAAME,EAAMS,EAAMb,EAAMM,EAAMO,EAAMZ,EAAMG,EAAMU,EAAMd,EAAMK,EAAMS,GAAQ2E,EAE3H9L,EAAI,IAAO4L,EAAME,EACjB9L,EAAI,KAASuG,EAAMK,EAAMC,EAAML,EAAMG,EAAME,EAAML,EAAMC,EAAMM,EAAMV,EAAMO,EAAMG,EAAMR,EAAME,EAAMO,EAAMX,EAAMM,EAAMK,GAAQ8E,EAC3H9L,EAAI,KAASwG,EAAME,EAAMG,EAAMP,EAAMM,EAAMC,EAAML,EAAMC,EAAMK,EAAMT,EAAMO,EAAME,EAAMR,EAAMG,EAAMO,EAAMX,EAAMK,EAAMM,GAAQ8E,EAC3H9L,EAAI,KAASsG,EAAMK,EAAME,EAAMN,EAAMG,EAAMG,EAAMN,EAAME,EAAMK,EAAMT,EAAMM,EAAMG,EAAMR,EAAMG,EAAMM,EAAMV,EAAMK,EAAMK,GAAQ+E,EAEpHljG,MAIRs8B,MAAO,SAAWlyB,GAEjB,IAAIgtF,EAAKp3F,KAAK4zB,SACVpD,EAAIpmB,EAAEomB,EAAGpN,EAAIhZ,EAAEgZ,EAAGkP,EAAIloB,EAAEkoB,EAO5B,OALA8kE,EAAI,IAAO5mE,EAAG4mE,EAAI,IAAOh0E,EAAGg0E,EAAI,IAAO9kE,EACvC8kE,EAAI,IAAO5mE,EAAG4mE,EAAI,IAAOh0E,EAAGg0E,EAAI,IAAO9kE,EACvC8kE,EAAI,IAAO5mE,EAAG4mE,EAAI,IAAOh0E,EAAGg0E,EAAI,KAAQ9kE,EACxC8kE,EAAI,IAAO5mE,EAAG4mE,EAAI,IAAOh0E,EAAGg0E,EAAI,KAAQ9kE,EAEjCtyB,MAIRmjG,kBAAmB,WAElB,IAAI/L,EAAKp3F,KAAK4zB,SAEVwvE,EAAWhM,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GACjEiM,EAAWjM,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GACjEkM,EAAWlM,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,IAAOA,EAAI,IAEtE,OAAO10F,KAAKg+D,KAAMh+D,KAAKL,IAAK+gG,EAAUC,EAAUC,KAIjDp2D,gBAAiB,SAAW1c,EAAGpN,EAAGkP,GAWjC,OATAtyB,KAAK0E,IAEJ,EAAG,EAAG,EAAG8rB,EACT,EAAG,EAAG,EAAGpN,EACT,EAAG,EAAG,EAAGkP,EACT,EAAG,EAAG,EAAG,GAIHtyB,MAIRujG,cAAe,SAAW9mB,GAEzB,IAAIl0E,EAAI7F,KAAKkiE,IAAK6X,GAAS1/E,EAAI2F,KAAK6zE,IAAKkG,GAWzC,OATAz8E,KAAK0E,IAEJ,EAAG,EAAI,EAAG,EACV,EAAG6D,GAAKxL,EAAG,EACX,EAAGA,EAAIwL,EAAG,EACV,EAAG,EAAI,EAAG,GAIJvI,MAIRwjG,cAAe,SAAW/mB,GAEzB,IAAIl0E,EAAI7F,KAAKkiE,IAAK6X,GAAS1/E,EAAI2F,KAAK6zE,IAAKkG,GAWzC,OATAz8E,KAAK0E,IAEH6D,EAAG,EAAGxL,EAAG,EACT,EAAG,EAAG,EAAG,GACRA,EAAG,EAAGwL,EAAG,EACV,EAAG,EAAG,EAAG,GAIJvI,MAIRyjG,cAAe,SAAWhnB,GAEzB,IAAIl0E,EAAI7F,KAAKkiE,IAAK6X,GAAS1/E,EAAI2F,KAAK6zE,IAAKkG,GAWzC,OATAz8E,KAAK0E,IAEJ6D,GAAKxL,EAAG,EAAG,EACXA,EAAIwL,EAAG,EAAG,EACV,EAAI,EAAG,EAAG,EACV,EAAI,EAAG,EAAG,GAIJvI,MAIR0jG,iBAAkB,SAAW3J,EAAMl1B,GAIlC,IAAIt8D,EAAI7F,KAAKkiE,IAAKC,GACd9nE,EAAI2F,KAAK6zE,IAAK1R,GACdjoE,EAAI,EAAI2L,EACRioB,EAAIupE,EAAKvpE,EAAGpN,EAAI22E,EAAK32E,EAAGkP,EAAIynE,EAAKznE,EACjCqxE,EAAK/mG,EAAI4zB,EAAGozE,EAAKhnG,EAAIwmB,EAWxB,OATDpjB,KAAK0E,IAEJi/F,EAAKnzE,EAAIjoB,EAAGo7F,EAAKvgF,EAAIrmB,EAAIu1B,EAAGqxE,EAAKrxE,EAAIv1B,EAAIqmB,EAAG,EAC5CugF,EAAKvgF,EAAIrmB,EAAIu1B,EAAGsxE,EAAKxgF,EAAI7a,EAAGq7F,EAAKtxE,EAAIv1B,EAAIyzB,EAAG,EAC5CmzE,EAAKrxE,EAAIv1B,EAAIqmB,EAAGwgF,EAAKtxE,EAAIv1B,EAAIyzB,EAAG5zB,EAAI01B,EAAIA,EAAI/pB,EAAG,EAC/C,EAAG,EAAG,EAAG,GAIFvI,MAIT6jG,UAAW,SAAWrzE,EAAGpN,EAAGkP,GAW3B,OATAtyB,KAAK0E,IAEJ8rB,EAAG,EAAG,EAAG,EACT,EAAGpN,EAAG,EAAG,EACT,EAAG,EAAGkP,EAAG,EACT,EAAG,EAAG,EAAG,GAIHtyB,MAIR8jG,UAAW,SAAWtzE,EAAGpN,EAAGkP,GAW3B,OATAtyB,KAAK0E,IAEJ,EAAG0e,EAAGkP,EAAG,EACT9B,EAAG,EAAG8B,EAAG,EACT9B,EAAGpN,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIHpjB,MAIR+jG,QAAS,SAAWptF,EAAUw5B,EAAY7T,GAMzC,OAJAt8B,KAAKggG,2BAA4B7vD,GACjCnwC,KAAKs8B,MAAOA,GACZt8B,KAAK2iG,YAAahsF,GAEX3W,MAIRmiC,UAAW,WAEV,IAAIoT,EAAS,IAAI7hB,EACbsZ,EAAS,IAAIrZ,EAEjB,OAAO,SAAoBhd,EAAUw5B,EAAY7T,GAEhD,IAAI86D,EAAKp3F,KAAK4zB,SAEVwpE,EAAK7nD,EAAO7wC,IAAK0yF,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAMz5F,SAC7C2/F,EAAK/nD,EAAO7wC,IAAK0yF,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAMz5F,SAC7C4/F,EAAKhoD,EAAO7wC,IAAK0yF,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAAOz5F,SAGxCqC,KAAKyiG,cACJ,IAAIrF,GAAOA,GAEtBzmF,EAAS6Z,EAAI4mE,EAAI,IACjBzgF,EAASyM,EAAIg0E,EAAI,IACjBzgF,EAAS2b,EAAI8kE,EAAI,IAGjBpqD,EAAOvoC,KAAMzE,MAEb,IAAIgkG,EAAQ,EAAI5G,EACZ6G,EAAQ,EAAI3G,EACZ4G,EAAQ,EAAI3G,EAoBhB,OAlBAvwD,EAAOpZ,SAAU,IAAOowE,EACxBh3D,EAAOpZ,SAAU,IAAOowE,EACxBh3D,EAAOpZ,SAAU,IAAOowE,EAExBh3D,EAAOpZ,SAAU,IAAOqwE,EACxBj3D,EAAOpZ,SAAU,IAAOqwE,EACxBj3D,EAAOpZ,SAAU,IAAOqwE,EAExBj3D,EAAOpZ,SAAU,IAAOswE,EACxBl3D,EAAOpZ,SAAU,IAAOswE,EACxBl3D,EAAOpZ,SAAU,KAAQswE,EAEzB/zD,EAAW8pD,sBAAuBjtD,GAElC1Q,EAAM9L,EAAI4sE,EACV9gE,EAAMlZ,EAAIk6E,EACVhhE,EAAMhK,EAAIirE,EAEHv9F,MA9CE,GAoDXmkG,gBAAiB,SAAWttF,EAAMk6B,EAAOn6B,EAAKo6B,EAAQtP,EAAMC,QAE9C5yB,IAAR4yB,GAEJljC,QAAQ4pC,KAAM,wGAIf,IAAI+uD,EAAKp3F,KAAK4zB,SACVpD,EAAI,EAAIkR,GAASqP,EAAQl6B,GACzBuM,EAAI,EAAIse,GAAS9qB,EAAMo6B,GAEvB9zC,GAAM6zC,EAAQl6B,IAAWk6B,EAAQl6B,GACjCrP,GAAMoP,EAAMo6B,IAAap6B,EAAMo6B,GAC/BzoC,IAAQo5B,EAAMD,IAAWC,EAAMD,GAC/Bre,GAAM,EAAIse,EAAMD,GAASC,EAAMD,GAOnC,OALA01D,EAAI,GAAM5mE,EAAG4mE,EAAI,GAAM,EAAGA,EAAI,GAAMl6F,EAAGk6F,EAAI,IAAO,EAClDA,EAAI,GAAM,EAAGA,EAAI,GAAMh0E,EAAGg0E,EAAI,GAAM5vF,EAAG4vF,EAAI,IAAO,EAClDA,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,IAAO7uF,EAAG6uF,EAAI,IAAO/zE,EACnD+zE,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS,EAAGA,EAAI,IAAO,EAE9Cp3F,MAIRokG,iBAAkB,SAAWvtF,EAAMk6B,EAAOn6B,EAAKo6B,EAAQtP,EAAMC,GAE5D,IAAIy1D,EAAKp3F,KAAK4zB,SACVrB,EAAI,GAAQwe,EAAQl6B,GACpByM,EAAI,GAAQ1M,EAAMo6B,GAClB9sC,EAAI,GAAQy9B,EAAMD,GAElBlR,GAAMugB,EAAQl6B,GAAS0b,EACvBnP,GAAMxM,EAAMo6B,GAAW1tB,EACvBgP,GAAMqP,EAAMD,GAASx9B,EAOzB,OALAkzF,EAAI,GAAM,EAAI7kE,EAAG6kE,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS5mE,EACxD4mE,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAI9zE,EAAG8zE,EAAI,GAAM,EAAGA,EAAI,KAASh0E,EACxDg0E,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS,EAAIlzF,EAAGkzF,EAAI,KAAS9kE,EAC3D8kE,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,IAAO,EAAGA,EAAI,IAAO,EAE5Cp3F,MAIRmwD,OAAQ,SAAWnjB,GAKlB,IAAM,IAHFoqD,EAAKp3F,KAAK4zB,SACV6qE,EAAKzxD,EAAOpZ,SAENx2B,EAAI,EAAGA,EAAI,GAAIA,IAExB,GAAKg6F,EAAIh6F,KAAQqhG,EAAIrhG,GAAM,OAAO,EAInC,OAAO,GAIRw6D,UAAW,SAAWn3C,EAAOoR,QAEZ9iB,IAAX8iB,IAAuBA,EAAS,GAErC,IAAM,IAAIz0B,EAAI,EAAGA,EAAI,GAAIA,IAExB4C,KAAK4zB,SAAUx2B,GAAMqjB,EAAOrjB,EAAIy0B,GAIjC,OAAO7xB,MAIRgsB,QAAS,SAAWvL,EAAOoR,QAEX9iB,IAAV0R,IAAsBA,WACX1R,IAAX8iB,IAAuBA,EAAS,GAErC,IAAIulE,EAAKp3F,KAAK4zB,SAsBd,OApBAnT,EAAOoR,GAAWulE,EAAI,GACtB32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAE1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAE1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,IAAOulE,EAAI,IAC3B32E,EAAOoR,EAAS,IAAOulE,EAAI,IAE3B32E,EAAOoR,EAAS,IAAOulE,EAAI,IAC3B32E,EAAOoR,EAAS,IAAOulE,EAAI,IAC3B32E,EAAOoR,EAAS,IAAOulE,EAAI,IAC3B32E,EAAOoR,EAAS,IAAOulE,EAAI,IAEpB32E,KAyBToT,EAAY11B,UAAYD,OAAOwZ,OAAQ+Y,EAAQtyB,WAC/C01B,EAAY11B,UAAUsJ,YAAcosB,EAEpCA,EAAY11B,UAAUmsD,eAAgB,GAiBtCv2B,EAAY51B,UAAYD,OAAOwZ,OAAQ+Y,EAAQtyB,YACzBsJ,YAAcssB,EAEpCA,EAAY51B,UAAUo6C,eAAgB,EAEtCr6C,OAAOgB,eAAgB60B,EAAY51B,UAAW,UAE7CsC,IAAK,WAEJ,OAAOT,KAAK0wB,OAIbhsB,IAAK,SAAWvF,GAEfa,KAAK0wB,MAAQvxB,KAuDf,IAAIu3B,GAAe,IAAIjG,EACnBoG,GAAmB,IAAI9C,EAevBS,MACAI,MAIA0B,GAAY,IAAI7B,aAAc,IAC9B0B,GAAY,IAAI1B,aAAc,GAgUlC8D,EAAkBp6B,UAAUk6B,SAAW,SAAWrD,EAAI71B,GAOrD,IAAM,IAFFg1B,EAAMn0B,KAAKm0B,IAEL/2B,EAAI,EAAGP,EAAIs3B,EAAIx2B,OAAQP,IAAMP,IAAMO,EAAI,CAEhD,IAAIH,EAAIk3B,EAAK/2B,GACbH,EAAEo7B,SAAUrD,EAAI71B,EAAOlC,EAAEoS,OAU3B,IAAIwpB,GAAa,2BA0FjBK,EAAc/6B,UAAUk6B,SAAW,SAAWrD,EAAI7oB,EAAMhN,GAEvD,IAAIlC,EAAI+C,KAAKqc,IAAKlQ,QAEP4C,IAAN9R,GAAkBA,EAAEo7B,SAAUrD,EAAI71B,EAAOa,KAAK20B,WAIpDuE,EAAc/6B,UAAUqiE,YAAc,SAAWxrC,EAAIsS,EAAQn7B,GAE5D,IAAI/B,EAAIk9B,EAAQn7B,QAEL4C,IAAN3E,GAAkBpK,KAAKq4B,SAAUrD,EAAI7oB,EAAM/B,IAOjD8uB,EAAcspC,OAAS,SAAWxtC,EAAIb,EAAKmsD,EAAQ3rD,GAElD,IAAM,IAAIv3B,EAAI,EAAGP,EAAIs3B,EAAIx2B,OAAQP,IAAMP,IAAMO,EAAI,CAEhD,IAAIH,EAAIk3B,EAAK/2B,GACZgN,EAAIk2E,EAAQrjF,EAAEoS,KAEQ,IAAlBjF,EAAE42B,aAGN/jC,EAAEo7B,SAAUrD,EAAI5qB,EAAEjL,MAAOw1B,KAQ5BuE,EAAcqmC,aAAe,SAAWprC,EAAKmsD,GAI5C,IAAM,IAFFxjF,KAEMM,EAAI,EAAGP,EAAIs3B,EAAIx2B,OAAQP,IAAMP,IAAMO,EAAI,CAEhD,IAAIH,EAAIk3B,EAAK/2B,GACRH,EAAEoS,MAAMixE,GAASxjF,EAAE6J,KAAM1J,GAI/B,OAAOH,GAQR,IAAIunG,IAAkBC,UAAa,SAAUC,aAAgB,SAAUC,KAAQ,MAAUC,WAAc,QAAUC,MAAS,SACzHC,MAAS,SAAUC,OAAU,SAAUC,MAAS,EAAUC,eAAkB,SAAUC,KAAQ,IAAUC,WAAc,QACtHC,MAAS,SAAUC,UAAa,SAAUC,UAAa,QAAUC,WAAc,QAAUC,UAAa,SAAUC,MAAS,SACzHC,eAAkB,QAAUC,SAAY,SAAUC,QAAW,SAAUC,KAAQ,MAAUC,SAAY,IAAUC,SAAY,MAC3HC,cAAiB,SAAUC,SAAY,SAAUC,UAAa,MAAUC,SAAY,SAAUC,UAAa,SAAUC,YAAe,QACpIC,eAAkB,QAAUC,WAAc,SAAUC,WAAc,SAAUC,QAAW,QAAUC,WAAc,SAAUC,aAAgB,QACzIC,cAAiB,QAAUC,cAAiB,QAAUC,cAAiB,QAAUC,cAAiB,MAAUC,WAAc,QAC1HC,SAAY,SAAUC,YAAe,MAAUC,QAAW,QAAUC,QAAW,QAAUC,WAAc,QAAUC,UAAa,SAC9HC,YAAe,SAAUC,YAAe,QAAUC,QAAW,SAAUC,UAAa,SAAUC,WAAc,SAAUC,KAAQ,SAC9HC,UAAa,SAAUC,KAAQ,QAAUC,MAAS,MAAUC,YAAe,SAAUC,KAAQ,QAAUC,SAAY,SAAUC,QAAW,SACxIC,UAAa,SAAUC,OAAU,QAAUC,MAAS,SAAUC,MAAS,SAAUC,SAAY,SAAUC,cAAiB,SAAUC,UAAa,QAC/IC,aAAgB,SAAUC,UAAa,SAAUC,WAAc,SAAUC,UAAa,SAAUC,qBAAwB,SAAUC,UAAa,SAC/IC,WAAc,QAAUC,UAAa,SAAUC,UAAa,SAAUC,YAAe,SAAUC,cAAiB,QAAUC,aAAgB,QAC1IC,eAAkB,QAAUC,eAAkB,QAAUC,eAAkB,SAAUC,YAAe,SAAUC,KAAQ,MAAUC,UAAa,QAC5IC,MAAS,SAAUC,QAAW,SAAUC,OAAU,QAAUC,iBAAoB,QAAUC,WAAc,IAAUC,aAAgB,SAClIC,aAAgB,QAAUC,eAAkB,QAAUC,gBAAmB,QAAUC,kBAAqB,MAAUC,gBAAmB,QACrIC,gBAAmB,SAAUC,aAAgB,QAAUC,UAAa,SAAUC,UAAa,SAAUC,SAAY,SAAUC,YAAe,SAC1IC,KAAQ,IAAUC,QAAW,SAAUC,MAAS,QAAUC,UAAa,QAAUC,OAAU,SAAUC,UAAa,SAAUC,OAAU,SACtIC,cAAiB,SAAUC,UAAa,SAAUC,cAAiB,SAAUC,cAAiB,SAAUC,WAAc,SAAUC,UAAa,SAC7IC,KAAQ,SAAUC,KAAQ,SAAUC,KAAQ,SAAUC,WAAc,SAAUC,OAAU,QAAUC,IAAO,SAAUC,UAAa,SAChIC,UAAa,QAAUC,YAAe,QAAUC,OAAU,SAAUC,WAAc,SAAUC,SAAY,QAAUC,SAAY,SAC9HC,OAAU,SAAUC,OAAU,SAAUC,QAAW,QAAUC,UAAa,QAAUC,UAAa,QAAUC,UAAa,QAAUC,KAAQ,SAC1IC,YAAe,MAAUC,UAAa,QAAUC,IAAO,SAAUC,KAAQ,MAAUC,QAAW,SAAUC,OAAU,SAAUC,UAAa,QACzIC,OAAU,SAAUC,MAAS,SAAUC,MAAS,SAAUC,WAAc,SAAUC,OAAU,SAAUC,YAAe,UAetHtvG,OAAO20F,OAAQp5D,EAAMt7B,WAEpBwzC,SAAS,EAET70C,EAAG,EAAG44B,EAAG,EAAGluB,EAAG,EAEf9C,IAAK,SAAWvF,GAgBf,OAdKA,GAASA,EAAMwyC,QAEnB3xC,KAAKyE,KAAMtF,GAEiB,iBAAVA,EAElBa,KAAKytG,OAAQtuG,GAEe,iBAAVA,GAElBa,KAAK0tG,SAAUvuG,GAITa,MAIR60F,UAAW,SAAWC,GAMrB,OAJA90F,KAAKlD,EAAIg4F,EACT90F,KAAK01B,EAAIo/D,EACT90F,KAAKwH,EAAIstF,EAEF90F,MAIRytG,OAAQ,SAAWzf,GAQlB,OANAA,EAAMtrF,KAAKK,MAAOirF,GAElBhuF,KAAKlD,GAAMkxF,GAAO,GAAK,KAAQ,IAC/BhuF,KAAK01B,GAAMs4D,GAAO,EAAI,KAAQ,IAC9BhuF,KAAKwH,GAAY,IAANwmF,GAAc,IAElBhuF,MAIR05B,OAAQ,SAAW58B,EAAG44B,EAAGluB,GAMxB,OAJAxH,KAAKlD,EAAIA,EACTkD,KAAK01B,EAAIA,EACT11B,KAAKwH,EAAIA,EAEFxH,MAIR2tG,OAAQ,WAEP,SAASC,EAAS1pG,EAAG2yE,EAAGj6E,GAIvB,OAFKA,EAAI,IAAIA,GAAK,GACbA,EAAI,IAAIA,GAAK,GACbA,EAAI,EAAI,EAAWsH,EAAgB,GAAV2yE,EAAI3yE,GAAUtH,EACvCA,EAAI,GAAei6E,EACnBj6E,EAAI,EAAI,EAAWsH,EAAgB,GAAV2yE,EAAI3yE,IAAY,EAAI,EAAItH,GAC/CsH,EAIR,OAAO,SAAiBof,EAAGvmB,EAAGS,GAO7B,GAJA8lB,EAAI6N,GAAMuiE,gBAAiBpwE,EAAG,GAC9BvmB,EAAIo0B,GAAM+oD,MAAOn9E,EAAG,EAAG,GACvBS,EAAI2zB,GAAM+oD,MAAO18E,EAAG,EAAG,GAEZ,IAANT,EAEJiD,KAAKlD,EAAIkD,KAAK01B,EAAI11B,KAAKwH,EAAIhK,MAErB,CAEN,IAAI0G,EAAI1G,GAAK,GAAMA,GAAM,EAAIT,GAAMS,EAAIT,EAAMS,EAAIT,EAC7C85E,EAAM,EAAIr5E,EAAM0G,EAEpBlE,KAAKlD,EAAI8wG,EAAS/2B,EAAG3yE,EAAGof,EAAI,EAAI,GAChCtjB,KAAK01B,EAAIk4E,EAAS/2B,EAAG3yE,EAAGof,GACxBtjB,KAAKwH,EAAIomG,EAAS/2B,EAAG3yE,EAAGof,EAAI,EAAI,GAIjC,OAAOtjB,MAnCD,GAyCR0tG,SAAU,SAAWxkG,GAEpB,SAAS2kG,EAAaztF,QAELrR,IAAXqR,GAEA+C,WAAY/C,GAAW,GAE3B3hB,QAAQ4pC,KAAM,mCAAqCn/B,EAAQ,qBAO7D,IAAIqa,EAEJ,GAAKA,EAAI,kCAAkCL,KAAMha,GAAU,CAI1D,IAAIV,EACA2D,EAAOoX,EAAG,GACVs5B,EAAat5B,EAAG,GAEpB,OAASpX,GAER,IAAK,MACL,IAAK,OAEJ,GAAK3D,EAAQ,gEAAgE0a,KAAM25B,GASlF,OANA78C,KAAKlD,EAAI4F,KAAKN,IAAK,IAAKsH,SAAUlB,EAAO,GAAK,KAAS,IACvDxI,KAAK01B,EAAIhzB,KAAKN,IAAK,IAAKsH,SAAUlB,EAAO,GAAK,KAAS,IACvDxI,KAAKwH,EAAI9E,KAAKN,IAAK,IAAKsH,SAAUlB,EAAO,GAAK,KAAS,IAEvDqlG,EAAarlG,EAAO,IAEbxI,KAIR,GAAKwI,EAAQ,sEAAsE0a,KAAM25B,GASxF,OANA78C,KAAKlD,EAAI4F,KAAKN,IAAK,IAAKsH,SAAUlB,EAAO,GAAK,KAAS,IACvDxI,KAAK01B,EAAIhzB,KAAKN,IAAK,IAAKsH,SAAUlB,EAAO,GAAK,KAAS,IACvDxI,KAAKwH,EAAI9E,KAAKN,IAAK,IAAKsH,SAAUlB,EAAO,GAAK,KAAS,IAEvDqlG,EAAarlG,EAAO,IAEbxI,KAIR,MAED,IAAK,MACL,IAAK,OAEJ,GAAKwI,EAAQ,gFAAgF0a,KAAM25B,GAAe,CAGjH,IAAIv5B,EAAIH,WAAY3a,EAAO,IAAQ,IAC/BzL,EAAI2M,SAAUlB,EAAO,GAAK,IAAO,IACjChL,EAAIkM,SAAUlB,EAAO,GAAK,IAAO,IAIrC,OAFAqlG,EAAarlG,EAAO,IAEbxI,KAAK2tG,OAAQrqF,EAAGvmB,EAAGS,UAQvB,GAAK+lB,EAAI,qBAAqBL,KAAMha,GAAU,CAIpD,IACIzD,GADAuoF,EAAMzqE,EAAG,IACE5lB,OAEf,GAAc,IAAT8H,EAOJ,OAJAzF,KAAKlD,EAAI4M,SAAUskF,EAAIpwE,OAAQ,GAAMowE,EAAIpwE,OAAQ,GAAK,IAAO,IAC7D5d,KAAK01B,EAAIhsB,SAAUskF,EAAIpwE,OAAQ,GAAMowE,EAAIpwE,OAAQ,GAAK,IAAO,IAC7D5d,KAAKwH,EAAIkC,SAAUskF,EAAIpwE,OAAQ,GAAMowE,EAAIpwE,OAAQ,GAAK,IAAO,IAEtD5d,KAED,GAAc,IAATyF,EAOX,OAJAzF,KAAKlD,EAAI4M,SAAUskF,EAAIpwE,OAAQ,GAAMowE,EAAIpwE,OAAQ,GAAK,IAAO,IAC7D5d,KAAK01B,EAAIhsB,SAAUskF,EAAIpwE,OAAQ,GAAMowE,EAAIpwE,OAAQ,GAAK,IAAO,IAC7D5d,KAAKwH,EAAIkC,SAAUskF,EAAIpwE,OAAQ,GAAMowE,EAAIpwE,OAAQ,GAAK,IAAO,IAEtD5d,KAMT,GAAKkJ,GAASA,EAAMvL,OAAS,EAAI,CAGhC,IAAIqwF,EAAMqW,GAAen7F,QAEZ6F,IAARi/E,EAGJhuF,KAAKytG,OAAQzf,GAKbvvF,QAAQ4pC,KAAM,8BAAgCn/B,GAMhD,OAAOlJ,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKlD,EAAGkD,KAAK01B,EAAG11B,KAAKwH,IAInD/C,KAAM,SAAW+D,GAMhB,OAJAxI,KAAKlD,EAAI0L,EAAM1L,EACfkD,KAAK01B,EAAIltB,EAAMktB,EACf11B,KAAKwH,EAAIgB,EAAMhB,EAERxH,MAIR8tG,kBAAmB,SAAWtlG,EAAO43C,GAQpC,YANqBrxC,IAAhBqxC,IAA4BA,EAAc,GAE/CpgD,KAAKlD,EAAI4F,KAAKC,IAAK6F,EAAM1L,EAAGsjD,GAC5BpgD,KAAK01B,EAAIhzB,KAAKC,IAAK6F,EAAMktB,EAAG0qB,GAC5BpgD,KAAKwH,EAAI9E,KAAKC,IAAK6F,EAAMhB,EAAG44C,GAErBpgD,MAIR+tG,kBAAmB,SAAWvlG,EAAO43C,QAEfrxC,IAAhBqxC,IAA4BA,EAAc,GAE/C,IAAI4tD,EAAgB5tD,EAAc,EAAQ,EAAMA,EAAgB,EAMhE,OAJApgD,KAAKlD,EAAI4F,KAAKC,IAAK6F,EAAM1L,EAAGkxG,GAC5BhuG,KAAK01B,EAAIhzB,KAAKC,IAAK6F,EAAMktB,EAAGs4E,GAC5BhuG,KAAKwH,EAAI9E,KAAKC,IAAK6F,EAAMhB,EAAGwmG,GAErBhuG,MAIRiuG,qBAAsB,WAErB,IAAInxG,EAAIkD,KAAKlD,EAAG44B,EAAI11B,KAAK01B,EAAGluB,EAAIxH,KAAKwH,EAMrC,OAJAxH,KAAKlD,EAAIA,EAAIA,EACbkD,KAAK01B,EAAIA,EAAIA,EACb11B,KAAKwH,EAAIA,EAAIA,EAENxH,MAIRkuG,qBAAsB,WAMrB,OAJAluG,KAAKlD,EAAI4F,KAAKg+D,KAAM1gE,KAAKlD,GACzBkD,KAAK01B,EAAIhzB,KAAKg+D,KAAM1gE,KAAK01B,GACzB11B,KAAKwH,EAAI9E,KAAKg+D,KAAM1gE,KAAKwH,GAElBxH,MAIRmuG,OAAQ,WAEP,OAAkB,IAATnuG,KAAKlD,GAAa,GAAgB,IAATkD,KAAK01B,GAAa,EAAe,IAAT11B,KAAKwH,GAAa,GAI7E4mG,aAAc,WAEb,OAAS,SAAWpuG,KAAKmuG,SAASzvF,SAAU,KAAOhd,OAAS,IAI7D2sG,OAAQ,SAAWC,GAIlB,IAOIC,EAAKC,EAPLC,EAAMH,IAAoBhrF,EAAG,EAAGvmB,EAAG,EAAGS,EAAG,GAEzCV,EAAIkD,KAAKlD,EAAG44B,EAAI11B,KAAK01B,EAAGluB,EAAIxH,KAAKwH,EAEjCnF,EAAMK,KAAKL,IAAKvF,EAAG44B,EAAGluB,GACtBpF,EAAMM,KAAKN,IAAKtF,EAAG44B,EAAGluB,GAGtBknG,GAActsG,EAAMC,GAAQ,EAEhC,GAAKD,IAAQC,EAEZksG,EAAM,EACNC,EAAa,MAEP,CAEN,IAAIG,EAAQtsG,EAAMD,EAIlB,OAFAosG,EAAaE,GAAa,GAAMC,GAAUtsG,EAAMD,GAAQusG,GAAU,EAAItsG,EAAMD,GAEnEC,GAER,KAAKvF,EAAGyxG,GAAQ74E,EAAIluB,GAAMmnG,GAAUj5E,EAAIluB,EAAI,EAAI,GAAK,MACrD,KAAKkuB,EAAG64E,GAAQ/mG,EAAI1K,GAAM6xG,EAAQ,EAAG,MACrC,KAAKnnG,EAAG+mG,GAAQzxG,EAAI44B,GAAMi5E,EAAQ,EAInCJ,GAAO,EAQR,OAJAE,EAAInrF,EAAIirF,EACRE,EAAI1xG,EAAIyxG,EACRC,EAAIjxG,EAAIkxG,EAEDD,GAIRG,SAAU,WAET,MAAO,QAAsB,IAAT5uG,KAAKlD,EAAY,GAAM,KAAmB,IAATkD,KAAK01B,EAAY,GAAM,KAAmB,IAAT11B,KAAKwH,EAAY,GAAM,KAI9GqnG,UAAW,SAAWvrF,EAAGvmB,EAAGS,GAE3B,IAAIixG,EAAMzuG,KAAKquG,SAMf,OAJAI,EAAInrF,GAAKA,EAAGmrF,EAAI1xG,GAAKA,EAAG0xG,EAAIjxG,GAAKA,EAEjCwC,KAAK2tG,OAAQc,EAAInrF,EAAGmrF,EAAI1xG,EAAG0xG,EAAIjxG,GAExBwC,MAIRyqB,IAAK,SAAWjiB,GAMf,OAJAxI,KAAKlD,GAAK0L,EAAM1L,EAChBkD,KAAK01B,GAAKltB,EAAMktB,EAChB11B,KAAKwH,GAAKgB,EAAMhB,EAETxH,MAIR8uG,UAAW,SAAWpgB,EAAQC,GAM7B,OAJA3uF,KAAKlD,EAAI4xF,EAAO5xF,EAAI6xF,EAAO7xF,EAC3BkD,KAAK01B,EAAIg5D,EAAOh5D,EAAIi5D,EAAOj5D,EAC3B11B,KAAKwH,EAAIknF,EAAOlnF,EAAImnF,EAAOnnF,EAEpBxH,MAIRm1F,UAAW,SAAWp4F,GAMrB,OAJAiD,KAAKlD,GAAKC,EACViD,KAAK01B,GAAK34B,EACViD,KAAKwH,GAAKzK,EAEHiD,MAIRwkE,IAAK,SAAUh8D,GAMd,OAJAxI,KAAKlD,EAAI4F,KAAKL,IAAK,EAAGrC,KAAKlD,EAAI0L,EAAM1L,GACrCkD,KAAK01B,EAAIhzB,KAAKL,IAAK,EAAGrC,KAAK01B,EAAIltB,EAAMktB,GACrC11B,KAAKwH,EAAI9E,KAAKL,IAAK,EAAGrC,KAAKwH,EAAIgB,EAAMhB,GAE9BxH,MAIRqtC,SAAU,SAAW7kC,GAMpB,OAJAxI,KAAKlD,GAAK0L,EAAM1L,EAChBkD,KAAK01B,GAAKltB,EAAMktB,EAChB11B,KAAKwH,GAAKgB,EAAMhB,EAETxH,MAIR86D,eAAgB,SAAW/9D,GAM1B,OAJAiD,KAAKlD,GAAKC,EACViD,KAAK01B,GAAK34B,EACViD,KAAKwH,GAAKzK,EAEHiD,MAIRqzE,KAAM,SAAW7qE,EAAOmvC,GAMvB,OAJA33C,KAAKlD,IAAO0L,EAAM1L,EAAIkD,KAAKlD,GAAM66C,EACjC33C,KAAK01B,IAAOltB,EAAMktB,EAAI11B,KAAK01B,GAAMiiB,EACjC33C,KAAKwH,IAAOgB,EAAMhB,EAAIxH,KAAKwH,GAAMmwC,EAE1B33C,MAIRmwD,OAAQ,SAAW5nD,GAElB,OAASA,EAAEzL,IAAMkD,KAAKlD,GAASyL,EAAEmtB,IAAM11B,KAAK01B,GAASntB,EAAEf,IAAMxH,KAAKwH,GAInEowD,UAAW,SAAWn3C,EAAOoR,GAQ5B,YANgB9iB,IAAX8iB,IAAuBA,EAAS,GAErC7xB,KAAKlD,EAAI2jB,EAAOoR,GAChB7xB,KAAK01B,EAAIjV,EAAOoR,EAAS,GACzB7xB,KAAKwH,EAAIiZ,EAAOoR,EAAS,GAElB7xB,MAIRgsB,QAAS,SAAWvL,EAAOoR,GAS1B,YAPe9iB,IAAV0R,IAAsBA,WACX1R,IAAX8iB,IAAuBA,EAAS,GAErCpR,EAAOoR,GAAW7xB,KAAKlD,EACvB2jB,EAAOoR,EAAS,GAAM7xB,KAAK01B,EAC3BjV,EAAOoR,EAAS,GAAM7xB,KAAKwH,EAEpBiZ,GAIRiC,OAAQ,WAEP,OAAO1iB,KAAKmuG,YAUd,IAAI/rC,IAEH2sC,QAECtsC,SAAWtjE,MAAO,IAAIs6B,EAAO,WAC7B4C,SAAWl9B,MAAO,GAElBkd,KAAOld,MAAO,MACd0jE,cAAgB1jE,MAAO,IAAIkzB,EAAS,EAAG,EAAG,EAAG,IAE7CmkB,aAAer3C,MAAO,MACtBymC,UAAYzmC,MAAO,MAEnBs3C,QAAUt3C,MAAO,MACjB2jE,YAAc3jE,OAAS,GACvBy3C,cAAgBz3C,MAAO,GACvB03C,iBAAmB13C,MAAO,MAI3B6vG,OAEC14D,OAASn3C,MAAO,MAChBo3C,gBAAkBp3C,MAAO,IAI1B8vG,UAEC74D,UAAYj3C,MAAO,MACnBk3C,mBAAqBl3C,MAAO,IAI7B+vG,aAECtuD,aAAezhD,MAAO,OAIvBgwG,SAEC1xD,SAAWt+C,MAAO,MAClBikE,WAAajkE,MAAO,IAIrBiwG,WAEC1xD,WAAav+C,MAAO,MACpBkkE,aAAelkE,MAAO,IAAIoxB,EAAS,EAAG,KAIvC8+E,iBAECxpE,iBAAmB1mC,MAAO,MAC1B2mC,mBAAqB3mC,MAAO,GAC5B4mC,kBAAoB5mC,MAAO,IAI5BmwG,cAECzuD,cAAgB1hD,MAAO,OAIxBowG,cAECzuD,cAAgB3hD,MAAO,OAIxBqwG,aAECnuD,aAAeliD,MAAO,OAIvBqiC,KAEClB,YAAcnhC,MAAO,OACrBohC,SAAWphC,MAAO,GAClBqhC,QAAUrhC,MAAO,KACjBshC,UAAYthC,MAAO,IAAIs6B,EAAO,YAI/BqJ,QAEC07B,mBAAqBr/D,UAErBu/D,mBAAqBv/D,SAAWmnD,YAC/BpP,aACA1uC,SAEA+jC,UACAwO,cACAC,gBACAC,mBAGD8jB,sBAAwB5/D,UACxB6/D,yBAA2B7/D,UAE3Bw/D,YAAcx/D,SAAWmnD,YACxB99C,SACAmO,YACAugC,aACAgE,YACAC,WACAC,eACAC,SAEA9O,UACAwO,cACAC,gBACAC,mBAGDgkB,eAAiB9/D,UACjB+/D,kBAAoB//D,UAEpB0/D,aAAe1/D,SAAWmnD,YACzB99C,SACAmO,YACA0kC,SACAH,YAEA3O,UACAwO,cACAC,gBACAC,mBAGDkkB,gBAAkBhgE,UAClBigE,mBAAqBjgE,UAErB2/D,kBAAoB3/D,SAAWmnD,YAC9BpP,aACAoE,YACAC,iBAIDqjB,gBAAkBz/D,SAAWmnD,YAC5B99C,SACAmO,YACA8b,SACAC,aAKFg4C,QAECjI,SAAWtjE,MAAO,IAAIs6B,EAAO,WAC7B4C,SAAWl9B,MAAO,GAClBsG,MAAQtG,MAAO,GACfm9B,OAASn9B,MAAO,GAChBkd,KAAOld,MAAO,MACd0jE,cAAgB1jE,MAAO,IAAIkzB,EAAS,EAAG,EAAG,EAAG,MAU3CwZ,IAEHwxC,MAAO,SAAWnhD,GAIjB,IAAM,IAFFuzE,KAEMxyG,EAAI,EAAGA,EAAIi/B,EAASv+B,OAAQV,IAAO,CAE5C,IAAI+kB,EAAMhiB,KAAK4P,MAAOssB,EAAUj/B,IAEhC,IAAM,IAAIiH,KAAK8d,EAEdytF,EAAQvrG,GAAM8d,EAAK9d,GAMrB,OAAOurG,GAIR7/F,MAAO,SAAW8/F,GAEjB,IAAIC,KAEJ,IAAM,IAAI1yG,KAAKyyG,EAAe,CAE7BC,EAAc1yG,MAEd,IAAM,IAAIiH,KAAKwrG,EAAczyG,GAAM,CAElC,IAAI2yG,EAAgBF,EAAczyG,GAAKiH,GAElC0rG,IAAmBA,EAAcj+D,SACrCi+D,EAAcC,WAAaD,EAAcpS,WACzCoS,EAAchb,WAAagb,EAAcn+D,WAAam+D,EAAc9Y,WACpE8Y,EAAcj3D,WAEdg3D,EAAc1yG,GAAKiH,GAAM0rG,EAAchgG,QAE5BvE,MAAMgX,QAASutF,GAE1BD,EAAc1yG,GAAKiH,GAAM0rG,EAAcluG,QAIvCiuG,EAAc1yG,GAAKiH,GAAM0rG,GAQ5B,OAAOD,IAkOL7wD,IACHgxD,kBA7NuB,mFA8NvBC,uBA5N4B,+DA6N5BC,mBA3NwB,2EA4NxBC,eA1NoB,6aA2NpBC,oBAzNyB,wFA0NzBC,aAxNkB,2CAyNlBC,mBAvNwB,0CAwNxBC,MAtNW,27LAuNXC,sBArN2B,65BAsN3BC,yBApN8B,ghBAqN9BC,8BAnNmC,6LAoNnCC,4BAlNiC,sHAmNjCC,uBAjN4B,4HAkN5BC,eAhNoB,0DAiNpBC,oBA/MyB,qDAgNzBC,kBA9MuB,mDA+MvBC,aA7MkB,sDA8MlB/B,OA5MY,sgEA6MZgC,4BA3MiC,qlIA4MjCC,qBA1M0B,iIA2M1BC,4BAzMiC,oJA0MjCC,uBAxM4B,oKAyM5BC,qBAvM0B,+MAwM1BC,0BAtM+B,qEAuM/BC,mBArMwB,0DAsMxBC,wBApM6B,gvFAqM7BC,gBAnMqB,unDAoMrBC,qBAlM0B,mnBAmM1BC,mBAjMwB,iOAkMxBC,cAhMmB,ugBAiMnBC,WA/LgB,sDAgMhBC,gBA9LqB,sDA+LrBC,aA7LkB,+SA8LlBC,kBA5LuB,4MA6LvBC,0BA3L+B,0YA4L/BC,kBA1LuB,+HA2LvBC,uBAzL4B,iGA0L5BC,sBAxL2B,6oEAyL3BC,YAvLiB,o9NAwLjBC,sBAtL2B,wMAuL3BC,2BArLgC,66CAsLhCC,yBApL8B,8iBAqL9BC,8BAnLmC,gqJAoLnCC,gBAlLqB,07GAmLrBC,qBAjL0B,oIAkL1BC,0BAhL+B,0IAiL/BC,wBA/K6B,wIAgL7BC,mBA9KwB,qQA+KxBC,aA7KkB,sJA8KlBC,kBA5KuB,qDA6KvBC,sBA3K2B,qMA4K3BC,2BA1KgC,mFA2KhCC,sBAzK2B,yKA0K3BC,2BAxKgC,qEAyKhCC,mBAvKwB,gVAwKxBC,wBAtK6B,2KAuK7BC,mBArKwB,0qBAsKxBC,YApKiB,iIAqKjBC,gBAnKqB,ugBAoKrBC,wBAlK6B,wrBAmK7BC,QAjKa,qyCAkKbC,6BAhKkC,8EAiKlCC,eA/JoB,gHAgKpBC,mBA9JwB,0FA+JxBC,wBA7J6B,qVA8J7BC,sBA5J2B,yKA6J3BC,2BA3JgC,qEA4JhCC,wBA1J6B,wiNA2J7BC,sBAzJ2B,0eA0J3BC,iBAxJsB,ihBAyJtBC,yBAvJ8B,8oCAwJ9BC,gBAtJqB,kOAuJrBC,qBArJ0B,4gCAsJ1BC,gBApJqB,iYAqJrBC,kBAnJuB,8WAoJvBC,qBAlJ0B,0LAmJ1BC,0BAjJ+B,mEAkJ/BC,qBAhJ0B,+FAiJ1BC,0BA/I+B,o5BAgJ/BC,iBA9IsB,iQA+ItBC,eA7IoB,iSA8IpBC,UA5Ie,6RA6IfC,kBA3IuB,oFA4IvBC,gBA1IqB,2GA2IrBC,WAzIgB,6EA0IhBC,gBAxIqB,oMA0IrBC,UAxIe,2QAyIfC,UAvIe,+LAwIfC,WAtIgB,ivBAuIhBC,WArIgB,oqBAsIhBC,kBApIuB,+RAqIvBC,kBAnIuB,8aAoIvBC,cAlImB,wXAmInBC,cAjImB,+LAkInBC,gBAhIqB,qyBAiIrBC,gBA/HqB,khBAgIrBC,eA9HoB,k+CA+HpBC,eA7HoB,u2BA8HpBC,iBA5HsB,6mEA6HtBC,iBA3HsB,4jCA4HtBC,eA1HoB,05DA2HpBC,eAzHoB,uqCA0HpBC,kBAxHuB,ooEAyHvBC,kBAvHuB,+mCAwHvBC,YAtHiB,kiBAuHjBC,YArHiB,i8BAsHjBC,YApHiB,8yBAqHjBC,YAnHiB,4mBAoHjBC,YAlHiB,qRAmHjBC,YAjHiB,6KA0Hd/qE,IAEHluB,OAECye,SAAU2P,GAAcwxC,OACvBjb,GAAY2sC,OACZ3sC,GAAY4sC,MACZ5sC,GAAY6sC,SACZ7sC,GAAY5gC,MAGb7F,aAAcmjB,GAAYg3D,eAC1Bl6E,eAAgBkjB,GAAY+2D,gBAI7Bc,SAECz6E,SAAU2P,GAAcwxC,OACvBjb,GAAY2sC,OACZ3sC,GAAY4sC,MACZ5sC,GAAY6sC,SACZ7sC,GAAY8sC,YACZ9sC,GAAY5gC,IACZ4gC,GAAYt/B,QAEX4/B,UAAYvjE,MAAO,IAAIs6B,EAAO,OAIhCkC,aAAcmjB,GAAYk3D,iBAC1Bp6E,eAAgBkjB,GAAYi3D,kBAI7Ba,OAEC16E,SAAU2P,GAAcwxC,OACvBjb,GAAY2sC,OACZ3sC,GAAY4sC,MACZ5sC,GAAY6sC,SACZ7sC,GAAY8sC,YACZ9sC,GAAY+sC,QACZ/sC,GAAYgtC,UACZhtC,GAAYitC,gBACZjtC,GAAYotC,YACZptC,GAAY5gC,IACZ4gC,GAAYt/B,QAEX4/B,UAAYvjE,MAAO,IAAIs6B,EAAO,IAC9BypC,UAAY/jE,MAAO,IAAIs6B,EAAO,UAC9B0pC,WAAahkE,MAAO,OAItBw8B,aAAcmjB,GAAYo3D,eAC1Bt6E,eAAgBkjB,GAAYm3D,gBAI7BY,UAEC36E,SAAU2P,GAAcwxC,OACvBjb,GAAY2sC,OACZ3sC,GAAY4sC,MACZ5sC,GAAY6sC,SACZ7sC,GAAY8sC,YACZ9sC,GAAY+sC,QACZ/sC,GAAYgtC,UACZhtC,GAAYitC,gBACZjtC,GAAYktC,aACZltC,GAAYmtC,aACZntC,GAAY5gC,IACZ4gC,GAAYt/B,QAEX4/B,UAAYvjE,MAAO,IAAIs6B,EAAO,IAC9B6pC,WAAankE,MAAO,IACpBokE,WAAapkE,MAAO,IACpBqkE,iBAAmBrkE,MAAO,MAI5Bw8B,aAAcmjB,GAAYs3D,kBAC1Bx6E,eAAgBkjB,GAAYq3D,mBAI7BzrC,QAECxuC,SAAU2P,GAAcwxC,OACvBjb,GAAYsI,OACZtI,GAAY5gC,MAGb7F,aAAcmjB,GAAY03D,YAC1B56E,eAAgBkjB,GAAYy3D,aAI7BO,QAEC56E,SAAU2P,GAAcwxC,OACvBjb,GAAY2sC,OACZ3sC,GAAY5gC,KAEXlF,OAASn9B,MAAO,GAChB4jE,UAAY5jE,MAAO,GACnB6jE,WAAa7jE,MAAO,MAItBw8B,aAAcmjB,GAAY82D,gBAC1Bh6E,eAAgBkjB,GAAY62D,iBAI7Bx3E,OAECjC,SAAU2P,GAAcwxC,OACvBjb,GAAY2sC,OACZ3sC,GAAYitC,kBAGb1zE,aAAcmjB,GAAYw2D,WAC1B15E,eAAgBkjB,GAAYu2D,YAI7B/uE,QAECpK,SAAU2P,GAAcwxC,OACvBjb,GAAY2sC,OACZ3sC,GAAY+sC,QACZ/sC,GAAYgtC,UACZhtC,GAAYitC,iBAEXhzE,SAAWl9B,MAAO,MAIpBw8B,aAAcmjB,GAAYw3D,YAC1B16E,eAAgBkjB,GAAYu3D,aAQ7B79D,MAECtc,UACC66E,OAAS53G,MAAO,MAChB63G,OAAS73G,OAAS,GAClBk9B,SAAWl9B,MAAO,IAGnBw8B,aAAcmjB,GAAYs2D,UAC1Bx5E,eAAgBkjB,GAAYq2D,WAQ7B8B,UAEC/6E,UACCg7E,WAAa/3G,MAAO,MACpB63G,OAAS73G,OAAS,IAGnBw8B,aAAcmjB,GAAY42D,cAC1B95E,eAAgBkjB,GAAY22D,eAI7B0B,cAECj7E,UACCmN,UAAYlqC,MAAO,IAAIu0B,IAGxBiI,aAAcmjB,GAAY02D,kBAC1B55E,eAAgBkjB,GAAYy2D,oBAM9B5pE,GAAUyrE,UAETl7E,SAAU2P,GAAcwxC,OACvB1xC,GAAUkrE,SAAS36E,UAElBunC,WAAatkE,MAAO,GACpBukE,oBAAsBvkE,MAAO,MAI/Bw8B,aAAcmjB,GAAYs3D,kBAC1Bx6E,eAAgBkjB,GAAYq3D,mBAe7Bj4G,OAAO20F,OAAQl5D,EAAKx7B,WAEnBuG,IAAK,SAAWtC,EAAKC,GAKpB,OAHArC,KAAKoC,IAAIqC,KAAMrC,GACfpC,KAAKqC,IAAIoC,KAAMpC,GAERrC,MAIRq3G,cAAe,SAAW3sC,GAEzB1qE,KAAKs3G,YAEL,IAAM,IAAIl6G,EAAI,EAAGivC,EAAKq+B,EAAO/sE,OAAQP,EAAIivC,EAAIjvC,IAE5C4C,KAAKu3G,cAAe7sC,EAAQttE,IAI7B,OAAO4C,MAIRw3G,qBAAsB,WAErB,IAAIl1B,EAAK,IAAI/xD,EAEb,OAAO,SAA+B2V,EAAQzgC,GAE7C,IAAI8pF,EAAWjN,EAAG79E,KAAMgB,GAAOq1D,eAAgB,IAI/C,OAHA96D,KAAKoC,IAAIqC,KAAMyhC,GAASs+B,IAAK+qB,GAC7BvvF,KAAKqC,IAAIoC,KAAMyhC,GAASzb,IAAK8kE,GAEtBvvF,MAVa,GAgBtB4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWgzG,GAKhB,OAHAz3G,KAAKoC,IAAIqC,KAAMgzG,EAAIr1G,KACnBpC,KAAKqC,IAAIoC,KAAMgzG,EAAIp1G,KAEZrC,MAIRs3G,UAAW,WAKV,OAHAt3G,KAAKoC,IAAIouB,EAAIxwB,KAAKoC,IAAIghB,EAAM+E,EAAAA,EAC5BnoB,KAAKqC,IAAImuB,EAAIxwB,KAAKqC,IAAI+gB,GAAM+E,EAAAA,EAErBnoB,MAIR03G,QAAS,WAIR,OAAS13G,KAAKqC,IAAImuB,EAAIxwB,KAAKoC,IAAIouB,GAASxwB,KAAKqC,IAAI+gB,EAAIpjB,KAAKoC,IAAIghB,GAI/Du0F,UAAW,SAAWrJ,GAErB,IAAIptG,EAASotG,GAAkB,IAAI/9E,EACnC,OAAOvwB,KAAK03G,UAAYx2G,EAAOwD,IAAK,EAAG,GAAMxD,EAAOs2E,WAAYx3E,KAAKoC,IAAKpC,KAAKqC,KAAMy4D,eAAgB,KAItG5D,QAAS,SAAWo3C,GAEnB,IAAIptG,EAASotG,GAAkB,IAAI/9E,EACnC,OAAOvwB,KAAK03G,UAAYx2G,EAAOwD,IAAK,EAAG,GAAMxD,EAAO2xE,WAAY7yE,KAAKqC,IAAKrC,KAAKoC,MAIhFm1G,cAAe,SAAW5xD,GAKzB,OAHA3lD,KAAKoC,IAAIA,IAAKujD,GACd3lD,KAAKqC,IAAIA,IAAKsjD,GAEP3lD,MAIR43G,eAAgB,SAAWriE,GAK1B,OAHAv1C,KAAKoC,IAAIoiE,IAAKjvB,GACdv1C,KAAKqC,IAAIooB,IAAK8qB,GAEPv1C,MAIR63G,eAAgB,SAAW/iB,GAK1B,OAHA90F,KAAKoC,IAAI+yF,WAAaL,GACtB90F,KAAKqC,IAAI8yF,UAAWL,GAEb90F,MAIR0+B,cAAe,SAAWinB,GAEzB,QAAOA,EAAMn1B,EAAIxwB,KAAKoC,IAAIouB,GAAKm1B,EAAMn1B,EAAIxwB,KAAKqC,IAAImuB,GACjDm1B,EAAMviC,EAAIpjB,KAAKoC,IAAIghB,GAAKuiC,EAAMviC,EAAIpjB,KAAKqC,IAAI+gB,IAI7C00F,YAAa,SAAWL,GAEvB,OAAOz3G,KAAKoC,IAAIouB,GAAKinF,EAAIr1G,IAAIouB,GAAKinF,EAAIp1G,IAAImuB,GAAKxwB,KAAKqC,IAAImuB,GACvDxwB,KAAKoC,IAAIghB,GAAKq0F,EAAIr1G,IAAIghB,GAAKq0F,EAAIp1G,IAAI+gB,GAAKpjB,KAAKqC,IAAI+gB,GAInD0vC,aAAc,SAAWnN,EAAO2oD,GAO/B,OAFaA,GAAkB,IAAI/9E,GAErB7rB,KACXihD,EAAMn1B,EAAIxwB,KAAKoC,IAAIouB,IAAQxwB,KAAKqC,IAAImuB,EAAIxwB,KAAKoC,IAAIouB,IACjDm1B,EAAMviC,EAAIpjB,KAAKoC,IAAIghB,IAAQpjB,KAAKqC,IAAI+gB,EAAIpjB,KAAKoC,IAAIghB,KAKrD20F,cAAe,SAAWN,GAIzB,QAAOA,EAAIp1G,IAAImuB,EAAIxwB,KAAKoC,IAAIouB,GAAKinF,EAAIr1G,IAAIouB,EAAIxwB,KAAKqC,IAAImuB,GACrDinF,EAAIp1G,IAAI+gB,EAAIpjB,KAAKoC,IAAIghB,GAAKq0F,EAAIr1G,IAAIghB,EAAIpjB,KAAKqC,IAAI+gB,IAIjD40F,WAAY,SAAWryD,EAAO2oD,GAG7B,OADaA,GAAkB,IAAI/9E,GACrB9rB,KAAMkhD,GAAQu0B,MAAOl6E,KAAKoC,IAAKpC,KAAKqC,MAInD41G,gBAAiB,WAEhB,IAAI31B,EAAK,IAAI/xD,EAEb,OAAO,SAA0Bo1B,GAGhC,OADmB28B,EAAG79E,KAAMkhD,GAAQu0B,MAAOl6E,KAAKoC,IAAKpC,KAAKqC,KACtCmiE,IAAK7e,GAAQhoD,UAPlB,GAajBu6G,UAAW,SAAWT,GAKrB,OAHAz3G,KAAKoC,IAAIC,IAAKo1G,EAAIr1G,KAClBpC,KAAKqC,IAAID,IAAKq1G,EAAIp1G,KAEXrC,MAIRm4G,MAAO,SAAWV,GAKjB,OAHAz3G,KAAKoC,IAAIA,IAAKq1G,EAAIr1G,KAClBpC,KAAKqC,IAAIA,IAAKo1G,EAAIp1G,KAEXrC,MAIR6wF,UAAW,SAAWh/D,GAKrB,OAHA7xB,KAAKoC,IAAIqoB,IAAKoH,GACd7xB,KAAKqC,IAAIooB,IAAKoH,GAEP7xB,MAIRmwD,OAAQ,SAAWsnD,GAElB,OAAOA,EAAIr1G,IAAI+tD,OAAQnwD,KAAKoC,MAASq1G,EAAIp1G,IAAI8tD,OAAQnwD,KAAKqC,QAwwB5D,IAAIwgC,GAAa,EA0DjB3kC,OAAO20F,OAAQjwD,EAASzkC,UAAWmyB,EAAgBnyB,WAElDi6G,YAAY,EAEZpyD,gBAAiB,aAEjBxgB,UAAW,SAAW86C,GAErB,QAAgBvxE,IAAXuxE,EAEL,IAAM,IAAIriF,KAAOqiF,EAAS,CAEzB,IAAI+3B,EAAW/3B,EAAQriF,GAEvB,QAAkB8Q,IAAbspG,EAAL,CAOA,IAAIC,EAAet4G,KAAM/B,QAEH8Q,IAAjBupG,EAOAA,GAAgBA,EAAa3mE,QAEjC2mE,EAAa5zG,IAAK2zG,GAELC,GAAgBA,EAAa7mE,WAAiB4mE,GAAYA,EAAS5mE,UAEhF6mE,EAAa7zG,KAAM4zG,GAKnBr4G,KAAM/B,GAHa,aAARA,EAGG4b,OAAQw+F,GAIRA,EApBd55G,QAAQ4pC,KAAM,SAAWroC,KAAKkF,KAAO,MAAQjH,EAAM,8CATnDQ,QAAQ4pC,KAAM,oBAAsBpqC,EAAM,+BAqC7CykB,OAAQ,SAAW6zE,GA4GlB,SAASgiB,EAAkBjxF,GAE1B,IAAIg5D,KAEJ,IAAM,IAAIriF,KAAOqpB,EAAQ,CAExB,IAAI9mB,EAAO8mB,EAAOrpB,UACXuC,EAAKg2F,SACZlW,EAAO35E,KAAMnG,GAId,OAAO8/E,EAtHR,IAAIk4B,OAAkBzpG,IAATwnF,EAERiiB,IAEJjiB,GACC/uC,YACAxzB,YAKF,IAAIxzB,GACHg2F,UACC30E,QAAS,IACT3c,KAAM,WACNuxF,UAAW,oBA2Gb,GAtGAj2F,EAAK0wB,KAAOlxB,KAAKkxB,KACjB1wB,EAAK0E,KAAOlF,KAAKkF,KAEE,KAAdlF,KAAKmM,OAAc3L,EAAK2L,KAAOnM,KAAKmM,MAEpCnM,KAAKwI,OAASxI,KAAKwI,MAAMmpC,UAAUnxC,EAAKgI,MAAQxI,KAAKwI,MAAM2lG,eAExCp/F,IAAnB/O,KAAKsjE,YAA0B9iE,EAAK8iE,UAAYtjE,KAAKsjE,gBAClCv0D,IAAnB/O,KAAKujE,YAA0B/iE,EAAK+iE,UAAYvjE,KAAKujE,WAErDvjE,KAAK0iE,UAAY1iE,KAAK0iE,SAAS/wB,UAAUnxC,EAAKkiE,SAAW1iE,KAAK0iE,SAASyrC,UACvEnuG,KAAKkjE,UAAYljE,KAAKkjE,SAASvxB,UAAUnxC,EAAK0iE,SAAWljE,KAAKkjE,SAASirC,eACpDp/F,IAAnB/O,KAAKmjE,YAA0B3iE,EAAK2iE,UAAYnjE,KAAKmjE,gBAClCp0D,IAAnB/O,KAAKyjE,YAA0BjjE,EAAKijE,UAAYzjE,KAAKyjE,gBACzB10D,IAA5B/O,KAAK0jE,qBAAmCljE,EAAKkjE,mBAAqB1jE,KAAK0jE,oBAEvE1jE,KAAKqc,KAAOrc,KAAKqc,IAAIs8B,YAAYn4C,EAAK6b,IAAMrc,KAAKqc,IAAIqG,OAAQ6zE,GAAOrlE,MACpElxB,KAAK4lC,UAAY5lC,KAAK4lC,SAAS+S,YAAYn4C,EAAKolC,SAAW5lC,KAAK4lC,SAASljB,OAAQ6zE,GAAOrlE,MACxFlxB,KAAKo2C,UAAYp2C,KAAKo2C,SAASuC,YAAYn4C,EAAK41C,SAAWp2C,KAAKo2C,SAAS1zB,OAAQ6zE,GAAOrlE,MACxFlxB,KAAKy9C,SAAWz9C,KAAKy9C,QAAQ9E,YAEjCn4C,EAAKi9C,QAAUz9C,KAAKy9C,QAAQ/6B,OAAQ6zE,GAAOrlE,KAC3C1wB,EAAK4iE,UAAYpjE,KAAKojE,WAGlBpjE,KAAK09C,WAAa19C,KAAK09C,UAAU/E,YAErCn4C,EAAKk9C,UAAY19C,KAAK09C,UAAUh7B,OAAQ6zE,GAAOrlE,KAC/C1wB,EAAK6iE,YAAcrjE,KAAKqjE,YAAYr3C,WAGhChsB,KAAK6lC,iBAAmB7lC,KAAK6lC,gBAAgB8S,YAEjDn4C,EAAKqlC,gBAAkB7lC,KAAK6lC,gBAAgBnjB,OAAQ6zE,GAAOrlE,KAC3D1wB,EAAKslC,kBAAoB9lC,KAAK8lC,kBAC9BtlC,EAAKulC,iBAAmB/lC,KAAK+lC,kBAGzB/lC,KAAK6gD,cAAgB7gD,KAAK6gD,aAAalI,YAAYn4C,EAAKqgD,aAAe7gD,KAAK6gD,aAAan+B,OAAQ6zE,GAAOrlE,MACxGlxB,KAAK8gD,cAAgB9gD,KAAK8gD,aAAanI,YAAYn4C,EAAKsgD,aAAe9gD,KAAK8gD,aAAap+B,OAAQ6zE,GAAOrlE,MAExGlxB,KAAK4gD,aAAe5gD,KAAK4gD,YAAYjI,YAAYn4C,EAAKogD,YAAc5gD,KAAK4gD,YAAYl+B,OAAQ6zE,GAAOrlE,MACpGlxB,KAAKw2C,aAAex2C,KAAKw2C,YAAYmC,YAAYn4C,EAAKg2C,YAAcx2C,KAAKw2C,YAAY9zB,OAAQ6zE,GAAOrlE,MAEpGlxB,KAAKy2C,QAAUz2C,KAAKy2C,OAAOkC,YAE/Bn4C,EAAKi2C,OAASz2C,KAAKy2C,OAAO/zB,OAAQ6zE,GAAOrlE,KACzC1wB,EAAKo2C,aAAe52C,KAAK42C,cAIrB52C,KAAKqhD,aAAerhD,KAAKqhD,YAAY1I,YAEzCn4C,EAAK6gD,YAAcrhD,KAAKqhD,YAAY3+B,OAAQ6zE,GAAOrlE,WAIjCniB,IAAd/O,KAAKyF,OAAqBjF,EAAKiF,KAAOzF,KAAKyF,WAClBsJ,IAAzB/O,KAAKohD,kBAAgC5gD,EAAK4gD,gBAAkBphD,KAAKohD,iBAEjEphD,KAAK2/B,WAAaoD,KAAiBviC,EAAKm/B,SAAW3/B,KAAK2/B,UACxD3/B,KAAKkjC,UAAYC,KAAgB3iC,EAAK0iC,QAAUljC,KAAKkjC,SACrDljC,KAAKgjC,OAASC,KAAYziC,EAAKwiC,KAAOhjC,KAAKgjC,MAC3ChjC,KAAKojC,eAAiBC,KAAW7iC,EAAK4iC,aAAepjC,KAAKojC,cAE1DpjC,KAAKq8B,QAAU,IAAI77B,EAAK67B,QAAUr8B,KAAKq8B,UAClB,IAArBr8B,KAAKsjC,cAAuB9iC,EAAK8iC,YAActjC,KAAKsjC,aAEzD9iC,EAAKkjC,UAAY1jC,KAAK0jC,UACtBljC,EAAKiiC,UAAYziC,KAAKyiC,UACtBjiC,EAAKkiC,WAAa1iC,KAAK0iC,WAElB1iC,KAAK0gC,UAAY,IAAIlgC,EAAKkgC,UAAY1gC,KAAK0gC,YACf,IAA5B1gC,KAAKuiC,qBAA8B/hC,EAAK+hC,mBAAqBviC,KAAKuiC,qBAC/C,IAAnBviC,KAAK0kC,YAAqBlkC,EAAKkkC,UAAY1kC,KAAK0kC,WAChD1kC,KAAK2kC,mBAAqB,IAAInkC,EAAKmkC,mBAAqB3kC,KAAK2kC,oBACnC,UAA1B3kC,KAAK82C,mBAA+Bt2C,EAAKs2C,iBAAmB92C,KAAK82C,kBACtC,UAA3B92C,KAAK+2C,oBAAgCv2C,EAAKu2C,kBAAoB/2C,KAAK+2C,mBAExEv2C,EAAKqkC,SAAW7kC,KAAK6kC,SACrBrkC,EAAKskC,aAAe9kC,KAAK8kC,aAEzBtkC,EAAK4jC,UAAYpkC,KAAKokC,UAoBjBo0E,EAAS,CAEb,IAAIhxD,EAAW+wD,EAAkBhiB,EAAK/uC,UAClCxzB,EAASukF,EAAkBhiB,EAAKviE,QAE/BwzB,EAAS7pD,OAAS,IAAI6C,EAAKgnD,SAAWA,GACtCxzB,EAAOr2B,OAAS,IAAI6C,EAAKwzB,OAASA,GAIxC,OAAOxzB,GAIRoP,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWugB,GAEhBhlB,KAAKmM,KAAO6Y,EAAO7Y,KAEnBnM,KAAKwhC,IAAMxc,EAAOwc,IAClBxhC,KAAK8iC,OAAS9d,EAAO8d,OAErB9iC,KAAK2/B,SAAW3a,EAAO2a,SACvB3/B,KAAKgjC,KAAOhe,EAAOge,KACnBhjC,KAAKkjC,QAAUle,EAAOke,QACtBljC,KAAKojC,aAAepe,EAAOoe,aAE3BpjC,KAAKq8B,QAAUrX,EAAOqX,QACtBr8B,KAAKsjC,YAActe,EAAOse,YAE1BtjC,KAAK6/B,SAAW7a,EAAO6a,SACvB7/B,KAAK8/B,SAAW9a,EAAO8a,SACvB9/B,KAAK4/B,cAAgB5a,EAAO4a,cAC5B5/B,KAAKqiC,cAAgBrd,EAAOqd,cAC5BriC,KAAKsiC,cAAgBtd,EAAOsd,cAC5BtiC,KAAKoiC,mBAAqBpd,EAAOod,mBAEjCpiC,KAAK0jC,UAAY1e,EAAO0e,UACxB1jC,KAAKyiC,UAAYzd,EAAOyd,UACxBziC,KAAK0iC,WAAa1d,EAAO0d,WAEzB1iC,KAAK+jC,WAAa/e,EAAO+e,WAEzB/jC,KAAKgkC,UAAYhf,EAAOgf,UAExBhkC,KAAKikC,cAAgBjf,EAAOif,cAC5BjkC,KAAKkkC,oBAAsBlf,EAAOkf,oBAClClkC,KAAKmkC,mBAAqBnf,EAAOmf,mBAEjCnkC,KAAKokC,UAAYpf,EAAOof,UAExBpkC,KAAK0gC,UAAY1b,EAAO0b,UAExB1gC,KAAKuiC,mBAAqBvd,EAAOud,mBAEjCviC,KAAKqkC,SAAWrf,EAAOqf,SAEvBrkC,KAAKiiC,QAAUjd,EAAOid,QACtBjiC,KAAK8jC,YAAc9e,EAAO8e,YAC1B9jC,KAAK6jC,iBAAmB7e,EAAO6e,iBAE/B,IAAI40E,EAAYzzF,EAAO4e,eACtB80E,EAAY,KAEb,GAAmB,OAAdD,EAAqB,CAEzB,IAAI57G,EAAI47G,EAAU96G,OAClB+6G,EAAY,IAAIrtG,MAAOxO,GAEvB,IAAM,IAAIO,EAAI,EAAGA,IAAMP,IAAMO,EAC5Bs7G,EAAWt7G,GAAMq7G,EAAWr7G,GAAIwS,QAMlC,OAFA5P,KAAK4jC,eAAiB80E,EAEf14G,MAIRs5C,QAAS,WAERt5C,KAAKkzF,eAAiBhuF,KAAM,eAmF9Bo/B,EAAenmC,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,WACnDmmC,EAAenmC,UAAUsJ,YAAc68B,EAEvCA,EAAenmC,UAAU0jD,kBAAmB,EAE5Cvd,EAAenmC,UAAUsG,KAAO,SAAWugB,GAwB1C,OAtBA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAK47B,eAAiB5W,EAAO4W,eAC7B57B,KAAK27B,aAAe3W,EAAO2W,aAE3B37B,KAAKk8B,SAAW2P,GAAcj8B,MAAOoV,EAAOkX,UAE5Cl8B,KAAKwkC,QAAUxf,EAAOwf,QAEtBxkC,KAAK0kC,UAAY1f,EAAO0f,UACxB1kC,KAAK2kC,mBAAqB3f,EAAO2f,mBAEjC3kC,KAAK8iC,OAAS9d,EAAO8d,OACrB9iC,KAAK4kC,SAAW5f,EAAO4f,SAEvB5kC,KAAK6kC,SAAW7f,EAAO6f,SAEvB7kC,KAAK8kC,aAAe9f,EAAO8f,aAC3B9kC,KAAK+kC,aAAe/f,EAAO+f,aAE3B/kC,KAAKglC,WAAahgB,EAAOggB,WAElBhlC,MAIRskC,EAAenmC,UAAUukB,OAAS,SAAW6zE,GAE5C,IAAI/1F,EAAOoiC,EAASzkC,UAAUukB,OAAOhlB,KAAMsC,KAAMu2F,GAMjD,OAJA/1F,EAAK07B,SAAWl8B,KAAKk8B,SACrB17B,EAAKm7B,aAAe37B,KAAK27B,aACzBn7B,EAAKo7B,eAAiB57B,KAAK47B,eAEpBp7B,GAwDRilC,EAAkBtnC,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,WACtDsnC,EAAkBtnC,UAAUsJ,YAAcg+B,EAE1CA,EAAkBtnC,UAAUgjE,qBAAsB,EAElD17B,EAAkBtnC,UAAUsG,KAAO,SAAWugB,GAoB7C,OAlBA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAK0lC,aAAe1gB,EAAO0gB,aAE3B1lC,KAAK6kC,SAAW7f,EAAO6f,SACvB7kC,KAAK8kC,aAAe9f,EAAO8f,aAE3B9kC,KAAKqc,IAAM2I,EAAO3I,IAElBrc,KAAK4lC,SAAW5gB,EAAO4gB,SAEvB5lC,KAAK6lC,gBAAkB7gB,EAAO6gB,gBAC9B7lC,KAAK8lC,kBAAoB9gB,EAAO8gB,kBAChC9lC,KAAK+lC,iBAAmB/gB,EAAO+gB,iBAE/B/lC,KAAK0kC,UAAY1f,EAAO0f,UACxB1kC,KAAK2kC,mBAAqB3f,EAAO2f,mBAE1B3kC,MAgBR9B,OAAO20F,OAAQ7sD,EAAK7nC,WAEnBw6G,QAAQ,EAERj0G,IAAK,SAAWtC,EAAKC,GAKpB,OAHArC,KAAKoC,IAAIqC,KAAMrC,GACfpC,KAAKqC,IAAIoC,KAAMpC,GAERrC,MAIR44G,aAAc,SAAWn4F,GAUxB,IAAM,IARFo4F,EAAS1wF,EAAAA,EACT2wF,EAAS3wF,EAAAA,EACT4wF,EAAS5wF,EAAAA,EAET6wF,GAAS7wF,EAAAA,EACT8wF,GAAS9wF,EAAAA,EACT+wF,GAAS/wF,EAAAA,EAEH/qB,EAAI,EAAGI,EAAIijB,EAAM9iB,OAAQP,EAAII,EAAGJ,GAAK,EAAI,CAElD,IAAIozB,EAAI/P,EAAOrjB,GACXgmB,EAAI3C,EAAOrjB,EAAI,GACfk1B,EAAI7R,EAAOrjB,EAAI,GAEdozB,EAAIqoF,IAAOA,EAAOroF,GAClBpN,EAAI01F,IAAOA,EAAO11F,GAClBkP,EAAIymF,IAAOA,EAAOzmF,GAElB9B,EAAIwoF,IAAOA,EAAOxoF,GAClBpN,EAAI61F,IAAOA,EAAO71F,GAClBkP,EAAI4mF,IAAOA,EAAO5mF,GAOxB,OAHAtyB,KAAKoC,IAAIsC,IAAKm0G,EAAMC,EAAMC,GAC1B/4G,KAAKqC,IAAIqC,IAAKs0G,EAAMC,EAAMC,GAEnBl5G,MAIRm5G,uBAAwB,SAAWjrE,GAUlC,IAAM,IARF2qE,EAAS1wF,EAAAA,EACT2wF,EAAS3wF,EAAAA,EACT4wF,EAAS5wF,EAAAA,EAET6wF,GAAS7wF,EAAAA,EACT8wF,GAAS9wF,EAAAA,EACT+wF,GAAS/wF,EAAAA,EAEH/qB,EAAI,EAAGI,EAAI0wC,EAAUrtC,MAAOzD,EAAII,EAAGJ,IAAO,CAEnD,IAAIozB,EAAI0d,EAAUikC,KAAM/0E,GACpBgmB,EAAI8qB,EAAUmoD,KAAMj5F,GACpBk1B,EAAI4b,EAAUkqD,KAAMh7F,GAEnBozB,EAAIqoF,IAAOA,EAAOroF,GAClBpN,EAAI01F,IAAOA,EAAO11F,GAClBkP,EAAIymF,IAAOA,EAAOzmF,GAElB9B,EAAIwoF,IAAOA,EAAOxoF,GAClBpN,EAAI61F,IAAOA,EAAO71F,GAClBkP,EAAI4mF,IAAOA,EAAO5mF,GAOxB,OAHAtyB,KAAKoC,IAAIsC,IAAKm0G,EAAMC,EAAMC,GAC1B/4G,KAAKqC,IAAIqC,IAAKs0G,EAAMC,EAAMC,GAEnBl5G,MAIRq3G,cAAe,SAAW3sC,GAEzB1qE,KAAKs3G,YAEL,IAAM,IAAIl6G,EAAI,EAAGivC,EAAKq+B,EAAO/sE,OAAQP,EAAIivC,EAAIjvC,IAE5C4C,KAAKu3G,cAAe7sC,EAAQttE,IAI7B,OAAO4C,MAIRw3G,qBAAsB,WAErB,IAAIl1B,EAAK,IAAI5uD,EAEb,OAAO,SAA+BwS,EAAQzgC,GAE7C,IAAI8pF,EAAWjN,EAAG79E,KAAMgB,GAAOq1D,eAAgB,IAK/C,OAHA96D,KAAKoC,IAAIqC,KAAMyhC,GAASs+B,IAAK+qB,GAC7BvvF,KAAKqC,IAAIoC,KAAMyhC,GAASzb,IAAK8kE,GAEtBvvF,MAXa,GAiBtB06C,cAAe,SAAWpT,GAIzB,OAFAtnC,KAAKs3G,YAEEt3G,KAAKo5G,eAAgB9xE,IAI7B13B,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWgzG,GAKhB,OAHAz3G,KAAKoC,IAAIqC,KAAMgzG,EAAIr1G,KACnBpC,KAAKqC,IAAIoC,KAAMgzG,EAAIp1G,KAEZrC,MAIRs3G,UAAW,WAKV,OAHAt3G,KAAKoC,IAAIouB,EAAIxwB,KAAKoC,IAAIghB,EAAIpjB,KAAKoC,IAAIkwB,EAAMnK,EAAAA,EACzCnoB,KAAKqC,IAAImuB,EAAIxwB,KAAKqC,IAAI+gB,EAAIpjB,KAAKqC,IAAIiwB,GAAMnK,EAAAA,EAElCnoB,MAIR03G,QAAS,WAIR,OAAS13G,KAAKqC,IAAImuB,EAAIxwB,KAAKoC,IAAIouB,GAASxwB,KAAKqC,IAAI+gB,EAAIpjB,KAAKoC,IAAIghB,GAASpjB,KAAKqC,IAAIiwB,EAAItyB,KAAKoC,IAAIkwB,GAI9FqlF,UAAW,SAAWrJ,GAErB,IAAIptG,EAASotG,GAAkB,IAAI56E,EACnC,OAAO1zB,KAAK03G,UAAYx2G,EAAOwD,IAAK,EAAG,EAAG,GAAMxD,EAAOs2E,WAAYx3E,KAAKoC,IAAKpC,KAAKqC,KAAMy4D,eAAgB,KAIzG5D,QAAS,SAAWo3C,GAEnB,IAAIptG,EAASotG,GAAkB,IAAI56E,EACnC,OAAO1zB,KAAK03G,UAAYx2G,EAAOwD,IAAK,EAAG,EAAG,GAAMxD,EAAO2xE,WAAY7yE,KAAKqC,IAAKrC,KAAKoC,MAInFm1G,cAAe,SAAW5xD,GAKzB,OAHA3lD,KAAKoC,IAAIA,IAAKujD,GACd3lD,KAAKqC,IAAIA,IAAKsjD,GAEP3lD,MAIR43G,eAAgB,SAAWriE,GAK1B,OAHAv1C,KAAKoC,IAAIoiE,IAAKjvB,GACdv1C,KAAKqC,IAAIooB,IAAK8qB,GAEPv1C,MAIR63G,eAAgB,SAAW/iB,GAK1B,OAHA90F,KAAKoC,IAAI+yF,WAAaL,GACtB90F,KAAKqC,IAAI8yF,UAAWL,GAEb90F,MAIRo5G,eAAgB,WAKf,IAAI92B,EAAK,IAAI5uD,EAEb,OAAO,SAAyB4T,GAE/B,IAAI0B,EAAQhpC,KA+CZ,OA7CAsnC,EAAO8F,mBAAmB,GAE1B9F,EAAOinC,SAAU,SAAWia,GAE3B,IAAIprF,EAAGI,EAEHiqC,EAAW+gD,EAAK/gD,SAEpB,QAAkB14B,IAAb04B,EAEJ,GAAKA,EAASU,WAAa,CAE1B,IAAIrO,EAAW2N,EAAS3N,SAExB,IAAM18B,EAAI,EAAGI,EAAIs8B,EAASn8B,OAAQP,EAAII,EAAGJ,IAExCklF,EAAG79E,KAAMq1B,EAAU18B,IACnBklF,EAAG/jD,aAAciqD,EAAKlqD,aAEtB0K,EAAMuuE,cAAej1B,QAIhB,GAAK76C,EAASQ,iBAAmB,CAEvC,IAAIiG,EAAYzG,EAAS3L,WAAWnlB,SAEpC,QAAmB5H,IAAdm/B,EAEJ,IAAM9wC,EAAI,EAAGI,EAAI0wC,EAAUrtC,MAAOzD,EAAII,EAAGJ,IAExCklF,EAAGlQ,oBAAqBlkC,EAAW9wC,GAAImhC,aAAciqD,EAAKlqD,aAE1D0K,EAAMuuE,cAAej1B,MAYnBtiF,MAxDO,GA8DhB0+B,cAAe,SAAWinB,GAEzB,QAAOA,EAAMn1B,EAAIxwB,KAAKoC,IAAIouB,GAAKm1B,EAAMn1B,EAAIxwB,KAAKqC,IAAImuB,GACjDm1B,EAAMviC,EAAIpjB,KAAKoC,IAAIghB,GAAKuiC,EAAMviC,EAAIpjB,KAAKqC,IAAI+gB,GAC3CuiC,EAAMrzB,EAAItyB,KAAKoC,IAAIkwB,GAAKqzB,EAAMrzB,EAAItyB,KAAKqC,IAAIiwB,IAI7CwlF,YAAa,SAAWL,GAEvB,OAAOz3G,KAAKoC,IAAIouB,GAAKinF,EAAIr1G,IAAIouB,GAAKinF,EAAIp1G,IAAImuB,GAAKxwB,KAAKqC,IAAImuB,GACvDxwB,KAAKoC,IAAIghB,GAAKq0F,EAAIr1G,IAAIghB,GAAKq0F,EAAIp1G,IAAI+gB,GAAKpjB,KAAKqC,IAAI+gB,GACjDpjB,KAAKoC,IAAIkwB,GAAKmlF,EAAIr1G,IAAIkwB,GAAKmlF,EAAIp1G,IAAIiwB,GAAKtyB,KAAKqC,IAAIiwB,GAInDwgC,aAAc,SAAWnN,EAAO2oD,GAO/B,OAFaA,GAAkB,IAAI56E,GAErBhvB,KACXihD,EAAMn1B,EAAIxwB,KAAKoC,IAAIouB,IAAQxwB,KAAKqC,IAAImuB,EAAIxwB,KAAKoC,IAAIouB,IACjDm1B,EAAMviC,EAAIpjB,KAAKoC,IAAIghB,IAAQpjB,KAAKqC,IAAI+gB,EAAIpjB,KAAKoC,IAAIghB,IACjDuiC,EAAMrzB,EAAItyB,KAAKoC,IAAIkwB,IAAQtyB,KAAKqC,IAAIiwB,EAAItyB,KAAKoC,IAAIkwB,KAKrDylF,cAAe,SAAWN,GAGzB,QAAOA,EAAIp1G,IAAImuB,EAAIxwB,KAAKoC,IAAIouB,GAAKinF,EAAIr1G,IAAIouB,EAAIxwB,KAAKqC,IAAImuB,GACrDinF,EAAIp1G,IAAI+gB,EAAIpjB,KAAKoC,IAAIghB,GAAKq0F,EAAIr1G,IAAIghB,EAAIpjB,KAAKqC,IAAI+gB,GAC/Cq0F,EAAIp1G,IAAIiwB,EAAItyB,KAAKoC,IAAIkwB,GAAKmlF,EAAIr1G,IAAIkwB,EAAItyB,KAAKqC,IAAIiwB,IAIjD+mF,iBAAkB,WAEjB,IAAIC,EAAe,IAAI5lF,EAEvB,OAAO,SAA2B6lF,GAMjC,OAHAv5G,KAAKg4G,WAAYuB,EAAOrzE,OAAQozE,GAGzBA,EAAatjB,kBAAmBujB,EAAOrzE,SAAcqzE,EAAOpzE,OAASozE,EAAOpzE,QAVnE,GAgBlBqzE,gBAAiB,SAAW3/C,GAK3B,IAAIz3D,EAAKC,EAsCT,OApCKw3D,EAAMvzB,OAAO9V,EAAI,GAErBpuB,EAAMy3D,EAAMvzB,OAAO9V,EAAIxwB,KAAKoC,IAAIouB,EAChCnuB,EAAMw3D,EAAMvzB,OAAO9V,EAAIxwB,KAAKqC,IAAImuB,IAIhCpuB,EAAMy3D,EAAMvzB,OAAO9V,EAAIxwB,KAAKqC,IAAImuB,EAChCnuB,EAAMw3D,EAAMvzB,OAAO9V,EAAIxwB,KAAKoC,IAAIouB,GAI5BqpC,EAAMvzB,OAAOljB,EAAI,GAErBhhB,GAAOy3D,EAAMvzB,OAAOljB,EAAIpjB,KAAKoC,IAAIghB,EACjC/gB,GAAOw3D,EAAMvzB,OAAOljB,EAAIpjB,KAAKqC,IAAI+gB,IAIjChhB,GAAOy3D,EAAMvzB,OAAOljB,EAAIpjB,KAAKqC,IAAI+gB,EACjC/gB,GAAOw3D,EAAMvzB,OAAOljB,EAAIpjB,KAAKoC,IAAIghB,GAI7By2C,EAAMvzB,OAAOhU,EAAI,GAErBlwB,GAAOy3D,EAAMvzB,OAAOhU,EAAItyB,KAAKoC,IAAIkwB,EACjCjwB,GAAOw3D,EAAMvzB,OAAOhU,EAAItyB,KAAKqC,IAAIiwB,IAIjClwB,GAAOy3D,EAAMvzB,OAAOhU,EAAItyB,KAAKqC,IAAIiwB,EACjCjwB,GAAOw3D,EAAMvzB,OAAOhU,EAAItyB,KAAKoC,IAAIkwB,GAIzBlwB,GAAOy3D,EAAMtzB,UAAYlkC,GAAOw3D,EAAMtzB,UAIhDyxE,WAAY,SAAWryD,EAAO2oD,GAG7B,OADaA,GAAkB,IAAI56E,GACrBjvB,KAAMkhD,GAAQu0B,MAAOl6E,KAAKoC,IAAKpC,KAAKqC,MAInD41G,gBAAiB,WAEhB,IAAI31B,EAAK,IAAI5uD,EAEb,OAAO,SAA0BiyB,GAGhC,OADmB28B,EAAG79E,KAAMkhD,GAAQu0B,MAAOl6E,KAAKoC,IAAKpC,KAAKqC,KACtCmiE,IAAK7e,GAAQhoD,UAPlB,GAajB87G,kBAAmB,WAElB,IAAIn3B,EAAK,IAAI5uD,EAEb,OAAO,SAA4B46E,GAElC,IAAIptG,EAASotG,GAAkB,IAAIroE,GAMnC,OAJAjmC,KAAK23G,UAAWz2G,EAAOglC,QAEvBhlC,EAAOilC,OAAuC,GAA9BnmC,KAAKk3D,QAASorB,GAAK3kF,SAE5BuD,GAZU,GAkBnBg3G,UAAW,SAAWT,GAQrB,OANAz3G,KAAKoC,IAAIC,IAAKo1G,EAAIr1G,KAClBpC,KAAKqC,IAAID,IAAKq1G,EAAIp1G,KAGdrC,KAAK03G,WAAY13G,KAAKs3G,YAEnBt3G,MAIRm4G,MAAO,SAAWV,GAKjB,OAHAz3G,KAAKoC,IAAIA,IAAKq1G,EAAIr1G,KAClBpC,KAAKqC,IAAIA,IAAKo1G,EAAIp1G,KAEXrC,MAIRu+B,aAAc,WAEb,IAAImsC,GACH,IAAIh3C,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,GAGL,OAAO,SAAuBsZ,GAG7B,OAAIhtC,KAAK03G,UAAmB13G,MAG5B0qE,EAAQ,GAAIhmE,IAAK1E,KAAKoC,IAAIouB,EAAGxwB,KAAKoC,IAAIghB,EAAGpjB,KAAKoC,IAAIkwB,GAAIiM,aAAcyO,GACpE09B,EAAQ,GAAIhmE,IAAK1E,KAAKoC,IAAIouB,EAAGxwB,KAAKoC,IAAIghB,EAAGpjB,KAAKqC,IAAIiwB,GAAIiM,aAAcyO,GACpE09B,EAAQ,GAAIhmE,IAAK1E,KAAKoC,IAAIouB,EAAGxwB,KAAKqC,IAAI+gB,EAAGpjB,KAAKoC,IAAIkwB,GAAIiM,aAAcyO,GACpE09B,EAAQ,GAAIhmE,IAAK1E,KAAKoC,IAAIouB,EAAGxwB,KAAKqC,IAAI+gB,EAAGpjB,KAAKqC,IAAIiwB,GAAIiM,aAAcyO,GACpE09B,EAAQ,GAAIhmE,IAAK1E,KAAKqC,IAAImuB,EAAGxwB,KAAKoC,IAAIghB,EAAGpjB,KAAKoC,IAAIkwB,GAAIiM,aAAcyO,GACpE09B,EAAQ,GAAIhmE,IAAK1E,KAAKqC,IAAImuB,EAAGxwB,KAAKoC,IAAIghB,EAAGpjB,KAAKqC,IAAIiwB,GAAIiM,aAAcyO,GACpE09B,EAAQ,GAAIhmE,IAAK1E,KAAKqC,IAAImuB,EAAGxwB,KAAKqC,IAAI+gB,EAAGpjB,KAAKoC,IAAIkwB,GAAIiM,aAAcyO,GACpE09B,EAAQ,GAAIhmE,IAAK1E,KAAKqC,IAAImuB,EAAGxwB,KAAKqC,IAAI+gB,EAAGpjB,KAAKqC,IAAIiwB,GAAIiM,aAAcyO,GAEpEhtC,KAAKq3G,cAAe3sC,GAEb1qE,OA9BK,GAoCd6wF,UAAW,SAAWh/D,GAKrB,OAHA7xB,KAAKoC,IAAIqoB,IAAKoH,GACd7xB,KAAKqC,IAAIooB,IAAKoH,GAEP7xB,MAIRmwD,OAAQ,SAAWsnD,GAElB,OAAOA,EAAIr1G,IAAI+tD,OAAQnwD,KAAKoC,MAASq1G,EAAIp1G,IAAI8tD,OAAQnwD,KAAKqC,QAkB5DnE,OAAO20F,OAAQ5sD,GAAO9nC,WAErBuG,IAAK,SAAWwhC,EAAQC,GAKvB,OAHAnmC,KAAKkmC,OAAOzhC,KAAMyhC,GAClBlmC,KAAKmmC,OAASA,EAEPnmC,MAIRq3G,cAAe,WAEd,IAAII,EAAM,IAAIzxE,EAEd,OAAO,SAAwB0kC,EAAQgvC,GAEtC,IAAIxzE,EAASlmC,KAAKkmC,YAEMn3B,IAAnB2qG,EAEJxzE,EAAOzhC,KAAMi1G,GAIbjC,EAAIJ,cAAe3sC,GAASitC,UAAWzxE,GAMxC,IAAM,IAFFyzE,EAAc,EAERv8G,EAAI,EAAGivC,EAAKq+B,EAAO/sE,OAAQP,EAAIivC,EAAIjvC,IAE5Cu8G,EAAcj3G,KAAKL,IAAKs3G,EAAazzE,EAAO8vD,kBAAmBtrB,EAAQttE,KAMxE,OAFA4C,KAAKmmC,OAASzjC,KAAKg+D,KAAMi5C,GAElB35G,MA5BM,GAkCf4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAW80G,GAKhB,OAHAv5G,KAAKkmC,OAAOzhC,KAAM80G,EAAOrzE,QACzBlmC,KAAKmmC,OAASozE,EAAOpzE,OAEdnmC,MAIR8U,MAAO,WAEN,OAAS9U,KAAKmmC,QAAU,GAIzBzH,cAAe,SAAWinB,GAEzB,OAASA,EAAMqwC,kBAAmBh2F,KAAKkmC,SAAclmC,KAAKmmC,OAASnmC,KAAKmmC,QAIzE8xE,gBAAiB,SAAWtyD,GAE3B,OAASA,EAAMowC,WAAY/1F,KAAKkmC,QAAWlmC,KAAKmmC,QAIjDkzE,iBAAkB,SAAWE,GAE5B,IAAIK,EAAY55G,KAAKmmC,OAASozE,EAAOpzE,OAErC,OAAOozE,EAAOrzE,OAAO8vD,kBAAmBh2F,KAAKkmC,SAAc0zE,EAAYA,GAIxE7B,cAAe,SAAWN,GAEzB,OAAOA,EAAI4B,iBAAkBr5G,OAI9Bw5G,gBAAiB,SAAW3/C,GAU3B,OAAOn3D,KAAKoI,IAAK9K,KAAKkmC,OAAO61C,IAAKliB,EAAMvzB,QAAWuzB,EAAMtzB,WAAcvmC,KAAKmmC,QAI7E6xE,WAAY,SAAWryD,EAAO2oD,GAE7B,IAAIuL,EAAgB75G,KAAKkmC,OAAO8vD,kBAAmBrwC,GAE/CzkD,EAASotG,GAAkB,IAAI56E,EAWnC,OATAxyB,EAAOuD,KAAMkhD,GAERk0D,EAAkB75G,KAAKmmC,OAASnmC,KAAKmmC,SAEzCjlC,EAAOsjE,IAAKxkE,KAAKkmC,QAASm/B,YAC1BnkE,EAAO45D,eAAgB96D,KAAKmmC,QAAS1b,IAAKzqB,KAAKkmC,SAIzChlC,GAIR44G,eAAgB,SAAWxL,GAE1B,IAAImJ,EAAMnJ,GAAkB,IAAItoE,EAKhC,OAHAyxE,EAAI/yG,IAAK1E,KAAKkmC,OAAQlmC,KAAKkmC,QAC3BuxE,EAAII,eAAgB73G,KAAKmmC,QAElBsxE,GAIRl5E,aAAc,SAAWyO,GAKxB,OAHAhtC,KAAKkmC,OAAO3H,aAAcyO,GAC1BhtC,KAAKmmC,OAASnmC,KAAKmmC,OAAS6G,EAAOm2D,oBAE5BnjG,MAIR6wF,UAAW,SAAWh/D,GAIrB,OAFA7xB,KAAKkmC,OAAOzb,IAAKoH,GAEV7xB,MAIRmwD,OAAQ,SAAWopD,GAElB,OAAOA,EAAOrzE,OAAOiqB,OAAQnwD,KAAKkmC,SAAcqzE,EAAOpzE,SAAWnmC,KAAKmmC,UA+BzEjoC,OAAO20F,OAAQzsD,GAAQjoC,WAEtB0xG,WAAW,EAEXnrG,IAAK,SAAW+4F,EAAKC,EAAKC,EAAKE,EAAKC,EAAKC,EAAKE,EAAKC,EAAKC,GAEvD,IAAI/G,EAAKp3F,KAAK4zB,SAMd,OAJAwjE,EAAI,GAAMqG,EAAKrG,EAAI,GAAMyG,EAAKzG,EAAI,GAAM6G,EACxC7G,EAAI,GAAMsG,EAAKtG,EAAI,GAAM0G,EAAK1G,EAAI,GAAM8G,EACxC9G,EAAI,GAAMuG,EAAKvG,EAAI,GAAM2G,EAAK3G,EAAI,GAAM+G,EAEjCn+F,MAIRilE,SAAU,WAUT,OARAjlE,KAAK0E,IAEJ,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAIA1E,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAcmwD,UAAW53D,KAAK4zB,WAI/CnvB,KAAM,SAAW8e,GAEhB,IAAI6zE,EAAKp3F,KAAK4zB,SACV6qE,EAAKl7E,EAAEqQ,SAMX,OAJAwjE,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GACpDrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GACpDrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAAKrH,EAAI,GAAMqH,EAAI,GAE7Cz+F,MAIR+5G,eAAgB,SAAWx2F,GAE1B,IAAIk7E,EAAKl7E,EAAEqQ,SAUX,OARA5zB,KAAK0E,IAEJ+5F,EAAI,GAAKA,EAAI,GAAKA,EAAK,GACvBA,EAAI,GAAKA,EAAI,GAAKA,EAAK,GACvBA,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAIhBz+F,MAIRuiG,uBAAwB,WAEvB,IAAIjgB,EAAK,IAAI5uD,EAEb,OAAO,SAAiCwa,GAEvC,IAAM,IAAI9wC,EAAI,EAAGI,EAAI0wC,EAAUrtC,MAAOzD,EAAII,EAAGJ,IAE5CklF,EAAG9xD,EAAI0d,EAAUikC,KAAM/0E,GACvBklF,EAAGl/D,EAAI8qB,EAAUmoD,KAAMj5F,GACvBklF,EAAGhwD,EAAI4b,EAAUkqD,KAAMh7F,GAEvBklF,EAAGoZ,aAAc17F,MAEjBkuC,EAAUs0D,OAAQplG,EAAGklF,EAAG9xD,EAAG8xD,EAAGl/D,EAAGk/D,EAAGhwD,GAIrC,OAAO4b,GAlBe,GAwBxBb,SAAU,SAAW9pB,GAEpB,OAAOvjB,KAAK8hC,iBAAkB9hC,KAAMujB,IAIrC4hD,YAAa,SAAW5hD,GAEvB,OAAOvjB,KAAK8hC,iBAAkBve,EAAGvjB,OAIlC8hC,iBAAkB,SAAW5kC,EAAGsK,GAE/B,IAAI43F,EAAKliG,EAAE02B,SACP0rE,EAAK93F,EAAEosB,SACPwjE,EAAKp3F,KAAK4zB,SAEV2sE,EAAMnB,EAAI,GAAKoB,EAAMpB,EAAI,GAAKqB,EAAMrB,EAAI,GACxCuB,EAAMvB,EAAI,GAAKwB,EAAMxB,EAAI,GAAKyB,EAAMzB,EAAI,GACxC2B,EAAM3B,EAAI,GAAK4B,EAAM5B,EAAI,GAAK6B,EAAM7B,EAAI,GAExCmC,EAAMjC,EAAI,GAAKkC,EAAMlC,EAAI,GAAKmC,EAAMnC,EAAI,GACxCqC,EAAMrC,EAAI,GAAKsC,EAAMtC,EAAI,GAAKuC,EAAMvC,EAAI,GACxCyC,EAAMzC,EAAI,GAAK0C,EAAM1C,EAAI,GAAK2C,EAAM3C,EAAI,GAc5C,OAZAlI,EAAI,GAAMmJ,EAAMgB,EAAMf,EAAMmB,EAAMlB,EAAMsB,EACxC3K,EAAI,GAAMmJ,EAAMiB,EAAMhB,EAAMoB,EAAMnB,EAAMuB,EACxC5K,EAAI,GAAMmJ,EAAMkB,EAAMjB,EAAMqB,EAAMpB,EAAMwB,EAExC7K,EAAI,GAAMuJ,EAAMY,EAAMX,EAAMe,EAAMd,EAAMkB,EACxC3K,EAAI,GAAMuJ,EAAMa,EAAMZ,EAAMgB,EAAMf,EAAMmB,EACxC5K,EAAI,GAAMuJ,EAAMc,EAAMb,EAAMiB,EAAMhB,EAAMoB,EAExC7K,EAAI,GAAM2J,EAAMQ,EAAMP,EAAMW,EAAMV,EAAMc,EACxC3K,EAAI,GAAM2J,EAAMS,EAAMR,EAAMY,EAAMX,EAAMe,EACxC5K,EAAI,GAAM2J,EAAMU,EAAMT,EAAMa,EAAMZ,EAAMgB,EAEjCjiG,MAIR86D,eAAgB,SAAW/9D,GAE1B,IAAIq6F,EAAKp3F,KAAK4zB,SAMd,OAJAwjE,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EACvCq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EACvCq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAAGq6F,EAAI,IAAOr6F,EAEhCiD,MAIRyiG,YAAa,WAEZ,IAAIrL,EAAKp3F,KAAK4zB,SAEV12B,EAAIk6F,EAAI,GAAK5vF,EAAI4vF,EAAI,GAAK7uF,EAAI6uF,EAAI,GACrC/zE,EAAI+zE,EAAI,GAAKz6F,EAAIy6F,EAAI,GAAK/5F,EAAI+5F,EAAI,GAClC1hE,EAAI0hE,EAAI,GAAK9zE,EAAI8zE,EAAI,GAAKh6F,EAAIg6F,EAAI,GAEnC,OAAOl6F,EAAIP,EAAIS,EAAIF,EAAIG,EAAIimB,EAAI9b,EAAI6b,EAAIjmB,EAAIoK,EAAInK,EAAIq4B,EAAIntB,EAAI8a,EAAIC,EAAI/a,EAAI5L,EAAI+4B,GAI5EgjB,WAAY,SAAW1L,EAAQ41D,GAEzB51D,GAAUA,EAAOwwD,WAErB/+F,QAAQqT,MAAO,gEAIhB,IAAI2sF,EAAKzxD,EAAOpZ,SACfwjE,EAAKp3F,KAAK4zB,SAEV6pE,EAAMgB,EAAI,GAAKZ,EAAMY,EAAI,GAAKR,EAAMQ,EAAI,GACxCf,EAAMe,EAAI,GAAKX,EAAMW,EAAI,GAAKP,EAAMO,EAAI,GACxCd,EAAMc,EAAI,GAAKV,EAAMU,EAAI,GAAKN,EAAMM,EAAI,GAExCoE,EAAM1E,EAAML,EAAMI,EAAMH,EACxB+E,EAAM5E,EAAMP,EAAMQ,EAAMT,EACxBqF,EAAMhF,EAAML,EAAMI,EAAMH,EAExBsF,EAAMxF,EAAMoF,EAAMhF,EAAMiF,EAAM7E,EAAM8E,EAErC,GAAa,IAARE,EAAY,CAEhB,IAAI3xF,EAAM,oEAEV,IAA2B,IAAtBsxF,EAEJ,MAAM,IAAItlG,MAAOgU,GAQlB,OAJC7S,QAAQ4pC,KAAM/2B,GAIRtR,KAAKilE,WAIb,IAAIi+B,EAAS,EAAID,EAcjB,OAZA7L,EAAI,GAAMyL,EAAMK,EAChB9L,EAAI,IAAQ6G,EAAMF,EAAMI,EAAMN,GAAQqF,EACtC9L,EAAI,IAAQ8G,EAAML,EAAMI,EAAMH,GAAQoF,EAEtC9L,EAAI,GAAM0L,EAAMI,EAChB9L,EAAI,IAAQ+G,EAAMV,EAAMQ,EAAMN,GAAQuF,EACtC9L,EAAI,IAAQ6G,EAAMP,EAAMQ,EAAMT,GAAQyF,EAEtC9L,EAAI,GAAM2L,EAAMG,EAChB9L,EAAI,IAAQyG,EAAMF,EAAMI,EAAMN,GAAQyF,EACtC9L,EAAI,IAAQ0G,EAAML,EAAMI,EAAMH,GAAQwF,EAE/BljG,MAIR0iG,UAAW,WAEV,IAAI1gF,EAAKuB,EAAIvjB,KAAK4zB,SAMlB,OAJA5R,EAAMuB,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAMvB,EACxCA,EAAMuB,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAMvB,EACxCA,EAAMuB,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAMvB,EAEjChiB,MAIR25D,gBAAiB,SAAWqgD,GAE3B,OAAOh6G,KAAK+5G,eAAgBC,GAAUthE,WAAY14C,MAAO0iG,aAI1DuX,mBAAoB,SAAWn9G,GAE9B,IAAIymB,EAAIvjB,KAAK4zB,SAYb,OAVA92B,EAAG,GAAMymB,EAAG,GACZzmB,EAAG,GAAMymB,EAAG,GACZzmB,EAAG,GAAMymB,EAAG,GACZzmB,EAAG,GAAMymB,EAAG,GACZzmB,EAAG,GAAMymB,EAAG,GACZzmB,EAAG,GAAMymB,EAAG,GACZzmB,EAAG,GAAMymB,EAAG,GACZzmB,EAAG,GAAMymB,EAAG,GACZzmB,EAAG,GAAMymB,EAAG,GAELvjB,MAIRmwD,OAAQ,SAAWnjB,GAKlB,IAAM,IAHFoqD,EAAKp3F,KAAK4zB,SACV6qE,EAAKzxD,EAAOpZ,SAENx2B,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAKg6F,EAAIh6F,KAAQqhG,EAAIrhG,GAAM,OAAO,EAInC,OAAO,GAIRw6D,UAAW,SAAWn3C,EAAOoR,QAEZ9iB,IAAX8iB,IAAuBA,EAAS,GAErC,IAAM,IAAIz0B,EAAI,EAAGA,EAAI,EAAGA,IAEvB4C,KAAK4zB,SAAUx2B,GAAMqjB,EAAOrjB,EAAIy0B,GAIjC,OAAO7xB,MAIRgsB,QAAS,SAAWvL,EAAOoR,QAEX9iB,IAAV0R,IAAsBA,WACX1R,IAAX8iB,IAAuBA,EAAS,GAErC,IAAIulE,EAAKp3F,KAAK4zB,SAcd,OAZAnT,EAAOoR,GAAWulE,EAAI,GACtB32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAE1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAE1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAC1B32E,EAAOoR,EAAS,GAAMulE,EAAI,GAEnB32E,KAiBTviB,OAAO20F,OAAQxsD,GAAMloC,WAEpBuG,IAAK,SAAW4hC,EAAQC,GAKvB,OAHAvmC,KAAKsmC,OAAO7hC,KAAM6hC,GAClBtmC,KAAKumC,SAAWA,EAETvmC,MAIRk6G,cAAe,SAAW1pF,EAAGpN,EAAGkP,EAAGC,GAKlC,OAHAvyB,KAAKsmC,OAAO5hC,IAAK8rB,EAAGpN,EAAGkP,GACvBtyB,KAAKumC,SAAWhU,EAETvyB,MAIRm6G,8BAA+B,SAAW7zE,EAAQqf,GAKjD,OAHA3lD,KAAKsmC,OAAO7hC,KAAM6hC,GAClBtmC,KAAKumC,UAAaof,EAAMo2B,IAAK/7E,KAAKsmC,QAE3BtmC,MAIRo6G,sBAAuB,WAEtB,IAAI93B,EAAK,IAAI5uD,EACT0vD,EAAK,IAAI1vD,EAEb,OAAO,SAAgCx2B,EAAGsK,EAAGe,GAE5C,IAAI+9B,EAASg8C,EAAGzP,WAAYtqE,EAAGf,GAAI20F,MAAO/Y,EAAGvQ,WAAY31E,EAAGsK,IAAM69D,YAMlE,OAFArlE,KAAKm6G,8BAA+B7zE,EAAQppC,GAErC8C,MAbc,GAmBvB4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWo1D,GAKhB,OAHA75D,KAAKsmC,OAAO7hC,KAAMo1D,EAAMvzB,QACxBtmC,KAAKumC,SAAWszB,EAAMtzB,SAEfvmC,MAIRqlE,UAAW,WAIV,IAAIg1C,EAAsB,EAAMr6G,KAAKsmC,OAAO3oC,SAI5C,OAHAqC,KAAKsmC,OAAOw0B,eAAgBu/C,GAC5Br6G,KAAKumC,UAAY8zE,EAEVr6G,MAIR41F,OAAQ,WAKP,OAHA51F,KAAKumC,WAAc,EACnBvmC,KAAKsmC,OAAOsvD,SAEL51F,MAIRi4G,gBAAiB,SAAWtyD,GAE3B,OAAO3lD,KAAKsmC,OAAOy1C,IAAKp2B,GAAU3lD,KAAKumC,UAIxC+zE,iBAAkB,SAAWf,GAE5B,OAAOv5G,KAAKi4G,gBAAiBsB,EAAOrzE,QAAWqzE,EAAOpzE,QAIvDo0E,aAAc,SAAW50D,EAAO2oD,GAE/B,OAAOtuG,KAAKw6G,WAAY70D,EAAO2oD,GAAiB9pC,IAAK7e,GAAQiwC,UAI9D4kB,WAAY,SAAW70D,EAAO2oD,GAE7B,IAAImM,EAAyBz6G,KAAKi4G,gBAAiBtyD,GAGnD,OADa2oD,GAAkB,IAAI56E,GACrBjvB,KAAMzE,KAAKsmC,QAASw0B,eAAgB2/C,IAInDC,cAAe,WAEd,IAAIp4B,EAAK,IAAI5uD,EAEb,OAAO,SAAwBo9D,EAAMwd,GAEpC,IAAIptG,EAASotG,GAAkB,IAAI56E,EAE/BwjB,EAAY45C,EAAK6d,MAAOrsB,GAExBq4B,EAAc36G,KAAKsmC,OAAOy1C,IAAK7kC,GAEnC,GAAqB,IAAhByjE,EAAL,CAcA,IAAI/9G,IAAQk0F,EAAKxvF,MAAMy6E,IAAK/7E,KAAKsmC,QAAWtmC,KAAKumC,UAAao0E,EAE9D,KAAK/9G,EAAI,GAAKA,EAAI,GAMlB,OAAOsE,EAAOuD,KAAMyyC,GAAY4jB,eAAgBl+D,GAAI6tB,IAAKqmE,EAAKxvF,YAnB7D,GAA4C,IAAvCtB,KAAKi4G,gBAAiBnnB,EAAKxvF,OAE/B,OAAOJ,EAAOuD,KAAMqsF,EAAKxvF,QAjBd,GAwCfs5G,eAAgB,SAAW9pB,GAI1B,IAAI+pB,EAAY76G,KAAKi4G,gBAAiBnnB,EAAKxvF,OACvCw5G,EAAU96G,KAAKi4G,gBAAiBnnB,EAAKvvF,KAEzC,OAASs5G,EAAY,GAAKC,EAAU,GAASA,EAAU,GAAKD,EAAY,GAIzE9C,cAAe,SAAWN,GAEzB,OAAOA,EAAI+B,gBAAiBx5G,OAI7Bq5G,iBAAkB,SAAWE,GAE5B,OAAOA,EAAOC,gBAAiBx5G,OAIhC+6G,cAAe,SAAWzM,GAGzB,OADaA,GAAkB,IAAI56E,GACrBjvB,KAAMzE,KAAKsmC,QAASw0B,gBAAkB96D,KAAKumC,WAI1DhI,aAAc,WAEb,IAAI+jD,EAAK,IAAI5uD,EACTsnF,EAAK,IAAI50E,GAEb,OAAO,SAAuB4G,EAAQiuE,GAErC,IAAIC,EAAiBl7G,KAAK+6G,cAAez4B,GAAK/jD,aAAcyO,GAIxDuD,EAAe0qE,GAAwBD,EAAGrhD,gBAAiB3sB,GAC3D1G,EAAStmC,KAAKsmC,OAAOo1D,aAAcnrD,GAAe80B,YAKtD,OAFArlE,KAAKumC,UAAa20E,EAAen/B,IAAKz1C,GAE/BtmC,MAjBK,GAuBd6wF,UAAW,SAAWh/D,GAIrB,OAFA7xB,KAAKumC,SAAWvmC,KAAKumC,SAAW1U,EAAOkqD,IAAK/7E,KAAKsmC,QAE1CtmC,MAIRmwD,OAAQ,SAAW0J,GAElB,OAAOA,EAAMvzB,OAAO6pB,OAAQnwD,KAAKsmC,SAAcuzB,EAAMtzB,WAAavmC,KAAKumC,YA2BzEroC,OAAO20F,OAAQrsD,GAAQroC,WAEtBuG,IAAK,SAAW+hC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAEnC,IAAIC,EAAS/mC,KAAK+mC,OASlB,OAPAA,EAAQ,GAAItiC,KAAMgiC,GAClBM,EAAQ,GAAItiC,KAAMiiC,GAClBK,EAAQ,GAAItiC,KAAMkiC,GAClBI,EAAQ,GAAItiC,KAAMmiC,GAClBG,EAAQ,GAAItiC,KAAMoiC,GAClBE,EAAQ,GAAItiC,KAAMqiC,GAEX9mC,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAW02G,GAIhB,IAAM,IAFFp0E,EAAS/mC,KAAK+mC,OAER3pC,EAAI,EAAGA,EAAI,EAAGA,IAEvB2pC,EAAQ3pC,GAAIqH,KAAM02G,EAAQp0E,OAAQ3pC,IAInC,OAAO4C,MAIR2tC,cAAe,SAAWpqB,GAEzB,IAAIwjB,EAAS/mC,KAAK+mC,OACd03D,EAAKl7E,EAAEqQ,SACPwnF,EAAM3c,EAAI,GAAK4c,EAAM5c,EAAI,GAAK6c,EAAM7c,EAAI,GAAK8c,EAAM9c,EAAI,GACvD+c,EAAM/c,EAAI,GAAKgd,EAAMhd,EAAI,GAAKid,EAAMjd,EAAI,GAAKkd,EAAMld,EAAI,GACvDmd,EAAMnd,EAAI,GAAKod,EAAMpd,EAAI,GAAKqd,EAAOrd,EAAI,IAAMsd,EAAOtd,EAAI,IAC1Dud,EAAOvd,EAAI,IAAMwd,EAAOxd,EAAI,IAAMyd,EAAOzd,EAAI,IAAM0d,EAAO1d,EAAI,IASlE,OAPA13D,EAAQ,GAAImzE,cAAeqB,EAAMH,EAAKO,EAAMH,EAAKO,EAAOH,EAAKO,EAAOH,GAAO32C,YAC3Et+B,EAAQ,GAAImzE,cAAeqB,EAAMH,EAAKO,EAAMH,EAAKO,EAAOH,EAAKO,EAAOH,GAAO32C,YAC3Et+B,EAAQ,GAAImzE,cAAeqB,EAAMF,EAAKM,EAAMF,EAAKM,EAAOF,EAAKM,EAAOF,GAAO52C,YAC3Et+B,EAAQ,GAAImzE,cAAeqB,EAAMF,EAAKM,EAAMF,EAAKM,EAAOF,EAAKM,EAAOF,GAAO52C,YAC3Et+B,EAAQ,GAAImzE,cAAeqB,EAAMD,EAAKK,EAAMD,EAAKK,EAAOD,EAAMK,EAAOD,GAAO72C,YAC5Et+B,EAAQ,GAAImzE,cAAeqB,EAAMD,EAAKK,EAAMD,EAAKK,EAAOD,EAAMK,EAAOD,GAAO72C,YAErErlE,MAIR+pC,iBAAkB,WAEjB,IAAIwvE,EAAS,IAAItzE,GAEjB,OAAO,SAA2BqB,GAEjC,IAAIG,EAAWH,EAAOG,SAQtB,OANiC,OAA5BA,EAAS0K,gBACb1K,EAAS20E,wBAEV7C,EAAO90G,KAAMgjC,EAAS0K,gBACpB5T,aAAc+I,EAAOhJ,aAEhBt+B,KAAKq5G,iBAAkBE,IAdd,GAoBlBt8C,iBAAkB,WAEjB,IAAIs8C,EAAS,IAAItzE,GAEjB,OAAO,SAA2BxG,GAMjC,OAJA85E,EAAOrzE,OAAOxhC,IAAK,EAAG,EAAG,GACzB60G,EAAOpzE,OAAS,kBAChBozE,EAAOh7E,aAAckB,EAAOnB,aAErBt+B,KAAKq5G,iBAAkBE,IAVd,GAgBlBF,iBAAkB,SAAWE,GAM5B,IAAM,IAJFxyE,EAAS/mC,KAAK+mC,OACdb,EAASqzE,EAAOrzE,OAChBm2E,GAAc9C,EAAOpzE,OAEf/oC,EAAI,EAAGA,EAAI,EAAGA,IAIvB,GAFe2pC,EAAQ3pC,GAAI66G,gBAAiB/xE,GAE5Bm2E,EAEf,OAAO,EAMT,OAAO,GAIRtE,cAAe,WAEd,IAAIrxE,EAAK,IAAIhT,EACZiT,EAAK,IAAIjT,EAEV,OAAO,SAAwB+jF,GAI9B,IAAM,IAFF1wE,EAAS/mC,KAAK+mC,OAER3pC,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,IAAIy8D,EAAQ9yB,EAAQ3pC,GAEpBspC,EAAGlW,EAAIqpC,EAAMvzB,OAAO9V,EAAI,EAAIinF,EAAIr1G,IAAIouB,EAAIinF,EAAIp1G,IAAImuB,EAChDmW,EAAGnW,EAAIqpC,EAAMvzB,OAAO9V,EAAI,EAAIinF,EAAIp1G,IAAImuB,EAAIinF,EAAIr1G,IAAIouB,EAChDkW,EAAGtjB,EAAIy2C,EAAMvzB,OAAOljB,EAAI,EAAIq0F,EAAIr1G,IAAIghB,EAAIq0F,EAAIp1G,IAAI+gB,EAChDujB,EAAGvjB,EAAIy2C,EAAMvzB,OAAOljB,EAAI,EAAIq0F,EAAIp1G,IAAI+gB,EAAIq0F,EAAIr1G,IAAIghB,EAChDsjB,EAAGpU,EAAIunC,EAAMvzB,OAAOhU,EAAI,EAAImlF,EAAIr1G,IAAIkwB,EAAImlF,EAAIp1G,IAAIiwB,EAChDqU,EAAGrU,EAAIunC,EAAMvzB,OAAOhU,EAAI,EAAImlF,EAAIp1G,IAAIiwB,EAAImlF,EAAIr1G,IAAIkwB,EAEhD,IAAIgqF,EAAKziD,EAAMo+C,gBAAiBvxE,GAC5B61E,EAAK1iD,EAAMo+C,gBAAiBtxE,GAIhC,GAAK21E,EAAK,GAAKC,EAAK,EAEnB,OAAO,EAMT,OAAO,GAjCM,GAuCf79E,cAAe,SAAWinB,GAIzB,IAAM,IAFF5e,EAAS/mC,KAAK+mC,OAER3pC,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAK2pC,EAAQ3pC,GAAI66G,gBAAiBtyD,GAAU,EAE3C,OAAO,EAMT,OAAO,KAumBTlW,GAAM+sE,gBAAmB,MAAO,MAAO,MAAO,MAAO,MAAO,OAE5D/sE,GAAMG,aAAe,MAErB1xC,OAAOmB,iBAAkBowC,GAAMtxC,WAE9BqyB,GAEC/vB,IAAK,WAEJ,OAAOT,KAAKszB,IAIb5uB,IAAK,SAAWvF,GAEfa,KAAKszB,GAAKn0B,EACVa,KAAKw5F,qBAMPp2E,GAEC3iB,IAAK,WAEJ,OAAOT,KAAKuzB,IAIb7uB,IAAK,SAAWvF,GAEfa,KAAKuzB,GAAKp0B,EACVa,KAAKw5F,qBAMPlnE,GAEC7xB,IAAK,WAEJ,OAAOT,KAAKwzB,IAIb9uB,IAAK,SAAWvF,GAEfa,KAAKwzB,GAAKr0B,EACVa,KAAKw5F,qBAMP9pD,OAECjvC,IAAK,WAEJ,OAAOT,KAAK2vC,QAIbjrC,IAAK,SAAWvF,GAEfa,KAAK2vC,OAASxwC,EACda,KAAKw5F,uBAQRt7F,OAAO20F,OAAQpjD,GAAMtxC,WAEpBu7F,SAAS,EAETh1F,IAAK,SAAW8rB,EAAGpN,EAAGkP,EAAGod,GASxB,OAPA1vC,KAAKszB,GAAK9C,EACVxwB,KAAKuzB,GAAKnQ,EACVpjB,KAAKwzB,GAAKlB,EACVtyB,KAAK2vC,OAASD,GAAS1vC,KAAK2vC,OAE5B3vC,KAAKw5F,mBAEEx5F,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKszB,GAAItzB,KAAKuzB,GAAIvzB,KAAKwzB,GAAIxzB,KAAK2vC,SAI9DlrC,KAAM,SAAWg1F,GAShB,OAPAz5F,KAAKszB,GAAKmmE,EAAMnmE,GAChBtzB,KAAKuzB,GAAKkmE,EAAMlmE,GAChBvzB,KAAKwzB,GAAKimE,EAAMjmE,GAChBxzB,KAAK2vC,OAAS8pD,EAAM9pD,OAEpB3vC,KAAKw5F,mBAEEx5F,MAIRi6F,sBAAuB,SAAW12E,EAAGmsB,EAAO1F,GAE3C,IAAIkwC,EAAQ/oD,GAAM+oD,MAIdkd,EAAK7zE,EAAEqQ,SACPyjE,EAAMD,EAAI,GAAKE,EAAMF,EAAI,GAAKG,EAAMH,EAAI,GACxCI,EAAMJ,EAAI,GAAKK,EAAML,EAAI,GAAKM,EAAMN,EAAI,GACxCO,EAAMP,EAAI,GAAKQ,EAAMR,EAAI,GAAKS,EAAMT,EAAI,IA8G5C,MA1Ge,SAFf1nD,EAAQA,GAAS1vC,KAAK2vC,SAIrB3vC,KAAKuzB,GAAK7wB,KAAK+5G,KAAMviC,EAAOqd,GAAO,EAAG,IAEjC70F,KAAKoI,IAAKysF,GAAQ,QAEtBv3F,KAAKszB,GAAK5wB,KAAK+xE,OAASijB,EAAKG,GAC7B73F,KAAKwzB,GAAK9wB,KAAK+xE,OAAS6iB,EAAKD,KAI7Br3F,KAAKszB,GAAK5wB,KAAK+xE,MAAOmjB,EAAKH,GAC3Bz3F,KAAKwzB,GAAK,IAIU,QAAVkc,GAEX1vC,KAAKszB,GAAK5wB,KAAK+5G,MAAQviC,EAAOwd,GAAO,EAAG,IAEnCh1F,KAAKoI,IAAK4sF,GAAQ,QAEtB13F,KAAKuzB,GAAK7wB,KAAK+xE,MAAO8iB,EAAKM,GAC3B73F,KAAKwzB,GAAK9wB,KAAK+xE,MAAO+iB,EAAKC,KAI3Bz3F,KAAKuzB,GAAK7wB,KAAK+xE,OAASkjB,EAAKN,GAC7Br3F,KAAKwzB,GAAK,IAIU,QAAVkc,GAEX1vC,KAAKszB,GAAK5wB,KAAK+5G,KAAMviC,EAAO0d,GAAO,EAAG,IAEjCl1F,KAAKoI,IAAK8sF,GAAQ,QAEtB53F,KAAKuzB,GAAK7wB,KAAK+xE,OAASkjB,EAAKE,GAC7B73F,KAAKwzB,GAAK9wB,KAAK+xE,OAAS6iB,EAAKG,KAI7Bz3F,KAAKuzB,GAAK,EACVvzB,KAAKwzB,GAAK9wB,KAAK+xE,MAAO+iB,EAAKH,KAIP,QAAV3nD,GAEX1vC,KAAKuzB,GAAK7wB,KAAK+5G,MAAQviC,EAAOyd,GAAO,EAAG,IAEnCj1F,KAAKoI,IAAK6sF,GAAQ,QAEtB33F,KAAKszB,GAAK5wB,KAAK+xE,MAAOmjB,EAAKC,GAC3B73F,KAAKwzB,GAAK9wB,KAAK+xE,MAAO+iB,EAAKH,KAI3Br3F,KAAKszB,GAAK,EACVtzB,KAAKwzB,GAAK9wB,KAAK+xE,OAAS6iB,EAAKG,KAIT,QAAV/nD,GAEX1vC,KAAKwzB,GAAK9wB,KAAK+5G,KAAMviC,EAAOsd,GAAO,EAAG,IAEjC90F,KAAKoI,IAAK0sF,GAAQ,QAEtBx3F,KAAKszB,GAAK5wB,KAAK+xE,OAASijB,EAAKD,GAC7Bz3F,KAAKuzB,GAAK7wB,KAAK+xE,OAASkjB,EAAKN,KAI7Br3F,KAAKszB,GAAK,EACVtzB,KAAKuzB,GAAK7wB,KAAK+xE,MAAO8iB,EAAKM,KAIP,QAAVnoD,GAEX1vC,KAAKwzB,GAAK9wB,KAAK+5G,MAAQviC,EAAOod,GAAO,EAAG,IAEnC50F,KAAKoI,IAAKwsF,GAAQ,QAEtBt3F,KAAKszB,GAAK5wB,KAAK+xE,MAAOmjB,EAAKH,GAC3Bz3F,KAAKuzB,GAAK7wB,KAAK+xE,MAAO8iB,EAAKF,KAI3Br3F,KAAKszB,GAAK5wB,KAAK+xE,OAASijB,EAAKG,GAC7B73F,KAAKuzB,GAAK,IAMX90B,QAAQ4pC,KAAM,kEAAoEqH,GAInF1vC,KAAK2vC,OAASD,GAEE,IAAX1F,GAAmBhqC,KAAKw5F,mBAEtBx5F,MAIRswC,kBAAmB,WAElB,IAAItD,EAAS,IAAIrZ,EAEjB,OAAO,SAA4BkjD,EAAGnnC,EAAO1F,GAI5C,OAFAgD,EAAOgzD,2BAA4BnpB,GAE5B72E,KAAKi6F,sBAAuBjtD,EAAQ0C,EAAO1F,IARjC,GAcnB0yE,eAAgB,SAAWtyG,EAAGslC,GAE7B,OAAO1vC,KAAK0E,IAAK0F,EAAEomB,EAAGpmB,EAAEgZ,EAAGhZ,EAAEkoB,EAAGod,GAAS1vC,KAAK2vC,SAI/CgtE,QAAS,WAIR,IAAI9lC,EAAI,IAAIxjD,EAEZ,OAAO,SAAkBupF,GAIxB,OAFA/lC,EAAExmC,aAAcrwC,MAETA,KAAKswC,kBAAmBumC,EAAG+lC,IAV3B,GAgBTzsD,OAAQ,SAAWspC,GAElB,OAASA,EAAMnmE,KAAOtzB,KAAKszB,IAAUmmE,EAAMlmE,KAAOvzB,KAAKuzB,IAAUkmE,EAAMjmE,KAAOxzB,KAAKwzB,IAAUimE,EAAM9pD,SAAW3vC,KAAK2vC,QAIpHioB,UAAW,SAAWn3C,GASrB,OAPAzgB,KAAKszB,GAAK7S,EAAO,GACjBzgB,KAAKuzB,GAAK9S,EAAO,GACjBzgB,KAAKwzB,GAAK/S,EAAO,QACG1R,IAAf0R,EAAO,KAAoBzgB,KAAK2vC,OAASlvB,EAAO,IAErDzgB,KAAKw5F,mBAEEx5F,MAIRgsB,QAAS,SAAWvL,EAAOoR,GAU1B,YARe9iB,IAAV0R,IAAsBA,WACX1R,IAAX8iB,IAAuBA,EAAS,GAErCpR,EAAOoR,GAAW7xB,KAAKszB,GACvB7S,EAAOoR,EAAS,GAAM7xB,KAAKuzB,GAC3B9S,EAAOoR,EAAS,GAAM7xB,KAAKwzB,GAC3B/S,EAAOoR,EAAS,GAAM7xB,KAAK2vC,OAEpBlvB,GAIRo8F,UAAW,SAAWC,GAErB,OAAKA,EAEGA,EAAep4G,IAAK1E,KAAKszB,GAAItzB,KAAKuzB,GAAIvzB,KAAKwzB,IAI3C,IAAIE,EAAS1zB,KAAKszB,GAAItzB,KAAKuzB,GAAIvzB,KAAKwzB,KAM7C4c,SAAU,SAAWtvC,GAIpB,OAFAd,KAAKw5F,iBAAmB14F,EAEjBd,MAIRw5F,iBAAkB,eAcnBt7F,OAAO20F,OAAQhjD,GAAO1xC,WAErBuG,IAAK,SAAWq4G,GAEf/8G,KAAK8vC,KAAO,GAAKitE,EAAU,GAI5BvyG,OAAQ,SAAWuyG,GAElB/8G,KAAK8vC,MAAQ,GAAKitE,EAAU,GAI7BC,OAAQ,SAAWD,GAElB/8G,KAAK8vC,MAAQ,GAAKitE,EAAU,GAI7BjxG,QAAS,SAAWixG,GAEnB/8G,KAAK8vC,QAAY,GAAKitE,EAAU,IAIjC3wG,KAAM,SAAWo9B,GAEhB,OAAuC,IAA9BxpC,KAAK8vC,KAAOtG,EAAOsG,SAc9B,IAAIE,GAAa,EA+EjBD,GAASG,UAAY,IAAIxc,EAAS,EAAG,EAAG,GACxCqc,GAASU,yBAA0B,EAEnCvyC,OAAO20F,OAAQ9iD,GAAS5xC,UAAWmyB,EAAgBnyB,WAElD8+G,YAAY,EAEZ/6E,eAAgB,aAChBS,cAAe,aAEfu6E,YAAa,SAAWlwE,GAEvBhtC,KAAKgtC,OAAOlL,iBAAkBkL,EAAQhtC,KAAKgtC,QAE3ChtC,KAAKgtC,OAAO7K,UAAWniC,KAAK2W,SAAU3W,KAAKmwC,WAAYnwC,KAAKs8B,QAI7Dk/D,gBAAiB,SAAW3kB,GAI3B,OAFA72E,KAAKmwC,WAAWg1B,YAAa0R,GAEtB72E,MAIRm9G,yBAA0B,SAAWpjB,EAAMl1B,GAI1C7kE,KAAKmwC,WAAW2pD,iBAAkBC,EAAMl1B,IAIzCu4C,qBAAsB,SAAW3jB,GAEhCz5F,KAAKmwC,WAAWE,aAAcopD,GAAO,IAItC4jB,sBAAuB,SAAW95F,GAIjCvjB,KAAKmwC,WAAW8pD,sBAAuB12E,IAIxC+5F,0BAA2B,SAAWzmC,GAIrC72E,KAAKmwC,WAAW1rC,KAAMoyE,IAIvB0mC,aAAc,WAKb,IAAIC,EAAK,IAAInqF,EAEb,OAAO,SAAuB0mE,EAAMl1B,GAMnC,OAJA24C,EAAG1jB,iBAAkBC,EAAMl1B,GAE3B7kE,KAAKmwC,WAAW9C,SAAUmwE,GAEnBx9G,MAbK,GAmBdy9G,QAAS,WAER,IAAIn7B,EAAK,IAAI5uD,EAAS,EAAG,EAAG,GAE5B,OAAO,SAAkBmxC,GAExB,OAAO7kE,KAAKu9G,aAAcj7B,EAAIzd,IANvB,GAYTqqB,QAAS,WAER,IAAI5M,EAAK,IAAI5uD,EAAS,EAAG,EAAG,GAE5B,OAAO,SAAkBmxC,GAExB,OAAO7kE,KAAKu9G,aAAcj7B,EAAIzd,IANvB,GAYT64C,QAAS,WAER,IAAIp7B,EAAK,IAAI5uD,EAAS,EAAG,EAAG,GAE5B,OAAO,SAAkBmxC,GAExB,OAAO7kE,KAAKu9G,aAAcj7B,EAAIzd,IANvB,GAYT84C,gBAAiB,WAKhB,IAAIr7B,EAAK,IAAI5uD,EAEb,OAAO,SAA0BqmE,EAAM7+C,GAMtC,OAJAonC,EAAG79E,KAAMs1F,GAAOyB,gBAAiBx7F,KAAKmwC,YAEtCnwC,KAAK2W,SAAS8T,IAAK63D,EAAGxnB,eAAgB5f,IAE/Bl7C,MAbQ,GAmBjB49G,WAAY,WAEX,IAAIt7B,EAAK,IAAI5uD,EAAS,EAAG,EAAG,GAE5B,OAAO,SAAqBwnB,GAE3B,OAAOl7C,KAAK29G,gBAAiBr7B,EAAIpnC,IANvB,GAYZ2iE,WAAY,WAEX,IAAIv7B,EAAK,IAAI5uD,EAAS,EAAG,EAAG,GAE5B,OAAO,SAAqBwnB,GAE3B,OAAOl7C,KAAK29G,gBAAiBr7B,EAAIpnC,IANvB,GAYZ4iE,WAAY,WAEX,IAAIx7B,EAAK,IAAI5uD,EAAS,EAAG,EAAG,GAE5B,OAAO,SAAqBwnB,GAE3B,OAAOl7C,KAAK29G,gBAAiBr7B,EAAIpnC,IANvB,GAYZ6iE,aAAc,SAAWxoE,GAExB,OAAOA,EAAOhX,aAAcv+B,KAAKs+B,cAIlC0/E,aAAc,WAEb,IAAIhD,EAAK,IAAIrnF,EAEb,OAAO,SAAuB4hB,GAE7B,OAAOA,EAAOhX,aAAcy8E,EAAGtiE,WAAY14C,KAAKs+B,eANpC,GAYd6O,OAAQ,WAIP,IAAI6tE,EAAK,IAAIrnF,EAEb,OAAO,SAAiB4hB,GAElBv1C,KAAK2uE,SAETqsC,EAAG7tE,OAAQntC,KAAK2W,SAAU4+B,EAAQv1C,KAAKytC,IAIvCutE,EAAG7tE,OAAQoI,EAAQv1C,KAAK2W,SAAU3W,KAAKytC,IAIxCztC,KAAKmwC,WAAW8pD,sBAAuB+gB,IAlBjC,GAwBRvwF,IAAK,SAAW6c,GAEf,GAAKphC,UAAUvI,OAAS,EAAI,CAE3B,IAAM,IAAIP,EAAI,EAAGA,EAAI8I,UAAUvI,OAAQP,IAEtC4C,KAAKyqB,IAAKvkB,UAAW9I,IAItB,OAAO4C,KAIR,OAAKsnC,IAAWtnC,MAEfvB,QAAQqT,MAAO,kEAAmEw1B,GAC3EtnC,OAIDsnC,GAAUA,EAAO21E,YAEA,OAAlB31E,EAAO2I,QAEX3I,EAAO2I,OAAOV,OAAQjI,GAIvBA,EAAO2I,OAASjwC,KAChBsnC,EAAO4rD,eAAiBhuF,KAAM,UAE9BlF,KAAK0qC,SAAS/jC,KAAM2gC,IAIpB7oC,QAAQqT,MAAO,gEAAiEw1B,GAI1EtnC,OAIRuvC,OAAQ,SAAWjI,GAElB,GAAKphC,UAAUvI,OAAS,EAAI,CAE3B,IAAM,IAAIP,EAAI,EAAGA,EAAI8I,UAAUvI,OAAQP,IAEtC4C,KAAKuvC,OAAQrpC,UAAW9I,IAIzB,OAAO4C,KAIR,IAAIyI,EAAQzI,KAAK0qC,SAASn6B,QAAS+2B,GAYnC,OAViB,IAAZ7+B,IAEJ6+B,EAAO2I,OAAS,KAEhB3I,EAAO4rD,eAAiBhuF,KAAM,YAE9BlF,KAAK0qC,SAASvjC,OAAQsB,EAAO,IAIvBzI,MAIRi+G,cAAe,SAAW5uG,GAEzB,OAAOrP,KAAKk+G,oBAAqB,KAAM7uG,IAIxC8uG,gBAAiB,SAAWhyG,GAE3B,OAAOnM,KAAKk+G,oBAAqB,OAAQ/xG,IAI1C+xG,oBAAqB,SAAW/xG,EAAMhN,GAErC,GAAKa,KAAMmM,KAAWhN,EAAQ,OAAOa,KAErC,IAAM,IAAI5C,EAAI,EAAGI,EAAIwC,KAAK0qC,SAAS/sC,OAAQP,EAAII,EAAGJ,IAAO,CAExD,IACIkqC,EADQtnC,KAAK0qC,SAAUttC,GACR8gH,oBAAqB/xG,EAAMhN,GAE9C,QAAgB4P,IAAXu4B,EAEJ,OAAOA,IAUV82E,iBAAkB,SAAW9P,GAE5B,IAAIptG,EAASotG,GAAkB,IAAI56E,EAInC,OAFA1zB,KAAKotC,mBAAmB,GAEjBlsC,EAAO+rC,sBAAuBjtC,KAAKs+B,cAI3C+/E,mBAAoB,WAEnB,IAAI1nG,EAAW,IAAI+c,EACf4I,EAAQ,IAAI5I,EAEhB,OAAO,SAA6B46E,GAEnC,IAAIptG,EAASotG,GAAkB,IAAIj7E,EAMnC,OAJArzB,KAAKotC,mBAAmB,GAExBptC,KAAKs+B,YAAY6D,UAAWxrB,EAAUzV,EAAQo7B,GAEvCp7B,GAbW,GAmBpBo9G,iBAAkB,WAEjB,IAAInuE,EAAa,IAAI9c,EAErB,OAAO,SAA2Bi7E,GAEjC,IAAIptG,EAASotG,GAAkB,IAAI7+D,GAInC,OAFAzvC,KAAKq+G,mBAAoBluE,GAElBjvC,EAAOovC,kBAAmBH,EAAYnwC,KAAKu8B,SAASmT,OAAO,IAVlD,GAgBlB6uE,cAAe,WAEd,IAAI5nG,EAAW,IAAI+c,EACfyc,EAAa,IAAI9c,EAErB,OAAO,SAAwBi7E,GAE9B,IAAIptG,EAASotG,GAAkB,IAAI56E,EAMnC,OAJA1zB,KAAKotC,mBAAmB,GAExBptC,KAAKs+B,YAAY6D,UAAWxrB,EAAUw5B,EAAYjvC,GAE3CA,GAbM,GAmBfs9G,kBAAmB,WAElB,IAAIruE,EAAa,IAAI9c,EAErB,OAAO,SAA4Bi7E,GAElC,IAAIptG,EAASotG,GAAkB,IAAI56E,EAInC,OAFA1zB,KAAKq+G,mBAAoBluE,GAElBjvC,EAAOwD,IAAK,EAAG,EAAG,GAAI82F,gBAAiBrrD,IAV7B,GAgBnB08C,QAAS,aAETte,SAAU,SAAWztE,GAEpBA,EAAUd,MAIV,IAAM,IAFF0qC,EAAW1qC,KAAK0qC,SAEVttC,EAAI,EAAGI,EAAIktC,EAAS/sC,OAAQP,EAAII,EAAGJ,IAE5CstC,EAAUttC,GAAImxE,SAAUztE,IAM1B29G,gBAAiB,SAAW39G,GAE3B,IAAsB,IAAjBd,KAAKiiC,QAAV,CAEAnhC,EAAUd,MAIV,IAAM,IAFF0qC,EAAW1qC,KAAK0qC,SAEVttC,EAAI,EAAGI,EAAIktC,EAAS/sC,OAAQP,EAAII,EAAGJ,IAE5CstC,EAAUttC,GAAIqhH,gBAAiB39G,KAMjC49G,kBAAmB,SAAW59G,GAE7B,IAAImvC,EAASjwC,KAAKiwC,OAEF,OAAXA,IAEJnvC,EAAUmvC,GAEVA,EAAOyuE,kBAAmB59G,KAM5B+9E,aAAc,WAEb7+E,KAAKgtC,OAAO+2D,QAAS/jG,KAAK2W,SAAU3W,KAAKmwC,WAAYnwC,KAAKs8B,OAE1Dt8B,KAAK0wC,wBAAyB,GAI/BtD,kBAAmB,SAAWuxE,GAExB3+G,KAAKwwC,kBAAmBxwC,KAAK6+E,gBAE7B7+E,KAAK0wC,wBAA0BiuE,KAEd,OAAhB3+G,KAAKiwC,OAETjwC,KAAKs+B,YAAY75B,KAAMzE,KAAKgtC,QAI5BhtC,KAAKs+B,YAAYwD,iBAAkB9hC,KAAKiwC,OAAO3R,YAAat+B,KAAKgtC,QAIlEhtC,KAAK0wC,wBAAyB,EAE9BiuE,GAAQ,GAQT,IAAM,IAFFj0E,EAAW1qC,KAAK0qC,SAEVttC,EAAI,EAAGI,EAAIktC,EAAS/sC,OAAQP,EAAII,EAAGJ,IAE5CstC,EAAUttC,GAAIgwC,kBAAmBuxE,IAMnCj8F,OAAQ,SAAW6zE,GA6ClB,SAASqoB,EAAWC,EAASC,GAQ5B,YANiC/vG,IAA5B8vG,EAASC,EAAQ5tF,QAErB2tF,EAASC,EAAQ5tF,MAAS4tF,EAAQp8F,OAAQ6zE,IAIpCuoB,EAAQ5tF,KAmEhB,SAASqnF,EAAkBjxF,GAE1B,IAAIg5D,KACJ,IAAM,IAAIriF,KAAOqpB,EAAQ,CAExB,IAAI9mB,EAAO8mB,EAAOrpB,UACXuC,EAAKg2F,SACZlW,EAAO35E,KAAMnG,GAGd,OAAO8/E,EA/HR,IAAIy+B,OAA0BhwG,IAATwnF,GAA+B,KAATA,EAEvCj2E,KAKCy+F,IAGJxoB,GACCh8C,cACAykE,aACAx3D,YACAxzB,WAGD1T,EAAOk2E,UACN30E,QAAS,IACT3c,KAAM,SACNuxF,UAAW,oBAOb,IAAInvD,KAiCJ,GA/BAA,EAAOpW,KAAOlxB,KAAKkxB,KACnBoW,EAAOpiC,KAAOlF,KAAKkF,KAEA,KAAdlF,KAAKmM,OAAcm7B,EAAOn7B,KAAOnM,KAAKmM,MACF,OAApC9B,KAAKC,UAAWtK,KAAK4wC,YAAsBtJ,EAAOsJ,SAAW5wC,KAAK4wC,WAC9C,IAApB5wC,KAAK4pC,aAAsBtC,EAAOsC,YAAa,IACxB,IAAvB5pC,KAAK2wC,gBAAyBrJ,EAAOqJ,eAAgB,IACpC,IAAjB3wC,KAAKiiC,UAAoBqF,EAAOrF,SAAU,GAE/CqF,EAAO0F,OAAShtC,KAAKgtC,OAAOhhB,eAgBLjd,IAAlB/O,KAAKynC,WAETH,EAAOG,SAAWm3E,EAAWroB,EAAKh8C,WAAYv6C,KAAKynC,gBAI7B14B,IAAlB/O,KAAKgiC,SAET,GAAK32B,MAAMgX,QAASriB,KAAKgiC,UAAa,CAIrC,IAAM,IAFFi9E,KAEM7hH,EAAI,EAAGI,EAAIwC,KAAKgiC,SAASrkC,OAAQP,EAAII,EAAGJ,IAEjD6hH,EAAMt4G,KAAMi4G,EAAWroB,EAAKyoB,UAAWh/G,KAAKgiC,SAAU5kC,KAIvDkqC,EAAOtF,SAAWi9E,OAIlB33E,EAAOtF,SAAW48E,EAAWroB,EAAKyoB,UAAWh/G,KAAKgiC,UAQpD,GAAKhiC,KAAK0qC,SAAS/sC,OAAS,EAAI,CAE/B2pC,EAAOoD,YAEP,IAAUttC,EAAI,EAAGA,EAAI4C,KAAK0qC,SAAS/sC,OAAQP,IAE1CkqC,EAAOoD,SAAS/jC,KAAM3G,KAAK0qC,SAAUttC,GAAIslB,OAAQ6zE,GAAOjvD,QAM1D,GAAKy3E,EAAe,CAEnB,IAAIxkE,EAAag+D,EAAkBhiB,EAAKh8C,YACpCykE,EAAYzG,EAAkBhiB,EAAKyoB,WACnCx3D,EAAW+wD,EAAkBhiB,EAAK/uC,UAClCxzB,EAASukF,EAAkBhiB,EAAKviE,QAE/BumB,EAAW58C,OAAS,IAAI2iB,EAAOi6B,WAAaA,GAC5CykE,EAAUrhH,OAAS,IAAI2iB,EAAO0+F,UAAYA,GAC1Cx3D,EAAS7pD,OAAS,IAAI2iB,EAAOknC,SAAWA,GACxCxzB,EAAOr2B,OAAS,IAAI2iB,EAAO0T,OAASA,GAM1C,OAFA1T,EAAOgnB,OAASA,EAEThnB,GAqBR1Q,MAAO,SAAWg9E,GAEjB,OAAO,IAAI5sF,KAAKyH,aAAchD,KAAMzE,KAAM4sF,IAI3CnoF,KAAM,SAAWugB,EAAQ4nE,GA6BxB,QA3BmB79E,IAAd69E,IAA0BA,GAAY,GAE3C5sF,KAAKmM,KAAO6Y,EAAO7Y,KAEnBnM,KAAKytC,GAAGhpC,KAAMugB,EAAOyoB,IAErBztC,KAAK2W,SAASlS,KAAMugB,EAAOrO,UAC3B3W,KAAKmwC,WAAW1rC,KAAMugB,EAAOmrB,YAC7BnwC,KAAKs8B,MAAM73B,KAAMugB,EAAOsX,OAExBt8B,KAAKgtC,OAAOvoC,KAAMugB,EAAOgoB,QACzBhtC,KAAKs+B,YAAY75B,KAAMugB,EAAOsZ,aAE9Bt+B,KAAKwwC,iBAAmBxrB,EAAOwrB,iBAC/BxwC,KAAK0wC,uBAAyB1rB,EAAO0rB,uBAErC1wC,KAAKwpC,OAAOsG,KAAO9qB,EAAOwkB,OAAOsG,KACjC9vC,KAAKiiC,QAAUjd,EAAOid,QAEtBjiC,KAAK4pC,WAAa5kB,EAAO4kB,WACzB5pC,KAAK2wC,cAAgB3rB,EAAO2rB,cAE5B3wC,KAAK6pC,cAAgB7kB,EAAO6kB,cAC5B7pC,KAAKkhC,YAAclc,EAAOkc,YAE1BlhC,KAAK4wC,SAAWvmC,KAAK2Y,MAAO3Y,KAAKC,UAAW0a,EAAO4rB,YAEhC,IAAdg8C,EAEJ,IAAM,IAAIxvF,EAAI,EAAGA,EAAI4nB,EAAO0lB,SAAS/sC,OAAQP,IAAO,CAEnD,IAAI8hH,EAAQl6F,EAAO0lB,SAAUttC,GAC7B4C,KAAKyqB,IAAKy0F,EAAMtvG,SAMlB,OAAO5P,QAuBT6wC,GAAO1yC,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAEzDsJ,YAAaopC,GAEb89B,UAAU,EAEVlqE,KAAM,SAAWugB,EAAQ4nE,GAOxB,OALA78C,GAAS5xC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,EAAQ4nE,GAE5C5sF,KAAKw+B,mBAAmB/5B,KAAMugB,EAAOwZ,oBACrCx+B,KAAKy+B,iBAAiBh6B,KAAMugB,EAAOyZ,kBAE5Bz+B,MAIRw+G,kBAAmB,WAElB,IAAIruE,EAAa,IAAI9c,EAErB,OAAO,SAA4Bi7E,GAElC,IAAIptG,EAASotG,GAAkB,IAAI56E,EAInC,OAFA1zB,KAAKq+G,mBAAoBluE,GAElBjvC,EAAOwD,IAAK,EAAG,GAAK,GAAI82F,gBAAiBrrD,IAV/B,GAgBnB/C,kBAAmB,SAAWuxE,GAE7B5uE,GAAS5xC,UAAUivC,kBAAkB1vC,KAAMsC,KAAM2+G,GAEjD3+G,KAAKw+B,mBAAmBka,WAAY14C,KAAKs+B,cAI1C1uB,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,SAgCtC8wC,GAAmB3yC,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQm5B,GAAO1yC,YAEnEsJ,YAAaqpC,GAEbquE,sBAAsB,EAEtB16G,KAAM,SAAWugB,EAAQ4nE,GAcxB,OAZA/7C,GAAO1yC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,EAAQ4nE,GAE1C5sF,KAAK6W,KAAOmO,EAAOnO,KACnB7W,KAAK+wC,MAAQ/rB,EAAO+rB,MACpB/wC,KAAK4W,IAAMoO,EAAOpO,IAClB5W,KAAKgxC,OAAShsB,EAAOgsB,OACrBhxC,KAAK0hC,KAAO1c,EAAO0c,KACnB1hC,KAAK2hC,IAAM3c,EAAO2c,IAElB3hC,KAAKixC,KAAOjsB,EAAOisB,KACnBjxC,KAAKgf,KAAuB,OAAhBgG,EAAOhG,KAAgB,KAAO9gB,OAAO20F,UAAY7tE,EAAOhG,MAE7Dhf,MAIRo/G,cAAe,SAAUC,EAAWC,EAAY9uF,EAAGpN,EAAGqP,EAAOC,GAE5D1yB,KAAKgf,MACJqgG,UAAWA,EACXC,WAAYA,EACZC,QAAS/uF,EACTgvF,QAASp8F,EACTqP,MAAOA,EACPC,OAAQA,GAGT1yB,KAAK4sC,0BAIN6yE,gBAAiB,WAEhBz/G,KAAKgf,KAAO,KACZhf,KAAK4sC,0BAINA,uBAAwB,WAEvB,IAAIqpD,GAAOj2F,KAAK+wC,MAAQ/wC,KAAK6W,OAAW,EAAI7W,KAAKixC,MAC7CilD,GAAOl2F,KAAK4W,IAAM5W,KAAKgxC,SAAa,EAAIhxC,KAAKixC,MAC7CwmC,GAAOz3E,KAAK+wC,MAAQ/wC,KAAK6W,MAAS,EAClC6gE,GAAO13E,KAAK4W,IAAM5W,KAAKgxC,QAAW,EAElCn6B,EAAO4gE,EAAKwe,EACZllD,EAAQ0mC,EAAKwe,EACbr/E,EAAM8gE,EAAKwe,EACXllD,EAAS0mC,EAAKwe,EAElB,GAAmB,OAAdl2F,KAAKgf,KAAgB,CAEzB,IAAI0gG,EAAQ1/G,KAAKixC,MAASjxC,KAAKgf,KAAKyT,MAAQzyB,KAAKgf,KAAKqgG,WAClDM,EAAQ3/G,KAAKixC,MAASjxC,KAAKgf,KAAK0T,OAAS1yB,KAAKgf,KAAKsgG,YACnDM,GAAW5/G,KAAK+wC,MAAQ/wC,KAAK6W,MAAS7W,KAAKgf,KAAKyT,MAChDotF,GAAW7/G,KAAK4W,IAAM5W,KAAKgxC,QAAWhxC,KAAKgf,KAAK0T,OAGpDqe,GADAl6B,GAAQ+oG,GAAW5/G,KAAKgf,KAAKugG,QAAUG,IACxBE,GAAW5/G,KAAKgf,KAAKyT,MAAQitF,GAE5C1uE,GADAp6B,GAAOipG,GAAW7/G,KAAKgf,KAAKwgG,QAAUG,IACvBE,GAAW7/G,KAAKgf,KAAK0T,OAASitF,GAI9C3/G,KAAKy+B,iBAAiB2lE,iBAAkBvtF,EAAMk6B,EAAOn6B,EAAKo6B,EAAQhxC,KAAK0hC,KAAM1hC,KAAK2hC,MAInFjf,OAAQ,SAAW6zE,GAElB,IAAI/1F,EAAOuvC,GAAS5xC,UAAUukB,OAAOhlB,KAAMsC,KAAMu2F,GAYjD,OAVA/1F,EAAK8mC,OAAO2J,KAAOjxC,KAAKixC,KACxBzwC,EAAK8mC,OAAOzwB,KAAO7W,KAAK6W,KACxBrW,EAAK8mC,OAAOyJ,MAAQ/wC,KAAK+wC,MACzBvwC,EAAK8mC,OAAO1wB,IAAM5W,KAAK4W,IACvBpW,EAAK8mC,OAAO0J,OAAShxC,KAAKgxC,OAC1BxwC,EAAK8mC,OAAO5F,KAAO1hC,KAAK0hC,KACxBlhC,EAAK8mC,OAAO3F,IAAM3hC,KAAK2hC,IAEJ,OAAd3hC,KAAKgf,OAAgBxe,EAAK8mC,OAAOtoB,KAAO9gB,OAAO20F,UAAY7yF,KAAKgf,OAE9Dxe,KAoCT0wC,GAAkB/yC,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQm5B,GAAO1yC,YAElEsJ,YAAaypC,GAEb4uE,qBAAqB,EAErBr7G,KAAM,SAAWugB,EAAQ4nE,GAiBxB,OAfA/7C,GAAO1yC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,EAAQ4nE,GAE1C5sF,KAAKmxC,IAAMnsB,EAAOmsB,IAClBnxC,KAAKixC,KAAOjsB,EAAOisB,KAEnBjxC,KAAK0hC,KAAO1c,EAAO0c,KACnB1hC,KAAK2hC,IAAM3c,EAAO2c,IAClB3hC,KAAKqxC,MAAQrsB,EAAOqsB,MAEpBrxC,KAAKoxC,OAASpsB,EAAOosB,OACrBpxC,KAAKgf,KAAuB,OAAhBgG,EAAOhG,KAAgB,KAAO9gB,OAAO20F,UAAY7tE,EAAOhG,MAEpEhf,KAAKsxC,UAAYtsB,EAAOssB,UACxBtxC,KAAKuxC,WAAavsB,EAAOusB,WAElBvxC,MAYR+/G,eAAgB,SAAWC,GAG1B,IAAIC,EAAe,GAAMjgH,KAAKkgH,gBAAkBF,EAEhDhgH,KAAKmxC,IAAsB,EAAhBhgB,GAAMqiE,QAAc9wF,KAAKy9G,KAAMF,GAC1CjgH,KAAK4sC,0BAONwzE,eAAgB,WAEf,IAAIH,EAAev9G,KAAKoqG,IAAqB,GAAhB37E,GAAMuqD,QAAgB17E,KAAKmxC,KAExD,MAAO,GAAMnxC,KAAKkgH,gBAAkBD,GAIrCI,gBAAiB,WAEhB,OAAuB,EAAhBlvF,GAAMqiE,QAAc9wF,KAAKy9G,KAC9Bz9G,KAAKoqG,IAAqB,GAAhB37E,GAAMuqD,QAAgB17E,KAAKmxC,KAAQnxC,KAAKixC,OAIrDqvE,aAAc,WAGb,OAAOtgH,KAAKsxC,UAAY5uC,KAAKN,IAAKpC,KAAKoxC,OAAQ,IAIhD8uE,cAAe,WAGd,OAAOlgH,KAAKsxC,UAAY5uC,KAAKL,IAAKrC,KAAKoxC,OAAQ,IAuChDguE,cAAe,SAAWC,EAAWC,EAAY9uF,EAAGpN,EAAGqP,EAAOC,GAE7D1yB,KAAKoxC,OAASiuE,EAAYC,EAE1Bt/G,KAAKgf,MACJqgG,UAAWA,EACXC,WAAYA,EACZC,QAAS/uF,EACTgvF,QAASp8F,EACTqP,MAAOA,EACPC,OAAQA,GAGT1yB,KAAK4sC,0BAIN6yE,gBAAiB,WAEhBz/G,KAAKgf,KAAO,KACZhf,KAAK4sC,0BAINA,uBAAwB,WAEvB,IAAIlL,EAAO1hC,KAAK0hC,KACf9qB,EAAM8qB,EAAOh/B,KAAKoqG,IACA,GAAhB37E,GAAMuqD,QAAgB17E,KAAKmxC,KAAQnxC,KAAKixC,KAC1Cve,EAAS,EAAI9b,EACb6b,EAAQzyB,KAAKoxC,OAAS1e,EACtB7b,GAAS,GAAM4b,EACfzT,EAAOhf,KAAKgf,KAEb,GAAc,OAATA,EAAgB,CAEpB,IAAIqgG,EAAYrgG,EAAKqgG,UACpBC,EAAatgG,EAAKsgG,WAEnBzoG,GAAQmI,EAAKugG,QAAU9sF,EAAQ4sF,EAC/BzoG,GAAOoI,EAAKwgG,QAAU9sF,EAAS4sF,EAC/B7sF,GAASzT,EAAKyT,MAAQ4sF,EACtB3sF,GAAU1T,EAAK0T,OAAS4sF,EAIzB,IAAIiB,EAAOvgH,KAAKuxC,WACF,IAATgvE,IAAa1pG,GAAQ6qB,EAAO6+E,EAAOvgH,KAAKsgH,gBAE7CtgH,KAAKy+B,iBAAiB0lE,gBAAiBttF,EAAMA,EAAO4b,EAAO7b,EAAKA,EAAM8b,EAAQgP,EAAM1hC,KAAK2hC,MAI1Fjf,OAAQ,SAAW6zE,GAElB,IAAI/1F,EAAOuvC,GAAS5xC,UAAUukB,OAAOhlB,KAAMsC,KAAMu2F,GAgBjD,OAdA/1F,EAAK8mC,OAAO6J,IAAMnxC,KAAKmxC,IACvB3wC,EAAK8mC,OAAO2J,KAAOjxC,KAAKixC,KAExBzwC,EAAK8mC,OAAO5F,KAAO1hC,KAAK0hC,KACxBlhC,EAAK8mC,OAAO3F,IAAM3hC,KAAK2hC,IACvBnhC,EAAK8mC,OAAO+J,MAAQrxC,KAAKqxC,MAEzB7wC,EAAK8mC,OAAO8J,OAASpxC,KAAKoxC,OAEP,OAAdpxC,KAAKgf,OAAgBxe,EAAK8mC,OAAOtoB,KAAO9gB,OAAO20F,UAAY7yF,KAAKgf,OAErExe,EAAK8mC,OAAOgK,UAAYtxC,KAAKsxC,UAC7B9wC,EAAK8mC,OAAOiK,WAAavxC,KAAKuxC,WAEvB/wC,KA2BTtC,OAAO20F,OAAQrhD,GAAMrzC,WAEpByR,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWugB,GAEhBhlB,KAAK9C,EAAI8nB,EAAO9nB,EAChB8C,KAAKwH,EAAIwd,EAAOxd,EAChBxH,KAAKuI,EAAIyc,EAAOzc,EAEhBvI,KAAKsmC,OAAO7hC,KAAMugB,EAAOshB,QACzBtmC,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OAExBxI,KAAKsqC,cAAgBtlB,EAAOslB,cAE5B,IAAM,IAAIltC,EAAI,EAAGivC,EAAKrnB,EAAO0sB,cAAc/zC,OAAQP,EAAIivC,EAAIjvC,IAE1D4C,KAAK0xC,cAAet0C,GAAM4nB,EAAO0sB,cAAet0C,GAAIwS,QAIrD,IAAM,IAAIxS,EAAI,EAAGivC,EAAKrnB,EAAOoe,aAAazlC,OAAQP,EAAIivC,EAAIjvC,IAEzD4C,KAAKojC,aAAchmC,GAAM4nB,EAAOoe,aAAchmC,GAAIwS,QAInD,OAAO5P,QAeT,IAAIa,GAAQ,EAwCZ3C,OAAO20F,OAAQhhD,GAAS1zC,UAAWmyB,EAAgBnyB,WAElDgqC,YAAY,EAEZ+0E,YAAa,SAAWlwE,GAIvB,IAAM,IAFFuD,GAAe,IAAInK,IAAUuzB,gBAAiB3sB,GAExC5vC,EAAI,EAAGivC,EAAKrsC,KAAK85B,SAASn8B,OAAQP,EAAIivC,EAAIjvC,IAEtC4C,KAAK85B,SAAU18B,GACrBmhC,aAAcyO,GAItB,IAAM,IAAI5vC,EAAI,EAAGivC,EAAKrsC,KAAK+5B,MAAMp8B,OAAQP,EAAIivC,EAAIjvC,IAAO,CAEvD,IAAIowC,EAAOxtC,KAAK+5B,MAAO38B,GACvBowC,EAAKlH,OAAOo1D,aAAcnrD,GAAe80B,YAEzC,IAAM,IAAIl7D,EAAI,EAAGo1B,EAAKiO,EAAKkE,cAAc/zC,OAAQwM,EAAIo1B,EAAIp1B,IAExDqjC,EAAKkE,cAAevnC,GAAIuxF,aAAcnrD,GAAe80B,YAqBvD,OAf0B,OAArBrlE,KAAKkyC,aAETlyC,KAAKwgH,qBAIuB,OAAxBxgH,KAAKmyC,gBAETnyC,KAAKo8G,wBAINp8G,KAAKqyC,oBAAqB,EAC1BryC,KAAKuyC,mBAAoB,EAElBvyC,MAIRy9G,QAAS,WAIR,IAAIzC,EAAK,IAAIrnF,EAEb,OAAO,SAAkBkxC,GAMxB,OAJAm2C,EAAGzX,cAAe1+B,GAElB7kE,KAAKk9G,YAAalC,GAEXh7G,MAZA,GAkBTkvF,QAAS,WAIR,IAAI8rB,EAAK,IAAIrnF,EAEb,OAAO,SAAkBkxC,GAMxB,OAJAm2C,EAAGxX,cAAe3+B,GAElB7kE,KAAKk9G,YAAalC,GAEXh7G,MAZA,GAkBT09G,QAAS,WAIR,IAAI1C,EAAK,IAAIrnF,EAEb,OAAO,SAAkBkxC,GAMxB,OAJAm2C,EAAGvX,cAAe5+B,GAElB7kE,KAAKk9G,YAAalC,GAEXh7G,MAZA,GAkBT6wF,UAAW,WAIV,IAAImqB,EAAK,IAAIrnF,EAEb,OAAO,SAAoBnD,EAAGpN,EAAGkP,GAMhC,OAJA0oF,EAAG9tE,gBAAiB1c,EAAGpN,EAAGkP,GAE1BtyB,KAAKk9G,YAAalC,GAEXh7G,MAZE,GAkBXs8B,MAAO,WAIN,IAAI0+E,EAAK,IAAIrnF,EAEb,OAAO,SAAgBnD,EAAGpN,EAAGkP,GAM5B,OAJA0oF,EAAGnX,UAAWrzE,EAAGpN,EAAGkP,GAEpBtyB,KAAKk9G,YAAalC,GAEXh7G,MAZF,GAkBPmtC,OAAQ,WAEP,IAAIrvC,EAAM,IAAIiyC,GAEd,OAAO,SAAiBwF,GAEvBz3C,EAAIqvC,OAAQoI,GAEZz3C,EAAI+gF,eAEJ7+E,KAAKk9G,YAAap/G,EAAIkvC,SAVhB,GAgBRoH,mBAAoB,SAAW3M,GAiD9B,SAASg5E,EAASvjH,EAAGsK,EAAGe,EAAG+hC,GAE1B,IAGIkD,EAAO,IAAIgE,GAAOt0C,EAAGsK,EAAGe,OAHIwG,IAAZ2kC,GAA0BgtE,EAAaxjH,GAAI0S,QAAS8wG,EAAal5G,GAAIoI,QAAS8wG,EAAan4G,GAAIqH,iBACrFb,IAAX9E,GAAyB++B,EAAM/+B,OAAQ/M,GAAI0S,QAASo5B,EAAM/+B,OAAQzC,GAAIoI,QAASo5B,EAAM/+B,OAAQ1B,GAAIqH,YAExD06B,GAE5DtB,EAAMjP,MAAMpzB,KAAM6mC,QAELz+B,IAAR4kC,GAEJ3K,EAAM8I,cAAe,GAAInrC,MAAQg6G,EAASzjH,GAAI0S,QAAS+wG,EAASn5G,GAAIoI,QAAS+wG,EAASp4G,GAAIqH,eAI7Eb,IAAT6kC,GAEJ5K,EAAM8I,cAAe,GAAInrC,MAAQi6G,EAAU1jH,GAAI0S,QAASgxG,EAAUp5G,GAAIoI,QAASgxG,EAAUr4G,GAAIqH,UAhE/F,IAAIo5B,EAAQhpC,KAERyzC,EAA6B,OAAnBhM,EAASh/B,MAAiBg/B,EAASh/B,MAAMgY,WAAQ1R,EAC3D+sB,EAAa2L,EAAS3L,WAEtBqyD,EAAYryD,EAAWnlB,SAAS8J,MAChCizB,OAAgC3kC,IAAtB+sB,EAAWwK,OAAuBxK,EAAWwK,OAAO7lB,WAAQ1R,EACtE9E,OAA8B8E,IAArB+sB,EAAWtzB,MAAsBszB,EAAWtzB,MAAMiY,WAAQ1R,EACnE4kC,OAAwB5kC,IAAlB+sB,EAAWG,GAAmBH,EAAWG,GAAGxb,WAAQ1R,EAC1D6kC,OAA0B7kC,IAAnB+sB,EAAWwJ,IAAoBxJ,EAAWwJ,IAAI7kB,WAAQ1R,OAEnDA,IAAT6kC,IAAqB5zC,KAAK8xC,cAAe,OAM9C,IAAM,IAJF4uE,KACAC,KACAC,KAEMxjH,EAAI,EAAG+M,EAAI,EAAG/M,EAAI+wF,EAAUxwF,OAAQP,GAAK,EAAG+M,GAAK,EAE1D6+B,EAAMlP,SAASnzB,KAAM,IAAI+sB,EAASy6D,EAAW/wF,GAAK+wF,EAAW/wF,EAAI,GAAK+wF,EAAW/wF,EAAI,UAEpE2R,IAAZ2kC,GAEJgtE,EAAY/5G,KAAM,IAAI+sB,EAASggB,EAASt2C,GAAKs2C,EAASt2C,EAAI,GAAKs2C,EAASt2C,EAAI,UAI7D2R,IAAX9E,GAEJ++B,EAAM/+B,OAAOtD,KAAM,IAAI8yB,EAAOxvB,EAAQ7M,GAAK6M,EAAQ7M,EAAI,GAAK6M,EAAQ7M,EAAI,UAI5D2R,IAAR4kC,GAEJgtE,EAAQh6G,KAAM,IAAI4pB,EAASojB,EAAKxpC,GAAKwpC,EAAKxpC,EAAI,UAIjC4E,IAAT6kC,GAEJgtE,EAASj6G,KAAM,IAAI4pB,EAASqjB,EAAMzpC,GAAKypC,EAAMzpC,EAAI,KA6BnD,IAAI8/B,EAASxC,EAASwC,OAEtB,GAAKA,EAAOtsC,OAAS,EAEpB,IAAUP,EAAI,EAAGA,EAAI6sC,EAAOtsC,OAAQP,IAOnC,IAAM,IALFgtC,EAAQH,EAAQ7sC,GAEhBkE,EAAQ8oC,EAAM9oC,MAGR6I,EAAI7I,EAAOi+B,EAAKj+B,EAFd8oC,EAAMvpC,MAEuBsJ,EAAIo1B,EAAIp1B,GAAK,OAEpC4E,IAAZ0kC,EAEJgtE,EAAShtE,EAAStpC,GAAKspC,EAAStpC,EAAI,GAAKspC,EAAStpC,EAAI,GAAKigC,EAAME,eAIjEm2E,EAASt2G,EAAGA,EAAI,EAAGA,EAAI,EAAGigC,EAAME,oBAUnC,QAAiBv7B,IAAZ0kC,EAEJ,IAAUr2C,EAAI,EAAGA,EAAIq2C,EAAQ91C,OAAQP,GAAK,EAEzCqjH,EAAShtE,EAASr2C,GAAKq2C,EAASr2C,EAAI,GAAKq2C,EAASr2C,EAAI,SAMvD,IAAUA,EAAI,EAAGA,EAAI+wF,EAAUxwF,OAAS,EAAGP,GAAK,EAE/CqjH,EAASrjH,EAAGA,EAAI,EAAGA,EAAI,GAsB1B,OAdA4C,KAAK27E,qBAEyB,OAAzBl0C,EAASyK,cAEblyC,KAAKkyC,YAAczK,EAASyK,YAAYtiC,SAIR,OAA5B63B,EAAS0K,iBAEbnyC,KAAKmyC,eAAiB1K,EAAS0K,eAAeviC,SAIxC5P,MAIRkmC,OAAQ,WAEPlmC,KAAKwgH,qBAEL,IAAI3uF,EAAS7xB,KAAKkyC,YAAYylE,YAAY/hB,SAI1C,OAFA51F,KAAK6wF,UAAWh/D,EAAOrB,EAAGqB,EAAOzO,EAAGyO,EAAOS,GAEpCT,GAIRwzC,UAAW,WAEVrlE,KAAKo8G,wBAEL,IAAIl2E,EAASlmC,KAAKmyC,eAAejM,OAC7BC,EAASnmC,KAAKmyC,eAAehM,OAE7BppC,EAAe,IAAXopC,EAAe,EAAI,EAAMA,EAE7B6G,EAAS,IAAIrZ,EAUjB,OATAqZ,EAAOtoC,IACN3H,EAAG,EAAG,GAAKA,EAAImpC,EAAO1V,EACtB,EAAGzzB,EAAG,GAAKA,EAAImpC,EAAO9iB,EACtB,EAAG,EAAGrmB,GAAKA,EAAImpC,EAAO5T,EACtB,EAAG,EAAG,EAAG,GAGVtyB,KAAKk9G,YAAalwE,GAEXhtC,MAIR27E,mBAAoB,WAInB,IAAM,IAFFz0E,EAAK,IAAIwsB,EAAW3U,EAAK,IAAI2U,EAEvBr2B,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAAO,CAEvD,IAAImwC,EAAOxtC,KAAK+5B,MAAO18B,GAEnByjH,EAAK9gH,KAAK85B,SAAU0T,EAAKtwC,GACzB6jH,EAAK/gH,KAAK85B,SAAU0T,EAAKhmC,GACzBw5G,EAAKhhH,KAAK85B,SAAU0T,EAAKjlC,GAE7BrB,EAAG2rE,WAAYmuC,EAAID,GACnBhiG,EAAG8zD,WAAYiuC,EAAIC,GACnB75G,EAAGi1F,MAAOp9E,GAEV7X,EAAGm+D,YAEH73B,EAAKlH,OAAO7hC,KAAMyC,KAMpB4tE,qBAAsB,SAAWmsC,QAEVlyG,IAAjBkyG,IAA6BA,GAAe,GAEjD,IAAI72G,EAAG82G,EAAI7jH,EAAGwjH,EAAIrzE,EAAM1T,EAIxB,IAFAA,EAAW,IAAIzuB,MAAOrL,KAAK85B,SAASn8B,QAE9ByM,EAAI,EAAG82G,EAAKlhH,KAAK85B,SAASn8B,OAAQyM,EAAI82G,EAAI92G,IAE/C0vB,EAAU1vB,GAAM,IAAIspB,EAIrB,GAAKutF,EAAe,CAKnB,IAAIH,EAAIC,EAAIC,EACR95G,EAAK,IAAIwsB,EAAW3U,EAAK,IAAI2U,EAEjC,IAAMr2B,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAE5CmwC,EAAOxtC,KAAK+5B,MAAO18B,GAEnByjH,EAAK9gH,KAAK85B,SAAU0T,EAAKtwC,GACzB6jH,EAAK/gH,KAAK85B,SAAU0T,EAAKhmC,GACzBw5G,EAAKhhH,KAAK85B,SAAU0T,EAAKjlC,GAEzBrB,EAAG2rE,WAAYmuC,EAAID,GACnBhiG,EAAG8zD,WAAYiuC,EAAIC,GACnB75G,EAAGi1F,MAAOp9E,GAEV+a,EAAU0T,EAAKtwC,GAAIutB,IAAKvjB,GACxB4yB,EAAU0T,EAAKhmC,GAAIijB,IAAKvjB,GACxB4yB,EAAU0T,EAAKjlC,GAAIkiB,IAAKvjB,QAQzB,IAFAlH,KAAK27E,qBAECt+E,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAI5Cy8B,GAFA0T,EAAOxtC,KAAK+5B,MAAO18B,IAEJH,GAAIutB,IAAK+iB,EAAKlH,QAC7BxM,EAAU0T,EAAKhmC,GAAIijB,IAAK+iB,EAAKlH,QAC7BxM,EAAU0T,EAAKjlC,GAAIkiB,IAAK+iB,EAAKlH,QAM/B,IAAMl8B,EAAI,EAAG82G,EAAKlhH,KAAK85B,SAASn8B,OAAQyM,EAAI82G,EAAI92G,IAE/C0vB,EAAU1vB,GAAIi7D,YAIf,IAAMhoE,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAAO,CAInD,IAAIq0C,GAFJlE,EAAOxtC,KAAK+5B,MAAO18B,IAEMq0C,cAEK,IAAzBA,EAAc/zC,QAElB+zC,EAAe,GAAIjtC,KAAMq1B,EAAU0T,EAAKtwC,IACxCw0C,EAAe,GAAIjtC,KAAMq1B,EAAU0T,EAAKhmC,IACxCkqC,EAAe,GAAIjtC,KAAMq1B,EAAU0T,EAAKjlC,MAIxCmpC,EAAe,GAAM5X,EAAU0T,EAAKtwC,GAAI0S,QACxC8hC,EAAe,GAAM5X,EAAU0T,EAAKhmC,GAAIoI,QACxC8hC,EAAe,GAAM5X,EAAU0T,EAAKjlC,GAAIqH,SAMrC5P,KAAK+5B,MAAMp8B,OAAS,IAExBqC,KAAKuyC,mBAAoB,IAM3B4uE,yBAA0B,WAEzB,IAAI9jH,EAAGwjH,EAAIrzE,EAIX,IAFAxtC,KAAK27E,qBAECt+E,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAAO,CAInD,IAAIq0C,GAFJlE,EAAOxtC,KAAK+5B,MAAO18B,IAEMq0C,cAEK,IAAzBA,EAAc/zC,QAElB+zC,EAAe,GAAIjtC,KAAM+oC,EAAKlH,QAC9BoL,EAAe,GAAIjtC,KAAM+oC,EAAKlH,QAC9BoL,EAAe,GAAIjtC,KAAM+oC,EAAKlH,UAI9BoL,EAAe,GAAMlE,EAAKlH,OAAO12B,QACjC8hC,EAAe,GAAMlE,EAAKlH,OAAO12B,QACjC8hC,EAAe,GAAMlE,EAAKlH,OAAO12B,SAM9B5P,KAAK+5B,MAAMp8B,OAAS,IAExBqC,KAAKuyC,mBAAoB,IAM3B6uE,oBAAqB,WAEpB,IAAIhkH,EAAGivC,EAAIhvC,EAAGwjH,EAAIrzE,EAMlB,IAAMnwC,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAgB5C,KAdAmwC,EAAOxtC,KAAK+5B,MAAO18B,IAEPgkH,qBAMX7zE,EAAK6zE,qBAAqB58G,KAAM+oC,EAAKlH,QAJrCkH,EAAK6zE,qBAAuB7zE,EAAKlH,OAAO12B,QAQlC49B,EAAK8zE,0BAA0B9zE,EAAK8zE,4BAErClkH,EAAI,EAAGivC,EAAKmB,EAAKkE,cAAc/zC,OAAQP,EAAIivC,EAAIjvC,IAE7CowC,EAAK8zE,wBAAyBlkH,GAMpCowC,EAAK8zE,wBAAyBlkH,GAAIqH,KAAM+oC,EAAKkE,cAAet0C,IAJ5DowC,EAAK8zE,wBAAyBlkH,GAAMowC,EAAKkE,cAAet0C,GAAIwS,QAc/D,IAAI2xG,EAAS,IAAI1vE,GAGjB,IAFA0vE,EAAOxnF,MAAQ/5B,KAAK+5B,MAEd38B,EAAI,EAAGivC,EAAKrsC,KAAK8kC,aAAannC,OAAQP,EAAIivC,EAAIjvC,IAAO,CAI1D,IAAO4C,KAAK+kC,aAAc3nC,GAAM,CAE/B4C,KAAK+kC,aAAc3nC,MACnB4C,KAAK+kC,aAAc3nC,GAAIokH,eACvBxhH,KAAK+kC,aAAc3nC,GAAIs0C,iBAEvB,IAAI+vE,EAAiBzhH,KAAK+kC,aAAc3nC,GAAIokH,YACxCE,EAAmB1hH,KAAK+kC,aAAc3nC,GAAIs0C,cAI9C,IAAMr0C,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAE5CskH,EAAa,IAAIjuF,EACjBge,GAAkBx0C,EAAG,IAAIw2B,EAAWlsB,EAAG,IAAIksB,EAAWnrB,EAAG,IAAImrB,GAE7D+tF,EAAe96G,KAAMg7G,GACrBD,EAAiB/6G,KAAM+qC,GAMzB,IAAI3M,EAAe/kC,KAAK+kC,aAAc3nC,GAItCmkH,EAAOznF,SAAW95B,KAAK8kC,aAAc1nC,GAAI08B,SAIzCynF,EAAO5lC,qBACP4lC,EAAOzsC,uBAIP,IAAI6sC,EAAYjwE,EAEhB,IAAMr0C,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAE5CmwC,EAAOxtC,KAAK+5B,MAAO18B,GAEnBskH,EAAa58E,EAAay8E,YAAankH,GACvCq0C,EAAgB3M,EAAa2M,cAAer0C,GAE5CskH,EAAWl9G,KAAM+oC,EAAKlH,QAEtBoL,EAAcx0C,EAAEuH,KAAM+oC,EAAKkE,cAAe,IAC1CA,EAAclqC,EAAE/C,KAAM+oC,EAAKkE,cAAe,IAC1CA,EAAcnpC,EAAE9D,KAAM+oC,EAAKkE,cAAe,IAQ5C,IAAMr0C,EAAI,EAAGwjH,EAAK7gH,KAAK+5B,MAAMp8B,OAAQN,EAAIwjH,EAAIxjH,KAE5CmwC,EAAOxtC,KAAK+5B,MAAO18B,IAEdipC,OAASkH,EAAK6zE,qBACnB7zE,EAAKkE,cAAgBlE,EAAK8zE,yBAM5BM,qBAAsB,WAKrB,IAAM,IAHFv+F,EAAI,EACJyW,EAAW95B,KAAK85B,SAEV18B,EAAI,EAAGivC,EAAKvS,EAASn8B,OAAQP,EAAIivC,EAAIjvC,IAEzCA,EAAI,IAERimB,GAAKyW,EAAU18B,GAAI24F,WAAYj8D,EAAU18B,EAAI,KAI9C4C,KAAKiyC,cAAe70C,GAAMimB,GAM5Bm9F,mBAAoB,WAEO,OAArBxgH,KAAKkyC,cAETlyC,KAAKkyC,YAAc,IAAIlM,GAIxBhmC,KAAKkyC,YAAYmlE,cAAer3G,KAAK85B,WAItCsiF,sBAAuB,WAEO,OAAxBp8G,KAAKmyC,iBAETnyC,KAAKmyC,eAAiB,IAAIlM,IAI3BjmC,KAAKmyC,eAAeklE,cAAer3G,KAAK85B,WAIzCujD,MAAO,SAAW51C,EAAUuF,EAAQ60E,GAEnC,GAASp6E,GAAYA,EAASU,WAA9B,CAOA,IAAIoI,EACHuxE,EAAe9hH,KAAK85B,SAASn8B,OAC7BokH,EAAY/hH,KAAK85B,SACjBkoF,EAAYv6E,EAAS3N,SACrBmoF,EAASjiH,KAAK+5B,MACdmoF,EAASz6E,EAAS1N,MAClBooF,EAAOniH,KAAK8xC,cAAe,GAC3B8B,EAAOnM,EAASqK,cAAe,GAC/BswE,EAAUpiH,KAAKiK,OACfo4G,EAAU56E,EAASx9B,YAES8E,IAAxB8yG,IAAoCA,EAAsB,QAE/C9yG,IAAXi+B,IAEJuD,GAAe,IAAInK,IAAUuzB,gBAAiB3sB,IAM/C,IAAM,IAAI5vC,EAAI,EAAGivC,EAAK21E,EAAUrkH,OAAQP,EAAIivC,EAAIjvC,IAAO,CAEtD,IAEIklH,EAFSN,EAAW5kH,GAEAwS,aAERb,IAAXi+B,GAAuBs1E,EAAW/jF,aAAcyO,GAErD+0E,EAAUp7G,KAAM27G,GAMjB,IAAM,IAAIllH,EAAI,EAAGivC,EAAKg2E,EAAQ1kH,OAAQP,EAAIivC,EAAIjvC,IAE7CglH,EAAQz7G,KAAM07G,EAASjlH,GAAIwS,SAM5B,IAAMxS,EAAI,EAAGivC,EAAK61E,EAAOvkH,OAAQP,EAAIivC,EAAIjvC,IAAO,CAE/C,IAAwBmlH,EAAUj8E,EAAQ99B,EAAtCglC,EAAO00E,EAAQ9kH,GAClBolH,EAAoBh1E,EAAKkE,cACzB+wE,EAAmBj1E,EAAKpK,cAEzBm/E,EAAW,IAAI/wE,GAAOhE,EAAKtwC,EAAI4kH,EAAct0E,EAAKhmC,EAAIs6G,EAAct0E,EAAKjlC,EAAIu5G,IACpEx7E,OAAO7hC,KAAM+oC,EAAKlH,aAELv3B,IAAjBwhC,GAEJgyE,EAASj8E,OAAOo1D,aAAcnrD,GAAe80B,YAI9C,IAAM,IAAIl7D,EAAI,EAAGo1B,EAAKijF,EAAkB7kH,OAAQwM,EAAIo1B,EAAIp1B,IAEvDm8B,EAASk8E,EAAmBr4G,GAAIyF,aAEVb,IAAjBwhC,GAEJjK,EAAOo1D,aAAcnrD,GAAe80B,YAIrCk9C,EAAS7wE,cAAc/qC,KAAM2/B,GAI9Bi8E,EAAS/5G,MAAM/D,KAAM+oC,EAAKhlC,OAE1B,IAAM,IAAI2B,EAAI,EAAGo1B,EAAKkjF,EAAiB9kH,OAAQwM,EAAIo1B,EAAIp1B,IAEtD3B,EAAQi6G,EAAkBt4G,GAC1Bo4G,EAASn/E,aAAaz8B,KAAM6B,EAAMoH,SAInC2yG,EAASj4E,cAAgBkD,EAAKlD,cAAgBu3E,EAE9CI,EAAOt7G,KAAM47G,GAMd,IAAMnlH,EAAI,EAAGivC,EAAKuH,EAAKj2C,OAAQP,EAAIivC,EAAIjvC,IAAO,CAE7C,IAAI6+B,EAAK2X,EAAMx2C,GAAKslH,KAEpB,QAAY3zG,IAAPktB,EAAL,CAMA,IAAM,IAAI9xB,EAAI,EAAGo1B,EAAKtD,EAAGt+B,OAAQwM,EAAIo1B,EAAIp1B,IAExCu4G,EAAO/7G,KAAMs1B,EAAI9xB,GAAIyF,SAItBuyG,EAAKx7G,KAAM+7G,UA9GXjkH,QAAQqT,MAAO,sEAAuE21B,IAoHxFk7E,UAAW,SAAWC,GAEZA,GAAQA,EAAKn5E,QAOtBm5E,EAAKpyE,kBAAoBoyE,EAAK/jC,eAE9B7+E,KAAKq9E,MAAOulC,EAAKn7E,SAAUm7E,EAAK51E,SAP/BvuC,QAAQqT,MAAO,kEAAmE8wG,IAiBpFtuE,cAAe,WAEd,IAGIlqC,EAAGnM,EAGHb,EAAGivC,EAAImB,EACPiG,EAAStpC,EAAGo1B,EAPZsjF,KACAC,KAAaC,KAIb/+E,EAAYthC,KAAKC,IAAK,GADJ,GAKtB,IAAMvF,EAAI,EAAGivC,EAAKrsC,KAAK85B,SAASn8B,OAAQP,EAAIivC,EAAIjvC,IAE/CgN,EAAIpK,KAAK85B,SAAU18B,QAGS2R,IAAvB8zG,EAFL5kH,EAAMyE,KAAK+gB,MAAOrZ,EAAEomB,EAAIwT,GAAc,IAAMthC,KAAK+gB,MAAOrZ,EAAEgZ,EAAI4gB,GAAc,IAAMthC,KAAK+gB,MAAOrZ,EAAEkoB,EAAI0R,KAInG6+E,EAAa5kH,GAAQb,EACrB0lH,EAAOn8G,KAAM3G,KAAK85B,SAAU18B,IAC5B2lH,EAAS3lH,GAAM0lH,EAAOnlH,OAAS,GAK/BolH,EAAS3lH,GAAM2lH,EAASF,EAAa5kH,IASvC,IAAI+kH,KAEJ,IAAM5lH,EAAI,EAAGivC,EAAKrsC,KAAK+5B,MAAMp8B,OAAQP,EAAIivC,EAAIjvC,IAAO,EAEnDowC,EAAOxtC,KAAK+5B,MAAO38B,IAEdF,EAAI6lH,EAASv1E,EAAKtwC,GACvBswC,EAAKhmC,EAAIu7G,EAASv1E,EAAKhmC,GACvBgmC,EAAKjlC,EAAIw6G,EAASv1E,EAAKjlC,GAEvBkrC,GAAYjG,EAAKtwC,EAAGswC,EAAKhmC,EAAGgmC,EAAKjlC,GAIjC,IAAM,IAAI1L,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAK42C,EAAS52C,KAAQ42C,GAAW52C,EAAI,GAAM,GAAM,CAEhDmmH,EAAoBr8G,KAAMvJ,GAC1B,OAQH,IAAMA,EAAI4lH,EAAoBrlH,OAAS,EAAGP,GAAK,EAAGA,IAAO,CAExD,IAAI6lH,EAAMD,EAAqB5lH,GAI/B,IAFA4C,KAAK+5B,MAAM5yB,OAAQ87G,EAAK,GAElB94G,EAAI,EAAGo1B,EAAKv/B,KAAK8xC,cAAcn0C,OAAQwM,EAAIo1B,EAAIp1B,IAEpDnK,KAAK8xC,cAAe3nC,GAAIhD,OAAQ87G,EAAK,GAQvC,IAAI36G,EAAOtI,KAAK85B,SAASn8B,OAASmlH,EAAOnlH,OAEzC,OADAqC,KAAK85B,SAAWgpF,EACTx6G,GAIR46G,yBAA0B,WAOzB,IAAM,IALFnpF,EAAQ/5B,KAAK+5B,MACbp8B,EAASo8B,EAAMp8B,OAITP,EAAI,EAAGA,EAAIO,EAAQP,IAE5B28B,EAAO38B,GAAI+lH,IAAM/lH,EAYlB28B,EAAMgI,KANN,SAA4B7kC,EAAGsK,GAE9B,OAAOtK,EAAEotC,cAAgB9iC,EAAE8iC,gBAQ5B,IAGI84E,EAASC,EAHTlB,EAAOniH,KAAK8xC,cAAe,GAC3B8B,EAAO5zC,KAAK8xC,cAAe,GAI1BqwE,GAAQA,EAAKxkH,SAAWA,IAASylH,MACjCxvE,GAAQA,EAAKj2C,SAAWA,IAAS0lH,MAEtC,IAAUjmH,EAAI,EAAGA,EAAIO,EAAQP,IAAO,CAEnC,IAAIiS,EAAK0qB,EAAO38B,GAAI+lH,IAEfC,GAAUA,EAAQz8G,KAAMw7G,EAAM9yG,IAC9Bg0G,GAAUA,EAAQ18G,KAAMitC,EAAMvkC,IAI/B+zG,IAAUpjH,KAAK8xC,cAAe,GAAMsxE,GACpCC,IAAUrjH,KAAK8xC,cAAe,GAAMuxE,IAI1C3gG,OAAQ,WA4HP,SAAS4gG,EAAQnkH,EAAOwX,EAAU3L,GAEjC,OAAOA,EAAU7L,EAAU,GAAKwX,EAAaxX,IAAc,GAAKwX,GAIjE,SAAS4sG,EAAgBj9E,GAExB,IAAIz7B,EAAOy7B,EAAO9V,EAAE9R,WAAa4nB,EAAOljB,EAAE1E,WAAa4nB,EAAOhU,EAAE5T,WAEhE,YAA6B3P,IAAxBy0G,EAAa34G,GAEV24G,EAAa34G,IAIrB24G,EAAa34G,GAAS6oC,EAAQ/1C,OAAS,EACvC+1C,EAAQ/sC,KAAM2/B,EAAO9V,EAAG8V,EAAOljB,EAAGkjB,EAAOhU,GAElCkxF,EAAa34G,IAIrB,SAAS44G,EAAej7G,GAEvB,IAAIqC,EAAOrC,EAAM1L,EAAE4hB,WAAalW,EAAMktB,EAAEhX,WAAalW,EAAMhB,EAAEkX,WAE7D,YAA4B3P,IAAvB20G,EAAY74G,GAET64G,EAAY74G,IAIpB64G,EAAY74G,GAASZ,EAAOtM,OAC5BsM,EAAOtD,KAAM6B,EAAM2lG,UAEZuV,EAAY74G,IAIpB,SAAS84G,EAAY1nF,GAEpB,IAAIpxB,EAAOoxB,EAAGzL,EAAE9R,WAAaud,EAAG7Y,EAAE1E,WAElC,YAAyB3P,IAApB60G,EAAS/4G,GAEN+4G,EAAS/4G,IAIjB+4G,EAAS/4G,GAAS8oC,EAAIh2C,OAAS,EAC/Bg2C,EAAIhtC,KAAMs1B,EAAGzL,EAAGyL,EAAG7Y,GAEZwgG,EAAS/4G,IA/KjB,IAAIrK,GACHg2F,UACC30E,QAAS,IACT3c,KAAM,WACNuxF,UAAW,oBAUb,GAJAj2F,EAAK0wB,KAAOlxB,KAAKkxB,KACjB1wB,EAAK0E,KAAOlF,KAAKkF,KACE,KAAdlF,KAAKmM,OAAc3L,EAAK2L,KAAOnM,KAAKmM,WAEhB4C,IAApB/O,KAAKukC,WAA2B,CAEpC,IAAIA,EAAavkC,KAAKukC,WAEtB,IAAM,IAAItmC,KAAOsmC,OAEWx1B,IAAtBw1B,EAAYtmC,KAAsBuC,EAAMvC,GAAQsmC,EAAYtmC,IAIlE,OAAOuC,EAMR,IAAM,IAFFs5B,KAEM18B,EAAI,EAAGA,EAAI4C,KAAK85B,SAASn8B,OAAQP,IAAO,CAEjD,IAAI2+B,EAAS/7B,KAAK85B,SAAU18B,GAC5B08B,EAASnzB,KAAMo1B,EAAOvL,EAAGuL,EAAO3Y,EAAG2Y,EAAOzJ,GAY3C,IAAM,IARFyH,KACA2Z,KACA8vE,KACAv5G,KACAy5G,KACA/vE,KACAiwE,KAEMxmH,EAAI,EAAGA,EAAI4C,KAAK+5B,MAAMp8B,OAAQP,IAAO,CAE9C,IAAIowC,EAAOxtC,KAAK+5B,MAAO38B,GAInBymH,OAAmD90G,IAAjC/O,KAAK8xC,cAAe,GAAK10C,GAC3C0mH,EAAgBt2E,EAAKlH,OAAO3oC,SAAW,EACvComH,EAAsBv2E,EAAKkE,cAAc/zC,OAAS,EAClDqmH,EAAgC,IAAjBx2E,EAAKhlC,MAAM1L,GAA4B,IAAjB0wC,EAAKhlC,MAAMktB,GAA4B,IAAjB8X,EAAKhlC,MAAMhB,EACtEy8G,EAAqBz2E,EAAKpK,aAAazlC,OAAS,EAEhDumH,EAAW,EAef,GAbAA,EAAWZ,EAAQY,EAAU,EAAG,GAChCA,EAAWZ,EAAQY,EAAU,GAXX,GAYlBA,EAAWZ,EAAQY,EAAU,GAXb,GAYhBA,EAAWZ,EAAQY,EAAU,EAAGL,GAChCK,EAAWZ,EAAQY,EAAU,EAAGJ,GAChCI,EAAWZ,EAAQY,EAAU,EAAGH,GAChCG,EAAWZ,EAAQY,EAAU,EAAGF,GAChCE,EAAWZ,EAAQY,EAAU,EAAGD,GAEhClqF,EAAMpzB,KAAMu9G,GACZnqF,EAAMpzB,KAAM6mC,EAAKtwC,EAAGswC,EAAKhmC,EAAGgmC,EAAKjlC,GACjCwxB,EAAMpzB,KAAM6mC,EAAKlD,eAEZu5E,EAAkB,CAEtB,IAAI/xE,EAAgB9xC,KAAK8xC,cAAe,GAAK10C,GAE7C28B,EAAMpzB,KACLg9G,EAAY7xE,EAAe,IAC3B6xE,EAAY7xE,EAAe,IAC3B6xE,EAAY7xE,EAAe,KAW7B,GANKgyE,GAEJ/pF,EAAMpzB,KAAM48G,EAAgB/1E,EAAKlH,SAI7By9E,EAAsB,CAE1B,IAAIryE,EAAgBlE,EAAKkE,cAEzB3X,EAAMpzB,KACL48G,EAAgB7xE,EAAe,IAC/B6xE,EAAgB7xE,EAAe,IAC/B6xE,EAAgB7xE,EAAe,KAWjC,GANKsyE,GAEJjqF,EAAMpzB,KAAM88G,EAAej2E,EAAKhlC,QAI5By7G,EAAqB,CAEzB,IAAI7gF,EAAeoK,EAAKpK,aAExBrJ,EAAMpzB,KACL88G,EAAergF,EAAc,IAC7BqgF,EAAergF,EAAc,IAC7BqgF,EAAergF,EAAc,MAwEhC,OARA5iC,EAAKA,QAELA,EAAKA,KAAKs5B,SAAWA,EACrBt5B,EAAKA,KAAKkzC,QAAUA,EACfzpC,EAAOtM,OAAS,IAAI6C,EAAKA,KAAKyJ,OAASA,GACvC0pC,EAAIh2C,OAAS,IAAI6C,EAAKA,KAAKmzC,KAAQA,IACxCnzC,EAAKA,KAAKu5B,MAAQA,EAEXv5B,GAIRoP,MAAO,WA0BN,OAAO,IAAIiiC,IAAWptC,KAAMzE,OAI7ByE,KAAM,SAAWugB,GAEhB,IAAI5nB,EAAGivC,EAAIliC,EAAGo1B,EAAI2K,EAAGC,EAIrBnqC,KAAK85B,YACL95B,KAAKiK,UACLjK,KAAK+5B,SACL/5B,KAAK8xC,mBACL9xC,KAAK8kC,gBACL9kC,KAAK+kC,gBACL/kC,KAAK+xC,eACL/xC,KAAKgyC,eACLhyC,KAAKiyC,iBACLjyC,KAAKkyC,YAAc,KACnBlyC,KAAKmyC,eAAiB,KAItBnyC,KAAKmM,KAAO6Y,EAAO7Y,KAInB,IAAI2tB,EAAW9U,EAAO8U,SAEtB,IAAM18B,EAAI,EAAGivC,EAAKvS,EAASn8B,OAAQP,EAAIivC,EAAIjvC,IAE1C4C,KAAK85B,SAASnzB,KAAMmzB,EAAU18B,GAAIwS,SAMnC,IAAI3F,EAAS+a,EAAO/a,OAEpB,IAAM7M,EAAI,EAAGivC,EAAKpiC,EAAOtM,OAAQP,EAAIivC,EAAIjvC,IAExC4C,KAAKiK,OAAOtD,KAAMsD,EAAQ7M,GAAIwS,SAM/B,IAAImqB,EAAQ/U,EAAO+U,MAEnB,IAAM38B,EAAI,EAAGivC,EAAKtS,EAAMp8B,OAAQP,EAAIivC,EAAIjvC,IAEvC4C,KAAK+5B,MAAMpzB,KAAMozB,EAAO38B,GAAIwS,SAM7B,IAAMxS,EAAI,EAAGivC,EAAKrnB,EAAO8sB,cAAcn0C,OAAQP,EAAIivC,EAAIjvC,IAAO,CAE7D,IAAI00C,EAAgB9sB,EAAO8sB,cAAe10C,GAQ1C,SANiC2R,IAA5B/O,KAAK8xC,cAAe10C,KAExB4C,KAAK8xC,cAAe10C,OAIf+M,EAAI,EAAGo1B,EAAKuS,EAAcn0C,OAAQwM,EAAIo1B,EAAIp1B,IAAO,CAEtD,IAAIwpC,EAAM7B,EAAe3nC,GAAKg6G,KAE9B,IAAMj6E,EAAI,EAAGC,EAAKwJ,EAAIh2C,OAAQusC,EAAIC,EAAID,IAAO,CAE5C,IAAIjO,EAAK0X,EAAKzJ,GAEdi6E,EAAQx9G,KAAMs1B,EAAGrsB,SAIlB5P,KAAK8xC,cAAe10C,GAAIuJ,KAAMw9G,IAQhC,IAAIr/E,EAAe9f,EAAO8f,aAE1B,IAAM1nC,EAAI,EAAGivC,EAAKvH,EAAannC,OAAQP,EAAIivC,EAAIjvC,IAAO,CAErD,IAAIgnH,KAKJ,GAJAA,EAAYj4G,KAAO24B,EAAc1nC,GAAI+O,UAID4C,IAA/B+1B,EAAc1nC,GAAI08B,SAItB,IAFAsqF,EAAYtqF,YAEN3vB,EAAI,EAAGo1B,EAAKuF,EAAc1nC,GAAI08B,SAASn8B,OAAQwM,EAAIo1B,EAAIp1B,IAE5Di6G,EAAYtqF,SAASnzB,KAAMm+B,EAAc1nC,GAAI08B,SAAU3vB,GAAIyF,SAQ7D,QAAmCb,IAA9B+1B,EAAc1nC,GAAIs2C,QAItB,IAFA0wE,EAAY1wE,WAENvpC,EAAI,EAAGo1B,EAAKuF,EAAc1nC,GAAIs2C,QAAQ/1C,OAAQwM,EAAIo1B,EAAIp1B,IAE3Di6G,EAAY1wE,QAAQ/sC,KAAMm+B,EAAc1nC,GAAIs2C,QAASvpC,GAAIyF,SAM3D5P,KAAK8kC,aAAan+B,KAAMy9G,GAMzB,IAAIr/E,EAAe/f,EAAO+f,aAE1B,IAAM3nC,EAAI,EAAGivC,EAAKtH,EAAapnC,OAAQP,EAAIivC,EAAIjvC,IAAO,CAErD,IAAIinH,KAIJ,QAAyCt1G,IAApCg2B,EAAc3nC,GAAIs0C,cAItB,IAFA2yE,EAAY3yE,iBAENvnC,EAAI,EAAGo1B,EAAKwF,EAAc3nC,GAAIs0C,cAAc/zC,OAAQwM,EAAIo1B,EAAIp1B,IAAO,CAExE,IAAIm6G,EAAkBv/E,EAAc3nC,GAAIs0C,cAAevnC,GACnDo6G,KAEJA,EAAiBrnH,EAAIonH,EAAgBpnH,EAAE0S,QACvC20G,EAAiB/8G,EAAI88G,EAAgB98G,EAAEoI,QACvC20G,EAAiBh8G,EAAI+7G,EAAgB/7G,EAAEqH,QAEvCy0G,EAAY3yE,cAAc/qC,KAAM49G,GAQlC,QAAuCx1G,IAAlCg2B,EAAc3nC,GAAIokH,YAItB,IAFA6C,EAAY7C,eAENr3G,EAAI,EAAGo1B,EAAKwF,EAAc3nC,GAAIokH,YAAY7jH,OAAQwM,EAAIo1B,EAAIp1B,IAE/Dk6G,EAAY7C,YAAY76G,KAAMo+B,EAAc3nC,GAAIokH,YAAar3G,GAAIyF,SAMnE5P,KAAK+kC,aAAap+B,KAAM09G,GAMzB,IAAItyE,EAAc/sB,EAAO+sB,YAEzB,IAAM30C,EAAI,EAAGivC,EAAK0F,EAAYp0C,OAAQP,EAAIivC,EAAIjvC,IAE7C4C,KAAK+xC,YAAYprC,KAAMorC,EAAa30C,GAAIwS,SAMzC,IAAIoiC,EAAchtB,EAAOgtB,YAEzB,IAAM50C,EAAI,EAAGivC,EAAK2F,EAAYr0C,OAAQP,EAAIivC,EAAIjvC,IAE7C4C,KAAKgyC,YAAYrrC,KAAMqrC,EAAa50C,GAAIwS,SAMzC,IAAIqiC,EAAgBjtB,EAAOitB,cAE3B,IAAM70C,EAAI,EAAGivC,EAAK4F,EAAct0C,OAAQP,EAAIivC,EAAIjvC,IAE/C4C,KAAKiyC,cAActrC,KAAMsrC,EAAe70C,IAMzC,IAAI80C,EAAcltB,EAAOktB,YAEJ,OAAhBA,IAEJlyC,KAAKkyC,YAAcA,EAAYtiC,SAMhC,IAAIuiC,EAAiBntB,EAAOmtB,eAkB5B,OAhBwB,OAAnBA,IAEJnyC,KAAKmyC,eAAiBA,EAAeviC,SAMtC5P,KAAKoyC,mBAAqBptB,EAAOotB,mBACjCpyC,KAAKqyC,mBAAqBrtB,EAAOqtB,mBACjCryC,KAAKsyC,cAAgBttB,EAAOstB,cAC5BtyC,KAAKuyC,kBAAoBvtB,EAAOutB,kBAChCvyC,KAAKwyC,iBAAmBxtB,EAAOwtB,iBAC/BxyC,KAAKyyC,wBAA0BztB,EAAOytB,wBACtCzyC,KAAK0yC,iBAAmB1tB,EAAO0tB,iBAExB1yC,MAIRs5C,QAAS,WAERt5C,KAAKkzF,eAAiBhuF,KAAM,eAmC9BhH,OAAOgB,eAAgByzC,GAAgBx0C,UAAW,eAEjDuG,IAAK,SAAWvF,IAEA,IAAVA,GAAiBa,KAAK6hB,aAM7B3jB,OAAO20F,OAAQlgD,GAAgBx0C,WAE9BqmH,mBAAmB,EAEnBC,SAAU,SAAWhkG,GAEpB,GAAKpV,MAAMgX,QAAS5B,GAEnB,MAAM,IAAIxhB,UAAW,yDAItBe,KAAKa,WAAkBkO,IAAV0R,EAAsBA,EAAM9iB,OAASqC,KAAK4yC,SAAW,EAClE5yC,KAAKygB,MAAQA,GAIdikG,WAAY,SAAWvlH,GAItB,OAFAa,KAAKquC,QAAUlvC,EAERa,MAIRyE,KAAM,SAAWugB,GAShB,OAPAhlB,KAAKygB,MAAQ,IAAIuE,EAAOvE,MAAMhZ,YAAaud,EAAOvE,OAClDzgB,KAAK4yC,SAAW5tB,EAAO4tB,SACvB5yC,KAAKa,MAAQmkB,EAAOnkB,MACpBb,KAAK6yC,WAAa7tB,EAAO6tB,WAEzB7yC,KAAKquC,QAAUrpB,EAAOqpB,QAEfruC,MAIR2kH,OAAQ,SAAW1yC,EAAQ/jC,EAAWgkC,GAErCD,GAAUjyE,KAAK4yC,SACfs/B,GAAUhkC,EAAU0E,SAEpB,IAAM,IAAIx1C,EAAI,EAAGI,EAAIwC,KAAK4yC,SAAUx1C,EAAII,EAAGJ,IAE1C4C,KAAKygB,MAAOwxD,EAAS70E,GAAM8wC,EAAUztB,MAAOyxD,EAAS90E,GAItD,OAAO4C,MAIR4kH,UAAW,SAAWnkG,GAIrB,OAFAzgB,KAAKygB,MAAM/b,IAAK+b,GAETzgB,MAIR6kH,gBAAiB,SAAW56G,GAI3B,IAAM,IAFFwW,EAAQzgB,KAAKygB,MAAOoR,EAAS,EAEvBz0B,EAAI,EAAGI,EAAIyM,EAAOtM,OAAQP,EAAII,EAAGJ,IAAO,CAEjD,IAAIoL,EAAQyB,EAAQ7M,QAEL2R,IAAVvG,IAEJ/J,QAAQ4pC,KAAM,8DAA+DjrC,GAC7EoL,EAAQ,IAAIixB,GAIbhZ,EAAOoR,KAAcrpB,EAAM1L,EAC3B2jB,EAAOoR,KAAcrpB,EAAMktB,EAC3BjV,EAAOoR,KAAcrpB,EAAMhB,EAI5B,OAAOxH,MAIR8kH,iBAAkB,SAAWrxE,GAI5B,IAAM,IAFFhzB,EAAQzgB,KAAKygB,MAAOoR,EAAS,EAEvBz0B,EAAI,EAAGI,EAAIi2C,EAAQ91C,OAAQP,EAAII,EAAGJ,IAAO,CAElD,IAAIqL,EAAQgrC,EAASr2C,GAErBqjB,EAAOoR,KAAcppB,EAAMvL,EAC3BujB,EAAOoR,KAAcppB,EAAMjB,EAC3BiZ,EAAOoR,KAAcppB,EAAMF,EAI5B,OAAOvI,MAIR+kH,kBAAmB,SAAWC,GAI7B,IAAM,IAFFvkG,EAAQzgB,KAAKygB,MAAOoR,EAAS,EAEvBz0B,EAAI,EAAGI,EAAIwnH,EAAQrnH,OAAQP,EAAII,EAAGJ,IAAO,CAElD,IAAIm4C,EAASyvE,EAAS5nH,QAEN2R,IAAXwmC,IAEJ92C,QAAQ4pC,KAAM,iEAAkEjrC,GAChFm4C,EAAS,IAAIhlB,GAId9P,EAAOoR,KAAc0jB,EAAO/kB,EAC5B/P,EAAOoR,KAAc0jB,EAAOnyB,EAI7B,OAAOpjB,MAIRilH,kBAAmB,SAAWD,GAI7B,IAAM,IAFFvkG,EAAQzgB,KAAKygB,MAAOoR,EAAS,EAEvBz0B,EAAI,EAAGI,EAAIwnH,EAAQrnH,OAAQP,EAAII,EAAGJ,IAAO,CAElD,IAAIm4C,EAASyvE,EAAS5nH,QAEN2R,IAAXwmC,IAEJ92C,QAAQ4pC,KAAM,iEAAkEjrC,GAChFm4C,EAAS,IAAI7hB,GAIdjT,EAAOoR,KAAc0jB,EAAO/kB,EAC5B/P,EAAOoR,KAAc0jB,EAAOnyB,EAC5B3C,EAAOoR,KAAc0jB,EAAOjjB,EAI7B,OAAOtyB,MAIRklH,kBAAmB,SAAWF,GAI7B,IAAM,IAFFvkG,EAAQzgB,KAAKygB,MAAOoR,EAAS,EAEvBz0B,EAAI,EAAGI,EAAIwnH,EAAQrnH,OAAQP,EAAII,EAAGJ,IAAO,CAElD,IAAIm4C,EAASyvE,EAAS5nH,QAEN2R,IAAXwmC,IAEJ92C,QAAQ4pC,KAAM,iEAAkEjrC,GAChFm4C,EAAS,IAAIljB,GAId5R,EAAOoR,KAAc0jB,EAAO/kB,EAC5B/P,EAAOoR,KAAc0jB,EAAOnyB,EAC5B3C,EAAOoR,KAAc0jB,EAAOjjB,EAC5B7R,EAAOoR,KAAc0jB,EAAOhjB,EAI7B,OAAOvyB,MAIR0E,IAAK,SAAWvF,EAAO0yB,GAMtB,YAJgB9iB,IAAX8iB,IAAuBA,EAAS,GAErC7xB,KAAKygB,MAAM/b,IAAKvF,EAAO0yB,GAEhB7xB,MAIRmyE,KAAM,SAAW1pE,GAEhB,OAAOzI,KAAKygB,MAAOhY,EAAQzI,KAAK4yC,WAIjCmiD,KAAM,SAAWtsF,EAAO+nB,GAIvB,OAFAxwB,KAAKygB,MAAOhY,EAAQzI,KAAK4yC,UAAapiB,EAE/BxwB,MAIRq2F,KAAM,SAAW5tF,GAEhB,OAAOzI,KAAKygB,MAAOhY,EAAQzI,KAAK4yC,SAAW,IAI5CoiD,KAAM,SAAWvsF,EAAO2a,GAIvB,OAFApjB,KAAKygB,MAAOhY,EAAQzI,KAAK4yC,SAAW,GAAMxvB,EAEnCpjB,MAIRo4F,KAAM,SAAW3vF,GAEhB,OAAOzI,KAAKygB,MAAOhY,EAAQzI,KAAK4yC,SAAW,IAI5CmkD,KAAM,SAAWtuF,EAAO6pB,GAIvB,OAFAtyB,KAAKygB,MAAOhY,EAAQzI,KAAK4yC,SAAW,GAAMtgB,EAEnCtyB,MAIRq4F,KAAM,SAAW5vF,GAEhB,OAAOzI,KAAKygB,MAAOhY,EAAQzI,KAAK4yC,SAAW,IAI5CokD,KAAM,SAAWvuF,EAAO8pB,GAIvB,OAFAvyB,KAAKygB,MAAOhY,EAAQzI,KAAK4yC,SAAW,GAAMrgB,EAEnCvyB,MAIRmlH,MAAO,SAAW18G,EAAO+nB,EAAGpN,GAO3B,OALA3a,GAASzI,KAAK4yC,SAEd5yC,KAAKygB,MAAOhY,EAAQ,GAAM+nB,EAC1BxwB,KAAKygB,MAAOhY,EAAQ,GAAM2a,EAEnBpjB,MAIRwiG,OAAQ,SAAW/5F,EAAO+nB,EAAGpN,EAAGkP,GAQ/B,OANA7pB,GAASzI,KAAK4yC,SAEd5yC,KAAKygB,MAAOhY,EAAQ,GAAM+nB,EAC1BxwB,KAAKygB,MAAOhY,EAAQ,GAAM2a,EAC1BpjB,KAAKygB,MAAOhY,EAAQ,GAAM6pB,EAEnBtyB,MAIRolH,QAAS,SAAW38G,EAAO+nB,EAAGpN,EAAGkP,EAAGC,GASnC,OAPA9pB,GAASzI,KAAK4yC,SAEd5yC,KAAKygB,MAAOhY,EAAQ,GAAM+nB,EAC1BxwB,KAAKygB,MAAOhY,EAAQ,GAAM2a,EAC1BpjB,KAAKygB,MAAOhY,EAAQ,GAAM6pB,EAC1BtyB,KAAKygB,MAAOhY,EAAQ,GAAM8pB,EAEnBvyB,MAIRqlH,SAAU,SAAWvkH,GAIpB,OAFAd,KAAKuuC,iBAAmBztC,EAEjBd,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKygB,MAAOzgB,KAAK4yC,UAAWnuC,KAAMzE,SAcjE8yC,GAAoB30C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WAC/D20C,GAAoB30C,UAAUsJ,YAAcqrC,GAS5CC,GAAqB50C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WAChE40C,GAAqB50C,UAAUsJ,YAAcsrC,GAS7CC,GAA4B70C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WACvE60C,GAA4B70C,UAAUsJ,YAAcurC,GASpDE,GAAqB/0C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WAChE+0C,GAAqB/0C,UAAUsJ,YAAcyrC,GAS7CC,GAAsBh1C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WACjEg1C,GAAsBh1C,UAAUsJ,YAAc0rC,GAS9CC,GAAqBj1C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WAChEi1C,GAAqBj1C,UAAUsJ,YAAc2rC,GAS7CC,GAAsBl1C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WACjEk1C,GAAsBl1C,UAAUsJ,YAAc4rC,GAS9CC,GAAuBn1C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WAClEm1C,GAAuBn1C,UAAUsJ,YAAc6rC,GAS/CC,GAAuBp1C,UAAYD,OAAOwZ,OAAQi7B,GAAgBx0C,WAClEo1C,GAAuBp1C,UAAUsJ,YAAc8rC,GAqC/Cr1C,OAAO20F,OAAQr/C,GAAer1C,WAE7BmnH,cAAe,SAAW79E,GAQzB,IAAM,IANF2C,EACAH,KACAK,OAAgBv7B,EAEhBgrB,EAAQ0N,EAAS1N,MAEX38B,EAAI,EAAGA,EAAI28B,EAAMp8B,OAAQP,IAAO,CAEzC,IAAIowC,EAAOzT,EAAO38B,GAIbowC,EAAKlD,gBAAkBA,IAE3BA,EAAgBkD,EAAKlD,mBAENv7B,IAAVq7B,IAEJA,EAAMvpC,MAAc,EAAJzD,EAAUgtC,EAAM9oC,MAChC2oC,EAAOtjC,KAAMyjC,IAIdA,GACC9oC,MAAW,EAAJlE,EACPktC,cAAeA,SAOHv7B,IAAVq7B,IAEJA,EAAMvpC,MAAc,EAAJzD,EAAUgtC,EAAM9oC,MAChC2oC,EAAOtjC,KAAMyjC,IAIdpqC,KAAKiqC,OAASA,GAIfs7E,aAAc,SAAW99E,GAExB,IAYI+9E,EAZAzrF,EAAQ0N,EAAS1N,MACjBD,EAAW2N,EAAS3N,SACpBgY,EAAgBrK,EAASqK,cAEzB+xE,EAAkB/xE,EAAe,IAAOA,EAAe,GAAIn0C,OAAS,EACpE8nH,EAAmB3zE,EAAe,IAAOA,EAAe,GAAIn0C,OAAS,EAIrEmnC,EAAe2C,EAAS3C,aACxB4gF,EAAqB5gF,EAAannC,OAItC,GAAK+nH,EAAqB,EAAI,CAE7BF,KAEA,IAAUpoH,EAAI,EAAGA,EAAIsoH,EAAoBtoH,IAExCooH,EAAsBpoH,MAIvB4C,KAAK8kC,aAAanuB,SAAW6uG,EAI9B,IAGIG,EAHA5gF,EAAe0C,EAAS1C,aACxB6gF,EAAqB7gF,EAAapnC,OAItC,GAAKioH,EAAqB,EAAI,CAE7BD,KAEA,IAAUvoH,EAAI,EAAGA,EAAIwoH,EAAoBxoH,IAExCuoH,EAAoBvoH,MAIrB4C,KAAK8kC,aAAawB,OAASq/E,EAc5B,IAAM,IARF3zE,EAAcvK,EAASuK,YACvBD,EAActK,EAASsK,YAEvB8zE,EAAiB7zE,EAAYr0C,SAAWm8B,EAASn8B,OACjDmoH,EAAiB/zE,EAAYp0C,SAAWm8B,EAASn8B,OAI3CP,EAAI,EAAGA,EAAI28B,EAAMp8B,OAAQP,IAAO,CAEzC,IAAIowC,EAAOzT,EAAO38B,GAElB4C,KAAK85B,SAASnzB,KAAMmzB,EAAU0T,EAAKtwC,GAAK48B,EAAU0T,EAAKhmC,GAAKsyB,EAAU0T,EAAKjlC,IAE3E,IAAImpC,EAAgBlE,EAAKkE,cAEzB,GAA8B,IAAzBA,EAAc/zC,OAElBqC,KAAK0zC,QAAQ/sC,KAAM+qC,EAAe,GAAKA,EAAe,GAAKA,EAAe,QAEpE,CAEN,IAAIpL,EAASkH,EAAKlH,OAElBtmC,KAAK0zC,QAAQ/sC,KAAM2/B,EAAQA,EAAQA,GAIpC,IAAIlD,EAAeoK,EAAKpK,aAExB,GAA6B,IAAxBA,EAAazlC,OAEjBqC,KAAKiK,OAAOtD,KAAMy8B,EAAc,GAAKA,EAAc,GAAKA,EAAc,QAEhE,CAEN,IAAI56B,EAAQglC,EAAKhlC,MAEjBxI,KAAKiK,OAAOtD,KAAM6B,EAAOA,EAAOA,GAsBjC,IAlByB,IAApBq7G,SAIe90G,KAFfg3G,EAAYj0E,EAAe,GAAK10C,IAInC4C,KAAK2zC,IAAIhtC,KAAMo/G,EAAW,GAAKA,EAAW,GAAKA,EAAW,KAI1DtnH,QAAQ4pC,KAAM,2DAA4DjrC,GAE1E4C,KAAK2zC,IAAIhtC,KAAM,IAAI4pB,EAAW,IAAIA,EAAW,IAAIA,MAMzB,IAArBk1F,EAA4B,CAEhC,IAAIM,EAAYj0E,EAAe,GAAK10C,QAEjB2R,IAAdg3G,EAEJ/lH,KAAK4zC,KAAKjtC,KAAMo/G,EAAW,GAAKA,EAAW,GAAKA,EAAW,KAI3DtnH,QAAQ4pC,KAAM,4DAA6DjrC,GAE3E4C,KAAK4zC,KAAKjtC,KAAM,IAAI4pB,EAAW,IAAIA,EAAW,IAAIA,IAQpD,IAAUpmB,EAAI,EAAGA,EAAIu7G,EAAoBv7G,IAAO,CAE/C,IAAIi6G,EAAct/E,EAAc36B,GAAI2vB,SAEpC0rF,EAAsBr7G,GAAIxD,KAAMy9G,EAAa52E,EAAKtwC,GAAKknH,EAAa52E,EAAKhmC,GAAK48G,EAAa52E,EAAKjlC,IAIjG,IAAM,IAAI4B,EAAI,EAAGA,EAAIy7G,EAAoBz7G,IAAO,CAE/C,IAAIk6G,EAAct/E,EAAc56B,GAAIunC,cAAet0C,GAEnDuoH,EAAoBx7G,GAAIxD,KAAM09G,EAAYnnH,EAAGmnH,EAAY78G,EAAG68G,EAAY97G,GAMpEs9G,GAEJ7lH,KAAKgyC,YAAYrrC,KAAMqrC,EAAaxE,EAAKtwC,GAAK80C,EAAaxE,EAAKhmC,GAAKwqC,EAAaxE,EAAKjlC,IAInFu9G,GAEJ9lH,KAAK+xC,YAAYprC,KAAMorC,EAAavE,EAAKtwC,GAAK60C,EAAavE,EAAKhmC,GAAKuqC,EAAavE,EAAKjlC,IAczF,OARAvI,KAAKslH,cAAe79E,GAEpBznC,KAAKqyC,mBAAqB5K,EAAS4K,mBACnCryC,KAAKuyC,kBAAoB9K,EAAS8K,kBAClCvyC,KAAKwyC,iBAAmB/K,EAAS+K,iBACjCxyC,KAAKsyC,cAAgB7K,EAAS6K,cAC9BtyC,KAAK0yC,iBAAmBjL,EAASiL,iBAE1B1yC,QAkDT8zC,GAAei3B,SAAW,MAE1B7sE,OAAO20F,OAAQ/+C,GAAe31C,UAAWmyB,EAAgBnyB,WAExD8pC,kBAAkB,EAElB+9E,SAAU,WAET,OAAOhmH,KAAKyI,OAIbktC,SAAU,SAAWltC,GAEf4C,MAAMgX,QAAS5Z,GAEnBzI,KAAKyI,MAAQ,IAAMorC,GAAUprC,GAAU,MAAQ4qC,GAAwBF,IAAyB1qC,EAAO,GAIvGzI,KAAKyI,MAAQA,GAMfmtC,aAAc,SAAWzpC,EAAM+hC,GAE9B,OAASA,GAAaA,EAAUs2E,mBAA2Bt2E,GAAaA,EAAUoB,6BAUpE,UAATnjC,GAEJ1N,QAAQ4pC,KAAM,gFACdroC,KAAK21C,SAAUzH,KAMhBluC,KAAK87B,WAAY3vB,GAAS+hC,EAEnBluC,OAnBNvB,QAAQ4pC,KAAM,+EAEdroC,KAAK41C,aAAczpC,EAAM,IAAIwmC,GAAiBzsC,UAAW,GAAKA,UAAW,OAqB3EipF,aAAc,SAAWhjF,GAExB,OAAOnM,KAAK87B,WAAY3vB,IAIzBihE,gBAAiB,SAAWjhE,GAI3B,cAFOnM,KAAK87B,WAAY3vB,GAEjBnM,MAIRy1C,SAAU,SAAWn0C,EAAOT,EAAOypC,GAElCtqC,KAAKiqC,OAAOtjC,MAEXrF,MAAOA,EACPT,MAAOA,EACPypC,mBAAiCv7B,IAAlBu7B,EAA8BA,EAAgB,KAM/D27E,YAAa,WAEZjmH,KAAKiqC,WAINi8E,aAAc,SAAW5kH,EAAOT,GAE/Bb,KAAK+zC,UAAUzyC,MAAQA,EACvBtB,KAAK+zC,UAAUlzC,MAAQA,GAIxBq8G,YAAa,SAAWlwE,GAEvB,IAAIr2B,EAAW3W,KAAK87B,WAAWnlB,cAEb5H,IAAb4H,IAEJq2B,EAAOu1D,uBAAwB5rF,GAC/BA,EAASqqB,aAAc,GAIxB,IAAIsF,EAAStmC,KAAK87B,WAAWwK,OAuB7B,YArBgBv3B,IAAXu3B,KAEe,IAAIF,IAAUuzB,gBAAiB3sB,GAErCu1D,uBAAwBj8D,GACrCA,EAAOtF,aAAc,GAII,OAArBhhC,KAAKkyC,aAETlyC,KAAKwgH,qBAIuB,OAAxBxgH,KAAKmyC,gBAETnyC,KAAKo8G,wBAICp8G,MAIRy9G,QAAS,WAIR,IAAIzC,EAAK,IAAIrnF,EAEb,OAAO,SAAkBkxC,GAMxB,OAJAm2C,EAAGzX,cAAe1+B,GAElB7kE,KAAKk9G,YAAalC,GAEXh7G,MAZA,GAkBTkvF,QAAS,WAIR,IAAI8rB,EAAK,IAAIrnF,EAEb,OAAO,SAAkBkxC,GAMxB,OAJAm2C,EAAGxX,cAAe3+B,GAElB7kE,KAAKk9G,YAAalC,GAEXh7G,MAZA,GAkBT09G,QAAS,WAIR,IAAI1C,EAAK,IAAIrnF,EAEb,OAAO,SAAkBkxC,GAMxB,OAJAm2C,EAAGvX,cAAe5+B,GAElB7kE,KAAKk9G,YAAalC,GAEXh7G,MAZA,GAkBT6wF,UAAW,WAIV,IAAImqB,EAAK,IAAIrnF,EAEb,OAAO,SAAoBnD,EAAGpN,EAAGkP,GAMhC,OAJA0oF,EAAG9tE,gBAAiB1c,EAAGpN,EAAGkP,GAE1BtyB,KAAKk9G,YAAalC,GAEXh7G,MAZE,GAkBXs8B,MAAO,WAIN,IAAI0+E,EAAK,IAAIrnF,EAEb,OAAO,SAAgBnD,EAAGpN,EAAGkP,GAM5B,OAJA0oF,EAAGnX,UAAWrzE,EAAGpN,EAAGkP,GAEpBtyB,KAAKk9G,YAAalC,GAEXh7G,MAZF,GAkBPmtC,OAAQ,WAEP,IAAIrvC,EAAM,IAAIiyC,GAEd,OAAO,SAAiBwF,GAEvBz3C,EAAIqvC,OAAQoI,GAEZz3C,EAAI+gF,eAEJ7+E,KAAKk9G,YAAap/G,EAAIkvC,SAVhB,GAgBR9G,OAAQ,WAEPlmC,KAAKwgH,qBAEL,IAAI3uF,EAAS7xB,KAAKkyC,YAAYylE,YAAY/hB,SAI1C,OAFA51F,KAAK6wF,UAAWh/D,EAAOrB,EAAGqB,EAAOzO,EAAGyO,EAAOS,GAEpCT,GAIR6oB,cAAe,SAAWpT,GAIzB,IAAIG,EAAWH,EAAOG,SAEtB,GAAKH,EAAOqC,UAAYrC,EAAOoC,OAAS,CAEvC,IAAIykD,EAAY,IAAI76C,GAAmD,EAA3B7L,EAAS3N,SAASn8B,OAAY,GACtEsM,EAAS,IAAIqpC,GAAiD,EAAzB7L,EAASx9B,OAAOtM,OAAY,GAKrE,GAHAqC,KAAK41C,aAAc,WAAYu4C,EAAU82B,kBAAmBx9E,EAAS3N,WACrE95B,KAAK41C,aAAc,QAAS3rC,EAAO46G,gBAAiBp9E,EAASx9B,SAExDw9B,EAASwK,eAAiBxK,EAASwK,cAAct0C,SAAW8pC,EAAS3N,SAASn8B,OAAS,CAE3F,IAAIs0C,EAAgB,IAAIqB,GAAwB7L,EAASwK,cAAct0C,OAAQ,GAE/EqC,KAAK41C,aAAc,eAAgB3D,EAAc2yE,UAAWn9E,EAASwK,gBAIrC,OAA5BxK,EAAS0K,iBAEbnyC,KAAKmyC,eAAiB1K,EAAS0K,eAAeviC,SAIjB,OAAzB63B,EAASyK,cAEblyC,KAAKkyC,YAAczK,EAASyK,YAAYtiC,cAI9B03B,EAAOmC,QAEbhC,GAAYA,EAASU,YAEzBnoC,KAAKulH,aAAc99E,GAMrB,OAAOznC,MAIR67C,iBAAkB,SAAWvU,GAE5B,IAAIG,EAAWH,EAAOG,SAEtB,GAAKH,EAAOmC,OAAS,CAEpB,IAAI08E,EAAS1+E,EAAS2+E,iBAStB,IAPqC,IAAhC3+E,EAAS2K,qBAEb+zE,OAASp3G,EACT04B,EAAS2K,oBAAqB,QAIfrjC,IAAXo3G,EAEJ,OAAOnmH,KAAKulH,aAAc99E,GAI3B0+E,EAAO9zE,mBAAqB5K,EAAS4K,mBACrC8zE,EAAO5zE,kBAAoB9K,EAAS8K,kBACpC4zE,EAAO3zE,iBAAmB/K,EAAS+K,iBACnC2zE,EAAO7zE,cAAgB7K,EAAS6K,cAChC6zE,EAAOzzE,iBAAmBjL,EAASiL,iBAEnCjL,EAAS4K,oBAAqB,EAC9B5K,EAAS8K,mBAAoB,EAC7B9K,EAAS+K,kBAAmB,EAC5B/K,EAAS6K,eAAgB,EACzB7K,EAASiL,kBAAmB,EAE5BjL,EAAW0+E,EAIZ,IAAIj4E,EAsFJ,OApFqC,IAAhCzG,EAAS4K,0BAIMtjC,KAFnBm/B,EAAYluC,KAAK87B,WAAWnlB,YAI3Bu3B,EAAU+2E,kBAAmBx9E,EAAS3N,UACtCoU,EAAUlN,aAAc,GAIzByG,EAAS4K,oBAAqB,IAIK,IAA/B5K,EAAS8K,yBAIMxjC,KAFnBm/B,EAAYluC,KAAK87B,WAAWwK,UAI3B4H,EAAU+2E,kBAAmBx9E,EAASiM,SACtCxF,EAAUlN,aAAc,GAIzByG,EAAS8K,mBAAoB,IAIK,IAA9B9K,EAAS+K,wBAIMzjC,KAFnBm/B,EAAYluC,KAAK87B,WAAWtzB,SAI3B0lC,EAAU22E,gBAAiBp9E,EAASx9B,QACpCikC,EAAUlN,aAAc,GAIzByG,EAAS+K,kBAAmB,GAIxB/K,EAAS6K,qBAIMvjC,KAFnBm/B,EAAYluC,KAAK87B,WAAWG,MAI3BiS,EAAU62E,kBAAmBt9E,EAASkM,KACtCzF,EAAUlN,aAAc,GAIzByG,EAAS6K,eAAgB,GAIrB7K,EAASgL,+BAIM1jC,KAFnBm/B,EAAYluC,KAAK87B,WAAWuqF,gBAI3Bn4E,EAAU02E,UAAWn9E,EAASwK,eAC9B/D,EAAUlN,aAAc,GAIzByG,EAASgL,yBAA0B,GAI/BhL,EAASiL,mBAEbjL,EAAS69E,cAAeh+E,EAAOG,UAC/BznC,KAAKiqC,OAASxC,EAASwC,OAEvBxC,EAASiL,kBAAmB,GAItB1yC,MAIRulH,aAAc,SAAW99E,GAIxB,OAFAA,EAAS2+E,kBAAmB,IAAI5yE,IAAiB+xE,aAAc99E,GAExDznC,KAAKsmH,mBAAoB7+E,EAAS2+E,mBAI1CE,mBAAoB,SAAW7+E,GAE9B,IAAI0mD,EAAY,IAAI15D,aAAyC,EAA3BgT,EAAS3N,SAASn8B,QAGpD,GAFAqC,KAAK41C,aAAc,WAAY,IAAIjD,GAAiBw7C,EAAW,GAAI82B,kBAAmBx9E,EAAS3N,WAE1F2N,EAASiM,QAAQ/1C,OAAS,EAAI,CAElC,IAAI+1C,EAAU,IAAIjf,aAAwC,EAA1BgT,EAASiM,QAAQ/1C,QACjDqC,KAAK41C,aAAc,SAAU,IAAIjD,GAAiBe,EAAS,GAAIuxE,kBAAmBx9E,EAASiM,UAI5F,GAAKjM,EAASx9B,OAAOtM,OAAS,EAAI,CAEjC,IAAIsM,EAAS,IAAIwqB,aAAuC,EAAzBgT,EAASx9B,OAAOtM,QAC/CqC,KAAK41C,aAAc,QAAS,IAAIjD,GAAiB1oC,EAAQ,GAAI46G,gBAAiBp9E,EAASx9B,SAIxF,GAAKw9B,EAASkM,IAAIh2C,OAAS,EAAI,CAE9B,IAAIg2C,EAAM,IAAIlf,aAAoC,EAAtBgT,EAASkM,IAAIh2C,QACzCqC,KAAK41C,aAAc,KAAM,IAAIjD,GAAiBgB,EAAK,GAAIoxE,kBAAmBt9E,EAASkM,MAIpF,GAAKlM,EAASmM,KAAKj2C,OAAS,EAAI,CAE/B,IAAIi2C,EAAO,IAAInf,aAAqC,EAAvBgT,EAASmM,KAAKj2C,QAC3CqC,KAAK41C,aAAc,MAAO,IAAIjD,GAAiBiB,EAAM,GAAImxE,kBAAmBt9E,EAASmM,OAItF,GAAKnM,EAASgM,QAAQ91C,OAAS,EAAI,CAElC,IACI81C,EAAU,IADEI,GAAUpM,EAASgM,SAAY,MAAQ9E,YAAc3U,aACd,EAA1ByN,EAASgM,QAAQ91C,QAC9CqC,KAAK21C,SAAU,IAAIhD,GAAiBc,EAAS,GAAIqxE,iBAAkBr9E,EAASgM,UAM7EzzC,KAAKiqC,OAASxC,EAASwC,OAIvB,IAAM,IAAI99B,KAAQs7B,EAAS3C,aAAe,CAKzC,IAAM,IAHFrkB,KACAqkB,EAAe2C,EAAS3C,aAAc34B,GAEhC/O,EAAI,EAAGI,EAAIsnC,EAAannC,OAAQP,EAAII,EAAGJ,IAAO,CAEvD,IAAIgnH,EAAct/E,EAAc1nC,GAE5B8wC,EAAY,IAAIoF,GAA6C,EAArB8wE,EAAYzmH,OAAY,GAEpE8iB,EAAM9Z,KAAMunC,EAAU+2E,kBAAmBb,IAI1CpkH,KAAKkoC,gBAAiB/7B,GAASsU,EAMhC,GAAKgnB,EAASuK,YAAYr0C,OAAS,EAAI,CAEtC,IAAIq0C,EAAc,IAAIsB,GAAsD,EAA9B7L,EAASuK,YAAYr0C,OAAY,GAC/EqC,KAAK41C,aAAc,YAAa5D,EAAYkzE,kBAAmBz9E,EAASuK,cAIzE,GAAKvK,EAASsK,YAAYp0C,OAAS,EAAI,CAEtC,IAAIo0C,EAAc,IAAIuB,GAAsD,EAA9B7L,EAASsK,YAAYp0C,OAAY,GAC/EqC,KAAK41C,aAAc,aAAc7D,EAAYmzE,kBAAmBz9E,EAASsK,cAkB1E,OAZiC,OAA5BtK,EAAS0K,iBAEbnyC,KAAKmyC,eAAiB1K,EAAS0K,eAAeviC,SAIjB,OAAzB63B,EAASyK,cAEblyC,KAAKkyC,YAAczK,EAASyK,YAAYtiC,SAIlC5P,MAIRwgH,mBAAoB,WAEO,OAArBxgH,KAAKkyC,cAETlyC,KAAKkyC,YAAc,IAAIlM,GAIxB,IAAIrvB,EAAW3W,KAAK87B,WAAWnlB,cAEb5H,IAAb4H,EAEJ3W,KAAKkyC,YAAYinE,uBAAwBxiG,GAIzC3W,KAAKkyC,YAAYolE,aAIbzzF,MAAO7jB,KAAKkyC,YAAY9vC,IAAIouB,IAAO3M,MAAO7jB,KAAKkyC,YAAY9vC,IAAIghB,IAAOS,MAAO7jB,KAAKkyC,YAAY9vC,IAAIkwB,KAEtG7zB,QAAQqT,MAAO,oIAAqI9R,OAMtJo8G,sBAAuB,WAEtB,IAAI3E,EAAM,IAAIzxE,EACVuP,EAAS,IAAI7hB,EAEjB,OAAO,WAEuB,OAAxB1zB,KAAKmyC,iBAETnyC,KAAKmyC,eAAiB,IAAIlM,IAI3B,IAAItvB,EAAW3W,KAAK87B,WAAWnlB,SAE/B,GAAKA,EAAW,CAEf,IAAIuvB,EAASlmC,KAAKmyC,eAAejM,OAEjCuxE,EAAI0B,uBAAwBxiG,GAC5B8gG,EAAIE,UAAWzxE,GAOf,IAAM,IAFFyzE,EAAc,EAERv8G,EAAI,EAAGivC,EAAK11B,EAAS9V,MAAOzD,EAAIivC,EAAIjvC,IAE7Cm4C,EAAO/kB,EAAI7Z,EAASw7D,KAAM/0E,GAC1Bm4C,EAAOnyB,EAAIzM,EAAS0/E,KAAMj5F,GAC1Bm4C,EAAOjjB,EAAI3b,EAASyhF,KAAMh7F,GAC1Bu8G,EAAcj3G,KAAKL,IAAKs3G,EAAazzE,EAAO8vD,kBAAmBzgD,IAIhEv1C,KAAKmyC,eAAehM,OAASzjC,KAAKg+D,KAAMi5C,GAEnC91F,MAAO7jB,KAAKmyC,eAAehM,SAE/B1nC,QAAQqT,MAAO,+HAAgI9R,QAxC5H,GAkDvB27E,mBAAoB,aAMpB7G,qBAAsB,WAErB,IAAIrsE,EAAQzI,KAAKyI,MACbqzB,EAAa97B,KAAK87B,WAClBmO,EAASjqC,KAAKiqC,OAElB,GAAKnO,EAAWnlB,SAAW,CAE1B,IAAIw3E,EAAYryD,EAAWnlB,SAAS8J,MAEpC,QAA2B1R,IAAtB+sB,EAAWwK,OAEftmC,KAAK41C,aAAc,SAAU,IAAIjD,GAAiB,IAAIle,aAAc05D,EAAUxwF,QAAU,SAQxF,IAAM,IAFF8iB,EAAQqb,EAAWwK,OAAO7lB,MAEpBrjB,EAAI,EAAGivC,EAAK5rB,EAAM9iB,OAAQP,EAAIivC,EAAIjvC,IAE3CqjB,EAAOrjB,GAAM,EAMf,IAEI0jH,EAAIC,EAAIC,EAFRttE,EAAU5X,EAAWwK,OAAO7lB,MAG5B8lG,EAAK,IAAI7yF,EAAW8yF,EAAK,IAAI9yF,EAAW+yF,EAAK,IAAI/yF,EACjDxsB,EAAK,IAAIwsB,EAAW3U,EAAK,IAAI2U,EAIjC,GAAKjrB,EAAQ,CAEZ,IAAIgrC,EAAUhrC,EAAMgY,MAEG,IAAlBwpB,EAAOtsC,QAEXqC,KAAKy1C,SAAU,EAAGhC,EAAQ91C,QAI3B,IAAM,IAAIwM,EAAI,EAAGo1B,EAAK0K,EAAOtsC,OAAQwM,EAAIo1B,IAAOp1B,EAO/C,IAAM,IALFigC,EAAQH,EAAQ9/B,GAEhB7I,EAAQ8oC,EAAM9oC,MAGRlE,EAAIkE,EAAO+qC,EAAK/qC,EAFd8oC,EAAMvpC,MAEuBzD,EAAIivC,EAAIjvC,GAAK,EAErD0jH,EAAwB,EAAnBrtE,EAASr2C,EAAI,GAClB2jH,EAAwB,EAAnBttE,EAASr2C,EAAI,GAClB4jH,EAAwB,EAAnBvtE,EAASr2C,EAAI,GAElBmpH,EAAG3uD,UAAWu2B,EAAW2yB,GACzB0F,EAAG5uD,UAAWu2B,EAAW4yB,GACzB0F,EAAG7uD,UAAWu2B,EAAW6yB,GAEzB95G,EAAG2rE,WAAY4zC,EAAID,GACnBznG,EAAG8zD,WAAY0zC,EAAIC,GACnBt/G,EAAGi1F,MAAOp9E,GAEV20B,EAASotE,IAAQ55G,EAAGspB,EACpBkjB,EAASotE,EAAK,IAAO55G,EAAGkc,EACxBswB,EAASotE,EAAK,IAAO55G,EAAGorB,EAExBohB,EAASqtE,IAAQ75G,EAAGspB,EACpBkjB,EAASqtE,EAAK,IAAO75G,EAAGkc,EACxBswB,EAASqtE,EAAK,IAAO75G,EAAGorB,EAExBohB,EAASstE,IAAQ95G,EAAGspB,EACpBkjB,EAASstE,EAAK,IAAO95G,EAAGkc,EACxBswB,EAASstE,EAAK,IAAO95G,EAAGorB,OAU1B,IAAM,IAAIl1B,EAAI,EAAGivC,EAAK8hD,EAAUxwF,OAAQP,EAAIivC,EAAIjvC,GAAK,EAEpDmpH,EAAG3uD,UAAWu2B,EAAW/wF,GACzBopH,EAAG5uD,UAAWu2B,EAAW/wF,EAAI,GAC7BqpH,EAAG7uD,UAAWu2B,EAAW/wF,EAAI,GAE7B8J,EAAG2rE,WAAY4zC,EAAID,GACnBznG,EAAG8zD,WAAY0zC,EAAIC,GACnBt/G,EAAGi1F,MAAOp9E,GAEV20B,EAASt2C,GAAM8J,EAAGspB,EAClBkjB,EAASt2C,EAAI,GAAM8J,EAAGkc,EACtBswB,EAASt2C,EAAI,GAAM8J,EAAGorB,EAEtBohB,EAASt2C,EAAI,GAAM8J,EAAGspB,EACtBkjB,EAASt2C,EAAI,GAAM8J,EAAGkc,EACtBswB,EAASt2C,EAAI,GAAM8J,EAAGorB,EAEtBohB,EAASt2C,EAAI,GAAM8J,EAAGspB,EACtBkjB,EAASt2C,EAAI,GAAM8J,EAAGkc,EACtBswB,EAASt2C,EAAI,GAAM8J,EAAGorB,EAMxBtyB,KAAK+0E,mBAELj5C,EAAWwK,OAAOtF,aAAc,IAMlCq8C,MAAO,SAAW51C,EAAU5V,GAE3B,GAAS4V,GAAYA,EAASQ,iBAA9B,MAOgBl5B,IAAX8iB,IAAuBA,EAAS,GAErC,IAAIiK,EAAa97B,KAAK87B,WAEtB,IAAM,IAAI79B,KAAO69B,EAEhB,QAAoC/sB,IAA/B04B,EAAS3L,WAAY79B,GAU1B,IAAM,IAPFyoH,EADa5qF,EAAY79B,GACIwiB,MAE7BkmG,EAAal/E,EAAS3L,WAAY79B,GAClC2oH,EAAkBD,EAAWlmG,MAIvBrjB,EAAI,EAAG+M,EAFGw8G,EAAW/zE,SAEM/gB,EAAQz0B,EAAIwpH,EAAgBjpH,OAAQP,IAAM+M,IAE9Eu8G,EAAiBv8G,GAAMy8G,EAAiBxpH,GAM1C,OAAO4C,KA7BNvB,QAAQqT,MAAO,kFAAmF21B,IAiCpGstC,iBAAkB,WAMjB,IAAM,IAFFvkD,EAAGpN,EAAGkP,EAAGz1B,EAFT62C,EAAU1zC,KAAK87B,WAAWwK,OAIpBlpC,EAAI,EAAGivC,EAAKqH,EAAQ7yC,MAAOzD,EAAIivC,EAAIjvC,IAE5CozB,EAAIkjB,EAAQy+B,KAAM/0E,GAClBgmB,EAAIswB,EAAQ2iD,KAAMj5F,GAClBk1B,EAAIohB,EAAQ0kD,KAAMh7F,GAElBP,EAAI,EAAM6F,KAAKg+D,KAAMlwC,EAAIA,EAAIpN,EAAIA,EAAIkP,EAAIA,GAEzCohB,EAAQ8uD,OAAQplG,EAAGozB,EAAI3zB,EAAGumB,EAAIvmB,EAAGy1B,EAAIz1B,IAMvCgqH,aAAc,WAEb,GAAoB,OAAf7mH,KAAKyI,MAGT,OADAhK,QAAQ4pC,KAAM,yEACProC,KAIR,IAAIw7E,EAAY,IAAI1nC,GAEhBL,EAAUzzC,KAAKyI,MAAMgY,MACrBqb,EAAa97B,KAAK87B,WAEtB,IAAM,IAAI3vB,KAAQ2vB,EAAa,CAW9B,IAAM,IATFoS,EAAYpS,EAAY3vB,GAExBsU,EAAQytB,EAAUztB,MAClBmyB,EAAW1E,EAAU0E,SAErBk0E,EAAS,IAAIrmG,EAAMhZ,YAAagsC,EAAQ91C,OAASi1C,GAEjDnqC,EAAQ,EAAGypE,EAAS,EAEd90E,EAAI,EAAGI,EAAIi2C,EAAQ91C,OAAQP,EAAII,EAAGJ,IAAO,CAElDqL,EAAQgrC,EAASr2C,GAAMw1C,EAEvB,IAAM,IAAIzoC,EAAI,EAAGA,EAAIyoC,EAAUzoC,IAE9B28G,EAAQ50C,KAAczxD,EAAOhY,KAM/B+yE,EAAU5lC,aAAczpC,EAAM,IAAIwmC,GAAiBm0E,EAAQl0E,IAI5D,OAAO4oC,GAIR94D,OAAQ,WAEP,IAAIliB,GACHg2F,UACC30E,QAAS,IACT3c,KAAM,iBACNuxF,UAAW,0BAUb,GAJAj2F,EAAK0wB,KAAOlxB,KAAKkxB,KACjB1wB,EAAK0E,KAAOlF,KAAKkF,KACE,KAAdlF,KAAKmM,OAAc3L,EAAK2L,KAAOnM,KAAKmM,WAEhB4C,IAApB/O,KAAKukC,WAA2B,CAEpC,IAAIA,EAAavkC,KAAKukC,WAEtB,IAAM,IAAItmC,KAAOsmC,OAEWx1B,IAAtBw1B,EAAYtmC,KAAsBuC,EAAMvC,GAAQsmC,EAAYtmC,IAIlE,OAAOuC,EAIRA,EAAKA,MAASs7B,eAEd,IAAIrzB,EAAQzI,KAAKyI,MAEjB,GAAe,OAAVA,EAAiB,CAEjBgY,EAAQpV,MAAMlN,UAAUuD,MAAMhE,KAAM+K,EAAMgY,OAE9CjgB,EAAKA,KAAKiI,OACTvD,KAAMuD,EAAMgY,MAAMhZ,YAAY0E,KAC9BsU,MAAOA,GAKT,IAAIqb,EAAa97B,KAAK87B,WAEtB,IAAM,IAAI79B,KAAO69B,EAAa,CAE7B,IAAIoS,EAAYpS,EAAY79B,GAExBwiB,EAAQpV,MAAMlN,UAAUuD,MAAMhE,KAAMwwC,EAAUztB,OAElDjgB,EAAKA,KAAKs7B,WAAY79B,IACrB20C,SAAU1E,EAAU0E,SACpB1tC,KAAMgpC,EAAUztB,MAAMhZ,YAAY0E,KAClCsU,MAAOA,EACPoyB,WAAY3E,EAAU2E,YAKxB,IAAI5I,EAASjqC,KAAKiqC,OAEbA,EAAOtsC,OAAS,IAEpB6C,EAAKA,KAAKypC,OAAS5/B,KAAK2Y,MAAO3Y,KAAKC,UAAW2/B,KAIhD,IAAIkI,EAAiBnyC,KAAKmyC,eAW1B,OATwB,OAAnBA,IAEJ3xC,EAAKA,KAAK2xC,gBACTjM,OAAQiM,EAAejM,OAAOla,UAC9Bma,OAAQgM,EAAehM,SAKlB3lC,GAIRoP,MAAO,WA0BN,OAAO,IAAIkkC,IAAiBrvC,KAAMzE,OAInCyE,KAAM,SAAWugB,GAEhB,IAAI7Y,EAAM/O,EAAGI,EAIbwC,KAAKyI,MAAQ,KACbzI,KAAK87B,cACL97B,KAAKkoC,mBACLloC,KAAKiqC,UACLjqC,KAAKkyC,YAAc,KACnBlyC,KAAKmyC,eAAiB,KAItBnyC,KAAKmM,KAAO6Y,EAAO7Y,KAInB,IAAI1D,EAAQuc,EAAOvc,MAEJ,OAAVA,GAEJzI,KAAK21C,SAAUltC,EAAMmH,SAMtB,IAAIksB,EAAa9W,EAAO8W,WAExB,IAAM3vB,KAAQ2vB,EAAa,CAE1B,IAAIoS,EAAYpS,EAAY3vB,GAC5BnM,KAAK41C,aAAczpC,EAAM+hC,EAAUt+B,SAMpC,IAAIs4B,EAAkBljB,EAAOkjB,gBAE7B,IAAM/7B,KAAQ+7B,EAAkB,CAE/B,IAAIznB,KACAsmG,EAAiB7+E,EAAiB/7B,GAEtC,IAAM/O,EAAI,EAAGI,EAAIupH,EAAeppH,OAAQP,EAAII,EAAGJ,IAE9CqjB,EAAM9Z,KAAMogH,EAAgB3pH,GAAIwS,SAIjC5P,KAAKkoC,gBAAiB/7B,GAASsU,EAMhC,IAAIwpB,EAASjlB,EAAOilB,OAEpB,IAAM7sC,EAAI,EAAGI,EAAIysC,EAAOtsC,OAAQP,EAAII,EAAGJ,IAAO,CAE7C,IAAIgtC,EAAQH,EAAQ7sC,GACpB4C,KAAKy1C,SAAUrL,EAAM9oC,MAAO8oC,EAAMvpC,MAAOupC,EAAME,eAMhD,IAAI4H,EAAcltB,EAAOktB,YAEJ,OAAhBA,IAEJlyC,KAAKkyC,YAAcA,EAAYtiC,SAMhC,IAAIuiC,EAAiBntB,EAAOmtB,eAa5B,OAXwB,OAAnBA,IAEJnyC,KAAKmyC,eAAiBA,EAAeviC,SAMtC5P,KAAK+zC,UAAUzyC,MAAQ0jB,EAAO+uB,UAAUzyC,MACxCtB,KAAK+zC,UAAUlzC,MAAQmkB,EAAO+uB,UAAUlzC,MAEjCb,MAIRs5C,QAAS,WAERt5C,KAAKkzF,eAAiBhuF,KAAM,gBAiC9B8uC,GAAY71C,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcusC,GAiKpCK,GAAkBl2C,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,WAC5Dk2C,GAAkBl2C,UAAUsJ,YAAc4sC,IA2B1CwB,GAAc13C,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcouC,GAwFtCC,GAAoB33C,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,WAC9D23C,GAAoB33C,UAAUsJ,YAAcquC,GA6E5CK,GAAkBh4C,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,WACtDg4C,GAAkBh4C,UAAUsJ,YAAc0uC,GAE1CA,GAAkBh4C,UAAUoiE,qBAAsB,EAElDpqB,GAAkBh4C,UAAUsG,KAAO,SAAWugB,GA+B7C,OA7BA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OAExBxI,KAAKqc,IAAM2I,EAAO3I,IAElBrc,KAAKo2C,SAAWpxB,EAAOoxB,SACvBp2C,KAAKq2C,kBAAoBrxB,EAAOqxB,kBAEhCr2C,KAAKs2C,MAAQtxB,EAAOsxB,MACpBt2C,KAAKu2C,eAAiBvxB,EAAOuxB,eAE7Bv2C,KAAKw2C,YAAcxxB,EAAOwxB,YAE1Bx2C,KAAK4lC,SAAW5gB,EAAO4gB,SAEvB5lC,KAAKy2C,OAASzxB,EAAOyxB,OACrBz2C,KAAK02C,QAAU1xB,EAAO0xB,QACtB12C,KAAK42C,aAAe5xB,EAAO4xB,aAC3B52C,KAAK62C,gBAAkB7xB,EAAO6xB,gBAE9B72C,KAAK0kC,UAAY1f,EAAO0f,UACxB1kC,KAAK2kC,mBAAqB3f,EAAO2f,mBACjC3kC,KAAK82C,iBAAmB9xB,EAAO8xB,iBAC/B92C,KAAK+2C,kBAAoB/xB,EAAO+xB,kBAEhC/2C,KAAK6kC,SAAW7f,EAAO6f,SACvB7kC,KAAK8kC,aAAe9f,EAAO8f,aAEpB9kC,MAeR9B,OAAO20F,OAAQ77C,GAAI74C,WAElBuG,IAAK,SAAWuyC,EAAQC,GAKvB,OAHAl3C,KAAKi3C,OAAOxyC,KAAMwyC,GAClBj3C,KAAKk3C,UAAUzyC,KAAMyyC,GAEdl3C,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAW4nF,GAKhB,OAHArsF,KAAKi3C,OAAOxyC,KAAM4nF,EAAIp1C,QACtBj3C,KAAKk3C,UAAUzyC,KAAM4nF,EAAIn1C,WAElBl3C,MAIRgnH,GAAI,SAAWpqH,EAAG0xG,GAIjB,OAFaA,GAAkB,IAAI56E,GAErBjvB,KAAMzE,KAAKk3C,WAAY4jB,eAAgBl+D,GAAI6tB,IAAKzqB,KAAKi3C,SAIpE9J,OAAQ,SAAW/iC,GAIlB,OAFApK,KAAKk3C,UAAUzyC,KAAM2F,GAAIo6D,IAAKxkE,KAAKi3C,QAASouB,YAErCrlE,MAIRinH,OAAQ,WAEP,IAAI3kC,EAAK,IAAI5uD,EAEb,OAAO,SAAiB92B,GAIvB,OAFAoD,KAAKi3C,OAAOxyC,KAAMzE,KAAKgnH,GAAIpqH,EAAG0lF,IAEvBtiF,MARD,GAcRknH,oBAAqB,SAAWvhE,EAAO2oD,GAEtC,IAAIptG,EAASotG,GAAkB,IAAI56E,EACnCxyB,EAAO2xE,WAAYltB,EAAO3lD,KAAKi3C,QAC/B,IAAIkwE,EAAoBjmH,EAAO66E,IAAK/7E,KAAKk3C,WAEzC,OAAKiwE,EAAoB,EAEjBjmH,EAAOuD,KAAMzE,KAAKi3C,QAInB/1C,EAAOuD,KAAMzE,KAAKk3C,WAAY4jB,eAAgBqsD,GAAoB18F,IAAKzqB,KAAKi3C,SAIpFghE,gBAAiB,SAAWtyD,GAE3B,OAAOjjD,KAAKg+D,KAAM1gE,KAAKonH,kBAAmBzhE,KAI3CyhE,kBAAmB,WAElB,IAAI9kC,EAAK,IAAI5uD,EAEb,OAAO,SAA4BiyB,GAElC,IAAIwhE,EAAoB7kC,EAAGzP,WAAYltB,EAAO3lD,KAAKi3C,QAAS8kC,IAAK/7E,KAAKk3C,WAItE,OAAKiwE,EAAoB,EAEjBnnH,KAAKi3C,OAAO++C,kBAAmBrwC,IAIvC28B,EAAG79E,KAAMzE,KAAKk3C,WAAY4jB,eAAgBqsD,GAAoB18F,IAAKzqB,KAAKi3C,QAEjEqrC,EAAG0T,kBAAmBrwC,KAlBZ,GAwBnB0hE,oBAAqB,WAEpB,IAAIC,EAAY,IAAI5zF,EAChB6zF,EAAS,IAAI7zF,EACbprB,EAAO,IAAIorB,EAEf,OAAO,SAA8B2uD,EAAIC,EAAIklC,EAAoBC,GAShEH,EAAU7iH,KAAM49E,GAAK53D,IAAK63D,GAAKxnB,eAAgB,IAC/CysD,EAAO9iH,KAAM69E,GAAK9d,IAAK6d,GAAKhd,YAC5B/8D,EAAK7D,KAAMzE,KAAKi3C,QAASutB,IAAK8iD,GAE9B,IAMII,EAAI/tB,EAAIguB,EAASC,EANjBC,EAAkC,GAAtBxlC,EAAG0T,WAAYzT,GAC3BwlC,GAAQ9nH,KAAKk3C,UAAU6kC,IAAKwrC,GAC5BQ,EAAKz/G,EAAKyzE,IAAK/7E,KAAKk3C,WACpB48C,GAAOxrF,EAAKyzE,IAAKwrC,GACjBh/G,EAAID,EAAKutF,WACToN,EAAMvgG,KAAKoI,IAAK,EAAIg9G,EAAMA,GAG9B,GAAK7kB,EAAM,EAQV,GAJAykB,EAAKI,EAAMh0B,EAAKi0B,EAChBpuB,EAAKmuB,EAAMC,EAAKj0B,EAChB8zB,EAASC,EAAY5kB,EAEhBykB,GAAM,EAEV,GAAK/tB,IAAQiuB,EAEZ,GAAKjuB,GAAMiuB,EAAS,CAKnB,IAAII,EAAS,EAAI/kB,EAGjB0kB,GAFAD,GAAMM,IAEWN,EAAKI,GADtBnuB,GAAMquB,GAC2B,EAAID,GAAOpuB,GAAOmuB,EAAMJ,EAAK/tB,EAAK,EAAI7F,GAAOvrF,OAM9EoxF,EAAKkuB,EAELF,IADAD,EAAKhlH,KAAKL,IAAK,IAAOylH,EAAMnuB,EAAKouB,KAChBL,EAAK/tB,GAAOA,EAAK,EAAI7F,GAAOvrF,OAQ9CoxF,GAAOkuB,EAEPF,IADAD,EAAKhlH,KAAKL,IAAK,IAAOylH,EAAMnuB,EAAKouB,KAChBL,EAAK/tB,GAAOA,EAAK,EAAI7F,GAAOvrF,OAMzCoxF,IAAQiuB,EAMZD,IAFAD,EAAKhlH,KAAKL,IAAK,KAASylH,EAAMD,EAAYE,KAEzBL,GADjB/tB,EAAO+tB,EAAK,GAAQG,EAAYnlH,KAAKN,IAAKM,KAAKL,KAAOwlH,GAAa/zB,GAAM+zB,KAC5CluB,EAAK,EAAI7F,GAAOvrF,EAElCoxF,GAAMiuB,GAIjBF,EAAK,EAELC,GADAhuB,EAAKj3F,KAAKN,IAAKM,KAAKL,KAAOwlH,GAAa/zB,GAAM+zB,KAC7BluB,EAAK,EAAI7F,GAAOvrF,GAQjCo/G,IAFAD,EAAKhlH,KAAKL,IAAK,IAAOylH,EAAMD,EAAYE,KAEvBL,GADjB/tB,EAAO+tB,EAAK,EAAMG,EAAYnlH,KAAKN,IAAKM,KAAKL,KAAOwlH,GAAa/zB,GAAM+zB,KAC1CluB,EAAK,EAAI7F,GAAOvrF,OAU/CoxF,EAAOmuB,EAAM,GAAQD,EAAYA,EAEjCF,IADAD,EAAKhlH,KAAKL,IAAK,IAAOylH,EAAMnuB,EAAKouB,KAChBL,EAAK/tB,GAAOA,EAAK,EAAI7F,GAAOvrF,EAgB9C,OAZKi/G,GAEJA,EAAmB/iH,KAAMzE,KAAKk3C,WAAY4jB,eAAgB4sD,GAAKj9F,IAAKzqB,KAAKi3C,QAIrEwwE,GAEJA,EAAuBhjH,KAAM8iH,GAASzsD,eAAgB6+B,GAAKlvE,IAAK68F,GAI1DK,GAzHY,GA+HrBM,gBAAiB,WAEhB,IAAI3lC,EAAK,IAAI5uD,EAEb,OAAO,SAA0B6lF,EAAQjL,GAExChsB,EAAGzP,WAAY0mC,EAAOrzE,OAAQlmC,KAAKi3C,QACnC,IAAIixE,EAAM5lC,EAAGvG,IAAK/7E,KAAKk3C,WACnBqlE,EAAKj6B,EAAGvG,IAAKuG,GAAO4lC,EAAMA,EAC1BC,EAAU5O,EAAOpzE,OAASozE,EAAOpzE,OAErC,GAAKo2E,EAAK4L,EAAU,OAAO,KAE3B,IAAIC,EAAM1lH,KAAKg+D,KAAMynD,EAAU5L,GAG3BprB,EAAK+2B,EAAME,EAGXh3B,EAAK82B,EAAME,EAGf,OAAKj3B,EAAK,GAAKC,EAAK,EAAW,KAK1BD,EAAK,EAAWnxF,KAAKgnH,GAAI51B,EAAIkd,GAG3BtuG,KAAKgnH,GAAI71B,EAAImd,IA9BL,GAoCjB+K,iBAAkB,SAAWE,GAE5B,OAAOv5G,KAAKi4G,gBAAiBsB,EAAOrzE,SAAYqzE,EAAOpzE,QAIxDkiF,gBAAiB,SAAWxuD,GAE3B,IAAI8gD,EAAc9gD,EAAMvzB,OAAOy1C,IAAK/7E,KAAKk3C,WAEzC,GAAqB,IAAhByjE,EAGJ,OAA8C,IAAzC9gD,EAAMo+C,gBAAiBj4G,KAAKi3C,QAEzB,EAMD,KAIR,IAAIr6C,IAAQoD,KAAKi3C,OAAO8kC,IAAKliB,EAAMvzB,QAAWuzB,EAAMtzB,UAAao0E,EAIjE,OAAO/9G,GAAK,EAAIA,EAAK,MAItB0rH,eAAgB,SAAWzuD,EAAOy0C,GAEjC,IAAI1xG,EAAIoD,KAAKqoH,gBAAiBxuD,GAE9B,OAAW,OAANj9D,EAEG,KAIDoD,KAAKgnH,GAAIpqH,EAAG0xG,IAIpBkL,gBAAiB,SAAW3/C,GAI3B,IAAI0uD,EAAc1uD,EAAMo+C,gBAAiBj4G,KAAKi3C,QAE9C,OAAqB,IAAhBsxE,GAMa1uD,EAAMvzB,OAAOy1C,IAAK/7E,KAAKk3C,WAEtBqxE,EAAc,GAYlCC,aAAc,SAAW/Q,EAAKnJ,GAE7B,IAAIma,EAAMC,EAAMC,EAAOC,EAAOC,EAAOC,EAEjCC,EAAU,EAAI/oH,KAAKk3C,UAAU1mB,EAChCw4F,EAAU,EAAIhpH,KAAKk3C,UAAU9zB,EAC7B6lG,EAAU,EAAIjpH,KAAKk3C,UAAU5kB,EAE1B2kB,EAASj3C,KAAKi3C,OA0BlB,OAxBK8xE,GAAW,GAEfN,GAAShR,EAAIr1G,IAAIouB,EAAIymB,EAAOzmB,GAAMu4F,EAClCL,GAASjR,EAAIp1G,IAAImuB,EAAIymB,EAAOzmB,GAAMu4F,IAIlCN,GAAShR,EAAIp1G,IAAImuB,EAAIymB,EAAOzmB,GAAMu4F,EAClCL,GAASjR,EAAIr1G,IAAIouB,EAAIymB,EAAOzmB,GAAMu4F,GAI9BC,GAAW,GAEfL,GAAUlR,EAAIr1G,IAAIghB,EAAI6zB,EAAO7zB,GAAM4lG,EACnCJ,GAAUnR,EAAIp1G,IAAI+gB,EAAI6zB,EAAO7zB,GAAM4lG,IAInCL,GAAUlR,EAAIp1G,IAAI+gB,EAAI6zB,EAAO7zB,GAAM4lG,EACnCJ,GAAUnR,EAAIr1G,IAAIghB,EAAI6zB,EAAO7zB,GAAM4lG,GAI7BP,EAAOG,GAAaD,EAAQD,EAAgB,OAK9CC,EAAQF,GAAQA,IAASA,KAAOA,EAAOE,IAEvCC,EAAQF,GAAQA,IAASA,KAAOA,EAAOE,GAEvCK,GAAW,GAEfJ,GAAUpR,EAAIr1G,IAAIkwB,EAAI2kB,EAAO3kB,GAAM22F,EACnCH,GAAUrR,EAAIp1G,IAAIiwB,EAAI2kB,EAAO3kB,GAAM22F,IAInCJ,GAAUpR,EAAIp1G,IAAIiwB,EAAI2kB,EAAO3kB,GAAM22F,EACnCH,GAAUrR,EAAIr1G,IAAIkwB,EAAI2kB,EAAO3kB,GAAM22F,GAI7BR,EAAOK,GAAaD,EAAQH,EAAgB,OAE9CG,EAAQJ,GAAQA,IAASA,KAAOA,EAAOI,IAEvCC,EAAQJ,GAAQA,IAASA,KAAOA,EAAOI,GAIvCJ,EAAO,EAAW,KAEhB1oH,KAAKgnH,GAAIyB,GAAQ,EAAIA,EAAOC,EAAMpa,MAI1CyJ,cAAe,WAEd,IAAI3tG,EAAI,IAAIspB,EAEZ,OAAO,SAAwB+jF,GAE9B,OAAuC,OAAhCz3G,KAAKwoH,aAAc/Q,EAAKrtG,IANlB,GAYf8+G,kBAAmB,WAGlB,IAAI5gH,EAAO,IAAIorB,EACXm+C,EAAQ,IAAIn+C,EACZo+C,EAAQ,IAAIp+C,EACZ4S,EAAS,IAAI5S,EAEjB,OAAO,SAA4Bx2B,EAAGsK,EAAGe,EAAG4gH,EAAiB7a,GAI5Dz8B,EAAMgB,WAAYrrE,EAAGtK,GACrB40E,EAAMe,WAAYtqE,EAAGrL,GACrBopC,EAAOwsC,aAAcjB,EAAOC,GAO5B,IACI0K,EADA4sC,EAAMppH,KAAKk3C,UAAU6kC,IAAKz1C,GAG9B,GAAK8iF,EAAM,EAAI,CAEd,GAAKD,EAAkB,OAAO,KAC9B3sC,EAAO,MAED,CAAA,KAAK4sC,EAAM,GAOjB,OAAO,KALP5sC,GAAS,EACT4sC,GAAQA,EAQT9gH,EAAKuqE,WAAY7yE,KAAKi3C,OAAQ/5C,GAC9B,IAAImsH,EAAS7sC,EAAOx8E,KAAKk3C,UAAU6kC,IAAKjK,EAAMgB,aAAcxqE,EAAMwpE,IAGlE,GAAKu3C,EAAS,EAEb,OAAO,KAIR,IAAIC,EAAS9sC,EAAOx8E,KAAKk3C,UAAU6kC,IAAKlK,EAAMsqB,MAAO7zF,IAGrD,GAAKghH,EAAS,EAEb,OAAO,KAKR,GAAKD,EAASC,EAASF,EAEtB,OAAO,KAKR,IAAIG,GAAQ/sC,EAAOl0E,EAAKyzE,IAAKz1C,GAG7B,OAAKijF,EAAM,EAEH,KAKDvpH,KAAKgnH,GAAIuC,EAAMH,EAAK9a,IA7EV,GAmFnB/vE,aAAc,SAAWy7E,GAKxB,OAHAh6G,KAAKi3C,OAAO1Y,aAAcy7E,GAC1Bh6G,KAAKk3C,UAAUutB,mBAAoBu1C,GAE5Bh6G,MAIRmwD,OAAQ,SAAWk8B,GAElB,OAAOA,EAAIp1C,OAAOkZ,OAAQnwD,KAAKi3C,SAAYo1C,EAAIn1C,UAAUiZ,OAAQnwD,KAAKk3C,cAiBxEh5C,OAAO20F,OAAQ17C,GAAMh5C,WAEpBuG,IAAK,SAAWpD,EAAOC,GAKtB,OAHAvB,KAAKsB,MAAMmD,KAAMnD,GACjBtB,KAAKuB,IAAIkD,KAAMlD,GAERvB,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWqsF,GAKhB,OAHA9wF,KAAKsB,MAAMmD,KAAMqsF,EAAKxvF,OACtBtB,KAAKuB,IAAIkD,KAAMqsF,EAAKvvF,KAEbvB,MAIR23G,UAAW,SAAWrJ,GAGrB,OADaA,GAAkB,IAAI56E,GACrB8jD,WAAYx3E,KAAKsB,MAAOtB,KAAKuB,KAAMu5D,eAAgB,KAIlE6zC,MAAO,SAAWL,GAGjB,OADaA,GAAkB,IAAI56E,GACrBm/C,WAAY7yE,KAAKuB,IAAKvB,KAAKsB,QAI1CkoH,WAAY,WAEX,OAAOxpH,KAAKsB,MAAM00F,kBAAmBh2F,KAAKuB,MAI3C25C,SAAU,WAET,OAAOl7C,KAAKsB,MAAMy0F,WAAY/1F,KAAKuB,MAIpCylH,GAAI,SAAWpqH,EAAG0xG,GAEjB,IAAIptG,EAASotG,GAAkB,IAAI56E,EAEnC,OAAO1zB,KAAK2uG,MAAOztG,GAAS45D,eAAgBl+D,GAAI6tB,IAAKzqB,KAAKsB,QAI3DmoH,6BAA8B,WAE7B,IAAIC,EAAS,IAAIh2F,EACbi2F,EAAW,IAAIj2F,EAEnB,OAAO,SAAuCiyB,EAAOikE,GAEpDF,EAAO72C,WAAYltB,EAAO3lD,KAAKsB,OAC/BqoH,EAAS92C,WAAY7yE,KAAKuB,IAAKvB,KAAKsB,OAEpC,IAAIuoH,EAAYF,EAAS5tC,IAAK4tC,GAG1B/sH,EAFkB+sH,EAAS5tC,IAAK2tC,GAEVG,EAQ1B,OANKD,IAEJhtH,EAAIu0B,GAAM+oD,MAAOt9E,EAAG,EAAG,IAIjBA,GArBqB,GA2B9BsqH,oBAAqB,SAAWvhE,EAAOikE,EAAatb,GAEnD,IAAI1xG,EAAIoD,KAAKypH,6BAA8B9jE,EAAOikE,GAE9C1oH,EAASotG,GAAkB,IAAI56E,EAEnC,OAAO1zB,KAAK2uG,MAAOztG,GAAS45D,eAAgBl+D,GAAI6tB,IAAKzqB,KAAKsB,QAI3Di9B,aAAc,SAAWyO,GAKxB,OAHAhtC,KAAKsB,MAAMi9B,aAAcyO,GACzBhtC,KAAKuB,IAAIg9B,aAAcyO,GAEhBhtC,MAIRmwD,OAAQ,SAAW2gC,GAElB,OAAOA,EAAKxvF,MAAM6uD,OAAQnwD,KAAKsB,QAAWwvF,EAAKvvF,IAAI4uD,OAAQnwD,KAAKuB,QAmBlErD,OAAO20F,OAAQz7C,IAEd9Q,OAAQ,WAEP,IAAI+7C,EAAK,IAAI3uD,EAEb,OAAO,SAAiBx2B,EAAGsK,EAAGe,EAAG+lG,GAEhC,IAAIptG,EAASotG,GAAkB,IAAI56E,EAEnCxyB,EAAO2xE,WAAYtqE,EAAGf,GACtB66E,EAAGxP,WAAY31E,EAAGsK,GAClBtG,EAAOi7F,MAAO9Z,GAEd,IAAIynC,EAAiB5oH,EAAO20F,WAC5B,OAAKi0B,EAAiB,EAEd5oH,EAAO45D,eAAgB,EAAIp4D,KAAKg+D,KAAMopD,IAIvC5oH,EAAOwD,IAAK,EAAG,EAAG,IAnBnB,GA2BRqlH,mBAAoB,WAEnB,IAAI1nC,EAAK,IAAI3uD,EACT4uD,EAAK,IAAI5uD,EACT0vD,EAAK,IAAI1vD,EAEb,OAAO,SAA6BiyB,EAAOzoD,EAAGsK,EAAGe,EAAG+lG,GAEnDjsB,EAAGxP,WAAYtqE,EAAGrL,GAClBolF,EAAGzP,WAAYrrE,EAAGtK,GAClBkmF,EAAGvQ,WAAYltB,EAAOzoD,GAEtB,IAAI8sH,EAAQ3nC,EAAGtG,IAAKsG,GAChB4nC,EAAQ5nC,EAAGtG,IAAKuG,GAChB4nC,EAAQ7nC,EAAGtG,IAAKqH,GAChB+mC,EAAQ7nC,EAAGvG,IAAKuG,GAChB8nC,EAAQ9nC,EAAGvG,IAAKqH,GAEhBinC,EAAUL,EAAQG,EAAQF,EAAQA,EAElC/oH,EAASotG,GAAkB,IAAI56E,EAGnC,GAAe,IAAV22F,EAIJ,OAAOnpH,EAAOwD,KAAO,GAAK,GAAK,GAIhC,IAAI4lH,EAAW,EAAID,EACfptH,GAAMktH,EAAQD,EAAQD,EAAQG,GAAUE,EACxClgH,GAAM4/G,EAAQI,EAAQH,EAAQC,GAAUI,EAG5C,OAAOppH,EAAOwD,IAAK,EAAIzH,EAAImN,EAAGA,EAAGnN,IApCf,GA0CpByhC,cAAe,WAEd,IAAI4jD,EAAK,IAAI5uD,EAEb,OAAO,SAAwBiyB,EAAOzoD,EAAGsK,EAAGe,GAE3C,IAAIrH,EAASk2C,GAAS2yE,mBAAoBpkE,EAAOzoD,EAAGsK,EAAGe,EAAG+5E,GAE1D,OAASphF,EAAOsvB,GAAK,GAAStvB,EAAOkiB,GAAK,GAAWliB,EAAOsvB,EAAItvB,EAAOkiB,GAAO,GARjE,KAgBhBllB,OAAO20F,OAAQz7C,GAASj5C,WAEvBuG,IAAK,SAAWxH,EAAGsK,EAAGe,GAMrB,OAJAvI,KAAK9C,EAAEuH,KAAMvH,GACb8C,KAAKwH,EAAE/C,KAAM+C,GACbxH,KAAKuI,EAAE9D,KAAM8D,GAENvI,MAIRuqH,wBAAyB,SAAW7/C,EAAQ8/C,EAAIC,EAAIC,GAMnD,OAJA1qH,KAAK9C,EAAEuH,KAAMimE,EAAQ8/C,IACrBxqH,KAAKwH,EAAE/C,KAAMimE,EAAQ+/C,IACrBzqH,KAAKuI,EAAE9D,KAAMimE,EAAQggD,IAEd1qH,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAWkmH,GAMhB,OAJA3qH,KAAK9C,EAAEuH,KAAMkmH,EAASztH,GACtB8C,KAAKwH,EAAE/C,KAAMkmH,EAASnjH,GACtBxH,KAAKuI,EAAE9D,KAAMkmH,EAASpiH,GAEfvI,MAIRyW,KAAM,WAEL,IAAI4rE,EAAK,IAAI3uD,EACT4uD,EAAK,IAAI5uD,EAEb,OAAO,WAKN,OAHA2uD,EAAGxP,WAAY7yE,KAAKuI,EAAGvI,KAAKwH,GAC5B86E,EAAGzP,WAAY7yE,KAAK9C,EAAG8C,KAAKwH,GAEK,GAA1B66E,EAAG8Z,MAAO7Z,GAAK3kF,UAVlB,GAgBNitH,SAAU,SAAWtc,GAGpB,OADaA,GAAkB,IAAI56E,GACrB8jD,WAAYx3E,KAAK9C,EAAG8C,KAAKwH,GAAIijB,IAAKzqB,KAAKuI,GAAIuyD,eAAgB,EAAI,IAI9Ex0B,OAAQ,SAAWgoE,GAElB,OAAOl3D,GAAS9Q,OAAQtmC,KAAK9C,EAAG8C,KAAKwH,EAAGxH,KAAKuI,EAAG+lG,IAIjDz0C,MAAO,SAAWy0C,GAIjB,OAFaA,GAAkB,IAAIjoE,IAErB+zE,sBAAuBp6G,KAAK9C,EAAG8C,KAAKwH,EAAGxH,KAAKuI,IAI3DwhH,mBAAoB,SAAWpkE,EAAO2oD,GAErC,OAAOl3D,GAAS2yE,mBAAoBpkE,EAAO3lD,KAAK9C,EAAG8C,KAAKwH,EAAGxH,KAAKuI,EAAG+lG,IAIpE5vE,cAAe,SAAWinB,GAEzB,OAAOvO,GAAS1Y,cAAeinB,EAAO3lD,KAAK9C,EAAG8C,KAAKwH,EAAGxH,KAAKuI,IAI5D2+G,oBAAqB,WAEpB,IAAIrtD,EAAQ,IAAIxzB,GACZwkF,GAAa,IAAI1zE,GAAS,IAAIA,GAAS,IAAIA,IAC3C2zE,EAAiB,IAAIp3F,EACrB4lF,EAAe,IAAI5lF,EAEvB,OAAO,SAA8BiyB,EAAO2oD,GAE3C,IAAIptG,EAASotG,GAAkB,IAAI56E,EAC/Bq3F,EAAc5iG,EAAAA,EASlB,GALA0xC,EAAMugD,sBAAuBp6G,KAAK9C,EAAG8C,KAAKwH,EAAGxH,KAAKuI,GAClDsxD,EAAM0gD,aAAc50D,EAAOmlE,IAIkB,IAAzC9qH,KAAK0+B,cAAeosF,GAIvB5pH,EAAOuD,KAAMqmH,OAEP,CAIND,EAAU,GAAInmH,IAAK1E,KAAK9C,EAAG8C,KAAKwH,GAChCqjH,EAAU,GAAInmH,IAAK1E,KAAKwH,EAAGxH,KAAKuI,GAChCsiH,EAAU,GAAInmH,IAAK1E,KAAKuI,EAAGvI,KAAK9C,GAEhC,IAAK,IAAIE,EAAI,EAAGA,EAAIytH,EAASltH,OAAQP,IAAO,CAE3CytH,EAAUztH,GAAI8pH,oBAAqB4D,GAAgB,EAAMxR,GAEzD,IAAIp+D,EAAW4vE,EAAe90B,kBAAmBsjB,GAE7Cp+D,EAAW6vE,IAEdA,EAAc7vE,EAEdh6C,EAAOuD,KAAM60G,KAQhB,OAAOp4G,GAnDY,GAyDrBivD,OAAQ,SAAWw6D,GAElB,OAAOA,EAASztH,EAAEizD,OAAQnwD,KAAK9C,IAAOytH,EAASnjH,EAAE2oD,OAAQnwD,KAAKwH,IAAOmjH,EAASpiH,EAAE4nD,OAAQnwD,KAAKuI,MA4B/F8uC,GAAKl5C,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAEvDsJ,YAAa4vC,GAEb5N,QAAQ,EAERuhF,YAAa,SAAW7rH,GAEvBa,KAAKs3C,SAAWn4C,GAIjBsF,KAAM,SAAWugB,GAMhB,OAJA+qB,GAAS5xC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKs3C,SAAWtyB,EAAOsyB,SAEhBt3C,MAIRw3C,mBAAoB,WAEnB,IACIj0B,EAAG0nG,EAAI9+G,EADPs7B,EAAWznC,KAAKynC,SAGpB,GAAKA,EAASQ,iBAAmB,CAEhC,IAAIC,EAAkBT,EAASS,gBAC3B/4B,EAAOjR,OAAOiR,KAAM+4B,GAExB,GAAK/4B,EAAKxR,OAAS,EAAI,CAEtB,IAAIopH,EAAiB7+E,EAAiB/4B,EAAM,IAE5C,QAAwBJ,IAAnBg4G,EAKJ,IAHA/mH,KAAKitE,yBACLjtE,KAAKkrH,yBAEC3nG,EAAI,EAAG0nG,EAAKlE,EAAeppH,OAAQ4lB,EAAI0nG,EAAI1nG,IAEhDpX,EAAO46G,EAAgBxjG,GAAIpX,MAAQiR,OAAQmG,GAE3CvjB,KAAKitE,sBAAsBtmE,KAAM,GACjC3G,KAAKkrH,sBAAuB/+G,GAASoX,OAQlC,CAEN,IAAIuhB,EAAe2C,EAAS3C,aAE5B,QAAsB/1B,IAAjB+1B,GAA8BA,EAAannC,OAAS,EAKxD,IAHAqC,KAAKitE,yBACLjtE,KAAKkrH,yBAEC3nG,EAAI,EAAG0nG,EAAKnmF,EAAannC,OAAQ4lB,EAAI0nG,EAAI1nG,IAE9CpX,EAAO24B,EAAcvhB,GAAIpX,MAAQiR,OAAQmG,GAEzCvjB,KAAKitE,sBAAsBtmE,KAAM,GACjC3G,KAAKkrH,sBAAuB/+G,GAASoX,IAUzCspE,QAAW,WAuBV,SAASs+B,EAAgBxlE,EAAOjf,EAAIC,EAAIC,EAAIwkF,EAAK9lF,EAAK+lF,GAUrD,OARAj0E,GAAS2yE,mBAAoBpkE,EAAOjf,EAAIC,EAAIC,EAAI0kF,GAEhDF,EAAItwD,eAAgBwwD,EAAU96F,GAC9B8U,EAAIw1B,eAAgBwwD,EAAUloG,GAC9BioG,EAAIvwD,eAAgBwwD,EAAUh5F,GAE9B84F,EAAI3gG,IAAK6a,GAAM7a,IAAK4gG,GAEbD,EAAIx7G,QAIZ,SAAS27G,EAAmBjkF,EAAQolD,EAAWL,EAAKk6B,EAAIC,EAAIC,EAAI9gE,GAE/D,IACI3jB,EAAWsF,EAAOtF,SAYtB,GAAmB,QAVdA,EAASgB,OAASoG,GAEVijD,EAAI68B,kBAAmBzC,EAAID,EAAID,GAAI,EAAM5gE,GAIzC0mC,EAAI68B,kBAAmB3C,EAAIC,EAAIC,EAAIzkF,EAASgB,OAASkG,GAAYyc,IAIpD,OAAO,KAEjC6lE,EAAuB/mH,KAAMkhD,GAC7B6lE,EAAuBjtF,aAAc+I,EAAOhJ,aAE5C,IAAI4c,EAAWwxC,EAAUL,IAAIp1C,OAAO8+C,WAAYy1B,GAEhD,OAAKtwE,EAAWwxC,EAAUhrD,MAAQwZ,EAAWwxC,EAAU/qD,IAAa,MAGnEuZ,SAAUA,EACVyK,MAAO6lE,EAAuB57G,QAC9B03B,OAAQA,GAKV,SAASmkF,EAAiCnkF,EAAQolD,EAAWL,EAAK11E,EAAUslB,EAAI/+B,EAAGsK,EAAGe,GAErFu4G,EAAG1uC,oBAAqBz7D,EAAUzZ,GAClC6jH,EAAG3uC,oBAAqBz7D,EAAUnP,GAClCw5G,EAAG5uC,oBAAqBz7D,EAAUpO,GAElC,IAAImjH,EAAeH,EAAmBjkF,EAAQolD,EAAWL,EAAKy0B,EAAIC,EAAIC,EAAI2K,GAmB1E,OAjBKD,IAECzvF,IAEJg4C,EAAI7B,oBAAqBn2C,EAAI/+B,GAC7Bg3E,EAAI9B,oBAAqBn2C,EAAIz0B,GAC7B2sE,EAAI/B,oBAAqBn2C,EAAI1zB,GAE7BmjH,EAAazvF,GAAKkvF,EAAgBQ,EAAmB7K,EAAIC,EAAIC,EAAI/sC,EAAKC,EAAKC,IAI5Eu3C,EAAal+E,KAAO,IAAIgE,GAAOt0C,EAAGsK,EAAGe,EAAG6uC,GAAS9Q,OAAQw6E,EAAIC,EAAIC,IACjE0K,EAAaE,UAAY1uH,GAInBwuH,EA5FR,IAAIG,EAAgB,IAAIl4F,EACpB04D,EAAM,IAAIr1C,GACVuiE,EAAS,IAAItzE,GAEb66E,EAAK,IAAIptF,EACTqtF,EAAK,IAAIrtF,EACTstF,EAAK,IAAIttF,EAETo4F,EAAQ,IAAIp4F,EACZq4F,EAAQ,IAAIr4F,EACZs4F,EAAQ,IAAIt4F,EAEZugD,EAAM,IAAI1jD,EACV2jD,EAAM,IAAI3jD,EACV4jD,EAAM,IAAI5jD,EAEV+6F,EAAY,IAAI53F,EAEhBi4F,EAAoB,IAAIj4F,EACxB83F,EAAyB,IAAI93F,EA6EjC,OAAO,SAAkBg5D,EAAWC,GAEnC,IAAIllD,EAAWznC,KAAKynC,SAChBzF,EAAWhiC,KAAKgiC,SAChB1D,EAAct+B,KAAKs+B,YAEvB,QAAkBvvB,IAAbizB,IAI4B,OAA5ByF,EAAS0K,gBAA0B1K,EAAS20E,wBAEjD7C,EAAO90G,KAAMgjC,EAAS0K,gBACtBonE,EAAOh7E,aAAcD,IAE6B,IAA7CouD,EAAUL,IAAIgtB,iBAAkBE,KAIrCsS,EAAcnzE,WAAYpa,GAC1B+tD,EAAI5nF,KAAMioF,EAAUL,KAAM9tD,aAAcstF,GAIV,OAAzBpkF,EAASyK,cAEsC,IAA9Cm6C,EAAI0rB,cAAetwE,EAASyK,eAFlC,CAMA,IAAIw5E,EAEJ,GAAKjkF,EAASQ,iBAAmB,CAEhC,IAAI/qC,EAAGsK,EAAGe,EAINnL,EAAGI,EAHHiL,EAAQg/B,EAASh/B,MACjBkO,EAAW8wB,EAAS3L,WAAWnlB,SAC/BslB,EAAKwL,EAAS3L,WAAWG,GAG7B,GAAe,OAAVxzB,EAIJ,IAAMrL,EAAI,EAAGI,EAAIiL,EAAM5H,MAAOzD,EAAII,EAAGJ,GAAK,EAEzCF,EAAIuL,EAAM0pE,KAAM/0E,GAChBoK,EAAIiB,EAAM0pE,KAAM/0E,EAAI,GACpBmL,EAAIE,EAAM0pE,KAAM/0E,EAAI,IAEpBsuH,EAAeD,EAAiCzrH,KAAM0sF,EAAWL,EAAK11E,EAAUslB,EAAI/+B,EAAGsK,EAAGe,MAIzFmjH,EAAaE,UAAYlpH,KAAKK,MAAO3F,EAAI,GACzCuvF,EAAWhmF,KAAM+kH,SAUnB,IAAMtuH,EAAI,EAAGI,EAAImZ,EAAS9V,MAAOzD,EAAII,EAAGJ,GAAK,GAM5CsuH,EAAeD,EAAiCzrH,KAAM0sF,EAAWL,EAAK11E,EAAUslB,EAJhF/+B,EAAIE,EACJoK,EAAIpK,EAAI,EACRmL,EAAInL,EAAI,MAMPsuH,EAAajjH,MAAQvL,EACrByvF,EAAWhmF,KAAM+kH,SAQd,GAAKjkF,EAASU,WAAa,CAEjC,IAAI8jF,EAAKC,EAAKC,EAKVx4E,EAJAy4E,EAAkB/gH,MAAMgX,QAAS2f,GAEjClI,EAAW2N,EAAS3N,SACpBC,EAAQ0N,EAAS1N,MAGjB+X,EAAgBrK,EAASqK,cAAe,GACvCA,EAAcn0C,OAAS,IAAIg2C,EAAM7B,GAEtC,IAAM,IAAIz0C,EAAI,EAAGwjH,EAAK9mF,EAAMp8B,OAAQN,EAAIwjH,EAAIxjH,IAAO,CAElD,IAAImwC,EAAOzT,EAAO18B,GACdgvH,EAAeD,EAAkBpqF,EAAUwL,EAAKlD,eAAkBtI,EAEtE,QAAsBjzB,IAAjBs9G,EAAL,CAMA,GAJAJ,EAAMnyF,EAAU0T,EAAKtwC,GACrBgvH,EAAMpyF,EAAU0T,EAAKhmC,GACrB2kH,EAAMryF,EAAU0T,EAAKjlC,IAEc,IAA9B8jH,EAAavnF,aAAwB,CAEzC,IAAIA,EAAe2C,EAAS3C,aACxBqlC,EAAkBnqE,KAAKitE,sBAE3B6zC,EAAGp8G,IAAK,EAAG,EAAG,GACdq8G,EAAGr8G,IAAK,EAAG,EAAG,GACds8G,EAAGt8G,IAAK,EAAG,EAAG,GAEd,IAAM,IAAI9H,EAAI,EAAG0vH,EAAKxnF,EAAannC,OAAQf,EAAI0vH,EAAI1vH,IAAO,CAEzD,IAAIuwE,EAAYhD,EAAiBvtE,GAEjC,GAAmB,IAAduwE,EAAL,CAEA,IAAIo/C,EAAUznF,EAAcloC,GAAIk9B,SAEhCgnF,EAAG1rB,gBAAiB02B,EAAMj5C,WAAY05C,EAAS/+E,EAAKtwC,GAAK+uH,GAAO9+C,GAChE4zC,EAAG3rB,gBAAiB22B,EAAMl5C,WAAY05C,EAAS/+E,EAAKhmC,GAAK0kH,GAAO/+C,GAChE6zC,EAAG5rB,gBAAiB42B,EAAMn5C,WAAY05C,EAAS/+E,EAAKjlC,GAAK4jH,GAAOh/C,IAIjE2zC,EAAGr2F,IAAKwhG,GACRlL,EAAGt2F,IAAKyhG,GACRlL,EAAGv2F,IAAK0hG,GAERF,EAAMnL,EACNoL,EAAMnL,EACNoL,EAAMnL,EAMP,GAFA0K,EAAeH,EAAmBvrH,KAAM0sF,EAAWL,EAAK4/B,EAAKC,EAAKC,EAAKR,GAEnD,CAEnB,GAAKh4E,GAAOA,EAAKt2C,GAAM,CAEtB,IAAImvH,EAAQ74E,EAAKt2C,GACjB42E,EAAIxvE,KAAM+nH,EAAO,IACjBt4C,EAAIzvE,KAAM+nH,EAAO,IACjBr4C,EAAI1vE,KAAM+nH,EAAO,IAEjBd,EAAazvF,GAAKkvF,EAAgBQ,EAAmBM,EAAKC,EAAKC,EAAKl4C,EAAKC,EAAKC,GAI/Eu3C,EAAal+E,KAAOA,EACpBk+E,EAAaE,UAAYvuH,EACzBsvF,EAAWhmF,KAAM+kH,SA/Pb,GA2QT97G,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKynC,SAAUznC,KAAKgiC,UAAWv9B,KAAMzE,SAozBpE,IAAImjD,GAAiB,EAkyFrB2S,GAAY33D,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQw5B,GAAkB/yC,YAEvEsJ,YAAaquD,GAEb2H,eAAe,IAgsGhBmS,GAAQzxE,UAAUyjC,WAAY,EAE9BguC,GAAQzxE,UAAUyR,MAAQ,WAEzB,OAAO,IAAIggE,GAAS5vE,KAAKwI,MAAM2lG,SAAUnuG,KAAK6hC,UAI/C+tC,GAAQzxE,UAAUukB,OAAS,SAAW6zE,GAErC,OACCrxF,KAAM,UACNsD,MAAOxI,KAAKwI,MAAM2lG,SAClBtsE,QAAS7hC,KAAK6hC,UAqBhBguC,GAAI1xE,UAAUsjC,OAAQ,EAEtBouC,GAAI1xE,UAAUyR,MAAQ,WAErB,OAAO,IAAIigE,GAAK7vE,KAAKwI,MAAM2lG,SAAUnuG,KAAK0hC,KAAM1hC,KAAK2hC,MAItDkuC,GAAI1xE,UAAUukB,OAAS,SAAW6zE,GAEjC,OACCrxF,KAAM,MACNsD,MAAOxI,KAAKwI,MAAM2lG,SAClBzsE,KAAM1hC,KAAK0hC,KACXC,IAAK3hC,KAAK2hC,MAuBZmuC,GAAM3xE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAExDsJ,YAAaqoE,GAEbrrE,KAAM,SAAWugB,EAAQ4nE,GAWxB,OATA78C,GAAS5xC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,EAAQ4nE,GAEjB,OAAtB5nE,EAAOkzB,aAAsBl4C,KAAKk4C,WAAalzB,EAAOkzB,WAAWtoC,SAClD,OAAfoV,EAAOwc,MAAexhC,KAAKwhC,IAAMxc,EAAOwc,IAAI5xB,SAChB,OAA5BoV,EAAOw4C,mBAA4Bx9D,KAAKw9D,iBAAmBx4C,EAAOw4C,iBAAiB5tD,SAExF5P,KAAKgsC,WAAahnB,EAAOgnB,WACzBhsC,KAAKwwC,iBAAmBxrB,EAAOwrB,iBAExBxwC,MAIR0iB,OAAQ,SAAW6zE,GAElB,IAAI/1F,EAAOuvC,GAAS5xC,UAAUukB,OAAOhlB,KAAMsC,KAAMu2F,GAKjD,OAHyB,OAApBv2F,KAAKk4C,aAAsB13C,EAAK8mC,OAAO4Q,WAAal4C,KAAKk4C,WAAWx1B,OAAQ6zE,IAC/D,OAAbv2F,KAAKwhC,MAAehhC,EAAK8mC,OAAO9F,IAAMxhC,KAAKwhC,IAAI9e,UAE7CliB,KA4BTuvE,GAAU5xE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAE5DsJ,YAAasoE,GAEb7S,aAAa,EAEbz4D,KAAM,SAAWugB,GAEhB+qB,GAAS5xC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKo/B,eAAe36B,KAAMugB,EAAOoa,gBACjCp/B,KAAKq/B,qBAAuBra,EAAOqa,qBAEnC,IAAM,IAAIjiC,EAAI,EAAGI,EAAIwnB,EAAOwa,WAAW7hC,OAAQP,EAAII,EAAGJ,IAErD4C,KAAKw/B,WAAW74B,KAAMqe,EAAOwa,WAAYpiC,IAI1C,OAAO4C,MAIRyqB,IAAK,SAAWqI,EAASrtB,EAAMy1C,EAAUvb,EAAUn3B,EAAO6zB,QAE3CttB,IAATtJ,IAAqBA,GAAS,QACjBsJ,IAAbmsC,IAAyBA,EAAW,QACxBnsC,IAAZstB,IAAwBA,EAAU,QACxBttB,IAAVvG,IAAsBA,EAAQ,IAAIixB,EAAO,gBAC5B1qB,IAAb4wB,IAAyBA,EAAWoD,IAEzCmY,EAAWx4C,KAAKN,IAAK84C,EAAUx4C,KAAKL,IAAK,EAAG64C,IAE5Cl7C,KAAKw/B,WAAW74B,MACfmsB,QAASA,EACTrtB,KAAMA,EACNy1C,SAAUA,EACV1qB,EAAG,EAAGpN,EAAG,EAAGkP,EAAG,EACfgK,MAAO,EACPC,SAAU,EACVF,QAASA,EACT7zB,MAAOA,EACPm3B,SAAUA,KAUZL,iBAAkB,WAEjB,IAAIjiC,EACAghC,EADGwiF,EAAK7gH,KAAKw/B,WAAW7hC,OAExB8uH,EAAiC,GAAxBzsH,KAAKo/B,eAAe5O,EAC7Bk8F,EAAiC,GAAxB1sH,KAAKo/B,eAAehc,EAEjC,IAAM/lB,EAAI,EAAGA,EAAIwjH,EAAIxjH,KAEpBghC,EAAQr+B,KAAKw/B,WAAYniC,IAEnBmzB,EAAIxwB,KAAKo/B,eAAe5O,EAAIi8F,EAAOpuF,EAAM6c,SAC/C7c,EAAMjb,EAAIpjB,KAAKo/B,eAAehc,EAAIspG,EAAOruF,EAAM6c,SAE/C7c,EAAMsuF,eAAiBtuF,EAAM7N,EAAI9tB,KAAK8xE,GAAK,IAC3Cn2C,EAAM9B,UAAwD,KAA1C8B,EAAMsuF,eAAiBtuF,EAAM9B,aAuCpDyzC,GAAe7xE,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,WACnD6xE,GAAe7xE,UAAUsJ,YAAcuoE,GACvCA,GAAe7xE,UAAUyuH,kBAAmB,EAE5C58C,GAAe7xE,UAAUsG,KAAO,SAAWugB,GAS1C,OAPA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OACxBxI,KAAKqc,IAAM2I,EAAO3I,IAElBrc,KAAKu8B,SAAWvX,EAAOuX,SAEhBv8B,MAmBRiwE,GAAO9xE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAEzDsJ,YAAawoE,GAEbjT,UAAU,EAEV6vB,QAAW,WAEV,IAAIggC,EAAiB,IAAIn5F,EACrBo5F,EAAgB,IAAIp5F,EACpBq5F,EAAa,IAAIr5F,EAErB,OAAO,SAAkBg5D,EAAWC,GAEnCmgC,EAAc7/E,sBAAuBjtC,KAAKs+B,aAC1CouD,EAAUL,IAAI66B,oBAAqB4F,EAAeD,GAElDE,EAAW5vB,mBAAoBn9F,KAAKs+B,aACpC,IAAI0uF,EAAcD,EAAWv8F,EAAIu8F,EAAW3pG,EAAI,EAEhD,KAAK0pG,EAAc92B,kBAAmB62B,GAAmBG,GAAzD,CAEA,IAAI9xE,EAAWwxC,EAAUL,IAAIp1C,OAAO8+C,WAAY82B,GAE3C3xE,EAAWwxC,EAAUhrD,MAAQwZ,EAAWwxC,EAAU/qD,KAEvDgrD,EAAWhmF,MAEVu0C,SAAUA,EACVyK,MAAOknE,EAAej9G,QACtB49B,KAAM,KACNlG,OAAQtnC,SAzBF,GAiCT4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKgiC,UAAWv9B,KAAMzE,SA2BrDkwE,GAAI/xE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAEtDsJ,YAAayoE,GAEbzrE,KAAM,SAAWugB,GAEhB+qB,GAAS5xC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAAQ,GAI5C,IAAM,IAFFmrD,EAASnrD,EAAOmrD,OAEV/yE,EAAI,EAAGI,EAAI2yE,EAAOxyE,OAAQP,EAAII,EAAGJ,IAAO,CAEjD,IAAI6vH,EAAQ98C,EAAQ/yE,GAEpB4C,KAAKktH,SAAUD,EAAM3lF,OAAO13B,QAASq9G,EAAM/xE,UAI5C,OAAOl7C,MAIRktH,SAAU,SAAW5lF,EAAQ4T,QAEVnsC,IAAbmsC,IAAyBA,EAAW,GAEzCA,EAAWx4C,KAAKoI,IAAKowC,GAIrB,IAAM,IAFFi1B,EAASnwE,KAAKmwE,OAER3yE,EAAI,EAAGA,EAAI2yE,EAAOxyE,UAEtBu9C,EAAWi1B,EAAQ3yE,GAAI09C,UAFO19C,KAUpC2yE,EAAOhpE,OAAQ3J,EAAG,GAAK09C,SAAUA,EAAU5T,OAAQA,IAEnDtnC,KAAKyqB,IAAK6c,IAIX6lF,qBAAsB,SAAWjyE,GAIhC,IAAM,IAFFi1B,EAASnwE,KAAKmwE,OAER/yE,EAAI,EAAGI,EAAI2yE,EAAOxyE,OAAQP,EAAII,KAElC09C,EAAWi1B,EAAQ/yE,GAAI89C,UAFc99C,KAU3C,OAAO+yE,EAAQ/yE,EAAI,GAAIkqC,QAIxBulD,QAAW,WAEV,IAAIugC,EAAiB,IAAI15F,EAEzB,OAAO,SAAkBg5D,EAAWC,GAEnCygC,EAAengF,sBAAuBjtC,KAAKs+B,aAE3C,IAAI4c,EAAWwxC,EAAUL,IAAIp1C,OAAO8+C,WAAYq3B,GAEhDptH,KAAKmtH,qBAAsBjyE,GAAW2xC,QAASH,EAAWC,IAVnD,GAgBT3iD,OAAQ,WAEP,IAAIs4C,EAAK,IAAI5uD,EACT0vD,EAAK,IAAI1vD,EAEb,OAAO,SAAiB2J,GAEvB,IAAI8yC,EAASnwE,KAAKmwE,OAElB,GAAKA,EAAOxyE,OAAS,EAAI,CAExB2kF,EAAGr1C,sBAAuB5P,EAAOiB,aACjC8kD,EAAGn2C,sBAAuBjtC,KAAKs+B,aAE/B,IAAI4c,EAAWonC,EAAGyT,WAAY3S,GAE9BjT,EAAQ,GAAI7oC,OAAOrF,SAAU,EAE7B,IAAM,IAAI7kC,EAAI,EAAGI,EAAI2yE,EAAOxyE,OAAQP,EAAII,GAElC09C,GAAYi1B,EAAQ/yE,GAAI89C,SAFa99C,IAIzC+yE,EAAQ/yE,EAAI,GAAIkqC,OAAOrF,SAAU,EACjCkuC,EAAQ/yE,GAAIkqC,OAAOrF,SAAU,EAU/B,KAAQ7kC,EAAII,EAAGJ,IAEd+yE,EAAQ/yE,GAAIkqC,OAAOrF,SAAU,IAnCzB,GA6CRvf,OAAQ,SAAW6zE,GAElB,IAAI/1F,EAAOuvC,GAAS5xC,UAAUukB,OAAOhlB,KAAMsC,KAAMu2F,GAEjD/1F,EAAK8mC,OAAO6oC,UAIZ,IAAM,IAFFA,EAASnwE,KAAKmwE,OAER/yE,EAAI,EAAGI,EAAI2yE,EAAOxyE,OAAQP,EAAII,EAAGJ,IAAO,CAEjD,IAAI6vH,EAAQ98C,EAAQ/yE,GAEpBoD,EAAK8mC,OAAO6oC,OAAOxpE,MAClB2gC,OAAQ2lF,EAAM3lF,OAAOpW,KACrBgqB,SAAU+xE,EAAM/xE,WAKlB,OAAO16C,KAoDTtC,OAAO20F,OAAQziB,GAASjyE,WAEvBmyE,kBAAmB,WAElBtwE,KAAKqwE,gBAEL,IAAM,IAAIjzE,EAAI,EAAGivC,EAAKrsC,KAAKujD,MAAM5lD,OAAQP,EAAIivC,EAAIjvC,IAAO,CAEvD,IAAIk9F,EAAU,IAAI3mE,EAEb3zB,KAAKujD,MAAOnmD,IAEhBk9F,EAAQ5hD,WAAY14C,KAAKujD,MAAOnmD,GAAIkhC,aAIrCt+B,KAAKqwE,aAAa1pE,KAAM2zF,KAM1B3iC,KAAM,WAEL,IAAIi3B,EAAMxxF,EAAGivC,EAIb,IAAMjvC,EAAI,EAAGivC,EAAKrsC,KAAKujD,MAAM5lD,OAAQP,EAAIivC,EAAIjvC,KAE5CwxF,EAAO5uF,KAAKujD,MAAOnmD,KAIlBwxF,EAAKtwD,YAAYoa,WAAY14C,KAAKqwE,aAAcjzE,IAQlD,IAAMA,EAAI,EAAGivC,EAAKrsC,KAAKujD,MAAM5lD,OAAQP,EAAIivC,EAAIjvC,KAE5CwxF,EAAO5uF,KAAKujD,MAAOnmD,MAIbwxF,EAAK3+C,QAAU2+C,EAAK3+C,OAAOu+C,QAE/BI,EAAK5hD,OAAO0L,WAAYk2C,EAAK3+C,OAAO3R,aACpCswD,EAAK5hD,OAAOK,SAAUuhD,EAAKtwD,cAI3BswD,EAAK5hD,OAAOvoC,KAAMmqF,EAAKtwD,aAIxBswD,EAAK5hD,OAAO7K,UAAWysD,EAAKj4E,SAAUi4E,EAAKz+C,WAAYy+C,EAAKtyD,SAQ/D0N,OAAQ,WAEP,IAAIqjF,EAAe,IAAI15F,EACnB25F,EAAiB,IAAI35F,EAEzB,OAAO,WASN,IAAM,IAPF4vB,EAAQvjD,KAAKujD,MACb8sB,EAAerwE,KAAKqwE,aACpBzP,EAAe5gE,KAAK4gE,aACpBH,EAAczgE,KAAKygE,YAIbrjE,EAAI,EAAGivC,EAAKkX,EAAM5lD,OAAQP,EAAIivC,EAAIjvC,IAAO,CAIlD,IAAI4vC,EAASuW,EAAOnmD,GAAMmmD,EAAOnmD,GAAIkhC,YAAcgvF,EAEnDD,EAAavrF,iBAAkBkL,EAAQqjC,EAAcjzE,IACrDiwH,EAAarhG,QAAS40C,EAAkB,GAAJxjE,QAIhB2R,IAAhB0xD,IAEJA,EAAYz/B,aAAc,IA3BrB,GAmCRpxB,MAAO,WAEN,OAAO,IAAIwgE,GAAUpwE,KAAKujD,MAAOvjD,KAAKqwE,iBAoBxCE,GAAKpyE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAEvDsJ,YAAa8oE,GAEbie,QAAQ,IA6BThe,GAAYryE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQ2/B,GAAKl5C,YAE1DsJ,YAAa+oE,GAEbpoC,eAAe,EAEfwoC,UAAW,WAEV,IAAgBge,EAAM2+B,EAClBnwH,EAAGivC,EADHkX,KAGJ,GAAKvjD,KAAKynC,eAAoC14B,IAAxB/O,KAAKynC,SAAS8b,MAAsB,CAIzD,IAAMnmD,EAAI,EAAGivC,EAAKrsC,KAAKynC,SAAS8b,MAAM5lD,OAAQP,EAAIivC,EAAIjvC,IAErDmwH,EAAQvtH,KAAKynC,SAAS8b,MAAOnmD,GAI7BwxF,EAAO,IAAIre,GACXhtB,EAAM58C,KAAMioF,GAIZA,EAAKziF,KAAOohH,EAAMphH,KAClByiF,EAAKj4E,SAASihD,UAAW21D,EAAMC,KAC/B5+B,EAAKz+C,WAAWynB,UAAW21D,EAAME,WACd1+G,IAAdw+G,EAAMG,KAAoB9+B,EAAKtyD,MAAMs7B,UAAW21D,EAAMG,KAM5D,IAAMtwH,EAAI,EAAGivC,EAAKrsC,KAAKynC,SAAS8b,MAAM5lD,OAAQP,EAAIivC,EAAIjvC,KAI3B,KAF1BmwH,EAAQvtH,KAAKynC,SAAS8b,MAAOnmD,IAEhB6yC,QAAuC,OAAjBs9E,EAAMt9E,aAAiDlhC,IAA1Bw0C,EAAOgqE,EAAMt9E,QAI5EsT,EAAOgqE,EAAMt9E,QAASxlB,IAAK84B,EAAOnmD,IAMlC4C,KAAKyqB,IAAK84B,EAAOnmD,IAapB,OAFA4C,KAAKotC,mBAAmB,GAEjBmW,GAIR53C,KAAM,SAAW63C,EAAUktB,GAE1B1wE,KAAKwjD,SAAWA,OAEIz0C,IAAf2hE,IAEJ1wE,KAAKotC,mBAAmB,GAExBptC,KAAKwjD,SAAS8sB,oBAEdI,EAAa1wE,KAAKs+B,aAInBt+B,KAAK0wE,WAAWjsE,KAAMisE,GACtB1wE,KAAK2wE,kBAAkBj4B,WAAYg4B,IAIpC/Y,KAAM,WAEL33D,KAAKwjD,SAASmU,QAIfkZ,qBAAsB,WAErB,IAAIv0C,EAAOl/B,EAEX,GAAK4C,KAAKynC,UAAYznC,KAAKynC,SAASU,WAEnC,IAAM/qC,EAAI,EAAGA,EAAI4C,KAAKynC,SAASsK,YAAYp0C,OAAQP,IAAO,CAEzD,IAAIuwH,EAAK3tH,KAAKynC,SAASsK,YAAa30C,IAEpCk/B,EAAQ,EAAMqxF,EAAG73B,qBAEF3tE,EAAAA,EAEdwlG,EAAG7yD,eAAgBx+B,GAInBqxF,EAAGjpH,IAAK,EAAG,EAAG,EAAG,QAMb,GAAK1E,KAAKynC,UAAYznC,KAAKynC,SAASQ,iBAAmB,CAE7D,IAAI2lF,EAAM,IAAIv7F,EAEVw7F,EAAa7tH,KAAKynC,SAAS3L,WAAW+xF,WAE1C,IAAMzwH,EAAI,EAAGA,EAAIywH,EAAWhtH,MAAOzD,IAElCwwH,EAAIp9F,EAAIq9F,EAAW17C,KAAM/0E,GACzBwwH,EAAIxqG,EAAIyqG,EAAWx3B,KAAMj5F,GACzBwwH,EAAIt7F,EAAIu7F,EAAWz1B,KAAMh7F,GACzBwwH,EAAIr7F,EAAIs7F,EAAWx1B,KAAMj7F,IAEzBk/B,EAAQ,EAAMsxF,EAAI93B,qBAEH3tE,EAAAA,EAEdylG,EAAI9yD,eAAgBx+B,GAIpBsxF,EAAIlpH,IAAK,EAAG,EAAG,EAAG,GAInBmpH,EAAWzI,QAAShoH,EAAGwwH,EAAIp9F,EAAGo9F,EAAIxqG,EAAGwqG,EAAIt7F,EAAGs7F,EAAIr7F,KAQnD6a,kBAAmB,SAAWuxE,GAE7BtnE,GAAKl5C,UAAUivC,kBAAkB1vC,KAAMsC,KAAM2+G,GAEtB,aAAlB3+G,KAAKywE,SAETzwE,KAAK2wE,kBAAkBj4B,WAAY14C,KAAKs+B,aAEX,aAAlBt+B,KAAKywE,SAEhBzwE,KAAK2wE,kBAAkBj4B,WAAY14C,KAAK0wE,YAIxCjyE,QAAQ4pC,KAAM,6CAA+CroC,KAAKywE,WAMpE7gE,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKynC,SAAUznC,KAAKgiC,UAAWv9B,KAAMzE,SAsCpEwkD,GAAkBrmD,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,WACtDqmD,GAAkBrmD,UAAUsJ,YAAc+8C,GAE1CA,GAAkBrmD,UAAUkjE,qBAAsB,EAElD7c,GAAkBrmD,UAAUsG,KAAO,SAAWugB,GAU7C,OARA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OAExBxI,KAAKykC,UAAYzf,EAAOyf,UACxBzkC,KAAK8wE,QAAU9rD,EAAO8rD,QACtB9wE,KAAK+wE,SAAW/rD,EAAO+rD,SAEhB/wE,MA0BRgxE,GAAK7yE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAEvDsJ,YAAaupE,GAEbtnC,QAAQ,EAERmjD,QAAW,WAEV,IAAIg/B,EAAgB,IAAIl4F,EACpB04D,EAAM,IAAIr1C,GACVuiE,EAAS,IAAItzE,GAEjB,OAAO,SAAkBymD,EAAWC,GAEnC,IAAI3oD,EAAY0oD,EAAUohC,cACtBC,EAAc/pF,EAAYA,EAE1ByD,EAAWznC,KAAKynC,SAChBnJ,EAAct+B,KAAKs+B,YASvB,GALiC,OAA5BmJ,EAAS0K,gBAA0B1K,EAAS20E,wBAEjD7C,EAAO90G,KAAMgjC,EAAS0K,gBACtBonE,EAAOh7E,aAAcD,IAE6B,IAA7CouD,EAAUL,IAAIgtB,iBAAkBE,GAArC,CAIAsS,EAAcnzE,WAAYpa,GAC1B+tD,EAAI5nF,KAAMioF,EAAUL,KAAM9tD,aAAcstF,GAExC,IAAImC,EAAS,IAAIt6F,EACbu6F,EAAO,IAAIv6F,EACXw6F,EAAe,IAAIx6F,EACnBy6F,EAAW,IAAIz6F,EACf47D,EAAQtvF,MAAQA,KAAKiuE,eAAkB,EAAI,EAE/C,GAAKxmC,EAASQ,iBAAmB,CAEhC,IAAIx/B,EAAQg/B,EAASh/B,MAEjB0lF,EADa1mD,EAAS3L,WACCnlB,SAAS8J,MAEpC,GAAe,OAAVhY,EAIJ,IAAM,IAFFgrC,EAAUhrC,EAAMgY,MAEVrjB,EAAI,EAAGI,EAAIi2C,EAAQ91C,OAAS,EAAGP,EAAII,EAAGJ,GAAKkyF,EAAO,CAE3D,IAAIpyF,EAAIu2C,EAASr2C,GACboK,EAAIisC,EAASr2C,EAAI,GAErB4wH,EAAOp2D,UAAWu2B,EAAe,EAAJjxF,GAC7B+wH,EAAKr2D,UAAWu2B,EAAe,EAAJ3mF,IAEvB4mH,EAAS/hC,EAAIg7B,oBAAqB2G,EAAQC,EAAME,EAAUD,IAEhDH,IAEdI,EAAS5vF,aAAcv+B,KAAKs+B,cAExB4c,EAAWwxC,EAAUL,IAAIp1C,OAAO8+C,WAAYo4B,IAEhCzhC,EAAUhrD,MAAQwZ,EAAWwxC,EAAU/qD,KAEvDgrD,EAAWhmF,MAEVu0C,SAAUA,EAGVyK,MAAOuoE,EAAat+G,QAAQ2uB,aAAcv+B,KAAKs+B,aAC/C71B,MAAOrL,EACPowC,KAAM,KACNo+E,UAAW,KACXtkF,OAAQtnC,aAQV,IAAM,IAAI5C,EAAI,EAAGI,EAAI2wF,EAAUxwF,OAAS,EAAI,EAAGP,EAAII,EAAGJ,GAAKkyF,EAE1D0+B,EAAOp2D,UAAWu2B,EAAW,EAAI/wF,GACjC6wH,EAAKr2D,UAAWu2B,EAAW,EAAI/wF,EAAI,IAE/BgxH,EAAS/hC,EAAIg7B,oBAAqB2G,EAAQC,EAAME,EAAUD,IAEhDH,IAEdI,EAAS5vF,aAAcv+B,KAAKs+B,cAExB4c,EAAWwxC,EAAUL,IAAIp1C,OAAO8+C,WAAYo4B,IAEhCzhC,EAAUhrD,MAAQwZ,EAAWwxC,EAAU/qD,KAEvDgrD,EAAWhmF,MAEVu0C,SAAUA,EAGVyK,MAAOuoE,EAAat+G,QAAQ2uB,aAAcv+B,KAAKs+B,aAC/C71B,MAAOrL,EACPowC,KAAM,KACNo+E,UAAW,KACXtkF,OAAQtnC,aAQL,GAAKynC,EAASU,WAKpB,IAAM,IAHFrO,EAAW2N,EAAS3N,SACpBu0F,EAAav0F,EAASn8B,OAEhBP,EAAI,EAAGA,EAAIixH,EAAa,EAAGjxH,GAAKkyF,EAAO,CAEhD,IAAI8+B,EAAS/hC,EAAIg7B,oBAAqBvtF,EAAU18B,GAAK08B,EAAU18B,EAAI,GAAK+wH,EAAUD,GAElF,KAAKE,EAASL,GAAd,CAEAI,EAAS5vF,aAAcv+B,KAAKs+B,aAE5B,IAAI4c,EAAWwxC,EAAUL,IAAIp1C,OAAO8+C,WAAYo4B,GAE3CjzE,EAAWwxC,EAAUhrD,MAAQwZ,EAAWwxC,EAAU/qD,KAEvDgrD,EAAWhmF,MAEVu0C,SAAUA,EAGVyK,MAAOuoE,EAAat+G,QAAQ2uB,aAAcv+B,KAAKs+B,aAC/C71B,MAAOrL,EACPowC,KAAM,KACNo+E,UAAW,KACXtkF,OAAQtnC,WAzIJ,GAqJT4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKynC,SAAUznC,KAAKgiC,UAAWv9B,KAAMzE,SAkBpEixE,GAAa9yE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQs5D,GAAK7yE,YAE3DsJ,YAAawpE,GAEbhD,gBAAgB,IAgBjBiD,GAAS/yE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQs5D,GAAK7yE,YAEvDsJ,YAAaypE,GAEbhD,YAAY,IAqCbxpB,GAAevmD,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,WACnDumD,GAAevmD,UAAUsJ,YAAci9C,GAEvCA,GAAevmD,UAAUsjE,kBAAmB,EAE5C/c,GAAevmD,UAAUsG,KAAO,SAAWugB,GAW1C,OATA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OAExBxI,KAAKqc,IAAM2I,EAAO3I,IAElBrc,KAAKyF,KAAOuf,EAAOvf,KACnBzF,KAAKohD,gBAAkBp8B,EAAOo8B,gBAEvBphD,MAmBRmxE,GAAOhzE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAEzDsJ,YAAa0pE,GAEbxnC,UAAU,EAEVkjD,QAAW,WAEV,IAAIg/B,EAAgB,IAAIl4F,EACpB04D,EAAM,IAAIr1C,GACVuiE,EAAS,IAAItzE,GAEjB,OAAO,SAAkBymD,EAAWC,GA0BnC,SAAS2hC,EAAW3oE,EAAOl9C,GAE1B,IAAI8lH,EAAqBliC,EAAI+6B,kBAAmBzhE,GAEhD,GAAK4oE,EAAqBC,EAAmB,CAE5C,IAAI3B,EAAiBxgC,EAAI66B,oBAAqBvhE,GAC9CknE,EAAetuF,aAAcD,GAE7B,IAAI4c,EAAWwxC,EAAUL,IAAIp1C,OAAO8+C,WAAY82B,GAEhD,GAAK3xE,EAAWwxC,EAAUhrD,MAAQwZ,EAAWwxC,EAAU/qD,IAAM,OAE7DgrD,EAAWhmF,MAEVu0C,SAAUA,EACVuzE,cAAe/rH,KAAKg+D,KAAM6tD,GAC1B5oE,MAAOknE,EAAej9G,QACtBnH,MAAOA,EACP+kC,KAAM,KACNlG,OAAQA,KA5CX,IAAIA,EAAStnC,KACTynC,EAAWznC,KAAKynC,SAChBnJ,EAAct+B,KAAKs+B,YACnB9vB,EAAYk+E,EAAUJ,OAAOnb,OAAO3iE,UAUxC,GANiC,OAA5Bi5B,EAAS0K,gBAA0B1K,EAAS20E,wBAEjD7C,EAAO90G,KAAMgjC,EAAS0K,gBACtBonE,EAAOh7E,aAAcD,GACrBi7E,EAAOpzE,QAAU33B,GAEiC,IAA7Ck+E,EAAUL,IAAIgtB,iBAAkBE,GAArC,CAIAsS,EAAcnzE,WAAYpa,GAC1B+tD,EAAI5nF,KAAMioF,EAAUL,KAAM9tD,aAAcstF,GAExC,IAAI6C,EAAiBlgH,IAAgBxO,KAAKs8B,MAAM9L,EAAIxwB,KAAKs8B,MAAMlZ,EAAIpjB,KAAKs8B,MAAMhK,GAAM,GAChFk8F,EAAmBE,EAAiBA,EACpC/3G,EAAW,IAAI+c,EA8BnB,GAAK+T,EAASQ,iBAAmB,CAEhC,IAAIx/B,EAAQg/B,EAASh/B,MAEjB0lF,EADa1mD,EAAS3L,WACCnlB,SAAS8J,MAEpC,GAAe,OAAVhY,EAIJ,IAAM,IAFFgrC,EAAUhrC,EAAMgY,MAEVrjB,EAAI,EAAGivC,EAAKoH,EAAQ91C,OAAQP,EAAIivC,EAAIjvC,IAAO,CAEpD,IAAIF,EAAIu2C,EAASr2C,GAEjBuZ,EAASihD,UAAWu2B,EAAe,EAAJjxF,GAE/BoxH,EAAW33G,EAAUzZ,QAMtB,IAAM,IAAIE,EAAI,EAAGI,EAAI2wF,EAAUxwF,OAAS,EAAGP,EAAII,EAAGJ,IAEjDuZ,EAASihD,UAAWu2B,EAAe,EAAJ/wF,GAE/BkxH,EAAW33G,EAAUvZ,QAUvB,IAAM,IAFF08B,EAAW2N,EAAS3N,SAEd18B,EAAI,EAAGI,EAAIs8B,EAASn8B,OAAQP,EAAII,EAAGJ,IAE5CkxH,EAAWx0F,EAAU18B,GAAKA,KAlGrB,GA4GTwS,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,YAAazH,KAAKynC,SAAUznC,KAAKgiC,UAAWv9B,KAAMzE,SAkBpEoxE,GAAMjzE,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAExDsJ,YAAa2pE,MAgCdC,GAAalzE,UAAYD,OAAOwZ,OAAQ+Y,EAAQtyB,YACzBsJ,YAAc4pE,IAyBrCG,GAAkBrzE,UAAYD,OAAOwZ,OAAQ+Y,EAAQtyB,YACzBsJ,YAAc+pE,GAE1CA,GAAkBrzE,UAAUosD,qBAAsB,GAclDknB,GAActzE,UAAYD,OAAOwZ,OAAQ+Y,EAAQtyB,YACzBsJ,YAAcgqE,IAgCtCC,GAAavzE,UAAYD,OAAOwZ,OAAQ+Y,EAAQtyB,YACzBsJ,YAAciqE,GACrCA,GAAavzE,UAAUurD,gBAAiB,EA4KxCioB,GAAkBxzE,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,WAC5DwzE,GAAkBxzE,UAAUsJ,YAAckqE,IA6B1CU,GAAmBl0E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAc4qE,IAuH3CI,GAAyBt0E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,YAChCsJ,YAAcgrE,IA6BjDM,GAAmB50E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcsrE,GA8S3CE,GAAyB90E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,WACnE80E,GAAyB90E,UAAUsJ,YAAcwrE,IAyBjD+B,GAAoB72E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcutE,IAyB5CC,GAA0B92E,UAAYD,OAAOwZ,OAAQu7D,GAAyB90E,YAC1CsJ,YAAcwtE,IAyBlDC,GAAmB/2E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcytE,GAyB3CC,GAAyBh3E,UAAYD,OAAOwZ,OAAQu7D,GAAyB90E,WAC7Eg3E,GAAyBh3E,UAAUsJ,YAAc0tE,IAyBjDC,GAAoBj3E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAc2tE,IAgC5CC,GAA0Bl3E,UAAYD,OAAOwZ,OAAQu7D,GAAyB90E,YAC1CsJ,YAAc4tE,IAyBlDC,GAAqBn3E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAc6tE,IAwD7CC,GAA2Bp3E,UAAYD,OAAOwZ,OAAQu7D,GAAyB90E,YAC1CsJ,YAAc8tE,IA6CnDC,GAAar3E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAc+tE,IAuKrCM,GAAmB33E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,YAChCsJ,YAAcquE,IAiC3Ca,GAAkBx4E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAckvE,IAwJ1CI,GAAwB54E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,YAChCsJ,YAAcsvE,IA6BhDY,GAAcx5E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAckwE,IAwGtCE,GAAoB15E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,YAChCsJ,YAAcowE,GAM5C,IAAIqD,IAIHzkE,KAAM,SAAWk4G,GAKhB,IAAM,IAHF9xH,EAAI8xH,EAAQhxH,OACZT,EAAI,EAEEgH,EAAIrH,EAAI,EAAGg6E,EAAI,EAAGA,EAAIh6E,EAAGqH,EAAI2yE,IAEtC35E,GAAKyxH,EAASzqH,GAAIssB,EAAIm+F,EAAS93C,GAAIzzD,EAAIurG,EAAS93C,GAAIrmD,EAAIm+F,EAASzqH,GAAIkf,EAItE,MAAW,GAAJlmB,GAIR0xH,YAAa,WAgBZ,SAASC,EAAMF,EAAS1xH,EAAGmN,EAAGmoB,EAAG11B,EAAGiyH,GAEnC,IAAI5qH,EACAk4F,EAAIC,EAAIE,EAAIC,EACZ/kB,EAAIC,EAAIq3C,EAAIC,EAWhB,GATA5yB,EAAKuyB,EAASG,EAAO7xH,IAAMuzB,EAC3B6rE,EAAKsyB,EAASG,EAAO7xH,IAAMmmB,EAE3Bm5E,EAAKoyB,EAASG,EAAO1kH,IAAMomB,EAC3BgsE,EAAKmyB,EAASG,EAAO1kH,IAAMgZ,EAE3Bq0D,EAAKk3C,EAASG,EAAOv8F,IAAM/B,EAC3BknD,EAAKi3C,EAASG,EAAOv8F,IAAMnP,GAEpBm5E,EAAKH,IAAS1kB,EAAK2kB,IAASG,EAAKH,IAAS5kB,EAAK2kB,IAAQ,EAAI,OAAO,EAEzE,IAAI3Y,EAAIC,EAAIurC,EAAIC,EAAIC,EAAIC,EACpBC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EACzBC,EAAUC,EAAUC,EAMxB,IAJApsC,EAAKhM,EAAK8kB,EAAK7Y,EAAKhM,EAAK8kB,EACzByyB,EAAK7yB,EAAK3kB,EAAKy3C,EAAK7yB,EAAK3kB,EACzBy3C,EAAK5yB,EAAKH,EAAKgzB,EAAK5yB,EAAKH,EAEnBn4F,EAAI,EAAGA,EAAIrH,EAAGqH,IAKnB,GAHA6qH,EAAKJ,EAASG,EAAO5qH,IAAMssB,EAC3Bw+F,EAAKL,EAASG,EAAO5qH,IAAMkf,IAElB2rG,IAAO3yB,GAAU4yB,IAAO3yB,GAC3B0yB,IAAOxyB,GAAUyyB,IAAOxyB,GACxBuyB,IAAOt3C,GAAUu3C,IAAOt3C,KAE9B23C,EAAMN,EAAK3yB,EAAKkzB,EAAMN,EAAK3yB,EAC3BkzB,EAAMR,EAAKxyB,EAAKizB,EAAMR,EAAKxyB,EAC3BizB,EAAMV,EAAKt3C,EAAKi4C,EAAMV,EAAKt3C,EAI3Bm4C,EAAWpsC,EAAK+rC,EAAM9rC,EAAK6rC,EAC3BI,EAAWR,EAAKG,EAAMF,EAAKC,EAC3BO,EAAWX,EAAKS,EAAMR,EAAKO,EAEpBI,IAAch2G,OAAO64E,SAAek9B,IAAc/1G,OAAO64E,SAAei9B,IAAc91G,OAAO64E,SAAY,OAAO,EAIxH,OAAO,EAMR,OAAO,SAAsBi8B,EAASl7E,GAErC,IAAI52C,EAAI8xH,EAAQhxH,OAEhB,GAAKd,EAAI,EAAI,OAAO,KAEpB,IAMII,EAAGmN,EAAGmoB,EANNrxB,KACH4tH,KACAgB,KAMD,GAAK50C,GAAWzkE,KAAMk4G,GAAY,EAEjC,IAAMvkH,EAAI,EAAGA,EAAIvN,EAAGuN,IAAO0kH,EAAO1kH,GAAMA,OAIxC,IAAMA,EAAI,EAAGA,EAAIvN,EAAGuN,IAAO0kH,EAAO1kH,GAAQvN,EAAI,EAAMuN,EAIrD,IAAI2lH,EAAKlzH,EAILgE,EAAQ,EAAIkvH,EAEhB,IAAM3lH,EAAI2lH,EAAK,EAAGA,EAAK,GAAK,CAI3B,GAAOlvH,KAAc,EASpB,OAFApC,QAAQ4pC,KAAM,qEAEToL,EAAiBq8E,EACf5uH,EAUR,GAJAjE,EAAImN,EAAW2lH,GAAM9yH,IAAIA,EAAI,GAC7BmN,EAAInN,EAAI,EAAS8yH,GAAM3lH,IAAIA,EAAI,GAC/BmoB,EAAInoB,EAAI,EAAS2lH,GAAMx9F,IAAIA,EAAI,GAE1Bs8F,EAAMF,EAAS1xH,EAAGmN,EAAGmoB,EAAGw9F,EAAIjB,GAAU,CAE1C,IAAI5xH,EAAGsK,EAAGe,EAAGxL,EAAGH,EAmBhB,IAfAM,EAAI4xH,EAAO7xH,GACXuK,EAAIsnH,EAAO1kH,GACX7B,EAAIumH,EAAOv8F,GAIXrxB,EAAOyF,MAAQgoH,EAASzxH,GACvByxH,EAASnnH,GACTmnH,EAASpmH,KAGVunH,EAAYnpH,MAAQmoH,EAAO7xH,GAAK6xH,EAAO1kH,GAAK0kH,EAAOv8F,KAI7Cx1B,EAAIqN,EAAGxN,EAAIwN,EAAI,EAAGxN,EAAImzH,EAAIhzH,IAAMH,IAErCkyH,EAAO/xH,GAAM+xH,EAAOlyH,GAQrBiE,EAAQ,IAJRkvH,GAUF,OAAKt8E,EAAiBq8E,EACf5uH,GAlKI,GAwKbm6E,iBAAkB,SAAWszC,EAAS1zC,GAErC,SAAS+0C,EAAgBtlD,GAExB,IAAIltE,EAAIktE,EAAO/sE,OAEVH,EAAI,GAAKktE,EAAQltE,EAAI,GAAI2yD,OAAQua,EAAQ,KAE7CA,EAAOh+C,MAST,SAASujG,EAA2BC,EAAUC,EAAUC,GAGvD,OAAKF,EAAS1/F,IAAM2/F,EAAS3/F,EAEvB0/F,EAAS1/F,EAAI2/F,EAAS3/F,EAEf0/F,EAAS1/F,GAAK4/F,EAAU5/F,GAAS4/F,EAAU5/F,GAAK2/F,EAAS3/F,EAIzD2/F,EAAS3/F,GAAK4/F,EAAU5/F,GAAS4/F,EAAU5/F,GAAK0/F,EAAS1/F,EAMhE0/F,EAAS9sG,EAAI+sG,EAAS/sG,EAEf8sG,EAAS9sG,GAAKgtG,EAAUhtG,GAASgtG,EAAUhtG,GAAK+sG,EAAS/sG,EAIzD+sG,EAAS/sG,GAAKgtG,EAAUhtG,GAASgtG,EAAUhtG,GAAK8sG,EAAS9sG,EAQvE,SAASitG,EAAuBC,EAAWC,EAAWC,EAAWC,EAAWC,GAE3E,IAAIC,EAASJ,EAAU//F,EAAI8/F,EAAU9/F,EAAKogG,EAASL,EAAUntG,EAAIktG,EAAUltG,EACvEytG,EAASJ,EAAUjgG,EAAIggG,EAAUhgG,EAAKsgG,EAASL,EAAUrtG,EAAIotG,EAAUptG,EAEvE2tG,EAAaT,EAAU9/F,EAAIggG,EAAUhgG,EACrCwgG,EAAaV,EAAUltG,EAAIotG,EAAUptG,EAErC6tG,EAASL,EAASC,EAASF,EAASG,EACpCI,EAAWN,EAASG,EAAaJ,EAASK,EAE9C,GAAKtuH,KAAKoI,IAAKmmH,GAAUp3G,OAAO64E,QAAU,CAIzC,IAAIy+B,EACJ,GAAKF,EAAQ,EAAI,CAEhB,GAAOC,EAAW,GAASA,EAAWD,EAAY,SAElD,IADAE,EAAWL,EAASC,EAAaF,EAASG,GACxB,GAASG,EAAWF,EAAY,aAE5C,CAEN,GAAOC,EAAW,GAASA,EAAWD,EAAY,SAElD,IADAE,EAAWL,EAASC,EAAaF,EAASG,GACxB,GAASG,EAAWF,EAAY,SAMnD,GAAkB,IAAbE,EAEJ,OAAK,GACc,IAAbD,GAAsBA,IAAaD,GAChCX,MAGV,GAAKa,IAAaF,EAEjB,OAAK,GACc,IAAbC,GAAsBA,IAAaD,GAChCV,MAIV,GAAkB,IAAbW,EAAkB,OAASV,GAChC,GAAKU,IAAaD,EAAQ,OAASR,GAGnC,IAAIW,EAAaD,EAAWF,EAC5B,QAAWzgG,EAAG8/F,EAAU9/F,EAAI4gG,EAAaT,EACtCvtG,EAAGktG,EAAUltG,EAAIguG,EAAaR,IAKjC,GAAoB,IAAbM,GACHJ,EAASC,GAAeF,EAASG,EAAkB,SAGvD,IAAIK,EAAwB,IAAXV,GAA+B,IAAXC,EACjCU,EAAwB,IAAXT,GAA+B,IAAXC,EAErC,GAAKO,GAAUC,EAEd,OAAOhB,EAAU9/F,IAAMggG,EAAUhgG,GAC7B8/F,EAAUltG,IAAMotG,EAAUptG,MACrBktG,GAIV,GAAKe,EAEJ,OAAOpB,EAA2BO,EAAWC,EAAWH,IAC/CA,MAIV,GAAKgB,EAEJ,OAAOrB,EAA2BK,EAAWC,EAAWC,IAC/CA,MAKV,IAAIe,EAASC,EAASC,EAAYC,EAC9BC,EAASC,EAASC,EAAYC,EAsDlC,OArDgB,IAAXnB,GAGCL,EAAU9/F,EAAI+/F,EAAU//F,GAE5B+gG,EAAUjB,EAAWmB,EAAanB,EAAU9/F,EAC5CghG,EAAUjB,EAAWmB,EAAanB,EAAU//F,IAI5C+gG,EAAUhB,EAAWkB,EAAalB,EAAU//F,EAC5CghG,EAAUlB,EAAWoB,EAAapB,EAAU9/F,GAGxCggG,EAAUhgG,EAAIigG,EAAUjgG,GAE5BmhG,EAAUnB,EAAWqB,EAAarB,EAAUhgG,EAC5CohG,EAAUnB,EAAWqB,EAAarB,EAAUjgG,IAI5CmhG,EAAUlB,EAAWoB,EAAapB,EAAUjgG,EAC5CohG,EAAUpB,EAAWsB,EAAatB,EAAUhgG,KAOxC8/F,EAAUltG,EAAImtG,EAAUntG,GAE5BmuG,EAAUjB,EAAWmB,EAAanB,EAAUltG,EAC5CouG,EAAUjB,EAAWmB,EAAanB,EAAUntG,IAI5CmuG,EAAUhB,EAAWkB,EAAalB,EAAUntG,EAC5CouG,EAAUlB,EAAWoB,EAAapB,EAAUltG,GAGxCotG,EAAUptG,EAAIqtG,EAAUrtG,GAE5BuuG,EAAUnB,EAAWqB,EAAarB,EAAUptG,EAC5CwuG,EAAUnB,EAAWqB,EAAarB,EAAUrtG,IAI5CuuG,EAAUlB,EAAWoB,EAAapB,EAAUrtG,EAC5CwuG,EAAUpB,EAAWsB,EAAatB,EAAUptG,IAKzCquG,GAAcI,EAEbH,EAAcG,KACdH,IAAeG,EAEdnB,MACIiB,GAGLD,GAAcI,GAAsBH,EAASH,IACzCG,EAASC,GAIbH,EAAcK,KACdL,IAAeK,EAEdpB,MACIa,GAGLG,GAAcI,GAAsBP,EAASC,IACzCD,EAASK,GAQrB,SAASG,EAAoBC,EAAUC,EAAaC,EAAW9B,GAK9D,IAAI+B,EAAaF,EAAYzhG,EAAIwhG,EAASxhG,EAAI4hG,EAAaH,EAAY7uG,EAAI4uG,EAAS5uG,EAChFivG,EAAWH,EAAU1hG,EAAIwhG,EAASxhG,EAAI8hG,EAAYJ,EAAU9uG,EAAI4uG,EAAS5uG,EACzEmvG,EAAWnC,EAAU5/F,EAAIwhG,EAASxhG,EAAIgiG,EAAYpC,EAAUhtG,EAAI4uG,EAAS5uG,EAGzEqvG,EAAeN,EAAaG,EAAWF,EAAaC,EACpDK,EAAkBP,EAAaK,EAAWJ,EAAaG,EAE3D,GAAK7vH,KAAKoI,IAAK2nH,GAAiB54G,OAAO64E,QAAU,CAIhD,IAAIigC,EAAiBJ,EAAWD,EAAWE,EAAWH,EAGtD,OAAKI,EAAe,EAGRC,GAAmB,GAASC,GAAiB,EAK7CD,GAAmB,GAASC,GAAiB,EAQzD,OAASD,EAAkB,EAnP7B1C,EAAiBrB,GACjB1zC,EAAMp8D,QAASmxG,GAuaf,IAAM,IARF5yH,EAAGivC,EAAIhvC,EAAGmwC,EACbvvC,EAAKwK,EACLmqH,KAIGC,EAAYlE,EAAQvoH,SAEdkd,EAAI,EAAGwvG,EAAK73C,EAAMt9E,OAAQ2lB,EAAIwvG,EAAIxvG,IAE3CjY,MAAMlN,UAAUwI,KAAKR,MAAO0sH,EAAW53C,EAAO33D,IAQ/C,IAAMlmB,EAAI,EAAGivC,EAAKwmF,EAAUl1H,OAAQP,EAAIivC,EAAIjvC,SAId2R,IAAxB6jH,EAFL30H,EAAM40H,EAAWz1H,GAAIozB,EAAI,IAAMqiG,EAAWz1H,GAAIgmB,IAI7C3kB,QAAQ4pC,KAAM,oCAAqCpqC,EAAKb,GAIzDw1H,EAAc30H,GAAQb,EAKvB,IAAI21H,EAvMJ,SAAsBpE,EAAS1zC,GA0F9B,IAAM,IAvFF+3C,EAiFAC,EAAWC,EACdC,EAASC,EACTC,EAASC,EACTC,EAAWC,EACXC,EAAUC,EAtFP/4C,EAAQg0C,EAAQvoH,SA2DhButH,KAyBcC,KAIRtwG,EAAI,EAAGwvG,EAAK73C,EAAMt9E,OAAQ2lB,EAAIwvG,EAAIxvG,IAE3CqwG,EAAWhtH,KAAM2c,GAMlB,IAFA,IAAIuwG,EAAgB,EAChBtzG,EAA8B,EAApBozG,EAAWh2H,OACjBg2H,EAAWh2H,OAAS,GAAI,CAG/B,KADA4iB,EACe,EAAI,CAElB9hB,QAAQC,IAAK,6BAA+Bi1H,EAAWh2H,OAAS,kCAChE,MAMD,IAAMu1H,EAAaW,EAAeX,EAAav4C,EAAMh9E,OAAQu1H,IAAgB,CAM5E,IAJAC,EAAUx4C,EAAOu4C,GACjBD,GAAc,EAGJ3vG,EAAI,EAAGA,EAAIqwG,EAAWh2H,OAAQ2lB,IAMvC,GAJA+vG,EAAUM,EAAYrwG,GAGtBgwG,EAASH,EAAQ3iG,EAAI,IAAM2iG,EAAQ/vG,EAAI,IAAMiwG,OACftkH,IAAzB6kH,EAAYN,GAAjB,CAEAN,EAAO/3C,EAAOo4C,GACd,IAAM,IAAIS,EAAK,EAAGA,EAAKd,EAAKr1H,OAAQm2H,IAGnC,GADAV,EAASJ,EAAMc,GA1HnB,SAAgCC,EAAYC,GAG3C,IAAIC,EAAet5C,EAAMh9E,OAAS,EAE9Bu2H,EAAeH,EAAa,EAC3BG,EAAe,IAAMA,EAAeD,GAEzC,IAAIE,EAAeJ,EAAa,EAC3BI,EAAeF,IAAeE,EAAe,GAElD,IAAIC,EAAcrC,EAAoBp3C,EAAOo5C,GAAcp5C,EAAOu5C,GAAgBv5C,EAAOw5C,GAAgBnB,EAAMgB,IAC/G,IAAOI,EAGN,OAAO,EAKR,IAAIC,EAAcrB,EAAKr1H,OAAS,EAE5B22H,EAAcN,EAAY,EACzBM,EAAc,IAAMA,EAAcD,GAEvC,IAAIE,EAAcP,EAAY,EAI9B,OAHKO,EAAcF,IAAcE,EAAc,MAE/CH,EAAcrC,EAAoBiB,EAAMgB,GAAahB,EAAMsB,GAAetB,EAAMuB,GAAe55C,EAAOo5C,KA+F5FS,CAAuBtB,EAAYY,KAnF9C,SAA8BW,EAAWC,GAGxC,IAAIC,EAAMC,EACV,IAAMD,EAAO,EAAGA,EAAOh6C,EAAMh9E,OAAQg3H,IAIpC,GAFAC,EAAUD,EAAO,EAAGC,GAAWj6C,EAAMh9E,OACtB0yH,EAAuBoE,EAAWC,EAAU/5C,EAAOg6C,GAAQh6C,EAAOi6C,IAAW,GAC1Ej3H,OAAS,EAAK,OAAO,EAIxC,OAAO,EAwECk3H,CAAqB1B,EAASC,KAlEvC,SAA6BqB,EAAWC,GAGvC,IAAII,EAAOC,EACVC,EAAMJ,EACP,IAAME,EAAQ,EAAGA,EAAQnB,EAAWh2H,OAAQm3H,IAG3C,IADAC,EAAU95C,EAAO04C,EAAYmB,IACvBE,EAAO,EAAGA,EAAOD,EAAQp3H,OAAQq3H,IAItC,GAFAJ,EAAUI,EAAO,EAAGJ,GAAWG,EAAQp3H,OACxB0yH,EAAuBoE,EAAWC,EAAUK,EAASC,GAAQD,EAASH,IAAW,GAC9Ej3H,OAAS,EAAK,OAAO,EAKzC,OAAO,EAkDCs3H,CAAoB9B,EAASC,GAAlC,CAEAH,EAAYa,EACZH,EAAWxsH,OAAQmc,EAAG,GAEtBiwG,EAAY54C,EAAMj5E,MAAO,EAAGwxH,EAAa,GACzCM,EAAY74C,EAAMj5E,MAAOwxH,GACzBO,EAAWT,EAAKtxH,MAAOuxH,GACvBS,EAAWV,EAAKtxH,MAAO,EAAGuxH,EAAY,GAEtCt4C,EAAQ44C,EAAUntH,OAAQqtH,GAAWrtH,OAAQstH,GAAWttH,OAAQotH,GAEhEK,EAAgBX,EAKhB,MAGD,GAAKD,GAAa,EAAI,MAEtBW,EAAYN,IAAW,EAGxB,GAAKL,GAAa,EAAI,OAMxB,OAAOt4C,EAsCgBu6C,CAAavG,EAAS1zC,GAE1Ck6C,EAAYj6C,GAAW0zC,YAAamE,GAAmB,GAK3D,IAAM31H,EAAI,EAAGivC,EAAK8oF,EAAUx3H,OAAQP,EAAIivC,EAAIjvC,IAI3C,IAFAowC,EAAO2nF,EAAW/3H,GAEZC,EAAI,EAAGA,EAAI,EAAGA,SAMJ0R,KAFftG,EAAQmqH,EAFR30H,EAAMuvC,EAAMnwC,GAAImzB,EAAI,IAAMgd,EAAMnwC,GAAI+lB,MAMnCoqB,EAAMnwC,GAAMoL,GAQf,OAAO0sH,EAAU/uH,UAIlB+0E,YAAa,SAAWi6C,GAEvB,OAAOl6C,GAAWzkE,KAAM2+G,GAAQ,KAgDlCt9C,GAAgB35E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcqwE,GAgCxCE,GAAsB75E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,WAChE65E,GAAsB75E,UAAUsJ,YAAcuwE,GAE9CA,GAAsB75E,UAAUk3H,UAAY,WAE3C,IAAIC,EAAoBt1H,KAAKmvF,aAAc,YACvComC,EAAgBD,EAAoBjqH,MAAMlN,UAAUuD,MAAMhE,KAAM43H,EAAkB70G,UAElF+0G,EAAcx1H,KAAKmvF,aAAc,MACjCtiB,EAAU2oD,EAAcnqH,MAAMlN,UAAUuD,MAAMhE,KAAM83H,EAAY/0G,UAEhEg1G,EAAiBz1H,KAAKyI,MAG1B,OACCkO,SAAU4+G,EACVt5F,GAAI4wC,EACJpkE,MALkBgtH,EAAiBpqH,MAAMlN,UAAUuD,MAAMhE,KAAM+3H,EAAeh1G,YAUhFu3D,GAAsB75E,UAAU85E,aAAe,SAAWF,EAAQlzE,GAEjE,IAAI6wH,EAAK39C,EAAOp6E,OAChBkH,EAAQ8wH,OAAS31H,KAAKq1H,YAEtB,IAAM,IAAIt4H,EAAI,EAAGA,EAAI24H,EAAI34H,IAAO,CAE/B,IAAI49E,EAAQ5C,EAAQh7E,GACpBiD,KAAK06E,SAAUC,EAAO91E,GAIvB7E,KAAK21C,SAAU9wC,EAAQ8wH,OAAOltH,OAC9BzI,KAAK41C,aAAc,WAAY,IAAItC,GAAwBzuC,EAAQ8wH,OAAOh/G,SAAU,IACpF3W,KAAK41C,aAAc,KAAM,IAAItC,GAAwBzuC,EAAQ8wH,OAAO15F,GAAI,KAIzE+7C,GAAsB75E,UAAUu8E,SAAW,SAAWC,EAAO91E,GA4G5D,SAAS+wH,EAAUC,EAAIjI,EAAKnoH,GAI3B,OAFOmoH,GAAMnvH,QAAQqT,MAAO,6CAErB87G,EAAIh+G,QAAQkrD,eAAgBr1D,GAAOglB,IAAKorG,GAYhD,SAASC,EAAaC,EAAMC,EAAQC,GASnC,IAAIC,EAAWC,EAAWC,EAKtBC,EAAWN,EAAKvlG,EAAIwlG,EAAOxlG,EAC9B8lG,EAAWP,EAAK3yG,EAAI4yG,EAAO5yG,EACxBmzG,EAAWN,EAAOzlG,EAAIulG,EAAKvlG,EAC9BgmG,EAAWP,EAAO7yG,EAAI2yG,EAAK3yG,EAExBqzG,EAAiBJ,EAAWA,EAAWC,EAAWA,EAGlDI,EAAeL,EAAWG,EAAWF,EAAWC,EAEpD,GAAK7zH,KAAKoI,IAAK4rH,GAAe78G,OAAO64E,QAAU,CAM9C,IAAIikC,EAAaj0H,KAAKg+D,KAAM+1D,GACxBG,EAAal0H,KAAKg+D,KAAM61D,EAAWA,EAAWC,EAAWA,GAIzDK,EAAkBb,EAAOxlG,EAAI8lG,EAAWK,EACxCG,EAAkBd,EAAO5yG,EAAIizG,EAAWM,EAOxCI,IALkBd,EAAOzlG,EAAIgmG,EAAWI,EAKfC,GAAkBL,GAJzBP,EAAO7yG,EAAImzG,EAAWK,EAKxBE,GAAkBP,IACnCF,EAAWG,EAAWF,EAAWC,GAShCS,GALJd,EAAcW,EAAgBR,EAAWU,EAAKhB,EAAKvlG,GAKjB0lG,GAJlCC,EAAcW,EAAgBR,EAAWS,EAAKhB,EAAK3yG,GAIO+yG,EAC1D,GAAKa,GAAiB,EAErB,OAAO,IAAIzmG,EAAS2lG,EAAWC,GAI/BC,EAAY1zH,KAAKg+D,KAAMs2D,EAAgB,OAIlC,CAIN,IAAIC,GAAe,EACdZ,EAAWx8G,OAAO64E,QAEjB6jC,EAAW18G,OAAO64E,UAEtBukC,GAAe,GAMXZ,GAAax8G,OAAO64E,QAEnB6jC,GAAa18G,OAAO64E,UAExBukC,GAAe,GAMXv0H,KAAK85E,KAAM85C,KAAe5zH,KAAK85E,KAAMg6C,KAEzCS,GAAe,GAQbA,GAGJf,GAAcI,EACdH,EAAYE,EACZD,EAAY1zH,KAAKg+D,KAAM+1D,KAKvBP,EAAYG,EACZF,EAAYG,EACZF,EAAY1zH,KAAKg+D,KAAM+1D,EAAe,IAMxC,OAAO,IAAIlmG,EAAS2lG,EAAYE,EAAWD,EAAYC,GA0RxD,SAASc,EAAWvI,EAASwI,GAE5B,IAAIhtH,EAAG+/B,EAGP,IAFA9sC,EAAIuxH,EAAQhxH,SAEDP,GAAK,GAAI,CAEnB+M,EAAI/M,GACJ8sC,EAAI9sC,EAAI,GACC,IAAI8sC,EAAIykF,EAAQhxH,OAAS,GAIlC,IAAIZ,EAAI,EACP24H,EAAK0B,EAAwB,EAAhBC,EAEd,IAAMt6H,EAAI,EAAGA,EAAI24H,EAAI34H,IAAO,CAE3B,IAAIu6H,EAAQC,EAAOx6H,EACfy6H,EAAQD,GAASx6H,EAAI,GAOzB06H,EALQN,EAAchtH,EAAImtH,EACrBH,EAAcjtF,EAAIotF,EAClBH,EAAcjtF,EAAIstF,EAClBL,EAAchtH,EAAIqtH,EAEP7I,EAAS5xH,EAAG24H,EAAIvrH,EAAG+/B,KAQtC,SAAS9/B,EAAGomB,EAAGpN,EAAGkP,GAEjBtE,EAAYrnB,KAAM6pB,GAClBxC,EAAYrnB,KAAMyc,GAClB4K,EAAYrnB,KAAM2rB,GAKnB,SAASolG,EAAIx6H,EAAGsK,EAAGe,GAElBovH,EAAWz6H,GACXy6H,EAAWnwH,GACXmwH,EAAWpvH,GAEX,IAAIqvH,EAAYrC,EAAc53H,OAAS,EACnCg2C,EAAMkkF,EAAMC,cAAe9uF,EAAOusF,EAAeqC,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAE/FG,EAAOpkF,EAAK,IACZokF,EAAOpkF,EAAK,IACZokF,EAAOpkF,EAAK,IAIb,SAAS8jF,EAAIv6H,EAAGsK,EAAGe,EAAG8a,EAAG20G,EAAaC,EAAWC,EAAaC,EAAeC,GAE5ET,EAAWz6H,GACXy6H,EAAWnwH,GACXmwH,EAAWt0G,GAEXs0G,EAAWnwH,GACXmwH,EAAWpvH,GACXovH,EAAWt0G,GAGX,IAAIu0G,EAAYrC,EAAc53H,OAAS,EACnCg2C,EAAMkkF,EAAMQ,mBAAoBrvF,EAAOusF,EAAeqC,EAAY,EAAGA,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAEnHG,EAAOpkF,EAAK,IACZokF,EAAOpkF,EAAK,IACZokF,EAAOpkF,EAAK,IAEZokF,EAAOpkF,EAAK,IACZokF,EAAOpkF,EAAK,IACZokF,EAAOpkF,EAAK,IAIb,SAASgkF,EAAWlvH,GAEnB6vH,EAAa3xH,KAAM4uH,EAAc53H,OAAS,GAC1C43H,EAAc5uH,KAAMqnB,EAAqB,EAARvlB,EAAY,IAC7C8sH,EAAc5uH,KAAMqnB,EAAqB,EAARvlB,EAAY,IAC7C8sH,EAAc5uH,KAAMqnB,EAAqB,EAARvlB,EAAY,IAK9C,SAASsvH,EAAOQ,GAEf1rD,EAAQlmE,KAAM4xH,EAAQ/nG,GACtBq8C,EAAQlmE,KAAM4xH,EAAQn1G,GAzmBvB,IAqBIo1G,EAKAC,EAAYC,EAAUpyF,EAAQqyF,EA1B9BhD,EAAS9wH,EAAQ8wH,OAAS9wH,EAAQ8wH,OAAS31H,KAAKq1H,YAChDE,EAAgBI,EAAOh/G,SACvB2hH,EAAe3C,EAAOltH,MACtBokE,EAAU8oD,EAAO15F,GAEjBjO,KAGAyqD,OAA4B1pE,IAAnBlK,EAAQ4zE,OAAuB5zE,EAAQ4zE,OAAS,IAEzDC,OAA4C3pE,IAA3BlK,EAAQ6zE,eAA+B7zE,EAAQ6zE,eAAiB,EACjFC,OAAkC5pE,IAAtBlK,EAAQ8zE,UAA0B9zE,EAAQ8zE,UAAYD,EAAiB,EACnF2+C,OAA0CtoH,IAA1BlK,EAAQwyH,cAA8BxyH,EAAQwyH,cAAgB,EAE9Ez+C,OAAwC7pE,IAAzBlK,EAAQ+zE,cAA6B/zE,EAAQ+zE,aAE5DJ,OAA0CzpE,IAA1BlK,EAAQ2zE,cAA8B3zE,EAAQ2zE,cAAgB,GAE9E4+C,OAA0BroH,IAAlBlK,EAAQuyH,MAAsBvyH,EAAQuyH,MAAQ,EAEtDwB,EAAc/zH,EAAQ+zH,YACVC,GAAgB,EAG5BhB,OAAgC9oH,IAAxBlK,EAAQi0H,YAA4Bj0H,EAAQi0H,YAAchhD,GAAgBihD,iBAGjFH,IAEJJ,EAAaI,EAAYI,gBAAiB5B,GAE1CyB,GAAgB,EAChBjgD,GAAe,EAMf6/C,OAAgC1pH,IAAnBlK,EAAQwxE,OAAuBxxE,EAAQwxE,OAASuiD,EAAYniD,oBAAqB2gD,GAAO,GAIrGsB,EAAW,IAAIhlG,EACf4S,EAAS,IAAI5S,EACbilG,EAAY,IAAIjlG,GAMVklD,IAENy+C,EAAgB,EAChB3+C,EAAiB,EACjBC,EAAY,GAMb,IAAIsgD,EAAO31G,EAAGwvG,EACV9pF,EAAQhpC,KAERk5H,EAAcv+C,EAAMG,cAAetC,GAEnC1+C,EAAWo/F,EAAYv+C,MACvBM,EAAQi+C,EAAYj+C,MAIxB,IAFgBC,GAAWC,YAAarhD,GAQvC,IAJAA,EAAWA,EAASshD,UAId93D,EAAI,EAAGwvG,EAAK73C,EAAMt9E,OAAQ2lB,EAAIwvG,EAAIxvG,IAEvC21G,EAAQh+C,EAAO33D,GAEV43D,GAAWC,YAAa89C,KAE5Bh+C,EAAO33D,GAAM21G,EAAM79C,WAStB,IAAIrhD,EAAQmhD,GAAWG,iBAAkBvhD,EAAUmhD,GAI/C0zC,EAAU70F,EAEd,IAAMxW,EAAI,EAAGwvG,EAAK73C,EAAMt9E,OAAQ2lB,EAAIwvG,EAAIxvG,IAEvC21G,EAAQh+C,EAAO33D,GAEfwW,EAAWA,EAAS1zB,OAAQ6yH,GAkJ7B,IAAM,IArIFzxH,EAAG2xH,EAAIv8H,EAAG01B,EACb8mG,EACA5rF,EADM+pF,EAAOz9F,EAASn8B,OAChB07H,EAAOt/F,EAAMp8B,OAiIhB27H,KAEMl8H,EAAI,EAAGivC,EAAKsiF,EAAQhxH,OAAQwM,EAAIkiC,EAAK,EAAGnC,EAAI9sC,EAAI,EAAGA,EAAIivC,EAAIjvC,IAAM+M,IAAM+/B,IAE3E//B,IAAMkiC,IAAKliC,EAAI,GACf+/B,IAAMmC,IAAKnC,EAAI,GAKpBovF,EAAkBl8H,GAAM04H,EAAanH,EAASvxH,GAAKuxH,EAASxkH,GAAKwkH,EAASzkF,IAI3E,IACCqvF,GADGC,MACeC,GAAoBH,EAAiBlzH,SAExD,IAAMkd,EAAI,EAAGwvG,EAAK73C,EAAMt9E,OAAQ2lB,EAAIwvG,EAAIxvG,IAAO,CAM9C,IAJA21G,EAAQh+C,EAAO33D,GAEfi2G,MAEMn8H,EAAI,EAAsB+M,GAAnBkiC,EAAK4sF,EAAMt7H,QAAiB,EAAGusC,EAAI9sC,EAAI,EAAGA,EAAIivC,EAAIjvC,IAAM+M,IAAM+/B,IAErE//B,IAAMkiC,IAAKliC,EAAI,GACf+/B,IAAMmC,IAAKnC,EAAI,GAGpBqvF,GAAkBn8H,GAAM04H,EAAamD,EAAO77H,GAAK67H,EAAO9uH,GAAK8uH,EAAO/uF,IAIrEsvF,GAAe7yH,KAAM4yH,IACrBE,GAAoBA,GAAkBrzH,OAAQmzH,IAO/C,IAAM/xH,EAAI,EAAGA,EAAI6vH,EAAe7vH,IAAO,CAUtC,IANA5K,EAAI4K,EAAI6vH,EACR/kG,EAAIomD,EAAiBh2E,KAAKkiE,IAAKhoE,EAAI8F,KAAK8xE,GAAK,GAC7C2kD,EAAKxgD,EAAYj2E,KAAK6zE,IAAK35E,EAAI8F,KAAK8xE,GAAK,GAInCp3E,EAAI,EAAGivC,EAAKsiF,EAAQhxH,OAAQP,EAAIivC,EAAIjvC,IAIzCgN,GAFAgvH,EAAOxD,EAAUjH,EAASvxH,GAAKk8H,EAAkBl8H,GAAK+7H,IAE9C3oG,EAAG4oG,EAAKh2G,GAAKkP,GAMtB,IAAMhP,EAAI,EAAGwvG,EAAK73C,EAAMt9E,OAAQ2lB,EAAIwvG,EAAIxvG,IAKvC,IAHA21G,EAAQh+C,EAAO33D,GACfi2G,GAAmBC,GAAgBl2G,GAE7BlmB,EAAI,EAAGivC,EAAK4sF,EAAMt7H,OAAQP,EAAIivC,EAAIjvC,IAIvCgN,GAFAgvH,EAAOxD,EAAUqD,EAAO77H,GAAKm8H,GAAkBn8H,GAAK+7H,IAE5C3oG,EAAG4oG,EAAKh2G,GAAKkP,GAYxB,IAJA6mG,EAAKxgD,EAICv7E,EAAI,EAAGA,EAAIm6H,EAAMn6H,IAEtBg8H,EAAOxgD,EAAeg9C,EAAU97F,EAAU18B,GAAKq8H,GAAmBr8H,GAAK+7H,GAAOr/F,EAAU18B,GAEjFy7H,GAQNvyF,EAAO7hC,KAAMg0H,EAAW/kF,QAAS,IAAMonB,eAAgBs+D,EAAK5oG,GAC5DkoG,EAASj0H,KAAMg0H,EAAWziD,UAAW,IAAMlb,eAAgBs+D,EAAKh2G,GAEhEu1G,EAAUl0H,KAAM+zH,EAAY,IAAM/tG,IAAK6b,GAAS7b,IAAKiuG,GAErDtuH,EAAGuuH,EAAUnoG,EAAGmoG,EAAUv1G,EAAGu1G,EAAUrmG,IAXvCloB,EAAGgvH,EAAK5oG,EAAG4oG,EAAKh2G,EAAG,GAoBrB,IAAIrmB,GAEJ,IAAMA,GAAI,EAAGA,IAAKq6H,EAAOr6H,KAExB,IAAMK,EAAI,EAAGA,EAAIm6H,EAAMn6H,IAEtBg8H,EAAOxgD,EAAeg9C,EAAU97F,EAAU18B,GAAKq8H,GAAmBr8H,GAAK+7H,GAAOr/F,EAAU18B,GAEjFy7H,GAQNvyF,EAAO7hC,KAAMg0H,EAAW/kF,QAAS32C,KAAM+9D,eAAgBs+D,EAAK5oG,GAC5DkoG,EAASj0H,KAAMg0H,EAAWziD,UAAWj5E,KAAM+9D,eAAgBs+D,EAAKh2G,GAEhEu1G,EAAUl0H,KAAM+zH,EAAYz7H,KAAM0tB,IAAK6b,GAAS7b,IAAKiuG,GAErDtuH,EAAGuuH,EAAUnoG,EAAGmoG,EAAUv1G,EAAGu1G,EAAUrmG,IAXvCloB,EAAGgvH,EAAK5oG,EAAG4oG,EAAKh2G,EAAGq1D,EAAS2+C,EAAQr6H,IAuBvC,IAAMyK,EAAI6vH,EAAgB,EAAG7vH,GAAK,EAAGA,IAAO,CAQ3C,IANA5K,EAAI4K,EAAI6vH,EACR/kG,EAAIomD,EAAiBh2E,KAAKkiE,IAAKhoE,EAAI8F,KAAK8xE,GAAK,GAC7C2kD,EAAKxgD,EAAYj2E,KAAK6zE,IAAK35E,EAAI8F,KAAK8xE,GAAK,GAInCp3E,EAAI,EAAGivC,EAAKsiF,EAAQhxH,OAAQP,EAAIivC,EAAIjvC,IAGzCgN,GADAgvH,EAAOxD,EAAUjH,EAASvxH,GAAKk8H,EAAkBl8H,GAAK+7H,IAC9C3oG,EAAG4oG,EAAKh2G,EAAGq1D,EAASnmD,GAM7B,IAAMhP,EAAI,EAAGwvG,EAAK73C,EAAMt9E,OAAQ2lB,EAAIwvG,EAAIxvG,IAKvC,IAHA21G,EAAQh+C,EAAO33D,GACfi2G,GAAmBC,GAAgBl2G,GAE7BlmB,EAAI,EAAGivC,EAAK4sF,EAAMt7H,OAAQP,EAAIivC,EAAIjvC,IAEvCg8H,EAAOxD,EAAUqD,EAAO77H,GAAKm8H,GAAkBn8H,GAAK+7H,GAE7CN,EAMNzuH,EAAGgvH,EAAK5oG,EAAG4oG,EAAKh2G,EAAIo1G,EAAYpB,EAAQ,GAAIh0G,EAAGo1G,EAAYpB,EAAQ,GAAI5mG,EAAI8B,GAJ3EloB,EAAGgvH,EAAK5oG,EAAG4oG,EAAKh2G,EAAGq1D,EAASnmD,IA2BhC,WAEC,IAAIhxB,EAAQi0H,EAAc53H,OAAO,EAEjC,GAAKi7E,EAAe,CAEnB,IAAIvgB,EAAQ,EACRxmC,EAAS0lG,EAAOl/D,EAIpB,IAAMj7D,EAAI,EAAGA,EAAIi8H,EAAMj8H,IAGtBs6H,GADAlqF,EAAOzT,EAAO38B,IACJ,GAAMy0B,EAAQ2b,EAAM,GAAM3b,EAAQ2b,EAAM,GAAM3b,GASzD,IAJAA,EAAS0lG,GADTl/D,EAAQ++D,EAAwB,EAAhBC,GAKVj6H,EAAI,EAAGA,EAAIi8H,EAAMj8H,IAGtBs6H,GADAlqF,EAAOzT,EAAO38B,IACJ,GAAMy0B,EAAQ2b,EAAM,GAAM3b,EAAQ2b,EAAM,GAAM3b,OAInD,CAIN,IAAMz0B,EAAI,EAAGA,EAAIi8H,EAAMj8H,IAGtBs6H,GADAlqF,EAAOzT,EAAO38B,IACJ,GAAKowC,EAAM,GAAKA,EAAM,IAMjC,IAAMpwC,EAAI,EAAGA,EAAIi8H,EAAMj8H,IAGtBs6H,GADAlqF,EAAOzT,EAAO38B,IACJ,GAAMm6H,EAAOH,EAAO5pF,EAAM,GAAM+pF,EAAOH,EAAO5pF,EAAM,GAAM+pF,EAAOH,GAM7EpuF,EAAMyM,SAAUn0C,EAAOi0H,EAAc53H,OAAO,EAAG2D,OAA4ByN,IAArBlK,EAAQm9B,SAAyBn9B,EAAQm9B,SAAW,GA7D3G03F,GAmEA,WAEC,IAAIp4H,EAAQi0H,EAAc53H,OAAO,EAC7Bw5H,EAAc,EAIlB,IAHAD,EAAWvI,EAASwI,GACpBA,GAAexI,EAAQhxH,OAEjB2lB,EAAI,EAAGwvG,EAAK73C,EAAMt9E,OAAQ2lB,EAAIwvG,EAAIxvG,IAGvC4zG,EADA+B,EAAQh+C,EAAO33D,GACG6zG,GAGlBA,GAAe8B,EAAMt7H,OAKtBqrC,EAAMyM,SAAUn0C,EAAOi0H,EAAc53H,OAAO,EAAG2D,OAAmCyN,IAA5BlK,EAAQ80H,gBAAgC90H,EAAQ80H,gBAAkB,GAjFzHC,GAyLO/0H,EAAQ8wH,SAEd31H,KAAK21C,SAAU2iF,GACft4H,KAAK41C,aAAc,WAAY,IAAItC,GAAwBiiF,EAAe,IAC1Ev1H,KAAK41C,aAAc,KAAM,IAAItC,GAAwBzuC,EAAQ8wH,OAAO15F,GAAI,MAM1E67C,GAAgBihD,kBAEfjB,cAAe,SAAWrwF,EAAU3N,EAAU+/F,EAAQC,EAAQC,GAE7D,IAAIC,EAAMlgG,EAAmB,EAAT+/F,GAChBI,EAAMngG,EAAmB,EAAT+/F,EAAa,GAC7BK,EAAMpgG,EAAmB,EAATggG,GAChBK,EAAMrgG,EAAmB,EAATggG,EAAa,GAC7BM,EAAMtgG,EAAmB,EAATigG,GAChBM,EAAMvgG,EAAmB,EAATigG,EAAa,GAEjC,OACC,IAAIxpG,EAASypG,EAAKC,GAClB,IAAI1pG,EAAS2pG,EAAKC,GAClB,IAAI5pG,EAAS6pG,EAAKC,KAKpBhC,mBAAoB,SAAW5wF,EAAU3N,EAAU+/F,EAAQC,EAAQC,EAAQO,GAE1E,IAAIN,EAAMlgG,EAAmB,EAAT+/F,GAChBI,EAAMngG,EAAmB,EAAT+/F,EAAa,GAC7BU,EAAMzgG,EAAmB,EAAT+/F,EAAa,GAC7BK,EAAMpgG,EAAmB,EAATggG,GAChBK,EAAMrgG,EAAmB,EAATggG,EAAa,GAC7BU,EAAM1gG,EAAmB,EAATggG,EAAa,GAC7BM,EAAMtgG,EAAmB,EAATigG,GAChBM,EAAMvgG,EAAmB,EAATigG,EAAa,GAC7BU,EAAM3gG,EAAmB,EAATigG,EAAa,GAC7BW,EAAM5gG,EAAmB,EAATwgG,GAChBK,EAAM7gG,EAAmB,EAATwgG,EAAa,GAC7BM,EAAM9gG,EAAmB,EAATwgG,EAAa,GAEjC,OAAK53H,KAAKoI,IAAKmvH,EAAME,GAAQ,KAG3B,IAAI5pG,EAASypG,EAAK,EAAIO,GACtB,IAAIhqG,EAAS2pG,EAAK,EAAIM,GACtB,IAAIjqG,EAAS6pG,EAAK,EAAIK,GACtB,IAAIlqG,EAASmqG,EAAK,EAAIE,KAMtB,IAAIrqG,EAAS0pG,EAAK,EAAIM,GACtB,IAAIhqG,EAAS4pG,EAAK,EAAIK,GACtB,IAAIjqG,EAAS8pG,EAAK,EAAII,GACtB,IAAIlqG,EAASoqG,EAAK,EAAIC,OA6C1B1iD,GAAa/5E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcywE,IAmCrCE,GAAmBj6E,UAAYD,OAAOwZ,OAAQsgE,GAAsB75E,YACvCsJ,YAAc2wE,IA+B3CS,GAAe16E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcoxE,GAgHvCK,GAAqB/6E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,WAC/D+6E,GAAqB/6E,UAAUsJ,YAAcyxE,IA6B7CI,GAAan7E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAc6xE,IAiHrCK,GAAmBx7E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,YAChCsJ,YAAckyE,IA6B3CI,GAAc57E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcsyE,IAmJtCE,GAAoB97E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,YAChCsJ,YAAcwyE,IAiC5CO,GAAcr8E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAc+yE,IAsItCC,GAAoBt8E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,YAChCsJ,YAAcgzE,GAyG5Ca,GAAcn9E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,WACxDm9E,GAAcn9E,UAAUsJ,YAAc6zE,GA+BtCU,GAAiB79E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,WACrD69E,GAAiB79E,UAAUsJ,YAAcu0E,GAmRzCI,GAAuBj+E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,WACjEi+E,GAAuBj+E,UAAUsJ,YAAc20E,IA0B/CY,GAAa7+E,UAAYD,OAAOwZ,OAAQskE,GAAiB79E,YAClCsJ,YAAcu1E,IAsBrCC,GAAmB9+E,UAAYD,OAAOwZ,OAAQ0kE,GAAuBj+E,YACxCsJ,YAAcw1E,IA4B3CC,GAAe/+E,UAAYD,OAAOwZ,OAAQm6B,GAAS1zC,YAC1BsJ,YAAcy1E,IAmFvCC,GAAqBh/E,UAAYD,OAAOwZ,OAAQo8B,GAAe31C,YAChCsJ,YAAc01E,GAI7C,IAAI09C,GAAa38H,OAAO48H,QACvBnpD,kBAAmBA,GACnBU,mBAAoBA,GACpBI,yBAA0BA,GAC1BuC,oBAAqBA,GACrBC,0BAA2BA,GAC3BC,mBAAoBA,GACpBC,yBAA0BA,GAC1BC,oBAAqBA,GACrBC,0BAA2BA,GAC3BC,qBAAsBA,GACtBC,2BAA4BA,GAC5BxC,mBAAoBA,GACpBE,yBAA0BA,GAC1BuC,aAAcA,GACdM,mBAAoBA,GACpBa,kBAAmBA,GACnBI,wBAAyBA,GACzBY,cAAeA,GACfE,oBAAqBA,GACrBK,aAAcA,GACdE,mBAAoBA,GACpBS,eAAgBA,GAChBK,qBAAsBA,GACtBI,aAAcA,GACdK,mBAAoBA,GACpB9jC,cAAeA,GACfC,oBAAqBA,GACrBikC,cAAeA,GACfE,oBAAqBA,GACrBO,cAAeA,GACfC,oBAAqBA,GACrB3C,gBAAiBA,GACjBE,sBAAuBA,GACvBsD,cAAeA,GACf0B,aAAcA,GACdC,mBAAoBA,GACpBjB,iBAAkBA,GAClBI,uBAAwBA,GACxBc,eAAgBA,GAChBC,qBAAsBA,GACtBnpC,YAAaA,GACbK,kBAAmBA,MA2CpB+oC,GAAej/E,UAAYD,OAAOwZ,OAAQ4sB,EAAenmC,YAChCsJ,YAAc21E,GAEvCA,GAAej/E,UAAU48H,kBAAmB,GAc5Cz9C,GAAkBn/E,UAAYD,OAAOwZ,OAAQ4sB,EAAenmC,YAChCsJ,YAAc61E,GAE1CA,GAAkBn/E,UAAUoiD,qBAAsB,EA+GlD+D,GAAqBnmD,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,WACzDmmD,GAAqBnmD,UAAUsJ,YAAc68C,GAE7CA,GAAqBnmD,UAAUgiE,wBAAyB,EAExD7b,GAAqBnmD,UAAUsG,KAAO,SAAWugB,GAoDhD,OAlDA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwkC,SAAY+4C,SAAY,IAE7Bv9E,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OACxBxI,KAAKsjE,UAAYt+C,EAAOs+C,UACxBtjE,KAAKujE,UAAYv+C,EAAOu+C,UAExBvjE,KAAKqc,IAAM2I,EAAO3I,IAElBrc,KAAKo2C,SAAWpxB,EAAOoxB,SACvBp2C,KAAKq2C,kBAAoBrxB,EAAOqxB,kBAEhCr2C,KAAKs2C,MAAQtxB,EAAOsxB,MACpBt2C,KAAKu2C,eAAiBvxB,EAAOuxB,eAE7Bv2C,KAAK0iE,SAASj+D,KAAMugB,EAAO09C,UAC3B1iE,KAAK4gD,YAAc57B,EAAO47B,YAC1B5gD,KAAK2iE,kBAAoB39C,EAAO29C,kBAEhC3iE,KAAKy9C,QAAUz4B,EAAOy4B,QACtBz9C,KAAKojE,UAAYp+C,EAAOo+C,UAExBpjE,KAAK09C,UAAY14B,EAAO04B,UACxB19C,KAAKqjE,YAAY5+D,KAAMugB,EAAOq+C,aAE9BrjE,KAAK6lC,gBAAkB7gB,EAAO6gB,gBAC9B7lC,KAAK8lC,kBAAoB9gB,EAAO8gB,kBAChC9lC,KAAK+lC,iBAAmB/gB,EAAO+gB,iBAE/B/lC,KAAK6gD,aAAe77B,EAAO67B,aAE3B7gD,KAAK8gD,aAAe97B,EAAO87B,aAE3B9gD,KAAK4lC,SAAW5gB,EAAO4gB,SAEvB5lC,KAAKy2C,OAASzxB,EAAOyxB,OACrBz2C,KAAKwjE,gBAAkBx+C,EAAOw+C,gBAE9BxjE,KAAK62C,gBAAkB7xB,EAAO6xB,gBAE9B72C,KAAK0kC,UAAY1f,EAAO0f,UACxB1kC,KAAK2kC,mBAAqB3f,EAAO2f,mBACjC3kC,KAAK82C,iBAAmB9xB,EAAO8xB,iBAC/B92C,KAAK+2C,kBAAoB/xB,EAAO+xB,kBAEhC/2C,KAAK6kC,SAAW7f,EAAO6f,SACvB7kC,KAAK8kC,aAAe9f,EAAO8f,aAC3B9kC,KAAK+kC,aAAe/f,EAAO+f,aAEpB/kC,OA6BRukD,GAAqBpmD,UAAYD,OAAOwZ,OAAQ4sC,GAAqBnmD,YACtCsJ,YAAc88C,GAE7CA,GAAqBpmD,UAAU4jE,wBAAyB,EAExDxd,GAAqBpmD,UAAUsG,KAAO,SAAWugB,GAWhD,OATAs/B,GAAqBnmD,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEhDhlB,KAAKwkC,SAAYg5C,SAAY,IAE7Bx9E,KAAK42C,aAAe5xB,EAAO4xB,aAE3B52C,KAAKyjE,UAAYz+C,EAAOy+C,UACxBzjE,KAAK0jE,mBAAqB1+C,EAAO0+C,mBAE1B1jE,MA4GRokD,GAAkBjmD,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,WACtDimD,GAAkBjmD,UAAUsJ,YAAc28C,GAE1CA,GAAkBjmD,UAAU+hE,qBAAsB,EAElD9b,GAAkBjmD,UAAUsG,KAAO,SAAWugB,GAgD7C,OA9CA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OACxBxI,KAAKkjE,SAASz+D,KAAMugB,EAAOk+C,UAC3BljE,KAAKmjE,UAAYn+C,EAAOm+C,UAExBnjE,KAAKqc,IAAM2I,EAAO3I,IAElBrc,KAAKo2C,SAAWpxB,EAAOoxB,SACvBp2C,KAAKq2C,kBAAoBrxB,EAAOqxB,kBAEhCr2C,KAAKs2C,MAAQtxB,EAAOsxB,MACpBt2C,KAAKu2C,eAAiBvxB,EAAOuxB,eAE7Bv2C,KAAK0iE,SAASj+D,KAAMugB,EAAO09C,UAC3B1iE,KAAK4gD,YAAc57B,EAAO47B,YAC1B5gD,KAAK2iE,kBAAoB39C,EAAO29C,kBAEhC3iE,KAAKy9C,QAAUz4B,EAAOy4B,QACtBz9C,KAAKojE,UAAYp+C,EAAOo+C,UAExBpjE,KAAK09C,UAAY14B,EAAO04B,UACxB19C,KAAKqjE,YAAY5+D,KAAMugB,EAAOq+C,aAE9BrjE,KAAK6lC,gBAAkB7gB,EAAO6gB,gBAC9B7lC,KAAK8lC,kBAAoB9gB,EAAO8gB,kBAChC9lC,KAAK+lC,iBAAmB/gB,EAAO+gB,iBAE/B/lC,KAAKw2C,YAAcxxB,EAAOwxB,YAE1Bx2C,KAAK4lC,SAAW5gB,EAAO4gB,SAEvB5lC,KAAKy2C,OAASzxB,EAAOyxB,OACrBz2C,KAAK02C,QAAU1xB,EAAO0xB,QACtB12C,KAAK42C,aAAe5xB,EAAO4xB,aAC3B52C,KAAK62C,gBAAkB7xB,EAAO6xB,gBAE9B72C,KAAK0kC,UAAY1f,EAAO0f,UACxB1kC,KAAK2kC,mBAAqB3f,EAAO2f,mBACjC3kC,KAAK82C,iBAAmB9xB,EAAO8xB,iBAC/B92C,KAAK+2C,kBAAoB/xB,EAAO+xB,kBAEhC/2C,KAAK6kC,SAAW7f,EAAO6f,SACvB7kC,KAAK8kC,aAAe9f,EAAO8f,aAC3B9kC,KAAK+kC,aAAe/f,EAAO+f,aAEpB/kC,OA0BRqkD,GAAiBlmD,UAAYD,OAAOwZ,OAAQ0sC,GAAkBjmD,YACnCsJ,YAAc48C,GAEzCA,GAAiBlmD,UAAUyjE,oBAAqB,EAEhDvd,GAAiBlmD,UAAUsG,KAAO,SAAWugB,GAM5C,OAJAo/B,GAAkBjmD,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAE7ChlB,KAAKqhD,YAAcr8B,EAAOq8B,YAEnBrhD,OA4DRkkD,GAAmB/lD,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,YAC1BsJ,YAAcy8C,GAE3CA,GAAmB/lD,UAAU+iE,sBAAuB,EAEpDhd,GAAmB/lD,UAAUsG,KAAO,SAAWugB,GAqB9C,OAnBA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKy9C,QAAUz4B,EAAOy4B,QACtBz9C,KAAKojE,UAAYp+C,EAAOo+C,UAExBpjE,KAAK09C,UAAY14B,EAAO04B,UACxB19C,KAAKqjE,YAAY5+D,KAAMugB,EAAOq+C,aAE9BrjE,KAAK6lC,gBAAkB7gB,EAAO6gB,gBAC9B7lC,KAAK8lC,kBAAoB9gB,EAAO8gB,kBAChC9lC,KAAK+lC,iBAAmB/gB,EAAO+gB,iBAE/B/lC,KAAK0kC,UAAY1f,EAAO0f,UACxB1kC,KAAK2kC,mBAAqB3f,EAAO2f,mBAEjC3kC,KAAK6kC,SAAW7f,EAAO6f,SACvB7kC,KAAK8kC,aAAe9f,EAAO8f,aAC3B9kC,KAAK+kC,aAAe/f,EAAO+f,aAEpB/kC,OAoFRmkD,GAAoBhmD,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,YAC1BsJ,YAAc08C,GAE5CA,GAAoBhmD,UAAUmiE,uBAAwB,EAEtDnc,GAAoBhmD,UAAUsG,KAAO,SAAWugB,GAoC/C,OAlCA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OAExBxI,KAAKqc,IAAM2I,EAAO3I,IAElBrc,KAAKo2C,SAAWpxB,EAAOoxB,SACvBp2C,KAAKq2C,kBAAoBrxB,EAAOqxB,kBAEhCr2C,KAAKs2C,MAAQtxB,EAAOsxB,MACpBt2C,KAAKu2C,eAAiBvxB,EAAOuxB,eAE7Bv2C,KAAK0iE,SAASj+D,KAAMugB,EAAO09C,UAC3B1iE,KAAK4gD,YAAc57B,EAAO47B,YAC1B5gD,KAAK2iE,kBAAoB39C,EAAO29C,kBAEhC3iE,KAAKw2C,YAAcxxB,EAAOwxB,YAE1Bx2C,KAAK4lC,SAAW5gB,EAAO4gB,SAEvB5lC,KAAKy2C,OAASzxB,EAAOyxB,OACrBz2C,KAAK02C,QAAU1xB,EAAO0xB,QACtB12C,KAAK42C,aAAe5xB,EAAO4xB,aAC3B52C,KAAK62C,gBAAkB7xB,EAAO6xB,gBAE9B72C,KAAK0kC,UAAY1f,EAAO0f,UACxB1kC,KAAK2kC,mBAAqB3f,EAAO2f,mBACjC3kC,KAAK82C,iBAAmB9xB,EAAO8xB,iBAC/B92C,KAAK+2C,kBAAoB/xB,EAAO+xB,kBAEhC/2C,KAAK6kC,SAAW7f,EAAO6f,SACvB7kC,KAAK8kC,aAAe9f,EAAO8f,aAC3B9kC,KAAK+kC,aAAe/f,EAAO+f,aAEpB/kC,OAuCRykD,GAAmBtmD,UAAYD,OAAOwZ,OAAQkrB,EAASzkC,YAC1BsJ,YAAcg9C,GAE3CA,GAAmBtmD,UAAUojE,sBAAuB,EAEpD9c,GAAmBtmD,UAAUsG,KAAO,SAAWugB,GAY9C,OAVA4d,EAASzkC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OAExBxI,KAAKykC,UAAYzf,EAAOyf,UAExBzkC,KAAKs8B,MAAQtX,EAAOsX,MACpBt8B,KAAK+iE,SAAW/9C,EAAO+9C,SACvB/iE,KAAKijE,QAAUj+C,EAAOi+C,QAEfjjE,MAMR,IAAIg7H,GAAY98H,OAAO48H,QACtB19C,eAAgBA,GAChBpN,eAAgBA,GAChBsN,kBAAmBA,GACnBh5C,eAAgBA,EAChBogB,eAAgBA,GAChBH,qBAAsBA,GACtBD,qBAAsBA,GACtBF,kBAAmBA,GACnBC,iBAAkBA,GAClBH,mBAAoBA,GACpBC,oBAAqBA,GACrB1e,kBAAmBA,EACnB0Q,kBAAmBA,GACnBsO,mBAAoBA,GACpBD,kBAAmBA,GACnB5hB,SAAUA,IAOPq4F,IAEHjwH,SAAS,EAETkwH,SAEAzwG,IAAK,SAAWxsB,EAAKk9H,IAEE,IAAjBn7H,KAAKgL,UAIVhL,KAAKk7H,MAAOj9H,GAAQk9H,IAIrB16H,IAAK,SAAWxC,GAEf,IAAsB,IAAjB+B,KAAKgL,QAIV,OAAOhL,KAAKk7H,MAAOj9H,IAIpBsxC,OAAQ,SAAWtxC,UAEX+B,KAAKk7H,MAAOj9H,IAIpBsvC,MAAO,WAENvtC,KAAKk7H,WA2EH78C,GAAwB,IAAIX,GAYhCx/E,OAAO20F,OAAQ1U,GAAWhgF,WAEzByJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,QAE5B/B,IAARqY,IAAoBA,EAAM,SAEZrY,IAAd/O,KAAKuN,OAAqB6Z,EAAMpnB,KAAKuN,KAAO6Z,GAEjD,IAAI4hB,EAAQhpC,KAERo7H,EAASH,GAAMx6H,IAAK2mB,GAExB,QAAgBrY,IAAXqsH,EAYJ,OAVApyF,EAAMo1C,QAAQJ,UAAW52D,GAEzB5W,WAAY,WAEN+H,GAASA,EAAQ6iH,GAEtBpyF,EAAMo1C,QAAQH,QAAS72D,IAErB,GAEIg0G,EAKR,IAAIC,EAAe,8BACfC,EAAqBl0G,EAAIxe,MAAOyyH,GAGpC,GAAKC,EAAqB,CAEzB,IAAIC,EAAWD,EAAoB,GAC/BE,IAAcF,EAAoB,GAClC96H,EAAO86H,EAAoB,GAE/B96H,EAAOqF,OAAO+e,mBAAoBpkB,GAE7Bg7H,IAAWh7H,EAAOqF,OAAO41H,KAAMj7H,IAEpC,IAEC,IAAIwY,EACAL,GAAiB3Y,KAAK2Y,cAAgB,IAAKlP,cAE/C,OAASkP,GAER,IAAK,cACL,IAAK,OAEHK,EAAW,IAAIrX,YAAanB,EAAK7C,QAIlC,IAAM,IAFFqhB,EAAO,IAAInd,WAAYmX,GAEjB5b,EAAI,EAAGA,EAAIoD,EAAK7C,OAAQP,IAEjC4hB,EAAM5hB,GAAMoD,EAAK+C,WAAYnG,GAIR,SAAjBub,IAEJK,EAAW,IAAI5T,MAAQ4T,IAAc9T,KAAMq2H,KAI5C,MAED,IAAK,WAEJ,IAAI/uH,EAAS,IAAIkvH,UACjB1iH,EAAWxM,EAAOmvH,gBAAiBn7H,EAAM+6H,GAEzC,MAED,IAAK,OAEJviH,EAAW3O,KAAK2Y,MAAOxiB,GAEvB,MAED,QAECwY,EAAWxY,EAObqF,OAAO2K,WAAY,WAEb+H,GAASA,EAAQS,GAEtBgwB,EAAMo1C,QAAQH,QAAS72D,IAErB,GAEF,MAAQtV,GAGTjM,OAAO2K,WAAY,WAEbM,GAAUA,EAASgB,GAExBk3B,EAAMo1C,QAAQH,QAAS72D,GACvB4hB,EAAMo1C,QAAQF,UAAW92D,IAEvB,QAIE,CAEN,IAAItP,EAAU,IAAI/D,eAClB+D,EAAQnI,KAAM,MAAOyX,GAAK,GAE1BtP,EAAQtR,iBAAkB,OAAQ,SAAWC,GAE5C,IAAIuS,EAAWvS,EAAMnH,OAAO0Z,SAE5BiiH,GAAMxwG,IAAKrD,EAAKpO,GAEK,MAAhBhZ,KAAK4Y,QAEJL,GAASA,EAAQS,GAEtBgwB,EAAMo1C,QAAQH,QAAS72D,IAEI,IAAhBpnB,KAAK4Y,QAKhBna,QAAQ4pC,KAAM,6CAET9vB,GAASA,EAAQS,GAEtBgwB,EAAMo1C,QAAQH,QAAS72D,KAIlBtW,GAAUA,EAASrK,GAExBuiC,EAAMo1C,QAAQH,QAAS72D,GACvB4hB,EAAMo1C,QAAQF,UAAW92D,MAIxB,QAEiBrY,IAAf4uE,GAEJ7lE,EAAQtR,iBAAkB,WAAY,SAAWC,GAEhDk3E,EAAYl3E,KAEV,GAIJqR,EAAQtR,iBAAkB,QAAS,SAAWC,GAExCqK,GAAUA,EAASrK,GAExBuiC,EAAMo1C,QAAQH,QAAS72D,GACvB4hB,EAAMo1C,QAAQF,UAAW92D,KAEvB,QAEwBrY,IAAtB/O,KAAK2Y,eAA6Bb,EAAQa,aAAe3Y,KAAK2Y,mBACrC5J,IAAzB/O,KAAKqY,kBAAgCP,EAAQO,gBAAkBrY,KAAKqY,iBAEpEP,EAAQ8jH,kBAAmB9jH,EAAQ8jH,sBAAoC7sH,IAAlB/O,KAAKu7H,SAAyBv7H,KAAKu7H,SAAW,cAExG,IAAM,IAAIM,KAAU77H,KAAK87H,cAExBhkH,EAAQM,iBAAkByjH,EAAQ77H,KAAK87H,cAAeD,IAIvD/jH,EAAQzG,KAAM,MAMf,OAFA23B,EAAMo1C,QAAQJ,UAAW52D,GAElBtP,GAIRikH,QAAS,SAAW58H,GAGnB,OADAa,KAAKuN,KAAOpO,EACLa,MAIRg8H,gBAAiB,SAAW78H,GAG3B,OADAa,KAAK2Y,aAAexZ,EACba,MAIRi8H,mBAAoB,SAAW98H,GAG9B,OADAa,KAAKqY,gBAAkBlZ,EAChBa,MAIRk8H,YAAa,SAAW/8H,GAGvB,OADAa,KAAKu7H,SAAWp8H,EACTa,MAIRoY,iBAAkB,SAAWjZ,GAG5B,OADAa,KAAK87H,cAAgB38H,EACda,QAqBT9B,OAAO20F,OAAQvU,GAAwBngF,WAEtCyJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEzC,IAAIk4B,EAAQhpC,KAERg0B,KAEAlB,EAAU,IAAI0+C,GAClB1+C,EAAQpC,MAAQsD,EAEhB,IAAImoG,EAAS,IAAIh+C,GAAYn+E,KAAKo+E,SAmClC,GAlCA+9C,EAAOJ,QAAS/7H,KAAKuN,MACrB4uH,EAAOH,gBAAiB,eAiCnB3wH,MAAMgX,QAAS+E,GAInB,IAAM,IAFFg1G,EAAS,EAEHh/H,EAAI,EAAGivC,EAAKjlB,EAAIzpB,OAAQP,EAAIivC,IAAOjvC,GAnC9C,SAAsBA,GAErB++H,EAAOv0H,KAAMwf,EAAKhqB,GAAK,SAAW2E,GAEjC,IAAIs6H,EAAWrzF,EAAMpgB,QAAS7mB,GAAQ,GAEtCiyB,EAAQ52B,IACPq1B,MAAO4pG,EAAS5pG,MAChBC,OAAQ2pG,EAAS3pG,OACjBlnB,OAAQ6wH,EAAS7wH,OACjB8lB,QAAS+qG,EAAS/qG,SAKH,KAFhB8qG,GAAU,KAIqB,IAAzBC,EAASC,cACbxpG,EAAQ/B,UAAYU,IAErBqB,EAAQtnB,OAAS6wH,EAAS7wH,OAC1BsnB,EAAQkO,aAAc,EAEjBzoB,GAASA,EAAQua,KAIrB6qD,EAAY7sE,GAUdyrH,CAAan/H,QAQd++H,EAAOv0H,KAAMwf,EAAK,SAAWrlB,GAE5B,IAAIs6H,EAAWrzF,EAAMpgB,QAAS7mB,GAAQ,GAEtC,GAAKs6H,EAASG,UAIb,IAAM,IAFFziG,EAAQsiG,EAAS/qG,QAAQ3zB,OAAS0+H,EAASC,YAErCj/H,EAAI,EAAGA,EAAI08B,EAAO18B,IAAO,CAElC22B,EAAQ32B,IAAQi0B,YAEhB,IAAM,IAAIl0B,EAAI,EAAGA,EAAIi/H,EAASC,YAAal/H,IAE1C42B,EAAQ32B,GAAIi0B,QAAQ3qB,KAAM01H,EAAS/qG,QAASj0B,EAAIg/H,EAASC,YAAcl/H,IACvE42B,EAAQ32B,GAAImO,OAAS6wH,EAAS7wH,OAC9BwoB,EAAQ32B,GAAIo1B,MAAQ4pG,EAAS5pG,MAC7BuB,EAAQ32B,GAAIq1B,OAAS2pG,EAAS3pG,YAQhCI,EAAQpC,MAAM+B,MAAQ4pG,EAAS5pG,MAC/BK,EAAQpC,MAAMgC,OAAS2pG,EAAS3pG,OAChCI,EAAQxB,QAAU+qG,EAAS/qG,QAIE,IAAzB+qG,EAASC,cAEbxpG,EAAQ/B,UAAYU,IAIrBqB,EAAQtnB,OAAS6wH,EAAS7wH,OAC1BsnB,EAAQkO,aAAc,EAEjBzoB,GAASA,EAAQua,IAEpB6qD,EAAY7sE,GAIhB,OAAOgiB,GAIRipG,QAAS,SAAW58H,GAGnB,OADAa,KAAKuN,KAAOpO,EACLa,QAqBT9B,OAAO20F,OAAQtU,GAAkBpgF,WAEhCyJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEzC,IAAIk4B,EAAQhpC,KAER8yB,EAAU,IAAIe,EAEdsoG,EAAS,IAAIh+C,GAAYn+E,KAAKo+E,SA2DlC,OA1DA+9C,EAAOH,gBAAiB,eAExBG,EAAOv0H,KAAMwf,EAAK,SAAWrlB,GAE5B,IAAI06H,EAAUzzF,EAAMpgB,QAAS7mB,GAEtB06H,SAEF1tH,IAAc0tH,EAAQ/rG,MAE1BoC,EAAQpC,MAAQ+rG,EAAQ/rG,WAEb3hB,IAAc0tH,EAAQj8H,OAEjCsyB,EAAQpC,MAAM+B,MAAQgqG,EAAQhqG,MAC9BK,EAAQpC,MAAMgC,OAAS+pG,EAAQ/pG,OAC/BI,EAAQpC,MAAMlwB,KAAOi8H,EAAQj8H,MAI9BsyB,EAAQlC,WAAQ7hB,IAAc0tH,EAAQ7rG,MAAQ6rG,EAAQ7rG,MAAQY,GAC9DsB,EAAQjC,WAAQ9hB,IAAc0tH,EAAQ5rG,MAAQ4rG,EAAQ5rG,MAAQW,GAE9DsB,EAAQhC,eAAY/hB,IAAc0tH,EAAQ3rG,UAAY2rG,EAAQ3rG,UAAYW,GAC1EqB,EAAQ/B,eAAYhiB,IAAc0tH,EAAQ1rG,UAAY0rG,EAAQ1rG,UAAYW,GAE1EoB,EAAQ9B,gBAAajiB,IAAc0tH,EAAQzrG,WAAayrG,EAAQzrG,WAAa,OAExEjiB,IAAc0tH,EAAQjxH,SAE1BsnB,EAAQtnB,OAASixH,EAAQjxH,aAGrBuD,IAAc0tH,EAAQv3H,OAE1B4tB,EAAQ5tB,KAAOu3H,EAAQv3H,WAInB6J,IAAc0tH,EAAQnrG,UAE1BwB,EAAQxB,QAAUmrG,EAAQnrG,SAItB,IAAMmrG,EAAQH,cAElBxpG,EAAQ/B,UAAYU,IAIrBqB,EAAQkO,aAAc,EAEjBzoB,GAASA,EAAQua,EAAS2pG,KAE7B9+C,EAAY7sE,GAGRgiB,KAgBT50B,OAAO20F,OAAQrU,GAAYrgF,WAE1ByJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,QAE5B/B,IAARqY,IAAoBA,EAAM,SAEZrY,IAAd/O,KAAKuN,OAAqB6Z,EAAMpnB,KAAKuN,KAAO6Z,GAEjD,IAAI4hB,EAAQhpC,KAERo7H,EAASH,GAAMx6H,IAAK2mB,GAExB,QAAgBrY,IAAXqsH,EAYJ,OAVApyF,EAAMo1C,QAAQJ,UAAW52D,GAEzB5W,WAAY,WAEN+H,GAASA,EAAQ6iH,GAEtBpyF,EAAMo1C,QAAQH,QAAS72D,IAErB,GAEIg0G,EAIR,IAAI1qG,EAAQ1nB,SAAS43B,gBAAiB,+BAAgC,OAuCtE,OArCAlQ,EAAMlqB,iBAAkB,OAAQ,WAE/By0H,GAAMxwG,IAAKrD,EAAKpnB,MAEXuY,GAASA,EAAQvY,MAEtBgpC,EAAMo1C,QAAQH,QAAS72D,KAErB,GAUHsJ,EAAMlqB,iBAAkB,QAAS,SAAWC,GAEtCqK,GAAUA,EAASrK,GAExBuiC,EAAMo1C,QAAQH,QAAS72D,GACvB4hB,EAAMo1C,QAAQF,UAAW92D,KAEvB,GAEyB,UAAvBA,EAAIlb,OAAQ,EAAG,SAEO6C,IAArB/O,KAAK08H,cAA4BhsG,EAAMgsG,YAAc18H,KAAK08H,aAIhE1zF,EAAMo1C,QAAQJ,UAAW52D,GAEzBsJ,EAAM7a,IAAMuR,EAELsJ,GAIRisG,eAAgB,SAAWx9H,GAG1B,OADAa,KAAK08H,YAAcv9H,EACZa,MAIR+7H,QAAS,SAAW58H,GAGnB,OADAa,KAAKuN,KAAOpO,EACLa,QAgBT9B,OAAO20F,OAAQpU,GAAkBtgF,WAEhCyJ,KAAM,SAAWg1H,EAAMrkH,EAAQolE,EAAY7sE,GAE1C,IAAIgiB,EAAU,IAAIiB,EAEdooG,EAAS,IAAI39C,GAAax+E,KAAKo+E,SACnC+9C,EAAOQ,eAAgB38H,KAAK08H,aAC5BP,EAAOJ,QAAS/7H,KAAKuN,MAwBrB,IAAM,IAtBF6uH,EAAS,EAsBHh/H,EAAI,EAAGA,EAAIw/H,EAAKj/H,SAAWP,GApBrC,SAAsBA,GAErB++H,EAAOv0H,KAAMg1H,EAAMx/H,GAAK,SAAWszB,GAElCoC,EAAQkB,OAAQ52B,GAAMszB,EAIN,KAFhB0rG,IAICtpG,EAAQkO,aAAc,EAEjBzoB,GAASA,EAAQua,UAIrB/jB,EAAW+B,GAMdyrH,CAAan/H,GAId,OAAO01B,GAIR6pG,eAAgB,SAAWx9H,GAG1B,OADAa,KAAK08H,YAAcv9H,EACZa,MAIR+7H,QAAS,SAAW58H,GAGnB,OADAa,KAAKuN,KAAOpO,EACLa,QAgBT9B,OAAO20F,OAAQnU,GAAcvgF,WAE5ByJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEzC,IAAIqrH,EAAS,IAAI39C,GAAax+E,KAAKo+E,SACnC+9C,EAAOQ,eAAgB38H,KAAK08H,aAC5BP,EAAOJ,QAAS/7H,KAAKuN,MAErB,IAAIulB,EAAU,IAAIrC,EAiBlB,OAhBAqC,EAAQpC,MAAQyrG,EAAOv0H,KAAMwf,EAAK,WAGjC,IAAIy1G,EAASz1G,EAAI01G,OAAQ,iBAAoB,GAA4C,IAAvC11G,EAAI01G,OAAQ,sBAE9DhqG,EAAQtnB,OAASqxH,EAASryE,GAAY74B,GACtCmB,EAAQkO,aAAc,OAENjyB,IAAXwJ,GAEJA,EAAQua,IAIP6qD,EAAY7sE,GAERgiB,GAIR6pG,eAAgB,SAAWx9H,GAG1B,OADAa,KAAK08H,YAAcv9H,EACZa,MAIR+7H,QAAS,SAAW58H,GAGnB,OADAa,KAAKuN,KAAOpO,EACLa,QAwBT2+E,GAAMxgF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAExDsJ,YAAak3E,GAEb5hB,SAAS,EAETt4D,KAAM,SAAWugB,GAOhB,OALA+qB,GAAS5xC,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEpChlB,KAAKwI,MAAM/D,KAAMugB,EAAOxc,OACxBxI,KAAK+jE,UAAY/+C,EAAO++C,UAEjB/jE,MAIR0iB,OAAQ,SAAW6zE,GAElB,IAAI/1F,EAAOuvC,GAAS5xC,UAAUukB,OAAOhlB,KAAMsC,KAAMu2F,GAcjD,OAZA/1F,EAAK8mC,OAAO9+B,MAAQxI,KAAKwI,MAAM2lG,SAC/B3tG,EAAK8mC,OAAOy8B,UAAY/jE,KAAK+jE,eAEHh1D,IAArB/O,KAAKu7C,cAA4B/6C,EAAK8mC,OAAOiU,YAAcv7C,KAAKu7C,YAAY4yD,eAE1Dp/F,IAAlB/O,KAAKk7C,WAAyB16C,EAAK8mC,OAAO4T,SAAWl7C,KAAKk7C,eAC3CnsC,IAAf/O,KAAK6kE,QAAsBrkE,EAAK8mC,OAAOu9B,MAAQ7kE,KAAK6kE,YACrC91D,IAAf/O,KAAKq7C,QAAsB76C,EAAK8mC,OAAO+T,MAAQr7C,KAAKq7C,YAClCtsC,IAAlB/O,KAAK8kE,WAAyBtkE,EAAK8mC,OAAOw9B,SAAW9kE,KAAK8kE,eAE1C/1D,IAAhB/O,KAAKusC,SAAuB/rC,EAAK8mC,OAAOiF,OAASvsC,KAAKusC,OAAO7pB,UAE3DliB,KAyBTo+E,GAAgBzgF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQinE,GAAMxgF,YAE/DsJ,YAAam3E,GAEbxZ,mBAAmB,EAEnB3gE,KAAM,SAAWugB,GAMhB,OAJA25D,GAAMxgF,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEjChlB,KAAKu7C,YAAY92C,KAAMugB,EAAOu2B,aAEvBv7C,QAwBT9B,OAAO20F,OAAQ/T,GAAY3gF,WAE1BsG,KAAM,SAAWugB,GAShB,OAPAhlB,KAAKq9B,OAASrY,EAAOqY,OAAOztB,QAE5B5P,KAAK0kE,KAAO1/C,EAAO0/C,KACnB1kE,KAAKmmC,OAASnhB,EAAOmhB,OAErBnmC,KAAKwsC,QAAQ/nC,KAAMugB,EAAOwnB,SAEnBxsC,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrC0iB,OAAQ,WAEP,IAAI4kB,KASJ,OAPmB,IAAdtnC,KAAK0kE,OAAap9B,EAAOo9B,KAAO1kE,KAAK0kE,MACrB,IAAhB1kE,KAAKmmC,SAAemB,EAAOnB,OAASnmC,KAAKmmC,QACtB,MAAnBnmC,KAAKwsC,QAAQhc,GAAgC,MAAnBxwB,KAAKwsC,QAAQppB,IAAYkkB,EAAOkF,QAAUxsC,KAAKwsC,QAAQxgB,WAEtFsb,EAAOjK,OAASr9B,KAAKq9B,OAAO3a,QAAQ,GAAQ4kB,cACrCA,EAAOjK,OAAO2P,OAEd1F,KAgBTy3C,GAAgB5gF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQonE,GAAY3gF,YAErEsJ,YAAas3E,GAEblyC,mBAAmB,EAEnB7C,OAAQ,SAAWsC,GAElB,IAAIjP,EAASr9B,KAAKq9B,OAEd8T,EAAsB,EAAhBhgB,GAAMqiE,QAAclnD,EAAMu4B,MAChCzzB,EAASpxC,KAAKwsC,QAAQ/Z,MAAQzyB,KAAKwsC,QAAQ9Z,OAC3CiP,EAAM2K,EAAM4O,UAAY7d,EAAOsE,IAE9BwP,IAAQ9T,EAAO8T,KAAOC,IAAW/T,EAAO+T,QAAUzP,IAAQtE,EAAOsE,MAErEtE,EAAO8T,IAAMA,EACb9T,EAAO+T,OAASA,EAChB/T,EAAOsE,IAAMA,EACbtE,EAAOuP,6BA6CVoyC,GAAU7gF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQinE,GAAMxgF,YAEzDsJ,YAAau3E,GAEbra,aAAa,EAEblgE,KAAM,SAAWugB,GAahB,OAXA25D,GAAMxgF,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEjChlB,KAAKk7C,SAAWl2B,EAAOk2B,SACvBl7C,KAAK6kE,MAAQ7/C,EAAO6/C,MACpB7kE,KAAK8kE,SAAW9/C,EAAO8/C,SACvB9kE,KAAKq7C,MAAQr2B,EAAOq2B,MAEpBr7C,KAAKV,OAAS0lB,EAAO1lB,OAAOsQ,QAE5B5P,KAAKusC,OAASvnB,EAAOunB,OAAO38B,QAErB5P,QAsCTk/E,GAAW/gF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQinE,GAAMxgF,YAE1DsJ,YAAay3E,GAEb33C,cAAc,EAEd9iC,KAAM,SAAWugB,GAShB,OAPA25D,GAAMxgF,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEjChlB,KAAKk7C,SAAWl2B,EAAOk2B,SACvBl7C,KAAKq7C,MAAQr2B,EAAOq2B,MAEpBr7C,KAAKusC,OAASvnB,EAAOunB,OAAO38B,QAErB5P,QAgBTm/E,GAAuBhhF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQonE,GAAY3gF,YAE5EsJ,YAAa03E,KAwBdC,GAAiBjhF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQinE,GAAMxgF,YAEhEsJ,YAAa23E,GAEb9a,oBAAoB,EAEpB7/D,KAAM,SAAWugB,GAQhB,OANA25D,GAAMxgF,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEjChlB,KAAKV,OAAS0lB,EAAO1lB,OAAOsQ,QAE5B5P,KAAKusC,OAASvnB,EAAOunB,OAAO38B,QAErB5P,QAoBTq/E,GAAalhF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQinE,GAAMxgF,YAE5DsJ,YAAa43E,GAEbhb,gBAAgB,IA6BjBib,GAAcnhF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQinE,GAAMxgF,YAE7DsJ,YAAa63E,GAEbva,iBAAiB,EAEjBtgE,KAAM,SAAWugB,GAOhB,OALA25D,GAAMxgF,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAEjChlB,KAAKyyB,MAAQzN,EAAOyN,MACpBzyB,KAAK0yB,OAAS1N,EAAO0N,OAEd1yB,MAIR0iB,OAAQ,SAAW6zE,GAElB,IAAI/1F,EAAOm+E,GAAMxgF,UAAUukB,OAAOhlB,KAAMsC,KAAMu2F,GAK9C,OAHA/1F,EAAK8mC,OAAO7U,MAAQzyB,KAAKyyB,MACzBjyB,EAAK8mC,OAAO5U,OAAS1yB,KAAK0yB,OAEnBlyB,KAYT,IAAIggF,IAGHu8C,WAAY,SAAWt8G,EAAOu8G,EAAM9qH,GAEnC,OAAKsuE,GAAey8C,aAAcx8G,GAI1B,IAAIA,EAAMhZ,YAAagZ,EAAM4uB,SAAU2tF,OAAajuH,IAAPmD,EAAmBA,EAAKuO,EAAM9iB,SAI5E8iB,EAAM/e,MAAOs7H,EAAM9qH,IAK3BuuE,aAAc,SAAWhgE,EAAOvb,EAAMg4H,GAErC,OAAOz8G,IACHy8G,GAAcz8G,EAAMhZ,cAAgBvC,EAAcub,EAEf,iBAA3Bvb,EAAK+pC,kBAET,IAAI/pC,EAAMub,GAIXpV,MAAMlN,UAAUuD,MAAMhE,KAAM+iB,IAIpCw8G,aAAc,SAAW31F,GAExB,OAAO3lC,YAAYw7H,OAAQ71F,MACrBA,aAAkB81F,WAKzBC,iBAAkB,SAAWh9C,GAU5B,IAAM,IAFFxjF,EAAIwjF,EAAM1iF,OACVuD,EAAS,IAAImK,MAAOxO,GACdO,EAAI,EAAGA,IAAMP,IAAMO,EAAI8D,EAAQ9D,GAAMA,EAI/C,OAFA8D,EAAO6gC,KAVP,SAAsB3kC,EAAG+M,GAExB,OAAOk2E,EAAOjjF,GAAMijF,EAAOl2E,KAUrBjJ,GAKRo8H,YAAa,SAAWh9C,EAAQhkB,EAAQ5sB,GAKvC,IAAM,IAHF6tF,EAAUj9C,EAAO3iF,OACjBuD,EAAS,IAAIo/E,EAAO74E,YAAa81H,GAE3BngI,EAAI,EAAGg8D,EAAY,EAAGA,IAAcmkE,IAAYngI,EAIzD,IAAM,IAFFogI,EAAY9tF,EAAOtyC,GAAMk/D,EAEnBnyD,EAAI,EAAGA,IAAMmyD,IAAWnyD,EAEjCjJ,EAAQk4D,KAAiBknB,EAAQk9C,EAAYrzH,GAM/C,OAAOjJ,GAKRu8H,YAAa,SAAWC,EAAUr9C,EAAOC,EAAQq9C,GAIhD,IAFA,IAAIvgI,EAAI,EAAGa,EAAMy/H,EAAU,QAEX3uH,IAAR9Q,QAAkD8Q,IAA7B9Q,EAAK0/H,IAEjC1/H,EAAMy/H,EAAUtgI,KAIjB,QAAa2R,IAAR9Q,EAAL,CAEA,IAAIkB,EAAQlB,EAAK0/H,GACjB,QAAe5uH,IAAV5P,EAEL,GAAKkM,MAAMgX,QAASljB,GAEnB,QAIgB4P,KAFf5P,EAAQlB,EAAK0/H,MAIZt9C,EAAM15E,KAAM1I,EAAI8sF,MAChBzK,EAAO35E,KAAKR,MAAOm6E,EAAQnhF,IAI5BlB,EAAMy/H,EAAUtgI,gBAEC2R,IAAR9Q,QAEJ,QAAuB8Q,IAAlB5P,EAAM6sB,QAIjB,QAIgBjd,KAFf5P,EAAQlB,EAAK0/H,MAIZt9C,EAAM15E,KAAM1I,EAAI8sF,MAChB5rF,EAAM6sB,QAASs0D,EAAQA,EAAO3iF,SAI/BM,EAAMy/H,EAAUtgI,gBAEC2R,IAAR9Q,QAMV,QAIgB8Q,KAFf5P,EAAQlB,EAAK0/H,MAIZt9C,EAAM15E,KAAM1I,EAAI8sF,MAChBzK,EAAO35E,KAAMxH,IAIdlB,EAAMy/H,EAAUtgI,gBAEC2R,IAAR9Q,MA0CbC,OAAO20F,OAAQtT,GAAYphF,WAE1By/H,SAAU,SAAUhhI,GAEnB,IAAIihI,EAAK79H,KAAKw/E,mBACbirC,EAAKzqH,KAAK2/E,aAEVyR,EAAKysC,EAAMpT,GACXt5B,EAAK0sC,EAAIpT,EAAK,GAEfqT,EAAmB,CAElBC,EAAM,CAEL,IAAIhtF,EAEJitF,EAAa,CAKZC,EAAc,KAASrhI,EAAIw0F,GAAO,CAEjC,IAAU8sC,EAAWzT,EAAK,IAAM,CAE/B,QAAY17G,IAAPqiF,EAAmB,CAEvB,GAAKx0F,EAAIu0F,EAAK,MAAM8sC,EAMpB,OAFAxT,EAAKoT,EAAGlgI,OACRqC,KAAK2/E,aAAe8qC,EACbzqH,KAAKm+H,UAAW1T,EAAK,EAAG7tH,EAAGu0F,GAInC,GAAKs5B,IAAOyT,EAAW,MAKvB,GAHA/sC,EAAKC,EACLA,EAAKysC,IAAOpT,GAEP7tH,EAAIw0F,EAGR,MAAM2sC,EAORhtF,EAAQ8sF,EAAGlgI,OACX,MAAMqgI,EAMP,CAAA,GAASphI,GAAKu0F,EAiDd,MAAM2sC,EA7CL,IAAIM,EAAWP,EAAI,GAEdjhI,EAAIwhI,IAER3T,EAAK,EACLt5B,EAAKitC,GAMN,IAAM,IAAIF,EAAWzT,EAAK,IAAM,CAE/B,QAAY17G,IAAPoiF,EAKJ,OADAnxF,KAAK2/E,aAAe,EACb3/E,KAAKq+H,aAAc,EAAGzhI,EAAGw0F,GAIjC,GAAKq5B,IAAOyT,EAAW,MAKvB,GAHA9sC,EAAKD,EACLA,EAAK0sC,IAAOpT,EAAK,GAEZ7tH,GAAKu0F,EAGT,MAAM4sC,EAORhtF,EAAQ05E,EACRA,EAAK,GAaP,KAAQA,EAAK15E,GAAQ,CAEpB,IAAIutF,EAAQ7T,EAAK15E,IAAY,EAExBn0C,EAAIihI,EAAIS,GAEZvtF,EAAQutF,EAIR7T,EAAK6T,EAAM,EAWb,GALAltC,EAAKysC,EAAMpT,QAKC17G,KAJZoiF,EAAK0sC,EAAIpT,EAAK,IAOb,OADAzqH,KAAK2/E,aAAe,EACb3/E,KAAKq+H,aAAc,EAAGzhI,EAAGw0F,GAIjC,QAAYriF,IAAPqiF,EAIJ,OAFAq5B,EAAKoT,EAAGlgI,OACRqC,KAAK2/E,aAAe8qC,EACbzqH,KAAKm+H,UAAW1T,EAAK,EAAGt5B,EAAIv0F,GAMrCoD,KAAK2/E,aAAe8qC,EAEpBzqH,KAAKu+H,iBAAkB9T,EAAIt5B,EAAIC,GAIhC,OAAOpxF,KAAKw+H,aAAc/T,EAAIt5B,EAAIv0F,EAAGw0F,IAItChH,SAAU,KAKVq0C,oBAEAC,aAAc,WAEb,OAAO1+H,KAAKoqF,UAAYpqF,KAAKy+H,kBAI9BE,iBAAkB,SAAUl2H,GAS3B,IAAM,IALFvH,EAASlB,KAAK2b,aACjB2kE,EAAStgF,KAAKy/E,aACdnjB,EAASt8D,KAAK4/E,UACd/tD,EAASppB,EAAQ6zD,EAERl/D,EAAI,EAAGA,IAAMk/D,IAAWl/D,EAEjC8D,EAAQ9D,GAAMkjF,EAAQzuD,EAASz0B,GAIhC,OAAO8D,GAMRs9H,aAAc,SAAU/T,EAAIt5B,EAAIv0F,EAAGw0F,GAElC,MAAM,IAAI9zF,MAAO,4BAKlBihI,iBAAkB,SAAU9T,EAAIt5B,EAAIC,OASrClzF,OAAO20F,OAAQtT,GAAYphF,WAG1BkgI,aAAc9+C,GAAYphF,UAAUwgI,iBAGpCR,UAAW5+C,GAAYphF,UAAUwgI,mBA0BlC9+C,GAAiB1hF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQ6nE,GAAYphF,YAEtEsJ,YAAao4E,GAEb4+C,kBAEC10C,YAAcC,GACdC,UAAYD,IAIbu0C,iBAAkB,SAAU9T,EAAIt5B,EAAIC,GAEnC,IAAIysC,EAAK79H,KAAKw/E,mBACbo/C,EAAQnU,EAAK,EACboU,EAAQpU,EAAK,EAEbqU,EAAQjB,EAAIe,GACZG,EAAQlB,EAAIgB,GAEb,QAAe9vH,IAAV+vH,EAEJ,OAAS9+H,KAAK0+H,eAAe30C,aAE5B,KAzy8BkB,KA4y8BjB60C,EAAQnU,EACRqU,EAAQ,EAAI3tC,EAAKC,EAEjB,MAED,KAhz8BmB,KAoz8BlB0tC,EAAQ3tC,EAAK0sC,EADbe,EAAQf,EAAGlgI,OAAS,GACOkgI,EAAIe,EAAQ,GAEvC,MAED,QAGCA,EAAQnU,EACRqU,EAAQ1tC,EAMX,QAAeriF,IAAVgwH,EAEJ,OAAS/+H,KAAK0+H,eAAez0C,WAE5B,KAv08BkB,KA008BjB40C,EAAQpU,EACRsU,EAAQ,EAAI3tC,EAAKD,EAEjB,MAED,KA908BmB,KAi18BlB0tC,EAAQ,EACRE,EAAQ3tC,EAAKysC,EAAI,GAAMA,EAAI,GAE3B,MAED,QAGCgB,EAAQpU,EAAK,EACbsU,EAAQ5tC,EAMX,IAAI6tC,EAAuB,IAAZ5tC,EAAKD,GACnB70B,EAASt8D,KAAK4/E,UAEf5/E,KAAK8/E,YAAck/C,GAAW7tC,EAAK2tC,GACnC9+H,KAAKggF,YAAcg/C,GAAWD,EAAQ3tC,GACtCpxF,KAAK+/E,YAAc6+C,EAAQtiE,EAC3Bt8D,KAAKigF,YAAc4+C,EAAQviE,GAI5BkiE,aAAc,SAAU/T,EAAIt5B,EAAIv0F,EAAGw0F,GAuBlC,IAAM,IArBFlwF,EAASlB,KAAK2b,aACjB2kE,EAAStgF,KAAKy/E,aACdnjB,EAASt8D,KAAK4/E,UAEdq/C,EAAKxU,EAAKnuD,EAAS4iE,EAAKD,EAAK3iE,EAC7B6iE,EAAKn/H,KAAK+/E,YAAcq/C,EAAKp/H,KAAKigF,YAClCo/C,EAAKr/H,KAAK8/E,YAAaw/C,EAAKt/H,KAAKggF,YAEjC97E,GAAMtH,EAAIu0F,IAASC,EAAKD,GACxB0sC,EAAK35H,EAAIA,EACTq7H,EAAM1B,EAAK35H,EAIRs7H,GAAWH,EAAOE,EAAgB,EAAIF,EAAQxB,EAAiBwB,EAAOn7H,EACtEwjH,GAAO,EAAI2X,GAAOE,IAAU,IAAM,EAAIF,GAAQxB,IAAW,GAAMwB,GAAOn7H,EAAQ,EAC9Ey1F,IAAO,EAAI2lC,GAAOC,GAAU,IAAQD,GAAUzB,EAAW,GAAa35H,EACtEu7H,EAAWH,EAAOC,EAAkBD,EAAUzB,EAIxCzgI,EAAI,EAAGA,IAAMk/D,IAAWl/D,EAEjC8D,EAAQ9D,GACNoiI,EAAKl/C,EAAQ6+C,EAAK/hI,GAClBsqH,EAAKpnC,EAAQ4+C,EAAK9hI,GAClBu8F,EAAKrZ,EAAQ2+C,EAAK7hI,GAClBqiI,EAAKn/C,EAAQ8+C,EAAKhiI,GAIrB,OAAO8D,KAgBTg/E,GAAkB/hF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQ6nE,GAAYphF,YAEvEsJ,YAAay4E,GAEbs+C,aAAc,SAAU/T,EAAIt5B,EAAIv0F,EAAGw0F,GAYlC,IAAM,IAVFlwF,EAASlB,KAAK2b,aACjB2kE,EAAStgF,KAAKy/E,aACdnjB,EAASt8D,KAAK4/E,UAEd8/C,EAAUjV,EAAKnuD,EACfqjE,EAAUD,EAAUpjE,EAEpBsjE,GAAYhjI,EAAIu0F,IAASC,EAAKD,GAC9B0uC,EAAU,EAAID,EAELxiI,EAAI,EAAGA,IAAMk/D,IAAWl/D,EAEjC8D,EAAQ9D,GACNkjF,EAAQq/C,EAAUviI,GAAMyiI,EACxBv/C,EAAQo/C,EAAUtiI,GAAMwiI,EAI3B,OAAO1+H,KAoBTi/E,GAAoBhiF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQ6nE,GAAYphF,YAEzEsJ,YAAa04E,GAEbq+C,aAAc,SAAU/T,EAAIt5B,EAAIv0F,EAAGw0F,GAElC,OAAOpxF,KAAK2+H,iBAAkBlU,EAAK,MAMrC,IAAIqV,GAEJA,IAECp/C,eAAgBjsD,aAChBksD,gBAAiBlsD,aAEjBosD,qBA998BuB,KAg+8BvBk/C,iCAAkC,SAAW7+H,GAE5C,OAAO,IAAIi/E,GACTngF,KAAKqgF,MAAOrgF,KAAKsgF,OAAQtgF,KAAKggI,eAAgB9+H,IAIjD++H,+BAAgC,SAAW/+H,GAE1C,OAAO,IAAIg/E,GACTlgF,KAAKqgF,MAAOrgF,KAAKsgF,OAAQtgF,KAAKggI,eAAgB9+H,IAIjDg/H,+BAAgC,SAAWh/H,GAE1C,OAAO,IAAI2+E,GACT7/E,KAAKqgF,MAAOrgF,KAAKsgF,OAAQtgF,KAAKggI,eAAgB9+H,IAIjD0/E,iBAAkB,SAAWL,GAE5B,IAAI4/C,EAEJ,OAAS5/C,GAER,KA5/8BuB,KA8/8BtB4/C,EAAgBngI,KAAK+/H,iCAErB,MAED,KAjg9BqB,KAmg9BpBI,EAAgBngI,KAAKigI,+BAErB,MAED,KAtg9BqB,KAwg9BpBE,EAAgBngI,KAAKkgI,+BAMvB,QAAuBnxH,IAAlBoxH,EAyBLngI,KAAKmqF,kBAAoBg2C,MAzBzB,CAEC,IAAI51H,EAAU,iCACZvK,KAAKogI,cAAgB,yBAA2BpgI,KAAKmM,KAEvD,QAAgC4C,IAA3B/O,KAAKmqF,kBAAkC,CAG3C,GAAK5J,IAAkBvgF,KAAK6gF,qBAM3B,MAAM,IAAIvjF,MAAOiN,GAJjBvK,KAAK4gF,iBAAkB5gF,KAAK6gF,sBAU9BpiF,QAAQ4pC,KAAM,gCAAiC99B,KASjD81H,iBAAkB,WAEjB,OAASrgI,KAAKmqF,mBAEb,KAAKnqF,KAAK+/H,iCAET,OAnj9BsB,KAqj9BvB,KAAK//H,KAAKigI,+BAET,OAtj9BoB,KAwj9BrB,KAAKjgI,KAAKkgI,+BAET,OAzj9BoB,OA+j9BvBF,aAAc,WAEb,OAAOhgI,KAAKsgF,OAAO3iF,OAASqC,KAAKqgF,MAAM1iF,QAKxC8S,MAAO,SAAW6vH,GAEjB,GAAoB,IAAfA,EAIJ,IAAM,IAFFjgD,EAAQrgF,KAAKqgF,MAEPjjF,EAAI,EAAGP,EAAIwjF,EAAM1iF,OAAQP,IAAMP,IAAMO,EAE9CijF,EAAOjjF,IAAOkjI,EAMhB,OAAOtgI,MAKRs8B,MAAO,SAAW0uD,GAEjB,GAAmB,IAAdA,EAIJ,IAAM,IAFF3K,EAAQrgF,KAAKqgF,MAEPjjF,EAAI,EAAGP,EAAIwjF,EAAM1iF,OAAQP,IAAMP,IAAMO,EAE9CijF,EAAOjjF,IAAO4tF,EAMhB,OAAOhrF,MAMRugI,KAAM,SAAWn6C,EAAWo6C,GAO3B,IALA,IAAIngD,EAAQrgF,KAAKqgF,MAChBogD,EAAQpgD,EAAM1iF,OACdq/H,EAAO,EACP9qH,EAAKuuH,EAAQ,EAENzD,IAASyD,GAASpgD,EAAO28C,GAAS52C,KAAe42C,EACzD,MAAiB,IAAT9qH,GAAcmuE,EAAOnuE,GAAOsuH,KAAatuH,EAIjD,KAFGA,EAEW,IAAT8qH,GAAc9qH,IAAOuuH,EAAQ,CAG5BzD,GAAQ9qH,IAAKA,EAAKxP,KAAKL,IAAK6P,EAAI,GAAK8qH,EAAO9qH,EAAK,GAEtD,IAAIoqD,EAASt8D,KAAKggI,eAClBhgI,KAAKqgF,MAAQG,GAAeu8C,WAAY18C,EAAO28C,EAAM9qH,GACrDlS,KAAKsgF,OAASE,GACZu8C,WAAY/8H,KAAKsgF,OAAQ08C,EAAO1gE,EAAQpqD,EAAKoqD,GAIhD,OAAOt8D,MAKR8gF,SAAU,WAET,IAAI4/C,GAAQ,EAER9gD,EAAY5/E,KAAKggI,eAChBpgD,EAAYl9E,KAAKK,MAAO68E,IAAgB,IAE5CnhF,QAAQqT,MAAO,6DAA8D9R,MAC7E0gI,GAAQ,GAIT,IAAIrgD,EAAQrgF,KAAKqgF,MAChBC,EAAStgF,KAAKsgF,OAEdmgD,EAAQpgD,EAAM1iF,OAEA,IAAV8iI,IAEJhiI,QAAQqT,MAAO,gDAAiD9R,MAChE0gI,GAAQ,GAMT,IAAM,IAFFv1H,EAAW,KAEL/N,EAAI,EAAGA,IAAMqjI,EAAOrjI,IAAO,CAEpC,IAAIujI,EAAWtgD,EAAOjjF,GAEtB,GAAyB,iBAAbujI,GAAyB98G,MAAO88G,GAAa,CAExDliI,QAAQqT,MAAO,4DAA6D9R,KAAM5C,EAAGujI,GACrFD,GAAQ,EACR,MAID,GAAkB,OAAbv1H,GAAqBA,EAAWw1H,EAAW,CAE/CliI,QAAQqT,MAAO,mDAAoD9R,KAAM5C,EAAGujI,EAAUx1H,GACtFu1H,GAAQ,EACR,MAIDv1H,EAAWw1H,EAIZ,QAAgB5xH,IAAXuxE,GAECE,GAAey8C,aAAc38C,GAEjC,IAAM,IAAIljF,EAAI,EAAGP,EAAIyjF,EAAO3iF,OAAQP,IAAMP,IAAMO,EAAI,CAEnD,IAAI+B,EAAQmhF,EAAQljF,GAEpB,GAAKymB,MAAO1kB,GAAU,CAErBV,QAAQqT,MAAO,6DAA8D9R,KAAM5C,EAAG+B,GACtFuhI,GAAQ,EACR,OAUJ,OAAOA,GAMR3/C,SAAU,WAWT,IAAM,IATFV,EAAQrgF,KAAKqgF,MAChBC,EAAStgF,KAAKsgF,OACdhkB,EAASt8D,KAAKggI,eAEdY,EA9t9BqB,OA8t9BC5gI,KAAKqgI,mBAE3BQ,EAAa,EACb/nG,EAAYunD,EAAM1iF,OAAS,EAElBP,EAAI,EAAGA,EAAI07B,IAAc17B,EAAI,CAEtC,IAAI0jI,GAAO,EAEP/1C,EAAO1K,EAAOjjF,GAKlB,GAAK2tF,IAJU1K,EAAOjjF,EAAI,KAIQ,IAANA,GAAW2tF,IAASA,EAAM,IAErD,GAAO61C,EAsBAE,GAAO,OAdb,IAAM,IAJFjvG,EAASz0B,EAAIk/D,EAChBykE,EAAUlvG,EAASyqC,EACnB0kE,EAAUnvG,EAASyqC,EAEVnyD,EAAI,EAAGA,IAAMmyD,IAAWnyD,EAAI,CAErC,IAAIhL,EAAQmhF,EAAQzuD,EAAS1nB,GAE7B,GAAKhL,IAAUmhF,EAAQygD,EAAU52H,IAC/BhL,IAAUmhF,EAAQ0gD,EAAU72H,GAAM,CAEnC22H,GAAO,EACP,OAYJ,GAAKA,EAAO,CAEX,GAAK1jI,IAAMyjI,EAAa,CAEvBxgD,EAAOwgD,GAAexgD,EAAOjjF,GAK7B,IAAM,IAHF6jI,EAAa7jI,EAAIk/D,EACpB4kE,EAAcL,EAAavkE,EAElBnyD,EAAI,EAAGA,IAAMmyD,IAAWnyD,EAEjCm2E,EAAQ4gD,EAAc/2H,GAAMm2E,EAAQ2gD,EAAa92H,KAIhD02H,GAQL,GAAK/nG,EAAY,EAAI,CAEpBunD,EAAOwgD,GAAexgD,EAAOvnD,GAE7B,IAAM,IAAImoG,EAAanoG,EAAYwjC,EAAQ4kE,EAAcL,EAAavkE,EAAQnyD,EAAI,EAAGA,IAAMmyD,IAAWnyD,EAErGm2E,EAAQ4gD,EAAc/2H,GAAMm2E,EAAQ2gD,EAAa92H,KAE/C02H,EAWJ,OAPKA,IAAexgD,EAAM1iF,SAEzBqC,KAAKqgF,MAAQG,GAAeu8C,WAAY18C,EAAO,EAAGwgD,GAClD7gI,KAAKsgF,OAASE,GAAeu8C,WAAYz8C,EAAQ,EAAGugD,EAAavkE,IAI3Dt8D,OA4CTghF,GAAoB7iF,UAClBD,OAAO20F,OAAQ30F,OAAOwZ,OAAQooH,KAE/Br4H,YAAau5E,GAEbo/C,cAAe,WAoBhBn/C,GAA4B9iF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQ6nE,GAAYphF,YAEjFsJ,YAAaw5E,GAEbu9C,aAAc,SAAU/T,EAAIt5B,EAAIv0F,EAAGw0F,GAUlC,IAAM,IARFlwF,EAASlB,KAAK2b,aACjB2kE,EAAStgF,KAAKy/E,aACdnjB,EAASt8D,KAAK4/E,UAEd/tD,EAAS44F,EAAKnuD,EAEd3kB,GAAU/6C,EAAIu0F,IAASC,EAAKD,GAEnB5vF,EAAMswB,EAASyqC,EAAQzqC,IAAWtwB,EAAKswB,GAAU,EAE1DwB,EAAWqlE,UAAWx3F,EAAQ,EAC5Bo/E,EAAQzuD,EAASyqC,EAAQgkB,EAAQzuD,EAAQ8lB,GAI5C,OAAOz2C,KAqBTggF,GAAwB/iF,UACtBD,OAAO20F,OAAQ30F,OAAOwZ,OAAQooH,KAE/Br4H,YAAay5E,GAEbk/C,cAAe,aAIfv/C,qBA769BuB,KA+69BvBo/C,+BAAgC,SAAU/+H,GAEzC,OAAO,IAAI+/E,GACTjhF,KAAKqgF,MAAOrgF,KAAKsgF,OAAQtgF,KAAKggI,eAAgB9+H,IAIjDg/H,oCAAgCnxH,IAmBjCoyE,GAAoBhjF,UAClBD,OAAO20F,OAAQ30F,OAAOwZ,OAAQooH,KAE/Br4H,YAAa05E,GAEbi/C,cAAe,WAwBhBh/C,GAAoBjjF,UAClBD,OAAO20F,OAAQ30F,OAAOwZ,OAAQooH,KAE/Br4H,YAAa25E,GAEbg/C,cAAe,SACfz/C,gBAAiBt1E,MAEjBw1E,qBA/+9ByB,KAi/9BzBo/C,oCAAgClxH,EAEhCmxH,oCAAgCnxH,IAoBjCsyE,GAAqBljF,UACnBD,OAAO20F,OAAQ30F,OAAOwZ,OAAQooH,KAE/Br4H,YAAa45E,GAEb++C,cAAe,OACfz/C,gBAAiBt1E,MAEjBw1E,qBA/g+ByB,KAih+BzBo/C,oCAAgClxH,EAChCmxH,oCAAgCnxH,IAwBjCuyE,GAAmBnjF,UACjBD,OAAO20F,OAAQ30F,OAAOwZ,OAAQooH,KAE/Br4H,YAAa65E,GAEb8+C,cAAe,UA4BhB7+C,GAAcpjF,UAAY2hI,GAC1BA,GAAuBr4H,YAAc85E,GAIrCrjF,OAAO20F,OAAQtR,IAKdv+D,MAAO,SAAUyI,GAEhB,QAAkB1c,IAAd0c,EAAKvmB,KAER,MAAM,IAAI5H,MAAO,uCAIlB,IAAI6jI,EAAY5/C,GAAc6/C,8BAA+B31G,EAAKvmB,MAElE,QAAoB6J,IAAf0c,EAAK40D,MAAsB,CAE/B,IAAIA,KAAYC,KAEhBE,GAAei9C,YAAahyG,EAAKtc,KAAMkxE,EAAOC,EAAQ,SAEtD70D,EAAK40D,MAAQA,EACb50D,EAAK60D,OAASA,EAKf,YAAyBvxE,IAApBoyH,EAAUn+G,MAEPm+G,EAAUn+G,MAAOyI,GAKjB,IAAI01G,EACT11G,EAAKtf,KAAMsf,EAAK40D,MAAO50D,EAAK60D,OAAQ70D,EAAK80D,gBAM7C79D,OAAQ,SAAU2+G,GAEjB,IAEI51G,EAFA01G,EAAYE,EAAM55H,YAKtB,QAA0BsH,IAArBoyH,EAAUz+G,OAEd+I,EAAO01G,EAAUz+G,OAAQ2+G,OAEnB,CAGN51G,GAECtf,KAAQk1H,EAAMl1H,KACdk0E,MAASG,GAAeC,aAAc4gD,EAAMhhD,MAAOh1E,OACnDi1E,OAAUE,GAAeC,aAAc4gD,EAAM/gD,OAAQj1E,QAItD,IAAIk1E,EAAgB8gD,EAAMhB,mBAErB9/C,IAAkB8gD,EAAMxgD,uBAE5Bp1D,EAAK80D,cAAgBA,GAQvB,OAFA90D,EAAKvmB,KAAOm8H,EAAMjB,cAEX30G,GAIR21G,8BAA+B,SAAU/5C,GAExC,OAAQA,EAAS59E,eAEhB,IAAK,SACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,UAEJ,OAAO03E,GAER,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,UAEJ,OAAOH,GAER,IAAK,QAEJ,OAAOM,GAER,IAAK,aAEJ,OAAOJ,GAER,IAAK,OACL,IAAK,UAEJ,OAAOG,GAER,IAAK,SAEJ,OAAOD,GAIT,MAAM,IAAI9jF,MAAO,yBAA2B+pF,MAiC9CnpF,OAAO20F,OAAQrR,IAEdx+D,MAAO,SAAWyI,GAMjB,IAAM,IAJFg2D,KACH6/C,EAAa71G,EAAKg2D,OAClB8/C,EAAY,GAAQ91G,EAAKiiE,KAAO,GAEvBtwF,EAAI,EAAGP,EAAIykI,EAAW3jI,OAAQP,IAAMP,IAAMO,EAEnDqkF,EAAO96E,KAAM46E,GAAcv+D,MAAOs+G,EAAYlkI,IAAMk/B,MAAOilG,IAI5D,OAAO,IAAI//C,GAAe/1D,EAAKtf,KAAMsf,EAAKhpB,SAAUg/E,IAIrD/+D,OAAQ,SAAW6mE,GAalB,IAAM,IAXF9H,KACH+/C,EAAaj4C,EAAK9H,OAEfh2D,GAEHtf,KAAQo9E,EAAKp9E,KACb1J,SAAY8mF,EAAK9mF,SACjBg/E,OAAUA,GAIDrkF,EAAI,EAAGP,EAAI2kI,EAAW7jI,OAAQP,IAAMP,IAAMO,EAEnDqkF,EAAO96E,KAAM46E,GAAc7+D,OAAQ8+G,EAAYpkI,KAIhD,OAAOquB,GAIRg2G,8BAA+B,SAAWt1H,EAAMu1H,EAAqBh0C,EAAKi0C,GAKzE,IAAM,IAHFC,EAAkBF,EAAoB/jI,OACtC8jF,KAEMrkF,EAAI,EAAGA,EAAIwkI,EAAiBxkI,IAAO,CAE5C,IAAIijF,KACAC,KAEJD,EAAM15E,MACFvJ,EAAIwkI,EAAkB,GAAMA,EAC9BxkI,GACEA,EAAI,GAAMwkI,GAEdthD,EAAO35E,KAAM,EAAG,EAAG,GAEnB,IAAI+oC,EAAQ8wC,GAAe68C,iBAAkBh9C,GAC7CA,EAAQG,GAAe88C,YAAaj9C,EAAO,EAAG3wC,GAC9C4wC,EAASE,GAAe88C,YAAah9C,EAAQ,EAAG5wC,GAIzCiyF,GAAyB,IAAfthD,EAAO,KAEvBA,EAAM15E,KAAMi7H,GACZthD,EAAO35E,KAAM25E,EAAQ,KAItBmB,EAAO96E,KACL,IAAIw6E,GACH,0BAA4BugD,EAAqBtkI,GAAI+O,KAAO,IAC5Dk0E,EAAOC,GACNhkD,MAAO,EAAMoxD,IAIlB,OAAO,IAAIlM,GAAer1E,GAAQ,EAAGs1E,IAItCogD,WAAY,SAAWC,EAAmB31H,GAEzC,IAAI41H,EAAYD,EAEhB,IAAOz2H,MAAMgX,QAASy/G,GAAsB,CAE3C,IAAI9kI,EAAI8kI,EACRC,EAAY/kI,EAAEyqC,UAAYzqC,EAAEyqC,SAASu6F,YAAchlI,EAAEglI,WAItD,IAAM,IAAI5kI,EAAI,EAAGA,EAAI2kI,EAAUpkI,OAAQP,IAEtC,GAAK2kI,EAAW3kI,GAAI+O,OAASA,EAE5B,OAAO41H,EAAW3kI,GAMpB,OAAO,MAIR6kI,oCAAqC,SAAWn9F,EAAc4oD,EAAKi0C,GAUlE,IAAM,IARFO,KAIAtjF,EAAU,qBAIJxhD,EAAI,EAAGivC,EAAKvH,EAAannC,OAAQP,EAAIivC,EAAIjvC,IAAO,CAEzD,IAAIgnH,EAAct/E,EAAc1nC,GAC5B2nB,EAAQq/F,EAAYj4G,KAAKvD,MAAOg2C,GAEpC,GAAK75B,GAASA,EAAMpnB,OAAS,EAAI,CAEhC,IAEIwkI,EAAwBD,EAFxB/1H,EAAO4Y,EAAO,IAGXo9G,IAEND,EAAyB/1H,GAASg2H,MAInCA,EAAsBx7H,KAAMy9G,IAM9B,IAAIge,KAEJ,IAAM,IAAIj2H,KAAQ+1H,EAEjBE,EAAMz7H,KAAM66E,GAAcigD,8BAA+Bt1H,EAAM+1H,EAAyB/1H,GAAQuhF,EAAKi0C,IAItG,OAAOS,GAKRC,eAAgB,SAAWC,EAAW/+E,GAErC,IAAO++E,EAGN,OADA7jI,QAAQqT,MAAO,yDACR,KAkCR,IAAM,IA9BFywH,EAAmB,SAAWpB,EAAWqB,EAAWC,EAAeC,EAAcC,GAGpF,GAA8B,IAAzBF,EAAc9kI,OAAe,CAEjC,IAAI0iF,KACAC,KAEJE,GAAei9C,YAAagF,EAAepiD,EAAOC,EAAQoiD,GAGpC,IAAjBriD,EAAM1iF,QAEVglI,EAAWh8H,KAAM,IAAIw6H,EAAWqB,EAAWniD,EAAOC,MAQjDmB,KAEAmhD,EAAWN,EAAUn2H,MAAQ,UAE7B1J,EAAW6/H,EAAU3kI,SAAY,EACjC+vF,EAAM40C,EAAU50C,KAAO,GAEvBm1C,EAAkBP,EAAUQ,cAEtBx/G,EAAI,EAAGA,EAAIu/G,EAAgBllI,OAAQ2lB,IAAO,CAEnD,IAAIm/G,EAAgBI,EAAiBv/G,GAAInU,KAGzC,GAAOszH,GAA0C,IAAzBA,EAAc9kI,OAGtC,GAAK8kI,EAAe,GAAI39F,aAAe,CAKtC,IAAM,IAFFi+F,KAEM74F,EAAI,EAAGA,EAAIu4F,EAAc9kI,OAAQusC,IAE1C,GAAKu4F,EAAev4F,GAAIpF,aAEvB,IAAUvhB,EAAI,EAAGA,EAAIk/G,EAAev4F,GAAIpF,aAAannC,OAAQ4lB,IAE5Dw/G,EAAkBN,EAAev4F,GAAIpF,aAAcvhB,KAAU,EAWhE,IAAM,IAAIy/G,KAAmBD,EAAmB,CAK/C,IAAM,IAHF1iD,KACAC,KAEM/8D,EAAI,EAAGA,IAAMk/G,EAAev4F,GAAIpF,aAAannC,SAAW4lB,EAAI,CAErE,IAAI0/G,EAAeR,EAAev4F,GAElCm2C,EAAM15E,KAAMs8H,EAAal4C,MACzBzK,EAAO35E,KAAQs8H,EAAa7e,cAAgB4e,EAAoB,EAAI,GAIrEvhD,EAAO96E,KAAM,IAAIw6E,GAAqB,yBAA2B6hD,EAAkB,IAAK3iD,EAAOC,IAIhG79E,EAAWsgI,EAAiBplI,QAAW+vF,GAAO,OAExC,CAIN,IAAIw1C,EAAW,UAAY3/E,EAAOjgC,GAAInX,KAAO,IAE7Co2H,EACEvhD,GAAqBkiD,EAAW,YAChCT,EAAe,MAAOhhD,GAExB8gD,EACErhD,GAAyBgiD,EAAW,cACpCT,EAAe,MAAOhhD,GAExB8gD,EACEvhD,GAAqBkiD,EAAW,SAChCT,EAAe,MAAOhhD,IAM1B,OAAuB,IAAlBA,EAAO9jF,OAEJ,KAIG,IAAI6jF,GAAeohD,EAAUngI,EAAUg/E,MAQpDvjF,OAAO20F,OAAQrR,GAAcrjF,WAE5BujF,cAAe,WAId,IAAM,IAFoBj/E,EAAW,EAE3BrF,EAAI,EAAGP,EAFJmD,KAAKyhF,OAEU9jF,OAAQP,IAAMP,IAAMO,EAAI,CAEnD,IAAIikI,EAAQrhI,KAAKyhF,OAAQrkF,GAEzBqF,EAAWC,KAAKL,IAAKI,EAAU4+H,EAAMhhD,MAAOghD,EAAMhhD,MAAM1iF,OAAS,IAIlEqC,KAAKyC,SAAWA,GAIjB89H,KAAM,WAEL,IAAM,IAAInjI,EAAI,EAAGA,EAAI4C,KAAKyhF,OAAO9jF,OAAQP,IAExC4C,KAAKyhF,OAAQrkF,GAAImjI,KAAM,EAAGvgI,KAAKyC,UAIhC,OAAOzC,MAIR+gF,SAAU,WAET,IAAM,IAAI3jF,EAAI,EAAGA,EAAI4C,KAAKyhF,OAAO9jF,OAAQP,IAExC4C,KAAKyhF,OAAQrkF,GAAI2jF,WAIlB,OAAO/gF,QAiBT9B,OAAO20F,OAAQlR,GAAexjF,WAE7ByJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEzC,IAAIk4B,EAAQhpC,KAEC,IAAIm+E,GAAYn1C,EAAMo1C,SAC5Bx2E,KAAMwf,EAAK,SAAW+wD,GAE5B5/D,EAAQywB,EAAMhmB,MAAO3Y,KAAK2Y,MAAOm1D,MAE/BwF,EAAY7sE,IAIhBqyH,YAAa,SAAWhkI,GAEvBa,KAAKwnD,SAAWroD,GAIjB6jB,MAAO,SAAWyI,GAIjB,SAAS23G,EAAYj3H,GAQpB,YAN0B4C,IAArBy4C,EAAUr7C,IAEd1N,QAAQ4pC,KAAM,0CAA2Cl8B,GAInDq7C,EAAUr7C,GAVlB,IAAIq7C,EAAWxnD,KAAKwnD,SAchBxlB,EAAW,IAAIg5F,GAAWvvG,EAAKvmB,MAqDnC,QAnDmB6J,IAAd0c,EAAKyF,OAAqB8Q,EAAS9Q,KAAOzF,EAAKyF,WACjCniB,IAAd0c,EAAKtf,OAAqB61B,EAAS71B,KAAOsf,EAAKtf,WAChC4C,IAAf0c,EAAKjjB,OAAsBw5B,EAASx5B,MAAMilG,OAAQhiF,EAAKjjB,YACpCuG,IAAnB0c,EAAK63C,YAA0BthC,EAASshC,UAAY73C,EAAK63C,gBACtCv0D,IAAnB0c,EAAK83C,YAA0BvhC,EAASuhC,UAAY93C,EAAK83C,gBACvCx0D,IAAlB0c,EAAKi3C,UAAyB1gC,EAAS0gC,SAAS+qC,OAAQhiF,EAAKi3C,eAC3C3zD,IAAlB0c,EAAKy3C,UAAyBlhC,EAASkhC,SAASuqC,OAAQhiF,EAAKy3C,eAC1Cn0D,IAAnB0c,EAAK03C,YAA0BnhC,EAASmhC,UAAY13C,EAAK03C,gBACtCp0D,IAAnB0c,EAAKg4C,YAA0BzhC,EAASyhC,UAAYh4C,EAAKg4C,gBAC7B10D,IAA5B0c,EAAKi4C,qBAAmC1hC,EAAS0hC,mBAAqBj4C,EAAKi4C,yBACzD30D,IAAlB0c,EAAKyQ,WAAyB8F,EAAS9F,SAAWzQ,EAAKyQ,eACjCntB,IAAtB0c,EAAKkQ,eAA6BqG,EAASrG,aAAelQ,EAAKkQ,mBACvC5sB,IAAxB0c,EAAKmQ,iBAA+BoG,EAASpG,eAAiBnQ,EAAKmQ,qBAC7C7sB,IAAtB0c,EAAK2X,eAA6BpB,EAASoB,aAAe3X,EAAK2X,mBAClDr0B,IAAb0c,EAAK+V,MAAoBQ,EAASR,IAAM/V,EAAK+V,UAC5BzyB,IAAjB0c,EAAKyX,UAAwBlB,EAASkB,QAAUzX,EAAKyX,cACnCn0B,IAAlB0c,EAAKkU,WAAyBqC,EAASrC,SAAWlU,EAAKkU,eACzC5wB,IAAd0c,EAAKuX,OAAqBhB,EAASgB,KAAOvX,EAAKuX,WAC9Bj0B,IAAjB0c,EAAK4Q,UAAwB2F,EAAS3F,QAAU5Q,EAAK4Q,cAChCttB,IAArB0c,EAAK6X,cAA4BtB,EAASsB,YAAc7X,EAAK6X,kBAC1Cv0B,IAAnB0c,EAAKiV,YAA0BsB,EAAStB,UAAYjV,EAAKiV,gBACtC3xB,IAAnB0c,EAAKgX,YAA0BT,EAASS,UAAYhX,EAAKgX,gBACrC1zB,IAApB0c,EAAKiX,aAA2BV,EAASU,WAAajX,EAAKiX,iBACvC3zB,IAApB0c,EAAKsY,aAA2B/B,EAAS+B,WAAatY,EAAKsY,iBACxCh1B,IAAnB0c,EAAKiZ,YAA0B1C,EAAS0C,UAAYjZ,EAAKiZ,gBAC7B31B,IAA5B0c,EAAKkZ,qBAAmC3C,EAAS2C,mBAAqBlZ,EAAKkZ,yBACjD51B,IAA1B0c,EAAKqrB,mBAAiC9U,EAAS8U,iBAAmBrrB,EAAKqrB,uBAC5C/nC,IAA3B0c,EAAKsrB,oBAAkC/U,EAAS+U,kBAAoBtrB,EAAKsrB,wBACvDhoC,IAAlB0c,EAAKoZ,WAAyB7C,EAAS6C,SAAWpZ,EAAKoZ,eACjC91B,IAAtB0c,EAAKqZ,eAA6B9C,EAAS8C,aAAerZ,EAAKqZ,mBAIjD/1B,IAAd0c,EAAKhmB,OAAqBu8B,EAASv8B,KAAOgmB,EAAKhmB,WACtBsJ,IAAzB0c,EAAK21B,kBAAgCpf,EAASof,gBAAkB31B,EAAK21B,sBAIxDryC,IAAb0c,EAAKpP,MAAoB2lB,EAAS3lB,IAAM+mH,EAAY33G,EAAKpP,WAEvCtN,IAAlB0c,EAAKma,WAET5D,EAAS4D,SAAWw9F,EAAY33G,EAAKma,UACrC5D,EAASsB,aAAc,QAIFv0B,IAAjB0c,EAAKgyB,UAAwBzb,EAASyb,QAAU2lF,EAAY33G,EAAKgyB,eAC9C1uC,IAAnB0c,EAAK23C,YAA0BphC,EAASohC,UAAY33C,EAAK23C,gBAEtCr0D,IAAnB0c,EAAKiyB,YAA0B1b,EAAS0b,UAAY0lF,EAAY33G,EAAKiyB,iBAChD3uC,IAArB0c,EAAK43C,YAA4B,CAErC,IAAIA,EAAc53C,EAAK43C,aAEe,IAAjCh4D,MAAMgX,QAASghD,KAInBA,GAAgBA,EAAaA,IAI9BrhC,EAASqhC,aAAc,IAAI9yC,GAAUqnC,UAAWyL,GA4BjD,YAxB8Bt0D,IAAzB0c,EAAKoa,kBAAgC7D,EAAS6D,gBAAkBu9F,EAAY33G,EAAKoa,uBACtD92B,IAA3B0c,EAAKqa,oBAAkC9D,EAAS8D,kBAAoBra,EAAKqa,wBAC/C/2B,IAA1B0c,EAAKsa,mBAAiC/D,EAAS+D,iBAAmBta,EAAKsa,uBAEjDh3B,IAAtB0c,EAAKo1B,eAA6B7e,EAAS6e,aAAeuiF,EAAY33G,EAAKo1B,oBACrD9xC,IAAtB0c,EAAKq1B,eAA6B9e,EAAS8e,aAAesiF,EAAY33G,EAAKq1B,oBAEtD/xC,IAArB0c,EAAKm1B,cAA4B5e,EAAS4e,YAAcwiF,EAAY33G,EAAKm1B,mBAC9C7xC,IAA3B0c,EAAKk3C,oBAAkC3gC,EAAS2gC,kBAAoBl3C,EAAKk3C,wBAEpD5zD,IAArB0c,EAAK+qB,cAA4BxU,EAASwU,YAAc4sF,EAAY33G,EAAK+qB,mBAEzDznC,IAAhB0c,EAAKgrB,SAAuBzU,EAASyU,OAAS2sF,EAAY33G,EAAKgrB,cAEzC1nC,IAAtB0c,EAAKmrB,eAA6B5U,EAAS4U,aAAenrB,EAAKmrB,mBAE7C7nC,IAAlB0c,EAAK2qB,WAAyBpU,EAASoU,SAAWgtF,EAAY33G,EAAK2qB,gBACxCrnC,IAA3B0c,EAAK4qB,oBAAkCrU,EAASqU,kBAAoB5qB,EAAK4qB,wBAE1DtnC,IAAf0c,EAAK6qB,QAAsBtU,EAASsU,MAAQ8sF,EAAY33G,EAAK6qB,aACrCvnC,IAAxB0c,EAAK8qB,iBAA+BvU,EAASuU,eAAiB9qB,EAAK8qB,qBAE9CxnC,IAArB0c,EAAK41B,cAA4Brf,EAASqf,YAAc+hF,EAAY33G,EAAK41B,cAEvErf,KAgBT9jC,OAAO20F,OAAQjR,GAAqBzjF,WAEnCyJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEzC,IAAIk4B,EAAQhpC,KAEC,IAAIm+E,GAAYn1C,EAAMo1C,SAC5Bx2E,KAAMwf,EAAK,SAAW+wD,GAE5B5/D,EAAQywB,EAAMhmB,MAAO3Y,KAAK2Y,MAAOm1D,MAE/BwF,EAAY7sE,IAIhBkS,MAAO,SAAWyI,GAEjB,IAAIgc,EAAW,IAAIqM,GAEfrrC,EAAQgjB,EAAKjrB,KAAKiI,MAEtB,QAAesG,IAAVtG,EAAsB,CAEtB46H,EAAa,IAAIC,GAAc76H,EAAMvD,MAAQuD,EAAMgY,OACvDgnB,EAASkO,SAAU,IAAIhD,GAAiB0wF,EAAY,IAIrD,IAAIvnG,EAAarQ,EAAKjrB,KAAKs7B,WAE3B,IAAM,IAAI79B,KAAO69B,EAAa,CAE7B,IAAIoS,EAAYpS,EAAY79B,GACxBolI,EAAa,IAAIC,GAAcp1F,EAAUhpC,MAAQgpC,EAAUztB,OAE/DgnB,EAASmO,aAAc33C,EAAK,IAAI00C,GAAiB0wF,EAAYn1F,EAAU0E,SAAU1E,EAAU2E,aAI5F,IAAI5I,EAASxe,EAAKjrB,KAAKypC,QAAUxe,EAAKjrB,KAAK+iI,WAAa93G,EAAKjrB,KAAKgjI,QAElE,QAAgBz0H,IAAXk7B,EAEJ,IAAM,IAAI7sC,EAAI,EAAGP,EAAIotC,EAAOtsC,OAAQP,IAAMP,IAAMO,EAAI,CAEnD,IAAIgtC,EAAQH,EAAQ7sC,GAEpBqqC,EAASgO,SAAUrL,EAAM9oC,MAAO8oC,EAAMvpC,MAAOupC,EAAME,eAMrD,IAAI6H,EAAiB1mB,EAAKjrB,KAAK2xC,eAE/B,QAAwBpjC,IAAnBojC,EAA+B,CAEnC,IAAIjM,EAAS,IAAIxS,OAEc3kB,IAA1BojC,EAAejM,QAEnBA,EAAO0xB,UAAWzlB,EAAejM,QAIlCuB,EAAS0K,eAAiB,IAAIlM,GAAQC,EAAQiM,EAAehM,QAI9D,OAAOsB,KAMT,IAAI67F,IACHx0F,UAAWA,UACXjtC,WAAYA,WAEZoxC,kBAAgD,oBAAtBA,kBAAoCA,kBAAoBpxC,WAClF4sC,WAAYA,WACZzU,YAAaA,YACbnF,WAAYA,WACZ8Z,YAAaA,YACbla,aAAcA,aACd+Z,aAAcA,cAefqzC,GAAO4hD,UAENC,YAEAj5G,IAAK,SAAWk5G,EAAOxH,GAEtBn8H,KAAK0jI,SAAS/8H,KAAMg9H,EAAOxH,IAI5B17H,IAAK,SAAW06H,GAIf,IAAM,IAFFuI,EAAW1jI,KAAK0jI,SAEVtmI,EAAI,EAAGI,EAAIkmI,EAAS/lI,OAAQP,EAAII,EAAGJ,GAAK,EAAI,CAErD,IAAIumI,EAAQD,EAAUtmI,GAClB++H,EAASuH,EAAUtmI,EAAI,GAE3B,GAAKumI,EAAMv3H,KAAM+uH,GAEhB,OAAOgB,EAMT,OAAO,OAMTj+H,OAAO20F,OAAQhR,GAAO1jF,WAErBu+H,iBAAa3tH,EAEb60H,eAAgB,SAAWx8G,GAE1B,IAAIrC,EAAQqC,EAAInb,MAAO,KAEvB,OAAsB,IAAjB8Y,EAAMpnB,OAAsB,MAEjConB,EAAM2H,MAEC3H,EAAM3J,KAAM,KAAQ,MAI5ByoH,cAAe,SAAW7kB,EAAW78B,EAAau6C,GAIjD,IAAM,IAFFj8G,KAEMrjB,EAAI,EAAGA,EAAI4hH,EAAUrhH,SAAWP,EAEzCqjB,EAAOrjB,GAAM4C,KAAK8jI,eAAgB9kB,EAAW5hH,GAAK+kF,EAAau6C,GAIhE,OAAOj8G,GAIRqjH,eAAgB,WAEf,IAAIC,GACH/2E,WAAYA,GACZjqB,eAAgBA,GAChBqqB,iBAAkBA,GAClBO,oBAAqBA,GACrBI,iBAAkBA,GAClBd,eAAgBA,IAGbzkD,EAAQ,IAAIixB,EACZuqG,EAAgB,IAAItlD,GACpBulD,EAAiB,IAAItiD,GAEzB,OAAO,SAAyBp+D,EAAG4+D,EAAau6C,GAM/C,SAASH,EAAahvH,EAAMukB,EAAQD,EAAQ6kE,EAAM1lE,GAEjD,IAGI8B,EAHAoxG,EAAW/hD,EAAc50E,EACzB4uH,EAASt6C,GAAO4hD,SAAShjI,IAAKyjI,GAIlB,OAAX/H,EAEJrpG,EAAUqpG,EAAOv0H,KAAMs8H,IAIvBF,EAAcrH,eAAgBD,GAC9B5pG,EAAUkxG,EAAcp8H,KAAMs8H,SAIfn1H,IAAX+iB,IAEJgB,EAAQhB,OAAO8lC,UAAW9lC,GAEL,IAAhBA,EAAQ,KAAYgB,EAAQlC,MAAQ00C,IACpB,IAAhBxzC,EAAQ,KAAYgB,EAAQjC,MAAQy0C,UAI1Bv2D,IAAX8iB,GAEJiB,EAAQjB,OAAO+lC,UAAW/lC,QAIb9iB,IAAT2nF,IAEe,WAAdA,EAAM,KAAmB5jE,EAAQlC,MAAQ00C,IAC3B,WAAdoxB,EAAM,KAAmB5jE,EAAQlC,MAAQ40C,IAE3B,WAAdkxB,EAAM,KAAmB5jE,EAAQjC,MAAQy0C,IAC3B,WAAdoxB,EAAM,KAAmB5jE,EAAQjC,MAAQ20C,UAI3Bz2D,IAAfiiB,IAEJ8B,EAAQ9B,WAAaA,GAItB,IAAIE,EAAOC,GAAMC,eAIjB,OAFAo2B,EAAUt2B,GAAS4B,EAEZ5B,EAvDR,IAAIs2B,KA6DA/7B,GACHyF,KAAMC,GAAMC,eACZlsB,KAAM,uBAGP,IAAM,IAAIiH,KAAQoX,EAAI,CAErB,IAAIpkB,EAAQokB,EAAGpX,GAEf,OAASA,GAER,IAAK,WACL,IAAK,WACL,IAAK,iBACL,IAAK,eACJ,MACD,IAAK,UACJsf,EAAKtf,KAAOhN,EACZ,MACD,IAAK,WACJssB,EAAKkU,SAAWokG,EAAc5kI,GAC9B,MACD,IAAK,eACL,IAAK,aACJV,QAAQ4pC,KAAM,+BAAgCl8B,EAAM,2BACpD,MACD,IAAK,eACJsf,EAAKjjB,MAAQA,EAAMovD,UAAWz4D,GAAQgvG,SACtC,MACD,IAAK,gBACJ1iF,EAAKy3C,SAAW16D,EAAMovD,UAAWz4D,GAAQgvG,SACzC,MACD,IAAK,gBACJ1iF,EAAKi3C,SAAWl6D,EAAMovD,UAAWz4D,GAAQgvG,SACzC,MACD,IAAK,eACJ1iF,EAAK03C,UAAYhkE,EACjB,MACD,IAAK,UACyB,UAAxBA,EAAMsK,gBAA4BgiB,EAAKvmB,KAAO,qBACtB,UAAxB/F,EAAMsK,gBAA4BgiB,EAAKvmB,KAAO,qBACtB,aAAxB/F,EAAMsK,gBAA+BgiB,EAAKvmB,KAAO,wBACtD,MACD,IAAK,aACJumB,EAAKpP,IAAMkgH,EAAap9H,EAAOokB,EAAE4gH,iBAAkB5gH,EAAE6gH,iBAAkB7gH,EAAE8gH,eAAgB9gH,EAAE+gH,sBAC3F,MACD,IAAK,mBACL,IAAK,mBACL,IAAK,iBACL,IAAK,uBACJ,MACD,IAAK,cACJ74G,EAAKm1B,YAAc27E,EAAap9H,EAAOokB,EAAEghH,kBAAmBhhH,EAAEihH,kBAAmBjhH,EAAEkhH,gBAAiBlhH,EAAEmhH,uBACtG,MACD,IAAK,oBACL,IAAK,oBACL,IAAK,kBACL,IAAK,wBACJ,MACD,IAAK,WACJj5G,EAAK2qB,SAAWmmF,EAAap9H,EAAOokB,EAAEohH,eAAgBphH,EAAEqhH,eAAgBrhH,EAAEshH,aAActhH,EAAEuhH,oBAC1F,MACD,IAAK,iBACL,IAAK,iBACL,IAAK,eACL,IAAK,qBACJ,MACD,IAAK,QACJr5G,EAAK6qB,MAAQimF,EAAap9H,EAAOokB,EAAEwhH,YAAaxhH,EAAEyhH,YAAazhH,EAAE0hH,UAAW1hH,EAAE2hH,iBAC9E,MACD,IAAK,cACL,IAAK,cACL,IAAK,YACL,IAAK,kBACJ,MACD,IAAK,UACJz5G,EAAKgyB,QAAU8+E,EAAap9H,EAAOokB,EAAE4hH,cAAe5hH,EAAE6hH,cAAe7hH,EAAE8hH,YAAa9hH,EAAE+hH,mBACtF,MACD,IAAK,eACJ75G,EAAK23C,UAAYjkE,EACjB,MACD,IAAK,gBACL,IAAK,gBACL,IAAK,cACL,IAAK,oBACJ,MACD,IAAK,YACJssB,EAAKiyB,UAAY6+E,EAAap9H,EAAOokB,EAAEgiH,gBAAiBhiH,EAAEiiH,gBAAiBjiH,EAAEkiH,cAAeliH,EAAEmiH,qBAC9F,MACD,IAAK,kBACJj6G,EAAK43C,aAAgBlkE,EAAOA,GAC5B,MACD,IAAK,kBACL,IAAK,kBACL,IAAK,gBACL,IAAK,sBACJ,MACD,IAAK,cACJssB,EAAK+qB,YAAc+lF,EAAap9H,EAAOokB,EAAEoiH,kBAAmBpiH,EAAEqiH,kBAAmBriH,EAAEsiH,gBAAiBtiH,EAAEuiH,uBACtG,MACD,IAAK,oBACL,IAAK,oBACL,IAAK,kBACL,IAAK,wBACJ,MACD,IAAK,eACJr6G,EAAKq1B,aAAey7E,EAAap9H,EAAOokB,EAAEwiH,mBAAoBxiH,EAAEyiH,mBAAoBziH,EAAE0iH,iBAAkB1iH,EAAE2iH,wBAC1G,MACD,IAAK,qBACL,IAAK,qBACL,IAAK,mBACL,IAAK,yBACJ,MACD,IAAK,eACJz6G,EAAKo1B,aAAe07E,EAAap9H,EAAOokB,EAAE4iH,mBAAoB5iH,EAAE6iH,mBAAoB7iH,EAAE8iH,iBAAkB9iH,EAAE+iH,wBAC1G,MACD,IAAK,qBACL,IAAK,qBACL,IAAK,mBACL,IAAK,yBACJ,MACD,IAAK,WACJ76G,EAAKma,SAAW22F,EAAap9H,EAAOokB,EAAEgjH,eAAgBhjH,EAAEijH,eAAgBjjH,EAAEkjH,aAAcljH,EAAEmjH,oBAC1F,MACD,IAAK,iBACL,IAAK,iBACL,IAAK,eACL,IAAK,qBACJ,MACD,IAAK,YACJj7G,EAAKuX,KAAOoG,GACZ,MACD,IAAK,cACJ3d,EAAKuX,KAAOkG,GACZ,MACD,IAAK,eACJzqC,QAAQ4pC,KAAM,yEACd5c,EAAK4Q,QAAUl9B,EACf,MACD,IAAK,YACL,IAAK,aACL,IAAK,aACL,IAAK,UACL,IAAK,eACL,IAAK,cACL,IAAK,UACL,IAAK,YACJssB,EAAMtf,GAAShN,EACf,MACD,IAAK,gBACW,IAAVA,IAAiBssB,EAAK2X,aAAeyrD,IAC3B,SAAV1vF,IAAmBssB,EAAK2X,aAAe6sD,IAC5C,MACD,QACCxxF,QAAQqT,MAAO,2CAA4C3F,EAAMhN,IAcpE,MAPmB,sBAAdssB,EAAKvmB,aAAsCumB,EAAKi3C,SAClC,sBAAdj3C,EAAKvmB,aAAsCumB,EAAKy3C,SAEhDz3C,EAAK4Q,QAAU,IAAI5Q,EAAK6X,aAAc,GAE3C2gG,EAAed,YAAa37E,GAErBy8E,EAAejhH,MAAOyI,IAxPf,KAoRjBvtB,OAAO20F,OAAQ5Q,GAAW9jF,WAEzByJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEzC,IAAIk4B,EAAQhpC,KAERmiF,EAAcniF,KAAKmiF,aAA6C,iBAArBniF,KAAKmiF,YAA6BniF,KAAKmiF,YAAcN,GAAO1jF,UAAUylI,eAAgBx8G,GAEjI+0G,EAAS,IAAIh+C,GAAYn+E,KAAKo+E,SAClC+9C,EAAOF,mBAAoBj8H,KAAKqY,iBAChC8jH,EAAOv0H,KAAMwf,EAAK,SAAW+wD,GAE5B,IAAI1sD,EAAOphB,KAAK2Y,MAAOm1D,GACnBqe,EAAW/qE,EAAK+qE,SAEpB,QAAkBznF,IAAbynF,EAAyB,CAE7B,IAAItxF,EAAOsxF,EAAStxF,KAEpB,QAAc6J,IAAT7J,EAAqB,CAEzB,GAA4B,WAAvBA,EAAKuE,cAGT,YADAhL,QAAQqT,MAAO,qBAAuBsV,EAAM,sDAK7C,GAA4B,UAAvBliB,EAAKuE,cAGT,YADAhL,QAAQqT,MAAO,qBAAuBsV,EAAM,sDAS/C,IAAIkgB,EAAS0B,EAAMhmB,MAAOyI,EAAM02D,GAChC5pE,EAAQ+uB,EAAOG,SAAUH,EAAO03E,YAE9BrhC,EAAY7sE,IAIhB61H,eAAgB,SAAWxnI,GAE1Ba,KAAKmiF,YAAchjF,GAIpB6jB,MAAO,WAEN,SAAS4jH,EAAYn7G,EAAMgc,GAE1B,SAASo/F,EAAU1nI,EAAOwX,GAEzB,OAAOxX,EAAU,GAAKwX,EAIvB,IAAIvZ,EAAG+M,EAAG28H,EAETj1G,EAAQk1G,EAERC,EAAYC,EAAaC,EAAS58F,EAElCplC,EACAiiI,EACAC,EACAvjB,EACAC,EAAeC,EACfC,EAAcC,EAEdloF,EAAQyR,EAAM65F,EAAOC,EAAOt5C,EAAK1nD,EAEjCihG,EAAStrG,EAETlC,EAAQtO,EAAKsO,MACbD,EAAWrO,EAAKqO,SAChB4Z,EAAUjoB,EAAKioB,QACfzpC,EAASwhB,EAAKxhB,OAEdqyB,EAAQ7Q,EAAK6Q,MAEbkrG,EAAY,EAGb,QAAkBz4H,IAAb0c,EAAKkoB,IAAoB,CAI7B,IAAMv2C,EAAI,EAAGA,EAAIquB,EAAKkoB,IAAIh2C,OAAQP,IAE5BquB,EAAKkoB,IAAKv2C,GAAIO,QAAS6pI,IAI7B,IAAMpqI,EAAI,EAAGA,EAAIoqI,EAAWpqI,IAE3BqqC,EAASqK,cAAe10C,MAS1B,IAHAy0B,EAAS,EACTk1G,EAAUjtG,EAASn8B,OAEXk0B,EAASk1G,IAEhBhrG,EAAS,IAAIrI,GAENlD,EAAIsJ,EAAUjI,KAAcyK,EACnCP,EAAO3Y,EAAI0W,EAAUjI,KAAcyK,EACnCP,EAAOzJ,EAAIwH,EAAUjI,KAAcyK,EAEnCmL,EAAS3N,SAASnzB,KAAMo1B,GAOzB,IAHAlK,EAAS,EACTk1G,EAAUhtG,EAAMp8B,OAERk0B,EAASk1G,GAchB,GAZA7hI,EAAO60B,EAAOlI,KAEds1G,EAASN,EAAU3hI,EAAM,GACzBkiI,EAAcP,EAAU3hI,EAAM,GAC9B2+G,EAAkBgjB,EAAU3hI,EAAM,GAClC4+G,EAAgB+iB,EAAU3hI,EAAM,GAChC6+G,EAAsB8iB,EAAU3hI,EAAM,GACtC8+G,EAAe6iB,EAAU3hI,EAAM,GAC/B++G,EAAqB4iB,EAAU3hI,EAAM,GAIhCiiI,EAAS,CA0Bb,GAxBAE,EAAQ,IAAI71F,GACZ61F,EAAMnqI,EAAI68B,EAAOlI,GACjBw1G,EAAM7/H,EAAIuyB,EAAOlI,EAAS,GAC1Bw1G,EAAM9+H,EAAIwxB,EAAOlI,EAAS,GAE1By1G,EAAQ,IAAI91F,GACZ81F,EAAMpqI,EAAI68B,EAAOlI,EAAS,GAC1By1G,EAAM9/H,EAAIuyB,EAAOlI,EAAS,GAC1By1G,EAAM/+H,EAAIwxB,EAAOlI,EAAS,GAE1BA,GAAU,EAELu1G,IAEJ98F,EAAgBvQ,EAAOlI,KACvBw1G,EAAM/8F,cAAgBA,EACtBg9F,EAAMh9F,cAAgBA,GAMvBw8F,EAAKr/F,EAAS1N,MAAMp8B,OAEfkmH,EAEJ,IAAMzmH,EAAI,EAAGA,EAAIoqI,EAAWpqI,IAO3B,IALAmqI,EAAU97G,EAAKkoB,IAAKv2C,GAEpBqqC,EAASqK,cAAe10C,GAAK0pI,MAC7Br/F,EAASqK,cAAe10C,GAAK0pI,EAAK,MAE5B38H,EAAI,EAAGA,EAAI,EAAGA,IAOnB8xB,EAAK,IAAI1L,EAHLg3G,EAAmB,GAFvBL,EAAUntG,EAAOlI,OAGb01G,EAAmB,EAAVL,EAAc,IAIhB,IAAN/8H,GAAUs9B,EAASqK,cAAe10C,GAAK0pI,GAAKngI,KAAMs1B,GAC5C,IAAN9xB,GAAUs9B,EAASqK,cAAe10C,GAAK0pI,EAAK,GAAIngI,KAAMs1B,GAsB9D,GAdK6nF,IAEJmjB,EAAmC,EAArBltG,EAAOlI,KAErBw1G,EAAM/gG,OAAO5hC,IACZgvC,EAASuzF,KACTvzF,EAASuzF,KACTvzF,EAASuzF,IAGVK,EAAMhhG,OAAO7hC,KAAM4iI,EAAM/gG,SAIrBy9E,EAEJ,IAAM3mH,EAAI,EAAGA,EAAI,EAAGA,IAEnB6pI,EAAmC,EAArBltG,EAAOlI,KAErByU,EAAS,IAAI5S,EACZggB,EAASuzF,KACTvzF,EAASuzF,KACTvzF,EAASuzF,IAIC,IAAN7pI,GAAUiqI,EAAM31F,cAAc/qC,KAAM2/B,GAC9B,IAANlpC,GAAUkqI,EAAM51F,cAAc/qC,KAAM2/B,GAkB3C,GAXK09E,IAGJh2B,EAAM/jF,EADN+8H,EAAajtG,EAAOlI,MAGpBw1G,EAAM7+H,MAAMilG,OAAQzf,GACpBs5C,EAAM9+H,MAAMilG,OAAQzf,IAKhBi2B,EAEJ,IAAM7mH,EAAI,EAAGA,EAAI,EAAGA,IAGnB4wF,EAAM/jF,EADN+8H,EAAajtG,EAAOlI,MAGT,IAANz0B,GAAUiqI,EAAMjkG,aAAaz8B,KAAM,IAAI8yB,EAAOu0D,IACxC,IAAN5wF,GAAUkqI,EAAMlkG,aAAaz8B,KAAM,IAAI8yB,EAAOu0D,IAMrDvmD,EAAS1N,MAAMpzB,KAAM0gI,GACrB5/F,EAAS1N,MAAMpzB,KAAM2gI,OAEf,CAkBN,GAhBA95F,EAAO,IAAIgE,GACXhE,EAAKtwC,EAAI68B,EAAOlI,KAChB2b,EAAKhmC,EAAIuyB,EAAOlI,KAChB2b,EAAKjlC,EAAIwxB,EAAOlI,KAEXu1G,IAEJ98F,EAAgBvQ,EAAOlI,KACvB2b,EAAKlD,cAAgBA,GAMtBw8F,EAAKr/F,EAAS1N,MAAMp8B,OAEfkmH,EAEJ,IAAMzmH,EAAI,EAAGA,EAAIoqI,EAAWpqI,IAM3B,IAJAmqI,EAAU97G,EAAKkoB,IAAKv2C,GAEpBqqC,EAASqK,cAAe10C,GAAK0pI,MAEvB38H,EAAI,EAAGA,EAAI,EAAGA,IAOnB8xB,EAAK,IAAI1L,EAHLg3G,EAAmB,GAFvBL,EAAUntG,EAAOlI,OAGb01G,EAAmB,EAAVL,EAAc,IAI3Bz/F,EAASqK,cAAe10C,GAAK0pI,GAAKngI,KAAMs1B,GAoB3C,GAZK6nF,IAEJmjB,EAAmC,EAArBltG,EAAOlI,KAErB2b,EAAKlH,OAAO5hC,IACXgvC,EAASuzF,KACTvzF,EAASuzF,KACTvzF,EAASuzF,KAKNljB,EAEJ,IAAM3mH,EAAI,EAAGA,EAAI,EAAGA,IAEnB6pI,EAAmC,EAArBltG,EAAOlI,KAErByU,EAAS,IAAI5S,EACZggB,EAASuzF,KACTvzF,EAASuzF,KACTvzF,EAASuzF,IAGVz5F,EAAKkE,cAAc/qC,KAAM2/B,GAe3B,GARK09E,IAEJgjB,EAAajtG,EAAOlI,KACpB2b,EAAKhlC,MAAMilG,OAAQxjG,EAAQ+8H,KAKvB/iB,EAEJ,IAAM7mH,EAAI,EAAGA,EAAI,EAAGA,IAEnB4pI,EAAajtG,EAAOlI,KACpB2b,EAAKpK,aAAaz8B,KAAM,IAAI8yB,EAAOxvB,EAAQ+8H,KAM7Cv/F,EAAS1N,MAAMpzB,KAAM6mC,IAQxB,SAASi6F,EAAWh8G,EAAMgc,GAEzB,IAAIigG,OAAqD34H,IAA7B0c,EAAKi8G,oBAAsCj8G,EAAKi8G,oBAAsB,EAElG,GAAKj8G,EAAKsmB,YAET,IAAM,IAAI30C,EAAI,EAAGI,EAAIiuB,EAAKsmB,YAAYp0C,OAAQP,EAAII,EAAGJ,GAAKsqI,EAAsB,CAE/E,IAAIl3G,EAAI/E,EAAKsmB,YAAa30C,GACtBgmB,EAAMskH,EAAsB,EAAMj8G,EAAKsmB,YAAa30C,EAAI,GAAM,EAC9Dk1B,EAAMo1G,EAAsB,EAAMj8G,EAAKsmB,YAAa30C,EAAI,GAAM,EAC9Dm1B,EAAMm1G,EAAsB,EAAMj8G,EAAKsmB,YAAa30C,EAAI,GAAM,EAElEqqC,EAASsK,YAAYprC,KAAM,IAAI0rB,EAAS7B,EAAGpN,EAAGkP,EAAGC,IAMnD,GAAK9G,EAAKumB,YAET,IAAM,IAAI50C,EAAI,EAAGI,EAAIiuB,EAAKumB,YAAYr0C,OAAQP,EAAII,EAAGJ,GAAKsqI,EAAsB,CAE/E,IAAIxqI,EAAIuuB,EAAKumB,YAAa50C,GACtBoK,EAAMkgI,EAAsB,EAAMj8G,EAAKumB,YAAa50C,EAAI,GAAM,EAC9DmL,EAAMm/H,EAAsB,EAAMj8G,EAAKumB,YAAa50C,EAAI,GAAM,EAC9DimB,EAAMqkH,EAAsB,EAAMj8G,EAAKumB,YAAa50C,EAAI,GAAM,EAElEqqC,EAASuK,YAAYrrC,KAAM,IAAI0rB,EAASn1B,EAAGsK,EAAGe,EAAG8a,IAMnDokB,EAAS8b,MAAQ93B,EAAK83B,MAEjB9b,EAAS8b,OAAS9b,EAAS8b,MAAM5lD,OAAS,IAAO8pC,EAASsK,YAAYp0C,SAAW8pC,EAASuK,YAAYr0C,QAAU8pC,EAASuK,YAAYr0C,SAAW8pC,EAAS3N,SAASn8B,SAEtKc,QAAQ4pC,KAAM,sCAAwCZ,EAAS3N,SAASn8B,OAAS,mBAChF8pC,EAASuK,YAAYr0C,OAAS,uBAAyB8pC,EAASsK,YAAYp0C,OAAS,mBAMxF,SAASgqI,EAAel8G,EAAMgc,GAE7B,IAAInL,EAAQ7Q,EAAK6Q,MAEjB,QAA2BvtB,IAAtB0c,EAAKqZ,aAET,IAAM,IAAI1nC,EAAI,EAAGI,EAAIiuB,EAAKqZ,aAAannC,OAAQP,EAAII,EAAGJ,IAAO,CAE5DqqC,EAAS3C,aAAc1nC,MACvBqqC,EAAS3C,aAAc1nC,GAAI+O,KAAOsf,EAAKqZ,aAAc1nC,GAAI+O,KACzDs7B,EAAS3C,aAAc1nC,GAAI08B,YAK3B,IAAM,IAHF8tG,EAAcngG,EAAS3C,aAAc1nC,GAAI08B,SACzC+tG,EAAcp8G,EAAKqZ,aAAc1nC,GAAI08B,SAE/B1vB,EAAI,EAAG82G,EAAK2mB,EAAYlqI,OAAQyM,EAAI82G,EAAI92G,GAAK,EAAI,CAE1D,IAAI2xB,EAAS,IAAIrI,EACjBqI,EAAOvL,EAAIq3G,EAAaz9H,GAAMkyB,EAC9BP,EAAO3Y,EAAIykH,EAAaz9H,EAAI,GAAMkyB,EAClCP,EAAOzJ,EAAIu1G,EAAaz9H,EAAI,GAAMkyB,EAElCsrG,EAAYjhI,KAAMo1B,IAQrB,QAA0BhtB,IAArB0c,EAAKq8G,aAA6Br8G,EAAKq8G,YAAYnqI,OAAS,EAAI,CAEpEc,QAAQ4pC,KAAM,mFAKd,IAAM,IAHFtO,EAAQ0N,EAAS1N,MACjB+tG,EAAcr8G,EAAKq8G,YAAa,GAAI79H,OAE9B7M,EAAI,EAAGI,EAAIu8B,EAAMp8B,OAAQP,EAAII,EAAGJ,IAEzC28B,EAAO38B,GAAIoL,MAAMovD,UAAWkwE,EAAiB,EAAJ1qI,IAQ5C,SAAS2qI,EAAiBt8G,EAAMgc,GAE/B,IAAIugG,KAGAhG,UAEoBjzH,IAAnB0c,EAAK62G,WAETN,EAAWr7H,KAAM8kB,EAAK62G,gBAIEvzH,IAApB0c,EAAKu2G,aAEJv2G,EAAKu2G,WAAWrkI,OAEpBqkI,EAAaA,EAAW57H,OAAQqlB,EAAKu2G,YAIrCA,EAAWr7H,KAAM8kB,EAAKu2G,aAMxB,IAAM,IAAI5kI,EAAI,EAAGA,EAAI4kI,EAAWrkI,OAAQP,IAAO,CAE9C,IAAImsF,EAAO/H,GAAc6gD,eAAgBL,EAAY5kI,GAAKqqC,EAAS8b,OAC9DgmC,GAAOy+C,EAAiBrhI,KAAM4iF,GAKpC,GAAK9hD,EAAS3C,aAAe,CAG5B,IAAImjG,EAAsBzmD,GAAcygD,oCAAqCx6F,EAAS3C,aAAc,IACpGkjG,EAAmBA,EAAiB5hI,OAAQ6hI,GAIxCD,EAAiBrqI,OAAS,IAAI8pC,EAASu6F,WAAagG,GAI1D,OAAO,SAAWv8G,EAAM02D,QAEJpzE,IAAd0c,EAAKjrB,OAGTirB,EAAOA,EAAKjrB,WAIOuO,IAAf0c,EAAK6Q,MAET7Q,EAAK6Q,MAAQ,EAAM7Q,EAAK6Q,MAIxB7Q,EAAK6Q,MAAQ,EAId,IAAImL,EAAW,IAAIoK,GAUnB,OARA+0F,EAAYn7G,EAAMgc,GAClBggG,EAAWh8G,EAAMgc,GACjBkgG,EAAel8G,EAAMgc,GACrBsgG,EAAiBt8G,EAAMgc,GAEvBA,EAASk0C,qBACTl0C,EAAS20E,6BAEertG,IAAnB0c,EAAKuzF,WAAqD,IAA1BvzF,EAAKuzF,UAAUrhH,QAE1C8pC,SAAUA,IAMVA,SAAUA,EAAUu3E,UAFbn9B,GAAO1jF,UAAU0lI,cAAep4G,EAAKuzF,UAAW78B,EAAaniF,KAAK08H,eA9d9E,KAqfRx+H,OAAO20F,OAAQ3Q,GAAa/jF,WAE3ByJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEf,KAArB9Q,KAAKmiF,cAETniF,KAAKmiF,YAAc/6D,EAAIzjB,UAAW,EAAGyjB,EAAI8gH,YAAa,KAAQ,IAI/D,IAAIl/F,EAAQhpC,KAEC,IAAIm+E,GAAYn1C,EAAMo1C,SAC5Bx2E,KAAMwf,EAAK,SAAW+wD,GAE5B,IAAI1sD,EAAO,KAEX,IAECA,EAAOphB,KAAK2Y,MAAOm1D,GAElB,MAAQrmE,GAMT,YAJiB/C,IAAZ+B,GAAwBA,EAASgB,QAEtCrT,QAAQqT,MAAO,mCAAsCsV,EAAM,IAAKtV,EAAMvH,SAMvE,IAAIisF,EAAW/qE,EAAK+qE,cAEFznF,IAAbynF,QAA4CznF,IAAlBynF,EAAStxF,MAAsD,aAAhCsxF,EAAStxF,KAAKuE,cAO5Eu/B,EAAMhmB,MAAOyI,EAAMlT,GALlB9Z,QAAQqT,MAAO,kCAAqCsV,EAAM,oCAOzDu2D,EAAY7sE,IAIhB61H,eAAgB,SAAWxnI,GAE1Ba,KAAKmiF,YAAchjF,GAIpBw9H,eAAgB,SAAWx9H,GAE1Ba,KAAK08H,YAAcv9H,GAIpB6jB,MAAO,SAAWyI,EAAMlT,GAEvB,IAAIgiC,EAAav6C,KAAKmoI,gBAAiB18G,EAAK8uB,YAExCvmB,EAASh0B,KAAKooI,YAAa38G,EAAKuI,OAAQ,gBAE3BjlB,IAAXwJ,GAAuBA,EAAQ+uB,KAIjCkgB,EAAWxnD,KAAKqoI,cAAe58G,EAAK+7B,SAAUxzB,GAC9CgrF,EAAYh/G,KAAKsoI,eAAgB78G,EAAKuzF,UAAWx3D,GAEjDlgB,EAAStnC,KAAKuoI,YAAa98G,EAAK6b,OAAQiT,EAAYykE,GAcxD,OAZKvzF,EAAKu2G,aAET16F,EAAO06F,WAAahiI,KAAK+nI,gBAAiBt8G,EAAKu2G,kBAI3BjzH,IAAhB0c,EAAKuI,QAA+C,IAAvBvI,EAAKuI,OAAOr2B,aAE7BoR,IAAXwJ,GAAuBA,EAAQ+uB,GAI9BA,GAIR6gG,gBAAiB,SAAW18G,GAE3B,IAAI8uB,KAEJ,QAAcxrC,IAAT0c,EAKJ,IAAM,IAHF+8G,EAAiB,IAAIvmD,GACrBwmD,EAAuB,IAAI7mD,GAErBxkF,EAAI,EAAGI,EAAIiuB,EAAK9tB,OAAQP,EAAII,EAAGJ,IAAO,CAE/C,IAAIqqC,EACAjnC,EAAOirB,EAAMruB,GAEjB,OAASoD,EAAK0E,MAEb,IAAK,gBACL,IAAK,sBAEJuiC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAKiyB,MACLjyB,EAAKkyB,OACLlyB,EAAKyzC,cACLzzC,EAAK0zC,gBAGN,MAED,IAAK,cACL,IAAK,oBACL,IAAK,eAEJzM,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAKiyB,MACLjyB,EAAKkyB,OACLlyB,EAAK29B,MACL39B,EAAKyzC,cACLzzC,EAAK0zC,eACL1zC,EAAK2zC,eAGN,MAED,IAAK,iBACL,IAAK,uBAEJ1M,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAK2lC,OACL3lC,EAAKw5E,SACLx5E,EAAKw4E,WACLx4E,EAAKy4E,aAGN,MAED,IAAK,mBACL,IAAK,yBAEJxxC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAKy7E,UACLz7E,EAAK07E,aACL17E,EAAKkyB,OACLlyB,EAAKk1E,eACLl1E,EAAK0zC,eACL1zC,EAAK27E,UACL37E,EAAKw4E,WACLx4E,EAAKy4E,aAGN,MAED,IAAK,eACL,IAAK,qBAEJxxC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAK2lC,OACL3lC,EAAKkyB,OACLlyB,EAAKk1E,eACLl1E,EAAK0zC,eACL1zC,EAAK27E,UACL37E,EAAKw4E,WACLx4E,EAAKy4E,aAGN,MAED,IAAK,iBACL,IAAK,uBAEJxxC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAK2lC,OACL3lC,EAAKyzC,cACLzzC,EAAK0zC,eACL1zC,EAAKs4E,SACLt4E,EAAKu4E,UACLv4E,EAAKw4E,WACLx4E,EAAKy4E,aAGN,MAED,IAAK,uBACL,IAAK,sBACL,IAAK,qBACL,IAAK,sBAEJxxC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAK2lC,OACL3lC,EAAKwyE,QAGN,MAED,IAAK,eACL,IAAK,qBAEJvrC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAK+4E,YACL/4E,EAAKg5E,YACLh5E,EAAKi5E,cACLj5E,EAAKk5E,YACLl5E,EAAKw4E,WACLx4E,EAAKy4E,aAGN,MAED,IAAK,gBACL,IAAK,sBAEJxxC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAK2lC,OACL3lC,EAAKo2E,KACLp2E,EAAKk1E,eACLl1E,EAAKi1E,gBACLj1E,EAAKo3E,KAGN,MAED,IAAK,oBACL,IAAK,0BAEJnwC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAK2lC,OACL3lC,EAAKo2E,KACLp2E,EAAKi1E,gBACLj1E,EAAKk1E,eACLl1E,EAAK0D,EACL1D,EAAKq2E,GAGN,MAED,IAAK,gBACL,IAAK,sBAEJpvC,EAAW,IAAIozF,GAAYr6H,EAAK0E,MAC/B1E,EAAKkqE,OACLlqE,EAAKw5E,SACLx5E,EAAKs4E,SACLt4E,EAAKu4E,WAGN,MAED,IAAK,iBAEJtxC,EAAWghG,EAAqBzlH,MAAOxiB,GAEvC,MAED,IAAK,WAEJinC,EAAW+gG,EAAexlH,MAAOxiB,EAAMR,KAAKmiF,aAAc16C,SAE1D,MAED,QAEChpC,QAAQ4pC,KAAM,kDAAoD7nC,EAAK0E,KAAO,KAE9E,SAIFuiC,EAASvW,KAAO1wB,EAAK0wB,UAEFniB,IAAdvO,EAAK2L,OAAqBs7B,EAASt7B,KAAO3L,EAAK2L,MAEpDouC,EAAY/5C,EAAK0wB,MAASuW,EAM5B,OAAO8S,GAIR+tF,eAAgB,SAAW78G,EAAM+7B,GAEhC,IAAIw3D,KAEJ,QAAcjwG,IAAT0c,EAAqB,CAEzB,IAAI0wG,EAAS,IAAIx6C,GACjBw6C,EAAOgH,YAAa37E,GAEpB,IAAM,IAAIpqD,EAAI,EAAGI,EAAIiuB,EAAK9tB,OAAQP,EAAII,EAAGJ,IAAO,CAE/C,IAAIoD,EAAOirB,EAAMruB,GAEjB,GAAmB,kBAAdoD,EAAK0E,KAA2B,CAMpC,IAAM,IAFFub,KAEMtW,EAAI,EAAGA,EAAI3J,EAAKw+G,UAAUrhH,OAAQwM,IAE3CsW,EAAM9Z,KAAMw1H,EAAOn5G,MAAOxiB,EAAKw+G,UAAW70G,KAI3C60G,EAAWx+G,EAAK0wB,MAASzQ,OAIzBu+F,EAAWx+G,EAAK0wB,MAASirG,EAAOn5G,MAAOxiB,IAQ1C,OAAOw+G,GAIR+oB,gBAAiB,SAAWt8G,GAI3B,IAAM,IAFFu2G,KAEM5kI,EAAI,EAAGA,EAAIquB,EAAK9tB,OAAQP,IAAO,CAExC,IAAImsF,EAAO/H,GAAcx+D,MAAOyI,EAAMruB,IAEtC4kI,EAAWr7H,KAAM4iF,GAIlB,OAAOy4C,GAIRoG,YAAa,SAAW38G,EAAMlT,GAE7B,IAAIywB,EAAQhpC,KACRg0B,KAmBJ,QAAcjlB,IAAT0c,GAAsBA,EAAK9tB,OAAS,EAAI,CAE5C,IAEIw+H,EAAS,IAAI39C,GAFH,IAAId,GAAgBnlE,IAGlC4jH,EAAOQ,eAAgB38H,KAAK08H,aAE5B,IAAM,IAAIt/H,EAAI,EAAGI,EAAIiuB,EAAK9tB,OAAQP,EAAII,EAAGJ,IAAO,CAE/C,IAAIszB,EAAQjF,EAAMruB,GACdmQ,EAAO,4BAA4BnB,KAAMskB,EAAMtJ,KAAQsJ,EAAMtJ,IAAM4hB,EAAMm5C,YAAczxD,EAAMtJ,IAEjG4M,EAAQtD,EAAMQ,MA7BhB,SAAoB9J,GAInB,OAFA4hB,EAAMo1C,QAAQJ,UAAW52D,GAElB+0G,EAAOv0H,KAAMwf,EAAK,WAExB4hB,EAAMo1C,QAAQH,QAAS72D,SAErBrY,EAAW,WAEbi6B,EAAMo1C,QAAQH,QAAS72D,GACvB4hB,EAAMo1C,QAAQF,UAAW92D,KAkBFshH,CAAWn7H,IAMpC,OAAOymB,GAIRq0G,cAAe,SAAW58G,EAAMuI,GAE/B,SAAS20G,EAAexpI,EAAO+F,GAE9B,MAAyB,iBAAd,EAAgC/F,GAE3CV,QAAQ4pC,KAAM,uEAAwElpC,GAE/E+F,EAAM/F,IAId,IAAIqoD,KAEJ,QAAcz4C,IAAT0c,EAEJ,IAAM,IAAIruB,EAAI,EAAGI,EAAIiuB,EAAK9tB,OAAQP,EAAII,EAAGJ,IAAO,CAE/C,IAAIoD,EAAOirB,EAAMruB,QAEG2R,IAAfvO,EAAKkwB,OAETjyB,QAAQ4pC,KAAM,+CAAgD7nC,EAAK0wB,WAItCniB,IAAzBilB,EAAQxzB,EAAKkwB,QAEjBjyB,QAAQ4pC,KAAM,sCAAuC7nC,EAAKkwB,OAI3D,IAAIoC,EAAU,IAAIrC,EAASuD,EAAQxzB,EAAKkwB,QACxCoC,EAAQkO,aAAc,EAEtBlO,EAAQ5B,KAAO1wB,EAAK0wB,UAEDniB,IAAdvO,EAAK2L,OAAqB2mB,EAAQ3mB,KAAO3L,EAAK2L,WAE7B4C,IAAjBvO,EAAKmwB,UAAwBmC,EAAQnC,QAAUg4G,EAAenoI,EAAKmwB,QAASi4G,UAE5D75H,IAAhBvO,EAAKqxB,QAAuBiB,EAAQjB,OAAO+lC,UAAWp3D,EAAKqxB,aAC3C9iB,IAAhBvO,EAAKsxB,QAAuBgB,EAAQhB,OAAO8lC,UAAWp3D,EAAKsxB,aAC7C/iB,IAAdvO,EAAKk2F,OAET5jE,EAAQlC,MAAQ+3G,EAAenoI,EAAKk2F,KAAM,GAAKmyC,IAC/C/1G,EAAQjC,MAAQ83G,EAAenoI,EAAKk2F,KAAM,GAAKmyC,UAIxB95H,IAAnBvO,EAAKuwB,YAA0B+B,EAAQ/B,UAAY43G,EAAenoI,EAAKuwB,UAAW+3G,UAC/D/5H,IAAnBvO,EAAKswB,YAA0BgC,EAAQhC,UAAY63G,EAAenoI,EAAKswB,UAAWg4G,UAC9D/5H,IAApBvO,EAAKwwB,aAA2B8B,EAAQ9B,WAAaxwB,EAAKwwB,iBAE3CjiB,IAAfvO,EAAKyxB,QAAsBa,EAAQb,MAAQzxB,EAAKyxB,OAErDu1B,EAAUhnD,EAAK0wB,MAAS4B,EAM1B,OAAO00B,GAIR+gF,YAAa,WAEZ,IAAIv7F,EAAS,IAAIrZ,EAEjB,OAAO,SAAsBnzB,EAAM+5C,EAAYykE,GAI9C,SAAS+pB,EAAa58H,GAQrB,YAN4B4C,IAAvBwrC,EAAYpuC,IAEhB1N,QAAQ4pC,KAAM,yCAA0Cl8B,GAIlDouC,EAAYpuC,GAIpB,SAAS68H,EAAa78H,GAErB,QAAc4C,IAAT5C,EAAL,CAEA,GAAKd,MAAMgX,QAASlW,GAAS,CAI5B,IAAM,IAFFsU,KAEMrjB,EAAI,EAAGI,EAAI2O,EAAKxO,OAAQP,EAAII,EAAGJ,IAAO,CAE/C,IAAI8zB,EAAO/kB,EAAM/O,QAEU2R,IAAtBiwG,EAAW9tF,IAEfzyB,QAAQ4pC,KAAM,yCAA0CnX,GAIzDzQ,EAAM9Z,KAAMq4G,EAAW9tF,IAIxB,OAAOzQ,EAUR,YAN2B1R,IAAtBiwG,EAAW7yG,IAEf1N,QAAQ4pC,KAAM,yCAA0Cl8B,GAIlD6yG,EAAW7yG,IA9CnB,IAAIm7B,EAkDJ,OAAS9mC,EAAK0E,MAEb,IAAK,QAEJoiC,EAAS,IAAIwoC,QAEY/gE,IAApBvO,EAAK03C,YAEJr+B,OAAO84E,UAAWnyF,EAAK03C,cAE3B5Q,EAAO4Q,WAAa,IAAIze,EAAOj5B,EAAK03C,kBAMpBnpC,IAAbvO,EAAKghC,MAEc,QAAlBhhC,EAAKghC,IAAIt8B,KAEboiC,EAAO9F,IAAM,IAAIquC,GAAKrvE,EAAKghC,IAAIh5B,MAAOhI,EAAKghC,IAAIE,KAAMlhC,EAAKghC,IAAIG,KAEjC,YAAlBnhC,EAAKghC,IAAIt8B,OAEpBoiC,EAAO9F,IAAM,IAAIouC,GAASpvE,EAAKghC,IAAIh5B,MAAOhI,EAAKghC,IAAIK,WAMrD,MAED,IAAK,oBAEJyF,EAAS,IAAI4J,GAAmB1wC,EAAK2wC,IAAK3wC,EAAK4wC,OAAQ5wC,EAAKkhC,KAAMlhC,EAAKmhC,UAEnD5yB,IAAfvO,EAAK6wC,QAAsB/J,EAAO+J,MAAQ7wC,EAAK6wC,YACjCtiC,IAAdvO,EAAKywC,OAAqB3J,EAAO2J,KAAOzwC,EAAKywC,WAC1BliC,IAAnBvO,EAAK8wC,YAA0BhK,EAAOgK,UAAY9wC,EAAK8wC,gBACnCviC,IAApBvO,EAAK+wC,aAA2BjK,EAAOiK,WAAa/wC,EAAK+wC,iBAC3CxiC,IAAdvO,EAAKwe,OAAqBsoB,EAAOtoB,KAAO9gB,OAAO20F,UAAYryF,EAAKwe,OAErE,MAED,IAAK,qBAEJsoB,EAAS,IAAIwJ,GAAoBtwC,EAAKqW,KAAMrW,EAAKuwC,MAAOvwC,EAAKoW,IAAKpW,EAAKwwC,OAAQxwC,EAAKkhC,KAAMlhC,EAAKmhC,KAE/F,MAED,IAAK,eAEJ2F,EAAS,IAAI+3C,GAAc7+E,EAAKgI,MAAOhI,EAAKujE,WAE5C,MAED,IAAK,mBAEJz8B,EAAS,IAAI83C,GAAkB5+E,EAAKgI,MAAOhI,EAAKujE,WAEhD,MAED,IAAK,aAEJz8B,EAAS,IAAI43C,GAAY1+E,EAAKgI,MAAOhI,EAAKujE,UAAWvjE,EAAK06C,SAAU16C,EAAK66C,OAEzE,MAED,IAAK,gBAEJ/T,EAAS,IAAIg4C,GAAe9+E,EAAKgI,MAAOhI,EAAKujE,UAAWvjE,EAAKiyB,MAAOjyB,EAAKkyB,QAEzE,MAED,IAAK,YAEJ4U,EAAS,IAAI03C,GAAWx+E,EAAKgI,MAAOhI,EAAKujE,UAAWvjE,EAAK06C,SAAU16C,EAAKqkE,MAAOrkE,EAAKskE,SAAUtkE,EAAK66C,OAEnG,MAED,IAAK,kBAEJ/T,EAAS,IAAIs3C,GAAiBp+E,EAAKgI,MAAOhI,EAAK+6C,YAAa/6C,EAAKujE,WAEjE,MAED,IAAK,cAEJtlE,QAAQ4pC,KAAM,sEAEf,IAAK,OAEJ,IAAIZ,EAAWshG,EAAavoI,EAAKinC,UAC7BzF,EAAWgnG,EAAaxoI,EAAKwhC,UAIhCsF,EAFIG,EAAS8b,OAAS9b,EAAS8b,MAAM5lD,OAAS,EAErC,IAAI6yE,GAAa/oC,EAAUzF,GAI3B,IAAIqV,GAAM5P,EAAUzF,GAI9B,MAED,IAAK,MAEJsF,EAAS,IAAI4oC,GAEb,MAED,IAAK,OAEJ5oC,EAAS,IAAI0pC,GAAM+3D,EAAavoI,EAAKinC,UAAYuhG,EAAaxoI,EAAKwhC,UAAYxhC,EAAKi5C,MAEpF,MAED,IAAK,WAEJnS,EAAS,IAAI4pC,GAAU63D,EAAavoI,EAAKinC,UAAYuhG,EAAaxoI,EAAKwhC,WAEvE,MAED,IAAK,eAEJsF,EAAS,IAAI2pC,GAAc83D,EAAavoI,EAAKinC,UAAYuhG,EAAaxoI,EAAKwhC,WAE3E,MAED,IAAK,aACL,IAAK,SAEJsF,EAAS,IAAI6pC,GAAQ43D,EAAavoI,EAAKinC,UAAYuhG,EAAaxoI,EAAKwhC,WAErE,MAED,IAAK,SAEJsF,EAAS,IAAI2oC,GAAQ+4D,EAAaxoI,EAAKwhC,WAEvC,MAED,IAAK,QAEJsF,EAAS,IAAI8pC,GAEb,MAED,QAEC9pC,EAAS,IAAIyI,GAoCf,GAhCAzI,EAAOpW,KAAO1wB,EAAK0wB,UAEAniB,IAAdvO,EAAK2L,OAAqBm7B,EAAOn7B,KAAO3L,EAAK2L,WAC7B4C,IAAhBvO,EAAKwsC,QAETA,EAAO4qB,UAAWp3D,EAAKwsC,QACvBA,EAAO7K,UAAWmF,EAAO3wB,SAAU2wB,EAAO6I,WAAY7I,EAAOhL,cAItCvtB,IAAlBvO,EAAKmW,UAAyB2wB,EAAO3wB,SAASihD,UAAWp3D,EAAKmW,eAC5C5H,IAAlBvO,EAAK+7B,UAAyB+K,EAAO/K,SAASq7B,UAAWp3D,EAAK+7B,eAC1CxtB,IAApBvO,EAAK2vC,YAA2B7I,EAAO6I,WAAWynB,UAAWp3D,EAAK2vC,iBACnDphC,IAAfvO,EAAK87B,OAAsBgL,EAAOhL,MAAMs7B,UAAWp3D,EAAK87B,aAIrCvtB,IAApBvO,EAAKopC,aAA2BtC,EAAOsC,WAAappC,EAAKopC,iBAClC76B,IAAvBvO,EAAKmwC,gBAA8BrJ,EAAOqJ,cAAgBnwC,EAAKmwC,eAE/DnwC,EAAK+rC,cAEiBx9B,IAArBvO,EAAK+rC,OAAOm4B,OAAqBp9B,EAAOiF,OAAOm4B,KAAOlkE,EAAK+rC,OAAOm4B,WAC3C31D,IAAvBvO,EAAK+rC,OAAOpG,SAAuBmB,EAAOiF,OAAOpG,OAAS3lC,EAAK+rC,OAAOpG,aAC9Cp3B,IAAxBvO,EAAK+rC,OAAOC,SAAwBlF,EAAOiF,OAAOC,QAAQorB,UAAWp3D,EAAK+rC,OAAOC,cAC1Dz9B,IAAvBvO,EAAK+rC,OAAOlP,SAAuBiK,EAAOiF,OAAOlP,OAASr9B,KAAKuoI,YAAa/nI,EAAK+rC,OAAOlP,eAIxEtuB,IAAjBvO,EAAKyhC,UAAwBqF,EAAOrF,QAAUzhC,EAAKyhC,cACjClzB,IAAlBvO,EAAKowC,WAAyBtJ,EAAOsJ,SAAWpwC,EAAKowC,eAEnC7hC,IAAlBvO,EAAKkqC,SAET,IAAM,IAAIw0E,KAAS1+G,EAAKkqC,SAEvBpD,EAAO7c,IAAKzqB,KAAKuoI,YAAa/nI,EAAKkqC,SAAUw0E,GAAS3kE,EAAYykE,IAMpE,GAAmB,QAAdx+G,EAAK0E,KAIT,IAAM,IAFFirE,EAAS3vE,EAAK2vE,OAER3yE,EAAI,EAAGA,EAAI2yE,EAAOxyE,OAAQH,IAAO,CAE1C,IAAIyvH,EAAQ98C,EAAQ3yE,QAGLuR,KAFXmwG,EAAQ53E,EAAO42E,oBAAqB,OAAQ+O,EAAM3lF,UAIrDA,EAAO4lF,SAAUhO,EAAO+N,EAAM/xE,UAQjC,OAAO5T,GAjRI,KAyRd,IAAIshG,IACHK,UAx7iCe,IAy7iCfh1G,sBAAuBA,GACvBwrB,sBAAuBA,GACvBG,iCAAkCA,GAClCC,iCAAkCA,GAClCC,2BAA4BA,GAC5BJ,wBAAyBA,GACzBC,wBAAyBA,IAGtBkpF,IACHvjE,eAAgBA,GAChB9zC,oBAAqBA,GACrBg0C,uBAAwBA,IAGrBsjE,IACHh1G,cAAeA,GACfqzB,2BAA4BA,GAC5BC,0BAA2BA,GAC3B31B,aAAcA,GACdm0C,0BAA2BA,GAC3Bl0C,yBAA0BA,IA4H3BxzB,OAAO20F,OAAQ5P,GAAM9kF,WAKpB+qI,SAAU,WAGT,OADAzqI,QAAQ4pC,KAAM,6CACP,MAOR8tC,WAAY,SAAWl5E,GAEtB,IAAIL,EAAIoD,KAAKmpI,eAAgBlsI,GAC7B,OAAO+C,KAAKkpI,SAAUtsI,IAMvBwsI,UAAW,SAAW/5C,QAEFtgF,IAAdsgF,IAA0BA,EAAY,GAI3C,IAAM,IAFF3kB,KAEMrnD,EAAI,EAAGA,GAAKgsE,EAAWhsE,IAEhCqnD,EAAO/jE,KAAM3G,KAAKkpI,SAAU7lH,EAAIgsE,IAIjC,OAAO3kB,GAMRsuD,gBAAiB,SAAW3pC,QAERtgF,IAAdsgF,IAA0BA,EAAY,GAI3C,IAAM,IAFF3kB,KAEMrnD,EAAI,EAAGA,GAAKgsE,EAAWhsE,IAEhCqnD,EAAO/jE,KAAM3G,KAAKm2E,WAAY9yD,EAAIgsE,IAInC,OAAO3kB,GAMR2+D,UAAW,WAEV,IAAIC,EAAUtpI,KAAKupI,aACnB,OAAOD,EAASA,EAAQ3rI,OAAS,IAMlC4rI,WAAY,SAAWl6C,GAItB,QAFmBtgF,IAAdsgF,IAA0BA,EAAYrvF,KAAKkjF,oBAE3CljF,KAAKwpI,iBACPxpI,KAAKwpI,gBAAgB7rI,SAAW0xF,EAAY,IAC5CrvF,KAAKghC,YAEP,OAAOhhC,KAAKwpI,gBAIbxpI,KAAKghC,aAAc,EAEnB,IACIyoG,EACAvlI,EAFAojB,KACSoiH,EAAO1pI,KAAKkpI,SAAU,GAC5BS,EAAM,EAIb,IAFAriH,EAAM3gB,KAAM,GAENzC,EAAI,EAAGA,GAAKmrF,EAAWnrF,IAG5BylI,IADAF,EAAUzpI,KAAKkpI,SAAUhlI,EAAImrF,IACd0G,WAAY2zC,GAC3BpiH,EAAM3gB,KAAMgjI,GACZD,EAAOD,EAMR,OAFAzpI,KAAKwpI,gBAAkBliH,EAEhBA,GAIRsiH,iBAAkB,WAEjB5pI,KAAKghC,aAAc,EACnBhhC,KAAKupI,cAMNJ,eAAgB,SAAWlsI,EAAGi+C,GAE7B,IAII2uF,EAJAC,EAAa9pI,KAAKupI,aAElBnsI,EAAI,EAAGivC,EAAKy9F,EAAWnsI,OAM1BksI,EAFI3uF,GAMcj+C,EAAI6sI,EAAYz9F,EAAK,GAQxC,IAFA,IAA4B09F,EAAxB51C,EAAM,EAAGC,EAAO/nD,EAAK,EAEjB8nD,GAAOC,GAMd,GAJAh3F,EAAIsF,KAAKK,MAAOoxF,GAAQC,EAAOD,GAAQ,IAEvC41C,EAAaD,EAAY1sI,GAAMysI,GAEb,EAEjB11C,EAAM/2F,EAAI,MAEJ,CAAA,KAAK2sI,EAAa,GAIlB,CAEN31C,EAAOh3F,EACP,MALAg3F,EAAOh3F,EAAI,EAeb,GAFAA,EAAIg3F,EAEC01C,EAAY1sI,KAAQysI,EAExB,OAAOzsI,GAAMivC,EAAK,GAMnB,IAAI29F,EAAeF,EAAY1sI,GAa/B,OAFUA,GAJcysI,EAAkBG,IANxBF,EAAY1sI,EAAI,GAEA4sI,KAQE39F,EAAK,IAW1C49F,WAAY,SAAWrtI,GAEtB,IACIw0F,EAAKx0F,EADG,KAER2lF,EAAK3lF,EAFG,KAMPw0F,EAAK,IAAIA,EAAK,GACd7O,EAAK,IAAIA,EAAK,GAEnB,IAAI2nD,EAAMlqI,KAAKkpI,SAAU93C,GAIzB,OAHUpxF,KAAKkpI,SAAU3mD,GAEX3yE,QAAQ40D,IAAK0lE,GAChB7kE,aAIZ8kE,aAAc,SAAWltI,GAExB,IAAIL,EAAIoD,KAAKmpI,eAAgBlsI,GAC7B,OAAO+C,KAAKiqI,WAAYrtI,IAIzB65E,oBAAqB,SAAWuD,EAAUrE,GAIzC,IASIv4E,EAAGH,EAAGw/E,EATNn2C,EAAS,IAAI5S,EAEbqiD,KACAriC,KACAsiC,KAEA43C,EAAM,IAAIl6F,EACV02G,EAAM,IAAIz2G,EAMd,IAAMv2B,EAAI,EAAGA,GAAK48E,EAAU58E,IAE3BH,EAAIG,EAAI48E,EAERjE,EAAU34E,GAAM4C,KAAKmqI,aAAcltI,GACnC84E,EAAU34E,GAAIioE,YAOf3xB,EAAS,GAAM,IAAIhgB,EACnBsiD,EAAW,GAAM,IAAItiD,EACrB,IAAItxB,EAAMyX,OAAOwwH,UACb1mC,EAAKjhG,KAAKoI,IAAKirE,EAAU,GAAIvlD,GAC7BozE,EAAKlhG,KAAKoI,IAAKirE,EAAU,GAAI3yD,GAC7BknH,EAAK5nI,KAAKoI,IAAKirE,EAAU,GAAIzjD,GA8BjC,IA5BKqxE,GAAMvhG,IAEVA,EAAMuhG,EACNr9D,EAAO5hC,IAAK,EAAG,EAAG,IAIdk/F,GAAMxhG,IAEVA,EAAMwhG,EACNt9D,EAAO5hC,IAAK,EAAG,EAAG,IAId4lI,GAAMloI,GAEVkkC,EAAO5hC,IAAK,EAAG,EAAG,GAInBkpH,EAAI96C,aAAciD,EAAU,GAAKzvC,GAAS++B,YAE1C3xB,EAAS,GAAIo/B,aAAciD,EAAU,GAAK63C,GAC1C53C,EAAW,GAAIlD,aAAciD,EAAU,GAAKriC,EAAS,IAK/Ct2C,EAAI,EAAGA,GAAK48E,EAAU58E,IAE3Bs2C,EAASt2C,GAAMs2C,EAASt2C,EAAI,GAAIwS,QAEhComE,EAAW54E,GAAM44E,EAAW54E,EAAI,GAAIwS,QAEpCg+G,EAAI96C,aAAciD,EAAU34E,EAAI,GAAK24E,EAAU34E,IAE1CwwH,EAAIjwH,SAAWkc,OAAO64E,UAE1Bk7B,EAAIvoD,YAEJoX,EAAQ/5E,KAAKw0F,KAAM/lE,GAAM+oD,MAAOnE,EAAU34E,EAAI,GAAI2+E,IAAKhG,EAAU34E,KAAS,EAAG,IAE7Es2C,EAASt2C,GAAImhC,aAAc6rG,EAAI1mC,iBAAkBkqB,EAAKnxC,KAIvDzG,EAAW54E,GAAI01E,aAAciD,EAAU34E,GAAKs2C,EAASt2C,IAMtD,IAAgB,IAAXu4E,EAWJ,IATA8G,EAAQ/5E,KAAKw0F,KAAM/lE,GAAM+oD,MAAOxmC,EAAS,GAAIqoC,IAAKroC,EAASsmC,KAAgB,EAAG,IAC9EyC,GAASzC,EAEJjE,EAAU,GAAIgG,IAAK6xC,EAAI96C,aAAcp/B,EAAS,GAAKA,EAASsmC,KAAiB,IAEjFyC,GAAUA,GAILr/E,EAAI,EAAGA,GAAK48E,EAAU58E,IAG3Bs2C,EAASt2C,GAAImhC,aAAc6rG,EAAI1mC,iBAAkB3tB,EAAU34E,GAAKq/E,EAAQr/E,IACxE44E,EAAW54E,GAAI01E,aAAciD,EAAU34E,GAAKs2C,EAASt2C,IAMvD,OACC24E,SAAUA,EACVriC,QAASA,EACTsiC,UAAWA,OAgBdmN,GAAUhlF,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,YACvBsJ,YAAc07E,GAElCA,GAAUhlF,UAAUosI,aAAc,EAElCpnD,GAAUhlF,UAAU+qI,SAAW,SAAWtsI,GAEzC,GAAW,IAANA,EAEJ,OAAOoD,KAAKojF,GAAGxzE,QAIhB,IAAI+1C,EAAQ3lD,KAAKojF,GAAGxzE,QAAQ40D,IAAKxkE,KAAKsiF,IAGtC,OAFA38B,EAAMmV,eAAgBl+D,GAAI6tB,IAAKzqB,KAAKsiF,IAE7B38B,GAMRw9B,GAAUhlF,UAAUg4E,WAAa,SAAWl5E,GAE3C,OAAO+C,KAAKkpI,SAAUjsI,IAIvBkmF,GAAUhlF,UAAU8rI,WAAa,SAAWrtI,GAI3C,OAFcoD,KAAKojF,GAAGxzE,QAAQ40D,IAAKxkE,KAAKsiF,IAEzBjd,aAwBhBge,GAAUllF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQurE,GAAM9kF,YAEzDsJ,YAAa47E,GAEb54D,IAAK,SAAW+/G,GAEfxqI,KAAKsjF,OAAO38E,KAAM6jI,IAInBC,UAAW,WAGV,IAAIC,EAAa1qI,KAAKsjF,OAAQ,GAAI4lD,SAAU,GACxCyB,EAAW3qI,KAAKsjF,OAAQtjF,KAAKsjF,OAAO3lF,OAAS,GAAIurI,SAAU,GAExDwB,EAAWv6E,OAAQw6E,IAEzB3qI,KAAKsjF,OAAO38E,KAAM,IAAIw8E,GAAWwnD,EAAUD,KAe7CxB,SAAU,SAAWtsI,GAQpB,IANA,IAAIymB,EAAIzmB,EAAIoD,KAAKqpI,YACbuB,EAAe5qI,KAAK6qI,kBACpBztI,EAAI,EAIAA,EAAIwtI,EAAajtI,QAAS,CAEjC,GAAKitI,EAAcxtI,IAAOimB,EAAI,CAE7B,IAAI/a,EAAOsiI,EAAcxtI,GAAMimB,EAC3BmnH,EAAQxqI,KAAKsjF,OAAQlmF,GAErB0tI,EAAgBN,EAAMnB,YACtBpsI,EAAsB,IAAlB6tI,EAAsB,EAAI,EAAIxiI,EAAOwiI,EAE7C,OAAON,EAAMr0D,WAAYl5E,GAI1BG,IAID,OAAO,MAURisI,UAAW,WAEV,IAAI0B,EAAO/qI,KAAK6qI,kBAChB,OAAOE,EAAMA,EAAKptI,OAAS,IAK5BisI,iBAAkB,WAEjB5pI,KAAKghC,aAAc,EACnBhhC,KAAKgrI,aAAe,KACpBhrI,KAAK6qI,mBAONA,gBAAiB,WAIhB,GAAK7qI,KAAKgrI,cAAgBhrI,KAAKgrI,aAAartI,SAAWqC,KAAKsjF,OAAO3lF,OAElE,OAAOqC,KAAKgrI,aASb,IAAM,IAFF1B,KAAc2B,EAAO,EAEf7tI,EAAI,EAAGI,EAAIwC,KAAKsjF,OAAO3lF,OAAQP,EAAII,EAAGJ,IAE/C6tI,GAAQjrI,KAAKsjF,OAAQlmF,GAAIisI,YACzBC,EAAQ3iI,KAAMskI,GAMf,OAFAjrI,KAAKgrI,aAAe1B,EAEbA,GAIRtQ,gBAAiB,SAAW3pC,QAERtgF,IAAdsgF,IAA0BA,EAAY,IAI3C,IAAM,IAFF3kB,KAEMttE,EAAI,EAAGA,GAAKiyF,EAAWjyF,IAEhCstE,EAAO/jE,KAAM3G,KAAKkpI,SAAU9rI,EAAIiyF,IAUjC,OANKrvF,KAAKujF,WAET7Y,EAAO/jE,KAAM+jE,EAAQ,IAIfA,GAIR0+D,UAAW,SAAW/5C,GAErBA,EAAYA,GAAa,GAIzB,IAAM,IAFWq6C,EAAbh/D,KAEMttE,EAAI,EAAGkmF,EAAStjF,KAAKsjF,OAAQlmF,EAAIkmF,EAAO3lF,OAAQP,IAUzD,IAAM,IARFotI,EAAQlnD,EAAQlmF,GAChB8tI,EAAcV,GAASA,EAAMW,eAA8B,EAAZ97C,EAC/Cm7C,GAASA,EAAMD,YAAe,EAC9BC,GAASA,EAAMY,cAAiB/7C,EAAYm7C,EAAM9/D,OAAO/sE,OAC1D0xF,EAEC+lC,EAAMoV,EAAMpB,UAAW8B,GAEjB/gI,EAAI,EAAGA,EAAIirH,EAAIz3H,OAAQwM,IAAM,CAEtC,IAAIw7C,EAAQyvE,EAAKjrH,GAEZu/H,GAAQA,EAAKv5E,OAAQxK,KAE1B+kB,EAAO/jE,KAAMg/C,GACb+jF,EAAO/jF,GAYT,OANK3lD,KAAKujF,WAAa7Y,EAAO/sE,OAAS,IAAM+sE,EAAQA,EAAO/sE,OAAS,GAAIwyD,OAAQua,EAAQ,KAExFA,EAAO/jE,KAAM+jE,EAAQ,IAIfA,GAUR2gE,qBAAsB,SAAWh8C,GAEhC,IAAI+lC,EAAMp1H,KAAKopI,UAAW/5C,GAC1B,OAAOrvF,KAAKsrI,eAAgBlW,IAM7BmW,2BAA4B,SAAWl8C,GAEtC,IAAI+lC,EAAMp1H,KAAKg5H,gBAAiB3pC,GAChC,OAAOrvF,KAAKsrI,eAAgBlW,IAI7BkW,eAAgB,SAAW5gE,GAI1B,IAAM,IAFFjjC,EAAW,IAAIoK,GAETz0C,EAAI,EAAGI,EAAIktE,EAAO/sE,OAAQP,EAAII,EAAGJ,IAAO,CAEjD,IAAIuoD,EAAQ+kB,EAAQttE,GACpBqqC,EAAS3N,SAASnzB,KAAM,IAAI+sB,EAASiyB,EAAMn1B,EAAGm1B,EAAMviC,EAAGuiC,EAAMrzB,GAAK,IAInE,OAAOmV,KAyBT+7C,GAAarlF,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,WAC9CqlF,GAAarlF,UAAUsJ,YAAc+7E,GAErCA,GAAarlF,UAAUgtI,gBAAiB,EAExC3nD,GAAarlF,UAAU+qI,SAAW,SAAWtsI,GAO5C,IALA,IAAI4uI,EAAkB,EAAV9oI,KAAK8xE,GACbi3D,EAAazrI,KAAK8jF,UAAY9jF,KAAK6jF,YACnC6nD,EAAahpI,KAAKoI,IAAK2gI,GAAe5xH,OAAO64E,QAGzC+4C,EAAa,GAAIA,GAAcD,EACvC,KAAQC,EAAaD,GAAQC,GAAcD,EAEtCC,EAAa5xH,OAAO64E,UAIvB+4C,EAFIC,EAES,EAIAF,IAMU,IAApBxrI,KAAK+jF,YAAyB2nD,IAE7BD,IAAeD,EAEnBC,GAAeD,EAIfC,GAA0BD,GAM5B,IAAI3mE,EAAQ7kE,KAAK6jF,YAAcjnF,EAAI6uI,EAC/Bj7G,EAAIxwB,KAAKyjF,GAAKzjF,KAAK2jF,QAAUjhF,KAAKkiE,IAAKC,GACvCzhD,EAAIpjB,KAAK0jF,GAAK1jF,KAAK4jF,QAAUlhF,KAAK6zE,IAAK1R,GAE3C,GAAwB,IAAnB7kE,KAAKgkF,UAAkB,CAE3B,IAAIpf,EAAMliE,KAAKkiE,IAAK5kE,KAAKgkF,WACrBzN,EAAM7zE,KAAK6zE,IAAKv2E,KAAKgkF,WAErB2f,EAAKnzE,EAAIxwB,KAAKyjF,GACdmgB,EAAKxgF,EAAIpjB,KAAK0jF,GAGlBlzD,EAAImzE,EAAK/+B,EAAMg/B,EAAKrtB,EAAMv2E,KAAKyjF,GAC/BrgE,EAAIugF,EAAKptB,EAAMqtB,EAAKh/B,EAAM5kE,KAAK0jF,GAIhC,OAAO,IAAInzD,EAASC,EAAGpN,KAYxB6gE,GAAY9lF,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,YACvBsJ,YAAcw8E,GAEpCA,GAAY9lF,UAAUitI,eAAgB,EAEtCnnD,GAAY9lF,UAAU+qI,SAAW,SAAWtsI,GAE3C,IAAI8tE,EAAS1qE,KAAK0qE,OACd/kB,GAAU+kB,EAAO/sE,OAAS,GAAMf,EAEhC+uI,EAAWjpI,KAAKK,MAAO4iD,GACvBulC,EAASvlC,EAAQgmF,EAEjBC,EAASlhE,EAAqB,IAAbihE,EAAiBA,EAAWA,EAAW,GACxDE,EAASnhE,EAAQihE,GACjBG,EAASphE,EAAQihE,EAAWjhE,EAAO/sE,OAAS,EAAI+sE,EAAO/sE,OAAS,EAAIguI,EAAW,GAC/EI,EAASrhE,EAAQihE,EAAWjhE,EAAO/sE,OAAS,EAAI+sE,EAAO/sE,OAAS,EAAIguI,EAAW,GAEnF,OAAO,IAAIp7G,EACV6xD,GAAY8I,EAAQ0gD,EAAOp7G,EAAGq7G,EAAOr7G,EAAGs7G,EAAOt7G,EAAGu7G,EAAOv7G,GACzD4xD,GAAY8I,EAAQ0gD,EAAOxoH,EAAGyoH,EAAOzoH,EAAG0oH,EAAO1oH,EAAG2oH,EAAO3oH,MAgB3D8gE,GAAiB/lF,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,YACvBsJ,YAAcy8E,GAEzCA,GAAiB/lF,UAAU+qI,SAAW,SAAWtsI,GAEhD,IAAIylF,EAAKriF,KAAKqiF,GAAIC,EAAKtiF,KAAKsiF,GAAIc,EAAKpjF,KAAKojF,GAAIe,EAAKnkF,KAAKmkF,GAExD,OAAO,IAAI5zD,EACVyyD,GAAapmF,EAAGylF,EAAG7xD,EAAG8xD,EAAG9xD,EAAG4yD,EAAG5yD,EAAG2zD,EAAG3zD,GACrCwyD,GAAapmF,EAAGylF,EAAGj/D,EAAGk/D,EAAGl/D,EAAGggE,EAAGhgE,EAAG+gE,EAAG/gE,MAevCghE,GAAqBjmF,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,YACvBsJ,YAAc28E,GAE7CA,GAAqBjmF,UAAU+qI,SAAW,SAAWtsI,GAEpD,IAAIylF,EAAKriF,KAAKqiF,GAAIC,EAAKtiF,KAAKsiF,GAAIc,EAAKpjF,KAAKojF,GAE1C,OAAO,IAAI7yD,EACVoyD,GAAiB/lF,EAAGylF,EAAG7xD,EAAG8xD,EAAG9xD,EAAG4yD,EAAG5yD,GACnCmyD,GAAiB/lF,EAAGylF,EAAGj/D,EAAGk/D,EAAGl/D,EAAGggE,EAAGhgE,KAKrC,IAAI4oH,GAAgB9tI,OAAO20F,OAAQ30F,OAAOwZ,OAAQ2rE,GAAUllF,YAE3DomF,WAAY,SAAWygC,GAEtBhlH,KAAKisI,OAAQjnB,EAAS,GAAIx0F,EAAGw0F,EAAS,GAAI5hG,GAE1C,IAAM,IAAIhmB,EAAI,EAAGI,EAAIwnH,EAAQrnH,OAAQP,EAAII,EAAGJ,IAE3C4C,KAAKksI,OAAQlnB,EAAS5nH,GAAIozB,EAAGw0F,EAAS5nH,GAAIgmB,IAM5C6oH,OAAQ,SAAWz7G,EAAGpN,GAErBpjB,KAAKskF,aAAa5/E,IAAK8rB,EAAGpN,IAI3B8oH,OAAQ,SAAW17G,EAAGpN,GAErB,IAAIonH,EAAQ,IAAIrnD,GAAWnjF,KAAKskF,aAAa10E,QAAS,IAAI2gB,EAASC,EAAGpN,IACtEpjB,KAAKsjF,OAAO38E,KAAM6jI,GAElBxqI,KAAKskF,aAAa5/E,IAAK8rB,EAAGpN,IAI3B+oH,iBAAkB,SAAWC,EAAMC,EAAM5oD,EAAIC,GAE5C,IAAI8mD,EAAQ,IAAIpmD,GACfpkF,KAAKskF,aAAa10E,QAClB,IAAI2gB,EAAS67G,EAAMC,GACnB,IAAI97G,EAASkzD,EAAIC,IAGlB1jF,KAAKsjF,OAAO38E,KAAM6jI,GAElBxqI,KAAKskF,aAAa5/E,IAAK++E,EAAIC,IAI5B4oD,cAAe,SAAWC,EAAOC,EAAOC,EAAOC,EAAOjpD,EAAIC,GAEzD,IAAI8mD,EAAQ,IAAItmD,GACflkF,KAAKskF,aAAa10E,QAClB,IAAI2gB,EAASg8G,EAAOC,GACpB,IAAIj8G,EAASk8G,EAAOC,GACpB,IAAIn8G,EAASkzD,EAAIC,IAGlB1jF,KAAKsjF,OAAO38E,KAAM6jI,GAElBxqI,KAAKskF,aAAa5/E,IAAK++E,EAAIC,IAI5BipD,WAAY,SAAWvX,GAEtB,IAEIoV,EAAQ,IAAIvmD,IAFHjkF,KAAKskF,aAAa10E,SAAUxJ,OAAQgvH,IAGjDp1H,KAAKsjF,OAAO38E,KAAM6jI,GAElBxqI,KAAKskF,aAAa7/E,KAAM2wH,EAAKA,EAAIz3H,OAAS,KAI3Ci6E,IAAK,SAAW6L,EAAIC,EAAI4O,EAASzO,EAAaC,EAAWC,GAExD,IAAIpQ,EAAK3zE,KAAKskF,aAAa9zD,EACvBwoE,EAAKh5F,KAAKskF,aAAalhE,EAE3BpjB,KAAK4sI,OAAQnpD,EAAK9P,EAAI+P,EAAKsV,EAAI1G,EAC9BzO,EAAaC,EAAWC,IAI1B6oD,OAAQ,SAAWnpD,EAAIC,EAAI4O,EAASzO,EAAaC,EAAWC,GAE3D/jF,KAAK6sI,WAAYppD,EAAIC,EAAI4O,EAASA,EAASzO,EAAaC,EAAWC,IAIpE+oD,QAAS,SAAWrpD,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEjF,IAAIrQ,EAAK3zE,KAAKskF,aAAa9zD,EACvBwoE,EAAKh5F,KAAKskF,aAAalhE,EAE3BpjB,KAAK6sI,WAAYppD,EAAK9P,EAAI+P,EAAKsV,EAAIrV,EAASC,EAASC,EAAaC,EAAWC,EAAYC,IAI1F6oD,WAAY,SAAWppD,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEpF,IAAIwmD,EAAQ,IAAIhnD,GAAcC,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAE5F,GAAKhkF,KAAKsjF,OAAO3lF,OAAS,EAAI,CAG7B,IAAIovI,EAAavC,EAAMtB,SAAU,GAE1B6D,EAAW58E,OAAQnwD,KAAKskF,eAE9BtkF,KAAKksI,OAAQa,EAAWv8G,EAAGu8G,EAAW3pH,GAMxCpjB,KAAKsjF,OAAO38E,KAAM6jI,GAElB,IAAIwC,EAAYxC,EAAMtB,SAAU,GAChClpI,KAAKskF,aAAa7/E,KAAMuoI,MAwB1B3oD,GAAKlmF,UAAY6tI,GACjBA,GAAcvkI,YAAc48E,GAqB5BG,GAAMrmF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQs0H,KAE/CvkI,YAAa+8E,GAEbyoD,eAAgB,SAAW59C,GAI1B,IAAM,IAFF69C,KAEM9vI,EAAI,EAAGI,EAAIwC,KAAKi7E,MAAMt9E,OAAQP,EAAII,EAAGJ,IAE9C8vI,EAAU9vI,GAAM4C,KAAKi7E,MAAO79E,GAAIgsI,UAAW/5C,GAI5C,OAAO69C,GAMRC,iBAAkB,SAAW99C,GAE5B,OAEC1U,MAAO36E,KAAKopI,UAAW/5C,GACvBpU,MAAOj7E,KAAKitI,eAAgB59C,KAM9BvU,cAAe,SAAWuU,GAEzB,OAAOrvF,KAAKmtI,iBAAkB99C,MAkBhCnxF,OAAO20F,OAAQpO,GAAUtmF,WAExB8tI,OAAQ,SAAWz7G,EAAGpN,GAErBpjB,KAAK2kF,YAAc,IAAIN,GACvBrkF,KAAK0kF,SAAS/9E,KAAM3G,KAAK2kF,aACzB3kF,KAAK2kF,YAAYsnD,OAAQz7G,EAAGpN,IAI7B8oH,OAAQ,SAAW17G,EAAGpN,GAErBpjB,KAAK2kF,YAAYunD,OAAQ17G,EAAGpN,IAI7B+oH,iBAAkB,SAAWC,EAAMC,EAAM5oD,EAAIC,GAE5C1jF,KAAK2kF,YAAYwnD,iBAAkBC,EAAMC,EAAM5oD,EAAIC,IAIpD4oD,cAAe,SAAWC,EAAOC,EAAOC,EAAOC,EAAOjpD,EAAIC,GAEzD1jF,KAAK2kF,YAAY2nD,cAAeC,EAAOC,EAAOC,EAAOC,EAAOjpD,EAAIC,IAIjEipD,WAAY,SAAWvX,GAEtBp1H,KAAK2kF,YAAYgoD,WAAYvX,IAI9BgY,SAAU,SAAWC,EAAOC,GAE3B,SAASC,EAAiBC,GAIzB,IAAM,IAFFz1D,KAEM36E,EAAI,EAAGI,EAAIgwI,EAAW7vI,OAAQP,EAAII,EAAGJ,IAAO,CAErD,IAAIqwI,EAAUD,EAAYpwI,GAEtBswI,EAAW,IAAIlpD,GACnBkpD,EAASpqD,OAASmqD,EAAQnqD,OAE1BvL,EAAOpxE,KAAM+mI,GAId,OAAO31D,EA+DR,IAAIoD,EAAcD,GAAWC,YAEzBuJ,EAAW1kF,KAAK0kF,SACpB,GAAyB,IAApBA,EAAS/mF,OAAe,SAE7B,IAAiB,IAAZ2vI,EAAmB,OAAOC,EAAiB7oD,GAGhD,IAAIipD,EAAOF,EAASC,EAAU31D,KAE9B,GAAyB,IAApB2M,EAAS/mF,OAMb,OAJA8vI,EAAU/oD,EAAU,GACpBgpD,EAAW,IAAIlpD,GACfkpD,EAASpqD,OAASmqD,EAAQnqD,OAC1BvL,EAAOpxE,KAAM+mI,GACN31D,EAIR,IAAI61D,GAAezyD,EAAauJ,EAAU,GAAI0kD,aAC9CwE,EAAaP,GAAUO,EAAaA,EAIpC,IAIIC,EAJAC,KACAC,KACAC,KACAC,EAAU,EAGdF,EAAWE,QAAYl/H,EACvBi/H,EAAeC,MAEf,IAAM,IAAI7wI,EAAI,EAAGI,EAAIknF,EAAS/mF,OAAQP,EAAII,EAAGJ,IAI5CuwI,EAAQxyD,EADR0yD,GADAJ,EAAU/oD,EAAUtnF,IACAgsI,cAEpBuE,EAAQN,GAAUM,EAAQA,KAIhBC,GAAkBG,EAAWE,IAAcA,IAEpDF,EAAWE,IAAclxI,EAAG,IAAIynF,GAAStgF,EAAG2pI,GAC5CE,EAAWE,GAAUlxI,EAAEumF,OAASmqD,EAAQnqD,OAEnCsqD,GAAaK,IAClBD,EAAeC,OAMfD,EAAeC,GAAUtnI,MAAQ2c,EAAGmqH,EAASvpI,EAAG2pI,EAAW,KAS7D,IAAOE,EAAW,GAAM,OAAOR,EAAiB7oD,GAGhD,GAAKqpD,EAAUpwI,OAAS,EAAI,CAK3B,IAAM,IAHFuwI,GAAY,EACZC,KAEMxZ,EAAO,EAAGyZ,EAAOL,EAAUpwI,OAAQg3H,EAAOyZ,EAAMzZ,IAEzDmZ,EAAkBnZ,MAInB,IAAM,IAAIA,EAAO,EAAGyZ,EAAOL,EAAUpwI,OAAQg3H,EAAOyZ,EAAMzZ,IAIzD,IAAM,IAFF0Z,EAAML,EAAerZ,GAEfK,EAAO,EAAGA,EAAOqZ,EAAI1wI,OAAQq3H,IAAU,CAKhD,IAAM,IAHFsZ,EAAKD,EAAKrZ,GACVuZ,GAAkB,EAEZC,EAAQ,EAAGA,EAAQT,EAAUpwI,OAAQ6wI,KAlJlD,SAA+BzY,EAAM0Y,GASpC,IAAM,IAPFC,EAAUD,EAAU9wI,OAMpBgxI,GAAS,EACHzqI,EAAIwqI,EAAU,EAAG73D,EAAI,EAAGA,EAAI63D,EAASxqI,EAAI2yE,IAAO,CAEzD,IAAI+3D,EAAaH,EAAWvqI,GACxB2qI,EAAaJ,EAAW53D,GAExBi4D,EAASD,EAAWr+G,EAAIo+G,EAAUp+G,EAClCu+G,EAASF,EAAWzrH,EAAIwrH,EAAUxrH,EAEtC,GAAK1gB,KAAKoI,IAAKikI,GAAWl1H,OAAO64E,QAAU,CAS1C,GANKq8C,EAAS,IAEbH,EAAaH,EAAW53D,GAAKi4D,GAAWA,EACxCD,EAAaJ,EAAWvqI,GAAK6qI,GAAWA,GAGlChZ,EAAK3yG,EAAIwrH,EAAUxrH,GAAS2yG,EAAK3yG,EAAIyrH,EAAWzrH,EAAQ,SAE/D,GAAK2yG,EAAK3yG,IAAMwrH,EAAUxrH,GAEzB,GAAK2yG,EAAKvlG,IAAMo+G,EAAUp+G,EAAK,OAAO,MAGhC,CAEN,IAAIw+G,EAAWD,GAAWhZ,EAAKvlG,EAAIo+G,EAAUp+G,GAAMs+G,GAAW/Y,EAAK3yG,EAAIwrH,EAAUxrH,GACjF,GAAkB,IAAb4rH,EAAoB,OAAO,EAChC,GAAKA,EAAW,EAAQ,SACxBL,GAAWA,OAIN,CAGN,GAAK5Y,EAAK3yG,IAAMwrH,EAAUxrH,EAAM,SAEhC,GAASyrH,EAAWr+G,GAAKulG,EAAKvlG,GAASulG,EAAKvlG,GAAKo+G,EAAUp+G,GACrDo+G,EAAUp+G,GAAKulG,EAAKvlG,GAASulG,EAAKvlG,GAAKq+G,EAAWr+G,EAAS,OAAO,GAO1E,OAAOm+G,GA6FCM,CAAsBX,EAAGpqI,EAAG6pI,EAAWS,GAAQtqI,KAE9CywH,IAAS6Z,GAAQL,EAASxnI,MAAQuoI,MAAOva,EAAMwa,IAAKX,EAAOxb,KAAMgC,IACjEuZ,GAEJA,GAAkB,EAClBT,EAAkBU,GAAQ7nI,KAAM2nI,IAIhCJ,GAAY,GAOVK,GAEJT,EAAkBnZ,GAAOhuH,KAAM2nI,GAQ7BH,EAASxwI,OAAS,IAGfuwI,IAAYF,EAAgBF,IAQrC,IAAM,IAFFsB,EAEMhyI,EAAI,EAAGivC,EAAK0hG,EAAUpwI,OAAQP,EAAIivC,EAAIjvC,IAAO,CAEtDswI,EAAWK,EAAW3wI,GAAIL,EAC1Bg7E,EAAOpxE,KAAM+mI,GAGb,IAAM,IAAIvjI,EAAI,EAAGo1B,GAFjB6vG,EAAWpB,EAAe5wI,IAEKO,OAAQwM,EAAIo1B,EAAIp1B,IAE9CujI,EAASzyD,MAAMt0E,KAAMyoI,EAAUjlI,GAAImZ,GAQrC,OAAOy0D,KAiBT75E,OAAO20F,OAAQjO,GAAKzmF,WAEnBm6E,QAAQ,EAERC,eAAgB,SAAWJ,EAAM1yE,EAAM4pF,GAmCtC,SAASggD,EAAY9mI,EAAG+zB,EAAOijF,EAASC,GAEvC,IAAI8vB,EAAQ9uI,EAAK+uI,OAAQhnI,IAAO/H,EAAK+uI,OAAQ,KAE7C,GAAOD,EAAP,CAEA,IAGI9+G,EAAGpN,EAAGqsG,EAAKC,EAAK8f,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAHpDviI,EAAO,IAAIk3E,GAEX2wC,KAGJ,GAAKka,EAAMtyI,EAIV,IAAM,IAFF+yI,EAAUT,EAAMU,iBAAoBV,EAAMU,eAAiBV,EAAMtyI,EAAEiP,MAAO,MAEpE7O,EAAI,EAAGI,EAAIuyI,EAAQpyI,OAAQP,EAAII,GAIxC,OAFauyI,EAAS3yI,MAIrB,IAAK,IAEJozB,EAAIu/G,EAAS3yI,KAASk/B,EAAQijF,EAC9Bn8F,EAAI2sH,EAAS3yI,KAASk/B,EAAQkjF,EAE9BjyG,EAAK0+H,OAAQz7G,EAAGpN,GAEhB,MAED,IAAK,IAEJoN,EAAIu/G,EAAS3yI,KAASk/B,EAAQijF,EAC9Bn8F,EAAI2sH,EAAS3yI,KAASk/B,EAAQkjF,EAE9BjyG,EAAK2+H,OAAQ17G,EAAGpN,GAEhB,MAED,IAAK,IAWJ,GATAqsG,EAAOsgB,EAAS3yI,KAASk/B,EAAQijF,EACjCmQ,EAAOqgB,EAAS3yI,KAASk/B,EAAQkjF,EACjCkwB,EAAOK,EAAS3yI,KAASk/B,EAAQijF,EACjCowB,EAAOI,EAAS3yI,KAASk/B,EAAQkjF,EAEjCjyG,EAAK4+H,iBAAkBuD,EAAMC,EAAMlgB,EAAKC,GAExCogB,EAAQ1a,EAAKA,EAAIz3H,OAAS,GAEb,CAEZ6xI,EAAOM,EAAMt/G,EACbi/G,EAAOK,EAAM1sH,EAEb,IAAUsnG,EAAK,EAAGA,GAAMr7B,EAAWq7B,IAGlC/nC,GADI/lF,EAAI8tH,EAAKr7B,EACOmgD,EAAME,EAAMjgB,GAChC9sC,GAAiB/lF,EAAG6yI,EAAME,EAAMjgB,GAMlC,MAED,IAAK,IAaJ,GAXAD,EAAOsgB,EAAS3yI,KAASk/B,EAAQijF,EACjCmQ,EAAOqgB,EAAS3yI,KAASk/B,EAAQkjF,EACjCkwB,EAAOK,EAAS3yI,KAASk/B,EAAQijF,EACjCowB,EAAOI,EAAS3yI,KAASk/B,EAAQkjF,EACjCowB,EAAOG,EAAS3yI,KAASk/B,EAAQijF,EACjCswB,EAAOE,EAAS3yI,KAASk/B,EAAQkjF,EAEjCjyG,EAAK++H,cAAeoD,EAAMC,EAAMC,EAAMC,EAAMpgB,EAAKC,GAEjDogB,EAAQ1a,EAAKA,EAAIz3H,OAAS,GAEb,CAEZ6xI,EAAOM,EAAMt/G,EACbi/G,EAAOK,EAAM1sH,EAEb,IAAM,IAAIsnG,EAAK,EAAGA,GAAMr7B,EAAWq7B,IAAQ,CAE1C,IAAI9tH,EAAI8tH,EAAKr7B,EACbrM,GAAapmF,EAAG4yI,EAAME,EAAME,EAAMngB,GAClCzsC,GAAapmF,EAAG6yI,EAAME,EAAME,EAAMngB,KAcxC,OAASnQ,QAAS+vB,EAAMW,GAAK3zG,EAAO/uB,KAAMA,SAM7BwB,IAATtJ,IAAqBA,EAAO,UACdsJ,IAAdsgF,IAA0BA,EAAY,GAO3C,IAAM,IALF7uF,EAAOR,KAAKQ,KAEZ0vI,EAnJJ,SAAsB/3D,GAUrB,IAAM,IARF90E,EAAQ+Z,OAAQ+6D,GAAOlsE,MAAO,IAC9BqwB,EAAQ72B,EAAOjF,EAAK0qI,WACpBiF,GAAgB3vI,EAAK0xC,YAAYk+F,KAAO5vI,EAAK0xC,YAAYm+F,KAAO7vI,EAAK8vI,oBAAuBh0G,EAE5FijF,EAAU,EAAGC,EAAU,EAEvB0wB,KAEM9yI,EAAI,EAAGA,EAAIiG,EAAM1F,OAAQP,IAAO,CAEzC,IAAImzI,EAAOltI,EAAOjG,GAElB,GAAc,OAATmzI,EAEJhxB,EAAU,EACVC,GAAW2wB,MAEL,CAEN,IAAIK,EAAMnB,EAAYkB,EAAMj0G,EAAOijF,EAASC,GAC5CD,GAAWixB,EAAIjxB,QACf2wB,EAAMvpI,KAAM6pI,EAAIjjI,OAMlB,OAAO2iI,EAsHIO,CAAat4D,GACrBJ,KAEM7zE,EAAI,EAAGgiD,EAAKgqF,EAAMvyI,OAAQuG,EAAIgiD,EAAIhiD,IAE3CmH,MAAMlN,UAAUwI,KAAKR,MAAO4xE,EAAQm4D,EAAOhsI,GAAIkpI,YAIhD,OAAOr1D,KAgBT75E,OAAO20F,OAAQhO,GAAW1mF,WAEzByJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEzC,IAAIk4B,EAAQhpC,KAEC,IAAIm+E,GAAYn+E,KAAKo+E,SAC3Bx2E,KAAMwf,EAAK,SAAW+wD,GAE5B,IAAI1sD,EAEJ,IAECA,EAAOphB,KAAK2Y,MAAOm1D,GAElB,MAAQx7E,GAET8B,QAAQ4pC,KAAM,yFACd5c,EAAOphB,KAAK2Y,MAAOm1D,EAAKx0E,UAAW,GAAIw0E,EAAKx6E,OAAS,IAItD,IAAI06E,EAAOrvC,EAAMhmB,MAAOyI,GAEnBlT,GAASA,EAAQ8/D,IAEpBsF,EAAY7sE,IAIhBkS,MAAO,SAAWyI,GAEjB,OAAO,IAAIm5D,GAAMn5D,MAMnB,IAAIyR,GAEAyoD,IAEH9kD,WAAY,WAQX,YANiB9xB,IAAZmuB,KAEJA,GAAU,IAAMr3B,OAAO8/E,cAAgB9/E,OAAO6qI,qBAIxCxzG,IAIRyzG,WAAY,SAAWxxI,GAEtB+9B,GAAU/9B,IAgBZjB,OAAO20F,OAAQ/N,GAAY3mF,WAE1ByJ,KAAM,SAAWwf,EAAK7O,EAAQolE,EAAY7sE,GAEzC,IAAIqrH,EAAS,IAAIh+C,GAAYn+E,KAAKo+E,SAClC+9C,EAAOH,gBAAiB,eACxBG,EAAOv0H,KAAMwf,EAAK,SAAWrlB,GAEd4jF,GAAa9kD,aAEnB+vG,gBAAiB7uI,EAAQ,SAAW8uI,GAE3Ct4H,EAAQs4H,MAIPlzD,EAAY7sE,MA4BjB5S,OAAO20F,OAAQ9N,GAAa5mF,WAE3B6rC,OAAQ,WAEP,IAAIjrC,EAAUsyC,EAAOF,EAAKC,EAAQ1P,EAAMC,EAAKsP,EAAM+zC,EAE/C8rD,EAAW,IAAIn9G,EACfo9G,EAAU,IAAIp9G,EAElB,OAAO,SAAiB0J,GAMvB,GAJkBt+B,IAAaiB,MAAQqxC,IAAUhU,EAAOgU,OAASF,IAAQ9T,EAAO8T,KACvEC,IAAW/T,EAAO+T,OAASpxC,KAAKoxC,QAAU1P,IAASrE,EAAOqE,MAC1DC,IAAQtE,EAAOsE,KAAOsP,IAAS5T,EAAO4T,MAAQ+zC,IAAWhlF,KAAKglF,OAEpD,CAElBjmF,EAAWiB,KACXqxC,EAAQhU,EAAOgU,MACfF,EAAM9T,EAAO8T,IACbC,EAAS/T,EAAO+T,OAASpxC,KAAKoxC,OAC9B1P,EAAOrE,EAAOqE,KACdC,EAAMtE,EAAOsE,IACbsP,EAAO5T,EAAO4T,KAKd,IAII+/F,EAAMC,EAJNxyG,EAAmBpB,EAAOoB,iBAAiB7uB,QAE3CshI,GADJlsD,EAAShlF,KAAKglF,OAAS,GACWtjD,EAAO2P,EACrC8/F,EAASzvG,EAAOh/B,KAAKoqG,IAAK37E,GAAMuqD,QAAUvqC,EAAM,IAAUF,EAK9D8/F,EAAQn9G,SAAU,KAASoxD,EAC3B8rD,EAASl9G,SAAU,IAAOoxD,EAI1BgsD,GAASG,EAAO//F,EAAS8/F,EACzBD,EAAOE,EAAO//F,EAAS8/F,EAEvBzyG,EAAiB7K,SAAU,GAAM,EAAI8N,GAASuvG,EAAOD,GACrDvyG,EAAiB7K,SAAU,IAAQq9G,EAAOD,IAAWC,EAAOD,GAE5DhxI,KAAKs2D,QAAQ73B,iBAAiBh6B,KAAMg6B,GAIpCuyG,GAASG,EAAO//F,EAAS8/F,EACzBD,EAAOE,EAAO//F,EAAS8/F,EAEvBzyG,EAAiB7K,SAAU,GAAM,EAAI8N,GAASuvG,EAAOD,GACrDvyG,EAAiB7K,SAAU,IAAQq9G,EAAOD,IAAWC,EAAOD,GAE5DhxI,KAAKw2D,QAAQ/3B,iBAAiBh6B,KAAMg6B,GAIrCz+B,KAAKs2D,QAAQh4B,YAAY75B,KAAM44B,EAAOiB,aAAc+O,SAAU0jG,GAC9D/wI,KAAKw2D,QAAQl4B,YAAY75B,KAAM44B,EAAOiB,aAAc+O,SAAUyjG,IA5DxD,MAyJT7rD,GAAW9mF,UAAYD,OAAOwZ,OAAQq4B,GAAS5xC,YAC1BsJ,YAAcw9E,GAqBnCS,GAAcvnF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAEhEsJ,YAAai+E,GAEbO,SAAU,WAET,OAAOjmF,KAAK4lF,MAIbwrD,aAAc,WAEQ,OAAhBpxI,KAAK69C,SAET79C,KAAK4lF,KAAK76D,WAAY/qB,KAAK69C,QAC3B79C,KAAK69C,OAAO9yB,WAAY/qB,KAAKk9B,QAAQ4oD,aACrC9lF,KAAK4lF,KAAK3lF,QAASD,KAAKk9B,QAAQ4oD,aAChC9lF,KAAK69C,OAAS,OAMhBwzF,UAAW,WAEV,OAAOrxI,KAAK69C,QAIbyzF,UAAW,SAAWnyI,GAEA,OAAhBa,KAAK69C,QAET79C,KAAK4lF,KAAK76D,WAAY/qB,KAAK69C,QAC3B79C,KAAK69C,OAAO9yB,WAAY/qB,KAAKk9B,QAAQ4oD,cAIrC9lF,KAAK4lF,KAAK76D,WAAY/qB,KAAKk9B,QAAQ4oD,aAIpC9lF,KAAK69C,OAAS1+C,EACda,KAAK4lF,KAAK3lF,QAASD,KAAK69C,QACxB79C,KAAK69C,OAAO59C,QAASD,KAAKk9B,QAAQ4oD,cAInCyrD,gBAAiB,WAEhB,OAAOvxI,KAAK4lF,KAAKA,KAAKzmF,OAIvBqyI,gBAAiB,SAAWryI,GAE3Ba,KAAK4lF,KAAKA,KAAKzmF,MAAQA,GAIxBiuC,kBAAmB,WAElB,IAAIz2B,EAAW,IAAI+c,EACfyc,EAAa,IAAI9c,EACjBiJ,EAAQ,IAAI5I,EAEZmkC,EAAc,IAAInkC,EAEtB,OAAO,SAA4BirF,GAElC5uE,GAAS5xC,UAAUivC,kBAAkB1vC,KAAMsC,KAAM2+G,GAEjD,IAAI34B,EAAWhmF,KAAKk9B,QAAQ8oD,SACxBv4C,EAAKztC,KAAKytC,GAEdztC,KAAKs+B,YAAY6D,UAAWxrB,EAAUw5B,EAAY7T,GAElDu7B,EAAYnzD,IAAK,EAAG,GAAK,GAAI82F,gBAAiBrrD,GAEzC61C,EAASyrD,WAEbzrD,EAASyrD,UAAUC,eAAgB/6H,EAAS6Z,EAAGxwB,KAAKk9B,QAAQy0G,aAC5D3rD,EAAS4rD,UAAUF,eAAgB/6H,EAASyM,EAAGpjB,KAAKk9B,QAAQy0G,aAC5D3rD,EAAS6rD,UAAUH,eAAgB/6H,EAAS2b,EAAGtyB,KAAKk9B,QAAQy0G,aAC5D3rD,EAAS8rD,SAASJ,eAAgB75E,EAAYrnC,EAAGxwB,KAAKk9B,QAAQy0G,aAC9D3rD,EAAS+rD,SAASL,eAAgB75E,EAAYz0C,EAAGpjB,KAAKk9B,QAAQy0G,aAC9D3rD,EAASgsD,SAASN,eAAgB75E,EAAYvlC,EAAGtyB,KAAKk9B,QAAQy0G,aAC9D3rD,EAASisD,IAAIP,eAAgBjkG,EAAGjd,EAAGxwB,KAAKk9B,QAAQy0G,aAChD3rD,EAASksD,IAAIR,eAAgBjkG,EAAGrqB,EAAGpjB,KAAKk9B,QAAQy0G,aAChD3rD,EAASmsD,IAAIT,eAAgBjkG,EAAGnb,EAAGtyB,KAAKk9B,QAAQy0G,eAIhD3rD,EAAS2c,YAAahsF,EAAS6Z,EAAG7Z,EAASyM,EAAGzM,EAAS2b,GACvD0zD,EAASosD,eAAgBv6E,EAAYrnC,EAAGqnC,EAAYz0C,EAAGy0C,EAAYvlC,EAAGmb,EAAGjd,EAAGid,EAAGrqB,EAAGqqB,EAAGnb,KAlCrE,KA0EpByzD,GAAM5nF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQq4B,GAAS5xC,YAExDsJ,YAAas+E,GAEboB,UAAW,WAEV,OAAOnnF,KAAK4lF,MAIbysD,cAAe,SAAWC,GAOzB,OALAtyI,KAAKumF,oBAAqB,EAC1BvmF,KAAKwmF,WAAa,YAClBxmF,KAAKglB,OAASstH,EACdtyI,KAAKC,UAEED,MAIRuyI,UAAW,SAAW1B,GAOrB,OALA7wI,KAAK+B,OAAS8uI,EACd7wI,KAAKwmF,WAAa,SAEbxmF,KAAKkmF,UAAWlmF,KAAKwyI,OAEnBxyI,MAIRwyI,KAAM,WAEL,IAAwB,IAAnBxyI,KAAKsmF,UAAV,CAOA,IAAiC,IAA5BtmF,KAAKumF,mBAAV,CAOA,IAAIvhE,EAAShlB,KAAKk9B,QAAQu1G,qBAY1B,OAVAztH,EAAOjjB,OAAS/B,KAAK+B,OACrBijB,EAAOmhE,KAAOnmF,KAAKmmF,KACnBnhE,EAAO0tH,QAAU1yI,KAAK2yI,QAAQhnI,KAAM3L,MACpCglB,EAAOqhE,aAAaqrD,eAAgB1xI,KAAKqmF,aAAcrmF,KAAKomF,WAC5DphE,EAAO1jB,MAAO,EAAGtB,KAAKomF,WAEtBpmF,KAAKsmF,WAAY,EAEjBtmF,KAAKglB,OAASA,EAEPhlB,KAAKC,UAjBXxB,QAAQ4pC,KAAM,yDAPd5pC,QAAQ4pC,KAAM,2CA4BhB72B,MAAO,WAEN,IAAiC,IAA5BxR,KAAKumF,mBAWV,OAJAvmF,KAAKglB,OAAO4tH,OACZ5yI,KAAKomF,UAAYpmF,KAAKk9B,QAAQy0G,YAC9B3xI,KAAKsmF,WAAY,EAEVtmF,KATNvB,QAAQ4pC,KAAM,qDAahBuqG,KAAM,WAEL,IAAiC,IAA5B5yI,KAAKumF,mBAWV,OAJAvmF,KAAKglB,OAAO4tH,OACZ5yI,KAAKomF,UAAY,EACjBpmF,KAAKsmF,WAAY,EAEVtmF,KATNvB,QAAQ4pC,KAAM,qDAahBpoC,QAAS,WAER,GAAKD,KAAKymF,QAAQ9oF,OAAS,EAAI,CAE9BqC,KAAKglB,OAAO/kB,QAASD,KAAKymF,QAAS,IAEnC,IAAM,IAAIrpF,EAAI,EAAGI,EAAIwC,KAAKymF,QAAQ9oF,OAAQP,EAAII,EAAGJ,IAEhD4C,KAAKymF,QAASrpF,EAAI,GAAI6C,QAASD,KAAKymF,QAASrpF,IAI9C4C,KAAKymF,QAASzmF,KAAKymF,QAAQ9oF,OAAS,GAAIsC,QAASD,KAAKmnF,kBAItDnnF,KAAKglB,OAAO/kB,QAASD,KAAKmnF,aAI3B,OAAOnnF,MAIR+qB,WAAY,WAEX,GAAK/qB,KAAKymF,QAAQ9oF,OAAS,EAAI,CAE9BqC,KAAKglB,OAAO+F,WAAY/qB,KAAKymF,QAAS,IAEtC,IAAM,IAAIrpF,EAAI,EAAGI,EAAIwC,KAAKymF,QAAQ9oF,OAAQP,EAAII,EAAGJ,IAEhD4C,KAAKymF,QAASrpF,EAAI,GAAI2tB,WAAY/qB,KAAKymF,QAASrpF,IAIjD4C,KAAKymF,QAASzmF,KAAKymF,QAAQ9oF,OAAS,GAAIotB,WAAY/qB,KAAKmnF,kBAIzDnnF,KAAKglB,OAAO+F,WAAY/qB,KAAKmnF,aAI9B,OAAOnnF,MAIR6yI,WAAY,WAEX,OAAO7yI,KAAKymF,SAIbqsD,WAAY,SAAW3zI,GAgBtB,OAdOA,IAAQA,OAES,IAAnBa,KAAKsmF,WAETtmF,KAAK+qB,aACL/qB,KAAKymF,QAAUtnF,EACfa,KAAKC,WAILD,KAAKymF,QAAUtnF,EAITa,MAIRqxI,UAAW,WAEV,OAAOrxI,KAAK6yI,aAAc,IAI3BvB,UAAW,SAAWzzF,GAErB,OAAO79C,KAAK8yI,WAAYj1F,GAAWA,QAIpCk1F,gBAAiB,SAAW5zI,GAE3B,IAAiC,IAA5Ba,KAAKumF,mBAeV,OARAvmF,KAAKqmF,aAAelnF,GAEI,IAAnBa,KAAKsmF,WAETtmF,KAAKglB,OAAOqhE,aAAaqrD,eAAgB1xI,KAAKqmF,aAAcrmF,KAAKk9B,QAAQy0G,aAInE3xI,KAbNvB,QAAQ4pC,KAAM,qDAiBhB2qG,gBAAiB,WAEhB,OAAOhzI,KAAKqmF,cAIbssD,QAAS,WAER3yI,KAAKsmF,WAAY,GAIlB2sD,QAAS,WAER,OAAiC,IAA5BjzI,KAAKumF,oBAET9nF,QAAQ4pC,KAAM,qDACP,GAIDroC,KAAKmmF,MAIb+sD,QAAS,SAAW/zI,GAEnB,IAAiC,IAA5Ba,KAAKumF,mBAeV,OARAvmF,KAAKmmF,KAAOhnF,GAEY,IAAnBa,KAAKsmF,YAETtmF,KAAKglB,OAAOmhE,KAAOnmF,KAAKmmF,MAIlBnmF,KAbNvB,QAAQ4pC,KAAM,qDAiBhB8qG,UAAW,WAEV,OAAOnzI,KAAK4lF,KAAKA,KAAKzmF,OAIvBi0I,UAAW,SAAWj0I,GAIrB,OAFAa,KAAK4lF,KAAKA,KAAKzmF,MAAQA,EAEhBa,QAmBT0mF,GAAgBvoF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQquE,GAAM5nF,YAE/DsJ,YAAai/E,GAEbS,UAAW,WAEV,OAAOnnF,KAAK2mF,QAIb0sD,eAAgB,WAEf,OAAOrzI,KAAK2mF,OAAO2sD,aAIpBC,eAAgB,SAAWp0I,GAE1Ba,KAAK2mF,OAAO2sD,YAAcn0I,GAI3Bq0I,iBAAkB,WAEjB,OAAOxzI,KAAK2mF,OAAO8sD,eAIpBC,iBAAkB,SAAWv0I,GAE5Ba,KAAK2mF,OAAO8sD,cAAgBt0I,GAI7Bw0I,iBAAkB,WAEjB,OAAO3zI,KAAK2mF,OAAOitD,eAIpBC,iBAAkB,SAAW10I,GAE5Ba,KAAK2mF,OAAOitD,cAAgBz0I,GAI7B20I,eAAgB,WAEf,OAAO9zI,KAAK2mF,OAAOotD,aAIpBC,eAAgB,SAAW70I,GAE1Ba,KAAK2mF,OAAOotD,YAAc50I,GAI3BiuC,kBAAmB,WAElB,IAAIz2B,EAAW,IAAI+c,EAEnB,OAAO,SAA4BirF,GAElC5uE,GAAS5xC,UAAUivC,kBAAkB1vC,KAAMsC,KAAM2+G,GAEjDhoG,EAASs2B,sBAAuBjtC,KAAKs+B,aAErCt+B,KAAK2mF,OAAOgc,YAAahsF,EAAS6Z,EAAG7Z,EAASyM,EAAGzM,EAAS2b,IAVzC,KAkCpBp0B,OAAO20F,OAAQhM,GAAc1oF,WAE5B81I,iBAAkB,WAIjB,OAFAj0I,KAAKgnF,SAASktD,qBAAsBl0I,KAAKQ,MAElCR,KAAKQ,MAIb2zI,oBAAqB,WAIpB,IAAM,IAFFh1I,EAAQ,EAAGqB,EAAOR,KAAKi0I,mBAEjB72I,EAAI,EAAGA,EAAIoD,EAAK7C,OAAQP,IAEjC+B,GAASqB,EAAMpD,GAIhB,OAAO+B,EAAQqB,EAAK7C,UA8DtBO,OAAO20F,OAAQzL,GAAcjpF,WAG5Bi2I,WAAY,SAAWC,EAAWnpD,GAKjC,IAAInpF,EAAS/B,KAAK+B,OACjBu6D,EAASt8D,KAAK4/E,UACd/tD,EAASwiH,EAAY/3E,EAASA,EAE9Bg4E,EAAgBt0I,KAAK2nF,iBAEtB,GAAuB,IAAlB2sD,EAAsB,CAI1B,IAAM,IAAIl3I,EAAI,EAAGA,IAAMk/D,IAAWl/D,EAEjC2E,EAAQ8vB,EAASz0B,GAAM2E,EAAQ3E,GAIhCk3I,EAAgBppD,MAEV,CAKN,IAAIqpD,EAAMrpD,GADVopD,GAAiBppD,GAEjBlrF,KAAK0nF,iBAAkB3lF,EAAQ8vB,EAAQ,EAAG0iH,EAAKj4E,GAIhDt8D,KAAK2nF,iBAAmB2sD,GAKzBnuI,MAAO,SAAWkuI,GAEjB,IAAI/3E,EAASt8D,KAAK4/E,UACjB79E,EAAS/B,KAAK+B,OACd8vB,EAASwiH,EAAY/3E,EAASA,EAE9B4uB,EAASlrF,KAAK2nF,iBAEd/gE,EAAU5mB,KAAK4mB,QAIhB,GAFA5mB,KAAK2nF,iBAAmB,EAEnBuD,EAAS,EAAI,CAIjB,IAAIspD,EAA+B,EAATl4E,EAE1Bt8D,KAAK0nF,iBACJ3lF,EAAQ8vB,EAAQ2iH,EAAqB,EAAItpD,EAAQ5uB,GAInD,IAAM,IAAIl/D,EAAIk/D,EAAQ3/D,EAAI2/D,EAASA,EAAQl/D,IAAMT,IAAMS,EAEtD,GAAK2E,EAAQ3E,KAAQ2E,EAAQ3E,EAAIk/D,GAAW,CAI3C11C,EAAQyR,SAAUt2B,EAAQ8vB,GAC1B,QASH4iH,kBAAmB,WAElB,IAAI7tH,EAAU5mB,KAAK4mB,QAEf7kB,EAAS/B,KAAK+B,OACjBu6D,EAASt8D,KAAK4/E,UAEd40D,EAA+B,EAATl4E,EAEvB11C,EAAQ8tH,SAAU3yI,EAAQyyI,GAG1B,IAAM,IAAIp3I,EAAIk/D,EAAQ3/D,EAAI63I,EAAqBp3I,IAAMT,IAAMS,EAE1D2E,EAAQ3E,GAAM2E,EAAQyyI,EAAwBp3I,EAAIk/D,GAInDt8D,KAAK2nF,iBAAmB,GAKzBgtD,qBAAsB,WAErB,IAAIH,EAAuC,EAAjBx0I,KAAK4/E,UAC/B5/E,KAAK4mB,QAAQyR,SAAUr4B,KAAK+B,OAAQyyI,IAOrChtD,QAAS,SAAWzlF,EAAQq3D,EAAWokE,EAAW5gI,EAAG0/D,GAEpD,GAAK1/D,GAAK,GAET,IAAM,IAAIQ,EAAI,EAAGA,IAAMk/D,IAAWl/D,EAEjC2E,EAAQq3D,EAAYh8D,GAAM2E,EAAQy7H,EAAYpgI,IAQjDmqF,OAAQ,SAAWxlF,EAAQq3D,EAAWokE,EAAW5gI,GAEhDy2B,EAAWqlE,UAAW32F,EAAQq3D,EAAWr3D,EAAQq3D,EAAWr3D,EAAQy7H,EAAW5gI,IAIhF6qF,MAAO,SAAW1lF,EAAQq3D,EAAWokE,EAAW5gI,EAAG0/D,GAIlD,IAAM,IAFFv/D,EAAI,EAAIH,EAEFQ,EAAI,EAAGA,IAAMk/D,IAAWl/D,EAAI,CAErC,IAAI+M,EAAIivD,EAAYh8D,EAEpB2E,EAAQoI,GAAMpI,EAAQoI,GAAMpN,EAAIgF,EAAQy7H,EAAYpgI,GAAMR,MA2B7DsB,OAAO20F,OAAQ/K,GAAU3pF,WAExBu2I,SAAU,SAAWj0H,EAAOoR,GAE3B7xB,KAAK2L,OAEL,IAAIipI,EAAkB50I,KAAKooF,aAAaS,gBACvCjiE,EAAU5mB,KAAKqoF,UAAWusD,QAGV7lI,IAAZ6X,GAAwBA,EAAQ8tH,SAAUj0H,EAAOoR,IAIvDwG,SAAU,SAAW5X,EAAOoR,GAI3B,IAAM,IAFFgjH,EAAW70I,KAAKqoF,UAEVjrF,EAAI4C,KAAKooF,aAAaS,gBAC5BhsF,EAAIg4I,EAASl3I,OAAQP,IAAMP,IAAMO,EAEpCy3I,EAAUz3I,GAAIi7B,SAAU5X,EAAOoR,IAMjClmB,KAAM,WAIL,IAAM,IAFFkpI,EAAW70I,KAAKqoF,UAEVjrF,EAAI4C,KAAKooF,aAAaS,gBAC5BhsF,EAAIg4I,EAASl3I,OAAQP,IAAMP,IAAMO,EAEpCy3I,EAAUz3I,GAAIuO,QAMhBmpI,OAAQ,WAIP,IAAM,IAFFD,EAAW70I,KAAKqoF,UAEVjrF,EAAI4C,KAAKooF,aAAaS,gBAC5BhsF,EAAIg4I,EAASl3I,OAAQP,IAAMP,IAAMO,EAEpCy3I,EAAUz3I,GAAI03I,YAoBjB52I,OAAO20F,OAAQ3K,IAEdJ,UAAWA,GAEXpwE,OAAQ,SAAWwI,EAAM3S,EAAM06E,GAE9B,OAAS/nE,GAAQA,EAAK60H,uBAMd,IAAI7sD,GAAgBJ,UAAW5nE,EAAM3S,EAAM06E,GAJ3C,IAAIC,GAAiBhoE,EAAM3S,EAAM06E,IAiB1C+sD,iBAAkB,SAAW7oI,GAE5B,OAAOA,EAAKxD,QAAS,MAAO,KAAMA,QAAS,UAAW,KAIvDw/E,eAAgB,WAIf,IAAI8sD,EAAc,qBAGdC,EAAS,cAITC,EAAW,+BAIXC,EAAa,0BAEbC,EAAU,IAAI1rI,OACf,IACAsrI,EAAYjwH,OACZkwH,EAAOlwH,OACPmwH,EAASnwH,OACTowH,EAAWpwH,OACX,KAGCswH,GAAyB,WAAY,YAAa,SAEtD,OAAO,SAAW9S,GAEhB,IAAI+S,EAAUF,EAAQnyH,KAAMs/G,GAE5B,IAAO+S,EAEN,MAAM,IAAIj4I,MAAO,4CAA8CklI,GAIhE,IAAIrkH,GAEHuqE,SAAU6sD,EAAS,GACnBC,WAAYD,EAAS,GACrBE,YAAaF,EAAS,GACtB7S,aAAc6S,EAAS,GACvBG,cAAeH,EAAS,IAGrBI,EAAUx3H,EAAQuqE,UAAYvqE,EAAQuqE,SAASw/C,YAAa,KAEhE,QAAiBn5H,IAAZ4mI,IAAsC,IAAbA,EAAiB,CAE9C,IAAIH,EAAar3H,EAAQuqE,SAAS/kF,UAAWgyI,EAAU,IAMF,IAAhDL,EAAqB/kI,QAASilI,KAElCr3H,EAAQuqE,SAAWvqE,EAAQuqE,SAAS/kF,UAAW,EAAGgyI,GAClDx3H,EAAQq3H,WAAaA,GAMvB,GAA8B,OAAzBr3H,EAAQukH,cAAyD,IAAhCvkH,EAAQukH,aAAa/kI,OAE1D,MAAM,IAAIL,MAAO,+DAAiEklI,GAInF,OAAOrkH,GAxEM,GA8EhBsqE,SAAU,SAAWvoE,EAAMwoE,GAE1B,IAAOA,GAAyB,KAAbA,GAAgC,SAAbA,GAAoC,MAAbA,IAAmC,IAAfA,GAAoBA,IAAaxoE,EAAK/T,MAAQu8E,IAAaxoE,EAAKgR,KAEhJ,OAAOhR,EAKR,GAAKA,EAAKsjC,SAAW,CAEpB,IAkBIorC,EAlBiB,SAAWprC,GAE/B,IAAM,IAAIpmD,EAAI,EAAGA,EAAIomD,EAASD,MAAM5lD,OAAQP,IAAO,CAElD,IAAIwxF,EAAOprC,EAASD,MAAOnmD,GAE3B,GAAKwxF,EAAKziF,OAASu8E,EAElB,OAAOkG,EAMT,OAAO,KAIGgnD,CAAgB11H,EAAKsjC,UAEhC,GAAKorC,EAEJ,OAAOA,EAOT,GAAK1uE,EAAKwqB,SAAW,CAEpB,IAAImrG,EAAoB,SAAWnrG,GAElC,IAAM,IAAIttC,EAAI,EAAGA,EAAIstC,EAAS/sC,OAAQP,IAAO,CAE5C,IAAI04I,EAAYprG,EAAUttC,GAE1B,GAAK04I,EAAU3pI,OAASu8E,GAAYotD,EAAU5kH,OAASw3D,EAEtD,OAAOotD,EAIR,IAAI50I,EAAS20I,EAAmBC,EAAUprG,UAE1C,GAAKxpC,EAAS,OAAOA,EAItB,OAAO,MAIJ60I,EAAcF,EAAmB31H,EAAKwqB,UAE1C,GAAKqrG,EAEJ,OAAOA,EAMT,OAAO,QAMT73I,OAAO20F,OAAQ3K,GAAgB/pF,WAG9B63I,sBAAuB,aACvBC,sBAAuB,aAEvBC,aACCC,OAAQ,EACRC,YAAa,EACbC,aAAc,EACdC,eAAgB,GAGjBC,YACCC,KAAM,EACNC,YAAa,EACbC,uBAAwB,GAGzBC,qBAEC,SAA0B50I,EAAQ8vB,GAEjC9vB,EAAQ8vB,GAAW7xB,KAAKwoF,KAAMxoF,KAAK0iI,eAIpC,SAAyB3gI,EAAQ8vB,GAIhC,IAAM,IAFF7M,EAAShlB,KAAK42I,iBAERx5I,EAAI,EAAGP,EAAImoB,EAAOrnB,OAAQP,IAAMP,IAAMO,EAE/C2E,EAAQ8vB,KAAc7M,EAAQ5nB,IAMhC,SAAgC2E,EAAQ8vB,GAEvC9vB,EAAQ8vB,GAAW7xB,KAAK42I,iBAAkB52I,KAAK01I,gBAIhD,SAA2B3zI,EAAQ8vB,GAElC7xB,KAAK42I,iBAAiB5qH,QAASjqB,EAAQ8vB,KAMzCglH,mCAKE,SAA0B90I,EAAQ8vB,GAEjC7xB,KAAKwoF,KAAMxoF,KAAK0iI,cAAiB3gI,EAAQ8vB,IAI1C,SAAyC9vB,EAAQ8vB,GAEhD7xB,KAAKwoF,KAAMxoF,KAAK0iI,cAAiB3gI,EAAQ8vB,GACzC7xB,KAAK82I,aAAa91G,aAAc,GAIjC,SAAoDj/B,EAAQ8vB,GAE3D7xB,KAAKwoF,KAAMxoF,KAAK0iI,cAAiB3gI,EAAQ8vB,GACzC7xB,KAAK82I,aAAapmG,wBAAyB,KAQ5C,SAAyB3uC,EAAQ8vB,GAIhC,IAAM,IAFFklH,EAAO/2I,KAAK42I,iBAENx5I,EAAI,EAAGP,EAAIk6I,EAAKp5I,OAAQP,IAAMP,IAAMO,EAE7C25I,EAAM35I,GAAM2E,EAAQ8vB,MAMtB,SAAwC9vB,EAAQ8vB,GAI/C,IAAM,IAFFklH,EAAO/2I,KAAK42I,iBAENx5I,EAAI,EAAGP,EAAIk6I,EAAKp5I,OAAQP,IAAMP,IAAMO,EAE7C25I,EAAM35I,GAAM2E,EAAQ8vB,KAIrB7xB,KAAK82I,aAAa91G,aAAc,GAIjC,SAAmDj/B,EAAQ8vB,GAI1D,IAAM,IAFFklH,EAAO/2I,KAAK42I,iBAENx5I,EAAI,EAAGP,EAAIk6I,EAAKp5I,OAAQP,IAAMP,IAAMO,EAE7C25I,EAAM35I,GAAM2E,EAAQ8vB,KAIrB7xB,KAAK82I,aAAapmG,wBAAyB,KAQ5C,SAAgC3uC,EAAQ8vB,GAEvC7xB,KAAK42I,iBAAkB52I,KAAK01I,eAAkB3zI,EAAQ8vB,IAIvD,SAA+C9vB,EAAQ8vB,GAEtD7xB,KAAK42I,iBAAkB52I,KAAK01I,eAAkB3zI,EAAQ8vB,GACtD7xB,KAAK82I,aAAa91G,aAAc,GAIjC,SAA0Dj/B,EAAQ8vB,GAEjE7xB,KAAK42I,iBAAkB52I,KAAK01I,eAAkB3zI,EAAQ8vB,GACtD7xB,KAAK82I,aAAapmG,wBAAyB,KAQ5C,SAA6B3uC,EAAQ8vB,GAEpC7xB,KAAK42I,iBAAiBh/E,UAAW71D,EAAQ8vB,IAI1C,SAA4C9vB,EAAQ8vB,GAEnD7xB,KAAK42I,iBAAiBh/E,UAAW71D,EAAQ8vB,GACzC7xB,KAAK82I,aAAa91G,aAAc,GAIjC,SAAuDj/B,EAAQ8vB,GAE9D7xB,KAAK42I,iBAAiBh/E,UAAW71D,EAAQ8vB,GACzC7xB,KAAK82I,aAAapmG,wBAAyB,KAQ9CgkG,SAAU,SAA2BsC,EAAanlH,GAEjD7xB,KAAK2L,OACL3L,KAAK00I,SAAUsC,EAAanlH,IAU7BwG,SAAU,SAA2B4+G,EAAaplH,GAEjD7xB,KAAK2L,OACL3L,KAAKq4B,SAAU4+G,EAAaplH,IAK7BlmB,KAAM,WAEL,IAAImrI,EAAe92I,KAAKwoF,KACvBP,EAAajoF,KAAKioF,WAElButD,EAAavtD,EAAWutD,WACxB9S,EAAez6C,EAAWy6C,aAC1BgT,EAAgBztD,EAAWytD,cAgB5B,GAdOoB,IAENA,EAAe5uD,GAAgBO,SAC7BzoF,KAAKuoF,SAAUN,EAAWS,WAAc1oF,KAAKuoF,SAE/CvoF,KAAKwoF,KAAOsuD,GAKb92I,KAAK00I,SAAW10I,KAAKg2I,sBACrBh2I,KAAKq4B,SAAWr4B,KAAKi2I,sBAGda,EAAP,CAOA,GAAKtB,EAAa,CAEjB,IAAIC,EAAcxtD,EAAWwtD,YAG7B,OAASD,GAER,IAAK,YAEJ,IAAOsB,EAAa90G,SAGnB,YADAvjC,QAAQqT,MAAO,oFAAqF9R,MAKrG,IAAO82I,EAAa90G,SAASg9E,UAG5B,YADAvgH,QAAQqT,MAAO,8GAA+G9R,MAK/H82I,EAAeA,EAAa90G,SAASg9E,UAErC,MAED,IAAK,QAEJ,IAAO83B,EAAatzF,SAGnB,YADA/kD,QAAQqT,MAAO,iFAAkF9R,MAQlG82I,EAAeA,EAAatzF,SAASD,MAGrC,IAAUnmD,EAAI,EAAGA,EAAI05I,EAAan5I,OAAQP,IAEzC,GAAK05I,EAAc15I,GAAI+O,OAASspI,EAAc,CAE7CA,EAAcr4I,EACd,MAMF,MAED,QAEC,QAAoC2R,IAA/B+nI,EAActB,GAGlB,YADA/2I,QAAQqT,MAAO,uEAAwE9R,MAKxF82I,EAAeA,EAActB,GAK/B,QAAqBzmI,IAAhB0mI,EAA4B,CAEhC,QAAqC1mI,IAAhC+nI,EAAcrB,GAGlB,YADAh3I,QAAQqT,MAAO,wFAAyF9R,KAAM82I,GAK/GA,EAAeA,EAAcrB,IAO/B,IAAIyB,EAAeJ,EAAcpU,GAEjC,QAAsB3zH,IAAjBmoI,EAAL,CAWA,IAAIC,EAAan3I,KAAKu2I,WAAWC,UAECznI,IAA7B+nI,EAAa91G,aAEjBm2G,EAAan3I,KAAKu2I,WAAWE,YAC7Bz2I,KAAK82I,aAAeA,QAE+B/nI,IAAxC+nI,EAAapmG,yBAExBymG,EAAan3I,KAAKu2I,WAAWG,uBAC7B12I,KAAK82I,aAAeA,GAKrB,IAAIM,EAAcp3I,KAAKk2I,YAAYC,OAEnC,QAAuBpnI,IAAlB2mI,EAA8B,CAIlC,GAAsB,0BAAjBhT,EAA2C,CAK/C,IAAOoU,EAAarvG,SAGnB,YADAhpC,QAAQqT,MAAO,sGAAuG9R,MAKvH,GAAK82I,EAAarvG,SAASQ,iBAAmB,CAE7C,IAAO6uG,EAAarvG,SAASS,gBAG5B,YADAzpC,QAAQqT,MAAO,sHAAuH9R,MAKvI,IAAU5C,EAAI,EAAGA,EAAI4C,KAAKwoF,KAAK/gD,SAASS,gBAAgBvxB,SAAShZ,OAAQP,IAExE,GAAK05I,EAAarvG,SAASS,gBAAgBvxB,SAAUvZ,GAAI+O,OAASupI,EAAgB,CAEjFA,EAAgBt4I,EAChB,WAOI,CAEN,IAAO05I,EAAarvG,SAAS3C,aAG5B,YADArmC,QAAQqT,MAAO,mHAAoH9R,MAKpI,IAAM,IAAI5C,EAAI,EAAGA,EAAI4C,KAAKwoF,KAAK/gD,SAAS3C,aAAannC,OAAQP,IAE5D,GAAK05I,EAAarvG,SAAS3C,aAAc1nC,GAAI+O,OAASupI,EAAgB,CAErEA,EAAgBt4I,EAChB,QAUJg6I,EAAcp3I,KAAKk2I,YAAYG,aAE/Br2I,KAAK42I,iBAAmBM,EACxBl3I,KAAK01I,cAAgBA,YAEiB3mI,IAA3BmoI,EAAat/E,gBAAoD7oD,IAAzBmoI,EAAalrH,SAIhEorH,EAAcp3I,KAAKk2I,YAAYI,eAE/Bt2I,KAAK42I,iBAAmBM,GAEb7rI,MAAMgX,QAAS60H,IAE1BE,EAAcp3I,KAAKk2I,YAAYE,YAE/Bp2I,KAAK42I,iBAAmBM,GAIxBl3I,KAAK0iI,aAAeA,EAKrB1iI,KAAK00I,SAAW10I,KAAK22I,oBAAqBS,GAC1Cp3I,KAAKq4B,SAAWr4B,KAAK62I,iCAAkCO,GAAeD,OApHtE,CAEC,IAAIzuD,EAAWT,EAAWS,SAE1BjqF,QAAQqT,MAAO,+DAAiE42E,EAC/E,IAAMg6C,EAAe,wBAA0BoU,SAjGhDr4I,QAAQqT,MAAO,2DAA6D9R,KAAKuN,KAAO,0BAoN1FunI,OAAQ,WAEP90I,KAAKwoF,KAAO,KAIZxoF,KAAK00I,SAAW10I,KAAKq3I,kBACrBr3I,KAAKq4B,SAAWr4B,KAAKs3I,qBAOvBp5I,OAAO20F,OAAQ3K,GAAgB/pF,WAG9Bk5I,kBAAmBnvD,GAAgB/pF,UAAUu2I,SAC7C4C,kBAAmBpvD,GAAgB/pF,UAAUk6B,WA0E9Cn6B,OAAO20F,OAAQlK,GAAqBxqF,WAEnC42I,wBAAwB,EAExBtqH,IAAK,SAAUm+D,GAWd,IAAM,IATFlxC,EAAU13C,KAAKmnC,SAClBowG,EAAW7/F,EAAQ/5C,OACnB65I,EAAiBx3I,KAAK6oF,gBACtB4uD,EAAgBz3I,KAAK8oF,eACrBonD,EAAQlwI,KAAK+oF,OACb2uD,EAAc13I,KAAKgpF,aACnB6rD,EAAW70I,KAAKqoF,UAChBsvD,EAAY9C,EAASl3I,OAEZP,EAAI,EAAGP,EAAIqJ,UAAUvI,OAAQP,IAAMP,IAAMO,EAAI,CAEtD,IAAIkqC,EAASphC,UAAW9I,GACvB8zB,EAAOoW,EAAOpW,KACdzoB,EAAQgvI,EAAevmH,GACvB0mH,OAAc7oI,EAEf,QAAeA,IAAVtG,EAAsB,CAI1BA,EAAQ8uI,IACRE,EAAevmH,GAASzoB,EACxBivC,EAAQ/wC,KAAM2gC,GAId,IAAM,IAAIn9B,EAAI,EAAGoZ,EAAIo0H,EAAWxtI,IAAMoZ,IAAMpZ,EAE3C0qI,EAAU1qI,GAAIxD,KACZ,IAAIuhF,GACH5gD,EAAQ4oG,EAAO/lI,GAAKutI,EAAavtI,UAI/B,GAAK1B,EAAQ+uI,EAAiB,CAEpCI,EAAclgG,EAASjvC,GAIvB,IAAIovI,IAAsBL,EACzBM,EAAmBpgG,EAASmgG,GAE7BJ,EAAeK,EAAiB5mH,MAASzoB,EACzCivC,EAASjvC,GAAUqvI,EAEnBL,EAAevmH,GAAS2mH,EACxBngG,EAASmgG,GAAqBvwG,EAI9B,IAAM,IAAIn9B,EAAI,EAAGoZ,EAAIo0H,EAAWxtI,IAAMoZ,IAAMpZ,EAAI,CAE/C,IAAI4tI,EAAkBlD,EAAU1qI,GAC/B6tI,EAAaD,EAAiBF,GAC9BjxH,EAAUmxH,EAAiBtvI,GAE5BsvI,EAAiBtvI,GAAUuvI,OAEVjpI,IAAZ6X,IAMJA,EAAU,IAAIshE,GACZ5gD,EAAQ4oG,EAAO/lI,GAAKutI,EAAavtI,KAIpC4tI,EAAiBF,GAAqBjxH,QAI5B8wB,EAASjvC,KAAYmvI,GAEhCn5I,QAAQqT,MAAO,sJAOjB9R,KAAK6oF,gBAAkB2uD,GAIxBjoG,OAAQ,SAAUq5C,GAQjB,IAAM,IANFlxC,EAAU13C,KAAKmnC,SAClBqwG,EAAiBx3I,KAAK6oF,gBACtB4uD,EAAgBz3I,KAAK8oF,eACrB+rD,EAAW70I,KAAKqoF,UAChBsvD,EAAY9C,EAASl3I,OAEZP,EAAI,EAAGP,EAAIqJ,UAAUvI,OAAQP,IAAMP,IAAMO,EAAI,CAEtD,IAAIkqC,EAASphC,UAAW9I,GACvB8zB,EAAOoW,EAAOpW,KACdzoB,EAAQgvI,EAAevmH,GAExB,QAAeniB,IAAVtG,GAAuBA,GAAS+uI,EAAiB,CAIrD,IAAIS,EAAkBT,IACrBU,EAAoBxgG,EAASugG,GAE9BR,EAAeS,EAAkBhnH,MAASzoB,EAC1CivC,EAASjvC,GAAUyvI,EAEnBT,EAAevmH,GAAS+mH,EACxBvgG,EAASugG,GAAoB3wG,EAI7B,IAAM,IAAIn9B,EAAI,EAAGoZ,EAAIo0H,EAAWxtI,IAAMoZ,IAAMpZ,EAAI,CAE/C,IAAI4tI,EAAkBlD,EAAU1qI,GAC/BguI,EAAcJ,EAAiBE,GAC/BrxH,EAAUmxH,EAAiBtvI,GAE5BsvI,EAAiBtvI,GAAU0vI,EAC3BJ,EAAiBE,GAAoBrxH,IAQxC5mB,KAAK6oF,gBAAkB2uD,GAKxBY,QAAS,SAAUxvD,GASlB,IAAM,IAPFlxC,EAAU13C,KAAKmnC,SAClBowG,EAAW7/F,EAAQ/5C,OACnB65I,EAAiBx3I,KAAK6oF,gBACtB4uD,EAAgBz3I,KAAK8oF,eACrB+rD,EAAW70I,KAAKqoF,UAChBsvD,EAAY9C,EAASl3I,OAEZP,EAAI,EAAGP,EAAIqJ,UAAUvI,OAAQP,IAAMP,IAAMO,EAAI,CAEtD,IACC8zB,EADYhrB,UAAW9I,GACT8zB,KACdzoB,EAAQgvI,EAAevmH,GAExB,QAAeniB,IAAVtG,EAIJ,UAFOgvI,EAAevmH,GAEjBzoB,EAAQ+uI,EAAiB,CAI7B,IAAIK,IAAsBL,EACzBM,EAAmBpgG,EAASmgG,GAE5BQ,EAAa3gG,EADb5e,IAAey+G,GAIhBE,EAAeK,EAAiB5mH,MAASzoB,EACzCivC,EAASjvC,GAAUqvI,EAGnBL,EAAeY,EAAWnnH,MAAS2mH,EACnCngG,EAASmgG,GAAqBQ,EAC9B3gG,EAAQhrB,MAIR,IAAM,IAAIviB,EAAI,EAAGoZ,EAAIo0H,EAAWxtI,IAAMoZ,IAAMpZ,EAAI,CAE/C,IACC6tI,GADGD,EAAkBlD,EAAU1qI,IACD0tI,GAC9BnO,EAAOqO,EAAiBj/G,GAEzBi/G,EAAiBtvI,GAAUuvI,EAC3BD,EAAiBF,GAAqBnO,EACtCqO,EAAgBrrH,WAIX,CAIN,IAAIoM,IAAey+G,EAGnBE,GAFCY,EAAa3gG,EAAS5e,IAEG5H,MAASzoB,EACnCivC,EAASjvC,GAAU4vI,EACnB3gG,EAAQhrB,MAIR,IAAM,IAAIviB,EAAI,EAAGoZ,EAAIo0H,EAAWxtI,IAAMoZ,IAAMpZ,EAAI,CAE/C,IAAI4tI,EAAkBlD,EAAU1qI,GAEhC4tI,EAAiBtvI,GAAUsvI,EAAiBj/G,GAC5Ci/G,EAAgBrrH,QAUpB1sB,KAAK6oF,gBAAkB2uD,GAMxBlvD,WAAY,SAAW/6E,EAAM06E,GAK5B,IAAIqwD,EAAgBt4I,KAAKipF,uBACxBxgF,EAAQ6vI,EAAe/qI,GACvBsnI,EAAW70I,KAAKqoF,UAEjB,QAAet5E,IAAVtG,EAAsB,OAAOosI,EAAUpsI,GAE5C,IAAIynI,EAAQlwI,KAAK+oF,OAChB2uD,EAAc13I,KAAKgpF,aACnBtxC,EAAU13C,KAAKmnC,SACfowG,EAAW7/F,EAAQ/5C,OACnB65I,EAAiBx3I,KAAK6oF,gBACtBkvD,EAAkB,IAAI1sI,MAAOksI,GAE9B9uI,EAAQosI,EAASl3I,OAEjB26I,EAAe/qI,GAAS9E,EAExBynI,EAAMvpI,KAAM4G,GACZmqI,EAAY/wI,KAAMshF,GAClB4sD,EAASluI,KAAMoxI,GAEf,IAAM,IAAI36I,EAAIo6I,EAAgB36I,EAAI66C,EAAQ/5C,OAAQP,IAAMP,IAAMO,EAAI,CAEjE,IAAIkqC,EAASoQ,EAASt6C,GACtB26I,EAAiB36I,GAAM,IAAI8qF,GAAiB5gD,EAAQ/5B,EAAM06E,GAI3D,OAAO8vD,GAIRQ,aAAc,SAAWhrI,GAKxB,IAAI+qI,EAAgBt4I,KAAKipF,uBACxBxgF,EAAQ6vI,EAAe/qI,GAExB,QAAewB,IAAVtG,EAAsB,CAE1B,IAAIynI,EAAQlwI,KAAK+oF,OAChB2uD,EAAc13I,KAAKgpF,aACnB6rD,EAAW70I,KAAKqoF,UAChBmwD,EAAoB3D,EAASl3I,OAAS,EACtC86I,EAAe5D,EAAU2D,GAG1BF,EAFoB/qI,EAAMirI,IAEU/vI,EAEpCosI,EAAUpsI,GAAUgwI,EACpB5D,EAASnoH,MAETgrH,EAAajvI,GAAUivI,EAAac,GACpCd,EAAYhrH,MAEZwjH,EAAOznI,GAAUynI,EAAOsI,GACxBtI,EAAMxjH,UAoFTxuB,OAAO20F,OAAQxJ,GAAgBlrF,WAI9Bq0I,KAAM,WAIL,OAFAxyI,KAAKypF,OAAOivD,gBAAiB14I,MAEtBA,MAIR4yI,KAAM,WAIL,OAFA5yI,KAAKypF,OAAOkvD,kBAAmB34I,MAExBA,KAAKgD,SAIbA,MAAO,WASN,OAPAhD,KAAKqrF,QAAS,EACdrrF,KAAKgL,SAAU,EAEfhL,KAAK+qF,KAAO,EACZ/qF,KAAK6qF,YAAc,EACnB7qF,KAAK8qF,WAAa,KAEX9qF,KAAK44I,aAAaC,eAI1BC,UAAW,WAEV,OAAO94I,KAAKgL,UAAahL,KAAKqrF,QAA6B,IAAnBrrF,KAAKgrF,WACvB,OAApBhrF,KAAK8qF,YAAuB9qF,KAAKypF,OAAOsvD,gBAAiB/4I,OAK5Dg5I,YAAa,WAEZ,OAAOh5I,KAAKypF,OAAOsvD,gBAAiB/4I,OAIrCi5I,QAAS,SAAUluD,GAIlB,OAFA/qF,KAAK8qF,WAAaC,EAEX/qF,MAIRkzI,QAAS,SAAUz5F,EAAM2xC,GAKxB,OAHAprF,KAAKmmF,KAAO1sC,EACZz5C,KAAKorF,YAAcA,EAEZprF,MASRk5I,mBAAoB,SAAUhuD,GAO7B,OALAlrF,KAAKkrF,OAASA,EAGdlrF,KAAKmrF,iBAAmBnrF,KAAKgL,QAAUkgF,EAAS,EAEzClrF,KAAK44I,cAKbO,mBAAoB,WAEnB,OAAOn5I,KAAKmrF,kBAIbiuD,OAAQ,SAAU32I,GAEjB,OAAOzC,KAAKq5I,gBAAiB52I,EAAU,EAAG,IAI3C62I,QAAS,SAAU72I,GAElB,OAAOzC,KAAKq5I,gBAAiB52I,EAAU,EAAG,IAI3C82I,cAAe,SAAUC,EAAe/2I,EAAUg3I,GAKjD,GAHAD,EAAcF,QAAS72I,GACvBzC,KAAKo5I,OAAQ32I,GAETg3I,EAAO,CAEV,IAAIC,EAAiB15I,KAAK0pF,MAAMjnF,SAC/Bk3I,EAAkBH,EAAc9vD,MAAMjnF,SAEtCm3I,EAAgBD,EAAkBD,EAClCG,EAAgBH,EAAiBC,EAElCH,EAAcC,KAAM,EAAKG,EAAen3I,GACxCzC,KAAKy5I,KAAMI,EAAe,EAAKp3I,GAIhC,OAAOzC,MAIR85I,YAAa,SAAUC,EAAct3I,EAAUg3I,GAE9C,OAAOM,EAAaR,cAAev5I,KAAMyC,EAAUg3I,IAIpDb,WAAY,WAEX,IAAIoB,EAAoBh6I,KAAK2qF,mBAS7B,OAP2B,OAAtBqvD,IAEJh6I,KAAK2qF,mBAAqB,KAC1B3qF,KAAKypF,OAAOwwD,4BAA6BD,IAInCh6I,MASRk6I,sBAAuB,SAAUlvD,GAKhC,OAHAhrF,KAAKgrF,UAAYA,EACjBhrF,KAAKirF,oBAAsBjrF,KAAKqrF,OAAS,EAAGL,EAErChrF,KAAK64I,eAKbsB,sBAAuB,WAEtB,OAAOn6I,KAAKirF,qBAIbmvD,YAAa,SAAU33I,GAItB,OAFAzC,KAAKgrF,UAAYhrF,KAAK0pF,MAAMjnF,SAAWA,EAEhCzC,KAAK64I,eAIbwB,SAAU,SAAUrjI,GAKnB,OAHAhX,KAAK+qF,KAAO/zE,EAAO+zE,KACnB/qF,KAAKgrF,UAAYh0E,EAAOg0E,UAEjBhrF,KAAK64I,eAIbyB,KAAM,SAAU73I,GAEf,OAAOzC,KAAKy5I,KAAMz5I,KAAKirF,oBAAqB,EAAGxoF,IAIhDg3I,KAAM,SAAUc,EAAgBC,EAAc/3I,GAE7C,IAAI6mF,EAAQtpF,KAAKypF,OAAQgxD,EAAMnxD,EAAMyB,KACpCb,EAAclqF,KAAK0qF,sBAEnBM,EAAYhrF,KAAKgrF,UAEG,OAAhBd,IAEJA,EAAcZ,EAAMoxD,0BACpB16I,KAAK0qF,sBAAwBR,GAI9B,IAAI7J,EAAQ6J,EAAY1K,mBACvBc,EAAS4J,EAAYzK,aAQtB,OANAY,EAAO,GAAMo6D,EACbp6D,EAAO,GAAMo6D,EAAMh4I,EAEnB69E,EAAQ,GAAMi6D,EAAiBvvD,EAC/B1K,EAAQ,GAAMk6D,EAAexvD,EAEtBhrF,MAIR64I,YAAa,WAEZ,IAAI8B,EAAuB36I,KAAK0qF,sBAShC,OAP8B,OAAzBiwD,IAEJ36I,KAAK0qF,sBAAwB,KAC7B1qF,KAAKypF,OAAOwwD,4BAA6BU,IAInC36I,MAMR46I,SAAU,WAET,OAAO56I,KAAKypF,QAIboxD,QAAS,WAER,OAAO76I,KAAK0pF,OAIboxD,QAAS,WAER,OAAO96I,KAAK2pF,YAAc3pF,KAAKypF,OAAOiC,OAMvCqvD,QAAS,SAAUhwD,EAAMiwD,EAAWC,EAAe5G,GAIlD,GAAOr0I,KAAKgL,QAAZ,CASA,IAAIo7E,EAAYpmF,KAAK8qF,WAErB,GAAmB,OAAd1E,EAAqB,CAIzB,IAAI80D,GAAgBnwD,EAAO3E,GAAc60D,EACzC,GAAKC,EAAc,GAAuB,IAAlBD,EAEvB,OAMDj7I,KAAK8qF,WAAa,KAClBkwD,EAAYC,EAAgBC,EAM7BF,GAAah7I,KAAKm7I,iBAAkBpwD,GACpC,IAAIqwD,EAAWp7I,KAAKq7I,YAAaL,GAK7B9vD,EAASlrF,KAAKs7I,cAAevwD,GAEjC,GAAKG,EAAS,EAKb,IAAM,IAHFrB,EAAe7pF,KAAKsqF,cACpBixD,EAAiBv7I,KAAKuqF,kBAEhBpgF,EAAI,EAAGoZ,EAAIsmE,EAAalsF,OAAQwM,IAAMoZ,IAAMpZ,EAErD0/E,EAAc1/E,GAAIyzH,SAAUwd,GAC5BG,EAAgBpxI,GAAIiqI,WAAYC,EAAWnpD,QA3C5ClrF,KAAKs7I,cAAevwD,IAmDtBuwD,cAAe,SAAUvwD,GAExB,IAAIG,EAAS,EAEb,GAAKlrF,KAAKgL,QAAU,CAEnBkgF,EAASlrF,KAAKkrF,OACd,IAAIhB,EAAclqF,KAAK2qF,mBAEvB,GAAqB,OAAhBT,EAAuB,CAE3B,IAAIsxD,EAAmBtxD,EAAY0zC,SAAU7yC,GAAQ,GAErDG,GAAUswD,EAELzwD,EAAOb,EAAY1K,mBAAoB,KAE3Cx/E,KAAK44I,aAEqB,IAArB4C,IAGJx7I,KAAKgL,SAAU,KAWnB,OADAhL,KAAKmrF,iBAAmBD,EACjBA,GAIRiwD,iBAAkB,SAAUpwD,GAE3B,IAAIC,EAAY,EAEhB,IAAOhrF,KAAKqrF,OAAS,CAEpBL,EAAYhrF,KAAKgrF,UAEjB,IAAId,EAAclqF,KAAK0qF,sBAEF,OAAhBR,IAIJc,GAFuBd,EAAY0zC,SAAU7yC,GAAQ,GAIhDA,EAAOb,EAAY1K,mBAAoB,KAE3Cx/E,KAAK64I,cAEc,IAAd7tD,EAGJhrF,KAAKqrF,QAAS,EAKdrrF,KAAKgrF,UAAYA,IAWrB,OADAhrF,KAAKirF,oBAAsBD,EACpBA,GAIRqwD,YAAa,SAAUL,GAEtB,IAAIjwD,EAAO/qF,KAAK+qF,KAAOiwD,EAEvB,GAAmB,IAAdA,EAAkB,OAAOjwD,EAE9B,IAAItoF,EAAWzC,KAAK0pF,MAAMjnF,SAEzB0jF,EAAOnmF,KAAKmmF,KACZs1D,EAAYz7I,KAAK6qF,WAElB,GA9+qCa,OA8+qCR1E,EAAoB,EAEJ,IAAfs1D,IAGJz7I,KAAK6qF,WAAa,EAClB7qF,KAAK07I,aAAa,GAAM,GAAM,IAI/BC,EAAa,CAEZ,GAAK5wD,GAAQtoF,EAEZsoF,EAAOtoF,MAED,CAAA,KAAKsoF,EAAO,GAIZ,MAAM4wD,EAFZ5wD,EAAO,EAIH/qF,KAAKsrF,kBAAoBtrF,KAAKqrF,QAAS,EACvCrrF,KAAKgL,SAAU,EAEpBhL,KAAKypF,OAAOyJ,eACXhuF,KAAM,WAAY8R,OAAQhX,KAC1Bk3C,UAAW8jG,EAAY,GAAK,EAAI,SAK5B,CAEN,IAAIY,EA9grCY,OA8grCCz1D,EAyBjB,IAvBoB,IAAfs1D,IAGCT,GAAa,GAEjBS,EAAY,EAEZz7I,KAAK07I,aACH,EAA2B,IAArB17I,KAAKorF,YAAmBwwD,IAQhC57I,KAAK07I,YACkB,IAArB17I,KAAKorF,aAAmB,EAAMwwD,IAM7B7wD,GAAQtoF,GAAYsoF,EAAO,EAAI,CAGnC,IAAI8wD,EAAYn5I,KAAKK,MAAOgoF,EAAOtoF,GACnCsoF,GAAQtoF,EAAWo5I,EAEnBJ,GAAa/4I,KAAKoI,IAAK+wI,GAEvB,IAAIC,EAAU97I,KAAKorF,YAAcqwD,EAEjC,GAAKK,EAAU,EAGT97I,KAAKsrF,kBAAoBtrF,KAAKqrF,QAAS,EACvCrrF,KAAKgL,SAAU,EAEpB+/E,EAAOiwD,EAAY,EAAIv4I,EAAW,EAElCzC,KAAKypF,OAAOyJ,eACXhuF,KAAM,WAAY8R,OAAQhX,KAC1Bk3C,UAAW8jG,EAAY,EAAI,GAAK,QAG3B,CAGN,GAAiB,IAAZc,EAAgB,CAGpB,IAAIC,EAAUf,EAAY,EAC1Bh7I,KAAK07I,YAAaK,GAAWA,EAASH,QAItC57I,KAAK07I,aAAa,GAAO,EAAOE,GAIjC57I,KAAK6qF,WAAa4wD,EAElBz7I,KAAKypF,OAAOyJ,eACXhuF,KAAM,OAAQ8R,OAAQhX,KAAM67I,UAAWA,KAO1C,GAAKD,GAAkC,IAAR,EAAZH,GAIlB,OADAz7I,KAAK+qF,KAAOA,EACLtoF,EAAWsoF,EAOpB,OADA/qF,KAAK+qF,KAAOA,EACLA,GAIR2wD,YAAa,SAAUK,EAASC,EAAOJ,GAEtC,IAAIxxD,EAAWpqF,KAAKqqF,qBAEfuxD,GAEJxxD,EAASL,YAvmrCU,KAwmrCnBK,EAASH,UAxmrCU,OAgnrClBG,EAASL,YAFLgyD,EAEmB/7I,KAAKurF,iBAhnrCV,KAinrCEvB,GAhnrCD,KA0nrCnBI,EAASH,UAFL+xD,EAEiBh8I,KAAKwrF,eA3nrCR,KA4nrCExB,GA3nrCD,OAuorCtBqvD,gBAAiB,SAAU52I,EAAUw5I,EAAWC,GAE/C,IAAI5yD,EAAQtpF,KAAKypF,OAAQgxD,EAAMnxD,EAAMyB,KACpCb,EAAclqF,KAAK2qF,mBAEC,OAAhBT,IAEJA,EAAcZ,EAAMoxD,0BACpB16I,KAAK2qF,mBAAqBT,GAI3B,IAAI7J,EAAQ6J,EAAY1K,mBACvBc,EAAS4J,EAAYzK,aAKtB,OAHAY,EAAO,GAAMo6D,EAASn6D,EAAQ,GAAM27D,EACpC57D,EAAO,GAAMo6D,EAAMh4I,EAAU69E,EAAQ,GAAM47D,EAEpCl8I,QA4BT9B,OAAO20F,OAAQpH,GAAettF,UAAWmyB,EAAgBnyB,WAExDg+I,YAAa,SAAWnlI,EAAQolI,GAE/B,IAAIl8H,EAAOlJ,EAAO2yE,YAAc3pF,KAAK0rF,MACpCjK,EAASzqE,EAAO0yE,MAAMjI,OACtBmI,EAAUnI,EAAO9jF,OACjBk3I,EAAW79H,EAAOuzE,kBAClBV,EAAe7yE,EAAOszE,cACtB+xD,EAAWn8H,EAAKgR,KAChBorH,EAAiBt8I,KAAKu8I,uBACtBC,EAAiBF,EAAgBD,QAEVttI,IAAnBytI,IAEJA,KACAF,EAAgBD,GAAaG,GAI9B,IAAM,IAAIp/I,EAAI,EAAGA,IAAMwsF,IAAYxsF,EAAI,CAEtC,IAAIikI,EAAQ5/C,EAAQrkF,GACnBolI,EAAYnB,EAAMl1H,KAClBya,EAAU41H,EAAgBha,GAE3B,QAAiBzzH,IAAZ6X,EAEJiuH,EAAUz3I,GAAMwpB,MAEV,CAIN,QAAiB7X,KAFjB6X,EAAUiuH,EAAUz3I,IAES,CAIC,OAAxBwpB,EAAQ4jE,gBAET5jE,EAAQihE,eACX7nF,KAAKy8I,oBAAqB71H,EAASy1H,EAAU7Z,IAI9C,SAID,IAAIj1H,EAAO6uI,GAAmBA,EAC5B7xD,kBAAmBntF,GAAIwpB,QAAQqhE,cAEjCrhE,EAAU,IAAIwgE,GACbc,GAAgBxwE,OAAQwI,EAAMsiH,EAAWj1H,GACzC8zH,EAAMjB,cAAeiB,EAAMrB,iBAEjBn4C,eACX7nF,KAAKy8I,oBAAqB71H,EAASy1H,EAAU7Z,GAE7CqS,EAAUz3I,GAAMwpB,EAIjBijE,EAAczsF,GAAIue,aAAeiL,EAAQ7kB,SAM3C22I,gBAAiB,SAAW1hI,GAE3B,IAAOhX,KAAK+4I,gBAAiB/hI,GAAW,CAEvC,GAA4B,OAAvBA,EAAOwzE,YAAuB,CAKlC,IAAI6xD,GAAarlI,EAAO2yE,YAAc3pF,KAAK0rF,OAAQx6D,KAClDwrH,EAAW1lI,EAAO0yE,MAAMx4D,KACxByrH,EAAiB38I,KAAK48I,eAAgBF,GAEvC18I,KAAKm8I,YAAanlI,EACjB2lI,GAAkBA,EAAeE,aAAc,IAEhD78I,KAAK88I,mBAAoB9lI,EAAQ0lI,EAAUL,GAO5C,IAAM,IAHFxH,EAAW79H,EAAOuzE,kBAGZntF,EAAI,EAAGP,EAAIg4I,EAASl3I,OAAQP,IAAMP,IAAMO,EAAI,CAErD,IAAIwpB,EAAUiuH,EAAUz3I,GAEK,GAAxBwpB,EAAQghE,aAEZ5nF,KAAK+8I,aAAcn2H,GACnBA,EAAQ6tH,qBAMVz0I,KAAKg9I,YAAahmI,KAMpB2hI,kBAAmB,SAAW3hI,GAE7B,GAAKhX,KAAK+4I,gBAAiB/hI,GAAW,CAKrC,IAAM,IAHF69H,EAAW79H,EAAOuzE,kBAGZntF,EAAI,EAAGP,EAAIg4I,EAASl3I,OAAQP,IAAMP,IAAMO,EAAI,CAErD,IAAIwpB,EAAUiuH,EAAUz3I,GAEK,KAArBwpB,EAAQghE,WAEfhhE,EAAQ+tH,uBACR30I,KAAKi9I,iBAAkBr2H,IAMzB5mB,KAAKk9I,gBAAiBlmI,KAQxB20E,mBAAoB,WAEnB3rF,KAAKm9I,YACLn9I,KAAKo9I,gBAAkB,EAEvBp9I,KAAK48I,kBAQL58I,KAAKqoF,aACLroF,KAAKq9I,iBAAmB,EAExBr9I,KAAKu8I,0BAGLv8I,KAAKs9I,wBACLt9I,KAAKu9I,4BAA8B,EAEnC,IAAIv0G,EAAQhpC,KAEZA,KAAKkpF,OAEJs0D,SACCjkI,YAAc,OAAOyvB,EAAMm0G,SAASx/I,QACpCwrF,YAAc,OAAOngD,EAAMo0G,kBAE5BvI,UACCt7H,YAAc,OAAOyvB,EAAMq/C,UAAU1qF,QACrCwrF,YAAc,OAAOngD,EAAMq0G,mBAE5BI,qBACClkI,YAAc,OAAOyvB,EAAMs0G,qBAAqB3/I,QAChDwrF,YAAc,OAAOngD,EAAMu0G,gCAS9BxE,gBAAiB,SAAW/hI,GAE3B,IAAIvO,EAAQuO,EAAOwzE,YACnB,OAAiB,OAAV/hF,GAAkBA,EAAQzI,KAAKo9I,iBAIvCN,mBAAoB,SAAW9lI,EAAQ0lI,EAAUL,GAEhD,IAAImB,EAAUx9I,KAAKm9I,SAClBO,EAAgB19I,KAAK48I,eACrBD,EAAiBe,EAAehB,GAEjC,QAAwB3tI,IAAnB4tI,EAEJA,GAECE,cAAgB7lI,GAChB2mI,iBAID3mI,EAAOyzE,kBAAoB,EAE3BizD,EAAehB,GAAaC,MAEtB,CAEN,IAAIE,EAAeF,EAAeE,aAElC7lI,EAAOyzE,kBAAoBoyD,EAAal/I,OACxCk/I,EAAal2I,KAAMqQ,GAIpBA,EAAOwzE,YAAcgzD,EAAQ7/I,OAC7B6/I,EAAQ72I,KAAMqQ,GAEd2lI,EAAegB,aAActB,GAAarlI,GAI3C4mI,sBAAuB,SAAW5mI,GAEjC,IAAIwmI,EAAUx9I,KAAKm9I,SAClBU,EAAqBL,EAASA,EAAQ7/I,OAAS,GAC/CmgJ,EAAa9mI,EAAOwzE,YAErBqzD,EAAmBrzD,YAAcszD,EACjCN,EAASM,GAAeD,EACxBL,EAAQ9wH,MAER1V,EAAOwzE,YAAc,KAGrB,IAAIkyD,EAAW1lI,EAAO0yE,MAAMx4D,KAC3BwsH,EAAgB19I,KAAK48I,eACrBD,EAAiBe,EAAehB,GAChCqB,EAAsBpB,EAAeE,aAErCmB,EACCD,EAAqBA,EAAoBpgJ,OAAS,GAEnDsgJ,EAAmBjnI,EAAOyzE,kBAE3BuzD,EAAgBvzD,kBAAoBwzD,EACpCF,EAAqBE,GAAqBD,EAC1CD,EAAoBrxH,MAEpB1V,EAAOyzE,kBAAoB,YAGRkyD,EAAegB,cACpB3mI,EAAO2yE,YAAc3pF,KAAK0rF,OAAQx6D,MAIZ,IAA/B6sH,EAAoBpgJ,eAEjB+/I,EAAehB,GAIvB18I,KAAKk+I,iCAAkClnI,IAIxCknI,iCAAkC,SAAWlnI,GAG5C,IAAM,IADF69H,EAAW79H,EAAOuzE,kBACZntF,EAAI,EAAGP,EAAIg4I,EAASl3I,OAAQP,IAAMP,IAAMO,EAAI,CAErD,IAAIwpB,EAAUiuH,EAAUz3I,GAEW,KAA3BwpB,EAAQihE,gBAEf7nF,KAAKm+I,uBAAwBv3H,KAQhCo2H,YAAa,SAAWhmI,GAQvB,IAAIwmI,EAAUx9I,KAAKm9I,SAClBiB,EAAYpnI,EAAOwzE,YAEnB6zD,EAAkBr+I,KAAKo9I,kBAEvBkB,EAAsBd,EAASa,GAEhCrnI,EAAOwzE,YAAc6zD,EACrBb,EAASa,GAAoBrnI,EAE7BsnI,EAAoB9zD,YAAc4zD,EAClCZ,EAASY,GAAcE,GAIxBpB,gBAAiB,SAAWlmI,GAQ3B,IAAIwmI,EAAUx9I,KAAKm9I,SAClBiB,EAAYpnI,EAAOwzE,YAEnB+zD,IAAwBv+I,KAAKo9I,gBAE7BoB,EAAmBhB,EAASe,GAE7BvnI,EAAOwzE,YAAc+zD,EACrBf,EAASe,GAAuBvnI,EAEhCwnI,EAAiBh0D,YAAc4zD,EAC/BZ,EAASY,GAAcI,GAMxB/B,oBAAqB,SAAW71H,EAASy1H,EAAU7Z,GAElD,IAAI8Z,EAAiBt8I,KAAKu8I,uBACzBkC,EAAgBnC,EAAgBD,GAEhCxH,EAAW70I,KAAKqoF,eAEMt5E,IAAlB0vI,IAEJA,KACAnC,EAAgBD,GAAaoC,GAI9BA,EAAejc,GAAc57G,EAE7BA,EAAQ4jE,YAAcqqD,EAASl3I,OAC/Bk3I,EAASluI,KAAMigB,IAIhBu3H,uBAAwB,SAAWv3H,GAElC,IAAIiuH,EAAW70I,KAAKqoF,UACnBq2D,EAAc93H,EAAQA,QACtBy1H,EAAWqC,EAAYn2D,SAASr3D,KAChCsxG,EAAYkc,EAAYnxI,KACxB+uI,EAAiBt8I,KAAKu8I,uBACtBkC,EAAgBnC,EAAgBD,GAEhCsC,EAAsB9J,EAAUA,EAASl3I,OAAS,GAClDmgJ,EAAal3H,EAAQ4jE,YAEtBm0D,EAAoBn0D,YAAcszD,EAClCjJ,EAAUiJ,GAAea,EACzB9J,EAASnoH,aAEF+xH,EAAejc,GAEtBoc,EAAkB,CAEjB,IAAM,IAAIC,KAAKJ,EAAgB,MAAMG,SAE9BtC,EAAgBD,KAMzBU,aAAc,SAAWn2H,GAExB,IAAIiuH,EAAW70I,KAAKqoF,UACnB+1D,EAAYx3H,EAAQ4jE,YAEpB6zD,EAAkBr+I,KAAKq9I,mBAEvByB,EAAuBjK,EAAUwJ,GAElCz3H,EAAQ4jE,YAAc6zD,EACtBxJ,EAAUwJ,GAAoBz3H,EAE9Bk4H,EAAqBt0D,YAAc4zD,EACnCvJ,EAAUuJ,GAAcU,GAIzB7B,iBAAkB,SAAWr2H,GAE5B,IAAIiuH,EAAW70I,KAAKqoF,UACnB+1D,EAAYx3H,EAAQ4jE,YAEpB+zD,IAAwBv+I,KAAKq9I,iBAE7B0B,EAAoBlK,EAAU0J,GAE/B33H,EAAQ4jE,YAAc+zD,EACtB1J,EAAU0J,GAAuB33H,EAEjCm4H,EAAkBv0D,YAAc4zD,EAChCvJ,EAAUuJ,GAAcW,GAOzBrE,wBAAyB,WAExB,IAAI7wD,EAAe7pF,KAAKs9I,qBACvBe,EAAkBr+I,KAAKu9I,8BACvBrzD,EAAcL,EAAcw0D,GAa7B,YAXqBtvI,IAAhBm7E,KAEJA,EAAc,IAAIhK,GACjB,IAAIzrD,aAAc,GAAK,IAAIA,aAAc,GACzC,EAAGz0B,KAAKg/I,mCAEGC,aAAeZ,EAC3Bx0D,EAAcw0D,GAAoBn0D,GAI5BA,GAIR+vD,4BAA6B,SAAW/vD,GAEvC,IAAIL,EAAe7pF,KAAKs9I,qBACvBc,EAAYl0D,EAAY+0D,aAExBV,IAAwBv+I,KAAKu9I,4BAE7B2B,EAAwBr1D,EAAc00D,GAEvCr0D,EAAY+0D,aAAeV,EAC3B10D,EAAc00D,GAAuBr0D,EAErCg1D,EAAsBD,aAAeb,EACrCv0D,EAAcu0D,GAAcc,GAI7BF,iCAAkC,IAAIvqH,aAAc,GAKpD0qH,WAAY,SAAW51D,EAAM61D,GAE5B,IAAIl/H,EAAOk/H,GAAgBp/I,KAAK0rF,MAC/B2wD,EAAWn8H,EAAKgR,KAEhBmuH,EAA6B,iBAAT91D,EACnB/H,GAAcqgD,WAAY3hH,EAAMqpE,GAASA,EAE1CmzD,EAA0B,OAAf2C,EAAsBA,EAAWnuH,KAAOq4D,EAEnDozD,EAAiB38I,KAAK48I,eAAgBF,GACtCN,EAAkB,KAEnB,QAAwBrtI,IAAnB4tI,EAA+B,CAEnC,IAAI2C,EACF3C,EAAegB,aAActB,GAE/B,QAAwBttI,IAAnBuwI,EAEJ,OAAOA,EAMRlD,EAAkBO,EAAeE,aAAc,GAG3B,OAAfwC,IACJA,EAAajD,EAAgB1yD,OAK/B,GAAoB,OAAf21D,EAAsB,OAAO,KAGlC,IAAIE,EAAY,IAAIl2D,GAAiBrpF,KAAMq/I,EAAYD,GAOvD,OALAp/I,KAAKm8I,YAAaoD,EAAWnD,GAG7Bp8I,KAAK88I,mBAAoByC,EAAW7C,EAAUL,GAEvCkD,GAKRD,eAAgB,SAAW/1D,EAAM61D,GAEhC,IAAIl/H,EAAOk/H,GAAgBp/I,KAAK0rF,MAC/B2wD,EAAWn8H,EAAKgR,KAEhBmuH,EAA6B,iBAAT91D,EACnB/H,GAAcqgD,WAAY3hH,EAAMqpE,GAASA,EAE1CmzD,EAAW2C,EAAaA,EAAWnuH,KAAOq4D,EAE1CozD,EAAiB38I,KAAK48I,eAAgBF,GAEvC,YAAwB3tI,IAAnB4tI,EAEGA,EAAegB,aAActB,IAAc,KAI5C,MAKRmD,cAAe,WAEd,IAAIhC,EAAUx9I,KAAKm9I,SAClBsC,EAAWz/I,KAAKo9I,gBAChBvI,EAAW70I,KAAKqoF,UAChBsvD,EAAY33I,KAAKq9I,iBAElBr9I,KAAKo9I,gBAAkB,EACvBp9I,KAAKq9I,iBAAmB,EAExB,IAAUjgJ,EAAI,EAAGA,IAAMqiJ,IAAariJ,EAEnCogJ,EAASpgJ,GAAI4F,QAId,IAAM,IAAI5F,EAAI,EAAGA,IAAMu6I,IAAcv6I,EAEpCy3I,EAAUz3I,GAAIwqF,SAAW,EAI1B,OAAO5nF,MAKRgqC,OAAQ,SAAWgxG,GAElBA,GAAah7I,KAAKgrF,UAYlB,IAAM,IAVFwyD,EAAUx9I,KAAKm9I,SAClBsC,EAAWz/I,KAAKo9I,gBAEhBryD,EAAO/qF,KAAK+qF,MAAQiwD,EACpBC,EAAgBv4I,KAAK85E,KAAMw+D,GAE3B3G,EAAYr0I,KAAK4rF,YAAc,EAItBxuF,EAAI,EAAGA,IAAMqiJ,IAAariJ,EAEtBogJ,EAASpgJ,GAEf29I,QAAShwD,EAAMiwD,EAAWC,EAAe5G,GASjD,IAAM,IAHFQ,EAAW70I,KAAKqoF,UACnBsvD,EAAY33I,KAAKq9I,iBAERjgJ,EAAI,EAAGA,IAAMu6I,IAAcv6I,EAEpCy3I,EAAUz3I,GAAI+I,MAAOkuI,GAItB,OAAOr0I,MAKR86I,QAAS,WAER,OAAO96I,KAAK0rF,OAKbg0D,YAAa,SAAWn2D,GAEvB,IAAIi0D,EAAUx9I,KAAKm9I,SAClBT,EAAWnzD,EAAKr4D,KAChBwsH,EAAgB19I,KAAK48I,eACrBD,EAAiBe,EAAehB,GAEjC,QAAwB3tI,IAAnB4tI,EAA+B,CAQnC,IAAM,IAFFgD,EAAkBhD,EAAeE,aAE3Bz/I,EAAI,EAAGP,EAAI8iJ,EAAgBhiJ,OAAQP,IAAMP,IAAMO,EAAI,CAE5D,IAAI4Z,EAAS2oI,EAAiBviJ,GAE9B4C,KAAK24I,kBAAmB3hI,GAExB,IAAI8mI,EAAa9mI,EAAOwzE,YACvBqzD,EAAqBL,EAASA,EAAQ7/I,OAAS,GAEhDqZ,EAAOwzE,YAAc,KACrBxzE,EAAOyzE,kBAAoB,KAE3BozD,EAAmBrzD,YAAcszD,EACjCN,EAASM,GAAeD,EACxBL,EAAQ9wH,MAER1sB,KAAKk+I,iCAAkClnI,UAIjC0mI,EAAehB,KAOxBkD,YAAa,SAAW1/H,GAEvB,IAAIm8H,EAAWn8H,EAAKgR,KACnBwsH,EAAgB19I,KAAK48I,eAEtB,IAAM,IAAIF,KAAYgB,EAAgB,CAErC,IACC1mI,EADkB0mI,EAAehB,GAAWiB,aACrBtB,QAERttI,IAAXiI,IAEJhX,KAAK24I,kBAAmB3hI,GACxBhX,KAAK49I,sBAAuB5mI,IAM9B,IACCynI,EADoBz+I,KAAKu8I,uBACOF,GAEjC,QAAuBttI,IAAlB0vI,EAEJ,IAAM,IAAIjc,KAAaic,EAAgB,CAEtC,IAAI73H,EAAU63H,EAAejc,GAC7B57G,EAAQ+tH,uBACR30I,KAAKm+I,uBAAwBv3H,KAShCi5H,cAAe,SAAWt2D,EAAM61D,GAE/B,IAAIpoI,EAAShX,KAAKs/I,eAAgB/1D,EAAM61D,GAExB,OAAXpoI,IAEJhX,KAAK24I,kBAAmB3hI,GACxBhX,KAAK49I,sBAAuB5mI,OAyB/B60E,GAAQ1tF,UAAUyR,MAAQ,WAEzB,OAAO,IAAIi8E,QAA8B98E,IAArB/O,KAAKb,MAAMyQ,MAAsB5P,KAAKb,MAAQa,KAAKb,MAAMyQ,UAiB9Ek8E,GAAwB3tF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQo8B,GAAe31C,YAEhFsJ,YAAaqkF,GAEb7vB,2BAA2B,EAE3BxmB,SAAU,SAAWn0C,EAAOT,EAAOypC,GAElCtqC,KAAKiqC,OAAOtjC,MAEXrF,MAAOA,EACPT,MAAOA,EACPypC,cAAeA,KAMjB7lC,KAAM,SAAWugB,GAEhB,IAAIvc,EAAQuc,EAAOvc,MAEJ,OAAVA,GAEJzI,KAAK21C,SAAUltC,EAAMmH,SAItB,IAAIksB,EAAa9W,EAAO8W,WAExB,IAAM,IAAI3vB,KAAQ2vB,EAAa,CAE9B,IAAIoS,EAAYpS,EAAY3vB,GAC5BnM,KAAK41C,aAAczpC,EAAM+hC,EAAUt+B,SAMpC,IAAM,IAFFq6B,EAASjlB,EAAOilB,OAEV7sC,EAAI,EAAGI,EAAIysC,EAAOtsC,OAAQP,EAAII,EAAGJ,IAAO,CAEjD,IAAIgtC,EAAQH,EAAQ7sC,GACpB4C,KAAKy1C,SAAUrL,EAAM9oC,MAAO8oC,EAAMvpC,MAAOupC,EAAME,eAIhD,OAAOtqC,QAsBT9B,OAAOmB,iBAAkB0sF,GAA2B5tF,WAEnD0C,OAECJ,IAAK,WAEJ,OAAOT,KAAKQ,KAAKK,QAMnB4f,OAEChgB,IAAK,WAEJ,OAAOT,KAAKQ,KAAKigB,UAQpBviB,OAAO20F,OAAQ9G,GAA2B5tF,WAEzCmxC,8BAA8B,EAE9BylD,KAAM,SAAWtsF,EAAO+nB,GAIvB,OAFAxwB,KAAKQ,KAAKigB,MAAOhY,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,QAAWrB,EAErDxwB,MAIRg1F,KAAM,SAAWvsF,EAAO2a,GAIvB,OAFApjB,KAAKQ,KAAKigB,MAAOhY,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAAS,GAAMzO,EAEzDpjB,MAIR+2F,KAAM,SAAWtuF,EAAO6pB,GAIvB,OAFAtyB,KAAKQ,KAAKigB,MAAOhY,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAAS,GAAMS,EAEzDtyB,MAIRg3F,KAAM,SAAWvuF,EAAO8pB,GAIvB,OAFAvyB,KAAKQ,KAAKigB,MAAOhY,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAAS,GAAMU,EAEzDvyB,MAIRmyE,KAAM,SAAW1pE,GAEhB,OAAOzI,KAAKQ,KAAKigB,MAAOhY,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,SAIzDwkE,KAAM,SAAW5tF,GAEhB,OAAOzI,KAAKQ,KAAKigB,MAAOhY,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAAS,IAIlEumE,KAAM,SAAW3vF,GAEhB,OAAOzI,KAAKQ,KAAKigB,MAAOhY,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAAS,IAIlEwmE,KAAM,SAAW5vF,GAEhB,OAAOzI,KAAKQ,KAAKigB,MAAOhY,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAAS,IAIlEszF,MAAO,SAAW18G,EAAO+nB,EAAGpN,GAO3B,OALA3a,EAAQA,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAExC7xB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM+nB,EAC/BxwB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM2a,EAExBpjB,MAIRwiG,OAAQ,SAAW/5F,EAAO+nB,EAAGpN,EAAGkP,GAQ/B,OANA7pB,EAAQA,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAExC7xB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM+nB,EAC/BxwB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM2a,EAC/BpjB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM6pB,EAExBtyB,MAIRolH,QAAS,SAAW38G,EAAO+nB,EAAGpN,EAAGkP,EAAGC,GASnC,OAPA9pB,EAAQA,EAAQzI,KAAKQ,KAAK87D,OAASt8D,KAAK6xB,OAExC7xB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM+nB,EAC/BxwB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM2a,EAC/BpjB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM6pB,EAC/BtyB,KAAKQ,KAAKigB,MAAOhY,EAAQ,GAAM8pB,EAExBvyB,QA2BT9B,OAAOgB,eAAgB+sF,GAAkB9tF,UAAW,eAEnDuG,IAAK,SAAWvF,IAEA,IAAVA,GAAiBa,KAAK6hB,aAM7B3jB,OAAO20F,OAAQ5G,GAAkB9tF,WAEhC2hJ,qBAAqB,EAErBr7B,SAAU,SAAWhkG,GAEpB,GAAKpV,MAAMgX,QAAS5B,GAEnB,MAAM,IAAIxhB,UAAW,yDAItBe,KAAKa,WAAkBkO,IAAV0R,EAAsBA,EAAM9iB,OAASqC,KAAKs8D,OAAS,EAChEt8D,KAAKygB,MAAQA,GAIdikG,WAAY,SAAWvlH,GAItB,OAFAa,KAAKquC,QAAUlvC,EAERa,MAIRyE,KAAM,SAAWugB,GAOhB,OALAhlB,KAAKygB,MAAQ,IAAIuE,EAAOvE,MAAMhZ,YAAaud,EAAOvE,OAClDzgB,KAAKa,MAAQmkB,EAAOnkB,MACpBb,KAAKs8D,OAASt3C,EAAOs3C,OACrBt8D,KAAKquC,QAAUrpB,EAAOqpB,QAEfruC,MAIR2kH,OAAQ,SAAW1yC,EAAQ/jC,EAAWgkC,GAErCD,GAAUjyE,KAAKs8D,OACf4V,GAAUhkC,EAAUouB,OAEpB,IAAM,IAAIl/D,EAAI,EAAGI,EAAIwC,KAAKs8D,OAAQl/D,EAAII,EAAGJ,IAExC4C,KAAKygB,MAAOwxD,EAAS70E,GAAM8wC,EAAUztB,MAAOyxD,EAAS90E,GAItD,OAAO4C,MAIR0E,IAAK,SAAWvF,EAAO0yB,GAMtB,YAJgB9iB,IAAX8iB,IAAuBA,EAAS,GAErC7xB,KAAKygB,MAAM/b,IAAKvF,EAAO0yB,GAEhB7xB,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCqlH,SAAU,SAAWvkH,GAIpB,OAFAd,KAAKuuC,iBAAmBztC,EAEjBd,QAkBTksF,GAA2B/tF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQu0E,GAAkB9tF,YAEtFsJ,YAAaykF,GAEb3vB,8BAA8B,EAE9B93D,KAAM,SAAWugB,GAMhB,OAJAinE,GAAkB9tF,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAE7ChlB,KAAKg0D,iBAAmBhvC,EAAOgvC,iBAExBh0D,QAkBTmsF,GAAyBhuF,UAAYD,OAAO20F,OAAQ30F,OAAOwZ,OAAQi7B,GAAgBx0C,YAElFsJ,YAAa0kF,GAEb3vB,4BAA4B,EAE5B/3D,KAAM,SAAWugB,GAMhB,OAJA2tB,GAAgBx0C,UAAUsG,KAAK/G,KAAMsC,KAAMglB,GAE3ChlB,KAAKg0D,iBAAmBhvC,EAAOgvC,iBAExBh0D,QAiET9B,OAAO20F,OAAQzG,GAAUjuF,WAExB2vH,cAAe,EAEfppH,IAAK,SAAWuyC,EAAQC,GAIvBl3C,KAAKqsF,IAAI3nF,IAAKuyC,EAAQC,IAIvB6oG,cAAe,SAAWC,EAAQ3iH,GAE1BA,GAAUA,EAAOyiF,qBAEvB9/G,KAAKqsF,IAAIp1C,OAAOhK,sBAAuB5P,EAAOiB,aAC9Ct+B,KAAKqsF,IAAIn1C,UAAUxyC,IAAKs7I,EAAOxvH,EAAGwvH,EAAO58H,EAAG,IAAM84E,UAAW7+D,GAASmnC,IAAKxkE,KAAKqsF,IAAIp1C,QAASouB,aAEhFhoC,GAAUA,EAAO8hF,sBAE9Bn/G,KAAKqsF,IAAIp1C,OAAOvyC,IAAKs7I,EAAOxvH,EAAGwvH,EAAO58H,GAAKia,EAAOqE,KAAOrE,EAAOsE,MAAUtE,EAAOqE,KAAOrE,EAAOsE,MAAQu6D,UAAW7+D,GAClHr9B,KAAKqsF,IAAIn1C,UAAUxyC,IAAK,EAAG,GAAK,GAAI+/D,mBAAoBpnC,EAAOiB,cAI/D7/B,QAAQqT,MAAO,8CAMjB26E,gBAAiB,SAAWnlD,EAAQslD,GAEnC,IAAID,KAMJ,OAJAF,GAAiBnlD,EAAQtnC,KAAM2sF,EAAYC,GAE3CD,EAAW5qD,KAAMyqD,IAEVG,GAIRszD,iBAAkB,SAAWvoG,EAASk1C,GAErC,IAAID,KAEJ,IAAkC,IAA7BthF,MAAMgX,QAASq1B,GAGnB,OADAj5C,QAAQ4pC,KAAM,8DACPskD,EAIR,IAAM,IAAIvvF,EAAI,EAAGI,EAAIk6C,EAAQ/5C,OAAQP,EAAII,EAAGJ,IAE3CqvF,GAAiB/0C,EAASt6C,GAAK4C,KAAM2sF,EAAYC,GAMlD,OAFAD,EAAW5qD,KAAMyqD,IAEVG,KAsBTzuF,OAAO20F,OAAQ/F,GAAM3uF,WAEpBmD,MAAO,WAENtB,KAAKomF,WAAqC,oBAAhB85D,YAA8Bh1I,KAAOg1I,aAAczF,MAE7Ez6I,KAAKgtF,QAAUhtF,KAAKomF,UACpBpmF,KAAKitF,YAAc,EACnBjtF,KAAKktF,SAAU,GAIhB0lD,KAAM,WAEL5yI,KAAKmgJ,iBACLngJ,KAAKktF,SAAU,EACfltF,KAAK+sF,WAAY,GAIlBozD,eAAgB,WAGf,OADAngJ,KAAKogJ,WACEpgJ,KAAKitF,aAIbmzD,SAAU,WAET,IAAI93I,EAAO,EAEX,GAAKtI,KAAK+sF,YAAe/sF,KAAKktF,QAG7B,OADAltF,KAAKsB,QACE,EAIR,GAAKtB,KAAKktF,QAAU,CAEnB,IAAImzD,GAAmC,oBAAhBH,YAA8Bh1I,KAAOg1I,aAAczF,MAE1EnyI,GAAS+3I,EAAUrgJ,KAAKgtF,SAAY,IACpChtF,KAAKgtF,QAAUqzD,EAEfrgJ,KAAKitF,aAAe3kF,EAIrB,OAAOA,KA0BTpK,OAAO20F,OAAQ1F,GAAUhvF,WAExBuG,IAAK,SAAWyhC,EAAQk0C,EAAKoC,GAM5B,OAJAz8E,KAAKmmC,OAASA,EACdnmC,KAAKq6E,IAAMA,EACXr6E,KAAKy8E,MAAQA,EAENz8E,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAW67I,GAMhB,OAJAtgJ,KAAKmmC,OAASm6G,EAAMn6G,OACpBnmC,KAAKq6E,IAAMimE,EAAMjmE,IACjBr6E,KAAKy8E,MAAQ6jE,EAAM7jE,MAEZz8E,MAKRugJ,SAAU,WAKT,OAFAvgJ,KAAKq6E,IAAM33E,KAAKL,IADN,KACgBK,KAAKN,IAAKM,KAAK8xE,GAD/B,KACyCx0E,KAAKq6E,MAEjDr6E,MAIR08G,eAAgB,SAAU8jC,GAgBzB,OAdAxgJ,KAAKmmC,OAASq6G,EAAK7iJ,SAEE,IAAhBqC,KAAKmmC,QAETnmC,KAAKy8E,MAAQ,EACbz8E,KAAKq6E,IAAM,IAIXr6E,KAAKy8E,MAAQ/5E,KAAK+xE,MAAO+rE,EAAKhwH,EAAGgwH,EAAKluH,GACtCtyB,KAAKq6E,IAAM33E,KAAKw0F,KAAM/lE,GAAM+oD,MAAOsmE,EAAKp9H,EAAIpjB,KAAKmmC,QAAU,EAAG,KAIxDnmC,QAuBT9B,OAAO20F,OAAQzF,GAAYjvF,WAE1BuG,IAAK,SAAWyhC,EAAQs2C,EAAOr5D,GAM9B,OAJApjB,KAAKmmC,OAASA,EACdnmC,KAAKy8E,MAAQA,EACbz8E,KAAKojB,EAAIA,EAEFpjB,MAIR4P,MAAO,WAEN,OAAO,IAAI5P,KAAKyH,aAAchD,KAAMzE,OAIrCyE,KAAM,SAAW67I,GAMhB,OAJAtgJ,KAAKmmC,OAASm6G,EAAMn6G,OACpBnmC,KAAKy8E,MAAQ6jE,EAAM7jE,MACnBz8E,KAAKojB,EAAIk9H,EAAMl9H,EAERpjB,MAIR08G,eAAgB,SAAU8jC,GAMzB,OAJAxgJ,KAAKmmC,OAASzjC,KAAKg+D,KAAM8/E,EAAKhwH,EAAIgwH,EAAKhwH,EAAIgwH,EAAKluH,EAAIkuH,EAAKluH,GACzDtyB,KAAKy8E,MAAQ/5E,KAAK+xE,MAAO+rE,EAAKhwH,EAAGgwH,EAAKluH,GACtCtyB,KAAKojB,EAAIo9H,EAAKp9H,EAEPpjB,SAkCTqtF,GAAelvF,UAAYD,OAAOwZ,OAAQ2/B,GAAKl5C,YACtBsJ,YAAc4lF,GAEvCA,GAAelvF,UAAUwvF,gBAAkB,SAAWxhF,EAAM7K,EAAOC,EAAKmsF,GAEvE,IAAI40C,GAEHhhI,MAAOA,EACPC,IAAKA,EAEL5D,OAAQ4D,EAAMD,EAAQ,EAEtBosF,IAAKA,EACLjrF,UAAYlB,EAAMD,GAAUosF,EAE5B+yD,UAAW,EACXC,aAAc,EAEdC,QAAQ,EAER51D,KAAM,EACN7zC,UAAW,EACXg0C,OAAQ,EAER01D,oBAAoB,EACpBC,cAAc,GAIf7gJ,KAAKstF,cAAenhF,GAASm2H,EAC7BtiI,KAAKutF,eAAe5mF,KAAM27H,IAI3Bj1C,GAAelvF,UAAU2iJ,qBAAuB,SAAWpzD,GAQ1D,IAAM,IAJFqzD,EAFAniG,EAAU,mBAEMoiG,KAEhBv5G,EAAWznC,KAAKynC,SAEVrqC,EAAI,EAAGivC,EAAK5E,EAAS3C,aAAannC,OAAQP,EAAIivC,EAAIjvC,IAAO,CAElE,IACI4gD,EADQvW,EAAS3C,aAAc1nC,GAChB+O,KAAKvD,MAAOg2C,GAE1BZ,GAAUA,EAAOrgD,OAAS,IAIvBqjJ,EAFH70I,EAAO6xC,EAAQ,MAEUgjG,EAAa70I,IAAW7K,MAAO6mB,EAAAA,EAAU5mB,KAAO4mB,EAAAA,IAIxE/qB,GAFDm3F,EAAQysD,EAAa70I,IAEV7K,QAAQizF,EAAMjzF,MAAQlE,GAChCA,EAAIm3F,EAAMhzF,MAAMgzF,EAAMhzF,IAAMnE,GAE1B2jJ,IAAiBA,EAAiB50I,IAM3C,IAAM,IAAIA,KAAQ60I,EAAc,CAE/B,IAAIzsD,EAAQysD,EAAa70I,GACzBnM,KAAK2tF,gBAAiBxhF,EAAMooF,EAAMjzF,MAAOizF,EAAMhzF,IAAKmsF,GAIrD1tF,KAAK+gJ,eAAiBA,GAIvB1zD,GAAelvF,UAAU8iJ,6BAA+B,SAAW90I,GAElE,IAAIm2H,EAAYtiI,KAAKstF,cAAenhF,GAE/Bm2H,IAEJA,EAAUprF,UAAY,EACtBorF,EAAUse,oBAAqB,IAMjCvzD,GAAelvF,UAAU+iJ,8BAAgC,SAAW/0I,GAEnE,IAAIm2H,EAAYtiI,KAAKstF,cAAenhF,GAE/Bm2H,IAEJA,EAAUprF,WAAc,EACxBorF,EAAUse,oBAAqB,IAMjCvzD,GAAelvF,UAAUgjJ,gBAAkB,SAAWh1I,EAAMuhF,GAE3D,IAAI40C,EAAYtiI,KAAKstF,cAAenhF,GAE/Bm2H,IAEJA,EAAU50C,IAAMA,EAChB40C,EAAU7/H,UAAa6/H,EAAU/gI,IAAM+gI,EAAUhhI,OAAUghI,EAAU50C,MAMvEL,GAAelvF,UAAUijJ,qBAAuB,SAAWj1I,EAAM1J,GAEhE,IAAI6/H,EAAYtiI,KAAKstF,cAAenhF,GAE/Bm2H,IAEJA,EAAU7/H,SAAWA,EACrB6/H,EAAU50C,KAAQ40C,EAAU/gI,IAAM+gI,EAAUhhI,OAAUghI,EAAU7/H,WAMlE4qF,GAAelvF,UAAUyvF,mBAAqB,SAAWzhF,EAAM++E,GAE9D,IAAIo3C,EAAYtiI,KAAKstF,cAAenhF,GAE/Bm2H,IAEJA,EAAUp3C,OAASA,IAMrBmC,GAAelvF,UAAUkjJ,iBAAmB,SAAWl1I,EAAM4+E,GAE5D,IAAIu3C,EAAYtiI,KAAKstF,cAAenhF,GAE/Bm2H,IAEJA,EAAUv3C,KAAOA,IAMnBsC,GAAelvF,UAAUmjJ,iBAAmB,SAAWn1I,GAEtD,IAAI4+E,EAAO,EAEPu3C,EAAYtiI,KAAKstF,cAAenhF,GAQpC,OANKm2H,IAEJv3C,EAAOu3C,EAAUv3C,MAIXA,GAIRsC,GAAelvF,UAAUojJ,qBAAuB,SAAWp1I,GAE1D,IAAI1J,GAAa,EAEb6/H,EAAYtiI,KAAKstF,cAAenhF,GAQpC,OANKm2H,IAEJ7/H,EAAW6/H,EAAU7/H,UAIfA,GAIR4qF,GAAelvF,UAAUqjJ,cAAgB,SAAWr1I,GAEnD,IAAIm2H,EAAYtiI,KAAKstF,cAAenhF,GAE/Bm2H,GAEJA,EAAUv3C,KAAO,EACjBu3C,EAAUqe,QAAS,GAInBliJ,QAAQ4pC,KAAM,mCAAqCl8B,EAAO,oCAM5DkhF,GAAelvF,UAAUsjJ,cAAgB,SAAWt1I,GAEnD,IAAIm2H,EAAYtiI,KAAKstF,cAAenhF,GAE/Bm2H,IAEJA,EAAUqe,QAAS,IAMrBtzD,GAAelvF,UAAU6rC,OAAS,SAAW2kE,GAE5C,IAAM,IAAIvxG,EAAI,EAAGivC,EAAKrsC,KAAKutF,eAAe5vF,OAAQP,EAAIivC,EAAIjvC,IAAO,CAEhE,IAAIklI,EAAYtiI,KAAKutF,eAAgBnwF,GAErC,GAAOklI,EAAUqe,OAAjB,CAEA,IAAIpf,EAAYe,EAAU7/H,SAAW6/H,EAAU3kI,OAE/C2kI,EAAUv3C,MAAQu3C,EAAUprF,UAAYy3D,EAEnC2zB,EAAUue,cAETve,EAAUv3C,KAAOu3C,EAAU7/H,UAAY6/H,EAAUv3C,KAAO,KAE5Du3C,EAAUprF,YAAe,EAEpBorF,EAAUv3C,KAAOu3C,EAAU7/H,WAE/B6/H,EAAUv3C,KAAOu3C,EAAU7/H,SAC3B6/H,EAAUse,oBAAqB,GAI3Bte,EAAUv3C,KAAO,IAErBu3C,EAAUv3C,KAAO,EACjBu3C,EAAUse,oBAAqB,KAQjCte,EAAUv3C,KAAOu3C,EAAUv3C,KAAOu3C,EAAU7/H,SAEvC6/H,EAAUv3C,KAAO,IAAIu3C,EAAUv3C,MAAQu3C,EAAU7/H,WAIvD,IAAIi/I,EAAWpf,EAAUhhI,MAAQ6vB,GAAM+oD,MAAOx3E,KAAKK,MAAOu/H,EAAUv3C,KAAOw2C,GAAa,EAAGe,EAAU3kI,OAAS,GAC1GutF,EAASo3C,EAAUp3C,OAElBw2D,IAAapf,EAAUoe,eAE3B1gJ,KAAKitE,sBAAuBq1D,EAAUme,WAAc,EACpDzgJ,KAAKitE,sBAAuBq1D,EAAUoe,cAAiB,EAAIx1D,EAE3DlrF,KAAKitE,sBAAuBy0E,GAAa,EAEzCpf,EAAUme,UAAYne,EAAUoe,aAChCpe,EAAUoe,aAAegB,GAI1B,IAAInN,EAAQjS,EAAUv3C,KAAOw2C,EAAcA,EAEtCe,EAAUse,qBAAqBrM,EAAM,EAAIA,GAEzCjS,EAAUoe,eAAiBpe,EAAUme,WAEzCzgJ,KAAKitE,sBAAuBq1D,EAAUoe,cAAiBnM,EAAMrpD,EAC7DlrF,KAAKitE,sBAAuBq1D,EAAUme,YAAgB,EAAIlM,GAAQrpD,GAIlElrF,KAAKitE,sBAAuBq1D,EAAUoe,cAAiBx1D,MAqB1D2C,GAAsB1vF,UAAYD,OAAOwZ,OAAQq4B,GAAS5xC,YAC1BsJ,YAAcomF,GAE9CA,GAAsB1vF,UAAUg/D,yBAA0B,GAmD1D4wB,GAAoB5vF,UAAYD,OAAOwZ,OAAQu5D,GAAa9yE,YAC9BsJ,YAAcsmF,GAE5CA,GAAoB5vF,UAAU6rC,OAAW,WAExC,IAAIs4C,EAAK,IAAI5uD,EACT0vD,EAAK,IAAI1vD,EACT6c,EAAe,IAAInK,GAEvB,OAAO,WAEN,IAAIj3B,GAAS,IAAK,IAAK,KAEvBnP,KAAKsnC,OAAO8F,mBAAmB,GAE/BmD,EAAaopB,gBAAiB35D,KAAKsnC,OAAOhJ,aAE1C,IAAIA,EAAct+B,KAAKsnC,OAAOhJ,YAE1B3nB,EAAW3W,KAAKynC,SAAS3L,WAAWnlB,SAIpCu3E,EAAcluF,KAAKsnC,OAAOG,SAE9B,GAAKymD,GAAeA,EAAY/lD,WAQ/B,IAAM,IANFrO,EAAWo0D,EAAYp0D,SAEvBC,EAAQm0D,EAAYn0D,MAEpBkpF,EAAM,EAEA7lH,EAAI,EAAGI,EAAIu8B,EAAMp8B,OAAQP,EAAII,EAAGJ,IAIzC,IAAM,IAFFowC,EAAOzT,EAAO38B,GAER+M,EAAI,EAAGo1B,EAAKiO,EAAKkE,cAAc/zC,OAAQwM,EAAIo1B,EAAIp1B,IAAO,CAE/D,IAAI4xB,EAASjC,EAAU0T,EAAMr+B,EAAMhF,KAE/Bm8B,EAASkH,EAAKkE,cAAevnC,GAEjCm4E,EAAG79E,KAAMs3B,GAASwC,aAAcD,GAEhC8kD,EAAG3+E,KAAM6hC,GAASo1D,aAAcnrD,GAAe80B,YAAYvK,eAAgB96D,KAAKyF,MAAOglB,IAAK63D,GAE5F3rE,EAAS6rF,OAAQygB,EAAK3gC,EAAG9xD,EAAG8xD,EAAGl/D,EAAGk/D,EAAGhwD,GAErC2wF,GAAY,EAEZtsG,EAAS6rF,OAAQygB,EAAK7/B,EAAG5yD,EAAG4yD,EAAGhgE,EAAGggE,EAAG9wD,GAErC2wF,GAAY,OAMR,GAAK/0B,GAAeA,EAAYjmD,iBAUtC,IAAM,IARF05G,EAASzzD,EAAYpyD,WAAWnlB,SAEhCirI,EAAU1zD,EAAYpyD,WAAWwK,OAEjC28E,EAAM,EAIA94G,EAAI,EAAGo1B,EAAKoiH,EAAO9gJ,MAAOsJ,EAAIo1B,EAAIp1B,IAE3Cm4E,EAAG59E,IAAKi9I,EAAOxvE,KAAMhoE,GAAKw3I,EAAOtrD,KAAMlsF,GAAKw3I,EAAOvpD,KAAMjuF,IAAMo0B,aAAcD,GAE7E8kD,EAAG1+E,IAAKk9I,EAAQzvE,KAAMhoE,GAAKy3I,EAAQvrD,KAAMlsF,GAAKy3I,EAAQxpD,KAAMjuF,IAE5Di5E,EAAGsY,aAAcnrD,GAAe80B,YAAYvK,eAAgB96D,KAAKyF,MAAOglB,IAAK63D,GAE7E3rE,EAAS6rF,OAAQygB,EAAK3gC,EAAG9xD,EAAG8xD,EAAGl/D,EAAGk/D,EAAGhwD,GAErC2wF,GAAY,EAEZtsG,EAAS6rF,OAAQygB,EAAK7/B,EAAG5yD,EAAG4yD,EAAGhgE,EAAGggE,EAAG9wD,GAErC2wF,GAAY,EAMdtsG,EAASqqB,aAAc,GAtFc,IA6IvCotD,GAAgBjwF,UAAYD,OAAOwZ,OAAQq4B,GAAS5xC,YAC1BsJ,YAAc2mF,GAExCA,GAAgBjwF,UAAUm7C,QAAU,WAEnCt5C,KAAKquF,KAAK5mD,SAAS6R,UACnBt5C,KAAKquF,KAAKrsD,SAASsX,WAIpB80C,GAAgBjwF,UAAU6rC,OAAS,WAElC,IAAIuL,EAAS,IAAI7hB,EACb6kG,EAAU,IAAI7kG,EAElB,OAAO,WAEN1zB,KAAKssC,MAAMc,oBAEX,IAAIy0G,EAAa7hJ,KAAKssC,MAAM4O,SAAWl7C,KAAKssC,MAAM4O,SAAW,IACzD4mG,EAAYD,EAAan/I,KAAKoqG,IAAK9sG,KAAKssC,MAAMu4B,OAElD7kE,KAAKquF,KAAK/xD,MAAM53B,IAAKo9I,EAAWA,EAAWD,GAE3CtsG,EAAOtI,sBAAuBjtC,KAAKssC,MAAMhO,aACzCi6F,EAAQtrF,sBAAuBjtC,KAAKssC,MAAMhtC,OAAOg/B,aAEjDt+B,KAAKquF,KAAKlhD,OAAQorF,EAAQ/zD,IAAKjvB,IAE/Bv1C,KAAKquF,KAAKrsD,SAASx5B,MAAM/D,KAAMzE,KAAKssC,MAAM9jC,QAnBT,IAiGnCimF,GAAetwF,UAAYD,OAAOwZ,OAAQu5D,GAAa9yE,YAC9BsJ,YAAcgnF,GAEvCA,GAAetwF,UAAU+jC,eAAiB,WAEzC,IAAIqT,EAAS,IAAI7hB,EAEbquH,EAAa,IAAIpuH,EACjBquH,EAAiB,IAAIruH,EAEzB,OAAO,WAEN,IAAI4vB,EAAQvjD,KAAKujD,MAEb9b,EAAWznC,KAAKynC,SAChB9wB,EAAW8wB,EAAS0nD,aAAc,YAEtC6yD,EAAetpG,WAAY14C,KAAKkgB,KAAKoe,aAErC,IAAM,IAAIlhC,EAAI,EAAG+M,EAAI,EAAG/M,EAAImmD,EAAM5lD,OAAQP,IAAO,CAEhD,IAAIwxF,EAAOrrC,EAAOnmD,GAEbwxF,EAAK3+C,QAAU2+C,EAAK3+C,OAAOu+C,SAE/BuzD,EAAWjgH,iBAAkBkgH,EAAgBpzD,EAAKtwD,aAClDiX,EAAOtI,sBAAuB80G,GAC9BprI,EAAS6rF,OAAQr4F,EAAGorC,EAAO/kB,EAAG+kB,EAAOnyB,EAAGmyB,EAAOjjB,GAE/CyvH,EAAWjgH,iBAAkBkgH,EAAgBpzD,EAAK3+C,OAAO3R,aACzDiX,EAAOtI,sBAAuB80G,GAC9BprI,EAAS6rF,OAAQr4F,EAAI,EAAGorC,EAAO/kB,EAAG+kB,EAAOnyB,EAAGmyB,EAAOjjB,GAEnDnoB,GAAK,GAMPs9B,EAAS0nD,aAAc,YAAanuD,aAAc,GApCV,IAqF1C8tD,GAAiB3wF,UAAYD,OAAOwZ,OAAQ2/B,GAAKl5C,YACtBsJ,YAAcqnF,GAEzCA,GAAiB3wF,UAAUm7C,QAAU,WAEpCt5C,KAAKynC,SAAS6R,UACdt5C,KAAKgiC,SAASsX,WAIfw1C,GAAiB3wF,UAAU6rC,OAAS,WAEnChqC,KAAKgiC,SAASx5B,MAAM/D,KAAMzE,KAAKssC,MAAM9jC,SA+CtCwmF,GAAoB7wF,UAAYD,OAAOwZ,OAAQq4B,GAAS5xC,YAC1BsJ,YAAcunF,GAE5CA,GAAoB7wF,UAAUm7C,QAAU,WAEvCt5C,KAAK0qC,SAAU,GAAIjD,SAAS6R,UAC5Bt5C,KAAK0qC,SAAU,GAAI1I,SAASsX,WAI7B01C,GAAoB7wF,UAAU6rC,OAAS,WAEtC,IAAI8mD,EAAO9wF,KAAK0qC,SAAU,GAI1BomD,EAAK9uD,SAASx5B,MAAM/D,KAAMzE,KAAKssC,MAAM9jC,OAIrC,IAAIy5I,EAAwB,GAAnBjiJ,KAAKssC,MAAM7Z,MAChByvH,EAAyB,GAApBliJ,KAAKssC,MAAM5Z,OAEhB/b,EAAWm6E,EAAKrpD,SAAS3L,WAAWnlB,SACpC8J,EAAQ9J,EAAS8J,MAIrBA,EAAQ,GAAQwhI,EAAIxhI,EAAQ,IAAQyhI,EAAIzhI,EAAQ,GAAM,EACtDA,EAAQ,GAAQwhI,EAAIxhI,EAAQ,GAAQyhI,EAAIzhI,EAAQ,GAAM,EACtDA,EAAQ,IAAQwhI,EAAIxhI,EAAQ,GAAQyhI,EAAIzhI,EAAQ,GAAM,EACtDA,EAAQ,IAAQwhI,EAAIxhI,EAAO,KAASyhI,EAAIzhI,EAAO,IAAO,EACtDA,EAAO,IAASwhI,EAAIxhI,EAAO,KAASyhI,EAAIzhI,EAAO,IAAO,EAEtD9J,EAASqqB,aAAc,IAoCxBiuD,GAAsB9wF,UAAYD,OAAOwZ,OAAQq4B,GAAS5xC,YAC1BsJ,YAAcwnF,GAE9CA,GAAsB9wF,UAAUm7C,QAAU,WAEzCt5C,KAAK0qC,SAAU,GAAIjD,SAAS6R,UAC5Bt5C,KAAK0qC,SAAU,GAAI1I,SAASsX,WAI7B21C,GAAsB9wF,UAAU6rC,OAAS,WAExC,IAAIuL,EAAS,IAAI7hB,EAEbg7D,EAAS,IAAIj1D,EACbk1D,EAAS,IAAIl1D,EAEjB,OAAO,WAEN,IAAImpF,EAAO5iH,KAAK0qC,SAAU,GAEtBzgC,EAAS24G,EAAKn7E,SAAS0nD,aAAc,SAEzCT,EAAOjqF,KAAMzE,KAAKssC,MAAM9jC,OACxBmmF,EAAOlqF,KAAMzE,KAAKssC,MAAMiP,aAExB,IAAM,IAAIn+C,EAAI,EAAGI,EAAIyM,EAAOpJ,MAAOzD,EAAII,EAAGJ,IAAO,CAEhD,IAAIoL,EAAUpL,EAAMI,EAAI,EAAQkxF,EAASC,EAEzC1kF,EAAOu4F,OAAQplG,EAAGoL,EAAM1L,EAAG0L,EAAMktB,EAAGltB,EAAMhB,GAI3Co7G,EAAKz1E,OAAQoI,EAAOtI,sBAAuBjtC,KAAKssC,MAAMhO,aAAcs3D,UAEpE3rF,EAAO+2B,aAAc,GA1BkB,IAyEzCouD,GAAWjxF,UAAYD,OAAOwZ,OAAQu5D,GAAa9yE,YAC9BsJ,YAAc2nF,IAsFnCI,GAAgBrxF,UAAYD,OAAOwZ,OAAQu5D,GAAa9yE,YAC9BsJ,YAAc+nF,IAoDxCG,GAAkBxxF,UAAYD,OAAOwZ,OAAQu5D,GAAa9yE,YAC9BsJ,YAAckoF,GAE1CA,GAAkBxxF,UAAU6rC,OAAW,WAEtC,IAAIs4C,EAAK,IAAI5uD,EACT0vD,EAAK,IAAI1vD,EACT6c,EAAe,IAAInK,GAEvB,OAAO,WAENpmC,KAAKsnC,OAAO8F,mBAAmB,GAE/BmD,EAAaopB,gBAAiB35D,KAAKsnC,OAAOhJ,aAgB1C,IAAM,IAdFA,EAAct+B,KAAKsnC,OAAOhJ,YAE1B3nB,EAAW3W,KAAKynC,SAAS3L,WAAWnlB,SAIpCu3E,EAAcluF,KAAKsnC,OAAOG,SAE1B3N,EAAWo0D,EAAYp0D,SAEvBC,EAAQm0D,EAAYn0D,MAEpBkpF,EAAM,EAEA7lH,EAAI,EAAGI,EAAIu8B,EAAMp8B,OAAQP,EAAII,EAAGJ,IAAO,CAEhD,IAAIowC,EAAOzT,EAAO38B,GAEdkpC,EAASkH,EAAKlH,OAElBg8C,EAAG79E,KAAMq1B,EAAU0T,EAAKtwC,IACtButB,IAAKqP,EAAU0T,EAAKhmC,IACpBijB,IAAKqP,EAAU0T,EAAKjlC,IACpB6rE,aAAc,GACd71C,aAAcD,GAEhB8kD,EAAG3+E,KAAM6hC,GAASo1D,aAAcnrD,GAAe80B,YAAYvK,eAAgB96D,KAAKyF,MAAOglB,IAAK63D,GAE5F3rE,EAAS6rF,OAAQygB,EAAK3gC,EAAG9xD,EAAG8xD,EAAGl/D,EAAGk/D,EAAGhwD,GAErC2wF,GAAY,EAEZtsG,EAAS6rF,OAAQygB,EAAK7/B,EAAG5yD,EAAG4yD,EAAGhgE,EAAGggE,EAAG9wD,GAErC2wF,GAAY,EAIbtsG,EAASqqB,aAAc,GAlDY,IAgGrC4uD,GAAuBzxF,UAAYD,OAAOwZ,OAAQq4B,GAAS5xC,YAC1BsJ,YAAcmoF,GAE/CA,GAAuBzxF,UAAUm7C,QAAU,WAE1C,IAAI6oG,EAAaniJ,KAAK0qC,SAAU,GAC5B03G,EAAapiJ,KAAK0qC,SAAU,GAEhCy3G,EAAW16G,SAAS6R,UACpB6oG,EAAWngH,SAASsX,UACpB8oG,EAAW36G,SAAS6R,UACpB8oG,EAAWpgH,SAASsX,WAIrBs2C,GAAuBzxF,UAAU6rC,OAAS,WAEzC,IAAIs4C,EAAK,IAAI5uD,EACT0vD,EAAK,IAAI1vD,EACTywD,EAAK,IAAIzwD,EAEb,OAAO,WAEN4uD,EAAGr1C,sBAAuBjtC,KAAKssC,MAAMhO,aACrC8kD,EAAGn2C,sBAAuBjtC,KAAKssC,MAAMhtC,OAAOg/B,aAC5C6lD,EAAGtR,WAAYuQ,EAAId,GAEnB,IAAI6/D,EAAaniJ,KAAK0qC,SAAU,GAC5B03G,EAAapiJ,KAAK0qC,SAAU,GAEhCy3G,EAAWh1G,OAAQg3C,GACnBg+D,EAAWngH,SAASx5B,MAAM/D,KAAMzE,KAAKssC,MAAM9jC,OAE3C45I,EAAWj1G,OAAQg3C,GACnBi+D,EAAW9lH,MAAMhK,EAAI6xD,EAAGxmF,UAnBgB,IA2I1CkyF,GAAa1xF,UAAYD,OAAOwZ,OAAQu5D,GAAa9yE,YAC9BsJ,YAAcooF,GAErCA,GAAa1xF,UAAU6rC,OAAS,WAO/B,SAASq4G,EAAU18F,EAAOn1B,EAAGpN,EAAGkP,GAE/BijB,EAAO7wC,IAAK8rB,EAAGpN,EAAGkP,GAAI4pE,UAAW7+D,GAEjC,IAAIqtC,EAASslB,EAAUrqC,GAEvB,QAAgB52C,IAAX27D,EAIJ,IAAM,IAFF/zD,EAAW8wB,EAAS0nD,aAAc,YAE5B/xF,EAAI,EAAGI,EAAIktE,EAAO/sE,OAAQP,EAAII,EAAGJ,IAE1CuZ,EAAS6rF,OAAQ93B,EAAQttE,GAAKm4C,EAAO/kB,EAAG+kB,EAAOnyB,EAAGmyB,EAAOjjB,GAjB5D,IAAImV,EAAUuoD,EAEVz6C,EAAS,IAAI7hB,EACb2J,EAAS,IAAIwT,GAsBjB,OAAO,WAENpJ,EAAWznC,KAAKynC,SAChBuoD,EAAWhwF,KAAKgwF,SAOhB3yD,EAAOoB,iBAAiBh6B,KAAMzE,KAAKq9B,OAAOoB,kBAI1C4jH,EAAU,IAAK,EAAG,GAAK,GACvBA,EAAU,IAAK,EAAG,EAAI,GAItBA,EAAU,MAdF,GAAO,GAca,GAC5BA,EAAU,KAfF,GAAO,GAea,GAC5BA,EAAU,MAhBF,EAAO,GAgBa,GAC5BA,EAAU,KAjBF,EAAO,GAiBa,GAI5BA,EAAU,MArBF,GAAO,EAqBW,GAC1BA,EAAU,KAtBF,GAAO,EAsBW,GAC1BA,EAAU,MAvBF,EAAO,EAuBW,GAC1BA,EAAU,KAxBF,EAAO,EAwBW,GAI1BA,EAAU,KAAQ9vH,GAASjP,KAAW,GACtC++H,EAAU,MAAM,GAAW/+H,KAAW,GACtC++H,EAAU,KAAc,EAAG/+H,GAAW,GAItC++H,EAAU,OAlCF,EAkCgB,EAAG,GAC3BA,EAAU,MAnCF,EAmCgB,EAAG,GAC3BA,EAAU,MAAS,GApCJ,EAoCY,GAC3BA,EAAU,MAAS,EArCJ,EAqCY,GAE3BA,EAAU,OAvCF,EAuCgB,GAAK,GAC7BA,EAAU,MAxCF,EAwCgB,GAAK,GAC7BA,EAAU,MAAS,GAzCJ,GAyCc,GAC7BA,EAAU,MAAS,EA1CJ,GA0Cc,GAE7B56G,EAAS0nD,aAAc,YAAanuD,aAAc,GA5EpB,GA4GhCuvD,GAAUpyF,UAAYD,OAAOwZ,OAAQu5D,GAAa9yE,WAClDoyF,GAAUpyF,UAAUsJ,YAAc8oF,GAElCA,GAAUpyF,UAAU6rC,OAAS,WAE5B,IAAIytE,EAAM,IAAIzxE,EAEd,OAAO,SAAiBsB,GAcvB,QAZgBv4B,IAAXu4B,GAEJ7oC,QAAQ4pC,KAAM,4DAIMt5B,IAAhB/O,KAAKsnC,QAETmwE,EAAI/8D,cAAe16C,KAAKsnC,SAIpBmwE,EAAIC,UAAT,CAEA,IAAIt1G,EAAMq1G,EAAIr1G,IACVC,EAAMo1G,EAAIp1G,IAkBVsU,EAAW3W,KAAKynC,SAAS3L,WAAWnlB,SACpC8J,EAAQ9J,EAAS8J,MAErBA,EAAQ,GAAMpe,EAAImuB,EAAG/P,EAAQ,GAAMpe,EAAI+gB,EAAG3C,EAAQ,GAAMpe,EAAIiwB,EAC5D7R,EAAQ,GAAMre,EAAIouB,EAAG/P,EAAQ,GAAMpe,EAAI+gB,EAAG3C,EAAQ,GAAMpe,EAAIiwB,EAC5D7R,EAAQ,GAAMre,EAAIouB,EAAG/P,EAAQ,GAAMre,EAAIghB,EAAG3C,EAAQ,GAAMpe,EAAIiwB,EAC5D7R,EAAQ,GAAMpe,EAAImuB,EAAG/P,EAAO,IAAOre,EAAIghB,EAAG3C,EAAO,IAAOpe,EAAIiwB,EAC5D7R,EAAO,IAAOpe,EAAImuB,EAAG/P,EAAO,IAAOpe,EAAI+gB,EAAG3C,EAAO,IAAOre,EAAIkwB,EAC5D7R,EAAO,IAAOre,EAAIouB,EAAG/P,EAAO,IAAOpe,EAAI+gB,EAAG3C,EAAO,IAAOre,EAAIkwB,EAC5D7R,EAAO,IAAOre,EAAIouB,EAAG/P,EAAO,IAAOre,EAAIghB,EAAG3C,EAAO,IAAOre,EAAIkwB,EAC5D7R,EAAO,IAAOpe,EAAImuB,EAAG/P,EAAO,IAAOre,EAAIghB,EAAG3C,EAAO,IAAOre,EAAIkwB,EAE5D3b,EAASqqB,aAAc,EAEvBhhC,KAAKynC,SAAS20E,0BArDa,GA2D7B7rB,GAAUpyF,UAAUu8C,cAAgB,SAAWpT,GAK9C,OAHAtnC,KAAKsnC,OAASA,EACdtnC,KAAKgqC,SAEEhqC,MAoBR,IAAI2wF,GACAC,IAsCJJ,GAAYryF,UAAYD,OAAOwZ,OAAQq4B,GAAS5xC,YAC1BsJ,YAAc+oF,GAEpCA,GAAYryF,UAAU4yF,aAAiB,WAEtC,IACI4D,EADAoF,EAAO,IAAIrmE,EAGf,OAAO,SAAuB3M,GAIxBA,EAAI3D,EAAI,OAEZpjB,KAAKmwC,WAAWzrC,IAAK,EAAG,EAAG,EAAG,GAEnBqiB,EAAI3D,GAAM,OAErBpjB,KAAKmwC,WAAWzrC,IAAK,EAAG,EAAG,EAAG,IAI9Bq1F,EAAKr1F,IAAKqiB,EAAIuL,EAAG,GAAKvL,EAAIyJ,GAAI60C,YAE9BsvB,EAAUjyF,KAAKw0F,KAAMnwE,EAAI3D,GAEzBpjB,KAAKmwC,WAAW2pD,iBAAkBC,EAAMpF,KAvBN,GA+BrCnE,GAAYryF,UAAU6yF,UAAY,SAAWrzF,EAAQ8yF,EAAYC,QAE5C3hF,IAAf0hF,IAA2BA,EAAa,GAAM9yF,QAChCoR,IAAd2hF,IAA0BA,EAAY,GAAMD,GAEjDzwF,KAAK8wF,KAAKx0D,MAAM53B,IAAK,EAAGhC,KAAKL,IAAK,EAAG1E,EAAS8yF,GAAc,GAC5DzwF,KAAK8wF,KAAKjS,eAEV7+E,KAAKquF,KAAK/xD,MAAM53B,IAAKgsF,EAAWD,EAAYC,GAC5C1wF,KAAKquF,KAAK13E,SAASyM,EAAIzlB,EACvBqC,KAAKquF,KAAKxP,gBAIX2R,GAAYryF,UAAUmkJ,SAAW,SAAW95I,GAE3CxI,KAAK8wF,KAAK9uD,SAASx5B,MAAM/D,KAAM+D,GAC/BxI,KAAKquF,KAAKrsD,SAASx5B,MAAM/D,KAAM+D,KAmChCyoF,GAAW9yF,UAAYD,OAAOwZ,OAAQu5D,GAAa9yE,YAC9BsJ,YAAcwpF,GAiFnC,IAAIjvE,GAAM,IAAI0R,EACVq7F,GAAK,IAAI79B,GACT89B,GAAK,IAAI99B,GACTqxD,GAAK,IAAIrxD,GAabe,GAAiB9zF,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,WAClD8zF,GAAiB9zF,UAAUsJ,YAAcwqF,GAEzCA,GAAiB9zF,UAAU+qI,SAAW,SAAWtsI,GAEhD,IAAI8tE,EAAS1qE,KAAK0qE,OACdltE,EAAIktE,EAAO/sE,OAEXgoD,GAAUnoD,GAAMwC,KAAK21E,OAAS,EAAI,IAAQ/4E,EAC1C+uI,EAAWjpI,KAAKK,MAAO4iD,GACvBulC,EAASvlC,EAAQgmF,EAEhB3rI,KAAK21E,OAETg2D,GAAYA,EAAW,EAAI,GAAMjpI,KAAKK,MAAOL,KAAKoI,IAAK6gI,GAAajhE,EAAO/sE,QAAW,GAAM+sE,EAAO/sE,OAE7E,IAAXutF,GAAgBygD,IAAanuI,EAAI,IAE5CmuI,EAAWnuI,EAAI,EACf0tF,EAAS,GAIV,IAAIzkD,EAAIC,EAAIC,EAAIC,EA6BhB,GA3BK5mC,KAAK21E,QAAUg2D,EAAW,EAE9BllG,EAAKikC,GAAUihE,EAAW,GAAMnuI,IAKhCwkB,GAAI6wD,WAAYnI,EAAQ,GAAKA,EAAQ,IAAMjgD,IAAKigD,EAAQ,IACxDjkC,EAAKzkB,IAIN0kB,EAAKgkC,EAAQihE,EAAWnuI,GACxBmpC,EAAK+jC,GAAUihE,EAAW,GAAMnuI,GAE3BwC,KAAK21E,QAAUg2D,EAAW,EAAInuI,EAElCopC,EAAK8jC,GAAUihE,EAAW,GAAMnuI,IAKhCwkB,GAAI6wD,WAAYnI,EAAQltE,EAAI,GAAKktE,EAAQltE,EAAI,IAAMitB,IAAKigD,EAAQltE,EAAI,IACpEopC,EAAK5kB,SAIajT,IAAd/O,KAAKkF,MAAoC,gBAAdlF,KAAKkF,MAAwC,YAAdlF,KAAKkF,KAAqB,CAGxF,IAAIvC,EAAoB,YAAd3C,KAAKkF,KAAqB,GAAM,IACtC2sF,EAAMnvF,KAAKC,IAAK8jC,EAAGuvD,kBAAmBtvD,GAAM/jC,GAC5CmvF,EAAMpvF,KAAKC,IAAK+jC,EAAGsvD,kBAAmBrvD,GAAMhkC,GAC5CovF,EAAMrvF,KAAKC,IAAKgkC,EAAGqvD,kBAAmBpvD,GAAMjkC,GAG3CmvF,EAAM,OAAOA,EAAM,GACnBD,EAAM,OAAOA,EAAMC,GACnBC,EAAM,OAAOA,EAAMD,GAExBi9B,GAAGn9B,yBAA0BnrD,EAAGjW,EAAGkW,EAAGlW,EAAGmW,EAAGnW,EAAGoW,EAAGpW,EAAGqhE,EAAKC,EAAKC,GAC/Di9B,GAAGp9B,yBAA0BnrD,EAAGrjB,EAAGsjB,EAAGtjB,EAAGujB,EAAGvjB,EAAGwjB,EAAGxjB,EAAGyuE,EAAKC,EAAKC,GAC/DwwD,GAAG3wD,yBAA0BnrD,EAAGnU,EAAGoU,EAAGpU,EAAGqU,EAAGrU,EAAGsU,EAAGtU,EAAGu/D,EAAKC,EAAKC,QAEzD,GAAmB,eAAd/xF,KAAKkF,KAAwB,CAExC,IAAIysF,OAA2B5iF,IAAjB/O,KAAK2xF,QAAwB3xF,KAAK2xF,QAAU,GAC1Do9B,GAAGt9B,eAAgBhrD,EAAGjW,EAAGkW,EAAGlW,EAAGmW,EAAGnW,EAAGoW,EAAGpW,EAAGmhE,GAC3Cq9B,GAAGv9B,eAAgBhrD,EAAGrjB,EAAGsjB,EAAGtjB,EAAGujB,EAAGvjB,EAAGwjB,EAAGxjB,EAAGuuE,GAC3C4wD,GAAG9wD,eAAgBhrD,EAAGnU,EAAGoU,EAAGpU,EAAGqU,EAAGrU,EAAGsU,EAAGtU,EAAGq/D,GAI5C,OAAO,IAAIj+D,EAASq7F,GAAG/8B,KAAM9G,GAAU8jC,GAAGh9B,KAAM9G,GAAUq3D,GAAGvwD,KAAM9G,MAepEgH,GAAkB/zF,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,YACvBsJ,YAAcyqF,GAE1CA,GAAkB/zF,UAAU+qI,SAAW,SAAWtsI,GAEjD,IAAIylF,EAAKriF,KAAKqiF,GAAIC,EAAKtiF,KAAKsiF,GAAIc,EAAKpjF,KAAKojF,GAAIe,EAAKnkF,KAAKmkF,GAExD,OAAO,IAAIzwD,EACVsvD,GAAapmF,EAAGylF,EAAG7xD,EAAG8xD,EAAG9xD,EAAG4yD,EAAG5yD,EAAG2zD,EAAG3zD,GACrCwyD,GAAapmF,EAAGylF,EAAGj/D,EAAGk/D,EAAGl/D,EAAGggE,EAAGhgE,EAAG+gE,EAAG/gE,GACrC4/D,GAAapmF,EAAGylF,EAAG/vD,EAAGgwD,EAAGhwD,EAAG8wD,EAAG9wD,EAAG6xD,EAAG7xD,MAevC6/D,GAAsBh0F,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,YACvBsJ,YAAc0qF,GAE9CA,GAAsBh0F,UAAU+qI,SAAW,SAAWtsI,GAErD,IAAIylF,EAAKriF,KAAKqiF,GAAIC,EAAKtiF,KAAKsiF,GAAIc,EAAKpjF,KAAKojF,GAE1C,OAAO,IAAI1vD,EACVivD,GAAiB/lF,EAAGylF,EAAG7xD,EAAG8xD,EAAG9xD,EAAG4yD,EAAG5yD,GACnCmyD,GAAiB/lF,EAAGylF,EAAGj/D,EAAGk/D,EAAGl/D,EAAGggE,EAAGhgE,GACnCu/D,GAAiB/lF,EAAGylF,EAAG/vD,EAAGgwD,EAAGhwD,EAAG8wD,EAAG9wD,MAcrC8/D,GAAWj0F,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,YACvBsJ,YAAc2qF,GAEnCA,GAAWj0F,UAAU+qI,SAAW,SAAWtsI,GAE1C,GAAW,IAANA,EAEJ,OAAOoD,KAAKojF,GAAGxzE,QAIhB,IAAI2lC,EAAS,IAAI7hB,EAMjB,OAJA6hB,EAAOs9B,WAAY7yE,KAAKojF,GAAIpjF,KAAKsiF,IACjC/sC,EAAOulB,eAAgBl+D,GACvB24C,EAAO9qB,IAAKzqB,KAAKsiF,IAEV/sC,IAUR88C,GAASl0F,UAAYD,OAAOwZ,OAAQ8rE,GAAarlF,YAC9BsJ,YAAc4qF,GAMjC,IAAImwD,IAEHC,0BAA2B,SAAWh7G,EAAUu3E,GAI/C,IAAM,IAFF50E,EAAQ,IAAIgnC,GAENh0E,EAAI,EAAGI,EAAIwhH,EAAUrhH,OAAQP,EAAII,EAAGJ,IAE7CgtC,EAAM3f,IAAK,IAAI4sB,GAAM5P,EAAUu3E,EAAW5hH,KAI3C,OAAOgtC,GAIRs4G,OAAQ,SAAWxjC,EAAOjvE,EAAQ7S,GAEjC8hF,EAAMhC,YAAajtE,EAAO3R,aAC1B2R,EAAOV,OAAQ2vE,GACf9hF,EAAM3S,IAAKy0F,IAIZyjC,OAAQ,SAAWzjC,EAAO9hF,EAAO6S,GAEhCivE,EAAMhC,aAAa,IAAIvpF,GAAU+kB,WAAYzI,EAAO3R,cAEpDlB,EAAMmS,OAAQ2vE,GACdjvE,EAAOxlB,IAAKy0F,KAuKdj8B,GAAMvrE,OAAS,SAAWkrI,EAAW1Z,GAQpC,OANAzqI,QAAQC,IAAK,4CAEbkkJ,EAAUzkJ,UAAYD,OAAOwZ,OAAQurE,GAAM9kF,WAC3CykJ,EAAUzkJ,UAAUsJ,YAAcm7I,EAClCA,EAAUzkJ,UAAU+qI,SAAWA,EAExB0Z,GAgBRrwD,GAAmBp0F,UAAYD,OAAOwZ,OAAQu6E,GAAiB9zF,WAa/Dq0F,GAAar0F,UAAYD,OAAOwZ,OAAQu6E,GAAiB9zF,WAazDs0F,GAAOt0F,UAAYD,OAAOwZ,OAAQu6E,GAAiB9zF,WAEnDD,OAAO20F,OAAQJ,GAAOt0F,WAErB0kJ,cAAe,SAAW3lJ,GAEzBuB,QAAQqT,MAAO,qDAGhBgxI,sBAAuB,SAAWx0C,GAEjC7vG,QAAQqT,MAAO,6DAGhBixI,yBAA0B,SAAWC,GAEpCvkJ,QAAQqT,MAAO,kEAqBjBs9E,GAAWjxF,UAAU8kJ,UAAY,WAEhCxkJ,QAAQqT,MAAO,6FAIhB28E,GAAetwF,UAAU6rC,OAAS,WAEjCvrC,QAAQqT,MAAO,iEA6BhB5T,OAAO20F,OAAQl5D,EAAKx7B,WAEnB+nC,OAAQ,SAAWooE,GAGlB,OADA7vG,QAAQ4pC,KAAM,2DACProC,KAAK23G,UAAWrJ,IAGxBx5F,MAAO,WAGN,OADArW,QAAQ4pC,KAAM,wDACProC,KAAK03G,WAGbwrC,kBAAmB,SAAWzrC,GAG7B,OADAh5G,QAAQ4pC,KAAM,0EACProC,KAAK+3G,cAAeN,IAG5BhyG,KAAM,SAAW6oG,GAGhB,OADA7vG,QAAQ4pC,KAAM,uDACProC,KAAKk3D,QAASo3C,MAKvBpwG,OAAO20F,OAAQ7sD,EAAK7nC,WAEnB+nC,OAAQ,SAAWooE,GAGlB,OADA7vG,QAAQ4pC,KAAM,2DACProC,KAAK23G,UAAWrJ,IAGxBx5F,MAAO,WAGN,OADArW,QAAQ4pC,KAAM,wDACProC,KAAK03G,WAGbwrC,kBAAmB,SAAWzrC,GAG7B,OADAh5G,QAAQ4pC,KAAM,0EACProC,KAAK+3G,cAAeN,IAG5B0rC,qBAAsB,SAAW5pC,GAGhC,OADA96G,QAAQ4pC,KAAM,gFACProC,KAAKq5G,iBAAkBE,IAG/B9zG,KAAM,SAAW6oG,GAGhB,OADA7vG,QAAQ4pC,KAAM,uDACProC,KAAKk3D,QAASo3C,MAKvBn3D,GAAMh5C,UAAU+nC,OAAS,SAAWooE,GAGnC,OADA7vG,QAAQ4pC,KAAM,4DACProC,KAAK23G,UAAWrJ,IAIxBn9E,GAAMiyH,SAAW,WAGhB,OADA3kJ,QAAQ4pC,KAAM,yEACP3lC,KAAKG,UAIb3E,OAAO20F,OAAQzsD,GAAQjoC,WAEtBklJ,qBAAsB,SAAW5iI,EAAOoR,GAGvC,OADApzB,QAAQ4pC,KAAM,uFACProC,KAAKgsB,QAASvL,EAAOoR,IAG7ByxH,gBAAiB,SAAW/tG,GAG3B,OADA92C,QAAQ4pC,KAAM,kGACPkN,EAAOmmD,aAAc17F,OAG7BujJ,qBAAsB,SAAWrmJ,GAEhCuB,QAAQqT,MAAO,6DAGhB0xI,cAAe,SAAUzhJ,EAAQ8vB,EAAQl0B,GAGxC,OADAc,QAAQ4pC,KAAM,6GACProC,KAAKuiG,uBAAwBxgG,IAGrC0hJ,oBAAqB,SAAUhjI,EAAOoR,EAAQl0B,GAE7Cc,QAAQqT,MAAO,8DAMjB5T,OAAO20F,OAAQl/D,EAAQx1B,WAEtBulJ,gBAAiB,SAAWngI,GAG3B,OADA9kB,QAAQ4pC,KAAM,0EACProC,KAAK0+F,aAAcn7E,IAG3B8/H,qBAAsB,SAAW5iI,EAAOoR,GAGvC,OADApzB,QAAQ4pC,KAAM,uFACProC,KAAKgsB,QAASvL,EAAOoR,IAG7B8xH,YAAa,WAEZ,IAAIrhE,EAEJ,OAAO,WAIN,YAFYvzE,IAAPuzE,IAAmBA,EAAK,IAAI5uD,GACjCj1B,QAAQ4pC,KAAM,wGACPi6C,EAAG+a,oBAAqBr9F,KAAM,IAR1B,GAabs9G,0BAA2B,SAAWzmC,GAGrC,OADAp4E,QAAQ4pC,KAAM,kGACProC,KAAKggG,2BAA4BnpB,IAGzC+sE,gBAAiB,WAEhBnlJ,QAAQ4pC,KAAM,wDAGfi7G,gBAAiB,SAAW/tG,GAG3B,OADA92C,QAAQ4pC,KAAM,kGACPkN,EAAOhX,aAAcv+B,OAG7B6jJ,gBAAiB,SAAWtuG,GAG3B,OADA92C,QAAQ4pC,KAAM,kGACPkN,EAAOhX,aAAcv+B,OAG7BujJ,qBAAsB,SAAWrmJ,GAEhCuB,QAAQqT,MAAO,6DAGhBgyI,WAAY,SAAW15I,GAEtB3L,QAAQ4pC,KAAM,oGACdj+B,EAAEq6D,mBAAoBzkE,OAGvB+jJ,YAAa,SAAWxuG,GAGvB,OADA92C,QAAQ4pC,KAAM,8FACPkN,EAAOhX,aAAcv+B,OAG7B6wF,UAAW,WAEVpyF,QAAQqT,MAAO,kDAGhB2rG,QAAS,WAERh/G,QAAQqT,MAAO,gDAGhBo9E,QAAS,WAERzwF,QAAQqT,MAAO,gDAGhB4rG,QAAS,WAERj/G,QAAQqT,MAAO,gDAGhBkyI,aAAc,WAEbvlJ,QAAQqT,MAAO,qDAGhB0xI,cAAe,SAAUzhJ,EAAQ8vB,EAAQl0B,GAGxC,OADAc,QAAQ4pC,KAAM,6GACProC,KAAKuiG,uBAAwBxgG,IAGrC0hJ,oBAAqB,SAAUhjI,EAAOoR,EAAQl0B,GAE7Cc,QAAQqT,MAAO,4DAGhBmyI,YAAa,SAAUptI,EAAMk6B,EAAOC,EAAQp6B,EAAK8qB,EAAMC,GAGtD,OADAljC,QAAQ4pC,KAAM,wHACProC,KAAKmkG,gBAAiBttF,EAAMk6B,EAAOn6B,EAAKo6B,EAAQtP,EAAMC,MAM/D0E,GAAMloC,UAAU+lJ,mBAAqB,SAAWpzD,GAG/C,OADAryF,QAAQ4pC,KAAM,6EACProC,KAAK46G,eAAgB9pB,IAI7Bz9D,EAAWl1B,UAAUmlJ,gBAAkB,SAAW/tG,GAGjD,OADA92C,QAAQ4pC,KAAM,mHACPkN,EAAOimD,gBAAiBx7F,OAIhC9B,OAAO20F,OAAQ77C,GAAI74C,WAElB+kJ,kBAAmB,SAAWzrC,GAG7B,OADAh5G,QAAQ4pC,KAAM,yEACProC,KAAK+3G,cAAeN,IAG5B0sC,oBAAqB,SAAWtqF,GAG/B,OADAp7D,QAAQ4pC,KAAM,6EACProC,KAAKw5G,gBAAiB3/C,IAG9BspF,qBAAsB,SAAW5pC,GAGhC,OADA96G,QAAQ4pC,KAAM,+EACProC,KAAKq5G,iBAAkBE,MAMhCr7G,OAAO20F,OAAQrO,GAAMrmF,WAEpBimJ,QAAS,SAAWv/I,GAGnB,OADApG,QAAQ4pC,KAAM,4EACP,IAAIyvC,GAAiB93E,KAAM6E,IAGnCw/I,aAAc,SAAWx/I,GAGxB,OADApG,QAAQ4pC,KAAM,+EACP,IAAImyC,GAAex6E,KAAM6E,MAMlC3G,OAAO20F,OAAQtiE,EAAQpyB,WAEtBmmJ,cAAe,SAAWp2G,EAAWzlC,EAAOopB,GAG3C,OADApzB,QAAQqT,MAAO,+EACR9R,KAAKoyE,oBAAqBlkC,EAAWzlC,EAAOopB,MAMrD3zB,OAAO20F,OAAQn/D,EAAQv1B,WAEtBomJ,2BAA4B,WAE3B9lJ,QAAQqT,MAAO,8GAGhB0yI,uBAAwB,WAEvB/lJ,QAAQqT,MAAO,sGAGhB2yI,sBAAuB,SAAWlhI,GAGjC,OADA9kB,QAAQ4pC,KAAM,yFACProC,KAAKitC,sBAAuB1pB,IAGpCmhI,mBAAoB,SAAWnhI,GAG9B,OADA9kB,QAAQ4pC,KAAM,mFACProC,KAAKm9F,mBAAoB55E,IAGjCohI,oBAAqB,SAAWl8I,EAAOukC,GAGtC,OADAvuC,QAAQ4pC,KAAM,qFACProC,KAAKq9F,oBAAqBrwD,EAAQvkC,IAG1Cm8I,gBAAiB,SAAWrhI,GAG3B,OADA9kB,QAAQ4pC,KAAM,uFACProC,KAAKu+B,aAAchb,IAG3B+gI,cAAe,SAAWp2G,EAAWzlC,EAAOopB,GAG3C,OADApzB,QAAQqT,MAAO,+EACR9R,KAAKoyE,oBAAqBlkC,EAAWzlC,EAAOopB,MAMrD3zB,OAAO20F,OAAQxgE,EAAQl0B,WAEtBmmJ,cAAe,SAAWp2G,EAAWzlC,EAAOopB,GAG3C,OADApzB,QAAQqT,MAAO,+EACR9R,KAAKoyE,oBAAqBlkC,EAAWzlC,EAAOopB,MAQrDggB,GAAS1zC,UAAU0mJ,gBAAkB,WAEpCpmJ,QAAQ4pC,KAAM,yDAIfnqC,OAAO20F,OAAQ9iD,GAAS5xC,WAEvB2mJ,eAAgB,SAAW34I,GAG1B,OADA1N,QAAQ4pC,KAAM,6EACProC,KAAKm+G,gBAAiBhyG,IAG9B44I,YAAa,WAEZtmJ,QAAQ4pC,KAAM,8EAGfwoD,UAAW,SAAW31C,EAAU6+C,GAG/B,OADAt7F,QAAQ4pC,KAAM,kGACProC,KAAK29G,gBAAiB5jB,EAAM7+C,MAMrCh9C,OAAOmB,iBAAkB0wC,GAAS5xC,WAEjC6mJ,YACCvkJ,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,uDACProC,KAAKu8B,SAASmT,OAGtBhrC,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,uDACdroC,KAAKu8B,SAASmT,MAAQvwC,IAIxB8lJ,eACCxkJ,IAAK,WAEJhC,QAAQ4pC,KAAM,kGAGf3jC,IAAK,WAEJjG,QAAQ4pC,KAAM,qGAOjBnqC,OAAOmB,iBAAkB6wE,GAAI/xE,WAE5Bu5C,SACCj3C,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,oDACProC,KAAKmwE,WAOfjyE,OAAOgB,eAAgBkxE,GAASjyE,UAAW,oBAE1CsC,IAAK,WAEJhC,QAAQ4pC,KAAM,uDAGf3jC,IAAK,WAEJjG,QAAQ4pC,KAAM,yDAMhBnqC,OAAOgB,eAAgB+jF,GAAM9kF,UAAW,wBAEvCsC,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,kEACProC,KAAKkjF,oBAGbx+E,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,kEACdroC,KAAKkjF,mBAAqB/jF,KAQ5B+xC,GAAkB/yC,UAAU+mJ,QAAU,SAAWllC,EAAa1uE,GAE7D7yC,QAAQ4pC,KAAM,oHAGKt5B,IAAduiC,IAA0BtxC,KAAKsxC,UAAYA,GAChDtxC,KAAK+/G,eAAgBC,IAMtB9hH,OAAOmB,iBAAkBs/E,GAAMxgF,WAC9BgnJ,YACCzgJ,IAAK,WAEJjG,QAAQ4pC,KAAM,gDAIhB+8G,iBACC1gJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,4DACdroC,KAAKusC,OAAOlP,OAAO8T,IAAMhyC,IAI3BkmJ,kBACC3gJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,8DACdroC,KAAKusC,OAAOlP,OAAOxmB,KAAO1X,IAI5BmmJ,mBACC5gJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,gEACdroC,KAAKusC,OAAOlP,OAAO0T,MAAQ5xC,IAI7BomJ,iBACC7gJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,4DACdroC,KAAKusC,OAAOlP,OAAOzmB,IAAMzX,IAI3BqmJ,oBACC9gJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,kEACdroC,KAAKusC,OAAOlP,OAAO2T,OAAS7xC,IAI9BsmJ,kBACC/gJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,8DACdroC,KAAKusC,OAAOlP,OAAOqE,KAAOviC,IAI5BumJ,iBACChhJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,4DACdroC,KAAKusC,OAAOlP,OAAOsE,IAAMxiC,IAI3BwmJ,qBACCjhJ,IAAK,WAEJjG,QAAQ4pC,KAAM,oHAIhB0S,YACCr2C,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,iDACdroC,KAAKusC,OAAOm4B,KAAOvlE,IAIrBymJ,gBACClhJ,IAAK,WAEJjG,QAAQ4pC,KAAM,oDAIhBw9G,gBACCnhJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,8DACdroC,KAAKusC,OAAOC,QAAQ/Z,MAAQtzB,IAI9B2mJ,iBACCphJ,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,gEACdroC,KAAKusC,OAAOC,QAAQ9Z,OAASvzB,MAQhCjB,OAAOmB,iBAAkBszC,GAAgBx0C,WAExCR,QACC8C,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,2EACProC,KAAKygB,MAAM9iB,WAOrBO,OAAO20F,OAAQ/+C,GAAe31C,WAE7B4nJ,SAAU,SAAWt9I,GAEpBhK,QAAQ4pC,KAAM,sEACdroC,KAAK21C,SAAUltC,IAGhBu9I,YAAa,SAAW1kJ,EAAOT,EAAOg6E,QAEhB9rE,IAAhB8rE,GAEJp8E,QAAQ4pC,KAAM,wEAGf5pC,QAAQ4pC,KAAM,4DACdroC,KAAKy1C,SAAUn0C,EAAOT,IAGvBolJ,eAAgB,WAEfxnJ,QAAQ4pC,KAAM,kEACdroC,KAAKimH,eAGN4+B,gBAAiB,WAEhBpmJ,QAAQ4pC,KAAM,+DAGf69G,eAAgB,WAEfznJ,QAAQ4pC,KAAM,gEAMhBnqC,OAAOmB,iBAAkBy0C,GAAe31C,WAEvColI,WACC9iI,IAAK,WAGJ,OADAhC,QAAQqT,MAAO,iEACR9R,KAAKiqC,SAIdu5F,SACC/iI,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,+DACProC,KAAKiqC,WASf/rC,OAAOmB,iBAAkBwsF,GAAQ1tF,WAEhCkwC,SACC3pC,IAAK,WAEJjG,QAAQ4pC,KAAM,oFAIhBjW,UACCjzB,MAAO,WAGN,OADAV,QAAQ4pC,KAAM,qFACProC,SASV9B,OAAOmB,iBAAkBujC,EAASzkC,WAEjCgoJ,YACC1lJ,IAAK,WAEJhC,QAAQ4pC,KAAM,kDAGf3jC,IAAK,WAEJjG,QAAQ4pC,KAAM,mDAIhB+9G,SACC3lJ,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,8CACP,IAAI5O,MAOdv7B,OAAOmB,iBAAkB+kD,GAAkBjmD,WAE1CkoJ,OACC5lJ,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,8FACP,GAGR3jC,IAAK,WAEJjG,QAAQ4pC,KAAM,gGAOjBnqC,OAAOmB,iBAAkBilC,EAAenmC,WAEvC8mC,aACCxkC,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,iFACProC,KAAKglC,WAAWC,aAGxBvgC,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,kFACdroC,KAAKglC,WAAWC,YAAc9lC,MASjCjB,OAAO20F,OAAQt4B,GAAcp8D,WAE5BmoJ,uBAAwB,WAGvB,OADA7nJ,QAAQ4pC,KAAM,6EACProC,KAAKklD,mBAIbqhG,sBAAuB,WAGtB,OADA9nJ,QAAQ4pC,KAAM,gGACProC,KAAKglC,WAAWvkC,IAAK,sBAG7B+lJ,0BAA2B,WAG1B,OADA/nJ,QAAQ4pC,KAAM,yGACProC,KAAKglC,WAAWvkC,IAAK,2BAG7BgmJ,4BAA6B,WAG5B,OADAhoJ,QAAQ4pC,KAAM,6GACProC,KAAKglC,WAAWvkC,IAAK,6BAG7BimJ,8BAA+B,WAG9B,OADAjoJ,QAAQ4pC,KAAM,oHACProC,KAAKglC,WAAWvkC,IAAK,kCAG7BkmJ,+BAAgC,WAG/B,OADAloJ,QAAQ4pC,KAAM,sHACProC,KAAKglC,WAAWvkC,IAAK,mCAG7BmmJ,oBAAqB,WAGpB,OADAnoJ,QAAQ4pC,KAAM,6FACProC,KAAKglC,WAAWvkC,IAAK,qBAG7B+/C,uBAAwB,WAGvB,OADA/hD,QAAQ4pC,KAAM,uFACProC,KAAKonC,aAAa+d,gBAG1B0hG,wBAAyB,WAGxB,OADApoJ,QAAQ4pC,KAAM,uGACProC,KAAKglC,WAAWvkC,IAAK,2BAG7BqmJ,kBAAmB,SAAWh7E,GAE7BrtE,QAAQ4pC,KAAM,uEACdroC,KAAKmsC,eAAgB2/B,IAGtB7N,aAAc,WAEbx/D,QAAQ4pC,KAAM,2DAGf0+G,aAAc,WAEbtoJ,QAAQ4pC,KAAM,2DAGf2+G,cAAe,WAEdvoJ,QAAQ4pC,KAAM,4DAGf4+G,gBAAiB,WAEhBxoJ,QAAQ4pC,KAAM,gEAMhBnqC,OAAOmB,iBAAkBk7D,GAAcp8D,WAEtCgjD,kBACC1gD,IAAK,WAEJ,OAAOT,KAAK8sC,UAAU9hC,SAGvBtG,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,qEACdroC,KAAK8sC,UAAU9hC,QAAU7L,IAI3BigD,eACC3+C,IAAK,WAEJ,OAAOT,KAAK8sC,UAAU5nC,MAGvBR,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,+DACdroC,KAAK8sC,UAAU5nC,KAAO/F,IAIxB+nJ,mBACCzmJ,IAAK,WAEJ,OAAOT,KAAK8sC,UAAU+hB,UAGvBnqD,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,uEACdroC,KAAK8sC,UAAU+hB,SAAW1vD,MAM7BjB,OAAOmB,iBAAkB2nC,GAAe7oC,WAEvC0wD,UACCpuD,IAAK,WAEJ,OAAOT,KAAKmpC,mBAAqB+lB,GAAgBF,IAGlDtqD,IAAK,SAAWmqD,GAEf,IAAI1vD,EAAU0vD,IAAaG,GAC3BvwD,QAAQ4pC,KAAM,0FAA4FlpC,EAAQ,KAClHa,KAAKmpC,mBAAqBhqC,MAS7BjB,OAAOmB,iBAAkBmzB,EAAkBr0B,WAE1CyyB,OACCnwB,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,0DACProC,KAAK8yB,QAAQlC,OAGrBlsB,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,0DACdroC,KAAK8yB,QAAQlC,MAAQzxB,IAIvB0xB,OACCpwB,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,0DACProC,KAAK8yB,QAAQjC,OAGrBnsB,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,0DACdroC,KAAK8yB,QAAQjC,MAAQ1xB,IAIvB2xB,WACCrwB,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,kEACProC,KAAK8yB,QAAQhC,WAGrBpsB,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,kEACdroC,KAAK8yB,QAAQhC,UAAY3xB,IAI3B4xB,WACCtwB,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,kEACProC,KAAK8yB,QAAQ/B,WAGrBrsB,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,kEACdroC,KAAK8yB,QAAQ/B,UAAY5xB,IAI3B6xB,YACCvwB,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,oEACProC,KAAK8yB,QAAQ9B,YAGrBtsB,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,oEACdroC,KAAK8yB,QAAQ9B,WAAa7xB,IAI5B0yB,QACCpxB,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,4DACProC,KAAK8yB,QAAQjB,QAGrBntB,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,4DACdroC,KAAK8yB,QAAQjB,OAAS1yB,IAIxB2yB,QACCrxB,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,4DACProC,KAAK8yB,QAAQhB,QAGrBptB,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,4DACdroC,KAAK8yB,QAAQhB,OAAS3yB,IAIxBqM,QACC/K,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,4DACProC,KAAK8yB,QAAQtnB,QAGrB9G,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,4DACdroC,KAAK8yB,QAAQtnB,OAASrM,IAIxB+F,MACCzE,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,wDACProC,KAAK8yB,QAAQ5tB,MAGrBR,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,wDACdroC,KAAK8yB,QAAQ5tB,KAAO/F,IAItB4yB,iBACCtxB,IAAK,WAGJ,OADAhC,QAAQ4pC,KAAM,8EACProC,KAAK8yB,QAAQf,iBAGrBrtB,IAAK,SAAWvF,GAEfV,QAAQ4pC,KAAM,8EACdroC,KAAK8yB,QAAQf,gBAAkB5yB,MASlC4mF,GAAM5nF,UAAUyJ,KAAO,SAAWuzH,GAEjC18H,QAAQ4pC,KAAM,0EACd,IAAIW,EAAQhpC,KAOZ,OANkB,IAAI8kF,IACVl9E,KAAMuzH,EAAM,SAAWp5H,GAElCinC,EAAMupG,UAAWxwI,KAGX/B,MAIR6mF,GAAc1oF,UAAUgpJ,QAAU,WAGjC,OADA1oJ,QAAQ4pC,KAAM,+DACProC,KAAKi0I,oBAMb,IAAImT,IAEH/pE,MAAO,SAAWgqE,EAAW7rE,EAAWqmC,GAEvCpjH,QAAQ4pC,KAAM,mIACd,IAAI2E,EAECwuC,EAAU/xC,SAEd+xC,EAAUhrC,kBAAoBgrC,EAAUqD,eAExC7xC,EAASwuC,EAAUxuC,OACnBwuC,EAAYA,EAAU/zC,UAIvB4/G,EAAUhqE,MAAO7B,EAAWxuC,EAAQ60E,IAIrC37E,OAAQ,SAAWuB,GAGlB,OADAhpC,QAAQ4pC,KAAM,6FACPZ,EAASvB,WAMdohH,IAEH5qB,iBAAa3tH,EAEbwtH,YAAa,SAAWn1G,EAAKuJ,EAASpY,EAAQzH,GAE7CrS,QAAQ4pC,KAAM,wFAEd,IAAI8zF,EAAS,IAAIz9C,GACjBy9C,EAAOQ,eAAgB38H,KAAK08H,aAE5B,IAAI5pG,EAAUqpG,EAAOv0H,KAAMwf,EAAK7O,OAAQxJ,EAAW+B,GAInD,OAFK6f,IAAUmC,EAAQnC,QAAUA,GAE1BmC,GAIRy0H,gBAAiB,SAAW3qB,EAAMjsG,EAASpY,EAAQzH,GAElDrS,QAAQ4pC,KAAM,gGAEd,IAAI8zF,EAAS,IAAI19C,GACjB09C,EAAOQ,eAAgB38H,KAAK08H,aAE5B,IAAI5pG,EAAUqpG,EAAOv0H,KAAMg1H,EAAMrkH,OAAQxJ,EAAW+B,GAIpD,OAFK6f,IAAUmC,EAAQnC,QAAUA,GAE1BmC,GAIR00H,sBAAuB,WAEtB/oJ,QAAQqT,MAAO,0FAIhB21I,0BAA2B,WAE1BhpJ,QAAQqT,MAAO,+FAgDjBrU,EAAQy1B,sBAAwBA,EAChCz1B,EAAQ+0B,kBAAoBA,EAC5B/0B,EAAQ88D,cAAgBA,GACxB98D,EAAQkuC,UAAYA,GACpBluC,EAAQ2kE,YAAcA,GACtB3kE,EAAQouC,cAAgBA,GACxBpuC,EAAQqhD,YAAcA,GACtBrhD,EAAQmyE,QAAUA,GAClBnyE,EAAQoyE,IAAMA,GACdpyE,EAAQqyE,MAAQA,GAChBryE,EAAQsyE,UAAYA,GACpBtyE,EAAQwyE,OAASA,GACjBxyE,EAAQyyE,IAAMA,GACdzyE,EAAQ+yE,YAAcA,GACtB/yE,EAAQ2yE,SAAWA,GACnB3yE,EAAQ8yE,KAAOA,GACf9yE,EAAQ45C,KAAOA,GACf55C,EAAQwzE,aAAeA,GACvBxzE,EAAQyzE,SAAWA,GACnBzzE,EAAQuzE,KAAOA,GACfvzE,EAAQ0zE,OAASA,GACjB1zE,EAAQ2zE,MAAQA,GAChB3zE,EAAQ4zE,aAAeA,GACvB5zE,EAAQo2B,YAAcA,EACtBp2B,EAAQ+zE,kBAAoBA,GAC5B/zE,EAAQs2B,YAAcA,EACtBt2B,EAAQg0E,cAAgBA,GACxBh0E,EAAQi0E,aAAeA,GACvBj0E,EAAQgzB,QAAUA,EAClBhzB,EAAQ6gF,wBAA0BA,GAClC7gF,EAAQ8gF,kBAAoBA,GAC5B9gF,EAAQghF,kBAAoBA,GAC5BhhF,EAAQihF,cAAgBA,GACxBjhF,EAAQykF,aAAeA,GACvBzkF,EAAQkkF,eAAiBA,GACzBlkF,EAAQmkF,qBAAuBA,GAC/BnkF,EAAQ4gF,sBAAwBA,GAChC5gF,EAAQigF,eAAiBA,GACzBjgF,EAAQwkF,WAAaA,GACrBxkF,EAAQ+gF,YAAcA,GACtB/gF,EAAQonF,WAAaA,GACrBpnF,EAAQ0gF,WAAaA,GACrB1gF,EAAQokF,OAASA,GACjBpkF,EAAQw9H,MAAQA,GAChBx9H,EAAQqnF,YAAcA,GACtBrnF,EAAQshF,gBAAkBA,GAC1BthF,EAAQuhF,UAAYA,GACpBvhF,EAAQyhF,WAAaA,GACrBzhF,EAAQ6hF,cAAgBA,GACxB7hF,EAAQmhF,gBAAkBA,GAC1BnhF,EAAQ0hF,uBAAyBA,GACjC1hF,EAAQ2hF,iBAAmBA,GAC3B3hF,EAAQ4hF,aAAeA,GACvB5hF,EAAQqhF,YAAcA,GACtBrhF,EAAQkhF,MAAQA,GAChBlhF,EAAQsnF,aAAeA,GACvBtnF,EAAQyzC,kBAAoBA,GAC5BzzC,EAAQqzC,mBAAqBA,GAC7BrzC,EAAQwnF,WAAaA,GACrBxnF,EAAQq4D,YAAcA,GACtBr4D,EAAQozC,OAASA,GACjBpzC,EAAQioF,cAAgBA,GACxBjoF,EAAQipF,gBAAkBA,GAC1BjpF,EAAQkoF,aAAeA,GACvBloF,EAAQopF,cAAgBA,GACxBppF,EAAQsoF,MAAQA,GAChBtoF,EAAQujF,oBAAsBA,GAC9BvjF,EAAQ2jF,oBAAsBA,GAC9B3jF,EAAQyjF,wBAA0BA,GAClCzjF,EAAQ0jF,oBAAsBA,GAC9B1jF,EAAQ6jF,mBAAqBA,GAC7B7jF,EAAQ4jF,qBAAuBA,GAC/B5jF,EAAQ2pF,cAAgBA,GACxB3pF,EAAQyqF,gBAAkBA,GAC1BzqF,EAAQ8jF,cAAgBA,GACxB9jF,EAAQ+iF,eAAiBA,GACzB/iF,EAAQkrF,qBAAuBA,GAC/BlrF,EAAQguF,eAAiBA,GACzBhuF,EAAQ+jF,cAAgBA,GACxB/jF,EAAQouF,QAAUA,GAClBpuF,EAAQquF,wBAA0BA,GAClCruF,EAAQq2C,eAAiBA,GACzBr2C,EAAQm0C,gBAAkBA,GAC1Bn0C,EAAQo0C,SAAWA,GACnBp0C,EAAQsuF,2BAA6BA,GACrCtuF,EAAQyuF,2BAA6BA,GACrCzuF,EAAQwuF,kBAAoBA,GAC5BxuF,EAAQ0uF,yBAA2BA,GACnC1uF,EAAQ+zC,MAAQA,GAChB/zC,EAAQsyC,SAAWA,GACnBtyC,EAAQ2uF,UAAYA,GACpB3uF,EAAQoyC,OAASA,GACjBpyC,EAAQ6yB,gBAAkBA,EAC1B7yB,EAAQqvF,MAAQA,GAChBrvF,EAAQwjF,4BAA8BA,GACtCxjF,EAAQyiF,kBAAoBA,GAC5BziF,EAAQ0iF,oBAAsBA,GAC9B1iF,EAAQoiF,iBAAmBA,GAC3BpiF,EAAQ8hF,YAAcA,GACtB9hF,EAAQ25C,SAAWA,GACnB35C,EAAQiF,KAAOyuB,GACf1zB,EAAQ0vF,UAAYA,GACpB1vF,EAAQ2vF,YAAcA,GACtB3vF,EAAQ4oC,MAAQA,GAChB5oC,EAAQ+oC,QAAUA,GAClB/oC,EAAQwoC,OAASA,GACjBxoC,EAAQu5C,IAAMA,GACdv5C,EAAQk2B,QAAUA,EAClBl2B,EAAQ2oC,QAAUA,GAClB3oC,EAAQuoC,KAAOA,EACfvoC,EAAQk8B,KAAOA,EACfl8B,EAAQ05C,MAAQA,GAChB15C,EAAQgyC,MAAQA,GAChBhyC,EAAQ40B,QAAUA,EAClB50B,EAAQi2B,QAAUA,EAClBj2B,EAAQ8yB,QAAUA,EAClB9yB,EAAQ41B,WAAaA,EACrB51B,EAAQg8B,MAAQA,EAChBh8B,EAAQ4vF,eAAiBA,GACzB5vF,EAAQowF,sBAAwBA,GAChCpwF,EAAQswF,oBAAsBA,GAC9BtwF,EAAQ2wF,gBAAkBA,GAC1B3wF,EAAQgxF,eAAiBA,GACzBhxF,EAAQqxF,iBAAmBA,GAC3BrxF,EAAQuxF,oBAAsBA,GAC9BvxF,EAAQwxF,sBAAwBA,GAChCxxF,EAAQ2xF,WAAaA,GACrB3xF,EAAQ+xF,gBAAkBA,GAC1B/xF,EAAQkyF,kBAAoBA,GAC5BlyF,EAAQmyF,uBAAyBA,GACjCnyF,EAAQoyF,aAAeA,GACvBpyF,EAAQ8yF,UAAYA,GACpB9yF,EAAQ+yF,YAAcA,GACtB/yF,EAAQwzF,WAAaA,GACrBxzF,EAAQw0F,iBAAmBA,GAC3Bx0F,EAAQy0F,kBAAoBA,GAC5Bz0F,EAAQ00F,sBAAwBA,GAChC10F,EAAQ20F,WAAaA,GACrB30F,EAAQ40F,SAAWA,GACnB50F,EAAQ+lF,aAAeA,GACvB/lF,EAAQwmF,YAAcA,GACtBxmF,EAAQymF,iBAAmBA,GAC3BzmF,EAAQ2mF,qBAAuBA,GAC/B3mF,EAAQ0lF,UAAYA,GACpB1lF,EAAQ+mF,MAAQA,GAChB/mF,EAAQ4mF,KAAOA,GACf5mF,EAAQgnF,UAAYA,GACpBhnF,EAAQmnF,KAAOA,GACfnnF,EAAQ4lF,UAAYA,GACpB5lF,EAAQwlF,MAAQA,GAChBxlF,EAAQy9E,WAAaA,GACrBz9E,EAAQ+kJ,WAAaA,GACrB/kJ,EAAQk0E,kBAAoBA,GAC5Bl0E,EAAQ40E,mBAAqBA,GAC7B50E,EAAQg1E,yBAA2BA,GACnCh1E,EAAQu3E,oBAAsBA,GAC9Bv3E,EAAQw3E,0BAA4BA,GACpCx3E,EAAQy3E,mBAAqBA,GAC7Bz3E,EAAQ03E,yBAA2BA,GACnC13E,EAAQ23E,oBAAsBA,GAC9B33E,EAAQ43E,0BAA4BA,GACpC53E,EAAQ63E,qBAAuBA,GAC/B73E,EAAQ83E,2BAA6BA,GACrC93E,EAAQs1E,mBAAqBA,GAC7Bt1E,EAAQw1E,yBAA2BA,GACnCx1E,EAAQ+3E,aAAeA,GACvB/3E,EAAQq4E,mBAAqBA,GAC7Br4E,EAAQk5E,kBAAoBA,GAC5Bl5E,EAAQs5E,wBAA0BA,GAClCt5E,EAAQk6E,cAAgBA,GACxBl6E,EAAQo6E,oBAAsBA,GAC9Bp6E,EAAQy6E,aAAeA,GACvBz6E,EAAQ26E,mBAAqBA,GAC7B36E,EAAQo7E,eAAiBA,GACzBp7E,EAAQy7E,qBAAuBA,GAC/Bz7E,EAAQ67E,aAAeA,GACvB77E,EAAQk8E,mBAAqBA,GAC7Bl8E,EAAQo4C,cAAgBA,GACxBp4C,EAAQq4C,oBAAsBA,GAC9Br4C,EAAQs8E,cAAgBA,GACxBt8E,EAAQw8E,oBAAsBA,GAC9Bx8E,EAAQ+8E,cAAgBA,GACxB/8E,EAAQg9E,oBAAsBA,GAC9Bh9E,EAAQq6E,gBAAkBA,GAC1Br6E,EAAQu6E,sBAAwBA,GAChCv6E,EAAQ69E,cAAgBA,GACxB79E,EAAQu/E,aAAeA,GACvBv/E,EAAQw/E,mBAAqBA,GAC7Bx/E,EAAQu+E,iBAAmBA,GAC3Bv+E,EAAQ2+E,uBAAyBA,GACjC3+E,EAAQy/E,eAAiBA,GACzBz/E,EAAQ0/E,qBAAuBA,GAC/B1/E,EAAQu2C,YAAcA,GACtBv2C,EAAQ42C,kBAAoBA,GAC5B52C,EAAQ2/E,eAAiBA,GACzB3/E,EAAQuyE,eAAiBA,GACzBvyE,EAAQ6/E,kBAAoBA,GAC5B7/E,EAAQ6mC,eAAiBA,EACzB7mC,EAAQinD,eAAiBA,GACzBjnD,EAAQ8mD,qBAAuBA,GAC/B9mD,EAAQ6mD,qBAAuBA,GAC/B7mD,EAAQ2mD,kBAAoBA,GAC5B3mD,EAAQ4mD,iBAAmBA,GAC3B5mD,EAAQymD,mBAAqBA,GAC7BzmD,EAAQ0mD,oBAAsBA,GAC9B1mD,EAAQgoC,kBAAoBA,EAC5BhoC,EAAQ04C,kBAAoBA,GAC5B14C,EAAQgnD,mBAAqBA,GAC7BhnD,EAAQ+mD,kBAAoBA,GAC5B/mD,EAAQmlC,SAAWA,EACnBnlC,EAAQ81C,uBAAyBA,GACjC91C,EAAQ61C,uBAAyBA,GACjC71C,EAAQ41C,sBAAwBA,GAChC51C,EAAQ21C,qBAAuBA,GAC/B31C,EAAQ01C,sBAAwBA,GAChC11C,EAAQy1C,qBAAuBA,GAC/Bz1C,EAAQu1C,4BAA8BA,GACtCv1C,EAAQs1C,qBAAuBA,GAC/Bt1C,EAAQq1C,oBAAsBA,GAC9Br1C,EAAQk1C,gBAAkBA,GAC1Bl1C,EAAQ+rE,SAAWA,GACnB/rE,EAAQ01F,MAAQA,GAChB11F,EAAQqxD,aAAeA,GACvBrxD,EAAQuxD,aAAeA,GACvBvxD,EAAQyxD,cAAgBA,GACxBzxD,EAAQiqJ,kBA7u1CgB,EA8u1CxBjqJ,EAAQuxE,qBAAuBA,GAC/BvxE,EAAQkqJ,sBA7u1CoB,EA8u1C5BlqJ,EAAQmqJ,eA7u1Ca,EA8u1CrBnqJ,EAAQwuC,aAAeA,GACvBxuC,EAAQ4hD,iBAAmBA,GAC3B5hD,EAAQwlC,UAAYA,GACpBxlC,EAAQ2rC,SAAWA,GACnB3rC,EAAQyrC,WAAaA,GACrBzrC,EAAQ8nD,YAAcA,GACtB9nD,EAAQ0lC,cAAgBA,GACxB1lC,EAAQ4lC,SAAWA,GACnB5lC,EAAQwyF,WAAaA,GACrBxyF,EAAQoxF,aAAeA,GACvBpxF,EAAQuvD,WAAaA,GACrBvvD,EAAQslC,eAAiBA,GACzBtlC,EAAQ2vD,iBAAmBA,GAC3B3vD,EAAQkwD,oBAAsBA,GAC9BlwD,EAAQswD,iBAAmBA,GAC3BtwD,EAAQwvD,eAAiBA,GACzBxvD,EAAQgmC,YAAcA,GACtBhmC,EAAQspE,iBAAmBA,GAC3BtpE,EAAQwpE,wBAA0BA,GAClCxpE,EAAQ0rE,YAAcA,GACtB1rE,EAAQ2rE,YAAcA,GACtB3rE,EAAQ0pE,WAAaA,GACrB1pE,EAAQ2pE,UAAYA,GACpB3pE,EAAQ4pE,eAAiBA,GACzB5pE,EAAQ6pE,uBAAyBA,GACjC7pE,EAAQ8lC,eAAiBA,GACzB9lC,EAAQ+lC,uBAAyBA,GACjC/lC,EAAQ8pE,eAAiBA,GACzB9pE,EAAQgqE,uBAAyBA,GACjChqE,EAAQkqE,eAAiBA,GACzBlqE,EAAQoqE,uBAAyBA,GACjCpqE,EAAQsqE,uBAAyBA,GACjCtqE,EAAQgzD,WAAaA,GACrBhzD,EAAQkzD,YAAcA,GACtBlzD,EAAQozD,UAAYA,GACpBpzD,EAAQkmC,eAAiBA,GACzBlmC,EAAQuzD,WAAaA,GACrBvzD,EAAQyzD,kBAAoBA,GAC5BzzD,EAAQ2zD,aAAeA,GACvB3zD,EAAQ6zD,cAAgBA,GACxB7zD,EAAQk5C,kBAAoBA,GAC5Bl5C,EAAQsiD,aAAeA,GACvBtiD,EAAQuiD,aAAeA,GACvBviD,EAAQ+jD,cAAgBA,GACxB/jD,EAAQy/C,kBAAoBA,GAC5Bz/C,EAAQ0/C,oBAAsBA,GAC9B1/C,EAAQ2/C,sBAAwBA,GAChC3/C,EAAQ4/C,kBAAoBA,GAC5B5/C,EAAQwrI,UA7u1CQ,IA8u1ChBxrI,EAAQw2B,sBAAwBA,GAChCx2B,EAAQgiD,sBAAwBA,GAChChiD,EAAQmiD,iCAAmCA,GAC3CniD,EAAQoiD,iCAAmCA,GAC3CpiD,EAAQqiD,2BAA6BA,GACrCriD,EAAQiiD,wBAA0BA,GAClCjiD,EAAQkiD,wBAA0BA,GAClCliD,EAAQ6nE,eAAiBA,GACzB7nE,EAAQ+zB,oBAAsBA,GAC9B/zB,EAAQ+nE,uBAAyBA,GACjC/nE,EAAQq2B,cAAgBA,GACxBr2B,EAAQ0pD,2BAA6BA,GACrC1pD,EAAQ2pD,0BAA4BA,GACpC3pD,EAAQg0B,aAAeA,GACvBh0B,EAAQmoE,0BAA4BA,GACpCnoE,EAAQi0B,yBAA2BA,GACnCj0B,EAAQm0B,iBAAmBA,GAC3Bn0B,EAAQ4oE,SAAWA,GACnB5oE,EAAQ6oE,UAAYA,GACpB7oE,EAAQwsD,kBAAoBA,GAC5BxsD,EAAQ8oE,QAAUA,GAClB9oE,EAAQysD,gBAAkBA,GAC1BzsD,EAAQorD,UAAYA,GACpBprD,EAAQqrD,cAAgBA,GACxBrrD,EAAQsoE,sBAAwBA,GAChCtoE,EAAQwoE,sBAAwBA,GAChCxoE,EAAQ0oE,qBAAuBA,GAC/B1oE,EAAQ4sD,mBAAqBA,GAC7B5sD,EAAQgpE,YAAcA,GACtBhpE,EAAQ+sD,UAAYA,GACpB/sD,EAAQk0B,WAAaA,GACrBl0B,EAAQkpE,gBAAkBA,GAC1BlpE,EAAQopE,qBAAuBA,GAC/BppE,EAAQ81F,WAAaA,GACrB91F,EAAQusD,YAAcA,GACtBvsD,EAAQ0sD,mBAAqBA,GAC7B1sD,EAAQwqE,qBAAuBA,GAC/BxqE,EAAQyqE,sBAAwBA,GAChCzqE,EAAQ0qE,sBAAwBA,GAChC1qE,EAAQ2qE,sBAAwBA,GAChC3qE,EAAQgrE,wBAA0BA,GAClChrE,EAAQirE,wBAA0BA,GAClCjrE,EAAQkrE,yBAA2BA,GACnClrE,EAAQmrE,yBAA2BA,GACnCnrE,EAAQwrE,gBAAkBA,GAC1BxrE,EAAQoqJ,SA7u1CO,KA8u1CfpqJ,EAAQmtF,WAAaA,GACrBntF,EAAQqqJ,aA7u1CW,KA8u1CnBrqJ,EAAQsqJ,oBA7u1CkB,KA8u1C1BtqJ,EAAQuqJ,kBA7u1CgB,KA8u1CxBvqJ,EAAQwqJ,kBA7u1CgB,KA8u1CxBxqJ,EAAQusF,oBAAsBA,GAC9BvsF,EAAQyqJ,gBA7u1Cc,KA8u1CtBzqJ,EAAQ0qJ,iBA7u1Ce,KA8u1CvB1qJ,EAAQ85C,kBAAoBA,GAC5B95C,EAAQowE,sBAAwBA,GAChCpwE,EAAQswE,oBAAsBA,GAC9BtwE,EAAQ00B,eAAiBA,GACzB10B,EAAQ4+C,aAAeA,GACvB5+C,EAAQi/C,cAAgBA,GACxBj/C,EAAQ6+C,aAAeA,GACvB7+C,EAAQ2qJ,eA7u1Ca,KA8u1CrB3qJ,EAAQ8+C,cAAgBA,GACxB9+C,EAAQ++C,eAAiBA,GACzB/+C,EAAQg/C,aAAeA,GACvBh/C,EAAQkoC,kBAAoBA,GAC5BloC,EAAQguC,iBAAmBA,GAC3BhuC,EAAQ4qJ,aAAer0G,GACvBv2C,EAAQ6qJ,MAlwDR,SAAgBprJ,EAAGsK,EAAGe,EAAG8a,EAAGijB,EAAQ99B,EAAO8hC,GAG1C,OADA7rC,QAAQ4pC,KAAM,wEACP,IAAImJ,GAAOt0C,EAAGsK,EAAGe,EAAG+9B,EAAQ99B,EAAO8hC,IAgwD3C7sC,EAAQ8qJ,UA5vDQ,EA6vDhB9qJ,EAAQ+qJ,WA3vDS,EA4vDjB/qJ,EAAQgrJ,iBA1vDR,SAA2BzpC,GAG1B,OADAvgH,QAAQ4pC,KAAM,kEACP22E,GAwvDRvhH,EAAQirJ,cApvDR,SAAwB1pC,GAYvB,YAVmBjwG,IAAdiwG,IAA0BA,MAE/BvgH,QAAQ4pC,KAAM,+DACd22E,EAAUoN,iBAAkB,EAC5BpN,EAAUA,UAAYA,EACtBA,EAAUpvG,MAAQ,WAEjB,OAAOovG,EAAUt9G,SAGXs9G,GAyuDRvhH,EAAQ8uF,WAruDR,SAAqB9kD,EAAUzF,GAG9B,OADAvjC,QAAQ4pC,KAAM,sDACP,IAAI8oC,GAAQ1pC,EAAUzF,IAmuD9BvkC,EAAQkrJ,SA/tDR,SAAmB3mH,GAGlB,OADAvjC,QAAQ4pC,KAAM,oDACP,IAAI4nC,GAAQjuC,IA6tDpBvkC,EAAQmrJ,eAztDR,SAAyBnhH,EAAUzF,GAGlC,OADAvjC,QAAQ4pC,KAAM,0DACP,IAAI8oC,GAAQ1pC,EAAUzF,IAutD9BvkC,EAAQorJ,mBAntDR,SAA6BtkH,GAG5B,OADA9lC,QAAQ4pC,KAAM,sEACP,IAAIqc,GAAgBngB,IAitD5B9mC,EAAQqrJ,sBA7sDR,SAAgCvkH,GAG/B,OADA9lC,QAAQ4pC,KAAM,yEACP,IAAIqc,GAAgBngB,IA2sD5B9mC,EAAQsrJ,uBAvsDR,SAAiCxkH,GAGhC,OADA9lC,QAAQ4pC,KAAM,0EACP,IAAIqc,GAAgBngB,IAqsD5B9mC,EAAQurJ,OAjsDR,SAAiBx4H,EAAGpN,EAAGkP,GAGtB,OADA7zB,QAAQ4pC,KAAM,6DACP,IAAI3U,EAASlD,EAAGpN,EAAGkP,IA+rD3B70B,EAAQwrJ,uBAzrDR,SAAiCxoI,EAAOmyB,GAGvC,OADAn0C,QAAQ4pC,KAAM,8GACP,IAAIsK,GAAiBlyB,EAAOmyB,GAAW8xE,YAAY,IAurD3DjnH,EAAQyrJ,cAnrDR,SAAwBzoI,EAAOmyB,GAG9B,OADAn0C,QAAQ4pC,KAAM,sFACP,IAAIyK,GAAqBryB,EAAOmyB,IAirDxCn1C,EAAQ0rJ,eA7qDR,SAAyB1oI,EAAOmyB,GAG/B,OADAn0C,QAAQ4pC,KAAM,wFACP,IAAI0K,GAAsBtyB,EAAOmyB,IA2qDzCn1C,EAAQ2rJ,sBAvqDR,SAAgC3oI,EAAOmyB,GAGtC,OADAn0C,QAAQ4pC,KAAM,sGACP,IAAI2K,GAA6BvyB,EAAOmyB,IAqqDhDn1C,EAAQ4rJ,eAjqDR,SAAyB5oI,EAAOmyB,GAG/B,OADAn0C,QAAQ4pC,KAAM,wFACP,IAAI6K,GAAsBzyB,EAAOmyB,IA+pDzCn1C,EAAQ6rJ,gBA3pDR,SAA0B7oI,EAAOmyB,GAGhC,OADAn0C,QAAQ4pC,KAAM,0FACP,IAAI8K,GAAuB1yB,EAAOmyB,IAypD1Cn1C,EAAQ8rJ,eArpDR,SAAyB9oI,EAAOmyB,GAG/B,OADAn0C,QAAQ4pC,KAAM,wFACP,IAAI+K,GAAsB3yB,EAAOmyB,IAmpDzCn1C,EAAQ+rJ,gBA/oDR,SAA0B/oI,EAAOmyB,GAGhC,OADAn0C,QAAQ4pC,KAAM,0FACP,IAAIgL,GAAuB5yB,EAAOmyB,IA6oD1Cn1C,EAAQgsJ,iBAzoDR,SAA2BhpI,EAAOmyB,GAGjC,OADAn0C,QAAQ4pC,KAAM,4FACP,IAAIiL,GAAwB7yB,EAAOmyB,IAuoD3Cn1C,EAAQisJ,iBAnoDR,SAA2BjpI,EAAOmyB,GAGjC,OADAn0C,QAAQ4pC,KAAM,4FACP,IAAIkL,GAAwB9yB,EAAOmyB,IAioD3Cn1C,EAAQ80F,mBAAqBA,GAC7B90F,EAAQ+0F,aAAeA,GACvB/0F,EAAQg1F,OAASA,GACjBh1F,EAAQksJ,kBArjDR,SAA4BriH,EAAQ9+B,GAGnC,OADA/J,QAAQ4pC,KAAM,oFACP,IAAIkoD,GAAWjpD,EAAQ9+B,IAmjD/B/K,EAAQmsJ,YA/iDR,SAAsBtiH,EAAQ0mD,GAG7B,OADAvvF,QAAQ4pC,KAAM,wEACP,IAAI4oC,GAAc,IAAIqK,GAAeh0C,EAAOG,UAAY,IAAI+c,IAAqBh8C,WAAeuG,IAARi/E,EAAoBA,EAAM,aA6iD1HvwF,EAAQosJ,gBA7hDR,SAA0BviH,EAAQ0mD,GAGjC,OADAvvF,QAAQ4pC,KAAM,gFACP,IAAI4oC,GAAc,IAAIU,GAAmBrqC,EAAOG,UAAY,IAAI+c,IAAqBh8C,WAAeuG,IAARi/E,EAAoBA,EAAM,aA2hD9HvwF,EAAQqsJ,UArhDR,SAAoB1rE,GAGnB,OADA3/E,QAAQ4pC,KAAM,yDACP,IAAI81C,GAAYC,IAmhDxB3gF,EAAQssJ,oBA/gDR,SAA8B3rE,GAG7B,OADA3/E,QAAQ4pC,KAAM,0EACP,IAAIk2C,GAAmBH,IA6gD/B3gF,EAAQ2pJ,cAAgBA,GACxB3pJ,EAAQ6pJ,WAAaA,GACrB7pJ,EAAQusJ,UAlaR,WAECvrJ,QAAQqT,MAAO,0EAEf9R,KAAKiqJ,cAAgB,SAAW10G,EAAQlY,GAEvC5+B,QAAQ4pC,KAAM,8DACdkN,EAAO0mD,QAAS5+D,IAIjBr9B,KAAKkqJ,gBAAkB,SAAW30G,EAAQlY,GAEzC5+B,QAAQ4pC,KAAM,kEACdkN,EAAO2mD,UAAW7+D,IAInBr9B,KAAKmqJ,WAAa,WAEjB1rJ,QAAQqT,MAAO,sEA+YjBrU,EAAQ2sJ,eAvYR,WAEC3rJ,QAAQqT,MAAO,mFAEf9R,KAAKoqE,WAAaphE,SAAS43B,gBAAiB,+BAAgC,UAC5E5gC,KAAKutC,MAAQ,aACbvtC,KAAKm9B,OAAS,aACdn9B,KAAKguC,cAAgB,aACrBhuC,KAAK0rE,QAAU,cAiYhBxtE,OAAOgB,eAAezB,EAAS,cAAgB0B,OAAO,WAIjDkrJ,IAAI,SAASltJ,EAAQU,EAAOJ,GAClCI,EAAOJ,QAEP,SAAiB47C,EAAM5wC,GAKnB,IAAK,IAJDgY,KAIKrjB,GAFTqL,EAAQA,GAAS,IAEK,EAAGrL,EAAIi8C,EAAK17C,OAAQP,IACtCqjB,EAAMrjB,EAAIqL,GAAS4wC,EAAKj8C,GAG5B,OAAOqjB,QAGL6pI,IAAI,SAASntJ,EAAQU,EAAOJ,GAClC,aAgBA,SAAS+F,EAAO0qB,GACd,IAAI/Q,EAAU,GAEd,GACEA,EAAUotI,EAASr8H,EAAMvwB,GAAUwf,EACnC+Q,EAAMxrB,KAAKK,MAAMmrB,EAAMvwB,SAChBuwB,EAAM,GAEf,OAAO/Q,EA0BT,SAAS/D,IACP,IAAIqhI,EAAMj3I,GAAQ,IAAI0H,MAEtB,OAAIuvI,IAAQrvI,GAAao/I,EAAO,EAAGp/I,EAAOqvI,GACnCA,EAAK,IAAKj3I,EAAOgnJ,KAM1B,IA1DA,IAKIp/I,EALAm/I,EAAW,mEAAmEt+I,MAAM,IACpFtO,EAAS,GACT0e,KACAmuI,EAAO,EACPptJ,EAAI,EAsDDA,EAAIO,EAAQP,IAAKif,EAAIkuI,EAASntJ,IAAMA,EAK3Cgc,EAAM5V,OAASA,EACf4V,EAAMxV,OAhCN,SAAgBqf,GACd,IAAIwnI,EAAU,EAEd,IAAKrtJ,EAAI,EAAGA,EAAI6lB,EAAItlB,OAAQP,IAC1BqtJ,EAAUA,EAAU9sJ,EAAS0e,EAAI4G,EAAIrF,OAAOxgB,IAG9C,OAAOqtJ,GA0BT5sJ,EAAOJ,QAAU2b,YAEN","file":"bundle.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _three = require('three');\n\nvar THREE = _interopRequireWildcard(_three);\n\nvar _Lock = require('./system/Lock');\n\nvar _Lock2 = _interopRequireDefault(_Lock);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar lock = new _Lock2.default();\nlock.controls();\n\nconsole.log('12', '1222asdasdas231');\n\n},{\"./system/Lock\":2,\"three\":45}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _socket = require('socket.io-client');\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Lock = function () {\n    /**\n     *\n     * @constructor\n     */\n    function Lock() {\n        _classCallCheck(this, Lock);\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n\n\n    _createClass(Lock, [{\n        key: 'controls',\n\n\n        /**\n         *\n         * @returns {void}\n         */\n        value: function controls() {\n            var socket = _socket2.default.connect(location.hostname + ':' + Lock.PORT + Lock.NAMESPACE);\n\n            socket.on(Lock.EVENT_CHECK_STATUS, function (data) {\n\n                console.log(data, 'client1');\n            });\n        }\n    }], [{\n        key: 'NAMESPACE',\n        get: function get() {\n            return '/lock';\n        }\n\n        /**\n         *\n         * @returns {number}\n         */\n\n    }, {\n        key: 'PORT',\n        get: function get() {\n            return 3000;\n        }\n\n        /**\n         *\n         * @returns {string}\n         */\n\n    }, {\n        key: 'EVENT_CHECK_STATUS',\n        get: function get() {\n            return 'check';\n        }\n    }]);\n\n    return Lock;\n}();\n\nexports.default = Lock;\n\n},{\"socket.io-client\":36}],3:[function(require,module,exports){\nmodule.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n\n},{}],4:[function(require,module,exports){\n/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n\n},{}],5:[function(require,module,exports){\n\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n\n},{}],6:[function(require,module,exports){\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n\n},{}],7:[function(require,module,exports){\n(function (global){\n/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],8:[function(require,module,exports){\n\n},{}],9:[function(require,module,exports){\n/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n\n},{}],10:[function(require,module,exports){\n\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n},{}],11:[function(require,module,exports){\n\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};\n},{}],12:[function(require,module,exports){\n(function (process){\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (window && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n}).call(this,require('_process'))\n},{\"./debug\":13,\"_process\":35}],13:[function(require,module,exports){\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n},{\"ms\":31}],14:[function(require,module,exports){\n\nmodule.exports = require('./lib/index');\n\n},{\"./lib/index\":15}],15:[function(require,module,exports){\n\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n\n},{\"./socket\":16,\"engine.io-parser\":24}],16:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parsejson = require('parsejson');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (global.location && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global === 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0)\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(parsejson(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./transport\":17,\"./transports/index\":18,\"component-emitter\":10,\"debug\":12,\"engine.io-parser\":24,\"indexof\":30,\"parsejson\":32,\"parseqs\":33,\"parseuri\":34}],17:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n\n},{\"component-emitter\":10,\"engine.io-parser\":24}],18:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling-jsonp\":19,\"./polling-xhr\":20,\"./websocket\":22,\"xmlhttprequest-ssl\":23}],19:[function(require,module,exports){\n(function (global){\n\n/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":21,\"component-inherit\":11}],20:[function(require,module,exports){\n(function (global){\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname !== global.location.hostname ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          var contentType;\n          try {\n            contentType = xhr.getResponseHeader('Content-Type');\n          } catch (e) {}\n          if (contentType === 'application/octet-stream') {\n            xhr.responseType = 'arraybuffer';\n          }\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (global.document) {\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./polling\":21,\"component-emitter\":10,\"component-inherit\":11,\"debug\":12,\"xmlhttprequest-ssl\":23}],21:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n},{\"../transport\":17,\"component-inherit\":11,\"debug\":12,\"engine.io-parser\":24,\"parseqs\":33,\"xmlhttprequest-ssl\":23,\"yeast\":47}],22:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\nvar NodeWebSocket;\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocket = BrowserWebSocket;\nif (!WebSocket && typeof window === 'undefined') {\n  WebSocket = NodeWebSocket;\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocket = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws = this.usingBrowserWebSocket ? (protocols ? new WebSocket(uri, protocols) : new WebSocket(uri)) : new WebSocket(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../transport\":17,\"component-inherit\":11,\"debug\":12,\"engine.io-parser\":24,\"parseqs\":33,\"ws\":8,\"yeast\":47}],23:[function(require,module,exports){\n(function (global){\n// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new global[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"has-cors\":29}],24:[function(require,module,exports){\n(function (global){\n/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (global && global.ArrayBuffer) {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./keys\":25,\"./utf8\":26,\"after\":3,\"arraybuffer.slice\":4,\"base64-arraybuffer\":6,\"blob\":7,\"has-binary2\":27}],25:[function(require,module,exports){\n\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n\n},{}],26:[function(require,module,exports){\n(function (global){\n/*! https://mths.be/utf8js v2.1.2 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint, strict) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tif (strict) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t\t' is not a scalar value'\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint, strict) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\t\tcodePoint = 0xFFFD;\n\t\t\t}\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol(strict) {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.1.2',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],27:[function(require,module,exports){\n(function (global){\n/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof global.Buffer === 'function' && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n     (typeof global.ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n     (withNativeBlob && obj instanceof Blob) ||\n     (withNativeFile && obj instanceof File)\n    ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"isarray\":28}],28:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n},{}],29:[function(require,module,exports){\n\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n\n},{}],30:[function(require,module,exports){\n\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n},{}],31:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n},{}],32:[function(require,module,exports){\n(function (global){\n/**\r\n * JSON parse.\r\n *\r\n * @see Based on jQuery#parseJSON (MIT) and JSON2\r\n * @api private\r\n */\r\n\r\nvar rvalidchars = /^[\\],:{}\\s]*$/;\r\nvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\r\nvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\r\nvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\r\nvar rtrimLeft = /^\\s+/;\r\nvar rtrimRight = /\\s+$/;\r\n\r\nmodule.exports = function parsejson(data) {\r\n  if ('string' != typeof data || !data) {\r\n    return null;\r\n  }\r\n\r\n  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\r\n\r\n  // Attempt to parse using the native JSON parser first\r\n  if (global.JSON && JSON.parse) {\r\n    return JSON.parse(data);\r\n  }\r\n\r\n  if (rvalidchars.test(data.replace(rvalidescape, '@')\r\n      .replace(rvalidtokens, ']')\r\n      .replace(rvalidbraces, ''))) {\r\n    return (new Function('return ' + data))();\r\n  }\r\n};\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],33:[function(require,module,exports){\n/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n\n},{}],34:[function(require,module,exports){\n/**\r\n * Parses an URI\r\n *\r\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n * @api private\r\n */\r\n\r\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\nvar parts = [\r\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n];\r\n\r\nmodule.exports = function parseuri(str) {\r\n    var src = str,\r\n        b = str.indexOf('['),\r\n        e = str.indexOf(']');\r\n\r\n    if (b != -1 && e != -1) {\r\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n    }\r\n\r\n    var m = re.exec(str || ''),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) {\r\n        uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    if (b != -1 && e != -1) {\r\n        uri.source = src;\r\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n        uri.ipv6uri = true;\r\n    }\r\n\r\n    return uri;\r\n};\r\n\n},{}],35:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],36:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n\n},{\"./manager\":37,\"./socket\":39,\"./url\":40,\"debug\":12,\"socket.io-parser\":42}],37:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n\n},{\"./on\":38,\"./socket\":39,\"backo2\":5,\"component-bind\":9,\"component-emitter\":10,\"debug\":12,\"engine.io-client\":14,\"indexof\":30,\"socket.io-parser\":42}],38:[function(require,module,exports){\n\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n\n},{}],39:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = { type: parser.EVENT, data: args };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  delete this.flags;\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  if (packet.nsp !== this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags = this.flags || {};\n  this.flags.compress = compress;\n  return this;\n};\n\n},{\"./on\":38,\"component-bind\":9,\"component-emitter\":10,\"debug\":12,\"parseqs\":33,\"socket.io-parser\":42,\"to-array\":46}],40:[function(require,module,exports){\n(function (global){\n\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"debug\":12,\"parseuri\":34}],41:[function(require,module,exports){\n(function (global){\n/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./is-buffer\":43,\"isarray\":44}],42:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar hasBin = require('has-binary2');\nvar binary = require('./binary');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  if ((obj.type === exports.EVENT || obj.type === exports.ACK) && hasBin(obj.data)) {\n    obj.type = obj.type === exports.EVENT ? exports.BINARY_EVENT : exports.BINARY_ACK;\n  }\n\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    str += JSON.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) return error();\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    p = tryParse(p, str.substr(i));\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(p, str) {\n  try {\n    p.data = JSON.parse(str);\n  } catch(e){\n    return error();\n  }\n  return p; \n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error() {\n  return {\n    type: exports.ERROR,\n    data: 'parser error'\n  };\n}\n\n},{\"./binary\":41,\"./is-buffer\":43,\"component-emitter\":10,\"debug\":12,\"has-binary2\":27}],43:[function(require,module,exports){\n(function (global){\n\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && obj instanceof ArrayBuffer);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],44:[function(require,module,exports){\narguments[4][28][0].apply(exports,arguments)\n},{\"dup\":28}],45:[function(require,module,exports){\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.THREE = global.THREE || {})));\n}(this, (function (exports) { 'use strict';\n\n\t// Polyfills\n\n\tif ( Number.EPSILON === undefined ) {\n\n\t\tNumber.EPSILON = Math.pow( 2, - 52 );\n\n\t}\n\n\tif ( Number.isInteger === undefined ) {\n\n\t\t// Missing in IE\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n\n\t\tNumber.isInteger = function ( value ) {\n\n\t\t\treturn typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\n\n\t\t};\n\n\t}\n\n\t//\n\n\tif ( Math.sign === undefined ) {\n\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n\n\t\tMath.sign = function ( x ) {\n\n\t\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\n\n\t\t};\n\n\t}\n\n\tif ( Function.prototype.name === undefined ) {\n\n\t\t// Missing in IE\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n\n\t\tObject.defineProperty( Function.prototype, 'name', {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\tif ( Object.assign === undefined ) {\n\n\t\t// Missing in IE\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\n\t\t( function () {\n\n\t\t\tObject.assign = function ( target ) {\n\n\t\t\t\t'use strict';\n\n\t\t\t\tif ( target === undefined || target === null ) {\n\n\t\t\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\n\n\t\t\t\t}\n\n\t\t\t\tvar output = Object( target );\n\n\t\t\t\tfor ( var index = 1; index < arguments.length; index ++ ) {\n\n\t\t\t\t\tvar source = arguments[ index ];\n\n\t\t\t\t\tif ( source !== undefined && source !== null ) {\n\n\t\t\t\t\t\tfor ( var nextKey in source ) {\n\n\t\t\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\n\n\t\t\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\n\t\t\t};\n\n\t\t} )();\n\n\t}\n\n\t/**\n\t * https://github.com/mrdoob/eventdispatcher.js/\n\t */\n\n\tfunction EventDispatcher() {}\n\n\tObject.assign( EventDispatcher.prototype, {\n\n\t\taddEventListener: function ( type, listener ) {\n\n\t\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\t\tvar listeners = this._listeners;\n\n\t\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\t\tlisteners[ type ] = [];\n\n\t\t\t}\n\n\t\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\t\tlisteners[ type ].push( listener );\n\n\t\t\t}\n\n\t\t},\n\n\t\thasEventListener: function ( type, listener ) {\n\n\t\t\tif ( this._listeners === undefined ) return false;\n\n\t\t\tvar listeners = this._listeners;\n\n\t\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t\t},\n\n\t\tremoveEventListener: function ( type, listener ) {\n\n\t\t\tif ( this._listeners === undefined ) return;\n\n\t\t\tvar listeners = this._listeners;\n\t\t\tvar listenerArray = listeners[ type ];\n\n\t\t\tif ( listenerArray !== undefined ) {\n\n\t\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tdispatchEvent: function ( event ) {\n\n\t\t\tif ( this._listeners === undefined ) return;\n\n\t\t\tvar listeners = this._listeners;\n\t\t\tvar listenerArray = listeners[ event.type ];\n\n\t\t\tif ( listenerArray !== undefined ) {\n\n\t\t\t\tevent.target = this;\n\n\t\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\tvar REVISION = '86';\n\tvar MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\tvar CullFaceNone = 0;\n\tvar CullFaceBack = 1;\n\tvar CullFaceFront = 2;\n\tvar CullFaceFrontBack = 3;\n\tvar FrontFaceDirectionCW = 0;\n\tvar FrontFaceDirectionCCW = 1;\n\tvar BasicShadowMap = 0;\n\tvar PCFShadowMap = 1;\n\tvar PCFSoftShadowMap = 2;\n\tvar FrontSide = 0;\n\tvar BackSide = 1;\n\tvar DoubleSide = 2;\n\tvar FlatShading = 1;\n\tvar SmoothShading = 2;\n\tvar NoColors = 0;\n\tvar FaceColors = 1;\n\tvar VertexColors = 2;\n\tvar NoBlending = 0;\n\tvar NormalBlending = 1;\n\tvar AdditiveBlending = 2;\n\tvar SubtractiveBlending = 3;\n\tvar MultiplyBlending = 4;\n\tvar CustomBlending = 5;\n\tvar AddEquation = 100;\n\tvar SubtractEquation = 101;\n\tvar ReverseSubtractEquation = 102;\n\tvar MinEquation = 103;\n\tvar MaxEquation = 104;\n\tvar ZeroFactor = 200;\n\tvar OneFactor = 201;\n\tvar SrcColorFactor = 202;\n\tvar OneMinusSrcColorFactor = 203;\n\tvar SrcAlphaFactor = 204;\n\tvar OneMinusSrcAlphaFactor = 205;\n\tvar DstAlphaFactor = 206;\n\tvar OneMinusDstAlphaFactor = 207;\n\tvar DstColorFactor = 208;\n\tvar OneMinusDstColorFactor = 209;\n\tvar SrcAlphaSaturateFactor = 210;\n\tvar NeverDepth = 0;\n\tvar AlwaysDepth = 1;\n\tvar LessDepth = 2;\n\tvar LessEqualDepth = 3;\n\tvar EqualDepth = 4;\n\tvar GreaterEqualDepth = 5;\n\tvar GreaterDepth = 6;\n\tvar NotEqualDepth = 7;\n\tvar MultiplyOperation = 0;\n\tvar MixOperation = 1;\n\tvar AddOperation = 2;\n\tvar NoToneMapping = 0;\n\tvar LinearToneMapping = 1;\n\tvar ReinhardToneMapping = 2;\n\tvar Uncharted2ToneMapping = 3;\n\tvar CineonToneMapping = 4;\n\tvar UVMapping = 300;\n\tvar CubeReflectionMapping = 301;\n\tvar CubeRefractionMapping = 302;\n\tvar EquirectangularReflectionMapping = 303;\n\tvar EquirectangularRefractionMapping = 304;\n\tvar SphericalReflectionMapping = 305;\n\tvar CubeUVReflectionMapping = 306;\n\tvar CubeUVRefractionMapping = 307;\n\tvar RepeatWrapping = 1000;\n\tvar ClampToEdgeWrapping = 1001;\n\tvar MirroredRepeatWrapping = 1002;\n\tvar NearestFilter = 1003;\n\tvar NearestMipMapNearestFilter = 1004;\n\tvar NearestMipMapLinearFilter = 1005;\n\tvar LinearFilter = 1006;\n\tvar LinearMipMapNearestFilter = 1007;\n\tvar LinearMipMapLinearFilter = 1008;\n\tvar UnsignedByteType = 1009;\n\tvar ByteType = 1010;\n\tvar ShortType = 1011;\n\tvar UnsignedShortType = 1012;\n\tvar IntType = 1013;\n\tvar UnsignedIntType = 1014;\n\tvar FloatType = 1015;\n\tvar HalfFloatType = 1016;\n\tvar UnsignedShort4444Type = 1017;\n\tvar UnsignedShort5551Type = 1018;\n\tvar UnsignedShort565Type = 1019;\n\tvar UnsignedInt248Type = 1020;\n\tvar AlphaFormat = 1021;\n\tvar RGBFormat = 1022;\n\tvar RGBAFormat = 1023;\n\tvar LuminanceFormat = 1024;\n\tvar LuminanceAlphaFormat = 1025;\n\tvar RGBEFormat = RGBAFormat;\n\tvar DepthFormat = 1026;\n\tvar DepthStencilFormat = 1027;\n\tvar RGB_S3TC_DXT1_Format = 2001;\n\tvar RGBA_S3TC_DXT1_Format = 2002;\n\tvar RGBA_S3TC_DXT3_Format = 2003;\n\tvar RGBA_S3TC_DXT5_Format = 2004;\n\tvar RGB_PVRTC_4BPPV1_Format = 2100;\n\tvar RGB_PVRTC_2BPPV1_Format = 2101;\n\tvar RGBA_PVRTC_4BPPV1_Format = 2102;\n\tvar RGBA_PVRTC_2BPPV1_Format = 2103;\n\tvar RGB_ETC1_Format = 2151;\n\tvar LoopOnce = 2200;\n\tvar LoopRepeat = 2201;\n\tvar LoopPingPong = 2202;\n\tvar InterpolateDiscrete = 2300;\n\tvar InterpolateLinear = 2301;\n\tvar InterpolateSmooth = 2302;\n\tvar ZeroCurvatureEnding = 2400;\n\tvar ZeroSlopeEnding = 2401;\n\tvar WrapAroundEnding = 2402;\n\tvar TrianglesDrawMode = 0;\n\tvar TriangleStripDrawMode = 1;\n\tvar TriangleFanDrawMode = 2;\n\tvar LinearEncoding = 3000;\n\tvar sRGBEncoding = 3001;\n\tvar GammaEncoding = 3007;\n\tvar RGBEEncoding = 3002;\n\tvar LogLuvEncoding = 3003;\n\tvar RGBM7Encoding = 3004;\n\tvar RGBM16Encoding = 3005;\n\tvar RGBDEncoding = 3006;\n\tvar BasicDepthPacking = 3200;\n\tvar RGBADepthPacking = 3201;\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tvar _Math = {\n\n\t\tDEG2RAD: Math.PI / 180,\n\t\tRAD2DEG: 180 / Math.PI,\n\n\t\tgenerateUUID: function () {\n\n\t\t\t// http://www.broofa.com/Tools/Math.uuid.htm\n\n\t\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\n\t\t\tvar uuid = new Array( 36 );\n\t\t\tvar rnd = 0, r;\n\n\t\t\treturn function generateUUID() {\n\n\t\t\t\tfor ( var i = 0; i < 36; i ++ ) {\n\n\t\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\n\n\t\t\t\t\t\tuuid[ i ] = '-';\n\n\t\t\t\t\t} else if ( i === 14 ) {\n\n\t\t\t\t\t\tuuid[ i ] = '4';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\n\t\t\t\t\t\tr = rnd & 0xf;\n\t\t\t\t\t\trnd = rnd >> 4;\n\t\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn uuid.join( '' );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclamp: function ( value, min, max ) {\n\n\t\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t\t},\n\n\t\t// compute euclidian modulo of m % n\n\t\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\t\teuclideanModulo: function ( n, m ) {\n\n\t\t\treturn ( ( n % m ) + m ) % m;\n\n\t\t},\n\n\t\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\t\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t\t},\n\n\t\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\t\tlerp: function ( x, y, t ) {\n\n\t\t\treturn ( 1 - t ) * x + t * y;\n\n\t\t},\n\n\t\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\t\tsmoothstep: function ( x, min, max ) {\n\n\t\t\tif ( x <= min ) return 0;\n\t\t\tif ( x >= max ) return 1;\n\n\t\t\tx = ( x - min ) / ( max - min );\n\n\t\t\treturn x * x * ( 3 - 2 * x );\n\n\t\t},\n\n\t\tsmootherstep: function ( x, min, max ) {\n\n\t\t\tif ( x <= min ) return 0;\n\t\t\tif ( x >= max ) return 1;\n\n\t\t\tx = ( x - min ) / ( max - min );\n\n\t\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t\t},\n\n\t\t// Random integer from <low, high> interval\n\n\t\trandInt: function ( low, high ) {\n\n\t\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t\t},\n\n\t\t// Random float from <low, high> interval\n\n\t\trandFloat: function ( low, high ) {\n\n\t\t\treturn low + Math.random() * ( high - low );\n\n\t\t},\n\n\t\t// Random float from <-range/2, range/2> interval\n\n\t\trandFloatSpread: function ( range ) {\n\n\t\t\treturn range * ( 0.5 - Math.random() );\n\n\t\t},\n\n\t\tdegToRad: function ( degrees ) {\n\n\t\t\treturn degrees * _Math.DEG2RAD;\n\n\t\t},\n\n\t\tradToDeg: function ( radians ) {\n\n\t\t\treturn radians * _Math.RAD2DEG;\n\n\t\t},\n\n\t\tisPowerOfTwo: function ( value ) {\n\n\t\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t\t},\n\n\t\tnearestPowerOfTwo: function ( value ) {\n\n\t\t\treturn Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\n\n\t\t},\n\n\t\tnextPowerOfTwo: function ( value ) {\n\n\t\t\tvalue --;\n\t\t\tvalue |= value >> 1;\n\t\t\tvalue |= value >> 2;\n\t\t\tvalue |= value >> 4;\n\t\t\tvalue |= value >> 8;\n\t\t\tvalue |= value >> 16;\n\t\t\tvalue ++;\n\n\t\t\treturn value;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author philogb / http://blog.thejit.org/\n\t * @author egraether / http://egraether.com/\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t */\n\n\tfunction Vector2( x, y ) {\n\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\n\t}\n\n\tObject.defineProperties( Vector2.prototype, {\n\n\t\t\"width\" : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.x;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.x = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\t\"height\" : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.y;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.y = value;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Vector2.prototype, {\n\n\t\tisVector2: true,\n\n\t\tset: function ( x, y ) {\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetScalar: function ( scalar ) {\n\n\t\t\tthis.x = scalar;\n\t\t\tthis.y = scalar;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetX: function ( x ) {\n\n\t\t\tthis.x = x;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetY: function ( y ) {\n\n\t\t\tthis.y = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetComponent: function ( index, value ) {\n\n\t\t\tswitch ( index ) {\n\n\t\t\t\tcase 0: this.x = value; break;\n\t\t\t\tcase 1: this.y = value; break;\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetComponent: function ( index ) {\n\n\t\t\tswitch ( index ) {\n\n\t\t\t\tcase 0: return this.x;\n\t\t\t\tcase 1: return this.y;\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t\t}\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.x, this.y );\n\n\t\t},\n\n\t\tcopy: function ( v ) {\n\n\t\t\tthis.x = v.x;\n\t\t\tthis.y = v.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tadd: function ( v, w ) {\n\n\t\t\tif ( w !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\t\treturn this.addVectors( v, w );\n\n\t\t\t}\n\n\t\t\tthis.x += v.x;\n\t\t\tthis.y += v.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddScalar: function ( s ) {\n\n\t\t\tthis.x += s;\n\t\t\tthis.y += s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddVectors: function ( a, b ) {\n\n\t\t\tthis.x = a.x + b.x;\n\t\t\tthis.y = a.y + b.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddScaledVector: function ( v, s ) {\n\n\t\t\tthis.x += v.x * s;\n\t\t\tthis.y += v.y * s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsub: function ( v, w ) {\n\n\t\t\tif ( w !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\t\treturn this.subVectors( v, w );\n\n\t\t\t}\n\n\t\t\tthis.x -= v.x;\n\t\t\tthis.y -= v.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsubScalar: function ( s ) {\n\n\t\t\tthis.x -= s;\n\t\t\tthis.y -= s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsubVectors: function ( a, b ) {\n\n\t\t\tthis.x = a.x - b.x;\n\t\t\tthis.y = a.y - b.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiply: function ( v ) {\n\n\t\t\tthis.x *= v.x;\n\t\t\tthis.y *= v.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiplyScalar: function ( scalar ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdivide: function ( v ) {\n\n\t\t\tthis.x /= v.x;\n\t\t\tthis.y /= v.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdivideScalar: function ( scalar ) {\n\n\t\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t\t},\n\n\t\tmin: function ( v ) {\n\n\t\t\tthis.x = Math.min( this.x, v.x );\n\t\t\tthis.y = Math.min( this.y, v.y );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmax: function ( v ) {\n\n\t\t\tthis.x = Math.max( this.x, v.x );\n\t\t\tthis.y = Math.max( this.y, v.y );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclamp: function ( min, max ) {\n\n\t\t\t// assumes min < max, componentwise\n\n\t\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclampScalar: function () {\n\n\t\t\tvar min = new Vector2();\n\t\t\tvar max = new Vector2();\n\n\t\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\t\tmin.set( minVal, minVal );\n\t\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\t\treturn this.clamp( min, max );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclampLength: function ( min, max ) {\n\n\t\t\tvar length = this.length();\n\n\t\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t\t},\n\n\t\tfloor: function () {\n\n\t\t\tthis.x = Math.floor( this.x );\n\t\t\tthis.y = Math.floor( this.y );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tceil: function () {\n\n\t\t\tthis.x = Math.ceil( this.x );\n\t\t\tthis.y = Math.ceil( this.y );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tround: function () {\n\n\t\t\tthis.x = Math.round( this.x );\n\t\t\tthis.y = Math.round( this.y );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\troundToZero: function () {\n\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tnegate: function () {\n\n\t\t\tthis.x = - this.x;\n\t\t\tthis.y = - this.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdot: function ( v ) {\n\n\t\t\treturn this.x * v.x + this.y * v.y;\n\n\t\t},\n\n\t\tlengthSq: function () {\n\n\t\t\treturn this.x * this.x + this.y * this.y;\n\n\t\t},\n\n\t\tlength: function () {\n\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t\t},\n\n\t\tlengthManhattan: function() {\n\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t\t},\n\n\t\tnormalize: function () {\n\n\t\t\treturn this.divideScalar( this.length() || 1 );\n\n\t\t},\n\n\t\tangle: function () {\n\n\t\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\t\treturn angle;\n\n\t\t},\n\n\t\tdistanceTo: function ( v ) {\n\n\t\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t\t},\n\n\t\tdistanceToSquared: function ( v ) {\n\n\t\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\t\treturn dx * dx + dy * dy;\n\n\t\t},\n\n\t\tdistanceToManhattan: function ( v ) {\n\n\t\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t\t},\n\n\t\tsetLength: function ( length ) {\n\n\t\t\treturn this.normalize().multiplyScalar( length );\n\n\t\t},\n\n\t\tlerp: function ( v, alpha ) {\n\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t\t},\n\n\t\tequals: function ( v ) {\n\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t\t},\n\n\t\tfromArray: function ( array, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tthis.x = array[ offset ];\n\t\t\tthis.y = array[ offset + 1 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoArray: function ( array, offset ) {\n\n\t\t\tif ( array === undefined ) array = [];\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tarray[ offset ] = this.x;\n\t\t\tarray[ offset + 1 ] = this.y;\n\n\t\t\treturn array;\n\n\t\t},\n\n\t\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\t\tif ( offset !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t\t}\n\n\t\t\tthis.x = attribute.getX( index );\n\t\t\tthis.y = attribute.getY( index );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\trotateAround: function ( center, angle ) {\n\n\t\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\t\tvar x = this.x - center.x;\n\t\t\tvar y = this.y - center.y;\n\n\t\t\tthis.x = x * c - y * s + center.x;\n\t\t\tthis.y = x * s + y * c + center.y;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author szimek / https://github.com/szimek/\n\t */\n\n\tvar textureId = 0;\n\n\tfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\t\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\tthis.name = '';\n\n\t\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\t\tthis.mipmaps = [];\n\n\t\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\t\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\t\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\n\n\t\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\t\tthis.format = format !== undefined ? format : RGBAFormat;\n\t\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\t\tthis.offset = new Vector2( 0, 0 );\n\t\tthis.repeat = new Vector2( 1, 1 );\n\n\t\tthis.generateMipmaps = true;\n\t\tthis.premultiplyAlpha = false;\n\t\tthis.flipY = true;\n\t\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t\t//\n\t\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\t\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\t\tthis.version = 0;\n\t\tthis.onUpdate = null;\n\n\t}\n\n\tTexture.DEFAULT_IMAGE = undefined;\n\tTexture.DEFAULT_MAPPING = UVMapping;\n\n\tObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\t\tset: function ( value ) {\n\n\t\t\tif ( value === true ) this.version ++;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Texture.prototype, EventDispatcher.prototype, {\n\n\t\tconstructor: Texture,\n\n\t\tisTexture: true,\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tthis.name = source.name;\n\n\t\t\tthis.image = source.image;\n\t\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\t\tthis.mapping = source.mapping;\n\n\t\t\tthis.wrapS = source.wrapS;\n\t\t\tthis.wrapT = source.wrapT;\n\n\t\t\tthis.magFilter = source.magFilter;\n\t\t\tthis.minFilter = source.minFilter;\n\n\t\t\tthis.anisotropy = source.anisotropy;\n\n\t\t\tthis.format = source.format;\n\t\t\tthis.type = source.type;\n\n\t\t\tthis.offset.copy( source.offset );\n\t\t\tthis.repeat.copy( source.repeat );\n\n\t\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\t\tthis.flipY = source.flipY;\n\t\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\t\tthis.encoding = source.encoding;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t\t}\n\n\t\t\tfunction getDataURL( image ) {\n\n\t\t\t\tvar canvas;\n\n\t\t\t\tif ( image.toDataURL !== undefined ) {\n\n\t\t\t\t\tcanvas = image;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcanvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\t\tcanvas.width = image.width;\n\t\t\t\t\tcanvas.height = image.height;\n\n\t\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar output = {\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: 4.5,\n\t\t\t\t\ttype: 'Texture',\n\t\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t\t},\n\n\t\t\t\tuuid: this.uuid,\n\t\t\t\tname: this.name,\n\n\t\t\t\tmapping: this.mapping,\n\n\t\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\t\tminFilter: this.minFilter,\n\t\t\t\tmagFilter: this.magFilter,\n\t\t\t\tanisotropy: this.anisotropy,\n\n\t\t\t\tflipY: this.flipY\n\t\t\t};\n\n\t\t\tif ( this.image !== undefined ) {\n\n\t\t\t\t// TODO: Move to THREE.Image\n\n\t\t\t\tvar image = this.image;\n\n\t\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\t\timage.uuid = _Math.generateUUID(); // UGH\n\n\t\t\t\t}\n\n\t\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\t\turl: getDataURL( image )\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\toutput.image = image.uuid;\n\n\t\t\t}\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t\treturn output;\n\n\t\t},\n\n\t\tdispose: function () {\n\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\t},\n\n\t\ttransformUv: function ( uv ) {\n\n\t\t\tif ( this.mapping !== UVMapping ) return;\n\n\t\t\tuv.multiply( this.repeat );\n\t\t\tuv.add( this.offset );\n\n\t\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.flipY ) {\n\n\t\t\t\tuv.y = 1 - uv.y;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\n\t * @author philogb / http://blog.thejit.org/\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author egraether / http://egraether.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t */\n\n\tfunction Vector4( x, y, z, w ) {\n\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.z = z || 0;\n\t\tthis.w = ( w !== undefined ) ? w : 1;\n\n\t}\n\n\tObject.assign( Vector4.prototype, {\n\n\t\tisVector4: true,\n\n\t\tset: function ( x, y, z, w ) {\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t\tthis.w = w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetScalar: function ( scalar ) {\n\n\t\t\tthis.x = scalar;\n\t\t\tthis.y = scalar;\n\t\t\tthis.z = scalar;\n\t\t\tthis.w = scalar;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetX: function ( x ) {\n\n\t\t\tthis.x = x;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetY: function ( y ) {\n\n\t\t\tthis.y = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetZ: function ( z ) {\n\n\t\t\tthis.z = z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetW: function ( w ) {\n\n\t\t\tthis.w = w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetComponent: function ( index, value ) {\n\n\t\t\tswitch ( index ) {\n\n\t\t\t\tcase 0: this.x = value; break;\n\t\t\t\tcase 1: this.y = value; break;\n\t\t\t\tcase 2: this.z = value; break;\n\t\t\t\tcase 3: this.w = value; break;\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetComponent: function ( index ) {\n\n\t\t\tswitch ( index ) {\n\n\t\t\t\tcase 0: return this.x;\n\t\t\t\tcase 1: return this.y;\n\t\t\t\tcase 2: return this.z;\n\t\t\t\tcase 3: return this.w;\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t\t}\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t\t},\n\n\t\tcopy: function ( v ) {\n\n\t\t\tthis.x = v.x;\n\t\t\tthis.y = v.y;\n\t\t\tthis.z = v.z;\n\t\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tadd: function ( v, w ) {\n\n\t\t\tif ( w !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\t\treturn this.addVectors( v, w );\n\n\t\t\t}\n\n\t\t\tthis.x += v.x;\n\t\t\tthis.y += v.y;\n\t\t\tthis.z += v.z;\n\t\t\tthis.w += v.w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddScalar: function ( s ) {\n\n\t\t\tthis.x += s;\n\t\t\tthis.y += s;\n\t\t\tthis.z += s;\n\t\t\tthis.w += s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddVectors: function ( a, b ) {\n\n\t\t\tthis.x = a.x + b.x;\n\t\t\tthis.y = a.y + b.y;\n\t\t\tthis.z = a.z + b.z;\n\t\t\tthis.w = a.w + b.w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddScaledVector: function ( v, s ) {\n\n\t\t\tthis.x += v.x * s;\n\t\t\tthis.y += v.y * s;\n\t\t\tthis.z += v.z * s;\n\t\t\tthis.w += v.w * s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsub: function ( v, w ) {\n\n\t\t\tif ( w !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\t\treturn this.subVectors( v, w );\n\n\t\t\t}\n\n\t\t\tthis.x -= v.x;\n\t\t\tthis.y -= v.y;\n\t\t\tthis.z -= v.z;\n\t\t\tthis.w -= v.w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsubScalar: function ( s ) {\n\n\t\t\tthis.x -= s;\n\t\t\tthis.y -= s;\n\t\t\tthis.z -= s;\n\t\t\tthis.w -= s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsubVectors: function ( a, b ) {\n\n\t\t\tthis.x = a.x - b.x;\n\t\t\tthis.y = a.y - b.y;\n\t\t\tthis.z = a.z - b.z;\n\t\t\tthis.w = a.w - b.w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiplyScalar: function ( scalar ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\t\t\tthis.z *= scalar;\n\t\t\tthis.w *= scalar;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tapplyMatrix4: function ( m ) {\n\n\t\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\t\tvar e = m.elements;\n\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdivideScalar: function ( scalar ) {\n\n\t\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t\t},\n\n\t\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t\t// q is assumed to be normalized\n\n\t\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\t\tif ( s < 0.0001 ) {\n\n\t\t\t\t this.x = 1;\n\t\t\t\t this.y = 0;\n\t\t\t\t this.z = 0;\n\n\t\t\t} else {\n\n\t\t\t\t this.x = q.x / s;\n\t\t\t\t this.y = q.y / s;\n\t\t\t\t this.z = q.z / s;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\t\tte = m.elements,\n\n\t\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t\t// singularity found\n\t\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t\t}\n\n\t\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\t\tangle = Math.PI;\n\n\t\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\t\tx = 0;\n\t\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\t\ty = xy / x;\n\t\t\t\t\t\tz = xz / x;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\t\ty = 0;\n\t\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\t\tx = xy / y;\n\t\t\t\t\t\tz = yz / y;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\t\tz = 0;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\t\tx = xz / z;\n\t\t\t\t\t\ty = yz / z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.set( x, y, z, angle );\n\n\t\t\t\treturn this; // return 180 deg rotation\n\n\t\t\t}\n\n\t\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\t\tthis.x = ( m32 - m23 ) / s;\n\t\t\tthis.y = ( m13 - m31 ) / s;\n\t\t\tthis.z = ( m21 - m12 ) / s;\n\t\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmin: function ( v ) {\n\n\t\t\tthis.x = Math.min( this.x, v.x );\n\t\t\tthis.y = Math.min( this.y, v.y );\n\t\t\tthis.z = Math.min( this.z, v.z );\n\t\t\tthis.w = Math.min( this.w, v.w );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmax: function ( v ) {\n\n\t\t\tthis.x = Math.max( this.x, v.x );\n\t\t\tthis.y = Math.max( this.y, v.y );\n\t\t\tthis.z = Math.max( this.z, v.z );\n\t\t\tthis.w = Math.max( this.w, v.w );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclamp: function ( min, max ) {\n\n\t\t\t// assumes min < max, componentwise\n\n\t\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclampScalar: function () {\n\n\t\t\tvar min, max;\n\n\t\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\t\tif ( min === undefined ) {\n\n\t\t\t\t\tmin = new Vector4();\n\t\t\t\t\tmax = new Vector4();\n\n\t\t\t\t}\n\n\t\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\t\treturn this.clamp( min, max );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclampLength: function ( min, max ) {\n\n\t\t\tvar length = this.length();\n\n\t\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t\t},\n\n\t\tfloor: function () {\n\n\t\t\tthis.x = Math.floor( this.x );\n\t\t\tthis.y = Math.floor( this.y );\n\t\t\tthis.z = Math.floor( this.z );\n\t\t\tthis.w = Math.floor( this.w );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tceil: function () {\n\n\t\t\tthis.x = Math.ceil( this.x );\n\t\t\tthis.y = Math.ceil( this.y );\n\t\t\tthis.z = Math.ceil( this.z );\n\t\t\tthis.w = Math.ceil( this.w );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tround: function () {\n\n\t\t\tthis.x = Math.round( this.x );\n\t\t\tthis.y = Math.round( this.y );\n\t\t\tthis.z = Math.round( this.z );\n\t\t\tthis.w = Math.round( this.w );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\troundToZero: function () {\n\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tnegate: function () {\n\n\t\t\tthis.x = - this.x;\n\t\t\tthis.y = - this.y;\n\t\t\tthis.z = - this.z;\n\t\t\tthis.w = - this.w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdot: function ( v ) {\n\n\t\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t\t},\n\n\t\tlengthSq: function () {\n\n\t\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t\t},\n\n\t\tlength: function () {\n\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t\t},\n\n\t\tlengthManhattan: function () {\n\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t\t},\n\n\t\tnormalize: function () {\n\n\t\t\treturn this.divideScalar( this.length() || 1 );\n\n\t\t},\n\n\t\tsetLength: function ( length ) {\n\n\t\t\treturn this.normalize().multiplyScalar( length );\n\n\t\t},\n\n\t\tlerp: function ( v, alpha ) {\n\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t\t},\n\n\t\tequals: function ( v ) {\n\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t\t},\n\n\t\tfromArray: function ( array, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tthis.x = array[ offset ];\n\t\t\tthis.y = array[ offset + 1 ];\n\t\t\tthis.z = array[ offset + 2 ];\n\t\t\tthis.w = array[ offset + 3 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoArray: function ( array, offset ) {\n\n\t\t\tif ( array === undefined ) array = [];\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tarray[ offset ] = this.x;\n\t\t\tarray[ offset + 1 ] = this.y;\n\t\t\tarray[ offset + 2 ] = this.z;\n\t\t\tarray[ offset + 3 ] = this.w;\n\n\t\t\treturn array;\n\n\t\t},\n\n\t\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\t\tif ( offset !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t\t}\n\n\t\t\tthis.x = attribute.getX( index );\n\t\t\tthis.y = attribute.getY( index );\n\t\t\tthis.z = attribute.getZ( index );\n\t\t\tthis.w = attribute.getW( index );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author szimek / https://github.com/szimek/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author Marius Kintel / https://github.com/kintel\n\t */\n\n\t/*\n\t In options, we can specify:\n\t * Texture parameters for an auto-generated target texture\n\t * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n\t*/\n\tfunction WebGLRenderTarget( width, height, options ) {\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\toptions = options || {};\n\n\t\tif ( options.minFilter === undefined ) options.minFilter = LinearFilter;\n\n\t\tthis.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\t\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n\t}\n\n\tObject.assign( WebGLRenderTarget.prototype, EventDispatcher.prototype, {\n\n\t\tisWebGLRenderTarget: true,\n\n\t\tsetSize: function ( width, height ) {\n\n\t\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\t\tthis.width = width;\n\t\t\t\tthis.height = height;\n\n\t\t\t\tthis.dispose();\n\n\t\t\t}\n\n\t\t\tthis.viewport.set( 0, 0, width, height );\n\t\t\tthis.scissor.set( 0, 0, width, height );\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tthis.width = source.width;\n\t\t\tthis.height = source.height;\n\n\t\t\tthis.viewport.copy( source.viewport );\n\n\t\t\tthis.texture = source.texture.clone();\n\n\t\t\tthis.depthBuffer = source.depthBuffer;\n\t\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\t\tthis.depthTexture = source.depthTexture;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdispose: function () {\n\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com\n\t */\n\n\tfunction WebGLRenderTargetCube( width, height, options ) {\n\n\t\tWebGLRenderTarget.call( this, width, height, options );\n\n\t\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\n\t\tthis.activeMipMapLevel = 0;\n\n\t}\n\n\tWebGLRenderTargetCube.prototype = Object.create( WebGLRenderTarget.prototype );\n\tWebGLRenderTargetCube.prototype.constructor = WebGLRenderTargetCube;\n\n\tWebGLRenderTargetCube.prototype.isWebGLRenderTargetCube = true;\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author bhouston / http://clara.io\n\t */\n\n\tfunction Quaternion( x, y, z, w ) {\n\n\t\tthis._x = x || 0;\n\t\tthis._y = y || 0;\n\t\tthis._z = z || 0;\n\t\tthis._w = ( w !== undefined ) ? w : 1;\n\n\t}\n\n\tObject.assign( Quaternion, {\n\n\t\tslerp: function ( qa, qb, qm, t ) {\n\n\t\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t\t},\n\n\t\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\t\tvar s = 1 - t,\n\n\t\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t\t}\n\n\t\t\t\tvar tDir = t * dir;\n\n\t\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t\t// Normalize in case we just did a lerp:\n\t\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\t\tx0 *= f;\n\t\t\t\t\ty0 *= f;\n\t\t\t\t\tz0 *= f;\n\t\t\t\t\tw0 *= f;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tdst[ dstOffset ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\n\t\t}\n\n\t} );\n\n\tObject.defineProperties( Quaternion.prototype, {\n\n\t\tx: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this._x;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis._x = value;\n\t\t\t\tthis.onChangeCallback();\n\n\t\t\t}\n\n\t\t},\n\n\t\ty: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this._y;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis._y = value;\n\t\t\t\tthis.onChangeCallback();\n\n\t\t\t}\n\n\t\t},\n\n\t\tz: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this._z;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis._z = value;\n\t\t\t\tthis.onChangeCallback();\n\n\t\t\t}\n\n\t\t},\n\n\t\tw: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this._w;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis._w = value;\n\t\t\t\tthis.onChangeCallback();\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Quaternion.prototype, {\n\n\t\tset: function ( x, y, z, w ) {\n\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\t\t\tthis._w = w;\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t\t},\n\n\t\tcopy: function ( quaternion ) {\n\n\t\t\tthis._x = quaternion.x;\n\t\t\tthis._y = quaternion.y;\n\t\t\tthis._z = quaternion.z;\n\t\t\tthis._w = quaternion.w;\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromEuler: function ( euler, update ) {\n\n\t\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t\t//\tcontent/SpinCalc.m\n\n\t\t\tvar cos = Math.cos;\n\t\t\tvar sin = Math.sin;\n\n\t\t\tvar c1 = cos( x / 2 );\n\t\t\tvar c2 = cos( y / 2 );\n\t\t\tvar c3 = cos( z / 2 );\n\n\t\t\tvar s1 = sin( x / 2 );\n\t\t\tvar s2 = sin( y / 2 );\n\t\t\tvar s3 = sin( z / 2 );\n\n\t\t\tif ( order === 'XYZ' ) {\n\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t\t} else if ( order === 'YZX' ) {\n\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t\t} else if ( order === 'XZY' ) {\n\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t\t}\n\n\t\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t\t// assumes axis is normalized\n\n\t\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\t\tthis._x = axis.x * s;\n\t\t\tthis._y = axis.y * s;\n\t\t\tthis._z = axis.z * s;\n\t\t\tthis._w = Math.cos( halfAngle );\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromRotationMatrix: function ( m ) {\n\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\t\tvar te = m.elements,\n\n\t\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\t\ttrace = m11 + m22 + m33,\n\t\t\t\ts;\n\n\t\t\tif ( trace > 0 ) {\n\n\t\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\t\tthis._w = 0.25 / s;\n\t\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\t\tthis._x = 0.25 * s;\n\t\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t\t} else if ( m22 > m33 ) {\n\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\t\tthis._y = 0.25 * s;\n\t\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t\t} else {\n\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\t\tthis._z = 0.25 * s;\n\n\t\t\t}\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromUnitVectors: function () {\n\n\t\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\t\tvar v1 = new Vector3();\n\t\t\tvar r;\n\n\t\t\tvar EPS = 0.000001;\n\n\t\t\treturn function setFromUnitVectors( vFrom, vTo ) {\n\n\t\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\t\tif ( r < EPS ) {\n\n\t\t\t\t\tr = 0;\n\n\t\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t\t}\n\n\t\t\t\tthis._x = v1.x;\n\t\t\t\tthis._y = v1.y;\n\t\t\t\tthis._z = v1.z;\n\t\t\t\tthis._w = r;\n\n\t\t\t\treturn this.normalize();\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tinverse: function () {\n\n\t\t\treturn this.conjugate().normalize();\n\n\t\t},\n\n\t\tconjugate: function () {\n\n\t\t\tthis._x *= - 1;\n\t\t\tthis._y *= - 1;\n\t\t\tthis._z *= - 1;\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdot: function ( v ) {\n\n\t\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t\t},\n\n\t\tlengthSq: function () {\n\n\t\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t\t},\n\n\t\tlength: function () {\n\n\t\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t\t},\n\n\t\tnormalize: function () {\n\n\t\t\tvar l = this.length();\n\n\t\t\tif ( l === 0 ) {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = 1;\n\n\t\t\t} else {\n\n\t\t\t\tl = 1 / l;\n\n\t\t\t\tthis._x = this._x * l;\n\t\t\t\tthis._y = this._y * l;\n\t\t\t\tthis._z = this._z * l;\n\t\t\t\tthis._w = this._w * l;\n\n\t\t\t}\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiply: function ( q, p ) {\n\n\t\t\tif ( p !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t\t}\n\n\t\t\treturn this.multiplyQuaternions( this, q );\n\n\t\t},\n\n\t\tpremultiply: function ( q ) {\n\n\t\t\treturn this.multiplyQuaternions( q, this );\n\n\t\t},\n\n\t\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tslerp: function ( qb, t ) {\n\n\t\t\tif ( t === 0 ) return this;\n\t\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\t\tthis._w = - qb._w;\n\t\t\t\tthis._x = - qb._x;\n\t\t\t\tthis._y = - qb._y;\n\t\t\t\tthis._z = - qb._z;\n\n\t\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t\t} else {\n\n\t\t\t\tthis.copy( qb );\n\n\t\t\t}\n\n\t\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\t\tthis._w = w;\n\t\t\t\tthis._x = x;\n\t\t\t\tthis._y = y;\n\t\t\t\tthis._z = z;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( quaternion ) {\n\n\t\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t\t},\n\n\t\tfromArray: function ( array, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tthis._x = array[ offset ];\n\t\t\tthis._y = array[ offset + 1 ];\n\t\t\tthis._z = array[ offset + 2 ];\n\t\t\tthis._w = array[ offset + 3 ];\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoArray: function ( array, offset ) {\n\n\t\t\tif ( array === undefined ) array = [];\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tarray[ offset ] = this._x;\n\t\t\tarray[ offset + 1 ] = this._y;\n\t\t\tarray[ offset + 2 ] = this._z;\n\t\t\tarray[ offset + 3 ] = this._w;\n\n\t\t\treturn array;\n\n\t\t},\n\n\t\tonChange: function ( callback ) {\n\n\t\t\tthis.onChangeCallback = callback;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tonChangeCallback: function () {}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author kile / http://kile.stravaganza.org/\n\t * @author philogb / http://blog.thejit.org/\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author egraether / http://egraether.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t */\n\n\tfunction Vector3( x, y, z ) {\n\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.z = z || 0;\n\n\t}\n\n\tObject.assign( Vector3.prototype, {\n\n\t\tisVector3: true,\n\n\t\tset: function ( x, y, z ) {\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetScalar: function ( scalar ) {\n\n\t\t\tthis.x = scalar;\n\t\t\tthis.y = scalar;\n\t\t\tthis.z = scalar;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetX: function ( x ) {\n\n\t\t\tthis.x = x;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetY: function ( y ) {\n\n\t\t\tthis.y = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetZ: function ( z ) {\n\n\t\t\tthis.z = z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetComponent: function ( index, value ) {\n\n\t\t\tswitch ( index ) {\n\n\t\t\t\tcase 0: this.x = value; break;\n\t\t\t\tcase 1: this.y = value; break;\n\t\t\t\tcase 2: this.z = value; break;\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetComponent: function ( index ) {\n\n\t\t\tswitch ( index ) {\n\n\t\t\t\tcase 0: return this.x;\n\t\t\t\tcase 1: return this.y;\n\t\t\t\tcase 2: return this.z;\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t\t}\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t\t},\n\n\t\tcopy: function ( v ) {\n\n\t\t\tthis.x = v.x;\n\t\t\tthis.y = v.y;\n\t\t\tthis.z = v.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tadd: function ( v, w ) {\n\n\t\t\tif ( w !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\t\treturn this.addVectors( v, w );\n\n\t\t\t}\n\n\t\t\tthis.x += v.x;\n\t\t\tthis.y += v.y;\n\t\t\tthis.z += v.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddScalar: function ( s ) {\n\n\t\t\tthis.x += s;\n\t\t\tthis.y += s;\n\t\t\tthis.z += s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddVectors: function ( a, b ) {\n\n\t\t\tthis.x = a.x + b.x;\n\t\t\tthis.y = a.y + b.y;\n\t\t\tthis.z = a.z + b.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddScaledVector: function ( v, s ) {\n\n\t\t\tthis.x += v.x * s;\n\t\t\tthis.y += v.y * s;\n\t\t\tthis.z += v.z * s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsub: function ( v, w ) {\n\n\t\t\tif ( w !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\t\treturn this.subVectors( v, w );\n\n\t\t\t}\n\n\t\t\tthis.x -= v.x;\n\t\t\tthis.y -= v.y;\n\t\t\tthis.z -= v.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsubScalar: function ( s ) {\n\n\t\t\tthis.x -= s;\n\t\t\tthis.y -= s;\n\t\t\tthis.z -= s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsubVectors: function ( a, b ) {\n\n\t\t\tthis.x = a.x - b.x;\n\t\t\tthis.y = a.y - b.y;\n\t\t\tthis.z = a.z - b.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiply: function ( v, w ) {\n\n\t\t\tif ( w !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t\t}\n\n\t\t\tthis.x *= v.x;\n\t\t\tthis.y *= v.y;\n\t\t\tthis.z *= v.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiplyScalar: function ( scalar ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\t\t\tthis.z *= scalar;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiplyVectors: function ( a, b ) {\n\n\t\t\tthis.x = a.x * b.x;\n\t\t\tthis.y = a.y * b.y;\n\t\t\tthis.z = a.z * b.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tapplyEuler: function () {\n\n\t\t\tvar quaternion = new Quaternion();\n\n\t\t\treturn function applyEuler( euler ) {\n\n\t\t\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t\t}\n\n\t\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tapplyAxisAngle: function () {\n\n\t\t\tvar quaternion = new Quaternion();\n\n\t\t\treturn function applyAxisAngle( axis, angle ) {\n\n\t\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tapplyMatrix3: function ( m ) {\n\n\t\t\tvar x = this.x, y = this.y, z = this.z;\n\t\t\tvar e = m.elements;\n\n\t\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tapplyMatrix4: function ( m ) {\n\n\t\t\tvar x = this.x, y = this.y, z = this.z;\n\t\t\tvar e = m.elements;\n\n\t\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * w;\n\t\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * w;\n\t\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tapplyQuaternion: function ( q ) {\n\n\t\t\tvar x = this.x, y = this.y, z = this.z;\n\t\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t\t// calculate quat * vector\n\n\t\t\tvar ix =  qw * x + qy * z - qz * y;\n\t\t\tvar iy =  qw * y + qz * x - qx * z;\n\t\t\tvar iz =  qw * z + qx * y - qy * x;\n\t\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t\t// calculate result * inverse quat\n\n\t\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tproject: function () {\n\n\t\t\tvar matrix = new Matrix4();\n\n\t\t\treturn function project( camera ) {\n\n\t\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tunproject: function () {\n\n\t\t\tvar matrix = new Matrix4();\n\n\t\t\treturn function unproject( camera ) {\n\n\t\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttransformDirection: function ( m ) {\n\n\t\t\t// input: THREE.Matrix4 affine matrix\n\t\t\t// vector interpreted as a direction\n\n\t\t\tvar x = this.x, y = this.y, z = this.z;\n\t\t\tvar e = m.elements;\n\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\t\treturn this.normalize();\n\n\t\t},\n\n\t\tdivide: function ( v ) {\n\n\t\t\tthis.x /= v.x;\n\t\t\tthis.y /= v.y;\n\t\t\tthis.z /= v.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdivideScalar: function ( scalar ) {\n\n\t\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t\t},\n\n\t\tmin: function ( v ) {\n\n\t\t\tthis.x = Math.min( this.x, v.x );\n\t\t\tthis.y = Math.min( this.y, v.y );\n\t\t\tthis.z = Math.min( this.z, v.z );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmax: function ( v ) {\n\n\t\t\tthis.x = Math.max( this.x, v.x );\n\t\t\tthis.y = Math.max( this.y, v.y );\n\t\t\tthis.z = Math.max( this.z, v.z );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclamp: function ( min, max ) {\n\n\t\t\t// assumes min < max, componentwise\n\n\t\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclampScalar: function () {\n\n\t\t\tvar min = new Vector3();\n\t\t\tvar max = new Vector3();\n\n\t\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\t\treturn this.clamp( min, max );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclampLength: function ( min, max ) {\n\n\t\t\tvar length = this.length();\n\n\t\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t\t},\n\n\t\tfloor: function () {\n\n\t\t\tthis.x = Math.floor( this.x );\n\t\t\tthis.y = Math.floor( this.y );\n\t\t\tthis.z = Math.floor( this.z );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tceil: function () {\n\n\t\t\tthis.x = Math.ceil( this.x );\n\t\t\tthis.y = Math.ceil( this.y );\n\t\t\tthis.z = Math.ceil( this.z );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tround: function () {\n\n\t\t\tthis.x = Math.round( this.x );\n\t\t\tthis.y = Math.round( this.y );\n\t\t\tthis.z = Math.round( this.z );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\troundToZero: function () {\n\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tnegate: function () {\n\n\t\t\tthis.x = - this.x;\n\t\t\tthis.y = - this.y;\n\t\t\tthis.z = - this.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdot: function ( v ) {\n\n\t\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t\t},\n\n\t\t// TODO lengthSquared?\n\n\t\tlengthSq: function () {\n\n\t\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t\t},\n\n\t\tlength: function () {\n\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t\t},\n\n\t\tlengthManhattan: function () {\n\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t\t},\n\n\t\tnormalize: function () {\n\n\t\t\treturn this.divideScalar( this.length() || 1 );\n\n\t\t},\n\n\t\tsetLength: function ( length ) {\n\n\t\t\treturn this.normalize().multiplyScalar( length );\n\n\t\t},\n\n\t\tlerp: function ( v, alpha ) {\n\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t\t},\n\n\t\tcross: function ( v, w ) {\n\n\t\t\tif ( w !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\t\treturn this.crossVectors( v, w );\n\n\t\t\t}\n\n\t\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\t\tthis.x = y * v.z - z * v.y;\n\t\t\tthis.y = z * v.x - x * v.z;\n\t\t\tthis.z = x * v.y - y * v.x;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcrossVectors: function ( a, b ) {\n\n\t\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\t\tthis.x = ay * bz - az * by;\n\t\t\tthis.y = az * bx - ax * bz;\n\t\t\tthis.z = ax * by - ay * bx;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tprojectOnVector: function ( vector ) {\n\n\t\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\n\n\t\t\treturn this.copy( vector ).multiplyScalar( scalar );\n\n\t\t},\n\n\t\tprojectOnPlane: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function projectOnPlane( planeNormal ) {\n\n\t\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\t\treturn this.sub( v1 );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\treflect: function () {\n\n\t\t\t// reflect incident vector off plane orthogonal to normal\n\t\t\t// normal is assumed to have unit length\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function reflect( normal ) {\n\n\t\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tangleTo: function ( v ) {\n\n\t\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\n\n\t\t\t// clamp, to handle numerical problems\n\n\t\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t\t},\n\n\t\tdistanceTo: function ( v ) {\n\n\t\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t\t},\n\n\t\tdistanceToSquared: function ( v ) {\n\n\t\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t\t},\n\n\t\tdistanceToManhattan: function ( v ) {\n\n\t\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t\t},\n\n\t\tsetFromSpherical: function ( s ) {\n\n\t\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\n\n\t\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\n\t\t\tthis.y = Math.cos( s.phi ) * s.radius;\n\t\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromCylindrical: function ( c ) {\n\n\t\t\tthis.x = c.radius * Math.sin( c.theta );\n\t\t\tthis.y = c.y;\n\t\t\tthis.z = c.radius * Math.cos( c.theta );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromMatrixPosition: function ( m ) {\n\n\t\t\tvar e = m.elements;\n\n\t\t\tthis.x = e[ 12 ];\n\t\t\tthis.y = e[ 13 ];\n\t\t\tthis.z = e[ 14 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromMatrixScale: function ( m ) {\n\n\t\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\tthis.x = sx;\n\t\t\tthis.y = sy;\n\t\t\tthis.z = sz;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t\t},\n\n\t\tequals: function ( v ) {\n\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t\t},\n\n\t\tfromArray: function ( array, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tthis.x = array[ offset ];\n\t\t\tthis.y = array[ offset + 1 ];\n\t\t\tthis.z = array[ offset + 2 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoArray: function ( array, offset ) {\n\n\t\t\tif ( array === undefined ) array = [];\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tarray[ offset ] = this.x;\n\t\t\tarray[ offset + 1 ] = this.y;\n\t\t\tarray[ offset + 2 ] = this.z;\n\n\t\t\treturn array;\n\n\t\t},\n\n\t\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\t\tif ( offset !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t\t}\n\n\t\t\tthis.x = attribute.getX( index );\n\t\t\tthis.y = attribute.getY( index );\n\t\t\tthis.z = attribute.getZ( index );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\n\t * @author philogb / http://blog.thejit.org/\n\t * @author jordi_ros / http://plattsoft.com\n\t * @author D1plo1d / http://github.com/D1plo1d\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author timknip / http://www.floorplanner.com/\n\t * @author bhouston / http://clara.io\n\t * @author WestLangley / http://github.com/WestLangley\n\t */\n\n\tfunction Matrix4() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tObject.assign( Matrix4.prototype, {\n\n\t\tisMatrix4: true,\n\n\t\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tidentity: function () {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0, 0,\n\t\t\t\t0, 1, 0, 0,\n\t\t\t\t0, 0, 1, 0,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new Matrix4().fromArray( this.elements );\n\n\t\t},\n\n\t\tcopy: function ( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyPosition: function ( m ) {\n\n\t\t\tvar te = this.elements, me = m.elements;\n\n\t\t\tte[ 12 ] = me[ 12 ];\n\t\t\tte[ 13 ] = me[ 13 ];\n\t\t\tte[ 14 ] = me[ 14 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\t\tthis.set(\n\t\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t\t0,       0,       0,       1\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\textractRotation: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function extractRotation( m ) {\n\n\t\t\t\tvar te = this.elements;\n\t\t\t\tvar me = m.elements;\n\n\t\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\n\t\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\n\t\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tmakeRotationFromEuler: function ( euler ) {\n\n\t\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\t\tte[ 0 ] = c * e;\n\t\t\t\tte[ 4 ] = - c * f;\n\t\t\t\tte[ 8 ] = d;\n\n\t\t\t\tte[ 1 ] = af + be * d;\n\t\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\t\tte[ 9 ] = - b * c;\n\n\t\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\t\tte[ 6 ] = be + af * d;\n\t\t\t\tte[ 10 ] = a * c;\n\n\t\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\t\tte[ 0 ] = ce + df * b;\n\t\t\t\tte[ 4 ] = de * b - cf;\n\t\t\t\tte[ 8 ] = a * d;\n\n\t\t\t\tte[ 1 ] = a * f;\n\t\t\t\tte[ 5 ] = a * e;\n\t\t\t\tte[ 9 ] = - b;\n\n\t\t\t\tte[ 2 ] = cf * b - de;\n\t\t\t\tte[ 6 ] = df + ce * b;\n\t\t\t\tte[ 10 ] = a * c;\n\n\t\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\t\tte[ 0 ] = ce - df * b;\n\t\t\t\tte[ 4 ] = - a * f;\n\t\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\t\tte[ 1 ] = cf + de * b;\n\t\t\t\tte[ 5 ] = a * e;\n\t\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\t\tte[ 2 ] = - a * d;\n\t\t\t\tte[ 6 ] = b;\n\t\t\t\tte[ 10 ] = a * c;\n\n\t\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\t\tte[ 0 ] = c * e;\n\t\t\t\tte[ 4 ] = be * d - af;\n\t\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\t\tte[ 1 ] = c * f;\n\t\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\t\tte[ 2 ] = - d;\n\t\t\t\tte[ 6 ] = b * c;\n\t\t\t\tte[ 10 ] = a * c;\n\n\t\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\t\tte[ 0 ] = c * e;\n\t\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\t\tte[ 1 ] = f;\n\t\t\t\tte[ 5 ] = a * e;\n\t\t\t\tte[ 9 ] = - b * e;\n\n\t\t\t\tte[ 2 ] = - d * e;\n\t\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\t\tte[ 0 ] = c * e;\n\t\t\t\tte[ 4 ] = - f;\n\t\t\t\tte[ 8 ] = d * e;\n\n\t\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\t\tte[ 5 ] = a * e;\n\t\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\t\tte[ 6 ] = b * e;\n\t\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t\t}\n\n\t\t\t// last column\n\t\t\tte[ 3 ] = 0;\n\t\t\tte[ 7 ] = 0;\n\t\t\tte[ 11 ] = 0;\n\n\t\t\t// bottom row\n\t\t\tte[ 12 ] = 0;\n\t\t\tte[ 13 ] = 0;\n\t\t\tte[ 14 ] = 0;\n\t\t\tte[ 15 ] = 1;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar x = q._x, y = q._y, z = q._z, w = q._w;\n\t\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\t\tte[ 4 ] = xy - wz;\n\t\t\tte[ 8 ] = xz + wy;\n\n\t\t\tte[ 1 ] = xy + wz;\n\t\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\t\tte[ 9 ] = yz - wx;\n\n\t\t\tte[ 2 ] = xz - wy;\n\t\t\tte[ 6 ] = yz + wx;\n\t\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t\t// last column\n\t\t\tte[ 3 ] = 0;\n\t\t\tte[ 7 ] = 0;\n\t\t\tte[ 11 ] = 0;\n\n\t\t\t// bottom row\n\t\t\tte[ 12 ] = 0;\n\t\t\tte[ 13 ] = 0;\n\t\t\tte[ 14 ] = 0;\n\t\t\tte[ 15 ] = 1;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tlookAt: function () {\n\n\t\t\tvar x = new Vector3();\n\t\t\tvar y = new Vector3();\n\t\t\tvar z = new Vector3();\n\n\t\t\treturn function lookAt( eye, target, up ) {\n\n\t\t\t\tvar te = this.elements;\n\n\t\t\t\tz.subVectors( eye, target );\n\n\t\t\t\tif ( z.lengthSq() === 0 ) {\n\n\t\t\t\t\t// eye and target are in the same position\n\n\t\t\t\t\tz.z = 1;\n\n\t\t\t\t}\n\n\t\t\t\tz.normalize();\n\t\t\t\tx.crossVectors( up, z );\n\n\t\t\t\tif ( x.lengthSq() === 0 ) {\n\n\t\t\t\t\t// up and z are parallel\n\n\t\t\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t\t\tz.x += 0.0001;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tz.z += 0.0001;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tz.normalize();\n\t\t\t\t\tx.crossVectors( up, z );\n\n\t\t\t\t}\n\n\t\t\t\tx.normalize();\n\t\t\t\ty.crossVectors( z, x );\n\n\t\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tmultiply: function ( m, n ) {\n\n\t\t\tif ( n !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t\t}\n\n\t\t\treturn this.multiplyMatrices( this, m );\n\n\t\t},\n\n\t\tpremultiply: function ( m ) {\n\n\t\t\treturn this.multiplyMatrices( m, this );\n\n\t\t},\n\n\t\tmultiplyMatrices: function ( a, b ) {\n\n\t\t\tvar ae = a.elements;\n\t\t\tvar be = b.elements;\n\t\t\tvar te = this.elements;\n\n\t\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiplyScalar: function ( s ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tapplyToBufferAttribute: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t\t}\n\n\t\t\t\treturn attribute;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tdeterminant: function () {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t\t//TODO: make this more efficient\n\t\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\t\treturn (\n\t\t\t\tn41 * (\n\t\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t\t - n13 * n24 * n32\n\t\t\t\t\t - n14 * n22 * n33\n\t\t\t\t\t + n12 * n24 * n33\n\t\t\t\t\t + n13 * n22 * n34\n\t\t\t\t\t - n12 * n23 * n34\n\t\t\t\t) +\n\t\t\t\tn42 * (\n\t\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t\t - n11 * n24 * n33\n\t\t\t\t\t + n14 * n21 * n33\n\t\t\t\t\t - n13 * n21 * n34\n\t\t\t\t\t + n13 * n24 * n31\n\t\t\t\t\t - n14 * n23 * n31\n\t\t\t\t) +\n\t\t\t\tn43 * (\n\t\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t\t - n11 * n22 * n34\n\t\t\t\t\t - n14 * n21 * n32\n\t\t\t\t\t + n12 * n21 * n34\n\t\t\t\t\t + n14 * n22 * n31\n\t\t\t\t\t - n12 * n24 * n31\n\t\t\t\t) +\n\t\t\t\tn44 * (\n\t\t\t\t\t- n13 * n22 * n31\n\t\t\t\t\t - n11 * n23 * n32\n\t\t\t\t\t + n11 * n22 * n33\n\t\t\t\t\t + n13 * n21 * n32\n\t\t\t\t\t - n12 * n21 * n33\n\t\t\t\t\t + n12 * n23 * n31\n\t\t\t\t)\n\n\t\t\t);\n\n\t\t},\n\n\t\ttranspose: function () {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar tmp;\n\n\t\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetPosition: function ( v ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tte[ 12 ] = v.x;\n\t\t\tte[ 13 ] = v.y;\n\t\t\tte[ 14 ] = v.z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\t\tvar te = this.elements,\n\t\t\t\tme = m.elements,\n\n\t\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\t\tif ( det === 0 ) {\n\n\t\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\t\tthrow new Error( msg );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( msg );\n\n\t\t\t\t}\n\n\t\t\t\treturn this.identity();\n\n\t\t\t}\n\n\t\t\tvar detInv = 1 / det;\n\n\t\t\tte[ 0 ] = t11 * detInv;\n\t\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\t\tte[ 4 ] = t12 * detInv;\n\t\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\t\tte[ 8 ] = t13 * detInv;\n\t\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\t\tte[ 12 ] = t14 * detInv;\n\t\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tscale: function ( v ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetMaxScaleOnAxis: function () {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t\t},\n\n\t\tmakeTranslation: function ( x, y, z ) {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0, x,\n\t\t\t\t0, 1, 0, y,\n\t\t\t\t0, 0, 1, z,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeRotationX: function ( theta ) {\n\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0,  0, 0,\n\t\t\t\t0, c, - s, 0,\n\t\t\t\t0, s,  c, 0,\n\t\t\t\t0, 0,  0, 1\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeRotationY: function ( theta ) {\n\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\t\tthis.set(\n\n\t\t\t\t c, 0, s, 0,\n\t\t\t\t 0, 1, 0, 0,\n\t\t\t\t- s, 0, c, 0,\n\t\t\t\t 0, 0, 0, 1\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeRotationZ: function ( theta ) {\n\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\t\tthis.set(\n\n\t\t\t\tc, - s, 0, 0,\n\t\t\t\ts,  c, 0, 0,\n\t\t\t\t0,  0, 1, 0,\n\t\t\t\t0,  0, 0, 1\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\t\tvar c = Math.cos( angle );\n\t\t\tvar s = Math.sin( angle );\n\t\t\tvar t = 1 - c;\n\t\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\t\tvar tx = t * x, ty = t * y;\n\n\t\t\tthis.set(\n\n\t\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t\t return this;\n\n\t\t},\n\n\t\tmakeScale: function ( x, y, z ) {\n\n\t\t\tthis.set(\n\n\t\t\t\tx, 0, 0, 0,\n\t\t\t\t0, y, 0, 0,\n\t\t\t\t0, 0, z, 0,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeShear: function ( x, y, z ) {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, y, z, 0,\n\t\t\t\tx, 1, z, 0,\n\t\t\t\tx, y, 1, 0,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcompose: function ( position, quaternion, scale ) {\n\n\t\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\t\tthis.scale( scale );\n\t\t\tthis.setPosition( position );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdecompose: function () {\n\n\t\t\tvar vector = new Vector3();\n\t\t\tvar matrix = new Matrix4();\n\n\t\t\treturn function decompose( position, quaternion, scale ) {\n\n\t\t\t\tvar te = this.elements;\n\n\t\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t\t// if determine is negative, we need to invert one scale\n\t\t\t\tvar det = this.determinant();\n\t\t\t\tif ( det < 0 ) sx = - sx;\n\n\t\t\t\tposition.x = te[ 12 ];\n\t\t\t\tposition.y = te[ 13 ];\n\t\t\t\tposition.z = te[ 14 ];\n\n\t\t\t\t// scale the rotation part\n\t\t\t\tmatrix.copy( this );\n\n\t\t\t\tvar invSX = 1 / sx;\n\t\t\t\tvar invSY = 1 / sy;\n\t\t\t\tvar invSZ = 1 / sz;\n\n\t\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\t\tscale.x = sx;\n\t\t\t\tscale.y = sy;\n\t\t\t\tscale.z = sz;\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\t\tif ( far === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t\t}\n\n\t\t\tvar te = this.elements;\n\t\t\tvar x = 2 * near / ( right - left );\n\t\t\tvar y = 2 * near / ( top - bottom );\n\n\t\t\tvar a = ( right + left ) / ( right - left );\n\t\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\t\tvar c = - ( far + near ) / ( far - near );\n\t\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar w = 1.0 / ( right - left );\n\t\t\tvar h = 1.0 / ( top - bottom );\n\t\t\tvar p = 1.0 / ( far - near );\n\n\t\t\tvar x = ( right + left ) * w;\n\t\t\tvar y = ( top + bottom ) * h;\n\t\t\tvar z = ( far + near ) * p;\n\n\t\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( matrix ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = matrix.elements;\n\n\t\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tfromArray: function ( array, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoArray: function ( array, offset ) {\n\n\t\t\tif ( array === undefined ) array = [];\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tvar te = this.elements;\n\n\t\t\tarray[ offset ] = te[ 0 ];\n\t\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\t\treturn array;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\t\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.image = { data: data, width: width, height: height };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n\tDataTexture.prototype = Object.create( Texture.prototype );\n\tDataTexture.prototype.constructor = DataTexture;\n\n\tDataTexture.prototype.isDataTexture = true;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\t\timages = images !== undefined ? images : [];\n\t\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\t\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.flipY = false;\n\n\t}\n\n\tCubeTexture.prototype = Object.create( Texture.prototype );\n\tCubeTexture.prototype.constructor = CubeTexture;\n\n\tCubeTexture.prototype.isCubeTexture = true;\n\n\tObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\t\tget: function () {\n\n\t\t\treturn this.image;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.image = value;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author tschw\n\t *\n\t * Uniforms of a program.\n\t * Those form a tree structure with a special top-level container for the root,\n\t * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\n\t *\n\t *\n\t * Properties of inner nodes including the top-level container:\n\t *\n\t * .seq - array of nested uniforms\n\t * .map - nested uniforms by name\n\t *\n\t *\n\t * Methods of all nodes except the top-level container:\n\t *\n\t * .setValue( gl, value, [renderer] )\n\t *\n\t * \t\tuploads a uniform value(s)\n\t *  \tthe 'renderer' parameter is needed for sampler uniforms\n\t *\n\t *\n\t * Static methods of the top-level container (renderer factorizations):\n\t *\n\t * .upload( gl, seq, values, renderer )\n\t *\n\t * \t\tsets uniforms in 'seq' to 'values[id].value'\n\t *\n\t * .seqWithValue( seq, values ) : filteredSeq\n\t *\n\t * \t\tfilters 'seq' entries with corresponding entry in values\n\t *\n\t *\n\t * Methods of the top-level container (renderer factorizations):\n\t *\n\t * .setValue( gl, name, value )\n\t *\n\t * \t\tsets uniform with  name 'name' to 'value'\n\t *\n\t * .set( gl, obj, prop )\n\t *\n\t * \t\tsets uniform from object and property with same name than uniform\n\t *\n\t * .setOptional( gl, obj, prop )\n\t *\n\t * \t\tlike .set for an optional property of the object\n\t *\n\t */\n\n\tvar emptyTexture = new Texture();\n\tvar emptyCubeTexture = new CubeTexture();\n\n\t// --- Base for inner nodes (including the root) ---\n\n\tfunction UniformContainer() {\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t}\n\n\t// --- Utilities ---\n\n\t// Array Caches (provide typed arrays for temporary by size)\n\n\tvar arrayCacheF32 = [];\n\tvar arrayCacheI32 = [];\n\n\t// Float32Array caches used for uploading Matrix uniforms\n\n\tvar mat4array = new Float32Array( 16 );\n\tvar mat3array = new Float32Array( 9 );\n\n\t// Flattening for arrays of vectors and matrices\n\n\tfunction flatten( array, nBlocks, blockSize ) {\n\n\t\tvar firstElem = array[ 0 ];\n\n\t\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t\t// unoptimized: ! isNaN( firstElem )\n\t\t// see http://jacksondunstan.com/articles/983\n\n\t\tvar n = nBlocks * blockSize,\n\t\t\tr = arrayCacheF32[ n ];\n\n\t\tif ( r === undefined ) {\n\n\t\t\tr = new Float32Array( n );\n\t\t\tarrayCacheF32[ n ] = r;\n\n\t\t}\n\n\t\tif ( nBlocks !== 0 ) {\n\n\t\t\tfirstElem.toArray( r, 0 );\n\n\t\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\t\toffset += blockSize;\n\t\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn r;\n\n\t}\n\n\t// Texture unit allocation\n\n\tfunction allocTexUnits( renderer, n ) {\n\n\t\tvar r = arrayCacheI32[ n ];\n\n\t\tif ( r === undefined ) {\n\n\t\t\tr = new Int32Array( n );\n\t\t\tarrayCacheI32[ n ] = r;\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\tr[ i ] = renderer.allocTextureUnit();\n\n\t\treturn r;\n\n\t}\n\n\t// --- Setters ---\n\n\t// Note: Defining these methods externally, because they come in a bunch\n\t// and this way their names minify.\n\n\t// Single scalar\n\n\tfunction setValue1f( gl, v ) { gl.uniform1f( this.addr, v ); }\n\tfunction setValue1i( gl, v ) { gl.uniform1i( this.addr, v ); }\n\n\t// Single float vector (from flat array or THREE.VectorN)\n\n\tfunction setValue2fv( gl, v ) {\n\n\t\tif ( v.x === undefined ) gl.uniform2fv( this.addr, v );\n\t\telse gl.uniform2f( this.addr, v.x, v.y );\n\n\t}\n\n\tfunction setValue3fv( gl, v ) {\n\n\t\tif ( v.x !== undefined )\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\t\telse if ( v.r !== undefined )\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\t\telse\n\t\t\tgl.uniform3fv( this.addr, v );\n\n\t}\n\n\tfunction setValue4fv( gl, v ) {\n\n\t\tif ( v.x === undefined ) gl.uniform4fv( this.addr, v );\n\t\telse gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t}\n\n\t// Single matrix (from flat array or MatrixN)\n\n\tfunction setValue2fm( gl, v ) {\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\n\n\t}\n\n\tfunction setValue3fm( gl, v ) {\n\n\t\tif ( v.elements === undefined ) {\n\n\t\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\t} else {\n\n\t\t\tmat3array.set( v.elements );\n\t\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\t}\n\n\t}\n\n\tfunction setValue4fm( gl, v ) {\n\n\t\tif ( v.elements === undefined ) {\n\n\t\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\t} else {\n\n\t\t\tmat4array.set( v.elements );\n\t\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\t}\n\n\t}\n\n\t// Single texture (2D / Cube)\n\n\tfunction setValueT1( gl, v, renderer ) {\n\n\t\tvar unit = renderer.allocTextureUnit();\n\t\tgl.uniform1i( this.addr, unit );\n\t\trenderer.setTexture2D( v || emptyTexture, unit );\n\n\t}\n\n\tfunction setValueT6( gl, v, renderer ) {\n\n\t\tvar unit = renderer.allocTextureUnit();\n\t\tgl.uniform1i( this.addr, unit );\n\t\trenderer.setTextureCube( v || emptyCubeTexture, unit );\n\n\t}\n\n\t// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\n\tfunction setValue2iv( gl, v ) { gl.uniform2iv( this.addr, v ); }\n\tfunction setValue3iv( gl, v ) { gl.uniform3iv( this.addr, v ); }\n\tfunction setValue4iv( gl, v ) { gl.uniform4iv( this.addr, v ); }\n\n\t// Helper to pick the right setter for the singular case\n\n\tfunction getSingularSetter( type ) {\n\n\t\tswitch ( type ) {\n\n\t\t\tcase 0x1406: return setValue1f; // FLOAT\n\t\t\tcase 0x8b50: return setValue2fv; // _VEC2\n\t\t\tcase 0x8b51: return setValue3fv; // _VEC3\n\t\t\tcase 0x8b52: return setValue4fv; // _VEC4\n\n\t\t\tcase 0x8b5a: return setValue2fm; // _MAT2\n\t\t\tcase 0x8b5b: return setValue3fm; // _MAT3\n\t\t\tcase 0x8b5c: return setValue4fm; // _MAT4\n\n\t\t\tcase 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n\t\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n\t\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n\t\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t\t}\n\n\t}\n\n\t// Array of scalars\n\n\tfunction setValue1fv( gl, v ) { gl.uniform1fv( this.addr, v ); }\n\tfunction setValue1iv( gl, v ) { gl.uniform1iv( this.addr, v ); }\n\n\t// Array of vectors (flat or from THREE classes)\n\n\tfunction setValueV2a( gl, v ) {\n\n\t\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\n\n\t}\n\n\tfunction setValueV3a( gl, v ) {\n\n\t\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\n\n\t}\n\n\tfunction setValueV4a( gl, v ) {\n\n\t\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\n\n\t}\n\n\t// Array of matrices (flat or from THREE clases)\n\n\tfunction setValueM2a( gl, v ) {\n\n\t\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\n\n\t}\n\n\tfunction setValueM3a( gl, v ) {\n\n\t\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\n\n\t}\n\n\tfunction setValueM4a( gl, v ) {\n\n\t\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\n\n\t}\n\n\t// Array of textures (2D / Cube)\n\n\tfunction setValueT1a( gl, v, renderer ) {\n\n\t\tvar n = v.length,\n\t\t\tunits = allocTexUnits( renderer, n );\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\t\trenderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t\t}\n\n\t}\n\n\tfunction setValueT6a( gl, v, renderer ) {\n\n\t\tvar n = v.length,\n\t\t\tunits = allocTexUnits( renderer, n );\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\t\trenderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t\t}\n\n\t}\n\n\t// Helper to pick the right setter for a pure (bottom-level) array\n\n\tfunction getPureArraySetter( type ) {\n\n\t\tswitch ( type ) {\n\n\t\t\tcase 0x1406: return setValue1fv; // FLOAT\n\t\t\tcase 0x8b50: return setValueV2a; // _VEC2\n\t\t\tcase 0x8b51: return setValueV3a; // _VEC3\n\t\t\tcase 0x8b52: return setValueV4a; // _VEC4\n\n\t\t\tcase 0x8b5a: return setValueM2a; // _MAT2\n\t\t\tcase 0x8b5b: return setValueM3a; // _MAT3\n\t\t\tcase 0x8b5c: return setValueM4a; // _MAT4\n\n\t\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\n\t\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\n\n\t\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\n\t\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t\t}\n\n\t}\n\n\t// --- Uniform Classes ---\n\n\tfunction SingleUniform( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n\tfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.size = activeInfo.size;\n\t\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n\tfunction StructuredUniform( id ) {\n\n\t\tthis.id = id;\n\n\t\tUniformContainer.call( this ); // mix-in\n\n\t}\n\n\tStructuredUniform.prototype.setValue = function ( gl, value ) {\n\n\t\t// Note: Don't need an extra 'renderer' parameter, since samplers\n\t\t// are not allowed in structured uniforms.\n\n\t\tvar seq = this.seq;\n\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tvar u = seq[ i ];\n\t\t\tu.setValue( gl, value[ u.id ] );\n\n\t\t}\n\n\t};\n\n\t// --- Top-level ---\n\n\t// Parser - builds up the property tree from the path strings\n\n\tvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n\t// extracts\n\t// \t- the identifier (member name or array index)\n\t//  - followed by an optional right bracket (found when array index)\n\t//  - followed by an optional left bracket or dot (type of subscript)\n\t//\n\t// Note: These portions can be read in a non-overlapping fashion and\n\t// allow straightforward parsing of the hierarchy that WebGL encodes\n\t// in the uniform names.\n\n\tfunction addUniform( container, uniformObject ) {\n\n\t\tcontainer.seq.push( uniformObject );\n\t\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n\t}\n\n\tfunction parseUniform( activeInfo, addr, container ) {\n\n\t\tvar path = activeInfo.name,\n\t\t\tpathLength = path.length;\n\n\t\t// reset RegExp object, because of the early exit of a previous run\n\t\tRePathPart.lastIndex = 0;\n\n\t\tfor ( ; ; ) {\n\n\t\t\tvar match = RePathPart.exec( path ),\n\t\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\t\tid = match[ 1 ],\n\t\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\t\tsubscript = match[ 3 ];\n\n\t\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\t\tbreak;\n\n\t\t\t} else {\n\n\t\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\t\tif ( next === undefined ) {\n\n\t\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\t\taddUniform( container, next );\n\n\t\t\t\t}\n\n\t\t\t\tcontainer = next;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Root Container\n\n\tfunction WebGLUniforms( gl, program, renderer ) {\n\n\t\tUniformContainer.call( this );\n\n\t\tthis.renderer = renderer;\n\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\t\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\t\tpath = info.name,\n\t\t\t\taddr = gl.getUniformLocation( program, path );\n\n\t\t\tparseUniform( info, addr, this );\n\n\t\t}\n\n\t}\n\n\tWebGLUniforms.prototype.setValue = function ( gl, name, value ) {\n\n\t\tvar u = this.map[ name ];\n\n\t\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\n\n\t};\n\n\tWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\t\tvar v = object[ name ];\n\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n\t};\n\n\n\t// Static interface\n\n\tWebGLUniforms.upload = function ( gl, seq, values, renderer ) {\n\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tvar u = seq[ i ],\n\t\t\t\tv = values[ u.id ];\n\n\t\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\t\tu.setValue( gl, v.value, renderer );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\t\tvar r = [];\n\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tvar u = seq[ i ];\n\t\t\tif ( u.id in values ) r.push( u );\n\n\t\t}\n\n\t\treturn r;\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tvar ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\n\tfunction Color( r, g, b ) {\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tObject.assign( Color.prototype, {\n\n\t\tisColor: true,\n\n\t\tr: 1, g: 1, b: 1,\n\n\t\tset: function ( value ) {\n\n\t\t\tif ( value && value.isColor ) {\n\n\t\t\t\tthis.copy( value );\n\n\t\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\t\tthis.setHex( value );\n\n\t\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\t\tthis.setStyle( value );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetScalar: function ( scalar ) {\n\n\t\t\tthis.r = scalar;\n\t\t\tthis.g = scalar;\n\t\t\tthis.b = scalar;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetHex: function ( hex ) {\n\n\t\t\thex = Math.floor( hex );\n\n\t\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetRGB: function ( r, g, b ) {\n\n\t\t\tthis.r = r;\n\t\t\tthis.g = g;\n\t\t\tthis.b = b;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetHSL: function () {\n\n\t\t\tfunction hue2rgb( p, q, t ) {\n\n\t\t\t\tif ( t < 0 ) t += 1;\n\t\t\t\tif ( t > 1 ) t -= 1;\n\t\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\t\treturn p;\n\n\t\t\t}\n\n\t\t\treturn function setHSL( h, s, l ) {\n\n\t\t\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\t\t\th = _Math.euclideanModulo( h, 1 );\n\t\t\t\ts = _Math.clamp( s, 0, 1 );\n\t\t\t\tl = _Math.clamp( l, 0, 1 );\n\n\t\t\t\tif ( s === 0 ) {\n\n\t\t\t\t\tthis.r = this.g = this.b = l;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tsetStyle: function ( style ) {\n\n\t\t\tfunction handleAlpha( string ) {\n\n\t\t\t\tif ( string === undefined ) return;\n\n\t\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tvar m;\n\n\t\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t\t// rgb / hsl\n\n\t\t\t\tvar color;\n\t\t\t\tvar name = m[ 1 ];\n\t\t\t\tvar components = m[ 2 ];\n\n\t\t\t\tswitch ( name ) {\n\n\t\t\t\t\tcase 'rgb':\n\t\t\t\t\tcase 'rgba':\n\n\t\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'hsl':\n\t\t\t\t\tcase 'hsla':\n\n\t\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t\t// hex color\n\n\t\t\t\tvar hex = m[ 1 ];\n\t\t\t\tvar size = hex.length;\n\n\t\t\t\tif ( size === 3 ) {\n\n\t\t\t\t\t// #ff0\n\t\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t\t// #ff0000\n\t\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( style && style.length > 0 ) {\n\n\t\t\t\t// color keywords\n\t\t\t\tvar hex = ColorKeywords[ style ];\n\n\t\t\t\tif ( hex !== undefined ) {\n\n\t\t\t\t\t// red\n\t\t\t\t\tthis.setHex( hex );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// unknown color\n\t\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t\t},\n\n\t\tcopy: function ( color ) {\n\n\t\t\tthis.r = color.r;\n\t\t\tthis.g = color.g;\n\t\t\tthis.b = color.b;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tconvertGammaToLinear: function () {\n\n\t\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\t\tthis.r = r * r;\n\t\t\tthis.g = g * g;\n\t\t\tthis.b = b * b;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tconvertLinearToGamma: function () {\n\n\t\t\tthis.r = Math.sqrt( this.r );\n\t\t\tthis.g = Math.sqrt( this.g );\n\t\t\tthis.b = Math.sqrt( this.b );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetHex: function () {\n\n\t\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t\t},\n\n\t\tgetHexString: function () {\n\n\t\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t\t},\n\n\t\tgetHSL: function ( optionalTarget ) {\n\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n\t\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\t\tvar max = Math.max( r, g, b );\n\t\t\tvar min = Math.min( r, g, b );\n\n\t\t\tvar hue, saturation;\n\t\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\t\tif ( min === max ) {\n\n\t\t\t\thue = 0;\n\t\t\t\tsaturation = 0;\n\n\t\t\t} else {\n\n\t\t\t\tvar delta = max - min;\n\n\t\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\t\tswitch ( max ) {\n\n\t\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t\t}\n\n\t\t\t\thue /= 6;\n\n\t\t\t}\n\n\t\t\thsl.h = hue;\n\t\t\thsl.s = saturation;\n\t\t\thsl.l = lightness;\n\n\t\t\treturn hsl;\n\n\t\t},\n\n\t\tgetStyle: function () {\n\n\t\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t\t},\n\n\t\toffsetHSL: function ( h, s, l ) {\n\n\t\t\tvar hsl = this.getHSL();\n\n\t\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tadd: function ( color ) {\n\n\t\t\tthis.r += color.r;\n\t\t\tthis.g += color.g;\n\t\t\tthis.b += color.b;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddColors: function ( color1, color2 ) {\n\n\t\t\tthis.r = color1.r + color2.r;\n\t\t\tthis.g = color1.g + color2.g;\n\t\t\tthis.b = color1.b + color2.b;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddScalar: function ( s ) {\n\n\t\t\tthis.r += s;\n\t\t\tthis.g += s;\n\t\t\tthis.b += s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsub: function( color ) {\n\n\t\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiply: function ( color ) {\n\n\t\t\tthis.r *= color.r;\n\t\t\tthis.g *= color.g;\n\t\t\tthis.b *= color.b;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiplyScalar: function ( s ) {\n\n\t\t\tthis.r *= s;\n\t\t\tthis.g *= s;\n\t\t\tthis.b *= s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tlerp: function ( color, alpha ) {\n\n\t\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( c ) {\n\n\t\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t\t},\n\n\t\tfromArray: function ( array, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tthis.r = array[ offset ];\n\t\t\tthis.g = array[ offset + 1 ];\n\t\t\tthis.b = array[ offset + 2 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoArray: function ( array, offset ) {\n\n\t\t\tif ( array === undefined ) array = [];\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tarray[ offset ] = this.r;\n\t\t\tarray[ offset + 1 ] = this.g;\n\t\t\tarray[ offset + 2 ] = this.b;\n\n\t\t\treturn array;\n\n\t\t},\n\n\t\ttoJSON: function () {\n\n\t\t\treturn this.getHex();\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * Uniforms library for shared webgl shaders\n\t */\n\n\tvar UniformsLib = {\n\n\t\tcommon: {\n\n\t\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\t\topacity: { value: 1.0 },\n\n\t\t\tmap: { value: null },\n\t\t\toffsetRepeat: { value: new Vector4( 0, 0, 1, 1 ) },\n\n\t\t\tspecularMap: { value: null },\n\t\t\talphaMap: { value: null },\n\n\t\t\tenvMap: { value: null },\n\t\t\tflipEnvMap: { value: - 1 },\n\t\t\treflectivity: { value: 1.0 },\n\t\t\trefractionRatio: { value: 0.98 }\n\n\t\t},\n\n\t\taomap: {\n\n\t\t\taoMap: { value: null },\n\t\t\taoMapIntensity: { value: 1 }\n\n\t\t},\n\n\t\tlightmap: {\n\n\t\t\tlightMap: { value: null },\n\t\t\tlightMapIntensity: { value: 1 }\n\n\t\t},\n\n\t\temissivemap: {\n\n\t\t\temissiveMap: { value: null }\n\n\t\t},\n\n\t\tbumpmap: {\n\n\t\t\tbumpMap: { value: null },\n\t\t\tbumpScale: { value: 1 }\n\n\t\t},\n\n\t\tnormalmap: {\n\n\t\t\tnormalMap: { value: null },\n\t\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t\t},\n\n\t\tdisplacementmap: {\n\n\t\t\tdisplacementMap: { value: null },\n\t\t\tdisplacementScale: { value: 1 },\n\t\t\tdisplacementBias: { value: 0 }\n\n\t\t},\n\n\t\troughnessmap: {\n\n\t\t\troughnessMap: { value: null }\n\n\t\t},\n\n\t\tmetalnessmap: {\n\n\t\t\tmetalnessMap: { value: null }\n\n\t\t},\n\n\t\tgradientmap: {\n\n\t\t\tgradientMap: { value: null }\n\n\t\t},\n\n\t\tfog: {\n\n\t\t\tfogDensity: { value: 0.00025 },\n\t\t\tfogNear: { value: 1 },\n\t\t\tfogFar: { value: 2000 },\n\t\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t\t},\n\n\t\tlights: {\n\n\t\t\tambientLightColor: { value: [] },\n\n\t\t\tdirectionalLights: { value: [], properties: {\n\t\t\t\tdirection: {},\n\t\t\t\tcolor: {},\n\n\t\t\t\tshadow: {},\n\t\t\t\tshadowBias: {},\n\t\t\t\tshadowRadius: {},\n\t\t\t\tshadowMapSize: {}\n\t\t\t} },\n\n\t\t\tdirectionalShadowMap: { value: [] },\n\t\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\t\tspotLights: { value: [], properties: {\n\t\t\t\tcolor: {},\n\t\t\t\tposition: {},\n\t\t\t\tdirection: {},\n\t\t\t\tdistance: {},\n\t\t\t\tconeCos: {},\n\t\t\t\tpenumbraCos: {},\n\t\t\t\tdecay: {},\n\n\t\t\t\tshadow: {},\n\t\t\t\tshadowBias: {},\n\t\t\t\tshadowRadius: {},\n\t\t\t\tshadowMapSize: {}\n\t\t\t} },\n\n\t\t\tspotShadowMap: { value: [] },\n\t\t\tspotShadowMatrix: { value: [] },\n\n\t\t\tpointLights: { value: [], properties: {\n\t\t\t\tcolor: {},\n\t\t\t\tposition: {},\n\t\t\t\tdecay: {},\n\t\t\t\tdistance: {},\n\n\t\t\t\tshadow: {},\n\t\t\t\tshadowBias: {},\n\t\t\t\tshadowRadius: {},\n\t\t\t\tshadowMapSize: {}\n\t\t\t} },\n\n\t\t\tpointShadowMap: { value: [] },\n\t\t\tpointShadowMatrix: { value: [] },\n\n\t\t\themisphereLights: { value: [], properties: {\n\t\t\t\tdirection: {},\n\t\t\t\tskyColor: {},\n\t\t\t\tgroundColor: {}\n\t\t\t} },\n\n\t\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\t\trectAreaLights: { value: [], properties: {\n\t\t\t\tcolor: {},\n\t\t\t\tposition: {},\n\t\t\t\twidth: {},\n\t\t\t\theight: {}\n\t\t\t} }\n\n\t\t},\n\n\t\tpoints: {\n\n\t\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\t\topacity: { value: 1.0 },\n\t\t\tsize: { value: 1.0 },\n\t\t\tscale: { value: 1.0 },\n\t\t\tmap: { value: null },\n\t\t\toffsetRepeat: { value: new Vector4( 0, 0, 1, 1 ) }\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Uniform Utilities\n\t */\n\n\tvar UniformsUtils = {\n\n\t\tmerge: function ( uniforms ) {\n\n\t\t\tvar merged = {};\n\n\t\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn merged;\n\n\t\t},\n\n\t\tclone: function ( uniforms_src ) {\n\n\t\t\tvar uniforms_dst = {};\n\n\t\t\tfor ( var u in uniforms_src ) {\n\n\t\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\t\tif ( parameter_src && ( parameter_src.isColor ||\n\t\t\t\t\t\tparameter_src.isMatrix3 || parameter_src.isMatrix4 ||\n\t\t\t\t\t\tparameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\n\t\t\t\t\t\tparameter_src.isTexture ) ) {\n\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\n\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn uniforms_dst;\n\n\t\t}\n\n\t};\n\n\tvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\n\n\tvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\";\n\n\tvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\n\n\tvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\";\n\n\tvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\n\tvar begin_vertex = \"\\nvec3 transformed = vec3( position );\\n\";\n\n\tvar beginnormal_vertex = \"\\nvec3 objectNormal = vec3( normal );\\n\";\n\n\tvar bsdfs = \"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat theta = acos( dot( N, V ) );\\n\\tvec2 uv = vec2(\\n\\t\\tsqrt( saturate( roughness ) ),\\n\\t\\tsaturate( theta / ( 0.5 * PI ) ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\\n\\tfloat b = 3.45068 + (4.18814 + y) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\\n\\treturn result;\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\n\n\tvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\";\n\n\tvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n\";\n\n\tvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";\n\n\tvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\";\n\n\tvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";\n\n\tvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\n\tvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\";\n\n\tvar color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\n\n\tvar color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\n\n\tvar common = \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transpose( const in mat3 v ) {\\n\\tmat3 tmp;\\n\\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\\n\\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\\n\\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\\n\\treturn tmp;\\n}\\n\";\n\n\tvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";\n\n\tvar defaultnormal_vertex = \"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\";\n\n\tvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\";\n\n\tvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\n\n\tvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";\n\n\tvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\";\n\n\tvar encodings_fragment = \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\n\n\tvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\n\n\tvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\tsampleUV.y = asin( flipNormal * reflectVec.y ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\";\n\n\tvar envmap_pars_fragment = \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\";\n\n\tvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\";\n\n\tvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\";\n\n\tvar fog_vertex = \"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\";\n\n\tvar fog_pars_vertex = \"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\";\n\n\tvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";\n\n\tvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\";\n\n\tvar gradientmap_pars_fragment = \"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\n\tvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\n\n\tvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\n\tvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\n\tvar lights_pars = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltcMat;\\tuniform sampler2D ltcMag;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\";\n\n\tvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\n\n\tvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\";\n\n\tvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\";\n\n\tvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tfloat norm = texture2D( ltcMag, uv ).a;\\n\\t\\tvec4 t = texture2D( ltcMat, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3(   1,   0, t.y ),\\n\\t\\t\\tvec3(   0, t.z,   0 ),\\n\\t\\t\\tvec3( t.w,   0, t.x )\\n\\t\\t);\\n\\t\\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";\n\n\tvar lights_template = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\";\n\n\tvar logdepthbuf_fragment = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\";\n\n\tvar logdepthbuf_pars_fragment = \"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\";\n\n\tvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\";\n\n\tvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\t#endif\\n#endif\\n\";\n\n\tvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\";\n\n\tvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\";\n\n\tvar map_particle_fragment = \"#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";\n\n\tvar map_particle_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform vec4 offsetRepeat;\\n\\tuniform sampler2D map;\\n#endif\\n\";\n\n\tvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\";\n\n\tvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\n\tvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\n\n\tvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\n\n\tvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\";\n\n\tvar normal_flip = \"#ifdef DOUBLE_SIDED\\n\\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n#else\\n\\tfloat flipNormal = 1.0;\\n#endif\\n\";\n\n\tvar normal_fragment = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal ) * flipNormal;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\n\n\tvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\";\n\n\tvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";\n\n\tvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";\n\n\tvar project_vertex = \"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\";\n\n\tvar dithering_fragment = \"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\";\n\n\tvar dithering_pars_fragment = \"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\";\n\n\tvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\";\n\n\tvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\n\tvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\n\n\tvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\";\n\n\tvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\";\n\n\tvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\";\n\n\tvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\n\tvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\";\n\n\tvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\";\n\n\tvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\n\n\tvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\n\tvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\n\tvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";\n\n\tvar tonemapping_pars_fragment = \"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";\n\n\tvar uv_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\";\n\n\tvar uv_pars_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform vec4 offsetRepeat;\\n#endif\\n\";\n\n\tvar uv_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\";\n\n\tvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\n\tvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\";\n\n\tvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\";\n\n\tvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\";\n\n\tvar cube_frag = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\";\n\n\tvar cube_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\";\n\n\tvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\";\n\n\tvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\";\n\n\tvar distanceRGBA_frag = \"uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\\n}\\n\";\n\n\tvar distanceRGBA_vert = \"varying vec4 vWorldPosition;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <skinbase_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition;\\n}\\n\";\n\n\tvar equirect_frag = \"uniform sampler2D tEquirect;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\";\n\n\tvar equirect_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\";\n\n\tvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\n\tvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\n\tvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\n\tvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\n\tvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\n\n\tvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\n\tvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\n\n\tvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\n\tvar meshphysical_frag = \"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\n\n\tvar meshphysical_vert = \"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\n\tvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\";\n\n\tvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\";\n\n\tvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\n\n\tvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\n\n\tvar shadow_frag = \"uniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\\n}\\n\";\n\n\tvar shadow_vert = \"#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n}\\n\";\n\n\tvar ShaderChunk = {\n\t\talphamap_fragment: alphamap_fragment,\n\t\talphamap_pars_fragment: alphamap_pars_fragment,\n\t\talphatest_fragment: alphatest_fragment,\n\t\taomap_fragment: aomap_fragment,\n\t\taomap_pars_fragment: aomap_pars_fragment,\n\t\tbegin_vertex: begin_vertex,\n\t\tbeginnormal_vertex: beginnormal_vertex,\n\t\tbsdfs: bsdfs,\n\t\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\t\tclipping_planes_fragment: clipping_planes_fragment,\n\t\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\t\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\t\tclipping_planes_vertex: clipping_planes_vertex,\n\t\tcolor_fragment: color_fragment,\n\t\tcolor_pars_fragment: color_pars_fragment,\n\t\tcolor_pars_vertex: color_pars_vertex,\n\t\tcolor_vertex: color_vertex,\n\t\tcommon: common,\n\t\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\t\tdefaultnormal_vertex: defaultnormal_vertex,\n\t\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\t\tdisplacementmap_vertex: displacementmap_vertex,\n\t\temissivemap_fragment: emissivemap_fragment,\n\t\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\t\tencodings_fragment: encodings_fragment,\n\t\tencodings_pars_fragment: encodings_pars_fragment,\n\t\tenvmap_fragment: envmap_fragment,\n\t\tenvmap_pars_fragment: envmap_pars_fragment,\n\t\tenvmap_pars_vertex: envmap_pars_vertex,\n\t\tenvmap_vertex: envmap_vertex,\n\t\tfog_vertex: fog_vertex,\n\t\tfog_pars_vertex: fog_pars_vertex,\n\t\tfog_fragment: fog_fragment,\n\t\tfog_pars_fragment: fog_pars_fragment,\n\t\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\t\tlightmap_fragment: lightmap_fragment,\n\t\tlightmap_pars_fragment: lightmap_pars_fragment,\n\t\tlights_lambert_vertex: lights_lambert_vertex,\n\t\tlights_pars: lights_pars,\n\t\tlights_phong_fragment: lights_phong_fragment,\n\t\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\t\tlights_physical_fragment: lights_physical_fragment,\n\t\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\t\tlights_template: lights_template,\n\t\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\t\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\t\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\t\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\t\tmap_fragment: map_fragment,\n\t\tmap_pars_fragment: map_pars_fragment,\n\t\tmap_particle_fragment: map_particle_fragment,\n\t\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\t\tmetalnessmap_fragment: metalnessmap_fragment,\n\t\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\t\tmorphnormal_vertex: morphnormal_vertex,\n\t\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\t\tmorphtarget_vertex: morphtarget_vertex,\n\t\tnormal_flip: normal_flip,\n\t\tnormal_fragment: normal_fragment,\n\t\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\t\tpacking: packing,\n\t\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\t\tproject_vertex: project_vertex,\n\t\tdithering_fragment: dithering_fragment,\n\t\tdithering_pars_fragment: dithering_pars_fragment,\n\t\troughnessmap_fragment: roughnessmap_fragment,\n\t\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\t\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\t\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\t\tshadowmap_vertex: shadowmap_vertex,\n\t\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\t\tskinbase_vertex: skinbase_vertex,\n\t\tskinning_pars_vertex: skinning_pars_vertex,\n\t\tskinning_vertex: skinning_vertex,\n\t\tskinnormal_vertex: skinnormal_vertex,\n\t\tspecularmap_fragment: specularmap_fragment,\n\t\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\t\ttonemapping_fragment: tonemapping_fragment,\n\t\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\t\tuv_pars_fragment: uv_pars_fragment,\n\t\tuv_pars_vertex: uv_pars_vertex,\n\t\tuv_vertex: uv_vertex,\n\t\tuv2_pars_fragment: uv2_pars_fragment,\n\t\tuv2_pars_vertex: uv2_pars_vertex,\n\t\tuv2_vertex: uv2_vertex,\n\t\tworldpos_vertex: worldpos_vertex,\n\n\t\tcube_frag: cube_frag,\n\t\tcube_vert: cube_vert,\n\t\tdepth_frag: depth_frag,\n\t\tdepth_vert: depth_vert,\n\t\tdistanceRGBA_frag: distanceRGBA_frag,\n\t\tdistanceRGBA_vert: distanceRGBA_vert,\n\t\tequirect_frag: equirect_frag,\n\t\tequirect_vert: equirect_vert,\n\t\tlinedashed_frag: linedashed_frag,\n\t\tlinedashed_vert: linedashed_vert,\n\t\tmeshbasic_frag: meshbasic_frag,\n\t\tmeshbasic_vert: meshbasic_vert,\n\t\tmeshlambert_frag: meshlambert_frag,\n\t\tmeshlambert_vert: meshlambert_vert,\n\t\tmeshphong_frag: meshphong_frag,\n\t\tmeshphong_vert: meshphong_vert,\n\t\tmeshphysical_frag: meshphysical_frag,\n\t\tmeshphysical_vert: meshphysical_vert,\n\t\tnormal_frag: normal_frag,\n\t\tnormal_vert: normal_vert,\n\t\tpoints_frag: points_frag,\n\t\tpoints_vert: points_vert,\n\t\tshadow_frag: shadow_frag,\n\t\tshadow_vert: shadow_vert\n\t};\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author mikael emtinger / http://gomo.se/\n\t */\n\n\tvar ShaderLib = {\n\n\t\tbasic: {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.common,\n\t\t\t\tUniformsLib.aomap,\n\t\t\t\tUniformsLib.lightmap,\n\t\t\t\tUniformsLib.fog\n\t\t\t] ),\n\n\t\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t\t},\n\n\t\tlambert: {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.common,\n\t\t\t\tUniformsLib.aomap,\n\t\t\t\tUniformsLib.lightmap,\n\t\t\t\tUniformsLib.emissivemap,\n\t\t\t\tUniformsLib.fog,\n\t\t\t\tUniformsLib.lights,\n\t\t\t\t{\n\t\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t\t}\n\t\t\t] ),\n\n\t\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t\t},\n\n\t\tphong: {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.common,\n\t\t\t\tUniformsLib.aomap,\n\t\t\t\tUniformsLib.lightmap,\n\t\t\t\tUniformsLib.emissivemap,\n\t\t\t\tUniformsLib.bumpmap,\n\t\t\t\tUniformsLib.normalmap,\n\t\t\t\tUniformsLib.displacementmap,\n\t\t\t\tUniformsLib.gradientmap,\n\t\t\t\tUniformsLib.fog,\n\t\t\t\tUniformsLib.lights,\n\t\t\t\t{\n\t\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\t\tshininess: { value: 30 }\n\t\t\t\t}\n\t\t\t] ),\n\n\t\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t\t},\n\n\t\tstandard: {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.common,\n\t\t\t\tUniformsLib.aomap,\n\t\t\t\tUniformsLib.lightmap,\n\t\t\t\tUniformsLib.emissivemap,\n\t\t\t\tUniformsLib.bumpmap,\n\t\t\t\tUniformsLib.normalmap,\n\t\t\t\tUniformsLib.displacementmap,\n\t\t\t\tUniformsLib.roughnessmap,\n\t\t\t\tUniformsLib.metalnessmap,\n\t\t\t\tUniformsLib.fog,\n\t\t\t\tUniformsLib.lights,\n\t\t\t\t{\n\t\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\t\troughness: { value: 0.5 },\n\t\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t\t}\n\t\t\t] ),\n\n\t\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t\t},\n\n\t\tpoints: {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.points,\n\t\t\t\tUniformsLib.fog\n\t\t\t] ),\n\n\t\t\tvertexShader: ShaderChunk.points_vert,\n\t\t\tfragmentShader: ShaderChunk.points_frag\n\n\t\t},\n\n\t\tdashed: {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.common,\n\t\t\t\tUniformsLib.fog,\n\t\t\t\t{\n\t\t\t\t\tscale: { value: 1 },\n\t\t\t\t\tdashSize: { value: 1 },\n\t\t\t\t\ttotalSize: { value: 2 }\n\t\t\t\t}\n\t\t\t] ),\n\n\t\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t\t},\n\n\t\tdepth: {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.common,\n\t\t\t\tUniformsLib.displacementmap\n\t\t\t] ),\n\n\t\t\tvertexShader: ShaderChunk.depth_vert,\n\t\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t\t},\n\n\t\tnormal: {\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.common,\n\t\t\t\tUniformsLib.bumpmap,\n\t\t\t\tUniformsLib.normalmap,\n\t\t\t\tUniformsLib.displacementmap,\n\t\t\t\t{\n\t\t\t\t\topacity: { value: 1.0 }\n\t\t\t\t}\n\t\t\t] ),\n\n\t\t\tvertexShader: ShaderChunk.normal_vert,\n\t\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t\t},\n\n\t\t/* -------------------------------------------------------------------------\n\t\t//\tCube map shader\n\t\t ------------------------------------------------------------------------- */\n\n\t\tcube: {\n\n\t\t\tuniforms: {\n\t\t\t\ttCube: { value: null },\n\t\t\t\ttFlip: { value: - 1 },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\n\t\t\tvertexShader: ShaderChunk.cube_vert,\n\t\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t\t},\n\n\t\t/* -------------------------------------------------------------------------\n\t\t//\tCube map shader\n\t\t ------------------------------------------------------------------------- */\n\n\t\tequirect: {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t\ttFlip: { value: - 1 }\n\t\t\t},\n\n\t\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t\t},\n\n\t\tdistanceRGBA: {\n\n\t\t\tuniforms: {\n\t\t\t\tlightPos: { value: new Vector3() }\n\t\t\t},\n\n\t\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t\t}\n\n\t};\n\n\tShaderLib.physical = {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tShaderLib.standard.uniforms,\n\t\t\t{\n\t\t\t\tclearCoat: { value: 0 },\n\t\t\t\tclearCoatRoughness: { value: 0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t};\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t */\n\n\tfunction Box2( min, max ) {\n\n\t\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\t\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n\t}\n\n\tObject.assign( Box2.prototype, {\n\n\t\tset: function ( min, max ) {\n\n\t\t\tthis.min.copy( min );\n\t\t\tthis.max.copy( max );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromPoints: function ( points ) {\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromCenterAndSize: function () {\n\n\t\t\tvar v1 = new Vector2();\n\n\t\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\t\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( box ) {\n\n\t\t\tthis.min.copy( box.min );\n\t\t\tthis.max.copy( box.max );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeEmpty: function () {\n\n\t\t\tthis.min.x = this.min.y = + Infinity;\n\t\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tisEmpty: function () {\n\n\t\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t\t},\n\n\t\tgetCenter: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector2();\n\t\t\treturn this.isEmpty() ? result.set( 0, 0 ) : result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t\t},\n\n\t\tgetSize: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector2();\n\t\t\treturn this.isEmpty() ? result.set( 0, 0 ) : result.subVectors( this.max, this.min );\n\n\t\t},\n\n\t\texpandByPoint: function ( point ) {\n\n\t\t\tthis.min.min( point );\n\t\t\tthis.max.max( point );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\texpandByVector: function ( vector ) {\n\n\t\t\tthis.min.sub( vector );\n\t\t\tthis.max.add( vector );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\texpandByScalar: function ( scalar ) {\n\n\t\t\tthis.min.addScalar( - scalar );\n\t\t\tthis.max.addScalar( scalar );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcontainsPoint: function ( point ) {\n\n\t\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t\t},\n\n\t\tcontainsBox: function ( box ) {\n\n\t\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t\t},\n\n\t\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t\t// This can potentially have a divide by zero if the box\n\t\t\t// has a size dimension of 0.\n\n\t\t\tvar result = optionalTarget || new Vector2();\n\n\t\t\treturn result.set(\n\t\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t\t);\n\n\t\t},\n\n\t\tintersectsBox: function ( box ) {\n\n\t\t\t// using 4 splitting planes to rule out intersections\n\n\t\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t\t},\n\n\t\tclampPoint: function ( point, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector2();\n\t\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t\t},\n\n\t\tdistanceToPoint: function () {\n\n\t\t\tvar v1 = new Vector2();\n\n\t\t\treturn function distanceToPoint( point ) {\n\n\t\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tintersect: function ( box ) {\n\n\t\t\tthis.min.max( box.min );\n\t\t\tthis.max.min( box.max );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunion: function ( box ) {\n\n\t\t\tthis.min.min( box.min );\n\t\t\tthis.max.max( box.max );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttranslate: function ( offset ) {\n\n\t\t\tthis.min.add( offset );\n\t\t\tthis.max.add( offset );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( box ) {\n\n\t\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction LensFlarePlugin( renderer, flares ) {\n\n\t\tvar gl = renderer.context;\n\t\tvar state = renderer.state;\n\n\t\tvar vertexBuffer, elementBuffer;\n\t\tvar shader, program, attributes, uniforms;\n\n\t\tvar tempTexture, occlusionTexture;\n\n\t\tfunction init() {\n\n\t\t\tvar vertices = new Float32Array( [\n\t\t\t\t- 1, - 1,  0, 0,\n\t\t\t\t 1, - 1,  1, 0,\n\t\t\t\t 1,  1,  1, 1,\n\t\t\t\t- 1,  1,  0, 1\n\t\t\t] );\n\n\t\t\tvar faces = new Uint16Array( [\n\t\t\t\t0, 1, 2,\n\t\t\t\t0, 2, 3\n\t\t\t] );\n\n\t\t\t// buffers\n\n\t\t\tvertexBuffer     = gl.createBuffer();\n\t\t\telementBuffer    = gl.createBuffer();\n\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t\t// textures\n\n\t\t\ttempTexture      = gl.createTexture();\n\t\t\tocclusionTexture = gl.createTexture();\n\n\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\t\tshader = {\n\n\t\t\t\tvertexShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\n\t\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\t\"if ( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\n\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\n\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" ),\n\n\t\t\t\tfragmentShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t// pink square\n\n\t\t\t\t\t\t\"if ( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\n\n\t\t\t\t\t\t// restore\n\n\t\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t\t// flare\n\n\t\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" )\n\n\t\t\t};\n\n\t\t\tprogram = createProgram( shader );\n\n\t\t\tattributes = {\n\t\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\n\t\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\n\t\t\t};\n\n\t\t\tuniforms = {\n\t\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\n\t\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\n\t\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\n\t\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\n\t\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\n\t\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\n\t\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\n\t\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\n\t\t\t};\n\n\t\t}\n\n\t\t/*\n\t\t * Render lens flares\n\t\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\n\t\t *         reads these back and calculates occlusion.\n\t\t */\n\n\t\tthis.render = function ( scene, camera, viewport ) {\n\n\t\t\tif ( flares.length === 0 ) return;\n\n\t\t\tvar tempPosition = new Vector3();\n\n\t\t\tvar invAspect = viewport.w / viewport.z,\n\t\t\t\thalfViewportWidth = viewport.z * 0.5,\n\t\t\t\thalfViewportHeight = viewport.w * 0.5;\n\n\t\t\tvar size = 16 / viewport.w,\n\t\t\t\tscale = new Vector2( size * invAspect, size );\n\n\t\t\tvar screenPosition = new Vector3( 1, 1, 0 ),\n\t\t\t\tscreenPositionPixels = new Vector2( 1, 1 );\n\n\t\t\tvar validArea = new Box2();\n\n\t\t\tvalidArea.min.set( viewport.x, viewport.y );\n\t\t\tvalidArea.max.set( viewport.x + ( viewport.z - 16 ), viewport.y + ( viewport.w - 16 ) );\n\n\t\t\tif ( program === undefined ) {\n\n\t\t\t\tinit();\n\n\t\t\t}\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tstate.initAttributes();\n\t\t\tstate.enableAttribute( attributes.vertex );\n\t\t\tstate.enableAttribute( attributes.uv );\n\t\t\tstate.disableUnusedAttributes();\n\n\t\t\t// loop through all lens flares to update their occlusion and positions\n\t\t\t// setup gl and common used attribs/uniforms\n\n\t\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\n\t\t\tgl.uniform1i( uniforms.map, 1 );\n\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\t\tstate.disable( gl.CULL_FACE );\n\t\t\tstate.buffers.depth.setMask( false );\n\n\t\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\n\n\t\t\t\tsize = 16 / viewport.w;\n\t\t\t\tscale.set( size * invAspect, size );\n\n\t\t\t\t// calc object screen position\n\n\t\t\t\tvar flare = flares[ i ];\n\n\t\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\n\n\t\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\n\t\t\t\ttempPosition.applyMatrix4( camera.projectionMatrix );\n\n\t\t\t\t// setup arrays for gl programs\n\n\t\t\t\tscreenPosition.copy( tempPosition );\n\n\t\t\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\n\n\t\t\t\tscreenPositionPixels.x = viewport.x + ( screenPosition.x * halfViewportWidth ) + halfViewportWidth - 8;\n\t\t\t\tscreenPositionPixels.y = viewport.y + ( screenPosition.y * halfViewportHeight ) + halfViewportHeight - 8;\n\n\t\t\t\t// screen cull\n\n\t\t\t\tif ( validArea.containsPoint( screenPositionPixels ) === true ) {\n\n\t\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t\t// render pink quad\n\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\n\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\n\t\t\t\t\tstate.disable( gl.BLEND );\n\t\t\t\t\tstate.enable( gl.DEPTH_TEST );\n\n\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t\t// restore graphics\n\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\n\t\t\t\t\tstate.disable( gl.DEPTH_TEST );\n\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t\t// update object positions\n\n\t\t\t\t\tflare.positionScreen.copy( screenPosition );\n\n\t\t\t\t\tif ( flare.customUpdateCallback ) {\n\n\t\t\t\t\t\tflare.customUpdateCallback( flare );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tflare.updateLensFlares();\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// render flares\n\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\n\t\t\t\t\tstate.enable( gl.BLEND );\n\n\t\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\n\n\t\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\n\n\t\t\t\t\t\t\tscreenPosition.x = sprite.x;\n\t\t\t\t\t\t\tscreenPosition.y = sprite.y;\n\t\t\t\t\t\t\tscreenPosition.z = sprite.z;\n\n\t\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\n\n\t\t\t\t\t\t\tscale.x = size * invAspect;\n\t\t\t\t\t\t\tscale.y = size;\n\n\t\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\t\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\n\n\t\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\n\t\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\n\n\t\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\n\t\t\t\t\t\t\trenderer.setTexture2D( sprite.texture, 1 );\n\n\t\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restore gl\n\n\t\t\tstate.enable( gl.CULL_FACE );\n\t\t\tstate.enable( gl.DEPTH_TEST );\n\t\t\tstate.buffers.depth.setMask( true );\n\n\t\t\trenderer.resetGLState();\n\n\t\t};\n\n\t\tfunction createProgram( shader ) {\n\n\t\t\tvar program = gl.createProgram();\n\n\t\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\t\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\n\t\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\n\n\t\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\n\t\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\n\n\t\t\tgl.compileShader( fragmentShader );\n\t\t\tgl.compileShader( vertexShader );\n\n\t\t\tgl.attachShader( program, fragmentShader );\n\t\t\tgl.attachShader( program, vertexShader );\n\n\t\t\tgl.linkProgram( program );\n\n\t\t\treturn program;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction SpritePlugin( renderer, sprites ) {\n\n\t\tvar gl = renderer.context;\n\t\tvar state = renderer.state;\n\n\t\tvar vertexBuffer, elementBuffer;\n\t\tvar program, attributes, uniforms;\n\n\t\tvar texture;\n\n\t\t// decompose matrixWorld\n\n\t\tvar spritePosition = new Vector3();\n\t\tvar spriteRotation = new Quaternion();\n\t\tvar spriteScale = new Vector3();\n\n\t\tfunction init() {\n\n\t\t\tvar vertices = new Float32Array( [\n\t\t\t\t- 0.5, - 0.5,  0, 0,\n\t\t\t\t  0.5, - 0.5,  1, 0,\n\t\t\t\t  0.5,   0.5,  1, 1,\n\t\t\t\t- 0.5,   0.5,  0, 1\n\t\t\t] );\n\n\t\t\tvar faces = new Uint16Array( [\n\t\t\t\t0, 1, 2,\n\t\t\t\t0, 2, 3\n\t\t\t] );\n\n\t\t\tvertexBuffer  = gl.createBuffer();\n\t\t\telementBuffer = gl.createBuffer();\n\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t\tprogram = createProgram();\n\n\t\t\tattributes = {\n\t\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\n\t\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\n\t\t\t};\n\n\t\t\tuniforms = {\n\t\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\n\t\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\n\t\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\n\n\t\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\n\t\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\n\t\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\n\n\t\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\n\t\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\n\t\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\n\t\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\n\t\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\n\n\t\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\n\t\t\t};\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = 8;\n\t\t\tcanvas.height = 8;\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.fillStyle = 'white';\n\t\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\t\ttexture = new Texture( canvas );\n\t\t\ttexture.needsUpdate = true;\n\n\t\t}\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tif ( sprites.length === 0 ) return;\n\n\t\t\t// setup gl\n\n\t\t\tif ( program === undefined ) {\n\n\t\t\t\tinit();\n\n\t\t\t}\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tstate.initAttributes();\n\t\t\tstate.enableAttribute( attributes.position );\n\t\t\tstate.enableAttribute( attributes.uv );\n\t\t\tstate.disableUnusedAttributes();\n\n\t\t\tstate.disable( gl.CULL_FACE );\n\t\t\tstate.enable( gl.BLEND );\n\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\t\tvar oldFogType = 0;\n\t\t\tvar sceneFogType = 0;\n\t\t\tvar fog = scene.fog;\n\n\t\t\tif ( fog ) {\n\n\t\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\t\tif ( fog.isFog ) {\n\n\t\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\t\toldFogType = 1;\n\t\t\t\t\tsceneFogType = 1;\n\n\t\t\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\t\toldFogType = 2;\n\t\t\t\t\tsceneFogType = 2;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\t\toldFogType = 0;\n\t\t\t\tsceneFogType = 0;\n\n\t\t\t}\n\n\n\t\t\t// update positions and sort\n\n\t\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\t\tvar sprite = sprites[ i ];\n\n\t\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\n\n\t\t\t}\n\n\t\t\tsprites.sort( painterSortStable );\n\n\t\t\t// render all sprites\n\n\t\t\tvar scale = [];\n\n\t\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\t\tvar sprite = sprites[ i ];\n\t\t\t\tvar material = sprite.material;\n\n\t\t\t\tif ( material.visible === false ) continue;\n\n\t\t\t\tsprite.onBeforeRender( renderer, scene, camera, undefined, material, undefined );\n\n\t\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\n\n\t\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\t\tvar fogType = 0;\n\n\t\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\t\tfogType = sceneFogType;\n\n\t\t\t\t}\n\n\t\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\t\toldFogType = fogType;\n\n\t\t\t\t}\n\n\t\t\t\tif ( material.map !== null ) {\n\n\t\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t\t}\n\n\t\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\t\t\t\tstate.buffers.depth.setTest( material.depthTest );\n\t\t\t\tstate.buffers.depth.setMask( material.depthWrite );\n\n\t\t\t\tif ( material.map ) {\n\n\t\t\t\t\trenderer.setTexture2D( material.map, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderer.setTexture2D( texture, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\tsprite.onAfterRender( renderer, scene, camera, undefined, material, undefined );\n\n\t\t\t}\n\n\t\t\t// restore gl\n\n\t\t\tstate.enable( gl.CULL_FACE );\n\n\t\t\trenderer.resetGLState();\n\n\t\t};\n\n\t\tfunction createProgram() {\n\n\t\t\tvar program = gl.createProgram();\n\n\t\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t\t'#define SHADER_NAME ' + 'SpriteMaterial',\n\n\t\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t\t'uniform float rotation;',\n\t\t\t\t'uniform vec2 scale;',\n\t\t\t\t'uniform vec2 uvOffset;',\n\t\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t\t'attribute vec2 position;',\n\t\t\t\t'attribute vec2 uv;',\n\n\t\t\t\t'varying vec2 vUV;',\n\n\t\t\t\t'void main() {',\n\n\t\t\t\t\t'vUV = uvOffset + uv * uvScale;',\n\n\t\t\t\t\t'vec2 alignedPosition = position * scale;',\n\n\t\t\t\t\t'vec2 rotatedPosition;',\n\t\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t\t\t'vec4 finalPosition;',\n\n\t\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t\t\t'finalPosition.xy += rotatedPosition;',\n\t\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\n\n\t\t\t\t\t'gl_Position = finalPosition;',\n\n\t\t\t\t'}'\n\n\t\t\t].join( '\\n' ) );\n\n\t\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t\t'#define SHADER_NAME ' + 'SpriteMaterial',\n\n\t\t\t\t'uniform vec3 color;',\n\t\t\t\t'uniform sampler2D map;',\n\t\t\t\t'uniform float opacity;',\n\n\t\t\t\t'uniform int fogType;',\n\t\t\t\t'uniform vec3 fogColor;',\n\t\t\t\t'uniform float fogDensity;',\n\t\t\t\t'uniform float fogNear;',\n\t\t\t\t'uniform float fogFar;',\n\t\t\t\t'uniform float alphaTest;',\n\n\t\t\t\t'varying vec2 vUV;',\n\n\t\t\t\t'void main() {',\n\n\t\t\t\t\t'vec4 texture = texture2D( map, vUV );',\n\n\t\t\t\t\t'if ( texture.a < alphaTest ) discard;',\n\n\t\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t\t\t'if ( fogType > 0 ) {',\n\n\t\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\n\t\t\t\t\t\t'float fogFactor = 0.0;',\n\n\t\t\t\t\t\t'if ( fogType == 1 ) {',\n\n\t\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\n\n\t\t\t\t\t\t'} else {',\n\n\t\t\t\t\t\t\t'const float LOG2 = 1.442695;',\n\t\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\n\t\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t\t\t\t'}',\n\n\t\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\n\n\t\t\t\t\t'}',\n\n\t\t\t\t'}'\n\n\t\t\t].join( '\\n' ) );\n\n\t\t\tgl.compileShader( vertexShader );\n\t\t\tgl.compileShader( fragmentShader );\n\n\t\t\tgl.attachShader( program, vertexShader );\n\t\t\tgl.attachShader( program, fragmentShader );\n\n\t\t\tgl.linkProgram( program );\n\n\t\t\treturn program;\n\n\t\t}\n\n\t\tfunction painterSortStable( a, b ) {\n\n\t\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t\t} else if ( a.z !== b.z ) {\n\n\t\t\t\treturn b.z - a.z;\n\n\t\t\t} else {\n\n\t\t\t\treturn b.id - a.id;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tvar materialId = 0;\n\n\tfunction Material() {\n\n\t\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Material';\n\n\t\tthis.fog = true;\n\t\tthis.lights = true;\n\n\t\tthis.blending = NormalBlending;\n\t\tthis.side = FrontSide;\n\t\tthis.shading = SmoothShading; // THREE.FlatShading, THREE.SmoothShading\n\t\tthis.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\t\tthis.opacity = 1;\n\t\tthis.transparent = false;\n\n\t\tthis.blendSrc = SrcAlphaFactor;\n\t\tthis.blendDst = OneMinusSrcAlphaFactor;\n\t\tthis.blendEquation = AddEquation;\n\t\tthis.blendSrcAlpha = null;\n\t\tthis.blendDstAlpha = null;\n\t\tthis.blendEquationAlpha = null;\n\n\t\tthis.depthFunc = LessEqualDepth;\n\t\tthis.depthTest = true;\n\t\tthis.depthWrite = true;\n\n\t\tthis.clippingPlanes = null;\n\t\tthis.clipIntersection = false;\n\t\tthis.clipShadows = false;\n\n\t\tthis.colorWrite = true;\n\n\t\tthis.precision = null; // override the renderer's default precision for this material\n\n\t\tthis.polygonOffset = false;\n\t\tthis.polygonOffsetFactor = 0;\n\t\tthis.polygonOffsetUnits = 0;\n\n\t\tthis.dithering = false;\n\n\t\tthis.alphaTest = 0;\n\t\tthis.premultipliedAlpha = false;\n\n\t\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\t\tthis.visible = true;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\tObject.assign( Material.prototype, EventDispatcher.prototype, {\n\n\t\tisMaterial: true,\n\n\t\tonBeforeCompile: function () {},\n\n\t\tsetValues: function ( values ) {\n\n\t\t\tif ( values === undefined ) return;\n\n\t\t\tfor ( var key in values ) {\n\n\t\t\t\tvar newValue = values[ key ];\n\n\t\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tvar currentValue = this[ key ];\n\n\t\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t\t} else if ( key === 'overdraw' ) {\n\n\t\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\n\t\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\tvar isRoot = meta === undefined;\n\n\t\t\tif ( isRoot ) {\n\n\t\t\t\tmeta = {\n\t\t\t\t\ttextures: {},\n\t\t\t\t\timages: {}\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar data = {\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: 4.5,\n\t\t\t\t\ttype: 'Material',\n\t\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// standard Material serialization\n\t\t\tdata.uuid = this.uuid;\n\t\t\tdata.type = this.type;\n\n\t\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\t\tif ( this.clearCoat !== undefined ) data.clearCoat = this.clearCoat;\n\t\t\tif ( this.clearCoatRoughness !== undefined ) data.clearCoatRoughness = this.clearCoatRoughness;\n\n\t\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t\t}\n\t\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t\t}\n\t\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t\t}\n\t\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\n\t\t\t}\n\n\t\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\t\tif ( this.shading !== SmoothShading ) data.shading = this.shading;\n\t\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\t\tdata.depthFunc = this.depthFunc;\n\t\t\tdata.depthTest = this.depthTest;\n\t\t\tdata.depthWrite = this.depthWrite;\n\n\t\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\t\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\t\tdata.skinning = this.skinning;\n\t\t\tdata.morphTargets = this.morphTargets;\n\n\t\t\tdata.dithering = this.dithering;\n\n\t\t\t// TODO: Copied from Object3D.toJSON\n\n\t\t\tfunction extractFromCache( cache ) {\n\n\t\t\t\tvar values = [];\n\n\t\t\t\tfor ( var key in cache ) {\n\n\t\t\t\t\tvar data = cache[ key ];\n\t\t\t\t\tdelete data.metadata;\n\t\t\t\t\tvalues.push( data );\n\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\n\t\t\t}\n\n\t\t\tif ( isRoot ) {\n\n\t\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tthis.name = source.name;\n\n\t\t\tthis.fog = source.fog;\n\t\t\tthis.lights = source.lights;\n\n\t\t\tthis.blending = source.blending;\n\t\t\tthis.side = source.side;\n\t\t\tthis.shading = source.shading;\n\t\t\tthis.vertexColors = source.vertexColors;\n\n\t\t\tthis.opacity = source.opacity;\n\t\t\tthis.transparent = source.transparent;\n\n\t\t\tthis.blendSrc = source.blendSrc;\n\t\t\tthis.blendDst = source.blendDst;\n\t\t\tthis.blendEquation = source.blendEquation;\n\t\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\t\tthis.depthFunc = source.depthFunc;\n\t\t\tthis.depthTest = source.depthTest;\n\t\t\tthis.depthWrite = source.depthWrite;\n\n\t\t\tthis.colorWrite = source.colorWrite;\n\n\t\t\tthis.precision = source.precision;\n\n\t\t\tthis.polygonOffset = source.polygonOffset;\n\t\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\t\tthis.dithering = source.dithering;\n\n\t\t\tthis.alphaTest = source.alphaTest;\n\n\t\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\t\tthis.overdraw = source.overdraw;\n\n\t\t\tthis.visible = source.visible;\n\t\t\tthis.clipShadows = source.clipShadows;\n\t\t\tthis.clipIntersection = source.clipIntersection;\n\n\t\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\t\tdstPlanes = null;\n\n\t\t\tif ( srcPlanes !== null ) {\n\n\t\t\t\tvar n = srcPlanes.length;\n\t\t\t\tdstPlanes = new Array( n );\n\n\t\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t\tthis.clippingPlanes = dstPlanes;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdispose: function () {\n\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * parameters = {\n\t *  defines: { \"label\" : \"value\" },\n\t *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n\t *\n\t *  fragmentShader: <string>,\n\t *  vertexShader: <string>,\n\t *\n\t *  wireframe: <boolean>,\n\t *  wireframeLinewidth: <float>,\n\t *\n\t *  lights: <bool>,\n\t *\n\t *  skinning: <bool>,\n\t *  morphTargets: <bool>,\n\t *  morphNormals: <bool>\n\t * }\n\t */\n\n\tfunction ShaderMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'ShaderMaterial';\n\n\t\tthis.defines = {};\n\t\tthis.uniforms = {};\n\n\t\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\t\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\t\tthis.linewidth = 1;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false; // set to use scene fog\n\t\tthis.lights = false; // set to use scene lights\n\t\tthis.clipping = false; // set to use user-defined clipping planes\n\n\t\tthis.skinning = false; // set to use skinning attribute streams\n\t\tthis.morphTargets = false; // set to use morph targets\n\t\tthis.morphNormals = false; // set to use morph normals\n\n\t\tthis.extensions = {\n\t\t\tderivatives: false, // set to use derivatives\n\t\t\tfragDepth: false, // set to use fragment depth values\n\t\t\tdrawBuffers: false, // set to use draw buffers\n\t\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t\t};\n\n\t\t// When rendered geometry doesn't include these attributes but the material does,\n\t\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\t\tthis.defaultAttributeValues = {\n\t\t\t'color': [ 1, 1, 1 ],\n\t\t\t'uv': [ 0, 0 ],\n\t\t\t'uv2': [ 0, 0 ]\n\t\t};\n\n\t\tthis.index0AttributeName = undefined;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t\tthis.setValues( parameters );\n\n\t\t}\n\n\t}\n\n\tShaderMaterial.prototype = Object.create( Material.prototype );\n\tShaderMaterial.prototype.constructor = ShaderMaterial;\n\n\tShaderMaterial.prototype.isShaderMaterial = true;\n\n\tShaderMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.fragmentShader = source.fragmentShader;\n\t\tthis.vertexShader = source.vertexShader;\n\n\t\tthis.uniforms = UniformsUtils.clone( source.uniforms );\n\n\t\tthis.defines = source.defines;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.lights = source.lights;\n\t\tthis.clipping = source.clipping;\n\n\t\tthis.skinning = source.skinning;\n\n\t\tthis.morphTargets = source.morphTargets;\n\t\tthis.morphNormals = source.morphNormals;\n\n\t\tthis.extensions = source.extensions;\n\n\t\treturn this;\n\n\t};\n\n\tShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\t\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\t\tdata.uniforms = this.uniforms;\n\t\tdata.vertexShader = this.vertexShader;\n\t\tdata.fragmentShader = this.fragmentShader;\n\n\t\treturn data;\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author bhouston / https://clara.io\n\t * @author WestLangley / http://github.com/WestLangley\n\t *\n\t * parameters = {\n\t *\n\t *  opacity: <float>,\n\t *\n\t *  map: new THREE.Texture( <Image> ),\n\t *\n\t *  alphaMap: new THREE.Texture( <Image> ),\n\t *\n\t *  displacementMap: new THREE.Texture( <Image> ),\n\t *  displacementScale: <float>,\n\t *  displacementBias: <float>,\n\t *\n\t *  wireframe: <boolean>,\n\t *  wireframeLinewidth: <float>\n\t * }\n\t */\n\n\tfunction MeshDepthMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'MeshDepthMaterial';\n\n\t\tthis.depthPacking = BasicDepthPacking;\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false;\n\t\tthis.lights = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tMeshDepthMaterial.prototype = Object.create( Material.prototype );\n\tMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\n\tMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\n\tMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.depthPacking = source.depthPacking;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t * @author WestLangley / http://github.com/WestLangley\n\t */\n\n\tfunction Box3( min, max ) {\n\n\t\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\t\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n\t}\n\n\tObject.assign( Box3.prototype, {\n\n\t\tisBox3: true,\n\n\t\tset: function ( min, max ) {\n\n\t\t\tthis.min.copy( min );\n\t\t\tthis.max.copy( max );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromArray: function ( array ) {\n\n\t\t\tvar minX = + Infinity;\n\t\t\tvar minY = + Infinity;\n\t\t\tvar minZ = + Infinity;\n\n\t\t\tvar maxX = - Infinity;\n\t\t\tvar maxY = - Infinity;\n\t\t\tvar maxZ = - Infinity;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar x = array[ i ];\n\t\t\t\tvar y = array[ i + 1 ];\n\t\t\t\tvar z = array[ i + 2 ];\n\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\t\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t\t}\n\n\t\t\tthis.min.set( minX, minY, minZ );\n\t\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\t\tvar minX = + Infinity;\n\t\t\tvar minY = + Infinity;\n\t\t\tvar minZ = + Infinity;\n\n\t\t\tvar maxX = - Infinity;\n\t\t\tvar maxY = - Infinity;\n\t\t\tvar maxZ = - Infinity;\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tvar x = attribute.getX( i );\n\t\t\t\tvar y = attribute.getY( i );\n\t\t\t\tvar z = attribute.getZ( i );\n\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\t\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t\t}\n\n\t\t\tthis.min.set( minX, minY, minZ );\n\t\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromPoints: function ( points ) {\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromCenterAndSize: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tsetFromObject: function ( object ) {\n\n\t\t\tthis.makeEmpty();\n\n\t\t\treturn this.expandByObject( object );\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( box ) {\n\n\t\t\tthis.min.copy( box.min );\n\t\t\tthis.max.copy( box.max );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmakeEmpty: function () {\n\n\t\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tisEmpty: function () {\n\n\t\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t\t},\n\n\t\tgetCenter: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\treturn this.isEmpty() ? result.set( 0, 0, 0 ) : result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t\t},\n\n\t\tgetSize: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\treturn this.isEmpty() ? result.set( 0, 0, 0 ) : result.subVectors( this.max, this.min );\n\n\t\t},\n\n\t\texpandByPoint: function ( point ) {\n\n\t\t\tthis.min.min( point );\n\t\t\tthis.max.max( point );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\texpandByVector: function ( vector ) {\n\n\t\t\tthis.min.sub( vector );\n\t\t\tthis.max.add( vector );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\texpandByScalar: function ( scalar ) {\n\n\t\t\tthis.min.addScalar( - scalar );\n\t\t\tthis.max.addScalar( scalar );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\texpandByObject: function () {\n\n\t\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t\t// accounting for both the object's, and children's, world transforms\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function expandByObject( object ) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\t\tobject.traverse( function ( node ) {\n\n\t\t\t\t\tvar i, l;\n\n\t\t\t\t\tvar geometry = node.geometry;\n\n\t\t\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\t\t\tfor ( i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\t\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\t\t\tvar attribute = geometry.attributes.position;\n\n\t\t\t\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\t\t\t\tfor ( i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\t\tv1.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tcontainsPoint: function ( point ) {\n\n\t\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t\t},\n\n\t\tcontainsBox: function ( box ) {\n\n\t\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t\t},\n\n\t\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t\t// This can potentially have a divide by zero if the box\n\t\t\t// has a size dimension of 0.\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\treturn result.set(\n\t\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t\t);\n\n\t\t},\n\n\t\tintersectsBox: function ( box ) {\n\n\t\t\t// using 6 splitting planes to rule out intersections.\n\t\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t\t},\n\n\t\tintersectsSphere: ( function () {\n\n\t\t\tvar closestPoint = new Vector3();\n\n\t\t\treturn function intersectsSphere( sphere ) {\n\n\t\t\t\t// Find the point on the AABB closest to the sphere center.\n\t\t\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t\t\t};\n\n\t\t} )(),\n\n\t\tintersectsPlane: function ( plane ) {\n\n\t\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\t\tvar min, max;\n\n\t\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t\t} else {\n\n\t\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t\t}\n\n\t\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t\t} else {\n\n\t\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t\t}\n\n\t\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t\t} else {\n\n\t\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t\t}\n\n\t\t\treturn ( min <= plane.constant && max >= plane.constant );\n\n\t\t},\n\n\t\tclampPoint: function ( point, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t\t},\n\n\t\tdistanceToPoint: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function distanceToPoint( point ) {\n\n\t\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tgetBoundingSphere: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function getBoundingSphere( optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Sphere();\n\n\t\t\t\tthis.getCenter( result.center );\n\n\t\t\t\tresult.radius = this.getSize( v1 ).length() * 0.5;\n\n\t\t\t\treturn result;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tintersect: function ( box ) {\n\n\t\t\tthis.min.max( box.min );\n\t\t\tthis.max.min( box.max );\n\n\t\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\t\tif( this.isEmpty() ) this.makeEmpty();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunion: function ( box ) {\n\n\t\t\tthis.min.min( box.min );\n\t\t\tthis.max.max( box.max );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tapplyMatrix4: function () {\n\n\t\t\tvar points = [\n\t\t\t\tnew Vector3(),\n\t\t\t\tnew Vector3(),\n\t\t\t\tnew Vector3(),\n\t\t\t\tnew Vector3(),\n\t\t\t\tnew Vector3(),\n\t\t\t\tnew Vector3(),\n\t\t\t\tnew Vector3(),\n\t\t\t\tnew Vector3()\n\t\t\t];\n\n\t\t\treturn function applyMatrix4( matrix ) {\n\n\t\t\t\t// transform of empty box is an empty box.\n\t\t\t\tif( this.isEmpty() ) return this;\n\n\t\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\n\n\t\t\t\tthis.setFromPoints( points );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttranslate: function ( offset ) {\n\n\t\t\tthis.min.add( offset );\n\t\t\tthis.max.add( offset );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( box ) {\n\n\t\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Sphere( center, radius ) {\n\n\t\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\t\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n\t}\n\n\tObject.assign( Sphere.prototype, {\n\n\t\tset: function ( center, radius ) {\n\n\t\t\tthis.center.copy( center );\n\t\t\tthis.radius = radius;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromPoints: function () {\n\n\t\t\tvar box = new Box3();\n\n\t\t\treturn function setFromPoints( points, optionalCenter ) {\n\n\t\t\t\tvar center = this.center;\n\n\t\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbox.setFromPoints( points ).getCenter( center );\n\n\t\t\t\t}\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( sphere ) {\n\n\t\t\tthis.center.copy( sphere.center );\n\t\t\tthis.radius = sphere.radius;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tempty: function () {\n\n\t\t\treturn ( this.radius <= 0 );\n\n\t\t},\n\n\t\tcontainsPoint: function ( point ) {\n\n\t\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t\t},\n\n\t\tdistanceToPoint: function ( point ) {\n\n\t\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t\t},\n\n\t\tintersectsSphere: function ( sphere ) {\n\n\t\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t\t},\n\n\t\tintersectsBox: function ( box ) {\n\n\t\t\treturn box.intersectsSphere( this );\n\n\t\t},\n\n\t\tintersectsPlane: function ( plane ) {\n\n\t\t\t// We use the following equation to compute the signed distance from\n\t\t\t// the center of the sphere to the plane.\n\t\t\t//\n\t\t\t// distance = q * n - d\n\t\t\t//\n\t\t\t// If this distance is greater than the radius of the sphere,\n\t\t\t// then there is no intersection.\n\n\t\t\treturn Math.abs( this.center.dot( plane.normal ) - plane.constant ) <= this.radius;\n\n\t\t},\n\n\t\tclampPoint: function ( point, optionalTarget ) {\n\n\t\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tresult.copy( point );\n\n\t\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\t\tresult.sub( this.center ).normalize();\n\t\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tgetBoundingBox: function ( optionalTarget ) {\n\n\t\t\tvar box = optionalTarget || new Box3();\n\n\t\t\tbox.set( this.center, this.center );\n\t\t\tbox.expandByScalar( this.radius );\n\n\t\t\treturn box;\n\n\t\t},\n\n\t\tapplyMatrix4: function ( matrix ) {\n\n\t\t\tthis.center.applyMatrix4( matrix );\n\t\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttranslate: function ( offset ) {\n\n\t\t\tthis.center.add( offset );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( sphere ) {\n\n\t\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author bhouston / http://clara.io\n\t * @author tschw\n\t */\n\n\tfunction Matrix3() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tObject.assign( Matrix3.prototype, {\n\n\t\tisMatrix3: true,\n\n\t\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tidentity: function () {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0,\n\t\t\t\t0, 1, 0,\n\t\t\t\t0, 0, 1\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().fromArray( this.elements );\n\n\t\t},\n\n\t\tcopy: function ( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromMatrix4: function ( m ) {\n\n\t\t\tvar me = m.elements;\n\n\t\t\tthis.set(\n\n\t\t\t\tme[ 0 ], me[ 4 ], me[  8 ],\n\t\t\t\tme[ 1 ], me[ 5 ], me[  9 ],\n\t\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t\t);\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tapplyToBufferAttribute: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t\t}\n\n\t\t\t\treturn attribute;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tmultiply: function ( m ) {\n\n\t\t\treturn this.multiplyMatrices( this, m );\n\n\t\t},\n\n\t\tpremultiply: function ( m ) {\n\n\t\t\treturn this.multiplyMatrices( m, this );\n\n\t\t},\n\n\t\tmultiplyMatrices: function ( a, b ) {\n\n\t\t\tvar ae = a.elements;\n\t\t\tvar be = b.elements;\n\t\t\tvar te = this.elements;\n\n\t\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tmultiplyScalar: function ( s ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdeterminant: function () {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t\t},\n\n\t\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\t\tconsole.error( \"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\" );\n\n\t\t\t}\n\n\t\t\tvar me = matrix.elements,\n\t\t\t\tte = this.elements,\n\n\t\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\t\tif ( det === 0 ) {\n\n\t\t\t\tvar msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\t\tthrow new Error( msg );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( msg );\n\n\t\t\t\t}\n\n\t\t\t\treturn this.identity();\n\n\t\t\t}\n\n\t\t\tvar detInv = 1 / det;\n\n\t\t\tte[ 0 ] = t11 * detInv;\n\t\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\t\tte[ 3 ] = t12 * detInv;\n\t\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\t\tte[ 6 ] = t13 * detInv;\n\t\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttranspose: function () {\n\n\t\t\tvar tmp, m = this.elements;\n\n\t\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t\t},\n\n\t\ttransposeIntoArray: function ( r ) {\n\n\t\t\tvar m = this.elements;\n\n\t\t\tr[ 0 ] = m[ 0 ];\n\t\t\tr[ 1 ] = m[ 3 ];\n\t\t\tr[ 2 ] = m[ 6 ];\n\t\t\tr[ 3 ] = m[ 1 ];\n\t\t\tr[ 4 ] = m[ 4 ];\n\t\t\tr[ 5 ] = m[ 7 ];\n\t\t\tr[ 6 ] = m[ 2 ];\n\t\t\tr[ 7 ] = m[ 5 ];\n\t\t\tr[ 8 ] = m[ 8 ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( matrix ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = matrix.elements;\n\n\t\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tfromArray: function ( array, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoArray: function ( array, offset ) {\n\n\t\t\tif ( array === undefined ) array = [];\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tvar te = this.elements;\n\n\t\t\tarray[ offset ] = te[ 0 ];\n\t\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\t\treturn array;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t */\n\n\tfunction Plane( normal, constant ) {\n\n\t\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\t\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n\t}\n\n\tObject.assign( Plane.prototype, {\n\n\t\tset: function ( normal, constant ) {\n\n\t\t\tthis.normal.copy( normal );\n\t\t\tthis.constant = constant;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetComponents: function ( x, y, z, w ) {\n\n\t\t\tthis.normal.set( x, y, z );\n\t\t\tthis.constant = w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\t\tthis.normal.copy( normal );\n\t\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromCoplanarPoints: function () {\n\n\t\t\tvar v1 = new Vector3();\n\t\t\tvar v2 = new Vector3();\n\n\t\t\treturn function setFromCoplanarPoints( a, b, c ) {\n\n\t\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( plane ) {\n\n\t\t\tthis.normal.copy( plane.normal );\n\t\t\tthis.constant = plane.constant;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tnormalize: function () {\n\n\t\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\t\tthis.constant *= inverseNormalLength;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tnegate: function () {\n\n\t\t\tthis.constant *= - 1;\n\t\t\tthis.normal.negate();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdistanceToPoint: function ( point ) {\n\n\t\t\treturn this.normal.dot( point ) + this.constant;\n\n\t\t},\n\n\t\tdistanceToSphere: function ( sphere ) {\n\n\t\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t\t},\n\n\t\tprojectPoint: function ( point, optionalTarget ) {\n\n\t\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\n\n\t\t},\n\n\t\torthoPoint: function ( point, optionalTarget ) {\n\n\t\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\n\n\t\t},\n\n\t\tintersectLine: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function intersectLine( line, optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\t\tvar direction = line.delta( v1 );\n\n\t\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\t\tif ( denominator === 0 ) {\n\n\t\t\t\t\t// line is coplanar, return origin\n\t\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\t\t\treturn result.copy( line.start );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}\n\n\t\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}\n\n\t\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tintersectsLine: function ( line ) {\n\n\t\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\t\tvar startSign = this.distanceToPoint( line.start );\n\t\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t\t},\n\n\t\tintersectsBox: function ( box ) {\n\n\t\t\treturn box.intersectsPlane( this );\n\n\t\t},\n\n\t\tintersectsSphere: function ( sphere ) {\n\n\t\t\treturn sphere.intersectsPlane( this );\n\n\t\t},\n\n\t\tcoplanarPoint: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t\t},\n\n\t\tapplyMatrix4: function () {\n\n\t\t\tvar v1 = new Vector3();\n\t\t\tvar m1 = new Matrix3();\n\n\t\t\treturn function applyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\n\n\t\t\t\t// transform normal based on theory here:\n\t\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\n\t\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\t\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t// recalculate constant (like in setFromNormalAndCoplanarPoint)\n\t\t\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttranslate: function ( offset ) {\n\n\t\t\tthis.constant = this.constant - offset.dot( this.normal );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( plane ) {\n\n\t\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author bhouston / http://clara.io\n\t */\n\n\tfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tthis.planes = [\n\n\t\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t\t];\n\n\t}\n\n\tObject.assign( Frustum.prototype, {\n\n\t\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tplanes[ 0 ].copy( p0 );\n\t\t\tplanes[ 1 ].copy( p1 );\n\t\t\tplanes[ 2 ].copy( p2 );\n\t\t\tplanes[ 3 ].copy( p3 );\n\t\t\tplanes[ 4 ].copy( p4 );\n\t\t\tplanes[ 5 ].copy( p5 );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( frustum ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromMatrix: function ( m ) {\n\n\t\t\tvar planes = this.planes;\n\t\t\tvar me = m.elements;\n\t\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tintersectsObject: function () {\n\n\t\t\tvar sphere = new Sphere();\n\n\t\t\treturn function intersectsObject( object ) {\n\n\t\t\t\tvar geometry = object.geometry;\n\n\t\t\t\tif ( geometry.boundingSphere === null )\n\t\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\t\tsphere.copy( geometry.boundingSphere )\n\t\t\t\t\t.applyMatrix4( object.matrixWorld );\n\n\t\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tintersectsSprite: function () {\n\n\t\t\tvar sphere = new Sphere();\n\n\t\t\treturn function intersectsSprite( sprite ) {\n\n\t\t\t\tsphere.center.set( 0, 0, 0 );\n\t\t\t\tsphere.radius = 0.7071067811865476;\n\t\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\n\n\t\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tintersectsSphere: function ( sphere ) {\n\n\t\t\tvar planes = this.planes;\n\t\t\tvar center = sphere.center;\n\t\t\tvar negRadius = - sphere.radius;\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tintersectsBox: function () {\n\n\t\t\tvar p1 = new Vector3(),\n\t\t\t\tp2 = new Vector3();\n\n\t\t\treturn function intersectsBox( box ) {\n\n\t\t\t\tvar planes = this.planes;\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tcontainsPoint: function ( point ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLShadowMap( _renderer, _lights, _objects, capabilities ) {\n\n\t\tvar _gl = _renderer.context,\n\t\t\t_state = _renderer.state,\n\t\t\t_frustum = new Frustum(),\n\t\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t\t_lightShadows = _lights.shadows,\n\n\t\t\t_shadowMapSize = new Vector2(),\n\t\t\t_maxShadowMapSize = new Vector2( capabilities.maxTextureSize, capabilities.maxTextureSize ),\n\n\t\t\t_lookTarget = new Vector3(),\n\t\t\t_lightPositionWorld = new Vector3(),\n\n\t\t\t_MorphingFlag = 1,\n\t\t\t_SkinningFlag = 2,\n\n\t\t\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\n\n\t\t\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\n\t\t\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\n\n\t\t\t_materialCache = {};\n\n\t\tvar cubeDirections = [\n\t\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t\t];\n\n\t\tvar cubeUps = [\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t\t];\n\n\t\tvar cube2DViewPorts = [\n\t\t\tnew Vector4(), new Vector4(), new Vector4(),\n\t\t\tnew Vector4(), new Vector4(), new Vector4()\n\t\t];\n\n\t\t// init\n\n\t\tvar depthMaterialTemplate = new MeshDepthMaterial();\n\t\tdepthMaterialTemplate.depthPacking = RGBADepthPacking;\n\t\tdepthMaterialTemplate.clipping = true;\n\n\t\tvar distanceShader = ShaderLib[ \"distanceRGBA\" ];\n\t\tvar distanceUniforms = UniformsUtils.clone( distanceShader.uniforms );\n\n\t\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\n\n\t\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\n\t\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\n\n\t\t\tvar depthMaterial = depthMaterialTemplate.clone();\n\t\t\tdepthMaterial.morphTargets = useMorphing;\n\t\t\tdepthMaterial.skinning = useSkinning;\n\n\t\t\t_depthMaterials[ i ] = depthMaterial;\n\n\t\t\tvar distanceMaterial = new ShaderMaterial( {\n\t\t\t\tdefines: {\n\t\t\t\t\t'USE_SHADOWMAP': ''\n\t\t\t\t},\n\t\t\t\tuniforms: distanceUniforms,\n\t\t\t\tvertexShader: distanceShader.vertexShader,\n\t\t\t\tfragmentShader: distanceShader.fragmentShader,\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning,\n\t\t\t\tclipping: true\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ i ] = distanceMaterial;\n\n\t\t}\n\n\t\t//\n\n\t\tvar scope = this;\n\n\t\tthis.enabled = false;\n\n\t\tthis.autoUpdate = true;\n\t\tthis.needsUpdate = false;\n\n\t\tthis.type = PCFShadowMap;\n\n\t\tthis.renderReverseSided = true;\n\t\tthis.renderSingleSided = true;\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\t\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\t\tif ( _lightShadows.length === 0 ) return;\n\n\t\t\t// Set GL state for depth map.\n\t\t\t_state.disable( _gl.BLEND );\n\t\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t\t_state.buffers.depth.setTest( true );\n\t\t\t_state.setScissorTest( false );\n\n\t\t\t// render depth map\n\n\t\t\tvar faceCount;\n\n\t\t\tfor ( var i = 0, il = _lightShadows.length; i < il; i ++ ) {\n\n\t\t\t\tvar light = _lightShadows[ i ];\n\t\t\t\tvar shadow = light.shadow;\n\t\t\t\tvar isPointLight = light && light.isPointLight;\n\n\t\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tvar shadowCamera = shadow.camera;\n\n\t\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\t\t\t\t_shadowMapSize.min( _maxShadowMapSize );\n\n\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\tvar vpWidth = _shadowMapSize.x;\n\t\t\t\t\tvar vpHeight = _shadowMapSize.y;\n\n\t\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t\t\t// following orientation:\n\t\t\t\t\t//\n\t\t\t\t\t//  xzXZ\n\t\t\t\t\t//   y Y\n\t\t\t\t\t//\n\t\t\t\t\t// X - Positive x direction\n\t\t\t\t\t// x - Negative x direction\n\t\t\t\t\t// Y - Positive y direction\n\t\t\t\t\t// y - Negative y direction\n\t\t\t\t\t// Z - Positive z direction\n\t\t\t\t\t// z - Negative z direction\n\n\t\t\t\t\t// positive X\n\t\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\n\t\t\t\t\t// negative X\n\t\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\n\t\t\t\t\t// positive Z\n\t\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\n\t\t\t\t\t// negative Z\n\t\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\n\t\t\t\t\t// positive Y\n\t\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\n\t\t\t\t\t// negative Y\n\t\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\n\n\t\t\t\t\t_shadowMapSize.x *= 4.0;\n\t\t\t\t\t_shadowMapSize.y *= 2.0;\n\n\t\t\t\t}\n\n\t\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\t\tshadowCamera.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tif ( shadow.isSpotLightShadow ) {\n\n\t\t\t\t\tshadow.update( light );\n\n\t\t\t\t}\n\n\t\t\t\tvar shadowMap = shadow.map;\n\t\t\t\tvar shadowMatrix = shadow.matrix;\n\n\t\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\tfaceCount = 6;\n\n\t\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\n\t\t\t\t\t// equal to inverse of the light's position\n\n\t\t\t\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfaceCount = 1;\n\n\t\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\t\t\t// compute shadow matrix\n\n\t\t\t\t\tshadowMatrix.set(\n\t\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t\t\t);\n\n\t\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t\t}\n\n\t\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t\t_renderer.clear();\n\n\t\t\t\t// render shadow map for each cube face (if omni-directional) or\n\t\t\t\t// run a single pass if not\n\n\t\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\n\n\t\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\n\t\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\n\t\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\n\t\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\n\t\t\t\t\t\t_state.viewport( vpDimensions );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// update camera matrices and frustum\n\n\t\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t\t\t// set object matrices & frustum culling\n\n\t\t\t\t\trenderObject( scene, camera, shadowCamera, isPointLight );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Restore GL state.\n\t\t\tvar clearColor = _renderer.getClearColor();\n\t\t\tvar clearAlpha = _renderer.getClearAlpha();\n\t\t\t_renderer.setClearColor( clearColor, clearAlpha );\n\n\t\t\tscope.needsUpdate = false;\n\n\t\t};\n\n\t\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tvar result = null;\n\n\t\t\tvar materialVariants = _depthMaterials;\n\t\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\t\tif ( isPointLight ) {\n\n\t\t\t\tmaterialVariants = _distanceMaterials;\n\t\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t\t}\n\n\t\t\tif ( ! customMaterial ) {\n\n\t\t\t\tvar useMorphing = false;\n\n\t\t\t\tif ( material.morphTargets ) {\n\n\t\t\t\t\tif ( geometry && geometry.isBufferGeometry ) {\n\n\t\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t\t} else if ( geometry && geometry.isGeometry ) {\n\n\t\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( object.isSkinnedMesh && material.skinning === false ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t\tvar useSkinning = object.isSkinnedMesh && material.skinning;\n\n\t\t\t\tvar variantIndex = 0;\n\n\t\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\n\t\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\n\n\t\t\t\tresult = materialVariants[ variantIndex ];\n\n\t\t\t} else {\n\n\t\t\t\tresult = customMaterial;\n\n\t\t\t}\n\n\t\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t\t// appropriate state\n\n\t\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t\t}\n\n\t\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t\t}\n\n\t\t\t\tresult = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult.visible = material.visible;\n\t\t\tresult.wireframe = material.wireframe;\n\n\t\t\tvar side = material.side;\n\n\t\t\tif ( scope.renderSingleSided && side == DoubleSide ) {\n\n\t\t\t\tside = FrontSide;\n\n\t\t\t}\n\n\t\t\tif ( scope.renderReverseSided ) {\n\n\t\t\t\tif ( side === FrontSide ) side = BackSide;\n\t\t\t\telse if ( side === BackSide ) side = FrontSide;\n\n\t\t\t}\n\n\t\t\tresult.side = side;\n\n\t\t\tresult.clipShadows = material.clipShadows;\n\t\t\tresult.clippingPlanes = material.clippingPlanes;\n\n\t\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\t\tresult.linewidth = material.linewidth;\n\n\t\t\tif ( isPointLight && result.uniforms.lightPos !== undefined ) {\n\n\t\t\t\tresult.uniforms.lightPos.value.copy( lightPositionWorld );\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfunction renderObject( object, camera, shadowCamera, isPointLight ) {\n\n\t\t\tif ( object.visible === false ) return;\n\n\t\t\tvar visible = object.layers.test( camera.layers );\n\n\t\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\t\tif ( object.castShadow && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld );\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld );\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar children = object.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( children[ i ], camera, shadowCamera, isPointLight );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLAttributes( gl ) {\n\n\t\tvar buffers = {};\n\n\t\tfunction createBuffer( attribute, bufferType ) {\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\n\t\t\tvar buffer = gl.createBuffer();\n\n\t\t\tgl.bindBuffer( bufferType, buffer );\n\t\t\tgl.bufferData( bufferType, array, usage );\n\n\t\t\tattribute.onUploadCallback();\n\n\t\t\tvar type = gl.FLOAT;\n\n\t\t\tif ( array instanceof Float32Array ) {\n\n\t\t\t\ttype = gl.FLOAT;\n\n\t\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\t\ttype = gl.SHORT;\n\n\t\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\t\ttype = gl.INT;\n\n\t\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\t\ttype = gl.BYTE;\n\n\t\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbuffer: buffer,\n\t\t\t\ttype: type,\n\t\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\t\tversion: attribute.version\n\t\t\t};\n\n\t\t}\n\n\t\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar updateRange = attribute.updateRange;\n\n\t\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\t\tif ( attribute.dynamic === false ) {\n\n\t\t\t\tgl.bufferData( bufferType, array, gl.STATIC_DRAW );\n\n\t\t\t} else if ( updateRange.count === - 1 ) {\n\n\t\t\t\t// Not using update ranges\n\n\t\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t\t} else if ( updateRange.count === 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t\tupdateRange.count = -1; // reset range\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tfunction get( attribute ) {\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\t\treturn buffers[ attribute.uuid ];\n\n\t\t}\n\n\t\tfunction remove( attribute ) {\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\t\t\t\n\t\t\tvar data = buffers[ attribute.uuid ];\n\n\t\t\tif ( data ) {\n\n\t\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\t\tdelete buffers[ attribute.uuid ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction update( attribute, bufferType ) {\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\t\tvar data = buffers[ attribute.uuid ];\n\n\t\t\tif ( data === undefined ) {\n\n\t\t\t\tbuffers[ attribute.uuid ] = createBuffer( attribute, bufferType );\n\n\t\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\t\tdata.version = attribute.version;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tget: get,\n\t\t\tremove: remove,\n\t\t\tupdate: update\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author bhouston / http://clara.io\n\t */\n\n\tfunction Euler( x, y, z, order ) {\n\n\t\tthis._x = x || 0;\n\t\tthis._y = y || 0;\n\t\tthis._z = z || 0;\n\t\tthis._order = order || Euler.DefaultOrder;\n\n\t}\n\n\tEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\n\tEuler.DefaultOrder = 'XYZ';\n\n\tObject.defineProperties( Euler.prototype, {\n\n\t\tx: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this._x;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis._x = value;\n\t\t\t\tthis.onChangeCallback();\n\n\t\t\t}\n\n\t\t},\n\n\t\ty: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this._y;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis._y = value;\n\t\t\t\tthis.onChangeCallback();\n\n\t\t\t}\n\n\t\t},\n\n\t\tz: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this._z;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis._z = value;\n\t\t\t\tthis.onChangeCallback();\n\n\t\t\t}\n\n\t\t},\n\n\t\torder: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this._order;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis._order = value;\n\t\t\t\tthis.onChangeCallback();\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Euler.prototype, {\n\n\t\tisEuler: true,\n\n\t\tset: function ( x, y, z, order ) {\n\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\t\t\tthis._order = order || this._order;\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t\t},\n\n\t\tcopy: function ( euler ) {\n\n\t\t\tthis._x = euler._x;\n\t\t\tthis._y = euler._y;\n\t\t\tthis._z = euler._z;\n\t\t\tthis._order = euler._order;\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\t\tvar clamp = _Math.clamp;\n\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\t\tvar te = m.elements;\n\t\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\t\torder = order || this._order;\n\n\t\t\tif ( order === 'XYZ' ) {\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t} else if ( order === 'YZX' ) {\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t} else if ( order === 'XZY' ) {\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t\t}\n\n\t\t\tthis._order = order;\n\n\t\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromQuaternion: function () {\n\n\t\t\tvar matrix = new Matrix4();\n\n\t\t\treturn function setFromQuaternion( q, order, update ) {\n\n\t\t\t\tmatrix.makeRotationFromQuaternion( q );\n\n\t\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tsetFromVector3: function ( v, order ) {\n\n\t\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t\t},\n\n\t\treorder: function () {\n\n\t\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t\tvar q = new Quaternion();\n\n\t\t\treturn function reorder( newOrder ) {\n\n\t\t\t\tq.setFromEuler( this );\n\n\t\t\t\treturn this.setFromQuaternion( q, newOrder );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tequals: function ( euler ) {\n\n\t\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t\t},\n\n\t\tfromArray: function ( array ) {\n\n\t\t\tthis._x = array[ 0 ];\n\t\t\tthis._y = array[ 1 ];\n\t\t\tthis._z = array[ 2 ];\n\t\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\t\tthis.onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoArray: function ( array, offset ) {\n\n\t\t\tif ( array === undefined ) array = [];\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tarray[ offset ] = this._x;\n\t\t\tarray[ offset + 1 ] = this._y;\n\t\t\tarray[ offset + 2 ] = this._z;\n\t\t\tarray[ offset + 3 ] = this._order;\n\n\t\t\treturn array;\n\n\t\t},\n\n\t\ttoVector3: function ( optionalResult ) {\n\n\t\t\tif ( optionalResult ) {\n\n\t\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t\t} else {\n\n\t\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t\t}\n\n\t\t},\n\n\t\tonChange: function ( callback ) {\n\n\t\t\tthis.onChangeCallback = callback;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tonChangeCallback: function () {}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Layers() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tObject.assign( Layers.prototype, {\n\n\t\tset: function ( channel ) {\n\n\t\t\tthis.mask = 1 << channel | 0;\n\n\t\t},\n\n\t\tenable: function ( channel ) {\n\n\t\t\tthis.mask |= 1 << channel | 0;\n\n\t\t},\n\n\t\ttoggle: function ( channel ) {\n\n\t\t\tthis.mask ^= 1 << channel | 0;\n\n\t\t},\n\n\t\tdisable: function ( channel ) {\n\n\t\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t\t},\n\n\t\ttest: function ( layers ) {\n\n\t\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author elephantatwork / www.elephantatwork.ch\n\t */\n\n\tvar object3DId = 0;\n\n\tfunction Object3D() {\n\n\t\tObject.defineProperty( this, 'id', { value: object3DId ++ } );\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Object3D';\n\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\n\t\tthis.up = Object3D.DefaultUp.clone();\n\n\t\tvar position = new Vector3();\n\t\tvar rotation = new Euler();\n\t\tvar quaternion = new Quaternion();\n\t\tvar scale = new Vector3( 1, 1, 1 );\n\n\t\tfunction onRotationChange() {\n\n\t\t\tquaternion.setFromEuler( rotation, false );\n\n\t\t}\n\n\t\tfunction onQuaternionChange() {\n\n\t\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t\t}\n\n\t\trotation.onChange( onRotationChange );\n\t\tquaternion.onChange( onQuaternionChange );\n\n\t\tObject.defineProperties( this, {\n\t\t\tposition: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: position\n\t\t\t},\n\t\t\trotation: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: rotation\n\t\t\t},\n\t\t\tquaternion: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: quaternion\n\t\t\t},\n\t\t\tscale: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: scale\n\t\t\t},\n\t\t\tmodelViewMatrix: {\n\t\t\t\tvalue: new Matrix4()\n\t\t\t},\n\t\t\tnormalMatrix: {\n\t\t\t\tvalue: new Matrix3()\n\t\t\t}\n\t\t} );\n\n\t\tthis.matrix = new Matrix4();\n\t\tthis.matrixWorld = new Matrix4();\n\n\t\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\tthis.layers = new Layers();\n\t\tthis.visible = true;\n\n\t\tthis.castShadow = false;\n\t\tthis.receiveShadow = false;\n\n\t\tthis.frustumCulled = true;\n\t\tthis.renderOrder = 0;\n\n\t\tthis.userData = {};\n\t}\n\n\tObject3D.DefaultUp = new Vector3( 0, 1, 0 );\n\tObject3D.DefaultMatrixAutoUpdate = true;\n\n\tObject.assign( Object3D.prototype, EventDispatcher.prototype, {\n\n\t\tisObject3D: true,\n\n\t\tonBeforeRender: function () {},\n\t\tonAfterRender: function () {},\n\n\t\tapplyMatrix: function ( matrix ) {\n\n\t\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t\t},\n\n\t\tapplyQuaternion: function ( q ) {\n\n\t\t\tthis.quaternion.premultiply( q );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t\t// assumes axis is normalized\n\n\t\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t\t},\n\n\t\tsetRotationFromEuler: function ( euler ) {\n\n\t\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t\t},\n\n\t\tsetRotationFromMatrix: function ( m ) {\n\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t\t},\n\n\t\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t\t// assumes q is normalized\n\n\t\t\tthis.quaternion.copy( q );\n\n\t\t},\n\n\t\trotateOnAxis: function () {\n\n\t\t\t// rotate object on axis in object space\n\t\t\t// axis is assumed to be normalized\n\n\t\t\tvar q1 = new Quaternion();\n\n\t\t\treturn function rotateOnAxis( axis, angle ) {\n\n\t\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\trotateX: function () {\n\n\t\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\t\treturn function rotateX( angle ) {\n\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\trotateY: function () {\n\n\t\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\t\treturn function rotateY( angle ) {\n\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\trotateZ: function () {\n\n\t\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\t\treturn function rotateZ( angle ) {\n\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttranslateOnAxis: function () {\n\n\t\t\t// translate object by distance along axis in object space\n\t\t\t// axis is assumed to be normalized\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function translateOnAxis( axis, distance ) {\n\n\t\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttranslateX: function () {\n\n\t\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\t\treturn function translateX( distance ) {\n\n\t\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttranslateY: function () {\n\n\t\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\t\treturn function translateY( distance ) {\n\n\t\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttranslateZ: function () {\n\n\t\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\t\treturn function translateZ( distance ) {\n\n\t\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tlocalToWorld: function ( vector ) {\n\n\t\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t\t},\n\n\t\tworldToLocal: function () {\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function worldToLocal( vector ) {\n\n\t\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tlookAt: function () {\n\n\t\t\t// This method does not support objects with rotated and/or translated parent(s)\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function lookAt( vector ) {\n\n\t\t\t\tif ( this.isCamera ) {\n\n\t\t\t\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\t\t}\n\n\t\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tadd: function ( object ) {\n\n\t\t\tif ( arguments.length > 1 ) {\n\n\t\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t\tif ( object === this ) {\n\n\t\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\t\tobject.parent.remove( object );\n\n\t\t\t\t}\n\n\t\t\t\tobject.parent = this;\n\t\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\t\tthis.children.push( object );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tremove: function ( object ) {\n\n\t\t\tif ( arguments.length > 1 ) {\n\n\t\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t\tvar index = this.children.indexOf( object );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tobject.parent = null;\n\n\t\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\t\tthis.children.splice( index, 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\t\t\t\n\t\t},\n\n\t\tgetObjectById: function ( id ) {\n\n\t\t\treturn this.getObjectByProperty( 'id', id );\n\n\t\t},\n\n\t\tgetObjectByName: function ( name ) {\n\n\t\t\treturn this.getObjectByProperty( 'name', name );\n\n\t\t},\n\n\t\tgetObjectByProperty: function ( name, value ) {\n\n\t\t\tif ( this[ name ] === value ) return this;\n\n\t\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = this.children[ i ];\n\t\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\t\tif ( object !== undefined ) {\n\n\t\t\t\t\treturn object;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn undefined;\n\n\t\t},\n\n\t\tgetWorldPosition: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\treturn result.setFromMatrixPosition( this.matrixWorld );\n\n\t\t},\n\n\t\tgetWorldQuaternion: function () {\n\n\t\t\tvar position = new Vector3();\n\t\t\tvar scale = new Vector3();\n\n\t\t\treturn function getWorldQuaternion( optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Quaternion();\n\n\t\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\t\tthis.matrixWorld.decompose( position, result, scale );\n\n\t\t\t\treturn result;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tgetWorldRotation: function () {\n\n\t\t\tvar quaternion = new Quaternion();\n\n\t\t\treturn function getWorldRotation( optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Euler();\n\n\t\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tgetWorldScale: function () {\n\n\t\t\tvar position = new Vector3();\n\t\t\tvar quaternion = new Quaternion();\n\n\t\t\treturn function getWorldScale( optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\n\n\t\t\t\treturn result;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tgetWorldDirection: function () {\n\n\t\t\tvar quaternion = new Quaternion();\n\n\t\t\treturn function getWorldDirection( optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\traycast: function () {},\n\n\t\ttraverse: function ( callback ) {\n\n\t\t\tcallback( this );\n\n\t\t\tvar children = this.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].traverse( callback );\n\n\t\t\t}\n\n\t\t},\n\n\t\ttraverseVisible: function ( callback ) {\n\n\t\t\tif ( this.visible === false ) return;\n\n\t\t\tcallback( this );\n\n\t\t\tvar children = this.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t\t}\n\n\t\t},\n\n\t\ttraverseAncestors: function ( callback ) {\n\n\t\t\tvar parent = this.parent;\n\n\t\t\tif ( parent !== null ) {\n\n\t\t\t\tcallback( parent );\n\n\t\t\t\tparent.traverseAncestors( callback );\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdateMatrix: function () {\n\n\t\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t\t},\n\n\t\tupdateMatrixWorld: function ( force ) {\n\n\t\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\t\tif ( this.parent === null ) {\n\n\t\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t\t}\n\n\t\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\t\tforce = true;\n\n\t\t\t}\n\n\t\t\t// update children\n\n\t\t\tvar children = this.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t\t}\n\n\t\t},\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\t// meta is '' when called from JSON.stringify\n\t\t\tvar isRootObject = ( meta === undefined || meta === '' );\n\n\t\t\tvar output = {};\n\n\t\t\t// meta is a hash used to collect geometries, materials.\n\t\t\t// not providing it implies that this is the root object\n\t\t\t// being serialized.\n\t\t\tif ( isRootObject ) {\n\n\t\t\t\t// initialize meta obj\n\t\t\t\tmeta = {\n\t\t\t\t\tgeometries: {},\n\t\t\t\t\tmaterials: {},\n\t\t\t\t\ttextures: {},\n\t\t\t\t\timages: {}\n\t\t\t\t};\n\n\t\t\t\toutput.metadata = {\n\t\t\t\t\tversion: 4.5,\n\t\t\t\t\ttype: 'Object',\n\t\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\t// standard Object3D serialization\n\n\t\t\tvar object = {};\n\n\t\t\tobject.uuid = this.uuid;\n\t\t\tobject.type = this.type;\n\n\t\t\tif ( this.name !== '' ) object.name = this.name;\n\t\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\t\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\t\tif ( this.visible === false ) object.visible = false;\n\n\t\t\tobject.matrix = this.matrix.toArray();\n\n\t\t\t//\n\n\t\t\tfunction serialize( library, element ) {\n\n\t\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t\t}\n\n\t\t\t\treturn element.uuid;\n\n\t\t\t}\n\n\t\t\tif ( this.geometry !== undefined ) {\n\n\t\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\t}\n\n\t\t\tif ( this.material !== undefined ) {\n\n\t\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\t\tvar uuids = [];\n\n\t\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.material = uuids;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( this.children.length > 0 ) {\n\n\t\t\t\tobject.children = [];\n\n\t\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( isRootObject ) {\n\n\t\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\t\tif ( images.length > 0 ) output.images = images;\n\n\t\t\t}\n\n\t\t\toutput.object = object;\n\n\t\t\treturn output;\n\n\t\t\t// extract data from the cache hash\n\t\t\t// remove metadata on each item\n\t\t\t// and return as array\n\t\t\tfunction extractFromCache( cache ) {\n\n\t\t\t\tvar values = [];\n\t\t\t\tfor ( var key in cache ) {\n\n\t\t\t\t\tvar data = cache[ key ];\n\t\t\t\t\tdelete data.metadata;\n\t\t\t\t\tvalues.push( data );\n\n\t\t\t\t}\n\t\t\t\treturn values;\n\n\t\t\t}\n\n\t\t},\n\n\t\tclone: function ( recursive ) {\n\n\t\t\treturn new this.constructor().copy( this, recursive );\n\n\t\t},\n\n\t\tcopy: function ( source, recursive ) {\n\n\t\t\tif ( recursive === undefined ) recursive = true;\n\n\t\t\tthis.name = source.name;\n\n\t\t\tthis.up.copy( source.up );\n\n\t\t\tthis.position.copy( source.position );\n\t\t\tthis.quaternion.copy( source.quaternion );\n\t\t\tthis.scale.copy( source.scale );\n\n\t\t\tthis.matrix.copy( source.matrix );\n\t\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\t\tthis.layers.mask = source.layers.mask;\n\t\t\tthis.visible = source.visible;\n\n\t\t\tthis.castShadow = source.castShadow;\n\t\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\t\tthis.frustumCulled = source.frustumCulled;\n\t\t\tthis.renderOrder = source.renderOrder;\n\n\t\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\t\tif ( recursive === true ) {\n\n\t\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\t\tvar child = source.children[ i ];\n\t\t\t\t\tthis.add( child.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author WestLangley / http://github.com/WestLangley\n\t*/\n\n\tfunction Camera() {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Camera';\n\n\t\tthis.matrixWorldInverse = new Matrix4();\n\t\tthis.projectionMatrix = new Matrix4();\n\n\t}\n\n\tCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Camera,\n\n\t\tisCamera: true,\n\n\t\tcopy: function ( source, recursive ) {\n\n\t\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\t\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetWorldDirection: function () {\n\n\t\t\tvar quaternion = new Quaternion();\n\n\t\t\treturn function getWorldDirection( optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tupdateMatrixWorld: function ( force ) {\n\n\t\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author arose / http://github.com/arose\n\t */\n\n\tfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\t\tCamera.call( this );\n\n\t\tthis.type = 'OrthographicCamera';\n\n\t\tthis.zoom = 1;\n\t\tthis.view = null;\n\n\t\tthis.left = left;\n\t\tthis.right = right;\n\t\tthis.top = top;\n\t\tthis.bottom = bottom;\n\n\t\tthis.near = ( near !== undefined ) ? near : 0.1;\n\t\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\t\tconstructor: OrthographicCamera,\n\n\t\tisOrthographicCamera: true,\n\n\t\tcopy: function ( source, recursive ) {\n\n\t\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\t\tthis.left = source.left;\n\t\t\tthis.right = source.right;\n\t\t\tthis.top = source.top;\n\t\t\tthis.bottom = source.bottom;\n\t\t\tthis.near = source.near;\n\t\t\tthis.far = source.far;\n\n\t\t\tthis.zoom = source.zoom;\n\t\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetViewOffset: function( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\t\tthis.view = {\n\t\t\t\tfullWidth: fullWidth,\n\t\t\t\tfullHeight: fullHeight,\n\t\t\t\toffsetX: x,\n\t\t\t\toffsetY: y,\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\n\t\t\tthis.updateProjectionMatrix();\n\n\t\t},\n\n\t\tclearViewOffset: function() {\n\n\t\t\tthis.view = null;\n\t\t\tthis.updateProjectionMatrix();\n\n\t\t},\n\n\t\tupdateProjectionMatrix: function () {\n\n\t\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\t\tvar cx = ( this.right + this.left ) / 2;\n\t\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\t\tvar left = cx - dx;\n\t\t\tvar right = cx + dx;\n\t\t\tvar top = cy + dy;\n\t\t\tvar bottom = cy - dy;\n\n\t\t\tif ( this.view !== null ) {\n\n\t\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t\t}\n\n\t\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\t},\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\t\tdata.object.zoom = this.zoom;\n\t\t\tdata.object.left = this.left;\n\t\t\tdata.object.right = this.right;\n\t\t\tdata.object.top = this.top;\n\t\t\tdata.object.bottom = this.bottom;\n\t\t\tdata.object.near = this.near;\n\t\t\tdata.object.far = this.far;\n\n\t\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\t\treturn data;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author greggman / http://games.greggman.com/\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t * @author tschw\n\t */\n\n\tfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\t\tCamera.call( this );\n\n\t\tthis.type = 'PerspectiveCamera';\n\n\t\tthis.fov = fov !== undefined ? fov : 50;\n\t\tthis.zoom = 1;\n\n\t\tthis.near = near !== undefined ? near : 0.1;\n\t\tthis.far = far !== undefined ? far : 2000;\n\t\tthis.focus = 10;\n\n\t\tthis.aspect = aspect !== undefined ? aspect : 1;\n\t\tthis.view = null;\n\n\t\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\t\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\t\tconstructor: PerspectiveCamera,\n\n\t\tisPerspectiveCamera: true,\n\n\t\tcopy: function ( source, recursive ) {\n\n\t\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\t\tthis.fov = source.fov;\n\t\t\tthis.zoom = source.zoom;\n\n\t\t\tthis.near = source.near;\n\t\t\tthis.far = source.far;\n\t\t\tthis.focus = source.focus;\n\n\t\t\tthis.aspect = source.aspect;\n\t\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\t\tthis.filmGauge = source.filmGauge;\n\t\t\tthis.filmOffset = source.filmOffset;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t/**\n\t\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t\t *\n\t\t * The default film gauge is 35, so that the focal length can be specified for\n\t\t * a 35mm (full frame) camera.\n\t\t *\n\t\t * Values for focal length and film gauge must have the same unit.\n\t\t */\n\t\tsetFocalLength: function ( focalLength ) {\n\n\t\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\t\tthis.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\t\tthis.updateProjectionMatrix();\n\n\t\t},\n\n\t\t/**\n\t\t * Calculates the focal length from the current .fov and .filmGauge.\n\t\t */\n\t\tgetFocalLength: function () {\n\n\t\t\tvar vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\n\n\t\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t\t},\n\n\t\tgetEffectiveFOV: function () {\n\n\t\t\treturn _Math.RAD2DEG * 2 * Math.atan(\n\t\t\t\t\tMath.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t\t},\n\n\t\tgetFilmWidth: function () {\n\n\t\t\t// film not completely covered in portrait format (aspect < 1)\n\t\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t\t},\n\n\t\tgetFilmHeight: function () {\n\n\t\t\t// film not completely covered in landscape format (aspect > 1)\n\t\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t\t},\n\n\t\t/**\n\t\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t\t * multi-monitor/multi-machine setups.\n\t\t *\n\t\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t\t * the monitors are in grid like this\n\t\t *\n\t\t *   +---+---+---+\n\t\t *   | A | B | C |\n\t\t *   +---+---+---+\n\t\t *   | D | E | F |\n\t\t *   +---+---+---+\n\t\t *\n\t\t * then for each monitor you would call it like this\n\t\t *\n\t\t *   var w = 1920;\n\t\t *   var h = 1080;\n\t\t *   var fullWidth = w * 3;\n\t\t *   var fullHeight = h * 2;\n\t\t *\n\t\t *   --A--\n\t\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t\t *   --B--\n\t\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t\t *   --C--\n\t\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t\t *   --D--\n\t\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t\t *   --E--\n\t\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t\t *   --F--\n\t\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t\t *\n\t\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t\t */\n\t\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\t\tthis.view = {\n\t\t\t\tfullWidth: fullWidth,\n\t\t\t\tfullHeight: fullHeight,\n\t\t\t\toffsetX: x,\n\t\t\t\toffsetY: y,\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\n\t\t\tthis.updateProjectionMatrix();\n\n\t\t},\n\n\t\tclearViewOffset: function () {\n\n\t\t\tthis.view = null;\n\t\t\tthis.updateProjectionMatrix();\n\n\t\t},\n\n\t\tupdateProjectionMatrix: function () {\n\n\t\t\tvar near = this.near,\n\t\t\t\ttop = near * Math.tan(\n\t\t\t\t\t\t_Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\t\theight = 2 * top,\n\t\t\t\twidth = this.aspect * height,\n\t\t\t\tleft = - 0.5 * width,\n\t\t\t\tview = this.view;\n\n\t\t\tif ( view !== null ) {\n\n\t\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\t\twidth *= view.width / fullWidth;\n\t\t\t\theight *= view.height / fullHeight;\n\n\t\t\t}\n\n\t\t\tvar skew = this.filmOffset;\n\t\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\t},\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\t\tdata.object.fov = this.fov;\n\t\t\tdata.object.zoom = this.zoom;\n\n\t\t\tdata.object.near = this.near;\n\t\t\tdata.object.far = this.far;\n\t\t\tdata.object.focus = this.focus;\n\n\t\t\tdata.object.aspect = this.aspect;\n\n\t\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\t\tdata.object.filmGauge = this.filmGauge;\n\t\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\t\treturn data;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\t\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\t\tthis.color = ( color && color.isColor ) ? color : new Color();\n\t\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\t\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n\t}\n\n\tObject.assign( Face3.prototype, {\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tthis.a = source.a;\n\t\t\tthis.b = source.b;\n\t\t\tthis.c = source.c;\n\n\t\t\tthis.normal.copy( source.normal );\n\t\t\tthis.color.copy( source.color );\n\n\t\t\tthis.materialIndex = source.materialIndex;\n\n\t\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author kile / http://kile.stravaganza.org/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t * @author bhouston / http://clara.io\n\t */\n\n\tvar count = 0;\n\tfunction GeometryIdCount() { return count++; }\n\n\tfunction Geometry() {\n\n\t\tObject.defineProperty( this, 'id', { value: GeometryIdCount() } );\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Geometry';\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\n\t\tthis.lineDistances = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = false;\n\t\tthis.verticesNeedUpdate = false;\n\t\tthis.uvsNeedUpdate = false;\n\t\tthis.normalsNeedUpdate = false;\n\t\tthis.colorsNeedUpdate = false;\n\t\tthis.lineDistancesNeedUpdate = false;\n\t\tthis.groupsNeedUpdate = false;\n\n\t}\n\n\tObject.assign( Geometry.prototype, EventDispatcher.prototype, {\n\n\t\tisGeometry: true,\n\n\t\tapplyMatrix: function ( matrix ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\t\tvar vertex = this.vertices[ i ];\n\t\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\t\tvar face = this.faces[ i ];\n\t\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.boundingBox !== null ) {\n\n\t\t\t\tthis.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\t\tthis.computeBoundingSphere();\n\n\t\t\t}\n\n\t\t\tthis.verticesNeedUpdate = true;\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\trotateX: function () {\n\n\t\t\t// rotate geometry around world x-axis\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function rotateX( angle ) {\n\n\t\t\t\tm1.makeRotationX( angle );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\trotateY: function () {\n\n\t\t\t// rotate geometry around world y-axis\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function rotateY( angle ) {\n\n\t\t\t\tm1.makeRotationY( angle );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\trotateZ: function () {\n\n\t\t\t// rotate geometry around world z-axis\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function rotateZ( angle ) {\n\n\t\t\t\tm1.makeRotationZ( angle );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttranslate: function () {\n\n\t\t\t// translate geometry\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function translate( x, y, z ) {\n\n\t\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tscale: function () {\n\n\t\t\t// scale geometry\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function scale( x, y, z ) {\n\n\t\t\t\tm1.makeScale( x, y, z );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tlookAt: function () {\n\n\t\t\tvar obj = new Object3D();\n\n\t\t\treturn function lookAt( vector ) {\n\n\t\t\t\tobj.lookAt( vector );\n\n\t\t\t\tobj.updateMatrix();\n\n\t\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tfromBufferGeometry: function ( geometry ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\t\tvar attributes = geometry.attributes;\n\n\t\t\tvar positions = attributes.position.array;\n\t\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\t\tvar tempNormals = [];\n\t\t\tvar tempUVs = [];\n\t\t\tvar tempUVs2 = [];\n\n\t\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\t\tscope.vertices.push( new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\n\n\t\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\t\ttempNormals.push( new Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\t\tscope.colors.push( new Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\t\ttempUVs.push( new Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\t\ttempUVs2.push( new Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\t\tscope.faces.push( face );\n\n\t\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar groups = geometry.groups;\n\n\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcenter: function () {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t\tvar offset = this.boundingBox.getCenter().negate();\n\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\t\treturn offset;\n\n\t\t},\n\n\t\tnormalize: function () {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t\tvar center = this.boundingSphere.center;\n\t\t\tvar radius = this.boundingSphere.radius;\n\n\t\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\t\tvar matrix = new Matrix4();\n\t\t\tmatrix.set(\n\t\t\t\ts, 0, 0, - s * center.x,\n\t\t\t\t0, s, 0, - s * center.y,\n\t\t\t\t0, 0, s, - s * center.z,\n\t\t\t\t0, 0, 0, 1\n\t\t\t);\n\n\t\t\tthis.applyMatrix( matrix );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcomputeFaceNormals: function () {\n\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tvar face = this.faces[ f ];\n\n\t\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tcb.normalize();\n\n\t\t\t\tface.normal.copy( cb );\n\n\t\t\t}\n\n\t\t},\n\n\t\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\t\tvar v, vl, f, fl, face, vertices;\n\n\t\t\tvertices = new Array( this.vertices.length );\n\n\t\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\t\tvertices[ v ] = new Vector3();\n\n\t\t\t}\n\n\t\t\tif ( areaWeighted ) {\n\n\t\t\t\t// vertex normals weighted by triangle areas\n\t\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\t\tvar vA, vB, vC;\n\t\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.computeFaceNormals();\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\t\tvertices[ v ].normalize();\n\n\t\t\t}\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.faces.length > 0 ) {\n\n\t\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t\t}\n\n\t\t},\n\n\t\tcomputeFlatVertexNormals: function () {\n\n\t\t\tvar f, fl, face;\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.faces.length > 0 ) {\n\n\t\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t\t}\n\n\t\t},\n\n\t\tcomputeMorphNormals: function () {\n\n\t\t\tvar i, il, f, fl, face;\n\n\t\t\t// save original normals\n\t\t\t// - create temp variables on first access\n\t\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\t\tvar tmpGeo = new Geometry();\n\t\t\ttmpGeo.faces = this.faces;\n\n\t\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t\t// create on first access\n\n\t\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t\t// set vertices to morph target\n\n\t\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t\t// compute morph normals\n\n\t\t\t\ttmpGeo.computeFaceNormals();\n\t\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t\t// store morph normals\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restore original normals\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t\t}\n\n\t\t},\n\n\t\tcomputeLineDistances: function () {\n\n\t\t\tvar d = 0;\n\t\t\tvar vertices = this.vertices;\n\n\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\t\tif ( i > 0 ) {\n\n\t\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\n\n\t\t\t\t}\n\n\t\t\t\tthis.lineDistances[ i ] = d;\n\n\t\t\t}\n\n\t\t},\n\n\t\tcomputeBoundingBox: function () {\n\n\t\t\tif ( this.boundingBox === null ) {\n\n\t\t\t\tthis.boundingBox = new Box3();\n\n\t\t\t}\n\n\t\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t\t},\n\n\t\tcomputeBoundingSphere: function () {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t\t},\n\n\t\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar normalMatrix,\n\t\t\t\tvertexOffset = this.vertices.length,\n\t\t\t\tvertices1 = this.vertices,\n\t\t\t\tvertices2 = geometry.vertices,\n\t\t\t\tfaces1 = this.faces,\n\t\t\t\tfaces2 = geometry.faces,\n\t\t\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\t\t\tuvs2 = geometry.faceVertexUvs[ 0 ],\n\t\t\t\tcolors1 = this.colors,\n\t\t\t\tcolors2 = geometry.colors;\n\n\t\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\t\tif ( matrix !== undefined ) {\n\n\t\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\t}\n\n\t\t\t// vertices\n\n\t\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\t\tvertices1.push( vertexCopy );\n\n\t\t\t}\n\n\t\t\t// colors\n\n\t\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t\t}\n\n\t\t\t// faces\n\n\t\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\t\tfaces1.push( faceCopy );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\t\tif ( uv === undefined ) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tuvs1.push( uvCopy );\n\n\t\t\t}\n\n\t\t},\n\n\t\tmergeMesh: function ( mesh ) {\n\n\t\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\n\n\t\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t\t},\n\n\t\t/*\n\t\t * Checks for duplicate vertices with hashmap.\n\t\t * Duplicated vertices are removed\n\t\t * and faces' vertices are updated.\n\t\t */\n\n\t\tmergeVertices: function () {\n\n\t\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\t\tvar unique = [], changes = [];\n\n\t\t\tvar v, key;\n\t\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\t\tvar i, il, face;\n\t\t\tvar indices, j, jl;\n\n\t\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\t\tv = this.vertices[ i ];\n\t\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// if faces are completely degenerate after merging vertices, we\n\t\t\t// have to remove them from the geometry.\n\t\t\tvar faceIndicesToRemove = [];\n\n\t\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\t\tface = this.faces[ i ];\n\n\t\t\t\tface.a = changes[ face.a ];\n\t\t\t\tface.b = changes[ face.b ];\n\t\t\t\tface.c = changes[ face.c ];\n\n\t\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t\t// we have to remove the face as nothing can be saved\n\t\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Use unique set of vertices\n\n\t\t\tvar diff = this.vertices.length - unique.length;\n\t\t\tthis.vertices = unique;\n\t\t\treturn diff;\n\n\t\t},\n\n\t\tsortFacesByMaterialIndex: function () {\n\n\t\t\tvar faces = this.faces;\n\t\t\tvar length = faces.length;\n\n\t\t\t// tag faces\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tfaces[ i ]._id = i;\n\n\t\t\t}\n\n\t\t\t// sort faces\n\n\t\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t\t}\n\n\t\t\tfaces.sort( materialIndexSort );\n\n\t\t\t// sort uvs\n\n\t\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\t\tvar newUvs1, newUvs2;\n\n\t\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tvar id = faces[ i ]._id;\n\n\t\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t\t}\n\n\t\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t\t},\n\n\t\ttoJSON: function () {\n\n\t\t\tvar data = {\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: 4.5,\n\t\t\t\t\ttype: 'Geometry',\n\t\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// standard Geometry serialization\n\n\t\t\tdata.uuid = this.uuid;\n\t\t\tdata.type = this.type;\n\t\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\t\tif ( this.parameters !== undefined ) {\n\n\t\t\t\tvar parameters = this.parameters;\n\n\t\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\n\t\t\t}\n\n\t\t\tvar vertices = [];\n\n\t\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\t\tvar vertex = this.vertices[ i ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t\tvar faces = [];\n\t\t\tvar normals = [];\n\t\t\tvar normalsHash = {};\n\t\t\tvar colors = [];\n\t\t\tvar colorsHash = {};\n\t\t\tvar uvs = [];\n\t\t\tvar uvsHash = {};\n\n\t\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\t\tvar face = this.faces[ i ];\n\n\t\t\t\tvar hasMaterial = true;\n\t\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\t\tvar faceType = 0;\n\n\t\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\t\tfaces.push( faceType );\n\t\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\t\tfaces.push( face.materialIndex );\n\n\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\t\tfaces.push(\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\t\tfaces.push(\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\t\tfaces.push(\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t\t}\n\n\t\t\tfunction getNormalIndex( normal ) {\n\n\t\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t\t}\n\n\t\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tfunction getColorIndex( color ) {\n\n\t\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t\t}\n\n\t\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\t\tcolors.push( color.getHex() );\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tfunction getUvIndex( uv ) {\n\n\t\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t\t}\n\n\t\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tdata.data = {};\n\n\t\t\tdata.data.vertices = vertices;\n\t\t\tdata.data.normals = normals;\n\t\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\t\tdata.data.faces = faces;\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\t/*\n\t\t\t // Handle primitives\n\n\t\t\t var parameters = this.parameters;\n\n\t\t\t if ( parameters !== undefined ) {\n\n\t\t\t var values = [];\n\n\t\t\t for ( var key in parameters ) {\n\n\t\t\t values.push( parameters[ key ] );\n\n\t\t\t }\n\n\t\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t\t this.constructor.apply( geometry, values );\n\t\t\t return geometry;\n\n\t\t\t }\n\n\t\t\t return new this.constructor().copy( this );\n\t\t\t */\n\n\t\t\treturn new Geometry().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tvar i, il, j, jl, k, kl;\n\n\t\t\t// reset\n\n\t\t\tthis.vertices = [];\n\t\t\tthis.colors = [];\n\t\t\tthis.faces = [];\n\t\t\tthis.faceVertexUvs = [[]];\n\t\t\tthis.morphTargets = [];\n\t\t\tthis.morphNormals = [];\n\t\t\tthis.skinWeights = [];\n\t\t\tthis.skinIndices = [];\n\t\t\tthis.lineDistances = [];\n\t\t\tthis.boundingBox = null;\n\t\t\tthis.boundingSphere = null;\n\n\t\t\t// name\n\n\t\t\tthis.name = source.name;\n\n\t\t\t// vertices\n\n\t\t\tvar vertices = source.vertices;\n\n\t\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t\t}\n\n\t\t\t// colors\n\n\t\t\tvar colors = source.colors;\n\n\t\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t\t}\n\n\t\t\t// faces\n\n\t\t\tvar faces = source.faces;\n\n\t\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t\t}\n\n\t\t\t// face vertex uvs\n\n\t\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morph targets\n\n\t\t\tvar morphTargets = source.morphTargets;\n\n\t\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\t\tvar morphTarget = {};\n\t\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t\t// vertices\n\n\t\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// normals\n\n\t\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t\t// morph normals\n\n\t\t\tvar morphNormals = source.morphNormals;\n\n\t\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\t\tvar morphNormal = {};\n\n\t\t\t\t// vertex normals\n\n\t\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// face normals\n\n\t\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t\t}\n\n\t\t\t// skin weights\n\n\t\t\tvar skinWeights = source.skinWeights;\n\n\t\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t\t}\n\n\t\t\t// skin indices\n\n\t\t\tvar skinIndices = source.skinIndices;\n\n\t\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t\t}\n\n\t\t\t// line distances\n\n\t\t\tvar lineDistances = source.lineDistances;\n\n\t\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t\t}\n\n\t\t\t// bounding box\n\n\t\t\tvar boundingBox = source.boundingBox;\n\n\t\t\tif ( boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t\t}\n\n\t\t\t// bounding sphere\n\n\t\t\tvar boundingSphere = source.boundingSphere;\n\n\t\t\tif ( boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\t// update flags\n\n\t\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdispose: function () {\n\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction BufferAttribute( array, itemSize, normalized ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.uuid = _Math.generateUUID();\n\t\tthis.name = '';\n\n\t\tthis.array = array;\n\t\tthis.itemSize = itemSize;\n\t\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\t\tthis.normalized = normalized === true;\n\n\t\tthis.dynamic = false;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.onUploadCallback = function () {};\n\n\t\tthis.version = 0;\n\n\t}\n\n\tObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\t\tset: function ( value ) {\n\n\t\t\tif ( value === true ) this.version ++;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( BufferAttribute.prototype, {\n\n\t\tisBufferAttribute: true,\n\n\t\tsetArray: function ( array ) {\n\n\t\t\tif ( Array.isArray( array ) ) {\n\n\t\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t\t}\n\n\t\t\tthis.count = array !== undefined ? array.length / this.itemSize : 0;\n\t\t\tthis.array = array;\n\n\t\t},\n\n\t\tsetDynamic: function ( value ) {\n\n\t\t\tthis.dynamic = value;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tthis.array = new source.array.constructor( source.array );\n\t\t\tthis.itemSize = source.itemSize;\n\t\t\tthis.count = source.count;\n\t\t\tthis.normalized = source.normalized;\n\n\t\t\tthis.dynamic = source.dynamic;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\t\tindex1 *= this.itemSize;\n\t\t\tindex2 *= attribute.itemSize;\n\n\t\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyArray: function ( array ) {\n\n\t\t\tthis.array.set( array );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyColorsArray: function ( colors ) {\n\n\t\t\tvar array = this.array, offset = 0;\n\n\t\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\t\tvar color = colors[ i ];\n\n\t\t\t\tif ( color === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\t\tcolor = new Color();\n\n\t\t\t\t}\n\n\t\t\t\tarray[ offset ++ ] = color.r;\n\t\t\t\tarray[ offset ++ ] = color.g;\n\t\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyIndicesArray: function ( indices ) {\n\n\t\t\tvar array = this.array, offset = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tvar index = indices[ i ];\n\n\t\t\t\tarray[ offset ++ ] = index.a;\n\t\t\t\tarray[ offset ++ ] = index.b;\n\t\t\t\tarray[ offset ++ ] = index.c;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyVector2sArray: function ( vectors ) {\n\n\t\t\tvar array = this.array, offset = 0;\n\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\t\tvar vector = vectors[ i ];\n\n\t\t\t\tif ( vector === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\t\tvector = new Vector2();\n\n\t\t\t\t}\n\n\t\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyVector3sArray: function ( vectors ) {\n\n\t\t\tvar array = this.array, offset = 0;\n\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\t\tvar vector = vectors[ i ];\n\n\t\t\t\tif ( vector === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\t\tvector = new Vector3();\n\n\t\t\t\t}\n\n\t\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyVector4sArray: function ( vectors ) {\n\n\t\t\tvar array = this.array, offset = 0;\n\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\t\tvar vector = vectors[ i ];\n\n\t\t\t\tif ( vector === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\t\tvector = new Vector4();\n\n\t\t\t\t}\n\n\t\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tset: function ( value, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tthis.array.set( value, offset );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetX: function ( index ) {\n\n\t\t\treturn this.array[ index * this.itemSize ];\n\n\t\t},\n\n\t\tsetX: function ( index, x ) {\n\n\t\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetY: function ( index ) {\n\n\t\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t\t},\n\n\t\tsetY: function ( index, y ) {\n\n\t\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetZ: function ( index ) {\n\n\t\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t\t},\n\n\t\tsetZ: function ( index, z ) {\n\n\t\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetW: function ( index ) {\n\n\t\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t\t},\n\n\t\tsetW: function ( index, w ) {\n\n\t\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetXY: function ( index, x, y ) {\n\n\t\t\tindex *= this.itemSize;\n\n\t\t\tthis.array[ index + 0 ] = x;\n\t\t\tthis.array[ index + 1 ] = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetXYZ: function ( index, x, y, z ) {\n\n\t\t\tindex *= this.itemSize;\n\n\t\t\tthis.array[ index + 0 ] = x;\n\t\t\tthis.array[ index + 1 ] = y;\n\t\t\tthis.array[ index + 2 ] = z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\t\tindex *= this.itemSize;\n\n\t\t\tthis.array[ index + 0 ] = x;\n\t\t\tthis.array[ index + 1 ] = y;\n\t\t\tthis.array[ index + 2 ] = z;\n\t\t\tthis.array[ index + 3 ] = w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tonUpload: function ( callback ) {\n\n\t\t\tthis.onUploadCallback = callback;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t\t}\n\n\t} );\n\n\t//\n\n\tfunction Int8BufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Int8Array( array ), itemSize );\n\n\t}\n\n\tInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\n\tfunction Uint8BufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Uint8Array( array ), itemSize );\n\n\t}\n\n\tUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\n\tfunction Uint8ClampedBufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize );\n\n\t}\n\n\tUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\n\tfunction Int16BufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Int16Array( array ), itemSize );\n\n\t}\n\n\tInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\n\tfunction Uint16BufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Uint16Array( array ), itemSize );\n\n\t}\n\n\tUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\n\tfunction Int32BufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Int32Array( array ), itemSize );\n\n\t}\n\n\tInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\n\tfunction Uint32BufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Uint32Array( array ), itemSize );\n\n\t}\n\n\tUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\n\tfunction Float32BufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Float32Array( array ), itemSize );\n\n\t}\n\n\tFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\n\tfunction Float64BufferAttribute( array, itemSize ) {\n\n\t\tBufferAttribute.call( this, new Float64Array( array ), itemSize );\n\n\t}\n\n\tFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\n\tFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction DirectGeometry() {\n\n\t\tthis.indices = [];\n\t\tthis.vertices = [];\n\t\tthis.normals = [];\n\t\tthis.colors = [];\n\t\tthis.uvs = [];\n\t\tthis.uvs2 = [];\n\n\t\tthis.groups = [];\n\n\t\tthis.morphTargets = {};\n\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\n\t\t// this.lineDistances = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// update flags\n\n\t\tthis.verticesNeedUpdate = false;\n\t\tthis.normalsNeedUpdate = false;\n\t\tthis.colorsNeedUpdate = false;\n\t\tthis.uvsNeedUpdate = false;\n\t\tthis.groupsNeedUpdate = false;\n\n\t}\n\n\tObject.assign( DirectGeometry.prototype, {\n\n\t\tcomputeGroups: function ( geometry ) {\n\n\t\t\tvar group;\n\t\t\tvar groups = [];\n\t\t\tvar materialIndex = undefined;\n\n\t\t\tvar faces = geometry.faces;\n\n\t\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\t// materials\n\n\t\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgroup = {\n\t\t\t\t\t\tstart: i * 3,\n\t\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( group !== undefined ) {\n\n\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\tgroups.push( group );\n\n\t\t\t}\n\n\t\t\tthis.groups = groups;\n\n\t\t},\n\n\t\tfromGeometry: function ( geometry ) {\n\n\t\t\tvar faces = geometry.faces;\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t\t// morphs\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\t\tvar morphTargetsPosition;\n\n\t\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\t\tmorphTargetsPosition = [];\n\n\t\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\t\tmorphTargetsPosition[ i ] = [];\n\n\t\t\t\t}\n\n\t\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t\t}\n\n\t\t\tvar morphNormals = geometry.morphNormals;\n\t\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\t\tvar morphTargetsNormal;\n\n\t\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\t\tmorphTargetsNormal = [];\n\n\t\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\t\tmorphTargetsNormal[ i ] = [];\n\n\t\t\t\t}\n\n\t\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tvar skinIndices = geometry.skinIndices;\n\t\t\tvar skinWeights = geometry.skinWeights;\n\n\t\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t\t//\n\n\t\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar normal = face.normal;\n\n\t\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t\t}\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar color = face.color;\n\n\t\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// morphs\n\n\t\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t\t}\n\n\t\t\t\t// skins\n\n\t\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.computeGroups( geometry );\n\n\t\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\tfunction arrayMax( array ) {\n\n\t\tif ( array.length === 0 ) return - Infinity;\n\n\t\tvar max = array[ 0 ];\n\n\t\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t\t}\n\n\t\treturn max;\n\n\t}\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction BufferGeometry() {\n\n\t\tObject.defineProperty( this, 'id', { value: GeometryIdCount() } );\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'BufferGeometry';\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\n\t\tthis.morphAttributes = {};\n\n\t\tthis.groups = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\tthis.drawRange = { start: 0, count: Infinity };\n\n\t}\n\n\tBufferGeometry.MaxIndex = 65535;\n\n\tObject.assign( BufferGeometry.prototype, EventDispatcher.prototype, {\n\n\t\tisBufferGeometry: true,\n\n\t\tgetIndex: function () {\n\n\t\t\treturn this.index;\n\n\t\t},\n\n\t\tsetIndex: function ( index ) {\n\n\t\t\tif ( Array.isArray( index ) ) {\n\n\t\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tthis.index = index;\n\n\t\t\t}\n\n\t\t},\n\n\t\taddAttribute: function ( name, attribute ) {\n\n\t\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\t\tthis.addAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( name === 'index' ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\t\tthis.setIndex( attribute );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tthis.attributes[ name ] = attribute;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetAttribute: function ( name ) {\n\n\t\t\treturn this.attributes[ name ];\n\n\t\t},\n\n\t\tremoveAttribute: function ( name ) {\n\n\t\t\tdelete this.attributes[ name ];\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddGroup: function ( start, count, materialIndex ) {\n\n\t\t\tthis.groups.push( {\n\n\t\t\t\tstart: start,\n\t\t\t\tcount: count,\n\t\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t\t} );\n\n\t\t},\n\n\t\tclearGroups: function () {\n\n\t\t\tthis.groups = [];\n\n\t\t},\n\n\t\tsetDrawRange: function ( start, count ) {\n\n\t\t\tthis.drawRange.start = start;\n\t\t\tthis.drawRange.count = count;\n\n\t\t},\n\n\t\tapplyMatrix: function ( matrix ) {\n\n\t\t\tvar position = this.attributes.position;\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tmatrix.applyToBufferAttribute( position );\n\t\t\t\tposition.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tvar normal = this.attributes.normal;\n\n\t\t\tif ( normal !== undefined ) {\n\n\t\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\t\tnormalMatrix.applyToBufferAttribute( normal );\n\t\t\t\tnormal.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tif ( this.boundingBox !== null ) {\n\n\t\t\t\tthis.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\t\tthis.computeBoundingSphere();\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\trotateX: function () {\n\n\t\t\t// rotate geometry around world x-axis\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function rotateX( angle ) {\n\n\t\t\t\tm1.makeRotationX( angle );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\trotateY: function () {\n\n\t\t\t// rotate geometry around world y-axis\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function rotateY( angle ) {\n\n\t\t\t\tm1.makeRotationY( angle );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\trotateZ: function () {\n\n\t\t\t// rotate geometry around world z-axis\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function rotateZ( angle ) {\n\n\t\t\t\tm1.makeRotationZ( angle );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttranslate: function () {\n\n\t\t\t// translate geometry\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function translate( x, y, z ) {\n\n\t\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tscale: function () {\n\n\t\t\t// scale geometry\n\n\t\t\tvar m1 = new Matrix4();\n\n\t\t\treturn function scale( x, y, z ) {\n\n\t\t\t\tm1.makeScale( x, y, z );\n\n\t\t\t\tthis.applyMatrix( m1 );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tlookAt: function () {\n\n\t\t\tvar obj = new Object3D();\n\n\t\t\treturn function lookAt( vector ) {\n\n\t\t\t\tobj.lookAt( vector );\n\n\t\t\t\tobj.updateMatrix();\n\n\t\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tcenter: function () {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t\tvar offset = this.boundingBox.getCenter().negate();\n\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\t\treturn offset;\n\n\t\t},\n\n\t\tsetFromObject: function ( object ) {\n\n\t\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isMesh ) {\n\n\t\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tupdateFromObject: function ( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( object.isMesh ) {\n\n\t\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\t\tdirect = undefined;\n\t\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t\t}\n\n\t\t\t\tif ( direct === undefined ) {\n\n\t\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t\t}\n\n\t\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\t\tgeometry = direct;\n\n\t\t\t}\n\n\t\t\tvar attribute;\n\n\t\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\t\tattribute = this.attributes.position;\n\n\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\t\tattribute = this.attributes.normal;\n\n\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\t\tattribute = this.attributes.color;\n\n\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\t\tattribute = this.attributes.uv;\n\n\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\t\tthis.groups = geometry.groups;\n\n\t\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tfromGeometry: function ( geometry ) {\n\n\t\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t\t},\n\n\t\tfromDirectGeometry: function ( geometry ) {\n\n\t\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\t\tthis.addAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\t\tthis.addAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\t\tthis.addAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\t\tthis.addAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\t\tthis.addAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.indices.length > 0 ) {\n\n\t\t\t\tvar TypeArray = arrayMax( geometry.indices ) > 65535 ? Uint32Array : Uint16Array;\n\t\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\n\t\t\t\tthis.setIndex( new BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\n\n\t\t\t}\n\n\t\t\t// groups\n\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\t// morphs\n\n\t\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\t\tvar array = [];\n\t\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.length * 3, 3 );\n\n\t\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t\t}\n\n\t\t\t// skinning\n\n\t\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcomputeBoundingBox: function () {\n\n\t\t\tif ( this.boundingBox === null ) {\n\n\t\t\t\tthis.boundingBox = new Box3();\n\n\t\t\t}\n\n\t\t\tvar position = this.attributes.position;\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t} else {\n\n\t\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t\t}\n\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t},\n\n\t\tcomputeBoundingSphere: function () {\n\n\t\t\tvar box = new Box3();\n\t\t\tvar vector = new Vector3();\n\n\t\t\treturn function computeBoundingSphere() {\n\n\t\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t\t\t}\n\n\t\t\t\tvar position = this.attributes.position;\n\n\t\t\t\tif ( position ) {\n\n\t\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\t\tbox.setFromBufferAttribute( position );\n\t\t\t\t\tbox.getCenter( center );\n\n\t\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t\t\tvector.x = position.getX( i );\n\t\t\t\t\t\tvector.y = position.getY( i );\n\t\t\t\t\t\tvector.z = position.getZ( i );\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tcomputeFaceNormals: function () {\n\n\t\t\t// backwards compatibility\n\n\t\t},\n\n\t\tcomputeVertexNormals: function () {\n\n\t\t\tvar index = this.index;\n\t\t\tvar attributes = this.attributes;\n\t\t\tvar groups = this.groups;\n\n\t\t\tif ( attributes.position ) {\n\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\t\tthis.addAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// reset existing normals to zero\n\n\t\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\tvar vA, vB, vC;\n\t\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t\t// indexed elements\n\n\t\t\t\tif ( index ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\t\tthis.addGroup( 0, indices.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\n\n\t\t\t\t\t\tvar group = groups[ j ];\n\n\t\t\t\t\t\tvar start = group.start;\n\t\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis.normalizeNormals();\n\n\t\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmerge: function ( geometry, offset ) {\n\n\t\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tvar attributes = this.attributes;\n\n\t\t\tfor ( var key in attributes ) {\n\n\t\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\t\tvar attribute1 = attributes[ key ];\n\t\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tnormalizeNormals: function () {\n\n\t\t\tvar normals = this.attributes.normal;\n\n\t\t\tvar x, y, z, n;\n\n\t\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t\tx = normals.getX( i );\n\t\t\t\ty = normals.getY( i );\n\t\t\t\tz = normals.getZ( i );\n\n\t\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\n\n\t\t\t\tnormals.setXYZ( i, x * n, y * n, z * n );\n\n\t\t\t}\n\n\t\t},\n\n\t\ttoNonIndexed: function () {\n\n\t\t\tif ( this.index === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t\tvar geometry2 = new BufferGeometry();\n\n\t\t\tvar indices = this.index.array;\n\t\t\tvar attributes = this.attributes;\n\n\t\t\tfor ( var name in attributes ) {\n\n\t\t\t\tvar attribute = attributes[ name ];\n\n\t\t\t\tvar array = attribute.array;\n\t\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\t\tvar index = 0, index2 = 0;\n\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry2.addAttribute( name, new BufferAttribute( array2, itemSize ) );\n\n\t\t\t}\n\n\t\t\treturn geometry2;\n\n\t\t},\n\n\t\ttoJSON: function () {\n\n\t\t\tvar data = {\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: 4.5,\n\t\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// standard BufferGeometry serialization\n\n\t\t\tdata.uuid = this.uuid;\n\t\t\tdata.type = this.type;\n\t\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\t\tif ( this.parameters !== undefined ) {\n\n\t\t\t\tvar parameters = this.parameters;\n\n\t\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\n\t\t\t}\n\n\t\t\tdata.data = { attributes: {} };\n\n\t\t\tvar index = this.index;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tvar array = Array.prototype.slice.call( index.array );\n\n\t\t\t\tdata.data.index = {\n\t\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\t\tarray: array\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar attributes = this.attributes;\n\n\t\t\tfor ( var key in attributes ) {\n\n\t\t\t\tvar attribute = attributes[ key ];\n\n\t\t\t\tvar array = Array.prototype.slice.call( attribute.array );\n\n\t\t\t\tdata.data.attributes[ key ] = {\n\t\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\t\tarray: array,\n\t\t\t\t\tnormalized: attribute.normalized\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar groups = this.groups;\n\n\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t\t}\n\n\t\t\tvar boundingSphere = this.boundingSphere;\n\n\t\t\tif ( boundingSphere !== null ) {\n\n\t\t\t\tdata.data.boundingSphere = {\n\t\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\t\tradius: boundingSphere.radius\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\t/*\n\t\t\t // Handle primitives\n\n\t\t\t var parameters = this.parameters;\n\n\t\t\t if ( parameters !== undefined ) {\n\n\t\t\t var values = [];\n\n\t\t\t for ( var key in parameters ) {\n\n\t\t\t values.push( parameters[ key ] );\n\n\t\t\t }\n\n\t\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t\t this.constructor.apply( geometry, values );\n\t\t\t return geometry;\n\n\t\t\t }\n\n\t\t\t return new this.constructor().copy( this );\n\t\t\t */\n\n\t\t\treturn new BufferGeometry().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tvar name, i, l;\n\n\t\t\t// reset\n\n\t\t\tthis.index = null;\n\t\t\tthis.attributes = {};\n\t\t\tthis.morphAttributes = {};\n\t\t\tthis.groups = [];\n\t\t\tthis.boundingBox = null;\n\t\t\tthis.boundingSphere = null;\n\n\t\t\t// name\n\n\t\t\tthis.name = source.name;\n\n\t\t\t// index\n\n\t\t\tvar index = source.index;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tthis.setIndex( index.clone() );\n\n\t\t\t}\n\n\t\t\t// attributes\n\n\t\t\tvar attributes = source.attributes;\n\n\t\t\tfor ( name in attributes ) {\n\n\t\t\t\tvar attribute = attributes[ name ];\n\t\t\t\tthis.addAttribute( name, attribute.clone() );\n\n\t\t\t}\n\n\t\t\t// morph attributes\n\n\t\t\tvar morphAttributes = source.morphAttributes;\n\n\t\t\tfor ( name in morphAttributes ) {\n\n\t\t\t\tvar array = [];\n\t\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t\t}\n\n\t\t\t// groups\n\n\t\t\tvar groups = source.groups;\n\n\t\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\t\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t\t// bounding box\n\n\t\t\tvar boundingBox = source.boundingBox;\n\n\t\t\tif ( boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t\t}\n\n\t\t\t// bounding sphere\n\n\t\t\tvar boundingSphere = source.boundingSphere;\n\n\t\t\tif ( boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\t// draw range\n\n\t\t\tthis.drawRange.start = source.drawRange.start;\n\t\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdispose: function () {\n\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// BoxGeometry\n\n\tfunction BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tBoxGeometry.prototype = Object.create( Geometry.prototype );\n\tBoxGeometry.prototype.constructor = BoxGeometry;\n\n\t// BoxBufferGeometry\n\n\tfunction BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'BoxBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tvar scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments ) || 1;\n\t\theightSegments = Math.floor( heightSegments ) || 1;\n\t\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar numberOfVertices = 0;\n\t\tvar groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height,   width,  depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x',   1, - 1, depth, height, - width,  depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y',   1,   1, width, depth,    height, widthSegments, depthSegments,  2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y',   1, - 1, width, depth,  - height, widthSegments, depthSegments,  3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z',   1, - 1, width, height,   depth,  widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth,  widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tvar segmentWidth = width / gridX;\n\t\t\tvar segmentHeight = height / gridY;\n\n\t\t\tvar widthHalf = width / 2;\n\t\t\tvar heightHalf = height / 2;\n\t\t\tvar depthHalf = depth / 2;\n\n\t\t\tvar gridX1 = gridX + 1;\n\t\t\tvar gridY1 = gridY + 1;\n\n\t\t\tvar vertexCounter = 0;\n\t\t\tvar groupCount = 0;\n\n\t\t\tvar ix, iy;\n\n\t\t\tvar vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n\tBoxBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tBoxBufferGeometry.prototype.constructor = BoxBufferGeometry;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// PlaneGeometry\n\n\tfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tPlaneGeometry.prototype = Object.create( Geometry.prototype );\n\tPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n\t// PlaneBufferGeometry\n\n\tfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'PlaneBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tvar width_half = width / 2;\n\t\tvar height_half = height / 2;\n\n\t\tvar gridX = Math.floor( widthSegments ) || 1;\n\t\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\t\tvar gridX1 = gridX + 1;\n\t\tvar gridY1 = gridY + 1;\n\n\t\tvar segment_width = width / gridX;\n\t\tvar segment_height = height / gridY;\n\n\t\tvar ix, iy;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tvar y = iy * segment_height - height_half;\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = ix + gridX1 * iy;\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * parameters = {\n\t *  color: <hex>,\n\t *  opacity: <float>,\n\t *  map: new THREE.Texture( <Image> ),\n\t *\n\t *  lightMap: new THREE.Texture( <Image> ),\n\t *  lightMapIntensity: <float>\n\t *\n\t *  aoMap: new THREE.Texture( <Image> ),\n\t *  aoMapIntensity: <float>\n\t *\n\t *  specularMap: new THREE.Texture( <Image> ),\n\t *\n\t *  alphaMap: new THREE.Texture( <Image> ),\n\t *\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n\t *  combine: THREE.Multiply,\n\t *  reflectivity: <float>,\n\t *  refractionRatio: <float>,\n\t *\n\t *  shading: THREE.SmoothShading,\n\t *  depthTest: <bool>,\n\t *  depthWrite: <bool>,\n\t *\n\t *  wireframe: <boolean>,\n\t *  wireframeLinewidth: <float>,\n\t *\n\t *  skinning: <bool>,\n\t *  morphTargets: <bool>\n\t * }\n\t */\n\n\tfunction MeshBasicMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'MeshBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // emissive\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\n\t\tthis.lights = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tMeshBasicMaterial.prototype = Object.create( Material.prototype );\n\tMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\n\tMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\n\tMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t */\n\n\tfunction Ray( origin, direction ) {\n\n\t\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\t\tthis.direction = ( direction !== undefined ) ? direction : new Vector3();\n\n\t}\n\n\tObject.assign( Ray.prototype, {\n\n\t\tset: function ( origin, direction ) {\n\n\t\t\tthis.origin.copy( origin );\n\t\t\tthis.direction.copy( direction );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( ray ) {\n\n\t\t\tthis.origin.copy( ray.origin );\n\t\t\tthis.direction.copy( ray.direction );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tat: function ( t, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t\t},\n\n\t\tlookAt: function ( v ) {\n\n\t\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\trecast: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function recast( t ) {\n\n\t\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\t\treturn this;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclosestPointToPoint: function ( point, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\tresult.subVectors( point, this.origin );\n\t\t\tvar directionDistance = result.dot( this.direction );\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn result.copy( this.origin );\n\n\t\t\t}\n\n\t\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t},\n\n\t\tdistanceToPoint: function ( point ) {\n\n\t\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t\t},\n\n\t\tdistanceSqToPoint: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function distanceSqToPoint( point ) {\n\n\t\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t\t// point behind the ray\n\n\t\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t\t\t}\n\n\t\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\t\treturn v1.distanceToSquared( point );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tdistanceSqToSegment: function () {\n\n\t\t\tvar segCenter = new Vector3();\n\t\t\tvar segDir = new Vector3();\n\t\t\tvar diff = new Vector3();\n\n\t\t\treturn function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t\t// defined by v0 and v1\n\t\t\t\t// It can also set two optional targets :\n\t\t\t\t// - The closest point on the ray\n\t\t\t\t// - The closest point on the segment\n\n\t\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\t\tvar c = diff.lengthSq();\n\t\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\t\tif ( det > 0 ) {\n\n\t\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\t\textDet = segExtent * det;\n\n\t\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t\t}\n\n\t\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t\t}\n\n\t\t\t\treturn sqrDist;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tintersectSphere: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function intersectSphere( sphere, optionalTarget ) {\n\n\t\t\t\tv1.subVectors( sphere.center, this.origin );\n\t\t\t\tvar tca = v1.dot( this.direction );\n\t\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\t\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\t\tvar t0 = tca - thc;\n\n\t\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\t\tvar t1 = tca + thc;\n\n\t\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t\t// test to see if t0 is behind the ray:\n\t\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\n\n\t\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\t\t\treturn this.at( t0, optionalTarget );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tintersectsSphere: function ( sphere ) {\n\n\t\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t\t},\n\n\t\tdistanceToPlane: function ( plane ) {\n\n\t\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\t\tif ( denominator === 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\t\treturn 0;\n\n\t\t\t\t}\n\n\t\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t\t// Return if the ray never intersects the plane\n\n\t\t\treturn t >= 0 ? t :  null;\n\n\t\t},\n\n\t\tintersectPlane: function ( plane, optionalTarget ) {\n\n\t\t\tvar t = this.distanceToPlane( plane );\n\n\t\t\tif ( t === null ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\treturn this.at( t, optionalTarget );\n\n\t\t},\n\n\t\tintersectsPlane: function ( plane ) {\n\n\t\t\t// check if the ray lies on the plane first\n\n\t\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\t\tif ( distToPoint === 0 ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tintersectBox: function ( box, optionalTarget ) {\n\n\t\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\t\tvar invdirx = 1 / this.direction.x,\n\t\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\t\tvar origin = this.origin;\n\n\t\t\tif ( invdirx >= 0 ) {\n\n\t\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t\t} else {\n\n\t\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t\t}\n\n\t\t\tif ( invdiry >= 0 ) {\n\n\t\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t\t} else {\n\n\t\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t\t}\n\n\t\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\t\tif ( invdirz >= 0 ) {\n\n\t\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t\t} else {\n\n\t\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t\t}\n\n\t\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t\t//return point closest to the ray (positive side)\n\n\t\t\tif ( tmax < 0 ) return null;\n\n\t\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\n\n\t\t},\n\n\t\tintersectsBox: ( function () {\n\n\t\t\tvar v = new Vector3();\n\n\t\t\treturn function intersectsBox( box ) {\n\n\t\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t\t};\n\n\t\t} )(),\n\n\t\tintersectTriangle: function () {\n\n\t\t\t// Compute the offset origin, edges, and normal.\n\t\t\tvar diff = new Vector3();\n\t\t\tvar edge1 = new Vector3();\n\t\t\tvar edge2 = new Vector3();\n\t\t\tvar normal = new Vector3();\n\n\t\t\treturn function intersectTriangle( a, b, c, backfaceCulling, optionalTarget ) {\n\n\t\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t\t\tedge1.subVectors( b, a );\n\t\t\t\tedge2.subVectors( c, a );\n\t\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\t\tvar sign;\n\n\t\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\t\tsign = 1;\n\n\t\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\t\tsign = - 1;\n\t\t\t\t\tDdN = - DdN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\tdiff.subVectors( this.origin, a );\n\t\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t\t// b1 < 0, no intersection\n\t\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t\t// b2 < 0, no intersection\n\t\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\t// b1+b2 > 1, no intersection\n\t\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\t// Line intersects triangle, check if ray does.\n\t\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t\t// t < 0, no intersection\n\t\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\t// Ray intersects triangle.\n\t\t\t\treturn this.at( QdN / DdN, optionalTarget );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tapplyMatrix4: function ( matrix4 ) {\n\n\t\t\tthis.origin.applyMatrix4( matrix4 );\n\t\t\tthis.direction.transformDirection( matrix4 );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( ray ) {\n\n\t\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t */\n\n\tfunction Line3( start, end ) {\n\n\t\tthis.start = ( start !== undefined ) ? start : new Vector3();\n\t\tthis.end = ( end !== undefined ) ? end : new Vector3();\n\n\t}\n\n\tObject.assign( Line3.prototype, {\n\n\t\tset: function ( start, end ) {\n\n\t\t\tthis.start.copy( start );\n\t\t\tthis.end.copy( end );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( line ) {\n\n\t\t\tthis.start.copy( line.start );\n\t\t\tthis.end.copy( line.end );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetCenter: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t\t},\n\n\t\tdelta: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\treturn result.subVectors( this.end, this.start );\n\n\t\t},\n\n\t\tdistanceSq: function () {\n\n\t\t\treturn this.start.distanceToSquared( this.end );\n\n\t\t},\n\n\t\tdistance: function () {\n\n\t\t\treturn this.start.distanceTo( this.end );\n\n\t\t},\n\n\t\tat: function ( t, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t\t},\n\n\t\tclosestPointToPointParameter: function () {\n\n\t\t\tvar startP = new Vector3();\n\t\t\tvar startEnd = new Vector3();\n\n\t\t\treturn function closestPointToPointParameter( point, clampToLine ) {\n\n\t\t\t\tstartP.subVectors( point, this.start );\n\t\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\t\tif ( clampToLine ) {\n\n\t\t\t\t\tt = _Math.clamp( t, 0, 1 );\n\n\t\t\t\t}\n\n\t\t\t\treturn t;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\n\n\t\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t\t},\n\n\t\tapplyMatrix4: function ( matrix ) {\n\n\t\t\tthis.start.applyMatrix4( matrix );\n\t\t\tthis.end.applyMatrix4( matrix );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tequals: function ( line ) {\n\n\t\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Triangle( a, b, c ) {\n\n\t\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\t\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\t\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n\t}\n\n\tObject.assign( Triangle, {\n\n\t\tnormal: function () {\n\n\t\t\tvar v0 = new Vector3();\n\n\t\t\treturn function normal( a, b, c, optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\t\tresult.subVectors( c, b );\n\t\t\t\tv0.subVectors( a, b );\n\t\t\t\tresult.cross( v0 );\n\n\t\t\t\tvar resultLengthSq = result.lengthSq();\n\t\t\t\tif ( resultLengthSq > 0 ) {\n\n\t\t\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn result.set( 0, 0, 0 );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\t// static/instance method to calculate barycentric coordinates\n\t\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\t\tbarycoordFromPoint: function () {\n\n\t\t\tvar v0 = new Vector3();\n\t\t\tvar v1 = new Vector3();\n\t\t\tvar v2 = new Vector3();\n\n\t\t\treturn function barycoordFromPoint( point, a, b, c, optionalTarget ) {\n\n\t\t\t\tv0.subVectors( c, a );\n\t\t\t\tv1.subVectors( b, a );\n\t\t\t\tv2.subVectors( point, a );\n\n\t\t\t\tvar dot00 = v0.dot( v0 );\n\t\t\t\tvar dot01 = v0.dot( v1 );\n\t\t\t\tvar dot02 = v0.dot( v2 );\n\t\t\t\tvar dot11 = v1.dot( v1 );\n\t\t\t\tvar dot12 = v1.dot( v2 );\n\n\t\t\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\t\t// collinear or singular triangle\n\t\t\t\tif ( denom === 0 ) {\n\n\t\t\t\t\t// arbitrary location outside of triangle?\n\t\t\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\t\t\treturn result.set( - 2, - 1, - 1 );\n\n\t\t\t\t}\n\n\t\t\t\tvar invDenom = 1 / denom;\n\t\t\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\t\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t\t\t// barycentric coordinates must always sum to 1\n\t\t\t\treturn result.set( 1 - u - v, v, u );\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tcontainsPoint: function () {\n\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function containsPoint( point, a, b, c ) {\n\n\t\t\t\tvar result = Triangle.barycoordFromPoint( point, a, b, c, v1 );\n\n\t\t\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\n\n\t\t\t};\n\n\t\t}()\n\n\t} );\n\n\tObject.assign( Triangle.prototype, {\n\n\t\tset: function ( a, b, c ) {\n\n\t\t\tthis.a.copy( a );\n\t\t\tthis.b.copy( b );\n\t\t\tthis.c.copy( c );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\t\tthis.a.copy( points[ i0 ] );\n\t\t\tthis.b.copy( points[ i1 ] );\n\t\t\tthis.c.copy( points[ i2 ] );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( triangle ) {\n\n\t\t\tthis.a.copy( triangle.a );\n\t\t\tthis.b.copy( triangle.b );\n\t\t\tthis.c.copy( triangle.c );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tarea: function () {\n\n\t\t\tvar v0 = new Vector3();\n\t\t\tvar v1 = new Vector3();\n\n\t\t\treturn function area() {\n\n\t\t\t\tv0.subVectors( this.c, this.b );\n\t\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tmidpoint: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t\t},\n\n\t\tnormal: function ( optionalTarget ) {\n\n\t\t\treturn Triangle.normal( this.a, this.b, this.c, optionalTarget );\n\n\t\t},\n\n\t\tplane: function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Plane();\n\n\t\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t\t},\n\n\t\tbarycoordFromPoint: function ( point, optionalTarget ) {\n\n\t\t\treturn Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\n\n\t\t},\n\n\t\tcontainsPoint: function ( point ) {\n\n\t\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t\t},\n\n\t\tclosestPointToPoint: function () {\n\n\t\t\tvar plane = new Plane();\n\t\t\tvar edgeList = [ new Line3(), new Line3(), new Line3() ];\n\t\t\tvar projectedPoint = new Vector3();\n\t\t\tvar closestPoint = new Vector3();\n\n\t\t\treturn function closestPointToPoint( point, optionalTarget ) {\n\n\t\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\t\tvar minDistance = Infinity;\n\n\t\t\t\t// project the point onto the plane of the triangle\n\n\t\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\n\t\t\t\tplane.projectPoint( point, projectedPoint );\n\n\t\t\t\t// check if the projection lies within the triangle\n\n\t\t\t\tif( this.containsPoint( projectedPoint ) === true ) {\n\n\t\t\t\t\t// if so, this is the closest point\n\n\t\t\t\t\tresult.copy( projectedPoint );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\n\n\t\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\n\t\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\n\t\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\n\n\t\t\t\t\tfor( var i = 0; i < edgeList.length; i ++ ) {\n\n\t\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\n\n\t\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\n\n\t\t\t\t\t\tif( distance < minDistance ) {\n\n\t\t\t\t\t\t\tminDistance = distance;\n\n\t\t\t\t\t\t\tresult.copy( closestPoint );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\n\t\t\t};\n\n\t\t}(),\n\n\t\tequals: function ( triangle ) {\n\n\t\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author jonobr1 / http://jonobr1.com/\n\t */\n\n\tfunction Mesh( geometry, material ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Mesh';\n\n\t\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\t\tthis.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\t\tthis.drawMode = TrianglesDrawMode;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Mesh,\n\n\t\tisMesh: true,\n\n\t\tsetDrawMode: function ( value ) {\n\n\t\t\tthis.drawMode = value;\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tObject3D.prototype.copy.call( this, source );\n\n\t\t\tthis.drawMode = source.drawMode;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tupdateMorphTargets: function () {\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar m, ml, name;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphTargets.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphTargets[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\traycast: ( function () {\n\n\t\t\tvar inverseMatrix = new Matrix4();\n\t\t\tvar ray = new Ray();\n\t\t\tvar sphere = new Sphere();\n\n\t\t\tvar vA = new Vector3();\n\t\t\tvar vB = new Vector3();\n\t\t\tvar vC = new Vector3();\n\n\t\t\tvar tempA = new Vector3();\n\t\t\tvar tempB = new Vector3();\n\t\t\tvar tempC = new Vector3();\n\n\t\t\tvar uvA = new Vector2();\n\t\t\tvar uvB = new Vector2();\n\t\t\tvar uvC = new Vector2();\n\n\t\t\tvar barycoord = new Vector3();\n\n\t\t\tvar intersectionPoint = new Vector3();\n\t\t\tvar intersectionPointWorld = new Vector3();\n\n\t\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\n\n\t\t\t\tTriangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\n\n\t\t\t\tuv1.multiplyScalar( barycoord.x );\n\t\t\t\tuv2.multiplyScalar( barycoord.y );\n\t\t\t\tuv3.multiplyScalar( barycoord.z );\n\n\t\t\t\tuv1.add( uv2 ).add( uv3 );\n\n\t\t\t\treturn uv1.clone();\n\n\t\t\t}\n\n\t\t\tfunction checkIntersection( object, raycaster, ray, pA, pB, pC, point ) {\n\n\t\t\t\tvar intersect;\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t\t\t\t}\n\n\t\t\t\tif ( intersect === null ) return null;\n\n\t\t\t\tintersectionPointWorld.copy( point );\n\t\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\t\t\t\treturn {\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tpoint: intersectionPointWorld.clone(),\n\t\t\t\t\tobject: object\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\n\n\t\t\t\tvA.fromBufferAttribute( position, a );\n\t\t\t\tvB.fromBufferAttribute( position, b );\n\t\t\t\tvC.fromBufferAttribute( position, c );\n\n\t\t\t\tvar intersection = checkIntersection( object, raycaster, ray, vA, vB, vC, intersectionPoint );\n\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tif ( uv ) {\n\n\t\t\t\t\t\tuvA.fromBufferAttribute( uv, a );\n\t\t\t\t\t\tuvB.fromBufferAttribute( uv, b );\n\t\t\t\t\t\tuvC.fromBufferAttribute( uv, c );\n\n\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection.face = new Face3( a, b, c, Triangle.normal( vA, vB, vC ) );\n\t\t\t\t\tintersection.faceIndex = a;\n\n\t\t\t\t}\n\n\t\t\t\treturn intersection;\n\n\t\t\t}\n\n\t\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\t\tvar geometry = this.geometry;\n\t\t\t\tvar material = this.material;\n\t\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\t\tif ( material === undefined ) return;\n\n\t\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t\t//\n\n\t\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t\t// Check boundingBox before continuing\n\n\t\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t\t\t}\n\n\t\t\t\tvar intersection;\n\n\t\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\tvar a, b, c;\n\t\t\t\t\tvar index = geometry.index;\n\t\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\t\tvar uv = geometry.attributes.uv;\n\t\t\t\t\tvar i, l;\n\n\t\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t\t// indexed buffer geometry\n\n\t\t\t\t\t\tfor ( i = 0, l = index.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\t\t\tfor ( i = 0, l = position.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\ta = i;\n\t\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\t\tvar fvA, fvB, fvC;\n\t\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\t\tvar faces = geometry.faces;\n\t\t\t\t\tvar uvs;\n\n\t\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\tvar face = faces[ f ];\n\t\t\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\n\n\t\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\n\t\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\n\t\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvA.add( fvA );\n\t\t\t\t\t\t\tvB.add( fvB );\n\t\t\t\t\t\t\tvC.add( fvC );\n\n\t\t\t\t\t\t\tfvA = vA;\n\t\t\t\t\t\t\tfvB = vB;\n\t\t\t\t\t\t\tfvC = vC;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tintersection = checkIntersection( this, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tintersection.face = face;\n\t\t\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}() ),\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\n\n\t\tvar clearColor = new Color( 0x000000 );\n\t\tvar clearAlpha = 0;\n\n\t\tvar planeCamera, planeMesh;\n\t\tvar boxCamera, boxMesh;\n\n\t\tfunction render( scene, camera, forceClear ) {\n\n\t\t\tvar background = scene.background;\n\n\t\t\tif ( background === null ) {\n\n\t\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t\t} else if ( background && background.isColor ) {\n\n\t\t\t\tsetClear( background, 1 );\n\t\t\t\tforceClear = true;\n\n\t\t\t}\n\n\t\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t\t}\n\n\t\t\tif ( background && background.isCubeTexture ) {\n\n\t\t\t\tif ( boxCamera === undefined ) {\n\n\t\t\t\t\tboxCamera = new PerspectiveCamera();\n\n\t\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\t\tnew BoxBufferGeometry( 5, 5, 5 ),\n\t\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\t\tuniforms: ShaderLib.cube.uniforms,\n\t\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\t\tfog: false\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tboxCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\t\tboxCamera.matrixWorld.extractRotation( camera.matrixWorld );\n\t\t\t\tboxCamera.matrixWorldInverse.getInverse( boxCamera.matrixWorld );\n\n\t\t\t\tboxMesh.material.uniforms[ \"tCube\" ].value = background;\n\t\t\t\tboxMesh.modelViewMatrix.multiplyMatrices( boxCamera.matrixWorldInverse, boxMesh.matrixWorld );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t\trenderer.renderBufferDirect( boxCamera, null, boxMesh.geometry, boxMesh.material, boxMesh, null );\n\n\t\t\t} else if ( background && background.isTexture ) {\n\n\t\t\t\tif ( planeCamera === undefined ) {\n\n\t\t\t\t\tplaneCamera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\t\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\t\tnew MeshBasicMaterial( { depthTest: false, depthWrite: false, fog: false } )\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tplaneMesh.material.map = background;\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t\trenderer.renderBufferDirect( planeCamera, null, planeMesh.geometry, planeMesh.material, planeMesh, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setClear( color, alpha ) {\n\n\t\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tgetClearColor: function () {\n\n\t\t\t\treturn clearColor;\n\n\t\t\t},\n\t\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\t\tclearColor.set( color );\n\t\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t\t},\n\t\t\tgetClearAlpha: function () {\n\n\t\t\t\treturn clearAlpha;\n\n\t\t\t},\n\t\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\t\tclearAlpha = alpha;\n\t\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t\t},\n\t\t\trender: render\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction painterSortStable( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.program && b.program && a.program !== b.program ) {\n\n\t\t\treturn a.program.id - b.program.id;\n\n\t\t} else if ( a.material.id !== b.material.id ) {\n\n\t\t\treturn a.material.id - b.material.id;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn a.z - b.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction reversePainterSortStable( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction WebGLRenderList() {\n\n\t\tvar opaque = [];\n\t\tvar opaqueLastIndex = - 1;\n\n\t\tvar transparent = [];\n\t\tvar transparentLastIndex = - 1;\n\n\t\tfunction init() {\n\n\t\t\topaqueLastIndex = - 1;\n\t\t\ttransparentLastIndex = - 1;\n\n\t\t}\n\n\t\tfunction push( object, geometry, material, z, group ) {\n\n\t\t\tvar array, index;\n\n\t\t\t// allocate the next position in the appropriate array\n\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\tarray = transparent;\n\t\t\t\tindex = ++ transparentLastIndex;\n\n\t\t\t} else {\n\n\t\t\t\tarray = opaque;\n\t\t\t\tindex = ++ opaqueLastIndex;\n\n\t\t\t}\n\n\t\t\t// recycle existing render item or grow the array\n\n\t\t\tvar renderItem = array[ index ];\n\n\t\t\tif ( renderItem ) {\n\n\t\t\t\trenderItem.id = object.id;\n\t\t\t\trenderItem.object = object;\n\t\t\t\trenderItem.geometry = geometry;\n\t\t\t\trenderItem.material = material;\n\t\t\t\trenderItem.program = material.program;\n\t\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\t\trenderItem.z = z;\n\t\t\t\trenderItem.group = group;\n\n\t\t\t} else {\n\n\t\t\t\trenderItem = {\n\t\t\t\t\tid: object.id,\n\t\t\t\t\tobject: object,\n\t\t\t\t\tgeometry: geometry,\n\t\t\t\t\tmaterial: material,\n\t\t\t\t\tprogram: material.program,\n\t\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\t\tz: z,\n\t\t\t\t\tgroup: group\n\t\t\t\t};\n\n\t\t\t\t// assert( index === array.length );\n\t\t\t\tarray.push( renderItem );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction finish() {\n\n\t\t\topaque.length = opaqueLastIndex + 1;\n\t\t\ttransparent.length = transparentLastIndex + 1;\n\n\t\t}\n\n\t\tfunction sort() {\n\n\t\t\topaque.sort( painterSortStable );\n\t\t\ttransparent.sort( reversePainterSortStable );\n\n\t\t}\n\n\t\treturn {\n\t\t\topaque: opaque,\n\t\t\ttransparent: transparent,\n\n\t\t\tinit: init,\n\t\t\tpush: push,\n\t\t\tfinish: finish,\n\n\t\t\tsort: sort\n\t\t};\n\n\t}\n\n\tfunction WebGLRenderLists() {\n\n\t\tvar lists = {};\n\n\t\tfunction get( scene, camera ) {\n\n\t\t\tvar hash = scene.id + ',' + camera.id;\n\t\t\tvar list = lists[ hash ];\n\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\t// console.log( 'THREE.WebGLRenderLists:', hash );\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tlists[ hash ] = list;\n\n\t\t\t}\n\n\t\t\treturn list;\n\n\t\t}\n\n\t\tfunction dispose() {\n\n\t\t\tlists = {};\n\n\t\t}\n\n\t\treturn {\n\t\t\tget: get,\n\t\t\tdispose: dispose\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLIndexedBufferRenderer( gl, extensions, infoRender ) {\n\n\t\tvar mode;\n\n\t\tfunction setMode( value ) {\n\n\t\t\tmode = value;\n\n\t\t}\n\n\t\tvar type, bytesPerElement;\n\n\t\tfunction setIndex( value ) {\n\n\t\t\ttype = value.type;\n\t\t\tbytesPerElement = value.bytesPerElement;\n\n\t\t}\n\n\t\tfunction render( start, count ) {\n\n\t\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\t\tinfoRender.calls ++;\n\t\t\tinfoRender.vertices += count;\n\n\t\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += count / 3;\n\n\t\t}\n\n\t\tfunction renderInstances( geometry, start, count ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\textension.drawElementsInstancedANGLE( mode, count, type, start * bytesPerElement, geometry.maxInstancedCount );\n\n\t\t\tinfoRender.calls ++;\n\t\t\tinfoRender.vertices += count * geometry.maxInstancedCount;\n\n\t\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += geometry.maxInstancedCount * count / 3;\n\n\t\t}\n\n\t\t//\n\n\t\tthis.setMode = setMode;\n\t\tthis.setIndex = setIndex;\n\t\tthis.render = render;\n\t\tthis.renderInstances = renderInstances;\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLBufferRenderer( gl, extensions, infoRender ) {\n\n\t\tvar mode;\n\n\t\tfunction setMode( value ) {\n\n\t\t\tmode = value;\n\n\t\t}\n\n\t\tfunction render( start, count ) {\n\n\t\t\tgl.drawArrays( mode, start, count );\n\n\t\t\tinfoRender.calls ++;\n\t\t\tinfoRender.vertices += count;\n\n\t\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += count / 3;\n\n\t\t}\n\n\t\tfunction renderInstances( geometry, start, count ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar position = geometry.attributes.position;\n\n\t\t\tif ( position.isInterleavedBufferAttribute ) {\n\n\t\t\t\tcount = position.data.count;\n\n\t\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t\t} else {\n\n\t\t\t\textension.drawArraysInstancedANGLE( mode, start, count, geometry.maxInstancedCount );\n\n\t\t\t}\n\n\t\t\tinfoRender.calls ++;\n\t\t\tinfoRender.vertices += count * geometry.maxInstancedCount;\n\n\t\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += geometry.maxInstancedCount * count / 3;\n\n\t\t}\n\n\t\t//\n\n\t\tthis.setMode = setMode;\n\t\tthis.render = render;\n\t\tthis.renderInstances = renderInstances;\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLGeometries( gl, attributes, infoMemory ) {\n\n\t\tvar geometries = {};\n\t\tvar wireframeAttributes = {};\n\n\t\tfunction onGeometryDispose( event ) {\n\n\t\t\tvar geometry = event.target;\n\t\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t\t}\n\n\t\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t\t}\n\n\t\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\t\tdelete geometries[ geometry.id ];\n\n\t\t\t// TODO Remove duplicate code\n\n\t\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\t\tif ( attribute ) {\n\n\t\t\t\tattributes.remove( attribute );\n\t\t\t\tdelete wireframeAttributes[ geometry.id ];\n\n\t\t\t}\n\n\t\t\tattribute = wireframeAttributes[ buffergeometry.id ];\n\n\t\t\tif ( attribute ) {\n\n\t\t\t\tattributes.remove( attribute );\n\t\t\t\tdelete wireframeAttributes[ buffergeometry.id ];\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tinfoMemory.geometries --;\n\n\t\t}\n\n\t\tfunction get( object, geometry ) {\n\n\t\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tbuffergeometry = geometry;\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t\t}\n\n\t\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t\t}\n\n\t\t\tgeometries[ geometry.id ] = buffergeometry;\n\n\t\t\tinfoMemory.geometries ++;\n\n\t\t\treturn buffergeometry;\n\n\t\t}\n\n\t\tfunction update( geometry ) {\n\n\t\t\tvar index = geometry.index;\n\t\t\tvar geometryAttributes = geometry.attributes;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t\t// morph targets\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\t\tfor ( var name in morphAttributes ) {\n\n\t\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getWireframeAttribute( geometry ) {\n\n\t\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\t\tif ( attribute ) return attribute;\n\n\t\t\tvar indices = [];\n\n\t\t\tvar geometryIndex = geometry.index;\n\t\t\tvar geometryAttributes = geometry.attributes;\n\n\t\t\t// console.time( 'wireframe' );\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\tvar array = geometryIndex.array;\n\n\t\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar array = geometryAttributes.position.array;\n\n\t\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\t\tvar a = i + 0;\n\t\t\t\t\tvar b = i + 1;\n\t\t\t\t\tvar c = i + 2;\n\n\t\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// console.timeEnd( 'wireframe' );\n\n\t\t\tattribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\n\t\t\tattributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t\twireframeAttributes[ geometry.id ] = attribute;\n\n\t\t\treturn attribute;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tget: get,\n\t\t\tupdate: update,\n\n\t\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLLights() {\n\n\t\tvar lights = {};\n\n\t\treturn {\n\n\t\t\tget: function ( light ) {\n\n\t\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\t\treturn lights[ light.id ];\n\n\t\t\t\t}\n\n\t\t\t\tvar uniforms;\n\n\t\t\t\tswitch ( light.type ) {\n\n\t\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\t\tuniforms = {\n\t\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\t\tcolor: new Color(),\n\n\t\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SpotLight':\n\t\t\t\t\t\tuniforms = {\n\t\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PointLight':\n\t\t\t\t\t\tuniforms = {\n\t\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\t\tuniforms = {\n\t\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\t\tuniforms = {\n\t\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\t\treturn uniforms;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLObjects( gl, geometries, infoRender ) {\n\n\t\tvar updateList = {};\n\n\t\tfunction update( object ) {\n\n\t\t\tvar frame = infoRender.frame;\n\n\t\t\tvar geometry = object.geometry;\n\t\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t\t// Update once per frame\n\n\t\t\tif ( updateList[ buffergeometry.id ] !== frame ) {\n\n\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t\t}\n\n\t\t\t\tgeometries.update( buffergeometry );\n\n\t\t\t\tupdateList[ buffergeometry.id ] = frame;\n\n\t\t\t}\n\n\t\t\treturn buffergeometry;\n\n\t\t}\n\n\t\tfunction clear() {\n\n\t\t\tupdateList = {};\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tupdate: update,\n\t\t\tclear: clear\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction addLineNumbers( string ) {\n\n\t\tvar lines = string.split( '\\n' );\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t\t}\n\n\t\treturn lines.join( '\\n' );\n\n\t}\n\n\tfunction WebGLShader( gl, type, string ) {\n\n\t\tvar shader = gl.createShader( type );\n\n\t\tgl.shaderSource( shader, string );\n\t\tgl.compileShader( shader );\n\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t\t}\n\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t\t}\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\treturn shader;\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tvar programIdCount = 0;\n\n\tfunction getEncodingComponents( encoding ) {\n\n\t\tswitch ( encoding ) {\n\n\t\t\tcase LinearEncoding:\n\t\t\t\treturn [ 'Linear','( value )' ];\n\t\t\tcase sRGBEncoding:\n\t\t\t\treturn [ 'sRGB','( value )' ];\n\t\t\tcase RGBEEncoding:\n\t\t\t\treturn [ 'RGBE','( value )' ];\n\t\t\tcase RGBM7Encoding:\n\t\t\t\treturn [ 'RGBM','( value, 7.0 )' ];\n\t\t\tcase RGBM16Encoding:\n\t\t\t\treturn [ 'RGBM','( value, 16.0 )' ];\n\t\t\tcase RGBDEncoding:\n\t\t\t\treturn [ 'RGBD','( value, 256.0 )' ];\n\t\t\tcase GammaEncoding:\n\t\t\t\treturn [ 'Gamma','( value, float( GAMMA_FACTOR ) )' ];\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t\t}\n\n\t}\n\n\tfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\t\tvar components = getEncodingComponents( encoding );\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[ 0 ] + \"ToLinear\" + components[ 1 ] + \"; }\";\n\n\t}\n\n\tfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\t\tvar components = getEncodingComponents( encoding );\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[ 0 ] + components[ 1 ] + \"; }\";\n\n\t}\n\n\tfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\t\tvar toneMappingName;\n\n\t\tswitch ( toneMapping ) {\n\n\t\t\tcase LinearToneMapping:\n\t\t\t\ttoneMappingName = \"Linear\";\n\t\t\t\tbreak;\n\n\t\t\tcase ReinhardToneMapping:\n\t\t\t\ttoneMappingName = \"Reinhard\";\n\t\t\t\tbreak;\n\n\t\t\tcase Uncharted2ToneMapping:\n\t\t\t\ttoneMappingName = \"Uncharted2\";\n\t\t\t\tbreak;\n\n\t\t\tcase CineonToneMapping:\n\t\t\t\ttoneMappingName = \"OptimizedCineon\";\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t\t}\n\n\t\treturn \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\n\n\t}\n\n\tfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\t\textensions = extensions || {};\n\n\t\tvar chunks = [\n\t\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t\t];\n\n\t\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tfunction generateDefines( defines ) {\n\n\t\tvar chunks = [];\n\n\t\tfor ( var name in defines ) {\n\n\t\t\tvar value = defines[ name ];\n\n\t\t\tif ( value === false ) continue;\n\n\t\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t\t}\n\n\t\treturn chunks.join( '\\n' );\n\n\t}\n\n\tfunction fetchAttributeLocations( gl, program, identifiers ) {\n\n\t\tvar attributes = {};\n\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\t\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\t\tvar info = gl.getActiveAttrib( program, i );\n\t\t\tvar name = info.name;\n\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\n\n\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t\t}\n\n\t\treturn attributes;\n\n\t}\n\n\tfunction filterEmptyLine( string ) {\n\n\t\treturn string !== '';\n\n\t}\n\n\tfunction replaceLightNums( string, parameters ) {\n\n\t\treturn string\n\t\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\n\n\t}\n\n\tfunction parseIncludes( string ) {\n\n\t\tvar pattern = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\n\n\t\tfunction replace( match, include ) {\n\n\t\t\tvar replace = ShaderChunk[ include ];\n\n\t\t\tif ( replace === undefined ) {\n\n\t\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t\t}\n\n\t\t\treturn parseIncludes( replace );\n\n\t\t}\n\n\t\treturn string.replace( pattern, replace );\n\n\t}\n\n\tfunction unrollLoops( string ) {\n\n\t\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\n\t\tfunction replace( match, start, end, snippet ) {\n\n\t\t\tvar unroll = '';\n\n\t\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\n\n\t\t\t}\n\n\t\t\treturn unroll;\n\n\t\t}\n\n\t\treturn string.replace( pattern, replace );\n\n\t}\n\n\tfunction WebGLProgram( renderer, code, material, shader, parameters ) {\n\n\t\tvar gl = renderer.context;\n\n\t\tvar extensions = material.extensions;\n\t\tvar defines = material.defines;\n\n\t\tvar vertexShader = shader.vertexShader;\n\t\tvar fragmentShader = shader.fragmentShader;\n\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\t\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t\t}\n\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\t\tif ( parameters.envMap ) {\n\n\t\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\t\tcase CubeReflectionMapping:\n\t\t\t\tcase CubeRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase CubeUVReflectionMapping:\n\t\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EquirectangularReflectionMapping:\n\t\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase SphericalReflectionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\t\tcase CubeRefractionMapping:\n\t\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tswitch ( material.combine ) {\n\n\t\t\t\tcase MultiplyOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MixOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase AddOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\t\t// console.log( 'building new program ' );\n\n\t\t//\n\n\t\tvar customExtensions = generateExtensions( extensions, parameters, renderer.extensions );\n\n\t\tvar customDefines = generateDefines( defines );\n\n\t\t//\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar prefixVertex, prefixFragment;\n\n\t\tif ( material.isRawShaderMaterial ) {\n\n\t\t\tprefixVertex = [\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\t'\\n'\n\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\t\tprefixFragment = [\n\n\t\t\t\tcustomExtensions,\n\t\t\t\tcustomDefines,\n\n\t\t\t\t'\\n'\n\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\t} else {\n\n\t\t\tprefixVertex = [\n\n\t\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t\t'attribute vec3 position;',\n\t\t\t\t'attribute vec3 normal;',\n\t\t\t\t'attribute vec2 uv;',\n\n\t\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t\t'\tattribute vec3 color;',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t\t'\t#else',\n\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t\t'\t#endif',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'\\n'\n\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\t\tprefixFragment = [\n\n\t\t\t\tcustomExtensions,\n\n\t\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\n\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\t\t\t\t'#define UNION_CLIPPING_PLANES ' + (parameters.numClippingPlanes - parameters.numClipIntersection),\n\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\t\tparameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : '',\n\n\t\t\t\tparameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : '',\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t\tparameters.envMap && renderer.extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t\t( parameters.toneMapping !== NoToneMapping ) ? \"#define TONE_MAPPING\" : '',\n\t\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '',  // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( \"toneMapping\", parameters.toneMapping ) : '',\n\n\t\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( \"linearToOutputTexel\", parameters.outputEncoding ) : '',\n\n\t\t\t\tparameters.depthPacking ? \"#define DEPTH_PACKING \" + material.depthPacking : '',\n\n\t\t\t\t'\\n'\n\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\t}\n\n\t\tvertexShader = parseIncludes( vertexShader );\n\t\tvertexShader = replaceLightNums( vertexShader, parameters );\n\n\t\tfragmentShader = parseIncludes( fragmentShader );\n\t\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\n\t\tif ( ! material.isShaderMaterial ) {\n\n\t\t\tvertexShader = unrollLoops( vertexShader );\n\t\t\tfragmentShader = unrollLoops( fragmentShader );\n\n\t\t}\n\n\t\tvar vertexGlsl = prefixVertex + vertexShader;\n\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t\t// console.log( '*VERTEX*', vertexGlsl );\n\t\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\t\tvar glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\t\tvar glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\t\tgl.attachShader( program, glVertexShader );\n\t\tgl.attachShader( program, glFragmentShader );\n\n\t\t// Force a particular attribute to index 0.\n\n\t\tif ( material.index0AttributeName !== undefined ) {\n\n\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t\t} else if ( parameters.morphTargets === true ) {\n\n\t\t\t// programs with morphTargets displace position out of attribute 0\n\t\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t\t}\n\n\t\tgl.linkProgram( program );\n\n\t\tvar programLog = gl.getProgramInfoLog( program );\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\n\n\t\tvar runnable = true;\n\t\tvar haveDiagnostics = true;\n\n\t\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\t\t\t\tmaterial: material,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\t// clean up\n\n\t\tgl.deleteShader( glVertexShader );\n\t\tgl.deleteShader( glFragmentShader );\n\n\t\t// set up caching for uniform locations\n\n\t\tvar cachedUniforms;\n\n\t\tthis.getUniforms = function() {\n\n\t\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\t\tcachedUniforms =\n\t\t\t\t\tnew WebGLUniforms( gl, program, renderer );\n\n\t\t\t}\n\n\t\t\treturn cachedUniforms;\n\n\t\t};\n\n\t\t// set up caching for attribute locations\n\n\t\tvar cachedAttributes;\n\n\t\tthis.getAttributes = function() {\n\n\t\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t\t}\n\n\t\t\treturn cachedAttributes;\n\n\t\t};\n\n\t\t// free resource\n\n\t\tthis.destroy = function() {\n\n\t\t\tgl.deleteProgram( program );\n\t\t\tthis.program = undefined;\n\n\t\t};\n\n\t\t// DEPRECATED\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tuniforms: {\n\t\t\t\tget: function() {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\n\t\t\t\t\treturn this.getUniforms();\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tattributes: {\n\t\t\t\tget: function() {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\n\t\t\t\t\treturn this.getAttributes();\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\n\t\t//\n\n\t\tthis.id = programIdCount ++;\n\t\tthis.code = code;\n\t\tthis.usedTimes = 1;\n\t\tthis.program = program;\n\t\tthis.vertexShader = glVertexShader;\n\t\tthis.fragmentShader = glFragmentShader;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLPrograms( renderer, capabilities ) {\n\n\t\tvar programs = [];\n\n\t\tvar shaderIDs = {\n\t\t\tMeshDepthMaterial: 'depth',\n\t\t\tMeshNormalMaterial: 'normal',\n\t\t\tMeshBasicMaterial: 'basic',\n\t\t\tMeshLambertMaterial: 'lambert',\n\t\t\tMeshPhongMaterial: 'phong',\n\t\t\tMeshToonMaterial: 'phong',\n\t\t\tMeshStandardMaterial: 'physical',\n\t\t\tMeshPhysicalMaterial: 'physical',\n\t\t\tLineBasicMaterial: 'basic',\n\t\t\tLineDashedMaterial: 'dashed',\n\t\t\tPointsMaterial: 'points'\n\t\t};\n\n\t\tvar parameterNames = [\n\t\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\n\t\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\n\t\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\n\t\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\"\n\t\t];\n\n\n\t\tfunction allocateBones( object ) {\n\n\t\t\tvar skeleton = object.skeleton;\n\t\t\tvar bones = skeleton.bones;\n\n\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\treturn 1024;\n\n\t\t\t} else {\n\n\t\t\t\t// default for when object is not specified\n\t\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t\t//\n\t\t\t\t//  - leave some extra space for other uniforms\n\t\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t\t//    (up to 54 should be safe)\n\n\t\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\n\t\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\t\tvar maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\t\treturn 0;\n\n\t\t\t\t}\n\n\t\t\t\treturn maxBones;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\n\n\t\t\tvar encoding;\n\n\t\t\tif ( ! map ) {\n\n\t\t\t\tencoding = LinearEncoding;\n\n\t\t\t} else if ( map.isTexture ) {\n\n\t\t\t\tencoding = map.encoding;\n\n\t\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\tencoding = map.texture.encoding;\n\n\t\t\t}\n\n\t\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n\t\t\tif ( encoding === LinearEncoding && gammaOverrideLinear ) {\n\n\t\t\t\tencoding = GammaEncoding;\n\n\t\t\t}\n\n\t\t\treturn encoding;\n\n\t\t}\n\n\t\tthis.getParameters = function ( material, lights, fog, nClipPlanes, nClipIntersection, object ) {\n\n\t\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t\t// (not to blow over maxLights budget)\n\n\t\t\tvar maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\t\t\tvar precision = renderer.getPrecision();\n\n\t\t\tif ( material.precision !== null ) {\n\n\t\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\tvar parameters = {\n\n\t\t\t\tshaderID: shaderID,\n\n\t\t\t\tprecision: precision,\n\t\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\n\t\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\n\t\t\t\tmap: !! material.map,\n\t\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\n\t\t\t\tenvMap: !! material.envMap,\n\t\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\n\t\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\t\tlightMap: !! material.lightMap,\n\t\t\t\taoMap: !! material.aoMap,\n\t\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\n\t\t\t\tbumpMap: !! material.bumpMap,\n\t\t\t\tnormalMap: !! material.normalMap,\n\t\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\t\tspecularMap: !! material.specularMap,\n\t\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\t\tcombine: material.combine,\n\n\t\t\t\tvertexColors: material.vertexColors,\n\n\t\t\t\tfog: !! fog,\n\t\t\t\tuseFog: material.fog,\n\t\t\t\tfogExp: ( fog && fog.isFogExp2 ),\n\n\t\t\t\tflatShading: material.shading === FlatShading,\n\n\t\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n\n\t\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\t\tmaxBones: maxBones,\n\t\t\t\tuseVertexTexture: capabilities.floatVertexTextures,\n\n\t\t\t\tmorphTargets: material.morphTargets,\n\t\t\t\tmorphNormals: material.morphNormals,\n\t\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\t\tnumDirLights: lights.directional.length,\n\t\t\t\tnumPointLights: lights.point.length,\n\t\t\t\tnumSpotLights: lights.spot.length,\n\t\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\t\tdithering: material.dithering,\n\n\t\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && lights.shadows.length > 0,\n\t\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\t\ttoneMapping: renderer.toneMapping,\n\t\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\t\talphaTest: material.alphaTest,\n\t\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\t\tflipSided: material.side === BackSide,\n\n\t\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\n\n\t\t\t};\n\n\t\t\treturn parameters;\n\n\t\t};\n\n\t\tthis.getProgramCode = function ( material, parameters ) {\n\n\t\t\tvar array = [];\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tarray.push( parameters.shaderID );\n\n\t\t\t} else {\n\n\t\t\t\tarray.push( material.fragmentShader );\n\t\t\t\tarray.push( material.vertexShader );\n\n\t\t\t}\n\n\t\t\tif ( material.defines !== undefined ) {\n\n\t\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\t\tarray.push( name );\n\t\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( material.onBeforeCompile.toString() );\n\n\t\t\tarray.push( renderer.gammaOutput );\n\n\t\t\treturn array.join();\n\n\t\t};\n\n\t\tthis.acquireProgram = function ( material, shader, parameters, code ) {\n\n\t\t\tvar program;\n\n\t\t\t// Check if code has been already compiled\n\t\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\t\tvar programInfo = programs[ p ];\n\n\t\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\t\tprogram = programInfo;\n\t\t\t\t\t++ program.usedTimes;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( program === undefined ) {\n\n\t\t\t\tprogram = new WebGLProgram( renderer, code, material, shader, parameters );\n\t\t\t\tprograms.push( program );\n\n\t\t\t}\n\n\t\t\treturn program;\n\n\t\t};\n\n\t\tthis.releaseProgram = function ( program ) {\n\n\t\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t\t// Remove from unordered set\n\t\t\t\tvar i = programs.indexOf( program );\n\t\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\t\tprograms.pop();\n\n\t\t\t\t// Free WebGL resources\n\t\t\t\tprogram.destroy();\n\n\t\t\t}\n\n\t\t};\n\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tthis.programs = programs;\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLTextures( _gl, extensions, state, properties, capabilities, paramThreeToGL, infoMemory ) {\n\n\t\tvar _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext );\n\n\t\t//\n\n\t\tfunction clampToMaxSize( image, maxSize ) {\n\n\t\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t\t// premultiplied alpha.\n\n\t\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\t\treturn canvas;\n\n\t\t\t}\n\n\t\t\treturn image;\n\n\t\t}\n\n\t\tfunction isPowerOfTwo( image ) {\n\n\t\t\treturn _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\n\n\t\t}\n\n\t\tfunction makePowerOfTwo( image ) {\n\n\t\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement ) {\n\n\t\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\tcanvas.width = _Math.nearestPowerOfTwo( image.width );\n\t\t\t\tcanvas.height = _Math.nearestPowerOfTwo( image.height );\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\t\treturn canvas;\n\n\t\t\t}\n\n\t\t\treturn image;\n\n\t\t}\n\n\t\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t\t}\n\n\t\tfunction textureNeedsGenerateMipmaps( texture, isPowerOfTwo ) {\n\n\t\t\treturn texture.generateMipmaps && isPowerOfTwo &&\n\t\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t\t}\n\n\t\t// Fallback filters for non-power-of-2 textures\n\n\t\tfunction filterFallback( f ) {\n\n\t\t\tif ( f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter ) {\n\n\t\t\t\treturn _gl.NEAREST;\n\n\t\t\t}\n\n\t\t\treturn _gl.LINEAR;\n\n\t\t}\n\n\t\t//\n\n\t\tfunction onTextureDispose( event ) {\n\n\t\t\tvar texture = event.target;\n\n\t\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\t\tdeallocateTexture( texture );\n\n\t\t\tinfoMemory.textures --;\n\n\n\t\t}\n\n\t\tfunction onRenderTargetDispose( event ) {\n\n\t\t\tvar renderTarget = event.target;\n\n\t\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\t\tdeallocateRenderTarget( renderTarget );\n\n\t\t\tinfoMemory.textures --;\n\n\t\t}\n\n\t\t//\n\n\t\tfunction deallocateTexture( texture ) {\n\n\t\t\tvar textureProperties = properties.get( texture );\n\n\t\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\n\n\t\t\t\t// cube texture\n\n\t\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\n\n\t\t\t} else {\n\n\t\t\t\t// 2D texture\n\n\t\t\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t\t}\n\n\t\t\t// remove all webgl properties\n\t\t\tproperties.remove( texture );\n\n\t\t}\n\n\t\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\t\tif ( ! renderTarget ) return;\n\n\t\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t\t}\n\n\t\t\tproperties.remove( renderTarget.texture );\n\t\t\tproperties.remove( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\n\n\t\tfunction setTexture2D( texture, slot ) {\n\n\t\t\tvar textureProperties = properties.get( texture );\n\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\t\tvar image = texture.image;\n\n\t\t\t\tif ( image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\n\n\t\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tfunction setTextureCube( texture, slot ) {\n\n\t\t\tvar textureProperties = properties.get( texture );\n\n\t\t\tif ( texture.image.length === 6 ) {\n\n\t\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\t\tinfoMemory.textures ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\t\tvar isCompressed = ( texture && texture.isCompressedTexture );\n\t\t\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\t\t\tvar cubeImage = [];\n\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\t\t\tglFormat = paramThreeToGL( texture.format ),\n\t\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\n\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\" );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\n\n\t\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t\t}\n\n\t\tfunction setTextureParameters( textureType, texture, isPowerOfTwoImage ) {\n\n\t\t\tvar extension;\n\n\t\t\tif ( isPowerOfTwoImage ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( extension ) {\n\n\t\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\t\tif ( texture.type === HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\n\n\t\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t\tinfoMemory.textures ++;\n\n\t\t\t}\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\n\n\t\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\n\n\t\t\t\timage = makePowerOfTwo( image );\n\n\t\t\t}\n\n\t\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\tglFormat = paramThreeToGL( texture.format ),\n\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\n\n\t\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t\t// populate depth texture with dummy data\n\n\t\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tif ( !_isWebGL2 ) throw new Error('Float Depth Texture only supported in WebGL2.0');\n\t\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t} else if ( _isWebGL2 ) {\n\n\t\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.format === DepthFormat && internalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\t        console.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\t\tinternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\t// Render targets\n\n\t\t// Setup storage for target texture and bind it to correct framebuffer\n\t\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\t\tvar glFormat = paramThreeToGL( renderTarget.texture.format );\n\t\t\tvar glType = paramThreeToGL( renderTarget.texture.type );\n\t\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t\t}\n\n\t\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\t\tfunction setupRenderBufferStorage( renderbuffer, renderTarget ) {\n\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t\t} else {\n\n\t\t\t\t// FIXME: We don't support !depth !stencil\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t\t}\n\n\t\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\t\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\t\tif ( isCube ) throw new Error('Depth Texture with cube render targets is not supported!');\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\tif ( !( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\t\tthrow new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');\n\n\t\t\t}\n\n\t\t\t// upload an empty depth texture with framebuffer size\n\t\t\tif ( !properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\t\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\t\t\t}\n\n\t\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error('Unknown depthTexture format')\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup GL resources for a non-texture depth buffer\n\t\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\n\t\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\t\tif ( isCube ) throw new Error('target.depthTexture not supported in Cube render targets');\n\n\t\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t\t} else {\n\n\t\t\t\tif ( isCube ) {\n\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t\t}\n\n\t\t// Set up GL resources for the render target\n\t\tfunction setupRenderTarget( renderTarget ) {\n\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfoMemory.textures ++;\n\n\t\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\t\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\t\t// Setup framebuffer\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t\t// Setup color buffer\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t\t} else {\n\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t\t}\n\n\t\t\t// Setup depth and stencil buffers\n\n\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\t\tvar texture = renderTarget.texture;\n\t\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, isTargetPowerOfTwo ) ) {\n\n\t\t\t\tvar target = renderTarget.isWebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t\t_gl.generateMipmap( target );\n\t\t\t\tstate.bindTexture( target, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setTexture2D = setTexture2D;\n\t\tthis.setTextureCube = setTextureCube;\n\t\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\t\tthis.setupRenderTarget = setupRenderTarget;\n\t\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\n\t}\n\n\t/**\n\t * @author fordacious / fordacious.github.io\n\t */\n\n\tfunction WebGLProperties() {\n\n\t\tvar properties = {};\n\n\t\tfunction get( object ) {\n\n\t\t\tvar uuid = object.uuid;\n\t\t\tvar map = properties[ uuid ];\n\n\t\t\tif ( map === undefined ) {\n\n\t\t\t\tmap = {};\n\t\t\t\tproperties[ uuid ] = map;\n\n\t\t\t}\n\n\t\t\treturn map;\n\n\t\t}\n\n\t\tfunction remove( object ) {\n\n\t\t\tdelete properties[ object.uuid ];\n\n\t\t}\n\n\t\tfunction clear() {\n\n\t\t\tproperties = {};\n\n\t\t}\n\n\t\treturn {\n\t\t\tget: get,\n\t\t\tremove: remove,\n\t\t\tclear: clear\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLState( gl, extensions, paramThreeToGL ) {\n\n\t\tfunction ColorBuffer() {\n\n\t\t\tvar locked = false;\n\n\t\t\tvar color = new Vector4();\n\t\t\tvar currentColorMask = null;\n\t\t\tvar currentColorClear = new Vector4();\n\n\t\t\treturn {\n\n\t\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\t\tlocked = lock;\n\n\t\t\t\t},\n\n\t\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\treset: function () {\n\n\t\t\t\t\tlocked = false;\n\n\t\t\t\t\tcurrentColorMask = null;\n\t\t\t\t\tcurrentColorClear.set( 0, 0, 0, 1 );\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction DepthBuffer() {\n\n\t\t\tvar locked = false;\n\n\t\t\tvar currentDepthMask = null;\n\t\t\tvar currentDepthFunc = null;\n\t\t\tvar currentDepthClear = null;\n\n\t\t\treturn {\n\n\t\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\t\tlocked = lock;\n\n\t\t\t\t},\n\n\t\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\treset: function () {\n\n\t\t\t\t\tlocked = false;\n\n\t\t\t\t\tcurrentDepthMask = null;\n\t\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction StencilBuffer() {\n\n\t\t\tvar locked = false;\n\n\t\t\tvar currentStencilMask = null;\n\t\t\tvar currentStencilFunc = null;\n\t\t\tvar currentStencilRef = null;\n\t\t\tvar currentStencilFuncMask = null;\n\t\t\tvar currentStencilFail = null;\n\t\t\tvar currentStencilZFail = null;\n\t\t\tvar currentStencilZPass = null;\n\t\t\tvar currentStencilClear = null;\n\n\t\t\treturn {\n\n\t\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\t\tlocked = lock;\n\n\t\t\t\t},\n\n\t\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\treset: function () {\n\n\t\t\t\t\tlocked = false;\n\n\t\t\t\t\tcurrentStencilMask = null;\n\t\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\t\tcurrentStencilRef = null;\n\t\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\t\tcurrentStencilFail = null;\n\t\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\t//\n\n\t\tvar colorBuffer = new ColorBuffer();\n\t\tvar depthBuffer = new DepthBuffer();\n\t\tvar stencilBuffer = new StencilBuffer();\n\n\t\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\t\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\t\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\t\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\t\tvar capabilities = {};\n\n\t\tvar compressedTextureFormats = null;\n\n\t\tvar currentBlending = null;\n\t\tvar currentBlendEquation = null;\n\t\tvar currentBlendSrc = null;\n\t\tvar currentBlendDst = null;\n\t\tvar currentBlendEquationAlpha = null;\n\t\tvar currentBlendSrcAlpha = null;\n\t\tvar currentBlendDstAlpha = null;\n\t\tvar currentPremultipledAlpha = false;\n\n\t\tvar currentFlipSided = null;\n\t\tvar currentCullFace = null;\n\n\t\tvar currentLineWidth = null;\n\n\t\tvar currentPolygonOffsetFactor = null;\n\t\tvar currentPolygonOffsetUnits = null;\n\n\t\tvar currentScissorTest = null;\n\n\t\tvar maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\t\tvar version = parseFloat( /^WebGL\\ ([0-9])/.exec( gl.getParameter( gl.VERSION ) )[ 1 ] );\n\t\tvar lineWidthAvailable = parseFloat( version ) >= 1.0;\n\n\t\tvar currentTextureSlot = null;\n\t\tvar currentBoundTextures = {};\n\n\t\tvar currentScissor = new Vector4();\n\t\tvar currentViewport = new Vector4();\n\n\t\tfunction createTexture( type, target, count ) {\n\n\t\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\t\tvar texture = gl.createTexture();\n\n\t\t\tgl.bindTexture( type, texture );\n\t\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t\t}\n\n\t\t\treturn texture;\n\n\t\t}\n\n\t\tvar emptyTextures = {};\n\t\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\t\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t\t//\n\n\t\tfunction init() {\n\n\t\t\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\t\t\tdepthBuffer.setClear( 1 );\n\t\t\tstencilBuffer.setClear( 0 );\n\n\t\t\tenable( gl.DEPTH_TEST );\n\t\t\tdepthBuffer.setFunc( LessEqualDepth );\n\n\t\t\tsetFlipSided( false );\n\t\t\tsetCullFace( CullFaceBack );\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tenable( gl.BLEND );\n\t\t\tsetBlending( NormalBlending );\n\n\t\t}\n\n\t\tfunction initAttributes() {\n\n\t\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\t\tnewAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction enableAttribute( attribute ) {\n\n\t\t\tnewAttributes[ attribute ] = 1;\n\n\t\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t\t}\n\n\t\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\n\n\t\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\n\t\t\t\tattributeDivisors[ attribute ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\t\tnewAttributes[ attribute ] = 1;\n\n\t\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t\t}\n\n\t\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\n\t\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction disableUnusedAttributes() {\n\n\t\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction enable( id ) {\n\n\t\t\tif ( capabilities[ id ] !== true ) {\n\n\t\t\t\tgl.enable( id );\n\t\t\t\tcapabilities[ id ] = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction disable( id ) {\n\n\t\t\tif ( capabilities[ id ] !== false ) {\n\n\t\t\t\tgl.disable( id );\n\t\t\t\tcapabilities[ id ] = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getCompressedTextureFormats() {\n\n\t\t\tif ( compressedTextureFormats === null ) {\n\n\t\t\t\tcompressedTextureFormats = [];\n\n\t\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\n\t\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\n\t\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ) {\n\n\t\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\n\n\t\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn compressedTextureFormats;\n\n\t\t}\n\n\t\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\t\tif ( blending !== NoBlending ) {\n\n\t\t\t\tenable( gl.BLEND );\n\n\t\t\t} else {\n\n\t\t\t\tdisable( gl.BLEND );\n\n\t\t\t}\n\n\t\t\tif ( ( blending !== CustomBlending ) && ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) ) {\n\n\t\t\t\tif ( blending === AdditiveBlending ) {\n\n\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( blending === SubtractiveBlending ) {\n\n\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( blending === MultiplyBlending ) {\n\n\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\tif ( blending === CustomBlending ) {\n\n\t\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\n\n\t\t\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t\t\t}\n\n\t\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\n\n\t\t\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\t\t\tcurrentBlendDst = blendDst;\n\t\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tcurrentBlendEquation = null;\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendEquationAlpha = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setMaterial( material ) {\n\n\t\t\tmaterial.side === DoubleSide\n\t\t\t\t? disable( gl.CULL_FACE )\n\t\t\t\t: enable( gl.CULL_FACE );\n\n\t\t\tsetFlipSided( material.side === BackSide );\n\n\t\t\tmaterial.transparent === true\n\t\t\t\t? setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha )\n\t\t\t\t: setBlending( NoBlending );\n\n\t\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\t\tdepthBuffer.setTest( material.depthTest );\n\t\t\tdepthBuffer.setMask( material.depthWrite );\n\t\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t}\n\n\t\t//\n\n\t\tfunction setFlipSided( flipSided ) {\n\n\t\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\t\tif ( flipSided ) {\n\n\t\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentFlipSided = flipSided;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setCullFace( cullFace ) {\n\n\t\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\t\tenable( gl.CULL_FACE );\n\n\t\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tdisable( gl.CULL_FACE );\n\n\t\t\t}\n\n\t\t\tcurrentCullFace = cullFace;\n\n\t\t}\n\n\t\tfunction setLineWidth( width ) {\n\n\t\t\tif ( width !== currentLineWidth ) {\n\n\t\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\t\tcurrentLineWidth = width;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\t\tif ( polygonOffset ) {\n\n\t\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getScissorTest() {\n\n\t\t\treturn currentScissorTest;\n\n\t\t}\n\n\t\tfunction setScissorTest( scissorTest ) {\n\n\t\t\tcurrentScissorTest = scissorTest;\n\n\t\t\tif ( scissorTest ) {\n\n\t\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t\t} else {\n\n\t\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// texture\n\n\t\tfunction activeTexture( webglSlot ) {\n\n\t\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\t\tgl.activeTexture( webglSlot );\n\t\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\t\tif ( currentTextureSlot === null ) {\n\n\t\t\t\tactiveTexture();\n\n\t\t\t}\n\n\t\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\t\tif ( boundTexture === undefined ) {\n\n\t\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t\t}\n\n\t\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\t\tboundTexture.type = webglType;\n\t\t\t\tboundTexture.texture = webglTexture;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction compressedTexImage2D() {\n\n\t\t\ttry {\n\n\t\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction texImage2D() {\n\n\t\t\ttry {\n\n\t\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tfunction scissor( scissor ) {\n\n\t\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\t\tcurrentScissor.copy( scissor );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction viewport( viewport ) {\n\n\t\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\t\tcurrentViewport.copy( viewport );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tfunction reset() {\n\n\t\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcapabilities = {};\n\n\t\t\tcompressedTextureFormats = null;\n\n\t\t\tcurrentTextureSlot = null;\n\t\t\tcurrentBoundTextures = {};\n\n\t\t\tcurrentBlending = null;\n\n\t\t\tcurrentFlipSided = null;\n\t\t\tcurrentCullFace = null;\n\n\t\t\tcolorBuffer.reset();\n\t\t\tdepthBuffer.reset();\n\t\t\tstencilBuffer.reset();\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tbuffers: {\n\t\t\t\tcolor: colorBuffer,\n\t\t\t\tdepth: depthBuffer,\n\t\t\t\tstencil: stencilBuffer\n\t\t\t},\n\n\t\t\tinit: init,\n\t\t\tinitAttributes: initAttributes,\n\t\t\tenableAttribute: enableAttribute,\n\t\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\t\tenable: enable,\n\t\t\tdisable: disable,\n\t\t\tgetCompressedTextureFormats: getCompressedTextureFormats,\n\n\t\t\tsetBlending: setBlending,\n\t\t\tsetMaterial: setMaterial,\n\n\t\t\tsetFlipSided: setFlipSided,\n\t\t\tsetCullFace: setCullFace,\n\n\t\t\tsetLineWidth: setLineWidth,\n\t\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\t\tgetScissorTest: getScissorTest,\n\t\t\tsetScissorTest: setScissorTest,\n\n\t\t\tactiveTexture: activeTexture,\n\t\t\tbindTexture: bindTexture,\n\t\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\t\ttexImage2D: texImage2D,\n\n\t\t\tscissor: scissor,\n\t\t\tviewport: viewport,\n\n\t\t\treset: reset\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\t\tvar maxAnisotropy;\n\n\t\tfunction getMaxAnisotropy() {\n\n\t\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t\t} else {\n\n\t\t\t\tmaxAnisotropy = 0;\n\n\t\t\t}\n\n\t\t\treturn maxAnisotropy;\n\n\t\t}\n\n\t\tfunction getMaxPrecision( precision ) {\n\n\t\t\tif ( precision === 'highp' ) {\n\n\t\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\t\treturn 'highp';\n\n\t\t\t\t}\n\n\t\t\t\tprecision = 'mediump';\n\n\t\t\t}\n\n\t\t\tif ( precision === 'mediump' ) {\n\n\t\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\t\treturn 'mediump';\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn 'lowp';\n\n\t\t}\n\n\t\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\t\tvar maxPrecision = getMaxPrecision( precision );\n\n\t\tif ( maxPrecision !== precision ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\t\tprecision = maxPrecision;\n\n\t\t}\n\n\t\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true && !! extensions.get( 'EXT_frag_depth' );\n\n\t\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\t\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\t\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\t\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\t\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\t\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\t\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\t\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\t\tvar vertexTextures = maxVertexTextures > 0;\n\t\tvar floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\n\t\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\t\treturn {\n\n\t\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\t\tprecision: precision,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tmaxTextures: maxTextures,\n\t\t\tmaxVertexTextures: maxVertexTextures,\n\t\t\tmaxTextureSize: maxTextureSize,\n\t\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\t\tmaxAttributes: maxAttributes,\n\t\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\t\tmaxVaryings: maxVaryings,\n\t\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\t\tvertexTextures: vertexTextures,\n\t\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\t\tfloatVertexTextures: floatVertexTextures\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction ArrayCamera( array ) {\n\n\t\tPerspectiveCamera.call( this );\n\n\t\tthis.cameras = array || [];\n\n\t}\n\n\tArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\t\tconstructor: ArrayCamera,\n\n\t\tisArrayCamera: true\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebVRManager( renderer ) {\n\n\t\tvar scope = this;\n\n\t\tvar device = null;\n\t\tvar frameData = null;\n\n\t\tif ( 'VRFrameData' in window ) {\n\n\t\t\tframeData = new window.VRFrameData();\n\n\t\t}\n\n\t\tvar matrixWorldInverse = new Matrix4();\n\n\t\tvar standingMatrix = new Matrix4();\n\t\tvar standingMatrixInverse = new Matrix4();\n\n\t\tvar cameraL = new PerspectiveCamera();\n\t\tcameraL.bounds = new Vector4( 0.0, 0.0, 0.5, 1.0 );\n\t\tcameraL.layers.enable( 1 );\n\n\t\tvar cameraR = new PerspectiveCamera();\n\t\tcameraR.bounds = new Vector4( 0.5, 0.0, 0.5, 1.0 );\n\t\tcameraR.layers.enable( 2 );\n\n\t\tvar cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\n\t\tcameraVR.layers.enable( 1 );\n\t\tcameraVR.layers.enable( 2 );\n\n\t\t//\n\n\t\tvar currentSize, currentPixelRatio;\n\n\t\tfunction onVRDisplayPresentChange() {\n\n\t\t\tif ( device.isPresenting ) {\n\n\t\t\t\tvar eyeParameters = device.getEyeParameters( 'left' );\n\t\t\t\tvar renderWidth = eyeParameters.renderWidth;\n\t\t\t\tvar renderHeight = eyeParameters.renderHeight;\n\n\t\t\t\tcurrentPixelRatio = renderer.getPixelRatio();\n\t\t\t\tcurrentSize = renderer.getSize();\n\n\t\t\t\trenderer.setDrawingBufferSize( renderWidth * 2, renderHeight, 1 );\n\n\t\t\t} else if ( scope.enabled ) {\n\n\t\t\t\trenderer.setDrawingBufferSize( currentSize.width, currentSize.height, currentPixelRatio );\n\n\t\t\t}\n\n\t\t}\n\n\t\twindow.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\t\t//\n\n\t\tthis.enabled = false;\n\t\tthis.standing = false;\n\n\t\tthis.getDevice = function () {\n\n\t\t\treturn device;\n\n\t\t};\n\n\t\tthis.setDevice = function ( value ) {\n\n\t\t\tif ( value !== undefined ) device = value;\n\n\t\t};\n\n\t\tthis.getCamera = function ( camera ) {\n\n\t\t\tif ( device === null ) return camera;\n\n\t\t\tdevice.depthNear = camera.near;\n\t\t\tdevice.depthFar = camera.far;\n\n\t\t\tdevice.getFrameData( frameData );\n\n\t\t\t//\n\n\t\t\tvar pose = frameData.pose;\n\n\t\t\tif ( pose.position !== null ) {\n\n\t\t\t\tcamera.position.fromArray( pose.position );\n\n\t\t\t} else {\n\n\t\t\t\tcamera.position.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( pose.orientation !== null ) {\n\n\t\t\t\tcamera.quaternion.fromArray( pose.orientation );\n\n\t\t\t}\n\n\t\t\tcamera.updateMatrixWorld();\n\n\t\t\tvar stageParameters = device.stageParameters;\n\n\t\t\tif ( this.standing && stageParameters ) {\n\n\t\t\t\tstandingMatrix.fromArray( stageParameters.sittingToStandingTransform );\n\t\t\t\tstandingMatrixInverse.getInverse( standingMatrix );\n\n\t\t\t\tcamera.matrixWorld.multiply( standingMatrix );\n\t\t\t\tcamera.matrixWorldInverse.multiply( standingMatrixInverse );\n\n\t\t\t}\n\n\t\t\tif ( device.isPresenting === false ) return camera;\n\n\t\t\t//\n\n\t\t\tcameraVR.matrixWorld.copy( camera.matrixWorld );\n\t\t\tcameraVR.matrixWorldInverse.copy( camera.matrixWorldInverse );\n\n\t\t\tcameraL.matrixWorldInverse.fromArray( frameData.leftViewMatrix );\n\t\t\tcameraR.matrixWorldInverse.fromArray( frameData.rightViewMatrix );\n\n\t\t\tif ( this.standing && stageParameters ) {\n\n\t\t\t\tcameraL.matrixWorldInverse.multiply( standingMatrixInverse );\n\t\t\t\tcameraR.matrixWorldInverse.multiply( standingMatrixInverse );\n\n\t\t\t}\n\n\t\t\tvar parent = camera.parent;\n\n\t\t\tif ( parent !== null ) {\n\n\t\t\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\n\t\t\t\tcameraL.matrixWorldInverse.multiply( matrixWorldInverse );\n\t\t\t\tcameraR.matrixWorldInverse.multiply( matrixWorldInverse );\n\n\t\t\t}\n\n\t\t\t// envMap and Mirror needs camera.matrixWorld\n\n\t\t\tcameraL.matrixWorld.getInverse( cameraL.matrixWorldInverse );\n\t\t\tcameraR.matrixWorld.getInverse( cameraR.matrixWorldInverse );\n\n\t\t\tcameraL.projectionMatrix.fromArray( frameData.leftProjectionMatrix );\n\t\t\tcameraR.projectionMatrix.fromArray( frameData.rightProjectionMatrix );\n\n\t\t\t// HACK @mrdoob\n\t\t\t// https://github.com/w3c/webvr/issues/203\n\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t\t//\n\n\t\t\tvar layers = device.getLayers();\n\n\t\t\tif ( layers.length ) {\n\n\t\t\t\tvar layer = layers[ 0 ];\n\n\t\t\t\tif ( layer.leftBounds !== null && layer.leftBounds.length === 4 ) {\n\n\t\t\t\t\tcameraL.bounds.fromArray( layer.leftBounds );\n\n\t\t\t\t}\n\n\t\t\t\tif ( layer.rightBounds !== null && layer.rightBounds.length === 4 ) {\n\n\t\t\t\t\tcameraR.bounds.fromArray( layer.rightBounds );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn cameraVR;\n\n\t\t};\n\n\t\tthis.getStandingMatrix = function () {\n\n\t\t\treturn standingMatrix;\n\n\t\t};\n\n\t\tthis.submitFrame = function () {\n\n\t\t\tif ( device && device.isPresenting ) device.submitFrame();\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction WebGLExtensions( gl ) {\n\n\t\tvar extensions = {};\n\n\t\treturn {\n\n\t\t\tget: function ( name ) {\n\n\t\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\t\treturn extensions[ name ];\n\n\t\t\t\t}\n\n\t\t\t\tvar extension;\n\n\t\t\t\tswitch ( name ) {\n\n\t\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'WEBGL_compressed_texture_etc1':\n\t\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t\t}\n\n\t\t\t\tif ( extension === null ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t\t}\n\n\t\t\t\textensions[ name ] = extension;\n\n\t\t\t\treturn extension;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/**\n\t * @author tschw\n\t */\n\n\tfunction WebGLClipping() {\n\n\t\tvar scope = this,\n\n\t\t\tglobalState = null,\n\t\t\tnumGlobalPlanes = 0,\n\t\t\tlocalClippingEnabled = false,\n\t\t\trenderingShadows = false,\n\n\t\t\tplane = new Plane(),\n\t\t\tviewNormalMatrix = new Matrix3(),\n\n\t\t\tuniform = { value: null, needsUpdate: false };\n\n\t\tthis.uniform = uniform;\n\t\tthis.numPlanes = 0;\n\t\tthis.numIntersection = 0;\n\n\t\tthis.init = function( planes, enableLocalClipping, camera ) {\n\n\t\t\tvar enabled =\n\t\t\t\tplanes.length !== 0 ||\n\t\t\t\tenableLocalClipping ||\n\t\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t\t// run another frame in order to reset the state:\n\t\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\t\tlocalClippingEnabled;\n\n\t\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\t\tnumGlobalPlanes = planes.length;\n\n\t\t\treturn enabled;\n\n\t\t};\n\n\t\tthis.beginShadows = function() {\n\n\t\t\trenderingShadows = true;\n\t\t\tprojectPlanes( null );\n\n\t\t};\n\n\t\tthis.endShadows = function() {\n\n\t\t\trenderingShadows = false;\n\t\t\tresetGlobalState();\n\n\t\t};\n\n\t\tthis.setState = function( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\t\tif ( ! localClippingEnabled ||\n\t\t\t\t\tplanes === null || planes.length === 0 ||\n\t\t\t\t\trenderingShadows && ! clipShadows ) {\n\t\t\t\t// there's no local clipping\n\n\t\t\t\tif ( renderingShadows ) {\n\t\t\t\t\t// there's no global clipping\n\n\t\t\t\t\tprojectPlanes( null );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresetGlobalState();\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t\t}\n\n\t\t\t\tcache.clippingState = dstArray;\n\t\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\t\tthis.numPlanes += nGlobal;\n\n\t\t\t}\n\n\n\t\t};\n\n\t\tfunction resetGlobalState() {\n\n\t\t\tif ( uniform.value !== globalState ) {\n\n\t\t\t\tuniform.value = globalState;\n\t\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t\t}\n\n\t\t\tscope.numPlanes = numGlobalPlanes;\n\t\t\tscope.numIntersection = 0;\n\n\t\t}\n\n\t\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\t\tdstArray = null;\n\n\t\t\tif ( nPlanes !== 0 ) {\n\n\t\t\t\tdstArray = uniform.value;\n\n\t\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, i4 = dstOffset;\n\t\t\t\t\t\t\t\t\t\ti !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\t\tplane.copy( planes[ i ] ).\n\t\t\t\t\t\t\t\tapplyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tuniform.value = dstArray;\n\t\t\t\tuniform.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tscope.numPlanes = nPlanes;\n\t\t\t\n\t\t\treturn dstArray;\n\n\t\t}\n\n\t}\n\n\t// import { Sphere } from '../math/Sphere';\n\t/**\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author szimek / https://github.com/szimek/\n\t * @author tschw\n\t */\n\n\tfunction WebGLRenderer( parameters ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer', REVISION );\n\n\t\tparameters = parameters || {};\n\n\t\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false;\n\n\t\tvar lights = [];\n\n\t\tvar currentRenderList = null;\n\n\t\tvar morphInfluences = new Float32Array( 8 );\n\n\t\tvar sprites = [];\n\t\tvar lensFlares = [];\n\n\t\t// public properties\n\n\t\tthis.domElement = _canvas;\n\t\tthis.context = null;\n\n\t\t// clearing\n\n\t\tthis.autoClear = true;\n\t\tthis.autoClearColor = true;\n\t\tthis.autoClearDepth = true;\n\t\tthis.autoClearStencil = true;\n\n\t\t// scene graph\n\n\t\tthis.sortObjects = true;\n\n\t\t// user-defined clipping\n\n\t\tthis.clippingPlanes = [];\n\t\tthis.localClippingEnabled = false;\n\n\t\t// physically based shading\n\n\t\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\t\tthis.gammaInput = false;\n\t\tthis.gammaOutput = false;\n\n\t\t// physical lights\n\n\t\tthis.physicallyCorrectLights = false;\n\n\t\t// tone mapping\n\n\t\tthis.toneMapping = LinearToneMapping;\n\t\tthis.toneMappingExposure = 1.0;\n\t\tthis.toneMappingWhitePoint = 1.0;\n\n\t\t// morphs\n\n\t\tthis.maxMorphTargets = 8;\n\t\tthis.maxMorphNormals = 4;\n\n\t\t// internal properties\n\n\t\tvar _this = this,\n\n\t\t\t// internal state cache\n\n\t\t\t_currentProgram = null,\n\t\t\t_currentRenderTarget = null,\n\t\t\t_currentFramebuffer = null,\n\t\t\t_currentMaterialId = - 1,\n\t\t\t_currentGeometryProgram = '',\n\n\t\t\t_currentCamera = null,\n\t\t\t_currentArrayCamera = null,\n\n\t\t\t_currentScissor = new Vector4(),\n\t\t\t_currentScissorTest = null,\n\n\t\t\t_currentViewport = new Vector4(),\n\n\t\t\t//\n\n\t\t\t_usedTextureUnits = 0,\n\n\t\t\t//\n\n\t\t\t_width = _canvas.width,\n\t\t\t_height = _canvas.height,\n\n\t\t\t_pixelRatio = 1,\n\n\t\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t\t_scissorTest = false,\n\n\t\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\n\t\t\t// frustum\n\n\t\t\t_frustum = new Frustum(),\n\n\t\t\t// clipping\n\n\t\t\t_clipping = new WebGLClipping(),\n\t\t\t_clippingEnabled = false,\n\t\t\t_localClippingEnabled = false,\n\n\t\t\t// camera matrices cache\n\n\t\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t\t_vector3 = new Vector3(),\n\t\t\t_matrix4 = new Matrix4(),\n\t\t\t_matrix42 = new Matrix4(),\n\n\t\t\t// light arrays cache\n\n\t\t\t_lights = {\n\n\t\t\t\thash: '',\n\n\t\t\t\tambient: [ 0, 0, 0 ],\n\t\t\t\tdirectional: [],\n\t\t\t\tdirectionalShadowMap: [],\n\t\t\t\tdirectionalShadowMatrix: [],\n\t\t\t\tspot: [],\n\t\t\t\tspotShadowMap: [],\n\t\t\t\tspotShadowMatrix: [],\n\t\t\t\trectArea: [],\n\t\t\t\tpoint: [],\n\t\t\t\tpointShadowMap: [],\n\t\t\t\tpointShadowMatrix: [],\n\t\t\t\themi: [],\n\n\t\t\t\tshadows: []\n\n\t\t\t},\n\n\t\t\t// info\n\n\t\t\t_infoMemory = {\n\t\t\t\tgeometries: 0,\n\t\t\t\ttextures: 0\n\t\t\t},\n\n\t\t\t_infoRender = {\n\n\t\t\t\tframe: 0,\n\t\t\t\tcalls: 0,\n\t\t\t\tvertices: 0,\n\t\t\t\tfaces: 0,\n\t\t\t\tpoints: 0\n\n\t\t\t};\n\n\t\tthis.info = {\n\n\t\t\trender: _infoRender,\n\t\t\tmemory: _infoMemory,\n\t\t\tprograms: null\n\n\t\t};\n\n\n\t\t// initialize\n\n\t\tvar _gl;\n\n\t\ttry {\n\n\t\t\tvar contextAttributes = {\n\t\t\t\talpha: _alpha,\n\t\t\t\tdepth: _depth,\n\t\t\t\tstencil: _stencil,\n\t\t\t\tantialias: _antialias,\n\t\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\n\t\t\t};\n\n\t\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow 'Error creating WebGL context.';\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\n\n\t\t}\n\n\t\tvar extensions = new WebGLExtensions( _gl );\n\n\t\textensions.get( 'WEBGL_depth_texture' );\n\t\textensions.get( 'OES_texture_float' );\n\t\textensions.get( 'OES_texture_float_linear' );\n\t\textensions.get( 'OES_texture_half_float' );\n\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\textensions.get( 'OES_standard_derivatives' );\n\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\tBufferGeometry.MaxIndex = 4294967296;\n\n\t\t}\n\n\t\tvar capabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tvar state = new WebGLState( _gl, extensions, paramThreeToGL );\n\n\t\tvar properties = new WebGLProperties();\n\t\tvar textures = new WebGLTextures( _gl, extensions, state, properties, capabilities, paramThreeToGL, _infoMemory );\n\t\tvar attributes = new WebGLAttributes( _gl );\n\t\tvar geometries = new WebGLGeometries( _gl, attributes, _infoMemory );\n\t\tvar objects = new WebGLObjects( _gl, geometries, _infoRender );\n\t\tvar programCache = new WebGLPrograms( this, capabilities );\n\t\tvar lightCache = new WebGLLights();\n\t\tvar renderLists = new WebGLRenderLists();\n\n\t\tvar background = new WebGLBackground( this, state, objects, _premultipliedAlpha );\n\t\tvar vr = new WebVRManager( this );\n\n\t\tthis.info.programs = programCache.programs;\n\n\t\tvar bufferRenderer = new WebGLBufferRenderer( _gl, extensions, _infoRender );\n\t\tvar indexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\n\n\t\t//\n\n\t\tfunction getTargetPixelRatio() {\n\n\t\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t\t}\n\n\t\tfunction setDefaultGLState() {\n\n\t\t\tstate.init();\n\n\t\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\t\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t\t}\n\n\t\tfunction resetGLState() {\n\n\t\t\t_currentProgram = null;\n\t\t\t_currentCamera = null;\n\n\t\t\t_currentGeometryProgram = '';\n\t\t\t_currentMaterialId = - 1;\n\n\t\t\tstate.reset();\n\n\t\t}\n\n\t\tsetDefaultGLState();\n\n\t\tthis.context = _gl;\n\t\tthis.capabilities = capabilities;\n\t\tthis.extensions = extensions;\n\t\tthis.properties = properties;\n\t\tthis.renderLists = renderLists;\n\t\tthis.state = state;\n\t\tthis.vr = vr;\n\n\t\t// shadow map\n\n\t\tvar shadowMap = new WebGLShadowMap( this, _lights, objects, capabilities );\n\n\t\tthis.shadowMap = shadowMap;\n\n\n\t\t// Plugins\n\n\t\tvar spritePlugin = new SpritePlugin( this, sprites );\n\t\tvar lensFlarePlugin = new LensFlarePlugin( this, lensFlares );\n\n\t\t// API\n\n\t\tthis.getContext = function () {\n\n\t\t\treturn _gl;\n\n\t\t};\n\n\t\tthis.getContextAttributes = function () {\n\n\t\t\treturn _gl.getContextAttributes();\n\n\t\t};\n\n\t\tthis.forceContextLoss = function () {\n\n\t\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\t\tif ( extension ) extension.loseContext();\n\n\t\t};\n\n\t\tthis.getMaxAnisotropy = function () {\n\n\t\t\treturn capabilities.getMaxAnisotropy();\n\n\t\t};\n\n\t\tthis.getPrecision = function () {\n\n\t\t\treturn capabilities.precision;\n\n\t\t};\n\n\t\tthis.getPixelRatio = function () {\n\n\t\t\treturn _pixelRatio;\n\n\t\t};\n\n\t\tthis.setPixelRatio = function ( value ) {\n\n\t\t\tif ( value === undefined ) return;\n\n\t\t\t_pixelRatio = value;\n\n\t\t\tthis.setSize( _width, _height, false );\n\n\t\t};\n\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t\tvar device = vr.getDevice();\n\n\t\t\tif ( device && device.isPresenting ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\t_canvas.width = width * _pixelRatio;\n\t\t\t_canvas.height = height * _pixelRatio;\n\n\t\t\tif ( updateStyle !== false ) {\n\n\t\t\t\t_canvas.style.width = width + 'px';\n\t\t\t\t_canvas.style.height = height + 'px';\n\n\t\t\t}\n\n\t\t\tthis.setViewport( 0, 0, width, height );\n\n\t\t};\n\n\t\tthis.getDrawingBufferSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width * _pixelRatio,\n\t\t\t\theight: _height * _pixelRatio\n\t\t\t};\n\n\t\t};\n\n\t\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\t_pixelRatio = pixelRatio;\n\n\t\t\t_canvas.width = width * pixelRatio;\n\t\t\t_canvas.height = height * pixelRatio;\n\n\t\t\tthis.setViewport( 0, 0, width, height );\n\n\t\t};\n\n\t\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t\t_viewport.set( x, _height - y - height, width, height );\n\t\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t\t};\n\n\t\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t\t_scissor.set( x, _height - y - height, width, height );\n\t\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\n\t\t};\n\n\t\tthis.setScissorTest = function ( boolean ) {\n\n\t\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t\t};\n\n\t\t// Clearing\n\n\t\tthis.getClearColor = background.getClearColor;\n\t\tthis.setClearColor = background.setClearColor;\n\t\tthis.getClearAlpha = background.getClearAlpha;\n\t\tthis.setClearAlpha = background.setClearAlpha;\n\n\t\tthis.clear = function ( color, depth, stencil ) {\n\n\t\t\tvar bits = 0;\n\n\t\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t_gl.clear( bits );\n\n\t\t};\n\n\t\tthis.clearColor = function () {\n\n\t\t\tthis.clear( true, false, false );\n\n\t\t};\n\n\t\tthis.clearDepth = function () {\n\n\t\t\tthis.clear( false, true, false );\n\n\t\t};\n\n\t\tthis.clearStencil = function () {\n\n\t\t\tthis.clear( false, false, true );\n\n\t\t};\n\n\t\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\t\t\tthis.clear( color, depth, stencil );\n\n\t\t};\n\n\t\t// Reset\n\n\t\tthis.resetGLState = resetGLState;\n\n\t\tthis.dispose = function () {\n\n\t\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\n\t\t\trenderLists.dispose();\n\n\t\t};\n\n\t\t// Events\n\n\t\tfunction onContextLost( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tresetGLState();\n\t\t\tsetDefaultGLState();\n\n\t\t\tproperties.clear();\n\t\t\tobjects.clear();\n\n\t\t}\n\n\t\tfunction onMaterialDispose( event ) {\n\n\t\t\tvar material = event.target;\n\n\t\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\t\tdeallocateMaterial( material );\n\n\t\t}\n\n\t\t// Buffer deallocation\n\n\t\tfunction deallocateMaterial( material ) {\n\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t\tproperties.remove( material );\n\n\t\t}\n\n\n\t\tfunction releaseMaterialProgramReference( material ) {\n\n\t\t\tvar programInfo = properties.get( material ).program;\n\n\t\t\tmaterial.program = undefined;\n\n\t\t\tif ( programInfo !== undefined ) {\n\n\t\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Buffer rendering\n\n\t\tfunction renderObjectImmediate( object, program, material ) {\n\n\t\t\tobject.render( function ( object ) {\n\n\t\t\t\t_this.renderBufferImmediate( object, program, material );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\t\tstate.initAttributes();\n\n\t\t\tvar buffers = properties.get( object );\n\n\t\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\t\tvar programAttributes = program.getAttributes();\n\n\t\t\tif ( object.hasPositions ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( object.hasNormals ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\n\t\t\t\tif ( ! material.isMeshPhongMaterial &&\n\t\t\t\t\t! material.isMeshStandardMaterial &&\n\t\t\t\t\t! material.isMeshNormalMaterial &&\n\t\t\t\t\tmaterial.shading === FlatShading ) {\n\n\t\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\n\n\t\t\t\t\t\tvar array = object.normalArray;\n\n\t\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\n\t\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\n\t\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\n\n\t\t\t\t\t\tarray[ i + 0 ] = nx;\n\t\t\t\t\t\tarray[ i + 1 ] = ny;\n\t\t\t\t\t\tarray[ i + 2 ] = nz;\n\n\t\t\t\t\t\tarray[ i + 3 ] = nx;\n\t\t\t\t\t\tarray[ i + 4 ] = ny;\n\t\t\t\t\t\tarray[ i + 5 ] = nz;\n\n\t\t\t\t\t\tarray[ i + 6 ] = nx;\n\t\t\t\t\t\tarray[ i + 7 ] = ny;\n\t\t\t\t\t\tarray[ i + 8 ] = nz;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\t\tstate.enableAttribute( programAttributes.normal );\n\n\t\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\t\tstate.enableAttribute( programAttributes.uv );\n\n\t\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( object.hasColors && material.vertexColors !== NoColors ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\t\tstate.enableAttribute( programAttributes.color );\n\n\t\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\tstate.disableUnusedAttributes();\n\n\t\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\t\tobject.count = 0;\n\n\t\t};\n\n\t\tfunction absNumericalSort( a, b ) {\n\n\t\t\treturn Math.abs( b[ 0 ] ) - Math.abs( a[ 0 ] );\n\n\t\t}\n\n\t\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tvar program = setProgram( camera, fog, material, object );\n\t\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + ( material.wireframe === true );\n\n\t\t\tvar updateBuffers = false;\n\n\t\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t\t// morph targets\n\n\t\t\tvar morphTargetInfluences = object.morphTargetInfluences;\n\n\t\t\tif ( morphTargetInfluences !== undefined ) {\n\n\t\t\t\t// TODO Remove allocations\n\n\t\t\t\tvar activeInfluences = [];\n\n\t\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar influence = morphTargetInfluences[ i ];\n\t\t\t\t\tactiveInfluences.push( [ influence, i ] );\n\n\t\t\t\t}\n\n\t\t\t\tactiveInfluences.sort( absNumericalSort );\n\n\t\t\t\tif ( activeInfluences.length > 8 ) {\n\n\t\t\t\t\tactiveInfluences.length = 8;\n\n\t\t\t\t}\n\n\t\t\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar influence = activeInfluences[ i ];\n\t\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\n\n\t\t\t\t\tif ( influence[ 0 ] !== 0 ) {\n\n\t\t\t\t\t\tvar index = influence[ 1 ];\n\n\t\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\n\t\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\n\t\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = activeInfluences.length, il = morphInfluences.length; i < il; i ++ ) {\n\n\t\t\t\t\tmorphInfluences[ i ] = 0.0;\n\n\t\t\t\t}\n\n\t\t\t\tprogram.getUniforms().setValue( _gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar index = geometry.index;\n\t\t\tvar position = geometry.attributes.position;\n\t\t\tvar rangeFactor = 1;\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\t\trangeFactor = 2;\n\n\t\t\t}\n\n\t\t\tvar attribute;\n\t\t\tvar renderer = bufferRenderer;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tattribute = attributes.get( index );\n\n\t\t\t\trenderer = indexedBufferRenderer;\n\t\t\t\trenderer.setIndex( attribute );\n\n\t\t\t}\n\n\t\t\tif ( updateBuffers ) {\n\n\t\t\t\tsetupVertexAttributes( material, program, geometry );\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar dataCount = 0;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tdataCount = index.count;\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\tdataCount = position.count;\n\n\t\t\t}\n\n\t\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\t\tif ( drawCount === 0 ) return;\n\n\t\t\t//\n\n\t\t\tif ( object.isMesh ) {\n\n\t\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( object.drawMode ) {\n\n\t\t\t\t\t\tcase TrianglesDrawMode:\n\t\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TriangleStripDrawMode:\n\t\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TriangleFanDrawMode:\n\t\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t} else if ( object.isLine ) {\n\n\t\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isPoints ) {\n\n\t\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t\t}\n\n\t\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\t\tif ( geometry.maxInstancedCount > 0 ) {\n\n\t\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t\t}\n\n\t\t};\n\n\t\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\n\n\t\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( startIndex === undefined ) startIndex = 0;\n\n\t\t\tstate.initAttributes();\n\n\t\t\tvar geometryAttributes = geometry.attributes;\n\n\t\t\tvar programAttributes = program.getAttributes();\n\n\t\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\t\tfor ( var name in programAttributes ) {\n\n\t\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\t\tvar attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\t\tvar type = attribute.type;\n\t\t\t\t\t\tvar bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, ( startIndex * stride + offset ) * bytesPerElement );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, startIndex * size * bytesPerElement );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.disableUnusedAttributes();\n\n\t\t}\n\n\t\t// Compile\n\n\t\tthis.compile = function ( scene, camera ) {\n\n\t\t\tlights = [];\n\n\t\t\tscene.traverse( function ( object ) {\n\n\t\t\t\tif ( object.isLight ) {\n\n\t\t\t\t\tlights.push( object );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tsetupLights( lights, camera );\n\n\t\t\tscene.traverse( function ( object ) {\n\n\t\t\t\tif ( object.material ) {\n\n\t\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\t\tinitMaterial( object.material[ i ], scene.fog, object );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tinitMaterial( object.material, scene.fog, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t};\n\n\t\t// Rendering\n\n\t\tthis.animate = function ( callback ) {\n\n\t\t\tfunction onFrame() {\n\n\t\t\t\tcallback();\n\n\t\t\t\t( vr.getDevice() || window ).requestAnimationFrame( onFrame );\n\n\t\t\t}\n\n\t\t\t( vr.getDevice() || window ).requestAnimationFrame( onFrame );\n\n\t\t};\n\n\t\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\t\tif ( ! ( camera && camera.isCamera ) ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// reset caching for this frame\n\n\t\t\t_currentGeometryProgram = '';\n\t\t\t_currentMaterialId = - 1;\n\t\t\t_currentCamera = null;\n\n\t\t\t// update scene graph\n\n\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t\t// update camera matrices and frustum\n\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tif ( vr.enabled ) {\n\n\t\t\t\tcamera = vr.getCamera( camera );\n\n\t\t\t}\n\n\t\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\tlights.length = 0;\n\t\t\tsprites.length = 0;\n\t\t\tlensFlares.length = 0;\n\n\t\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\t\tcurrentRenderList.init();\n\n\t\t\tprojectObject( scene, camera, _this.sortObjects );\n\n\t\t\tcurrentRenderList.finish();\n\n\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\tcurrentRenderList.sort();\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\t\tsetupShadows( lights );\n\n\t\t\tshadowMap.render( scene, camera );\n\n\t\t\tsetupLights( lights, camera );\n\n\t\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t\t//\n\n\t\t\t_infoRender.frame ++;\n\t\t\t_infoRender.calls = 0;\n\t\t\t_infoRender.vertices = 0;\n\t\t\t_infoRender.faces = 0;\n\t\t\t_infoRender.points = 0;\n\n\t\t\tif ( renderTarget === undefined ) {\n\n\t\t\t\trenderTarget = null;\n\n\t\t\t}\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t\t//\n\n\t\t\tbackground.render( scene, camera, forceClear );\n\n\t\t\t// render scene\n\n\t\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\t\tif ( scene.overrideMaterial ) {\n\n\t\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t\t} else {\n\n\t\t\t\t// opaque pass (front-to-back order)\n\n\t\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t\t// transparent pass (back-to-front order)\n\n\t\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t\t}\n\n\t\t\t// custom render plugins (post pass)\n\n\t\t\tspritePlugin.render( scene, camera );\n\t\t\tlensFlarePlugin.render( scene, camera, _currentViewport );\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\ttextures.updateRenderTargetMipmap( renderTarget );\n\n\t\t\t}\n\n\t\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\t\tstate.buffers.depth.setTest( true );\n\t\t\tstate.buffers.depth.setMask( true );\n\t\t\tstate.buffers.color.setMask( true );\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_this.setScissorTest( false );\n\n\t\t\t}\n\n\t\t\tif ( vr.enabled ) {\n\n\t\t\t\tvr.submitFrame();\n\n\t\t\t}\n\n\t\t\t// _gl.finish();\n\n\t\t};\n\n\t\t/*\n\t\t// TODO Duplicated code (Frustum)\n\n\t\tvar _sphere = new Sphere();\n\n\t\tfunction isObjectViewable( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null )\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\t_sphere.copy( geometry.boundingSphere ).\n\t\t\tapplyMatrix4( object.matrixWorld );\n\n\t\t\treturn isSphereViewable( _sphere );\n\n\t\t}\n\n\t\tfunction isSpriteViewable( sprite ) {\n\n\t\t\t_sphere.center.set( 0, 0, 0 );\n\t\t\t_sphere.radius = 0.7071067811865476;\n\t\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\t\treturn isSphereViewable( _sphere );\n\n\t\t}\n\n\t\tfunction isSphereViewable( sphere ) {\n\n\t\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\n\n\t\t\tvar numPlanes = _clipping.numPlanes;\n\n\t\t\tif ( numPlanes === 0 ) return true;\n\n\t\t\tvar planes = _this.clippingPlanes,\n\n\t\t\t\tcenter = sphere.center,\n\t\t\t\tnegRad = - sphere.radius,\n\t\t\t\ti = 0;\n\n\t\t\tdo {\n\n\t\t\t\t// out when deeper than radius in the negative halfspace\n\t\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\n\n\t\t\t} while ( ++ i !== numPlanes );\n\n\t\t\treturn true;\n\n\t\t}\n\t\t*/\n\n\t\tfunction projectObject( object, camera, sortObjects ) {\n\n\t\t\tif ( ! object.visible ) return;\n\n\t\t\tvar visible = object.layers.test( camera.layers );\n\n\t\t\tif ( visible ) {\n\n\t\t\t\tif ( object.isLight ) {\n\n\t\t\t\t\tlights.push( object );\n\n\t\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\t\tsprites.push( object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( object.isLensFlare ) {\n\n\t\t\t\t\tlensFlares.push( object );\n\n\t\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentRenderList.push( object, null, object.material, _vector3.z, null );\n\n\t\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, _vector3.z, group );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, _vector3.z, null );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar children = object.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tprojectObject( children[ i ], camera, sortObjects );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\t\tvar object = renderItem.object;\n\t\t\t\tvar geometry = renderItem.geometry;\n\t\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\t\tvar group = renderItem.group;\n\n\t\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar camera2 = cameras[ j ];\n\n\t\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\t\tvar bounds = camera2.bounds;\n\n\t\t\t\t\t\t\tvar x = bounds.x * _width;\n\t\t\t\t\t\t\tvar y = bounds.y * _height;\n\t\t\t\t\t\t\tvar width = bounds.z * _width;\n\t\t\t\t\t\t\tvar height = bounds.w * _height;\n\n\t\t\t\t\t\t\t_this.setViewport( x, y, width, height );\n\t\t\t\t\t\t\t_this.setScissor( x, y, width, height );\n\t\t\t\t\t\t\t_this.setScissorTest( true );\n\n\t\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\t\tstate.setMaterial( material );\n\n\t\t\t\tvar program = setProgram( camera, scene.fog, material, object );\n\n\t\t\t\t_currentGeometryProgram = '';\n\n\t\t\t\trenderObjectImmediate( object, program, material );\n\n\t\t\t} else {\n\n\t\t\t\t_this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t\t}\n\n\t\tfunction initMaterial( material, fog, object ) {\n\n\t\t\tvar materialProperties = properties.get( material );\n\n\t\t\tvar parameters = programCache.getParameters(\n\t\t\t\tmaterial, _lights, fog, _clipping.numPlanes, _clipping.numIntersection, object );\n\n\t\t\tvar code = programCache.getProgramCode( material, parameters );\n\n\t\t\tvar program = materialProperties.program;\n\t\t\tvar programChange = true;\n\n\t\t\tif ( program === undefined ) {\n\n\t\t\t\t// new material\n\t\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t\t} else if ( program.code !== code ) {\n\n\t\t\t\t// changed glsl or parameters\n\t\t\t\treleaseMaterialProgramReference( material );\n\n\t\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t\t// same glsl and uniform list\n\t\t\t\treturn;\n\n\t\t\t} else {\n\n\t\t\t\t// only rebuild uniform list\n\t\t\t\tprogramChange = false;\n\n\t\t\t}\n\n\t\t\tif ( programChange ) {\n\n\t\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\t\tvar shader = ShaderLib[ parameters.shaderID ];\n\n\t\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\t\tname: material.type,\n\t\t\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\t\tname: material.type,\n\t\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.onBeforeCompile( materialProperties.shader );\n\n\t\t\t\tprogram = programCache.acquireProgram( material, materialProperties.shader, parameters, code );\n\n\t\t\t\tmaterialProperties.program = program;\n\t\t\t\tmaterial.program = program;\n\n\t\t\t}\n\n\t\t\tvar programAttributes = program.getAttributes();\n\n\t\t\tif ( material.morphTargets ) {\n\n\t\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar uniforms = materialProperties.shader.uniforms;\n\n\t\t\tif ( ! material.isShaderMaterial &&\n\t\t\t\t! material.isRawShaderMaterial ||\n\t\t\t\tmaterial.clipping === true ) {\n\n\t\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t\t}\n\n\t\t\tmaterialProperties.fog = fog;\n\n\t\t\t// store the light setup it was created for\n\n\t\t\tmaterialProperties.lightsHash = _lights.hash;\n\n\t\t\tif ( material.lights ) {\n\n\t\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\t\tuniforms.ambientLightColor.value = _lights.ambient;\n\t\t\t\tuniforms.directionalLights.value = _lights.directional;\n\t\t\t\tuniforms.spotLights.value = _lights.spot;\n\t\t\t\tuniforms.rectAreaLights.value = _lights.rectArea;\n\t\t\t\tuniforms.pointLights.value = _lights.point;\n\t\t\t\tuniforms.hemisphereLights.value = _lights.hemi;\n\n\t\t\t\tuniforms.directionalShadowMap.value = _lights.directionalShadowMap;\n\t\t\t\tuniforms.directionalShadowMatrix.value = _lights.directionalShadowMatrix;\n\t\t\t\tuniforms.spotShadowMap.value = _lights.spotShadowMap;\n\t\t\t\tuniforms.spotShadowMatrix.value = _lights.spotShadowMatrix;\n\t\t\t\tuniforms.pointShadowMap.value = _lights.pointShadowMap;\n\t\t\t\tuniforms.pointShadowMatrix.value = _lights.pointShadowMatrix;\n\t\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t\t}\n\n\t\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\t\tuniformsList =\n\t\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t\t}\n\n\t\tfunction setProgram( camera, fog, material, object ) {\n\n\t\t\t_usedTextureUnits = 0;\n\n\t\t\tvar materialProperties = properties.get( material );\n\n\t\t\tif ( _clippingEnabled ) {\n\n\t\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\t\tvar useCache =\n\t\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t\t// (#8465, #8379)\n\t\t\t\t\t_clipping.setState(\n\t\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.needsUpdate === false ) {\n\n\t\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t} else if ( material.lights && materialProperties.lightsHash !== _lights.hash ) {\n\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.needsUpdate ) {\n\n\t\t\t\tinitMaterial( material, fog, object );\n\t\t\t\tmaterial.needsUpdate = false;\n\n\t\t\t}\n\n\t\t\tvar refreshProgram = false;\n\t\t\tvar refreshMaterial = false;\n\t\t\tvar refreshLights = false;\n\n\t\t\tvar program = materialProperties.program,\n\t\t\t\tp_uniforms = program.getUniforms(),\n\t\t\t\tm_uniforms = materialProperties.shader.uniforms;\n\n\t\t\tif ( program.id !== _currentProgram ) {\n\n\t\t\t\t_gl.useProgram( program.program );\n\t\t\t\t_currentProgram = program.id;\n\n\t\t\t\trefreshProgram = true;\n\t\t\t\trefreshMaterial = true;\n\t\t\t\trefreshLights = true;\n\n\t\t\t}\n\n\t\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t\t_currentMaterialId = material.id;\n\n\t\t\t\trefreshMaterial = true;\n\n\t\t\t}\n\n\t\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Avoid unneeded uniform updates per ArrayCamera's sub-camera\n\n\t\t\t\tif ( _currentCamera !== ( _currentArrayCamera || camera ) ) {\n\n\t\t\t\t\t_currentCamera = ( _currentArrayCamera || camera );\n\n\t\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t\t}\n\n\t\t\t\t// load material specific uniforms\n\t\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// skinning uniforms must be set even if material didn't change\n\t\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t\t// not sure why, but otherwise weird things happen\n\n\t\t\tif ( material.skinning ) {\n\n\t\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\t\tvar skeleton = object.skeleton;\n\n\t\t\t\tif ( skeleton ) {\n\n\t\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\t\tsize = _Math.nextPowerOfTwo( Math.ceil( size ) );\n\t\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture );\n\t\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( refreshMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\n\t\t\t\tif ( material.lights ) {\n\n\t\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t\t// values\n\t\t\t\t\t//\n\t\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t\t// the GL state when required\n\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t\t}\n\n\t\t\t\t// refresh uniforms common to several materials\n\n\t\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t\t}\n\n\t\t\t\tif ( material.isMeshBasicMaterial ||\n\t\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\t\tmaterial.isMeshNormalMaterial ||\n\t\t\t\t\tmaterial.isMeshDepthMaterial ) {\n\n\t\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t\t// refresh single material specific uniforms\n\n\t\t\t\tif ( material.isLineBasicMaterial ) {\n\n\t\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t\t} else if ( material.isLineDashedMaterial ) {\n\n\t\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t\t} else if ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\n\n\t\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\t\trefreshUniformsStandard( m_uniforms, material );\n\n\t\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\t\tif ( material.displacementMap ) {\n\n\t\t\t\t\t\tm_uniforms.displacementMap.value = material.displacementMap;\n\t\t\t\t\t\tm_uniforms.displacementScale.value = material.displacementScale;\n\t\t\t\t\t\tm_uniforms.displacementBias.value = material.displacementBias;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t\t// RectAreaLight Texture\n\t\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\t\tif ( m_uniforms.ltcMat !== undefined ) m_uniforms.ltcMat.value = UniformsLib.LTC_MAT_TEXTURE;\n\t\t\t\tif ( m_uniforms.ltcMag !== undefined ) m_uniforms.ltcMag.value = UniformsLib.LTC_MAG_TEXTURE;\n\n\t\t\t\tWebGLUniforms.upload(\n\t\t\t\t\t_gl, materialProperties.uniformsList, m_uniforms, _this );\n\n\t\t\t}\n\n\n\t\t\t// common matrices\n\n\t\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\t\treturn program;\n\n\t\t}\n\n\t\t// Uniforms (refresh uniforms objects)\n\n\t\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t\tuniforms.diffuse.value = material.color;\n\n\t\t\tif ( material.emissive ) {\n\n\t\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t\t}\n\n\t\t\tuniforms.map.value = material.map;\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\tif ( material.lightMap ) {\n\n\t\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t\t}\n\n\t\t\tif ( material.aoMap ) {\n\n\t\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t\t}\n\n\t\t\t// uv repeat and offset setting priorities\n\t\t\t// 1. color map\n\t\t\t// 2. specular map\n\t\t\t// 3. normal map\n\t\t\t// 4. bump map\n\t\t\t// 5. alpha map\n\t\t\t// 6. emissive map\n\n\t\t\tvar uvScaleMap;\n\n\t\t\tif ( material.map ) {\n\n\t\t\t\tuvScaleMap = material.map;\n\n\t\t\t} else if ( material.specularMap ) {\n\n\t\t\t\tuvScaleMap = material.specularMap;\n\n\t\t\t} else if ( material.displacementMap ) {\n\n\t\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t\t} else if ( material.normalMap ) {\n\n\t\t\t\tuvScaleMap = material.normalMap;\n\n\t\t\t} else if ( material.bumpMap ) {\n\n\t\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t\t} else if ( material.roughnessMap ) {\n\n\t\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t\t} else if ( material.metalnessMap ) {\n\n\t\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t\t} else if ( material.alphaMap ) {\n\n\t\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t\t} else if ( material.emissiveMap ) {\n\n\t\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t\t// backwards compatibility\n\t\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t\t}\n\n\t\t\t\tvar offset = uvScaleMap.offset;\n\t\t\t\tvar repeat = uvScaleMap.repeat;\n\n\t\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t\t}\n\n\t\t\tuniforms.envMap.value = material.envMap;\n\n\t\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap && material.envMap.isCubeTexture ) ) ? 1 : - 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t}\n\n\t\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\t\tuniforms.diffuse.value = material.color;\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t}\n\n\t\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\t\tuniforms.dashSize.value = material.dashSize;\n\t\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\t\tuniforms.scale.value = material.scale;\n\n\t\t}\n\n\t\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\t\tuniforms.diffuse.value = material.color;\n\t\t\tuniforms.opacity.value = material.opacity;\n\t\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\t\tuniforms.scale.value = _height * 0.5;\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tvar offset = material.map.offset;\n\t\t\t\tvar repeat = material.map.repeat;\n\n\t\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\t\tuniforms.fogColor.value = fog.color;\n\n\t\t\tif ( fog.isFog ) {\n\n\t\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\t\tuniforms.specular.value = material.specular;\n\t\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t\t}\n\n\t\t\tif ( material.bumpMap ) {\n\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t\t}\n\n\t\t\tif ( material.normalMap ) {\n\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t\t}\n\n\t\t\tif ( material.displacementMap ) {\n\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t\tif ( material.gradientMap ) {\n\n\t\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\t\tuniforms.roughness.value = material.roughness;\n\t\t\tuniforms.metalness.value = material.metalness;\n\n\t\t\tif ( material.roughnessMap ) {\n\n\t\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t\t}\n\n\t\t\tif ( material.metalnessMap ) {\n\n\t\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t\t}\n\n\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t\t}\n\n\t\t\tif ( material.bumpMap ) {\n\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t\t}\n\n\t\t\tif ( material.normalMap ) {\n\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t\t}\n\n\t\t\tif ( material.displacementMap ) {\n\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t\t}\n\n\t\t\tif ( material.envMap ) {\n\n\t\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\t\tuniforms.clearCoat.value = material.clearCoat;\n\t\t\tuniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n\n\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t}\n\n\t\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\t\tif ( material.bumpMap ) {\n\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t\t}\n\n\t\t\tif ( material.normalMap ) {\n\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t\t}\n\n\t\t\tif ( material.displacementMap ) {\n\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\t\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\t\tuniforms.ambientLightColor.needsUpdate = value;\n\n\t\t\tuniforms.directionalLights.needsUpdate = value;\n\t\t\tuniforms.pointLights.needsUpdate = value;\n\t\t\tuniforms.spotLights.needsUpdate = value;\n\t\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t\t}\n\n\t\t// Lighting\n\n\t\tfunction setupShadows( lights ) {\n\n\t\t\tvar lightShadowsLength = 0;\n\n\t\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\t\tvar light = lights[ i ];\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\t_lights.shadows[ lightShadowsLength ] = light;\n\t\t\t\t\tlightShadowsLength ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_lights.shadows.length = lightShadowsLength;\n\n\t\t}\n\n\t\tfunction setupLights( lights, camera ) {\n\n\t\t\tvar l, ll, light, shadow,\n\t\t\t\tr = 0, g = 0, b = 0,\n\t\t\t\tcolor,\n\t\t\t\tintensity,\n\t\t\t\tdistance,\n\t\t\t\tshadowMap,\n\n\t\t\t\tviewMatrix = camera.matrixWorldInverse,\n\n\t\t\t\tdirectionalLength = 0,\n\t\t\t\tpointLength = 0,\n\t\t\t\tspotLength = 0,\n\t\t\t\trectAreaLength = 0,\n\t\t\t\themiLength = 0;\n\n\t\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\t\tlight = lights[ l ];\n\n\t\t\t\tcolor = light.color;\n\t\t\t\tintensity = light.intensity;\n\t\t\t\tdistance = light.distance;\n\n\t\t\t\tshadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\t\tr += color.r * intensity;\n\t\t\t\t\tg += color.g * intensity;\n\t\t\t\t\tb += color.b * intensity;\n\n\t\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t\tuniforms.direction.sub( _vector3 );\n\t\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\t\tshadow = light.shadow;\n\n\t\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_lights.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\t_lights.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\t\t\t\t\t_lights.directional[ directionalLength ] = uniforms;\n\n\t\t\t\t\tdirectionalLength ++;\n\n\t\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t\tuniforms.direction.sub( _vector3 );\n\t\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\t\tshadow = light.shadow;\n\n\t\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_lights.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\t_lights.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\t\t\t\t\t_lights.spot[ spotLength ] = uniforms;\n\n\t\t\t\t\tspotLength ++;\n\n\t\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\t\t// (a) intensity controls irradiance of entire light\n\t\t\t\t\tuniforms.color\n\t\t\t\t\t\t.copy( color )\n\t\t\t\t\t\t.multiplyScalar( intensity / ( light.width * light.height ) );\n\n\t\t\t\t\t// (b) intensity controls the radiance per light area\n\t\t\t\t\t// uniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\t\t_matrix42.identity();\n\t\t\t\t\t_matrix4.copy( light.matrixWorld );\n\t\t\t\t\t_matrix4.premultiply( viewMatrix );\n\t\t\t\t\t_matrix42.extractRotation( _matrix4 );\n\n\t\t\t\t\tuniforms.halfWidth.set( light.width * 0.5,                0.0, 0.0 );\n\t\t\t\t\tuniforms.halfHeight.set(              0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\t\tuniforms.halfWidth.applyMatrix4( _matrix42 );\n\t\t\t\t\tuniforms.halfHeight.applyMatrix4( _matrix42 );\n\n\t\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\t\t_lights.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\t\trectAreaLength ++;\n\n\t\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\t\tshadow = light.shadow;\n\n\t\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_lights.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\t_lights.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\t\t\t\t\t_lights.point[ pointLength ] = uniforms;\n\n\t\t\t\t\tpointLength ++;\n\n\t\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\t\t_lights.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\t\themiLength ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_lights.ambient[ 0 ] = r;\n\t\t\t_lights.ambient[ 1 ] = g;\n\t\t\t_lights.ambient[ 2 ] = b;\n\n\t\t\t_lights.directional.length = directionalLength;\n\t\t\t_lights.spot.length = spotLength;\n\t\t\t_lights.rectArea.length = rectAreaLength;\n\t\t\t_lights.point.length = pointLength;\n\t\t\t_lights.hemi.length = hemiLength;\n\n\t\t\t// TODO (sam-g-steel) why aren't we using join\n\t\t\t_lights.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + rectAreaLength + ',' + hemiLength + ',' + _lights.shadows.length;\n\n\t\t}\n\n\t\t// GL state setting\n\n\t\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\n\n\t\t\tstate.setCullFace( cullFace );\n\t\t\tstate.setFlipSided( frontFaceDirection === FrontFaceDirectionCW );\n\n\t\t};\n\n\t\t// Textures\n\n\t\tfunction allocTextureUnit() {\n\n\t\t\tvar textureUnit = _usedTextureUnits;\n\n\t\t\tif ( textureUnit >= capabilities.maxTextures ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\n\n\t\t\t}\n\n\t\t\t_usedTextureUnits += 1;\n\n\t\t\treturn textureUnit;\n\n\t\t}\n\n\t\tthis.allocTextureUnit = allocTextureUnit;\n\n\t\t// this.setTexture2D = setTexture2D;\n\t\tthis.setTexture2D = ( function () {\n\n\t\t\tvar warned = false;\n\n\t\t\t// backwards compatibility: peel texture.texture\n\t\t\treturn function setTexture2D( texture, slot ) {\n\n\t\t\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture = texture.texture;\n\n\t\t\t\t}\n\n\t\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tthis.setTexture = ( function () {\n\n\t\t\tvar warned = false;\n\n\t\t\treturn function setTexture( texture, slot ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tthis.setTextureCube = ( function () {\n\n\t\t\tvar warned = false;\n\n\t\t\treturn function setTextureCube( texture, slot ) {\n\n\t\t\t\t// backwards compatibility: peel texture.texture\n\t\t\t\tif ( texture && texture.isWebGLRenderTargetCube ) {\n\n\t\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture = texture.texture;\n\n\t\t\t\t}\n\n\t\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t\t\t// TODO: unify these code paths\n\t\t\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t\t\t// this function alone should take care of cube textures\n\t\t\t\t\ttextures.setTextureCube( texture, slot );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\n\t\t\t\t\ttextures.setTextureCubeDynamic( texture, slot );\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn _currentRenderTarget;\n\n\t\t};\n\n\t\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\t\t_currentRenderTarget = renderTarget;\n\n\t\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t\t}\n\n\t\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\t\tvar framebuffer;\n\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\tif ( isCube ) {\n\n\t\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\n\n\t\t\t\t}\n\n\t\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t\t\t_currentViewport.copy( renderTarget.viewport );\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = null;\n\n\t\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\n\t\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\n\n\t\t\t}\n\n\t\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t\t}\n\n\t\t\tstate.scissor( _currentScissor );\n\t\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\t\tstate.viewport( _currentViewport );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\n\n\t\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( framebuffer ) {\n\n\t\t\t\tvar restore = false;\n\n\t\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\t\trestore = true;\n\n\t\t\t\t}\n\n\t\t\t\ttry {\n\n\t\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\t\tif ( textureFormat !== RGBAFormat && paramThreeToGL( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( textureType !== UnsignedByteType && paramThreeToGL( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t\t! ( textureType === FloatType && ( extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t\t! ( textureType === HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t\t_gl.readPixels( x, y, width, height, paramThreeToGL( textureFormat ), paramThreeToGL( textureType ), buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} finally {\n\n\t\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\t// Map three.js constants to WebGL constants\n\n\t\tfunction paramThreeToGL( p ) {\n\n\t\t\tvar extension;\n\n\t\t\tif ( p === RepeatWrapping ) return _gl.REPEAT;\n\t\t\tif ( p === ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\n\t\t\tif ( p === MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\n\n\t\t\tif ( p === NearestFilter ) return _gl.NEAREST;\n\t\t\tif ( p === NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\n\t\t\tif ( p === NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\n\n\t\t\tif ( p === LinearFilter ) return _gl.LINEAR;\n\t\t\tif ( p === LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\n\t\t\tif ( p === LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\n\n\t\t\tif ( p === UnsignedByteType ) return _gl.UNSIGNED_BYTE;\n\t\t\tif ( p === UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\n\t\t\tif ( p === UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\n\t\t\tif ( p === UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\n\n\t\t\tif ( p === ByteType ) return _gl.BYTE;\n\t\t\tif ( p === ShortType ) return _gl.SHORT;\n\t\t\tif ( p === UnsignedShortType ) return _gl.UNSIGNED_SHORT;\n\t\t\tif ( p === IntType ) return _gl.INT;\n\t\t\tif ( p === UnsignedIntType ) return _gl.UNSIGNED_INT;\n\t\t\tif ( p === FloatType ) return _gl.FLOAT;\n\n\t\t\tif ( p === HalfFloatType ) {\n\n\t\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\t\tif ( extension !== null ) return extension.HALF_FLOAT_OES;\n\n\t\t\t}\n\n\t\t\tif ( p === AlphaFormat ) return _gl.ALPHA;\n\t\t\tif ( p === RGBFormat ) return _gl.RGB;\n\t\t\tif ( p === RGBAFormat ) return _gl.RGBA;\n\t\t\tif ( p === LuminanceFormat ) return _gl.LUMINANCE;\n\t\t\tif ( p === LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\n\t\t\tif ( p === DepthFormat ) return _gl.DEPTH_COMPONENT;\n\t\t\tif ( p === DepthStencilFormat ) return _gl.DEPTH_STENCIL;\n\n\t\t\tif ( p === AddEquation ) return _gl.FUNC_ADD;\n\t\t\tif ( p === SubtractEquation ) return _gl.FUNC_SUBTRACT;\n\t\t\tif ( p === ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\n\n\t\t\tif ( p === ZeroFactor ) return _gl.ZERO;\n\t\t\tif ( p === OneFactor ) return _gl.ONE;\n\t\t\tif ( p === SrcColorFactor ) return _gl.SRC_COLOR;\n\t\t\tif ( p === OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\n\t\t\tif ( p === SrcAlphaFactor ) return _gl.SRC_ALPHA;\n\t\t\tif ( p === OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\n\t\t\tif ( p === DstAlphaFactor ) return _gl.DST_ALPHA;\n\t\t\tif ( p === OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\n\n\t\t\tif ( p === DstColorFactor ) return _gl.DST_COLOR;\n\t\t\tif ( p === OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\n\t\t\tif ( p === SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\n\n\t\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\t\tif ( extension !== null ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t}\n\n\t\t\tif ( p === MinEquation || p === MaxEquation ) {\n\n\t\t\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === MinEquation ) return extension.MIN_EXT;\n\t\t\t\t\tif ( p === MaxEquation ) return extension.MAX_EXT;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\t\tif ( extension !== null ) return extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t}\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction FogExp2 ( color, density ) {\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\t\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n\t}\n\n\tFogExp2.prototype.isFogExp2 = true;\n\n\tFogExp2.prototype.clone = function () {\n\n\t\treturn new FogExp2( this.color.getHex(), this.density );\n\n\t};\n\n\tFogExp2.prototype.toJSON = function ( meta ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction Fog ( color, near, far ) {\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\n\t\tthis.near = ( near !== undefined ) ? near : 1;\n\t\tthis.far = ( far !== undefined ) ? far : 1000;\n\n\t}\n\n\tFog.prototype.isFog = true;\n\n\tFog.prototype.clone = function () {\n\n\t\treturn new Fog( this.color.getHex(), this.near, this.far );\n\n\t};\n\n\tFog.prototype.toJSON = function ( meta ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Scene () {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.fog = null;\n\t\tthis.overrideMaterial = null;\n\n\t\tthis.autoUpdate = true; // checked by the renderer\n\n\t}\n\n\tScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Scene,\n\n\t\tcopy: function ( source, recursive ) {\n\n\t\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\t\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\t\tthis.autoUpdate = source.autoUpdate;\n\t\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\t\treturn data;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction LensFlare( texture, size, distance, blending, color ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.lensFlares = [];\n\n\t\tthis.positionScreen = new Vector3();\n\t\tthis.customUpdateCallback = undefined;\n\n\t\tif ( texture !== undefined ) {\n\n\t\t\tthis.add( texture, size, distance, blending, color );\n\n\t\t}\n\n\t}\n\n\tLensFlare.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: LensFlare,\n\n\t\tisLensFlare: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tObject3D.prototype.copy.call( this, source );\n\n\t\t\tthis.positionScreen.copy( source.positionScreen );\n\t\t\tthis.customUpdateCallback = source.customUpdateCallback;\n\n\t\t\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\n\n\t\t\t\tthis.lensFlares.push( source.lensFlares[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tadd: function ( texture, size, distance, blending, color, opacity ) {\n\n\t\t\tif ( size === undefined ) size = - 1;\n\t\t\tif ( distance === undefined ) distance = 0;\n\t\t\tif ( opacity === undefined ) opacity = 1;\n\t\t\tif ( color === undefined ) color = new Color( 0xffffff );\n\t\t\tif ( blending === undefined ) blending = NormalBlending;\n\n\t\t\tdistance = Math.min( distance, Math.max( 0, distance ) );\n\n\t\t\tthis.lensFlares.push( {\n\t\t\t\ttexture: texture,\t// THREE.Texture\n\t\t\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\n\t\t\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\n\t\t\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\n\t\t\t\tscale: 1, \t\t// scale\n\t\t\t\trotation: 0, \t\t// rotation\n\t\t\t\topacity: opacity,\t// opacity\n\t\t\t\tcolor: color,\t\t// color\n\t\t\t\tblending: blending\t// blending\n\t\t\t} );\n\n\t\t},\n\n\t\t/*\n\t\t * Update lens flares update positions on all flares based on the screen position\n\t\t * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\n\t\t */\n\n\t\tupdateLensFlares: function () {\n\n\t\t\tvar f, fl = this.lensFlares.length;\n\t\t\tvar flare;\n\t\t\tvar vecX = - this.positionScreen.x * 2;\n\t\t\tvar vecY = - this.positionScreen.y * 2;\n\n\t\t\tfor ( f = 0; f < fl; f ++ ) {\n\n\t\t\t\tflare = this.lensFlares[ f ];\n\n\t\t\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\n\t\t\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\n\n\t\t\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\n\t\t\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * parameters = {\n\t *  color: <hex>,\n\t *  opacity: <float>,\n\t *  map: new THREE.Texture( <Image> ),\n\t *\n\t *\tuvOffset: new THREE.Vector2(),\n\t *\tuvScale: new THREE.Vector2()\n\t * }\n\t */\n\n\tfunction SpriteMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'SpriteMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\t\tthis.map = null;\n\n\t\tthis.rotation = 0;\n\n\t\tthis.fog = false;\n\t\tthis.lights = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tSpriteMaterial.prototype = Object.create( Material.prototype );\n\tSpriteMaterial.prototype.constructor = SpriteMaterial;\n\tSpriteMaterial.prototype.isSpriteMaterial = true;\n\n\tSpriteMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.map = source.map;\n\n\t\tthis.rotation = source.rotation;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction Sprite( material ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Sprite';\n\n\t\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\t}\n\n\tSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Sprite,\n\n\t\tisSprite: true,\n\n\t\traycast: ( function () {\n\n\t\t\tvar intersectPoint = new Vector3();\n\t\t\tvar worldPosition = new Vector3();\n\t\t\tvar worldScale = new Vector3();\n\n\t\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\t\tworldPosition.setFromMatrixPosition( this.matrixWorld );\n\t\t\t\traycaster.ray.closestPointToPoint( worldPosition, intersectPoint );\n\n\t\t\t\tworldScale.setFromMatrixScale( this.matrixWorld );\n\t\t\t\tvar guessSizeSq = worldScale.x * worldScale.y / 4;\n\n\t\t\t\tif ( worldPosition.distanceToSquared( intersectPoint ) > guessSizeSq ) return;\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tpoint: intersectPoint.clone(),\n\t\t\t\t\tface: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t};\n\n\t\t}() ),\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.material ).copy( this );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction LOD() {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'LOD';\n\n\t\tObject.defineProperties( this, {\n\t\t\tlevels: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: []\n\t\t\t}\n\t\t} );\n\n\t}\n\n\tLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: LOD,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\t\tvar levels = source.levels;\n\n\t\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tvar level = levels[ i ];\n\n\t\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\taddLevel: function ( object, distance ) {\n\n\t\t\tif ( distance === undefined ) distance = 0;\n\n\t\t\tdistance = Math.abs( distance );\n\n\t\t\tvar levels = this.levels;\n\n\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\t\tthis.add( object );\n\n\t\t},\n\n\t\tgetObjectForDistance: function ( distance ) {\n\n\t\t\tvar levels = this.levels;\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t},\n\n\t\traycast: ( function () {\n\n\t\t\tvar matrixPosition = new Vector3();\n\n\t\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\n\n\t\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t\t};\n\n\t\t}() ),\n\n\t\tupdate: function () {\n\n\t\t\tvar v1 = new Vector3();\n\t\t\tvar v2 = new Vector3();\n\n\t\t\treturn function update( camera ) {\n\n\t\t\t\tvar levels = this.levels;\n\n\t\t\t\tif ( levels.length > 1 ) {\n\n\t\t\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\t\t\tvar distance = v1.distanceTo( v2 );\n\n\t\t\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}(),\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\t\tdata.object.levels = [];\n\n\t\t\tvar levels = this.levels;\n\n\t\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tvar level = levels[ i ];\n\n\t\t\t\tdata.object.levels.push( {\n\t\t\t\t\tobject: level.object.uuid,\n\t\t\t\t\tdistance: level.distance\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author michael guerrero / http://realitymeltdown.com\n\t * @author ikerr / http://verold.com\n\t */\n\n\tfunction Skeleton( bones, boneInverses ) {\n\n\t\t// copy the bone array\n\n\t\tbones = bones || [];\n\n\t\tthis.bones = bones.slice( 0 );\n\t\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\n\n\t\t// use the supplied bone inverses or calculate the inverses\n\n\t\tif ( boneInverses === undefined ) {\n\n\t\t\tthis.calculateInverses();\n\n\t\t} else {\n\n\t\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\n\n\t\t\t\tthis.boneInverses = [];\n\n\t\t\t\tfor ( var i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tObject.assign( Skeleton.prototype, {\n\n\t\tcalculateInverses: function () {\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( var i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\tvar inverse = new Matrix4();\n\n\t\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boneInverses.push( inverse );\n\n\t\t\t}\n\n\t\t},\n\n\t\tpose: function () {\n\n\t\t\tvar bone, i, il;\n\n\t\t\t// recover the bind-time world matrices\n\n\t\t\tfor ( i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\tbone = this.bones[ i ];\n\n\t\t\t\tif ( bone ) {\n\n\t\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// compute the local matrices, positions, rotations and scales\n\n\t\t\tfor ( i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\tbone = this.bones[ i ];\n\n\t\t\t\tif ( bone ) {\n\n\t\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: ( function () {\n\n\t\t\tvar offsetMatrix = new Matrix4();\n\t\t\tvar identityMatrix = new Matrix4();\n\n\t\t\treturn function update() {\n\n\t\t\t\tvar bones = this.bones;\n\t\t\t\tvar boneInverses = this.boneInverses;\n\t\t\t\tvar boneMatrices = this.boneMatrices;\n\t\t\t\tvar boneTexture = this.boneTexture;\n\n\t\t\t\t// flatten bone matrices to array\n\n\t\t\t\tfor ( var i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t\t\t// compute the offset between the current and the original transform\n\n\t\t\t\t\tvar matrix = bones[ i ] ? bones[ i ].matrixWorld : identityMatrix;\n\n\t\t\t\t\toffsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t\t\toffsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( boneTexture !== undefined ) {\n\n\t\t\t\t\tboneTexture.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t} )(),\n\n\t\tclone: function () {\n\n\t\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author ikerr / http://verold.com\n\t */\n\n\tfunction Bone() {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Bone';\n\n\t}\n\n\tBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Bone,\n\n\t\tisBone: true\n\n\t} );\n\n\t/**\n\t * @author mikael emtinger / http://gomo.se/\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author ikerr / http://verold.com\n\t */\n\n\tfunction SkinnedMesh( geometry, material ) {\n\n\t\tMesh.call( this, geometry, material );\n\n\t\tthis.type = 'SkinnedMesh';\n\n\t\tthis.bindMode = 'attached';\n\t\tthis.bindMatrix = new Matrix4();\n\t\tthis.bindMatrixInverse = new Matrix4();\n\n\t\tvar bones = this.initBones();\n\t\tvar skeleton = new Skeleton( bones );\n\n\t\tthis.bind( skeleton, this.matrixWorld );\n\n\t\tthis.normalizeSkinWeights();\n\n\t}\n\n\tSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\t\tconstructor: SkinnedMesh,\n\n\t\tisSkinnedMesh: true,\n\n\t\tinitBones: function () {\n\n\t\t\tvar bones = [], bone, gbone;\n\t\t\tvar i, il;\n\n\t\t\tif ( this.geometry && this.geometry.bones !== undefined ) {\n\n\t\t\t\t// first, create array of 'Bone' objects from geometry data\n\n\t\t\t\tfor ( i = 0, il = this.geometry.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tgbone = this.geometry.bones[ i ];\n\n\t\t\t\t\t// create new 'Bone' object\n\n\t\t\t\t\tbone = new Bone();\n\t\t\t\t\tbones.push( bone );\n\n\t\t\t\t\t// apply values\n\n\t\t\t\t\tbone.name = gbone.name;\n\t\t\t\t\tbone.position.fromArray( gbone.pos );\n\t\t\t\t\tbone.quaternion.fromArray( gbone.rotq );\n\t\t\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\n\n\t\t\t\t}\n\n\t\t\t\t// second, create bone hierarchy\n\n\t\t\t\tfor ( i = 0, il = this.geometry.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tgbone = this.geometry.bones[ i ];\n\n\t\t\t\t\tif ( ( gbone.parent !== - 1 ) && ( gbone.parent !== null ) && ( bones[ gbone.parent ] !== undefined ) ) {\n\n\t\t\t\t\t\t// subsequent bones in the hierarchy\n\n\t\t\t\t\t\tbones[ gbone.parent ].add( bones[ i ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// topmost bone, immediate child of the skinned mesh\n\n\t\t\t\t\t\tthis.add( bones[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// now the bones are part of the scene graph and children of the skinned mesh.\n\t\t\t// let's update the corresponding matrices\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\treturn bones;\n\n\t\t},\n\n\t\tbind: function ( skeleton, bindMatrix ) {\n\n\t\t\tthis.skeleton = skeleton;\n\n\t\t\tif ( bindMatrix === undefined ) {\n\n\t\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t\t}\n\n\t\t\tthis.bindMatrix.copy( bindMatrix );\n\t\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n\t\t},\n\n\t\tpose: function () {\n\n\t\t\tthis.skeleton.pose();\n\n\t\t},\n\n\t\tnormalizeSkinWeights: function () {\n\n\t\t\tvar scale, i;\n\n\t\t\tif ( this.geometry && this.geometry.isGeometry ) {\n\n\t\t\t\tfor ( i = 0; i < this.geometry.skinWeights.length; i ++ ) {\n\n\t\t\t\t\tvar sw = this.geometry.skinWeights[ i ];\n\n\t\t\t\t\tscale = 1.0 / sw.lengthManhattan();\n\n\t\t\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\t\t\tsw.multiplyScalar( scale );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tsw.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( this.geometry && this.geometry.isBufferGeometry ) {\n\n\t\t\t\tvar vec = new Vector4();\n\n\t\t\t\tvar skinWeight = this.geometry.attributes.skinWeight;\n\n\t\t\t\tfor ( i = 0; i < skinWeight.count; i ++ ) {\n\n\t\t\t\t\tvec.x = skinWeight.getX( i );\n\t\t\t\t\tvec.y = skinWeight.getY( i );\n\t\t\t\t\tvec.z = skinWeight.getZ( i );\n\t\t\t\t\tvec.w = skinWeight.getW( i );\n\n\t\t\t\t\tscale = 1.0 / vec.lengthManhattan();\n\n\t\t\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\t\t\tvec.multiplyScalar( scale );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvec.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t\t\t}\n\n\t\t\t\t\tskinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdateMatrixWorld: function ( force ) {\n\n\t\t\tMesh.prototype.updateMatrixWorld.call( this, force );\n\n\t\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t\t}\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * parameters = {\n\t *  color: <hex>,\n\t *  opacity: <float>,\n\t *\n\t *  linewidth: <float>,\n\t *  linecap: \"round\",\n\t *  linejoin: \"round\"\n\t * }\n\t */\n\n\tfunction LineBasicMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'LineBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.linewidth = 1;\n\t\tthis.linecap = 'round';\n\t\tthis.linejoin = 'round';\n\n\t\tthis.lights = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tLineBasicMaterial.prototype = Object.create( Material.prototype );\n\tLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\n\tLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\n\tLineBasicMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.linewidth = source.linewidth;\n\t\tthis.linecap = source.linecap;\n\t\tthis.linejoin = source.linejoin;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Line( geometry, material, mode ) {\n\n\t\tif ( mode === 1 ) {\n\n\t\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\n\t\t\treturn new LineSegments( geometry, material );\n\n\t\t}\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Line';\n\n\t\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\t\tthis.material = material !== undefined ? material : new LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\t}\n\n\tLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Line,\n\n\t\tisLine: true,\n\n\t\traycast: ( function () {\n\n\t\t\tvar inverseMatrix = new Matrix4();\n\t\t\tvar ray = new Ray();\n\t\t\tvar sphere = new Sphere();\n\n\t\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\t\tvar precision = raycaster.linePrecision;\n\t\t\t\tvar precisionSq = precision * precision;\n\n\t\t\t\tvar geometry = this.geometry;\n\t\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t\t//\n\n\t\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t\tvar vStart = new Vector3();\n\t\t\t\tvar vEnd = new Vector3();\n\t\t\t\tvar interSegment = new Vector3();\n\t\t\t\tvar interRay = new Vector3();\n\t\t\t\tvar step = (this && this.isLineSegments) ? 2 : 1;\n\n\t\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\tvar index = geometry.index;\n\t\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\t\t\tvar a = indices[ i ];\n\t\t\t\t\t\t\tvar b = indices[ i + 1 ];\n\n\t\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\t\tvar nbVertices = vertices.length;\n\n\t\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}() ),\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction LineSegments( geometry, material ) {\n\n\t\tLine.call( this, geometry, material );\n\n\t\tthis.type = 'LineSegments';\n\n\t}\n\n\tLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\t\tconstructor: LineSegments,\n\n\t\tisLineSegments: true\n\n\t} );\n\n\t/**\n\t * @author mgreter / http://github.com/mgreter\n\t */\n\n\tfunction LineLoop( geometry, material ) {\n\n\t\tLine.call( this, geometry, material );\n\n\t\tthis.type = 'LineLoop';\n\n\t}\n\n\tLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\t\tconstructor: LineLoop,\n\n\t\tisLineLoop: true,\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * parameters = {\n\t *  color: <hex>,\n\t *  opacity: <float>,\n\t *  map: new THREE.Texture( <Image> ),\n\t *\n\t *  size: <float>,\n\t *  sizeAttenuation: <bool>\n\t * }\n\t */\n\n\tfunction PointsMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'PointsMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.size = 1;\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.lights = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tPointsMaterial.prototype = Object.create( Material.prototype );\n\tPointsMaterial.prototype.constructor = PointsMaterial;\n\n\tPointsMaterial.prototype.isPointsMaterial = true;\n\n\tPointsMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.size = source.size;\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction Points( geometry, material ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Points';\n\n\t\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\t\tthis.material = material !== undefined ? material : new PointsMaterial( { color: Math.random() * 0xffffff } );\n\n\t}\n\n\tPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Points,\n\n\t\tisPoints: true,\n\n\t\traycast: ( function () {\n\n\t\t\tvar inverseMatrix = new Matrix4();\n\t\t\tvar ray = new Ray();\n\t\t\tvar sphere = new Sphere();\n\n\t\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\t\tvar object = this;\n\t\t\t\tvar geometry = this.geometry;\n\t\t\t\tvar matrixWorld = this.matrixWorld;\n\t\t\t\tvar threshold = raycaster.params.Points.threshold;\n\n\t\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\t\tsphere.applyMatrix4( matrixWorld );\n\t\t\t\tsphere.radius += threshold;\n\n\t\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t\t//\n\n\t\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\t\t\tvar localThresholdSq = localThreshold * localThreshold;\n\t\t\t\tvar position = new Vector3();\n\n\t\t\t\tfunction testPoint( point, index ) {\n\n\t\t\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\n\n\t\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\t\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\n\t\t\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\t\t\t\t\tpoint: intersectPoint.clone(),\n\t\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tobject: object\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\tvar index = geometry.index;\n\t\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\tvar a = indices[ i ];\n\n\t\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\n\n\t\t\t\t\t\t\ttestPoint( position, a );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tposition.fromArray( positions, i * 3 );\n\n\t\t\t\t\t\t\ttestPoint( position, i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\t\ttestPoint( vertices[ i ], i );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}() ),\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Group() {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Group';\n\n\t}\n\n\tGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Group\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.generateMipmaps = false;\n\n\t\tvar scope = this;\n\n\t\tfunction update() {\n\n\t\t\trequestAnimationFrame( update );\n\n\t\t\tif ( video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\t\tscope.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tupdate();\n\n\t}\n\n\tVideoTexture.prototype = Object.create( Texture.prototype );\n\tVideoTexture.prototype.constructor = VideoTexture;\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\t\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.image = { width: width, height: height };\n\t\tthis.mipmaps = mipmaps;\n\n\t\t// no flipping for cube textures\n\t\t// (also flipping doesn't work for compressed textures )\n\n\t\tthis.flipY = false;\n\n\t\t// can't generate mipmaps for compressed textures\n\t\t// mips must be embedded in DDS files\n\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n\tCompressedTexture.prototype = Object.create( Texture.prototype );\n\tCompressedTexture.prototype.constructor = CompressedTexture;\n\n\tCompressedTexture.prototype.isCompressedTexture = true;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\tCanvasTexture.prototype = Object.create( Texture.prototype );\n\tCanvasTexture.prototype.constructor = CanvasTexture;\n\n\t/**\n\t * @author Matt DesLauriers / @mattdesl\n\t * @author atix / arthursilber.de\n\t */\n\n\tfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\t\tformat = format !== undefined ? format : DepthFormat;\n\n\t\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' )\n\n\t\t}\n\n\t\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\n\t\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\t\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.image = { width: width, height: height };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.flipY = false;\n\t\tthis.generateMipmaps\t= false;\n\n\t}\n\n\tDepthTexture.prototype = Object.create( Texture.prototype );\n\tDepthTexture.prototype.constructor = DepthTexture;\n\tDepthTexture.prototype.isDepthTexture = true;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\tfunction WireframeGeometry( geometry ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'WireframeGeometry';\n\n\t\t// buffer\n\n\t\tvar vertices = [];\n\n\t\t// helper variables\n\n\t\tvar i, j, l, o, ol;\n\t\tvar edge = [ 0, 0 ], edges = {}, e, edge1, edge2;\n\t\tvar key, keys = [ 'a', 'b', 'c' ];\n\t\tvar vertex;\n\n\t\t// different logic for Geometry and BufferGeometry\n\n\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t// create a data structure that contains all edges without duplicates\n\n\t\t\tvar faces = geometry.faces;\n\n\t\t\tfor ( i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\tedge1 = face[ keys[ j ] ];\n\t\t\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// generate vertices\n\n\t\t\tfor ( key in edges ) {\n\n\t\t\t\te = edges[ key ];\n\n\t\t\t\tvertex = geometry.vertices[ e.index1 ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex = geometry.vertices[ e.index2 ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t} else if ( geometry && geometry.isBufferGeometry ) {\n\n\t\t\tvar position, indices, groups;\n\t\t\tvar group, start, count;\n\t\t\tvar index1, index2;\n\n\t\t\tvertex = new Vector3();\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t// indexed BufferGeometry\n\n\t\t\t\tposition = geometry.attributes.position;\n\t\t\t\tindices = geometry.index;\n\t\t\t\tgroups = geometry.groups;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\t// create a data structure that contains all eges without duplicates\n\n\t\t\t\tfor ( o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\t\tgroup = groups[ o ];\n\n\t\t\t\t\tstart = group.start;\n\t\t\t\t\tcount = group.count;\n\n\t\t\t\t\tfor ( i = start, l = ( start + count ); i < l; i += 3 ) {\n\n\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tedge1 = indices.getX( i + j );\n\t\t\t\t\t\t\tedge2 = indices.getX( i + ( j + 1 ) % 3 );\n\t\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\t\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// generate vertices\n\n\t\t\t\tfor ( key in edges ) {\n\n\t\t\t\t\te = edges[ key ];\n\n\t\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed BufferGeometry\n\n\t\t\t\tposition = geometry.attributes.position;\n\n\t\t\t\tfor ( i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\t\tindex1 = 3 * i + j;\n\t\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t\tindex2 = 3 * i + ( ( j + 1 ) % 3 );\n\t\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\n\t\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t}\n\n\tWireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tWireframeGeometry.prototype.constructor = WireframeGeometry;\n\n\t/**\n\t * @author zz85 / https://github.com/zz85\n\t * @author Mugen87 / https://github.com/Mugen87\n\t *\n\t * Parametric Surfaces Geometry\n\t * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\n\t */\n\n\t// ParametricGeometry\n\n\tfunction ParametricGeometry( func, slices, stacks ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'ParametricGeometry';\n\n\t\tthis.parameters = {\n\t\t\tfunc: func,\n\t\t\tslices: slices,\n\t\t\tstacks: stacks\n\t\t};\n\n\t\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tParametricGeometry.prototype = Object.create( Geometry.prototype );\n\tParametricGeometry.prototype.constructor = ParametricGeometry;\n\n\t// ParametricBufferGeometry\n\n\tfunction ParametricBufferGeometry( func, slices, stacks ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'ParametricBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tfunc: func,\n\t\t\tslices: slices,\n\t\t\tstacks: stacks\n\t\t};\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\tvar EPS = 0.00001;\n\n\t\tvar normal = new Vector3();\n\n\t\tvar p0 = new Vector3(), p1 = new Vector3();\n\t\tvar pu = new Vector3(), pv = new Vector3();\n\n\t\tvar i, j;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tvar sliceCount = slices + 1;\n\n\t\tfor ( i = 0; i <= stacks; i ++ ) {\n\n\t\t\tvar v = i / stacks;\n\n\t\t\tfor ( j = 0; j <= slices; j ++ ) {\n\n\t\t\t\tvar u = j / slices;\n\n\t\t\t\t// vertex\n\n\t\t\t\tp0 = func( u, v, p0 );\n\t\t\t\tvertices.push( p0.x, p0.y, p0.z );\n\n\t\t\t\t// normal\n\n\t\t\t\t// approximate tangent vectors via finite differences\n\n\t\t\t\tif ( u - EPS >= 0 ) {\n\n\t\t\t\t\tp1 = func( u - EPS, v, p1 );\n\t\t\t\t\tpu.subVectors( p0, p1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp1 = func( u + EPS, v, p1 );\n\t\t\t\t\tpu.subVectors( p1, p0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( v - EPS >= 0 ) {\n\n\t\t\t\t\tp1 = func( u, v - EPS, p1 );\n\t\t\t\t\tpv.subVectors( p0, p1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp1 = func( u, v + EPS, p1 );\n\t\t\t\t\tpv.subVectors( p1, p0 );\n\n\t\t\t\t}\n\n\t\t\t\t// cross product of tangent vectors returns surface normal\n\n\t\t\t\tnormal.crossVectors( pu, pv ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u, v );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( i = 0; i < stacks; i ++ ) {\n\n\t\t\tfor ( j = 0; j < slices; j ++ ) {\n\n\t\t\t\tvar a = i * sliceCount + j;\n\t\t\t\tvar b = i * sliceCount + j + 1;\n\t\t\t\tvar c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\t\tvar d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t\t// faces one and two\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\n\n\t/**\n\t * @author clockworkgeek / https://github.com/clockworkgeek\n\t * @author timothypratley / https://github.com/timothypratley\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// PolyhedronGeometry\n\n\tfunction PolyhedronGeometry( vertices, indices, radius, detail ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'PolyhedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tPolyhedronGeometry.prototype = Object.create( Geometry.prototype );\n\tPolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\n\n\t// PolyhedronBufferGeometry\n\n\tfunction PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'PolyhedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tradius = radius || 1;\n\t\tdetail = detail || 0;\n\n\t\t// default buffer data\n\n\t\tvar vertexBuffer = [];\n\t\tvar uvBuffer = [];\n\n\t\t// the subdivision creates the vertex buffer data\n\n\t\tsubdivide( detail );\n\n\t\t// all vertices should lie on a conceptual sphere with a given radius\n\n\t\tappplyRadius( radius );\n\n\t\t// finally, create the uv data\n\n\t\tgenerateUVs();\n\n\t\t// build non-indexed geometry\n\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\t\tif ( detail === 0 ) {\n\n\t\t\tthis.computeVertexNormals(); // flat normals\n\n\t\t} else {\n\n\t\t\tthis.normalizeNormals(); // smooth normals\n\n\t\t}\n\n\t\t// helper functions\n\n\t\tfunction subdivide( detail ) {\n\n\t\t\tvar a = new Vector3();\n\t\t\tvar b = new Vector3();\n\t\t\tvar c = new Vector3();\n\n\t\t\t// iterate over all faces and apply a subdivison with the given detail value\n\n\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t// get the vertices of the face\n\n\t\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t\t// perform subdivision\n\n\t\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\t\tvar cols = Math.pow( 2, detail );\n\n\t\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\t\tvar v = [];\n\n\t\t\tvar i, j;\n\n\t\t\t// construct all of the vertices for this subdivision\n\n\t\t\tfor ( i = 0; i <= cols; i ++ ) {\n\n\t\t\t\tv[ i ] = [];\n\n\t\t\t\tvar aj = a.clone().lerp( c, i / cols );\n\t\t\t\tvar bj = b.clone().lerp( c, i / cols );\n\n\t\t\t\tvar rows = cols - i;\n\n\t\t\t\tfor ( j = 0; j <= rows; j ++ ) {\n\n\t\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// construct all of the faces\n\n\t\t\tfor ( i = 0; i < cols; i ++ ) {\n\n\t\t\t\tfor ( j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\t\tvar k = Math.floor( j / 2 );\n\n\t\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction appplyRadius( radius ) {\n\n\t\t\tvar vertex = new Vector3();\n\n\t\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\t\tfor ( var i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tvar vertex = new Vector3();\n\n\t\t\tfor ( var i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tvar u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\t\tvar v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t\t}\n\n\t\t\tcorrectUVs();\n\n\t\t\tcorrectSeam();\n\n\t\t}\n\n\t\tfunction correctSeam() {\n\n\t\t\t// handle case when face straddles the seam, see #3269\n\n\t\t\tfor ( var i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t\t// uv data of a single face\n\n\t\t\t\tvar x0 = uvBuffer[ i + 0 ];\n\t\t\t\tvar x1 = uvBuffer[ i + 2 ];\n\t\t\t\tvar x2 = uvBuffer[ i + 4 ];\n\n\t\t\t\tvar max = Math.max( x0, x1, x2 );\n\t\t\t\tvar min = Math.min( x0, x1, x2 );\n\n\t\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushVertex( vertex ) {\n\n\t\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tfunction getVertexByIndex( index, vertex ) {\n\n\t\t\tvar stride = index * 3;\n\n\t\t\tvertex.x = vertices[ stride + 0 ];\n\t\t\tvertex.y = vertices[ stride + 1 ];\n\t\t\tvertex.z = vertices[ stride + 2 ];\n\n\t\t}\n\n\t\tfunction correctUVs() {\n\n\t\t\tvar a = new Vector3();\n\t\t\tvar b = new Vector3();\n\t\t\tvar c = new Vector3();\n\n\t\t\tvar centroid = new Vector3();\n\n\t\t\tvar uvA = new Vector2();\n\t\t\tvar uvB = new Vector2();\n\t\t\tvar uvC = new Vector2();\n\n\t\t\tfor ( var i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\t\tvar azi = azimuth( centroid );\n\n\t\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t\t}\n\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\t\tfunction azimuth( vector ) {\n\n\t\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t\t}\n\n\n\t\t// Angle above the XZ plane.\n\n\t\tfunction inclination( vector ) {\n\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t\t}\n\n\t}\n\n\tPolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tPolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\n\n\t/**\n\t * @author timothypratley / https://github.com/timothypratley\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// TetrahedronGeometry\n\n\tfunction TetrahedronGeometry( radius, detail ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'TetrahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tTetrahedronGeometry.prototype = Object.create( Geometry.prototype );\n\tTetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\n\n\t// TetrahedronBufferGeometry\n\n\tfunction TetrahedronBufferGeometry( radius, detail ) {\n\n\t\tvar vertices = [\n\t\t\t1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\n\t\t];\n\n\t\tvar indices = [\n\t\t\t2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\n\t\t];\n\n\t\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\t\tthis.type = 'TetrahedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tTetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\n\tTetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\n\n\t/**\n\t * @author timothypratley / https://github.com/timothypratley\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// OctahedronGeometry\n\n\tfunction OctahedronGeometry( radius, detail ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'OctahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tOctahedronGeometry.prototype = Object.create( Geometry.prototype );\n\tOctahedronGeometry.prototype.constructor = OctahedronGeometry;\n\n\t// OctahedronBufferGeometry\n\n\tfunction OctahedronBufferGeometry( radius, detail ) {\n\n\t\tvar vertices = [\n\t\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\n\t\t];\n\n\t\tvar indices = [\n\t\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\n\t\t];\n\n\t\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\t\tthis.type = 'OctahedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tOctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\n\tOctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\n\n\t/**\n\t * @author timothypratley / https://github.com/timothypratley\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// IcosahedronGeometry\n\n\tfunction IcosahedronGeometry( radius, detail ) {\n\n\t \tGeometry.call( this );\n\n\t\tthis.type = 'IcosahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tIcosahedronGeometry.prototype = Object.create( Geometry.prototype );\n\tIcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\n\n\t// IcosahedronBufferGeometry\n\n\tfunction IcosahedronBufferGeometry( radius, detail ) {\n\n\t\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\t\tvar vertices = [\n\t\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\n\t\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\n\t\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\n\t\t];\n\n\t\tvar indices = [\n\t\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\n\t\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\n\t\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\n\t\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\n\t\t];\n\n\t\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\t\tthis.type = 'IcosahedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tIcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\n\tIcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\n\n\t/**\n\t * @author Abe Pazos / https://hamoid.com\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// DodecahedronGeometry\n\n\tfunction DodecahedronGeometry( radius, detail ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'DodecahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tDodecahedronGeometry.prototype = Object.create( Geometry.prototype );\n\tDodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\n\n\t// DodecahedronBufferGeometry\n\n\tfunction DodecahedronBufferGeometry( radius, detail ) {\n\n\t\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\t\tvar r = 1 / t;\n\n\t\tvar vertices = [\n\n\t\t\t// (1, 1, 1)\n\t\t\t- 1, - 1, - 1,    - 1, - 1,  1,\n\t\t\t- 1,  1, - 1,    - 1,  1,  1,\n\t\t\t  1, - 1, - 1,     1, - 1,  1,\n\t\t\t  1,  1, - 1,     1,  1,  1,\n\n\t\t\t// (0, 1/, )\n\t\t\t 0, - r, - t,     0, - r,  t,\n\t\t\t 0,  r, - t,     0,  r,  t,\n\n\t\t\t// (1/, , 0)\n\t\t\t- r, - t,  0,    - r,  t,  0,\n\t\t\t r, - t,  0,     r,  t,  0,\n\n\t\t\t// (, 0, 1/)\n\t\t\t- t,  0, - r,     t,  0, - r,\n\t\t\t- t,  0,  r,     t,  0,  r\n\t\t];\n\n\t\tvar indices = [\n\t\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\n\t\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\n\t\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\n\t\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\n\t\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\n\t\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\n\t\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\n\t\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\n\t\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\n\t\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\n\t\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\n\t\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\n\t\t];\n\n\t\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\t\tthis.type = 'DodecahedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tDodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\n\tDodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\n\n\t/**\n\t * @author oosmoxiecode / https://github.com/oosmoxiecode\n\t * @author WestLangley / https://github.com/WestLangley\n\t * @author zz85 / https://github.com/zz85\n\t * @author miningold / https://github.com/miningold\n\t * @author jonobr1 / https://github.com/jonobr1\n\t * @author Mugen87 / https://github.com/Mugen87\n\t *\n\t */\n\n\t// TubeGeometry\n\n\tfunction TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'TubeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\n\n\t\tvar bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = bufferGeometry.tangents;\n\t\tthis.normals = bufferGeometry.normals;\n\t\tthis.binormals = bufferGeometry.binormals;\n\n\t\t// create geometry\n\n\t\tthis.fromBufferGeometry( bufferGeometry );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tTubeGeometry.prototype = Object.create( Geometry.prototype );\n\tTubeGeometry.prototype.constructor = TubeGeometry;\n\n\t// TubeBufferGeometry\n\n\tfunction TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'TubeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\ttubularSegments = tubularSegments || 64;\n\t\tradius = radius || 1;\n\t\tradialSegments = radialSegments || 8;\n\t\tclosed = closed || false;\n\n\t\tvar frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = frames.tangents;\n\t\tthis.normals = frames.normals;\n\t\tthis.binormals = frames.binormals;\n\n\t\t// helper variables\n\n\t\tvar vertex = new Vector3();\n\t\tvar normal = new Vector3();\n\t\tvar uv = new Vector2();\n\n\t\tvar i, j;\n\n\t\t// buffer\n\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\t\tvar indices = [];\n\n\t\t// create buffer data\n\n\t\tgenerateBufferData();\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// functions\n\n\t\tfunction generateBufferData() {\n\n\t\t\tfor ( i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\t\tgenerateSegment( i );\n\n\t\t\t}\n\n\t\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t\t// at the regular position on the given path\n\t\t\t//\n\t\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t\t// uvs are generated in a separate function.\n\t\t\t// this makes it easy compute correct values for closed geometries\n\n\t\t\tgenerateUVs();\n\n\t\t\t// finally create faces\n\n\t\t\tgenerateIndices();\n\n\t\t}\n\n\t\tfunction generateSegment( i ) {\n\n\t\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\t\tvar P = path.getPointAt( i / tubularSegments );\n\n\t\t\t// retrieve corresponding normal and binormal\n\n\t\t\tvar N = frames.normals[ i ];\n\t\t\tvar B = frames.binormals[ i ];\n\n\t\t\t// generate normals and vertices for the current segment\n\n\t\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\tvar sin =   Math.sin( v );\n\t\t\t\tvar cos = - Math.cos( v );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\t\tnormal.normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateIndices() {\n\n\t\t\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tTubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tTubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\n\n\t/**\n\t * @author oosmoxiecode\n\t * @author Mugen87 / https://github.com/Mugen87\n\t *\n\t * based on http://www.blackpawn.com/texts/pqtorus/\n\t */\n\n\t// TorusKnotGeometry\n\n\tfunction TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'TorusKnotGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\n\n\t\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tTorusKnotGeometry.prototype = Object.create( Geometry.prototype );\n\tTorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\n\n\t// TorusKnotBufferGeometry\n\n\tfunction TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'TorusKnotBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\tradius = radius || 100;\n\t\ttube = tube || 40;\n\t\ttubularSegments = Math.floor( tubularSegments ) || 64;\n\t\tradialSegments = Math.floor( radialSegments ) || 8;\n\t\tp = p || 2;\n\t\tq = q || 3;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar i, j;\n\n\t\tvar vertex = new Vector3();\n\t\tvar normal = new Vector3();\n\n\t\tvar P1 = new Vector3();\n\t\tvar P2 = new Vector3();\n\n\t\tvar B = new Vector3();\n\t\tvar T = new Vector3();\n\t\tvar N = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\n\n\t\t\tvar u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t\t// calculate orthonormal basis\n\n\t\t\tT.subVectors( P2, P1 );\n\t\t\tN.addVectors( P2, P1 );\n\t\t\tB.crossVectors( T, N );\n\t\t\tN.crossVectors( B, T );\n\n\t\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\t\tB.normalize();\n\t\t\tN.normalize();\n\n\t\t\tfor ( j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\t\t\t\tvar cx = - tube * Math.cos( v );\n\t\t\t\tvar cy = tube * Math.sin( v );\n\n\t\t\t\t// now calculate the final vertex position.\n\t\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\n\n\t\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// this function calculates the current position on the torus curve\n\n\t\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\t\tvar cu = Math.cos( u );\n\t\t\tvar su = Math.sin( u );\n\t\t\tvar quOverP = q / p * u;\n\t\t\tvar cs = Math.cos( quOverP );\n\n\t\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t\t}\n\n\t}\n\n\tTorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tTorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\n\n\t/**\n\t * @author oosmoxiecode\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// TorusGeometry\n\n\tfunction TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'TorusGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tTorusGeometry.prototype = Object.create( Geometry.prototype );\n\tTorusGeometry.prototype.constructor = TorusGeometry;\n\n\t// TorusBufferGeometry\n\n\tfunction TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'TorusBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tradius = radius || 100;\n\t\ttube = tube || 40;\n\t\tradialSegments = Math.floor( radialSegments ) || 8;\n\t\ttubularSegments = Math.floor( tubularSegments ) || 6;\n\t\tarc = arc || Math.PI * 2;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar center = new Vector3();\n\t\tvar vertex = new Vector3();\n\t\tvar normal = new Vector3();\n\n\t\tvar j, i;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tvar u = i / tubularSegments * arc;\n\t\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( j = 1; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tTorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tTorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t */\n\n\tvar ShapeUtils = {\n\n\t\t// calculate area of the contour polygon\n\n\t\tarea: function ( contour ) {\n\n\t\t\tvar n = contour.length;\n\t\t\tvar a = 0.0;\n\n\t\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t\t}\n\n\t\t\treturn a * 0.5;\n\n\t\t},\n\n\t\ttriangulate: ( function () {\n\n\t\t\t/**\n\t\t\t * This code is a quick port of code written in C++ which was submitted to\n\t\t\t * flipcode.com by John W. Ratcliff  // July 22, 2000\n\t\t\t * See original code and more information here:\n\t\t\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\n\t\t\t *\n\t\t\t * ported to actionscript by Zevan Rosser\n\t\t\t * www.actionsnippet.com\n\t\t\t *\n\t\t\t * ported to javascript by Joshua Koo\n\t\t\t * http://www.lab4games.net/zz85/blog\n\t\t\t *\n\t\t\t */\n\n\t\t\tfunction snip( contour, u, v, w, n, verts ) {\n\n\t\t\t\tvar p;\n\t\t\t\tvar ax, ay, bx, by;\n\t\t\t\tvar cx, cy, px, py;\n\n\t\t\t\tax = contour[ verts[ u ] ].x;\n\t\t\t\tay = contour[ verts[ u ] ].y;\n\n\t\t\t\tbx = contour[ verts[ v ] ].x;\n\t\t\t\tby = contour[ verts[ v ] ].y;\n\n\t\t\t\tcx = contour[ verts[ w ] ].x;\n\t\t\t\tcy = contour[ verts[ w ] ].y;\n\n\t\t\t\tif ( ( bx - ax ) * ( cy - ay ) - ( by - ay ) * ( cx - ax ) <= 0 ) return false;\n\n\t\t\t\tvar aX, aY, bX, bY, cX, cY;\n\t\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\n\t\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\n\n\t\t\t\taX = cx - bx;  aY = cy - by;\n\t\t\t\tbX = ax - cx;  bY = ay - cy;\n\t\t\t\tcX = bx - ax;  cY = by - ay;\n\n\t\t\t\tfor ( p = 0; p < n; p ++ ) {\n\n\t\t\t\t\tpx = contour[ verts[ p ] ].x;\n\t\t\t\t\tpy = contour[ verts[ p ] ].y;\n\n\t\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\n\t\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\n\t\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\n\n\t\t\t\t\tapx = px - ax;  apy = py - ay;\n\t\t\t\t\tbpx = px - bx;  bpy = py - by;\n\t\t\t\t\tcpx = px - cx;  cpy = py - cy;\n\n\t\t\t\t\t// see if p is inside triangle abc\n\n\t\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\n\t\t\t\t\tcCROSSap = cX * apy - cY * apx;\n\t\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\n\n\t\t\t\t\tif ( ( aCROSSbp >= - Number.EPSILON ) && ( bCROSScp >= - Number.EPSILON ) && ( cCROSSap >= - Number.EPSILON ) ) return false;\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\t// takes in an contour array and returns\n\n\t\t\treturn function triangulate( contour, indices ) {\n\n\t\t\t\tvar n = contour.length;\n\n\t\t\t\tif ( n < 3 ) return null;\n\n\t\t\t\tvar result = [],\n\t\t\t\t\tverts = [],\n\t\t\t\t\tvertIndices = [];\n\n\t\t\t\t/* we want a counter-clockwise polygon in verts */\n\n\t\t\t\tvar u, v, w;\n\n\t\t\t\tif ( ShapeUtils.area( contour ) > 0.0 ) {\n\n\t\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\n\n\t\t\t\t}\n\n\t\t\t\tvar nv = n;\n\n\t\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\n\n\t\t\t\tvar count = 2 * nv;   /* error detection */\n\n\t\t\t\tfor ( v = nv - 1; nv > 2; ) {\n\n\t\t\t\t\t/* if we loop, it is probably a non-simple polygon */\n\n\t\t\t\t\tif ( ( count -- ) <= 0 ) {\n\n\t\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\n\n\t\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\n\t\t\t\t\t\t//return null;\n\t\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\n\t\t\t\t\t\tconsole.warn( 'THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()' );\n\n\t\t\t\t\t\tif ( indices ) return vertIndices;\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\n\n\t\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\n\t\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\n\t\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\n\n\t\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\n\n\t\t\t\t\t\tvar a, b, c, s, t;\n\n\t\t\t\t\t\t/* true names of the vertices */\n\n\t\t\t\t\t\ta = verts[ u ];\n\t\t\t\t\t\tb = verts[ v ];\n\t\t\t\t\t\tc = verts[ w ];\n\n\t\t\t\t\t\t/* output Triangle */\n\n\t\t\t\t\t\tresult.push( [ contour[ a ],\n\t\t\t\t\t\t\tcontour[ b ],\n\t\t\t\t\t\t\tcontour[ c ] ] );\n\n\n\t\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\n\n\t\t\t\t\t\t/* remove v from the remaining polygon */\n\n\t\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\n\n\t\t\t\t\t\t\tverts[ s ] = verts[ t ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnv --;\n\n\t\t\t\t\t\t/* reset error detection counter */\n\n\t\t\t\t\t\tcount = 2 * nv;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( indices ) return vertIndices;\n\t\t\t\treturn result;\n\n\t\t\t}\n\n\t\t} )(),\n\n\t\ttriangulateShape: function ( contour, holes ) {\n\n\t\t\tfunction removeDupEndPts(points) {\n\n\t\t\t\tvar l = points.length;\n\n\t\t\t\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\t\t\tpoints.pop();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tremoveDupEndPts( contour );\n\t\t\tholes.forEach( removeDupEndPts );\n\n\t\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\n\n\t\t\t\t// inOtherPt needs to be collinear to the inSegment\n\t\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\n\n\t\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\n\n\t\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\n\n\t\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\n\n\t\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\n\t\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\n\n\t\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\n\t\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\n\n\t\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\n\t\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\n\n\t\t\t\tif ( Math.abs( limit ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\n\t\t\t\t\tvar perpSeg2;\n\t\t\t\t\tif ( limit > 0 ) {\n\n\t\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\n\t\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\n\t\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// i.e. to reduce rounding errors\n\t\t\t\t\t// intersection at endpoint of segment#1?\n\t\t\t\t\tif ( perpSeg2 === 0 ) {\n\n\t\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( perpSeg2 === limit ) {\n\n\t\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\n\t\t\t\t\t\treturn [ inSeg1Pt2 ];\n\n\t\t\t\t\t}\n\t\t\t\t\t// intersection at endpoint of segment#2?\n\t\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\n\t\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\n\n\t\t\t\t\t// return real intersection point\n\t\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\n\t\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\n\t\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\n\t\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\n\n\t\t\t\t\t// they are collinear or degenerate\n\t\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\n\t\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\n\t\t\t\t\t// both segments are points\n\t\t\t\t\tif ( seg1Pt && seg2Pt ) {\n\n\t\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\n\t\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\n\n\t\t\t\t\t}\n\t\t\t\t\t// segment#1  is a single point\n\t\t\t\t\tif ( seg1Pt ) {\n\n\t\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];\n\n\t\t\t\t\t}\n\t\t\t\t\t// segment#2  is a single point\n\t\t\t\t\tif ( seg2Pt ) {\n\n\t\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\n\t\t\t\t\t\treturn [ inSeg2Pt1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// they are collinear segments, which might overlap\n\t\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\n\t\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\n\t\t\t\t\tif ( seg1dx !== 0 ) {\n\n\t\t\t\t\t\t// the segments are NOT on a vertical line\n\t\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\n\n\t\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\n\t\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\n\t\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\n\n\t\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\n\t\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\n\t\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// the segments are on a vertical line\n\t\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\n\n\t\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\n\t\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\n\t\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\n\n\t\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\n\t\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\n\t\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1minVal <= seg2minVal ) {\n\n\t\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\n\t\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\n\n\t\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\t\treturn [ seg2min ];\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\n\t\t\t\t\t\treturn\t[ seg2min, seg2max ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\n\t\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\n\n\t\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\t\treturn [ seg1min ];\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\n\t\t\t\t\t\treturn\t[ seg1min, seg2max ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\n\n\t\t\t\t// The order of legs is important\n\n\t\t\t\t// translation of all points, so that Vertex is at (0,0)\n\t\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\n\t\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\n\t\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\n\n\t\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\n\t\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\n\t\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\n\n\t\t\t\tif ( Math.abs( from2toAngle ) > Number.EPSILON ) {\n\n\t\t\t\t\t// angle != 180 deg.\n\n\t\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\n\t\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\n\n\t\t\t\t\tif ( from2toAngle > 0 ) {\n\n\t\t\t\t\t\t// main angle < 180 deg.\n\t\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// main angle > 180 deg.\n\t\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// angle == 180 deg.\n\t\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\n\t\t\t\t\treturn\t( from2otherAngle > 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tfunction removeHoles( contour, holes ) {\n\n\t\t\t\tvar shape = contour.concat(); // work on this shape\n\t\t\t\tvar hole;\n\n\t\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\n\n\t\t\t\t\t// Check if hole point lies within angle around shape point\n\t\t\t\t\tvar lastShapeIdx = shape.length - 1;\n\n\t\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\n\t\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\n\n\t\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\n\t\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\n\n\t\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\n\t\t\t\t\tif ( ! insideAngle ) {\n\n\t\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\n\t\t\t\t\t\treturn\tfalse;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if shape point lies within angle around hole point\n\t\t\t\t\tvar lastHoleIdx = hole.length - 1;\n\n\t\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\n\t\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\n\n\t\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\n\t\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\n\n\t\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\n\t\t\t\t\tif ( ! insideAngle ) {\n\n\t\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\n\t\t\t\t\t\treturn\tfalse;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn\ttrue;\n\n\t\t\t\t}\n\n\t\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\n\n\t\t\t\t\t// checks for intersections with shape edges\n\t\t\t\t\tvar sIdx, nextIdx, intersection;\n\t\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\n\n\t\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn\tfalse;\n\n\t\t\t\t}\n\n\t\t\t\tvar indepHoles = [];\n\n\t\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\n\n\t\t\t\t\t// checks for intersections with hole edges\n\t\t\t\t\tvar ihIdx, chkHole,\n\t\t\t\t\t\thIdx, nextIdx, intersection;\n\t\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\n\n\t\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\n\t\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\n\n\t\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\n\t\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\n\t\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\treturn\tfalse;\n\n\t\t\t\t}\n\n\t\t\t\tvar holeIndex, shapeIndex,\n\t\t\t\t\tshapePt, holePt,\n\t\t\t\t\tholeIdx, cutKey, failedCuts = [],\n\t\t\t\t\ttmpShape1, tmpShape2,\n\t\t\t\t\ttmpHole1, tmpHole2;\n\n\t\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tindepHoles.push( h );\n\n\t\t\t\t}\n\n\t\t\t\tvar minShapeIndex = 0;\n\t\t\t\tvar counter = indepHoles.length * 2;\n\t\t\t\twhile ( indepHoles.length > 0 ) {\n\n\t\t\t\t\tcounter --;\n\t\t\t\t\tif ( counter < 0 ) {\n\n\t\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// search for shape-vertex and hole-vertex,\n\t\t\t\t\t// which can be connected without intersections\n\t\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\n\n\t\t\t\t\t\tshapePt = shape[ shapeIndex ];\n\t\t\t\t\t\tholeIndex\t= - 1;\n\n\t\t\t\t\t\t// search for hole which can be reached without intersections\n\t\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\n\n\t\t\t\t\t\t\tholeIdx = indepHoles[ h ];\n\n\t\t\t\t\t\t\t// prevent multiple checks\n\t\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\n\t\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\n\n\t\t\t\t\t\t\thole = holes[ holeIdx ];\n\t\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\n\n\t\t\t\t\t\t\t\tholePt = hole[ h2 ];\n\t\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\n\t\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\n\t\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\n\n\t\t\t\t\t\t\t\tholeIndex = h2;\n\t\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\n\n\t\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\n\t\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\n\t\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\n\t\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\n\n\t\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\n\n\t\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\n\n\t\t\t\t\t\t\t\t// Debug only, to show the selected cuts\n\t\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn shape; \t\t\t/* shape with no holes */\n\n\t\t\t}\n\n\n\t\t\tvar i, il, f, face,\n\t\t\t\tkey, index,\n\t\t\t\tallPointsMap = {};\n\n\t\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\n\n\t\t\tvar allpoints = contour.concat();\n\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\n\n\t\t\t}\n\n\t\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\n\n\t\t\t// prepare all points map\n\n\t\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\n\n\t\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\n\n\t\t\t\tif ( allPointsMap[ key ] !== undefined ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.ShapeUtils: Duplicate point\", key, i );\n\n\t\t\t\t}\n\n\t\t\t\tallPointsMap[ key ] = i;\n\n\t\t\t}\n\n\t\t\t// remove holes by cutting paths to holes and adding them to the shape\n\t\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\n\n\t\t\tvar triangles = ShapeUtils.triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\n\t\t\t//console.log( \"triangles\",triangles, triangles.length );\n\n\t\t\t// check all face vertices against all points map\n\n\t\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\n\n\t\t\t\tface = triangles[ i ];\n\n\t\t\t\tfor ( f = 0; f < 3; f ++ ) {\n\n\t\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\n\n\t\t\t\t\tindex = allPointsMap[ key ];\n\n\t\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\t\tface[ f ] = index;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn triangles.concat();\n\n\t\t},\n\n\t\tisClockWise: function ( pts ) {\n\n\t\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t *\n\t * Creates extruded geometry from a path shape.\n\t *\n\t * parameters = {\n\t *\n\t *  curveSegments: <int>, // number of points on the curves\n\t *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n\t *  amount: <int>, // Depth to extrude the shape\n\t *\n\t *  bevelEnabled: <bool>, // turn on bevel\n\t *  bevelThickness: <float>, // how deep into the original shape bevel goes\n\t *  bevelSize: <float>, // how far from shape outline is bevel\n\t *  bevelSegments: <int>, // number of bevel layers\n\t *\n\t *  extrudePath: <THREE.Curve> // curve to extrude shape along\n\t *  frames: <Object> // containing arrays of tangents, normals, binormals\n\t *\n\t *  UVGenerator: <Object> // object that provides UV generator functions\n\t *\n\t * }\n\t */\n\n\t// ExtrudeGeometry\n\n\tfunction ExtrudeGeometry( shapes, options ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tExtrudeGeometry.prototype = Object.create( Geometry.prototype );\n\tExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\n\n\t// ExtrudeBufferGeometry\n\n\tfunction ExtrudeBufferGeometry( shapes, options ) {\n\n\t\tif ( typeof ( shapes ) === \"undefined\" ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'ExtrudeBufferGeometry';\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tthis.addShapeList( shapes, options );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// can't really use automatic vertex normals\n\t\t// as then front and back sides get smoothed too\n\t\t// should do separate smoothing just for sides\n\n\t\t//this.computeVertexNormals();\n\n\t\t//console.log( \"took\", ( Date.now() - startTime ) );\n\n\t}\n\n\tExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\n\n\tExtrudeBufferGeometry.prototype.getArrays = function () {\n\n\t\tvar positionAttribute = this.getAttribute( \"position\" );\n\t\tvar verticesArray = positionAttribute ? Array.prototype.slice.call( positionAttribute.array ) : [];\n\n\t\tvar uvAttribute = this.getAttribute( \"uv\" );\n\t\tvar uvArray = uvAttribute ? Array.prototype.slice.call( uvAttribute.array ) : [];\n\n\t\tvar IndexAttribute = this.index;\n\t\tvar indicesArray = IndexAttribute ? Array.prototype.slice.call( IndexAttribute.array ) : [];\n\n\t\treturn {\n\t\t\tposition: verticesArray,\n\t\t\tuv: uvArray,\n\t\t\tindex: indicesArray\n\t\t};\n\n\t};\n\n\tExtrudeBufferGeometry.prototype.addShapeList = function ( shapes, options ) {\n\n\t\tvar sl = shapes.length;\n\t\toptions.arrays = this.getArrays();\n\n\t\tfor ( var s = 0; s < sl; s ++ ) {\n\n\t\t\tvar shape = shapes[ s ];\n\t\t\tthis.addShape( shape, options );\n\n\t\t}\n\n\t\tthis.setIndex( options.arrays.index );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( options.arrays.position, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( options.arrays.uv, 2 ) );\n\n\t};\n\n\tExtrudeBufferGeometry.prototype.addShape = function ( shape, options ) {\n\n\t\tvar arrays = options.arrays ? options.arrays : this.getArrays();\n\t\tvar verticesArray = arrays.position;\n\t\tvar indicesArray = arrays.index;\n\t\tvar uvArray = arrays.uv;\n\n\t\tvar placeholder = [];\n\n\n\t\tvar amount = options.amount !== undefined ? options.amount : 100;\n\n\t\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\n\t\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\n\t\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\n\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\t\tvar steps = options.steps !== undefined ? options.steps : 1;\n\n\t\tvar extrudePath = options.extrudePath;\n\t\tvar extrudePts, extrudeByPath = false;\n\n\t\t// Use default WorldUVGenerator if no UV generators are specified.\n\t\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : ExtrudeGeometry.WorldUVGenerator;\n\n\t\tvar splineTube, binormal, normal, position2;\n\t\tif ( extrudePath ) {\n\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\textrudeByPath = true;\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t// SETUP TNB variables\n\n\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\tsplineTube = options.frames !== undefined ? options.frames : extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\tbinormal = new Vector3();\n\t\t\tnormal = new Vector3();\n\t\t\tposition2 = new Vector3();\n\n\t\t}\n\n\t\t// Safeguards if bevels are not enabled\n\n\t\tif ( ! bevelEnabled ) {\n\n\t\t\tbevelSegments = 0;\n\t\t\tbevelThickness = 0;\n\t\t\tbevelSize = 0;\n\n\t\t}\n\n\t\t// Variables initialization\n\n\t\tvar ahole, h, hl; // looping of holes\n\t\tvar scope = this;\n\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\t\tvar vertices = shapePoints.shape;\n\t\tvar holes = shapePoints.holes;\n\n\t\tvar reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\tif ( reverse ) {\n\n\t\t\tvertices = vertices.reverse();\n\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t/* Vertices */\n\n\t\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tvertices = vertices.concat( ahole );\n\n\t\t}\n\n\n\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t}\n\n\t\tvar b, bs, t, z,\n\t\t\tvert, vlen = vertices.length,\n\t\t\tface, flen = faces.length;\n\n\n\t\t// Find directions for point movement\n\n\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t//\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\tvar v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\tvar v_prev_x = inPt.x - inPrev.x,\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\tvar v_next_x = inNext.x - inPt.x,\n\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t// check for collinear edges\n\t\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t// not collinear\n\n\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\tvar sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t//  but prevent crazy spikes\n\t\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\tvar direction_eq = false; // assumes: opposite\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t}\n\n\n\t\tvar contourMovements = [];\n\n\t\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t}\n\n\t\tvar holesMovements = [],\n\t\t\toneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\toneHoleMovements = [];\n\n\t\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t}\n\n\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t}\n\n\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 );\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tbs = bevelSize;\n\n\t\t// Back facing vertices\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add stepped vertices...\n\t\t// Including front facing vertices\n\n\t\tvar s;\n\n\t\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, amount / steps * s );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// Add bevel segments planes\n\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 );\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\tv( vert.x, vert.y, amount + z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, amount + z );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/* Faces */\n\n\t\t// Top and bottom faces\n\n\t\tbuildLidFaces();\n\n\t\t// Sides faces\n\n\t\tbuildSideFaces();\n\n\n\t\t/////  Internal functions\n\n\t\tfunction buildLidFaces() {\n\n\t\t\tvar start = verticesArray.length/3;\n\n\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\tvar layer = 0; // steps + 1\n\t\t\t\tvar offset = vlen * layer;\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.addGroup( start, verticesArray.length/3 -start, options.material !== undefined ? options.material : 0);\n\n\t\t}\n\n\t\t// Create faces for the z-sides of the shape\n\n\t\tfunction buildSideFaces() {\n\n\t\t\tvar start = verticesArray.length/3;\n\t\t\tvar layeroffset = 0;\n\t\t\tsidewalls( contour, layeroffset );\n\t\t\tlayeroffset += contour.length;\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t//, true\n\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t}\n\n\n\t\t\tscope.addGroup( start, verticesArray.length/3 -start, options.extrudeMaterial !== undefined ? options.extrudeMaterial : 1);\n\n\n\t\t}\n\n\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\tvar j, k;\n\t\t\ti = contour.length;\n\n\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\tj = i;\n\t\t\t\tk = i - 1;\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\tvar s = 0,\n\t\t\t\t\tsl = steps + bevelSegments * 2;\n\n\t\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction v( x, y, z ) {\n\n\t\t\tplaceholder.push( x );\n\t\t\tplaceholder.push( y );\n\t\t\tplaceholder.push( z );\n\n\t\t}\n\n\n\t\tfunction f3( a, b, c ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\n\t\t}\n\n\t\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( d );\n\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\t\t\taddVertex( d );\n\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t}\n\n\t\tfunction addVertex( index ) {\n\n\t\t\tindicesArray.push( verticesArray.length / 3 );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t}\n\n\n\t\tfunction addUV( vector2 ) {\n\n\t\t\tuvArray.push( vector2.x );\n\t\t\tuvArray.push( vector2.y );\n\n\t\t}\n\n\t\tif ( ! options.arrays ) {\n\n\t\t\tthis.setIndex( indicesArray );\n\t\t\tthis.addAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( options.arrays.uv, 2 ) );\n\n\t\t}\n\n\t};\n\n\tExtrudeGeometry.WorldUVGenerator = {\n\n\t\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\t\tvar a_x = vertices[ indexA * 3 ];\n\t\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\t\tvar b_x = vertices[ indexB * 3 ];\n\t\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\t\tvar c_x = vertices[ indexC * 3 ];\n\t\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, a_y ),\n\t\t\t\tnew Vector2( b_x, b_y ),\n\t\t\t\tnew Vector2( c_x, c_y )\n\t\t\t];\n\n\t\t},\n\n\t\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\t\tvar a_x = vertices[ indexA * 3 ];\n\t\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\t\tvar a_z = vertices[ indexA * 3 + 2 ];\n\t\t\tvar b_x = vertices[ indexB * 3 ];\n\t\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\t\tvar b_z = vertices[ indexB * 3 + 2 ];\n\t\t\tvar c_x = vertices[ indexC * 3 ];\n\t\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\t\t\tvar c_z = vertices[ indexC * 3 + 2 ];\n\t\t\tvar d_x = vertices[ indexD * 3 ];\n\t\t\tvar d_y = vertices[ indexD * 3 + 1 ];\n\t\t\tvar d_z = vertices[ indexD * 3 + 2 ];\n\n\t\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\t\treturn [\n\t\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t\t];\n\n\t\t\t} else {\n\n\t\t\t\treturn [\n\t\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t\t];\n\n\t\t\t}\n\n\t\t}\n\t};\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * Text = 3D Text\n\t *\n\t * parameters = {\n\t *  font: <THREE.Font>, // font\n\t *\n\t *  size: <float>, // size of the text\n\t *  height: <float>, // thickness to extrude text\n\t *  curveSegments: <int>, // number of points on the curves\n\t *\n\t *  bevelEnabled: <bool>, // turn on bevel\n\t *  bevelThickness: <float>, // how deep into text bevel goes\n\t *  bevelSize: <float> // how far from text outline is bevel\n\t * }\n\t */\n\n\t// TextGeometry\n\n\tfunction TextGeometry(  text, parameters ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'TextGeometry';\n\n\t\tthis.parameters = {\n\t\t\ttext: text,\n\t\t\tparameters: parameters\n\t\t};\n\n\t\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tTextGeometry.prototype = Object.create( Geometry.prototype );\n\tTextGeometry.prototype.constructor = TextGeometry;\n\n\t// TextBufferGeometry\n\n\tfunction TextBufferGeometry( text, parameters ) {\n\n\t\tparameters = parameters || {};\n\n\t\tvar font = parameters.font;\n\n\t\tif ( ! ( font && font.isFont ) ) {\n\n\t\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\t\treturn new Geometry();\n\n\t\t}\n\n\t\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\n\n\t\t// translate parameters to ExtrudeGeometry API\n\n\t\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\n\n\t\t// defaults\n\n\t\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\t\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\t\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\t\tExtrudeBufferGeometry.call( this, shapes, parameters );\n\n\t\tthis.type = 'TextBufferGeometry';\n\n\t}\n\n\tTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\n\tTextBufferGeometry.prototype.constructor = TextBufferGeometry;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author benaadams / https://twitter.com/ben_a_adams\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// SphereGeometry\n\n\tfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'SphereGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tSphereGeometry.prototype = Object.create( Geometry.prototype );\n\tSphereGeometry.prototype.constructor = SphereGeometry;\n\n\t// SphereBufferGeometry\n\n\tfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'SphereBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tradius = radius || 50;\n\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\t\tphiStart = phiStart !== undefined ? phiStart : 0;\n\t\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\t\tvar thetaEnd = thetaStart + thetaLength;\n\n\t\tvar ix, iy;\n\n\t\tvar index = 0;\n\t\tvar grid = [];\n\n\t\tvar vertex = new Vector3();\n\t\tvar normal = new Vector3();\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\t\tvar verticesRow = [];\n\n\t\t\tvar v = iy / heightSegments;\n\n\t\t\tfor ( ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\t\tvar u = ix / widthSegments;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.set( vertex.x, vertex.y, vertex.z ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\tverticesRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\tgrid.push( verticesRow );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\t\tvar a = grid[ iy ][ ix + 1 ];\n\t\t\t\tvar b = grid[ iy ][ ix ];\n\t\t\t\tvar c = grid[ iy + 1 ][ ix ];\n\t\t\t\tvar d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\n\t/**\n\t * @author Kaleb Murphy\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// RingGeometry\n\n\tfunction RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'RingGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tRingGeometry.prototype = Object.create( Geometry.prototype );\n\tRingGeometry.prototype.constructor = RingGeometry;\n\n\t// RingBufferGeometry\n\n\tfunction RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'RingBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tinnerRadius = innerRadius || 20;\n\t\touterRadius = outerRadius || 50;\n\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\t\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// some helper variables\n\n\t\tvar segment;\n\t\tvar radius = innerRadius;\n\t\tvar radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\t\tvar vertex = new Vector3();\n\t\tvar uv = new Vector2();\n\t\tvar j, i;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( j = 0; j <= phiSegments; j ++ ) {\n\n\t\t\tfor ( i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\t\tsegment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t\t// increase the radius for next row of vertices\n\n\t\t\tradius += radiusStep;\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( j = 0; j < phiSegments; j ++ ) {\n\n\t\t\tvar thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\t\tfor ( i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\t\tsegment = i + thetaSegmentLevel;\n\n\t\t\t\tvar a = segment;\n\t\t\t\tvar b = segment + thetaSegments + 1;\n\t\t\t\tvar c = segment + thetaSegments + 2;\n\t\t\t\tvar d = segment + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tRingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tRingBufferGeometry.prototype.constructor = RingBufferGeometry;\n\n\t/**\n\t * @author astrodud / http://astrodud.isgreat.org/\n\t * @author zz85 / https://github.com/zz85\n\t * @author bhouston / http://clara.io\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// LatheGeometry\n\n\tfunction LatheGeometry( points, segments, phiStart, phiLength ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'LatheGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tLatheGeometry.prototype = Object.create( Geometry.prototype );\n\tLatheGeometry.prototype.constructor = LatheGeometry;\n\n\t// LatheBufferGeometry\n\n\tfunction LatheBufferGeometry( points, segments, phiStart, phiLength ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'LatheBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tsegments = Math.floor( segments ) || 12;\n\t\tphiStart = phiStart || 0;\n\t\tphiLength = phiLength || Math.PI * 2;\n\n\t\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\t\tphiLength = _Math.clamp( phiLength, 0, Math.PI * 2 );\n\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar base;\n\t\tvar inverseSegments = 1.0 / segments;\n\t\tvar vertex = new Vector3();\n\t\tvar uv = new Vector2();\n\t\tvar i, j;\n\n\t\t// generate vertices and uvs\n\n\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\tvar phi = phiStart + i * inverseSegments * phiLength;\n\n\t\t\tvar sin = Math.sin( phi );\n\t\t\tvar cos = Math.cos( phi );\n\n\t\t\tfor ( j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\t\tvertex.y = points[ j ].y;\n\t\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = i / segments;\n\t\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\t\tfor ( j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\t\tbase = j + i * points.length;\n\n\t\t\t\tvar a = base;\n\t\t\t\tvar b = base + points.length;\n\t\t\t\tvar c = base + points.length + 1;\n\t\t\t\tvar d = base + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// generate normals\n\n\t\tthis.computeVertexNormals();\n\n\t\t// if the geometry is closed, we need to average the normals along the seam.\n\t\t// because the corresponding vertices are identical (but still have different UVs).\n\n\t\tif ( phiLength === Math.PI * 2 ) {\n\n\t\t\tvar normals = this.attributes.normal.array;\n\t\t\tvar n1 = new Vector3();\n\t\t\tvar n2 = new Vector3();\n\t\t\tvar n = new Vector3();\n\n\t\t\t// this is the buffer offset for the last line of vertices\n\n\t\t\tbase = segments * points.length * 3;\n\n\t\t\tfor ( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\n\n\t\t\t\t// select the normal of the vertex in the first line\n\n\t\t\t\tn1.x = normals[ j + 0 ];\n\t\t\t\tn1.y = normals[ j + 1 ];\n\t\t\t\tn1.z = normals[ j + 2 ];\n\n\t\t\t\t// select the normal of the vertex in the last line\n\n\t\t\t\tn2.x = normals[ base + j + 0 ];\n\t\t\t\tn2.y = normals[ base + j + 1 ];\n\t\t\t\tn2.z = normals[ base + j + 2 ];\n\n\t\t\t\t// average normals\n\n\t\t\t\tn.addVectors( n1, n2 ).normalize();\n\n\t\t\t\t// assign the new values to both normals\n\n\t\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\n\t\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\n\t\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tLatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tLatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\n\n\t/**\n\t * @author jonobr1 / http://jonobr1.com\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// ShapeGeometry\n\n\tfunction ShapeGeometry( shapes, curveSegments ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tif ( typeof curveSegments === 'object' ) {\n\n\t\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\n\n\t\t\tcurveSegments = curveSegments.curveSegments;\n\n\t\t}\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tShapeGeometry.prototype = Object.create( Geometry.prototype );\n\tShapeGeometry.prototype.constructor = ShapeGeometry;\n\n\t// ShapeBufferGeometry\n\n\tfunction ShapeBufferGeometry( shapes, curveSegments ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'ShapeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\tcurveSegments = curveSegments || 12;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar groupStart = 0;\n\t\tvar groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tvar i, l, shapeHole;\n\n\t\t\tvar indexOffset = vertices.length / 3;\n\t\t\tvar points = shape.extractPoints( curveSegments );\n\n\t\t\tvar shapeVertices = points.shape;\n\t\t\tvar shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t\t// also check if holes are in the opposite direction\n\n\t\t\t\tfor ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\t\tshapeHole = shapeHoles[ i ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tshapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tvar vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// incides\n\n\t\t\tfor ( i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\tvar a = face[ 0 ] + indexOffset;\n\t\t\t\tvar b = face[ 1 ] + indexOffset;\n\t\t\t\tvar c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\n\n\t/**\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\tfunction EdgesGeometry( geometry, thresholdAngle ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'EdgesGeometry';\n\n\t\tthis.parameters = {\n\t\t\tthresholdAngle: thresholdAngle\n\t\t};\n\n\t\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\n\n\t\t// buffer\n\n\t\tvar vertices = [];\n\n\t\t// helper variables\n\n\t\tvar thresholdDot = Math.cos( _Math.DEG2RAD * thresholdAngle );\n\t\tvar edge = [ 0, 0 ], edges = {}, edge1, edge2;\n\t\tvar key, keys = [ 'a', 'b', 'c' ];\n\n\t\t// prepare source geometry\n\n\t\tvar geometry2;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tgeometry2 = new Geometry();\n\t\t\tgeometry2.fromBufferGeometry( geometry );\n\n\t\t} else {\n\n\t\t\tgeometry2 = geometry.clone();\n\n\t\t}\n\n\t\tgeometry2.mergeVertices();\n\t\tgeometry2.computeFaceNormals();\n\n\t\tvar sourceVertices = geometry2.vertices;\n\t\tvar faces = geometry2.faces;\n\n\t\t// now create a data structure where each entry represents an edge with its adjoining faces\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge1 = face[ keys[ j ] ];\n\t\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 );\n\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\n\n\t\t\t\t} else {\n\n\t\t\t\t\tedges[ key ].face2 = i;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices\n\n\t\tfor ( key in edges ) {\n\n\t\t\tvar e = edges[ key ];\n\n\t\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\n\n\t\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\n\n\t\t\t\tvar vertex = sourceVertices[ e.index1 ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex = sourceVertices[ e.index2 ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t}\n\n\tEdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tEdgesGeometry.prototype.constructor = EdgesGeometry;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\t// CylinderGeometry\n\n\tfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'CylinderGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tCylinderGeometry.prototype = Object.create( Geometry.prototype );\n\tCylinderGeometry.prototype.constructor = CylinderGeometry;\n\n\t// CylinderBufferGeometry\n\n\tfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'CylinderBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tvar scope = this;\n\n\t\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\n\t\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\n\t\theight = height !== undefined ? height : 100;\n\n\t\tradialSegments = Math.floor( radialSegments ) || 8;\n\t\theightSegments = Math.floor( heightSegments ) || 1;\n\n\t\topenEnded = openEnded !== undefined ? openEnded : false;\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : 2.0 * Math.PI;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar index = 0;\n\t\tvar indexArray = [];\n\t\tvar halfHeight = height / 2;\n\t\tvar groupStart = 0;\n\n\t\t// generate geometry\n\n\t\tgenerateTorso();\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction generateTorso() {\n\n\t\t\tvar x, y;\n\t\t\tvar normal = new Vector3();\n\t\t\tvar vertex = new Vector3();\n\n\t\t\tvar groupCount = 0;\n\n\t\t\t// this will be used to calculate the normal\n\t\t\tvar slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\t\tvar indexRow = [];\n\n\t\t\t\tvar v = y / heightSegments;\n\n\t\t\t\t// calculate the radius of the current row\n\n\t\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\t\tvar u = x / radialSegments;\n\n\t\t\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\t\t\tvar sinTheta = Math.sin( theta );\n\t\t\t\t\tvar cosTheta = Math.cos( theta );\n\n\t\t\t\t\t// vertex\n\n\t\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t// normal\n\n\t\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\t// uv\n\n\t\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t\t}\n\n\t\t\t\t// now save vertices of the row in our index array\n\n\t\t\t\tindexArray.push( indexRow );\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\t\tvar a = indexArray[ y ][ x ];\n\t\t\t\t\tvar b = indexArray[ y + 1 ][ x ];\n\t\t\t\t\tvar c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\t\tvar d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// update group counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t\tfunction generateCap( top ) {\n\n\t\t\tvar x, centerIndexStart, centerIndexEnd;\n\n\t\t\tvar uv = new Vector2();\n\t\t\tvar vertex = new Vector3();\n\n\t\t\tvar groupCount = 0;\n\n\t\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\t\tvar sign = ( top === true ) ? 1 : - 1;\n\n\t\t\t// save the index of the first center vertex\n\t\t\tcenterIndexStart = index;\n\n\t\t\t// first we generate the center vertex data of the cap.\n\t\t\t// because the geometry needs one set of uvs per face,\n\t\t\t// we must generate a center vertex per face/segment\n\n\t\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// save the index of the last center vertex\n\n\t\t\tcenterIndexEnd = index;\n\n\t\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tvar u = x / radialSegments;\n\t\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\t\tvar cosTheta = Math.cos( theta );\n\t\t\t\tvar sinTheta = Math.sin( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = halfHeight * sign;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tvar c = centerIndexStart + x;\n\t\t\t\tvar i = centerIndexEnd + x;\n\n\t\t\t\tif ( top === true ) {\n\n\t\t\t\t\t// face top\n\n\t\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// face bottom\n\n\t\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t\t}\n\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t}\n\n\tCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\n\n\t/**\n\t * @author abelnation / http://github.com/abelnation\n\t */\n\n\t// ConeGeometry\n\n\tfunction ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tCylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t\tthis.type = 'ConeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n\tConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\n\tConeGeometry.prototype.constructor = ConeGeometry;\n\n\t// ConeBufferGeometry\n\n\tfunction ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tCylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t\tthis.type = 'ConeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n\tConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\n\tConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\n\n\t/**\n\t * @author benaadams / https://twitter.com/ben_a_adams\n\t * @author Mugen87 / https://github.com/Mugen87\n\t * @author hughes\n\t */\n\n\t// CircleGeometry\n\n\tfunction CircleGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\t\tGeometry.call( this );\n\n\t\tthis.type = 'CircleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\tCircleGeometry.prototype = Object.create( Geometry.prototype );\n\tCircleGeometry.prototype.constructor = CircleGeometry;\n\n\t// CircleBufferGeometry\n\n\tfunction CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'CircleBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tradius = radius || 50;\n\t\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar i, s;\n\t\tvar vertex = new Vector3();\n\t\tvar uv = new Vector2();\n\n\t\t// center point\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tnormals.push( 0, 0, 1 );\n\t\tuvs.push( 0.5, 0.5 );\n\n\t\tfor ( s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\t\tvar segment = thetaStart + s / segments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uvs\n\n\t\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\tindices.push( i, i + 1, 0 );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tCircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\n\tCircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\n\n\n\n\tvar Geometries = Object.freeze({\n\t\tWireframeGeometry: WireframeGeometry,\n\t\tParametricGeometry: ParametricGeometry,\n\t\tParametricBufferGeometry: ParametricBufferGeometry,\n\t\tTetrahedronGeometry: TetrahedronGeometry,\n\t\tTetrahedronBufferGeometry: TetrahedronBufferGeometry,\n\t\tOctahedronGeometry: OctahedronGeometry,\n\t\tOctahedronBufferGeometry: OctahedronBufferGeometry,\n\t\tIcosahedronGeometry: IcosahedronGeometry,\n\t\tIcosahedronBufferGeometry: IcosahedronBufferGeometry,\n\t\tDodecahedronGeometry: DodecahedronGeometry,\n\t\tDodecahedronBufferGeometry: DodecahedronBufferGeometry,\n\t\tPolyhedronGeometry: PolyhedronGeometry,\n\t\tPolyhedronBufferGeometry: PolyhedronBufferGeometry,\n\t\tTubeGeometry: TubeGeometry,\n\t\tTubeBufferGeometry: TubeBufferGeometry,\n\t\tTorusKnotGeometry: TorusKnotGeometry,\n\t\tTorusKnotBufferGeometry: TorusKnotBufferGeometry,\n\t\tTorusGeometry: TorusGeometry,\n\t\tTorusBufferGeometry: TorusBufferGeometry,\n\t\tTextGeometry: TextGeometry,\n\t\tTextBufferGeometry: TextBufferGeometry,\n\t\tSphereGeometry: SphereGeometry,\n\t\tSphereBufferGeometry: SphereBufferGeometry,\n\t\tRingGeometry: RingGeometry,\n\t\tRingBufferGeometry: RingBufferGeometry,\n\t\tPlaneGeometry: PlaneGeometry,\n\t\tPlaneBufferGeometry: PlaneBufferGeometry,\n\t\tLatheGeometry: LatheGeometry,\n\t\tLatheBufferGeometry: LatheBufferGeometry,\n\t\tShapeGeometry: ShapeGeometry,\n\t\tShapeBufferGeometry: ShapeBufferGeometry,\n\t\tExtrudeGeometry: ExtrudeGeometry,\n\t\tExtrudeBufferGeometry: ExtrudeBufferGeometry,\n\t\tEdgesGeometry: EdgesGeometry,\n\t\tConeGeometry: ConeGeometry,\n\t\tConeBufferGeometry: ConeBufferGeometry,\n\t\tCylinderGeometry: CylinderGeometry,\n\t\tCylinderBufferGeometry: CylinderBufferGeometry,\n\t\tCircleGeometry: CircleGeometry,\n\t\tCircleBufferGeometry: CircleBufferGeometry,\n\t\tBoxGeometry: BoxGeometry,\n\t\tBoxBufferGeometry: BoxBufferGeometry\n\t});\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t *\n\t * parameters = {\n\t *  opacity: <float>\n\t * }\n\t */\n\n\tfunction ShadowMaterial( parameters ) {\n\n\t\tShaderMaterial.call( this, {\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib.lights,\n\t\t\t\t{\n\t\t\t\t\topacity: { value: 1.0 }\n\t\t\t\t}\n\t\t\t] ),\n\t\t\tvertexShader: ShaderChunk[ 'shadow_vert' ],\n\t\t\tfragmentShader: ShaderChunk[ 'shadow_frag' ]\n\t\t} );\n\n\t\tthis.lights = true;\n\t\tthis.transparent = true;\n\n\t\tObject.defineProperties( this, {\n\t\t\topacity: {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn this.uniforms.opacity.value;\n\t\t\t\t},\n\t\t\t\tset: function ( value ) {\n\t\t\t\t\tthis.uniforms.opacity.value = value;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tShadowMaterial.prototype = Object.create( ShaderMaterial.prototype );\n\tShadowMaterial.prototype.constructor = ShadowMaterial;\n\n\tShadowMaterial.prototype.isShadowMaterial = true;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction RawShaderMaterial( parameters ) {\n\n\t\tShaderMaterial.call( this, parameters );\n\n\t\tthis.type = 'RawShaderMaterial';\n\n\t}\n\n\tRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\n\tRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\n\tRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n\t/**\n\t * @author WestLangley / http://github.com/WestLangley\n\t *\n\t * parameters = {\n\t *  color: <hex>,\n\t *  roughness: <float>,\n\t *  metalness: <float>,\n\t *  opacity: <float>,\n\t *\n\t *  map: new THREE.Texture( <Image> ),\n\t *\n\t *  lightMap: new THREE.Texture( <Image> ),\n\t *  lightMapIntensity: <float>\n\t *\n\t *  aoMap: new THREE.Texture( <Image> ),\n\t *  aoMapIntensity: <float>\n\t *\n\t *  emissive: <hex>,\n\t *  emissiveIntensity: <float>\n\t *  emissiveMap: new THREE.Texture( <Image> ),\n\t *\n\t *  bumpMap: new THREE.Texture( <Image> ),\n\t *  bumpScale: <float>,\n\t *\n\t *  normalMap: new THREE.Texture( <Image> ),\n\t *  normalScale: <Vector2>,\n\t *\n\t *  displacementMap: new THREE.Texture( <Image> ),\n\t *  displacementScale: <float>,\n\t *  displacementBias: <float>,\n\t *\n\t *  roughnessMap: new THREE.Texture( <Image> ),\n\t *\n\t *  metalnessMap: new THREE.Texture( <Image> ),\n\t *\n\t *  alphaMap: new THREE.Texture( <Image> ),\n\t *\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n\t *  envMapIntensity: <float>\n\t *\n\t *  refractionRatio: <float>,\n\t *\n\t *  wireframe: <boolean>,\n\t *  wireframeLinewidth: <float>,\n\t *\n\t *  skinning: <bool>,\n\t *  morphTargets: <bool>,\n\t *  morphNormals: <bool>\n\t * }\n\t */\n\n\tfunction MeshStandardMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.type = 'MeshStandardMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.roughness = 0.5;\n\t\tthis.metalness = 0.5;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.roughnessMap = null;\n\n\t\tthis.metalnessMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.envMapIntensity = 1.0;\n\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\t\tthis.morphNormals = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tMeshStandardMaterial.prototype = Object.create( Material.prototype );\n\tMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\n\tMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\n\tMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.color.copy( source.color );\n\t\tthis.roughness = source.roughness;\n\t\tthis.metalness = source.metalness;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.roughnessMap = source.roughnessMap;\n\n\t\tthis.metalnessMap = source.metalnessMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.envMapIntensity = source.envMapIntensity;\n\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\t\tthis.morphNormals = source.morphNormals;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author WestLangley / http://github.com/WestLangley\n\t *\n\t * parameters = {\n\t *  reflectivity: <float>\n\t * }\n\t */\n\n\tfunction MeshPhysicalMaterial( parameters ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.defines = { 'PHYSICAL': '' };\n\n\t\tthis.type = 'MeshPhysicalMaterial';\n\n\t\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\t\tthis.clearCoat = 0.0;\n\t\tthis.clearCoatRoughness = 0.0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\n\tMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\n\tMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\t\tthis.defines = { 'PHYSICAL': '' };\n\n\t\tthis.reflectivity = source.reflectivity;\n\n\t\tthis.clearCoat = source.clearCoat;\n\t\tthis.clearCoatRoughness = source.clearCoatRoughness;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * parameters = {\n\t *  color: <hex>,\n\t *  specular: <hex>,\n\t *  shininess: <float>,\n\t *  opacity: <float>,\n\t *\n\t *  map: new THREE.Texture( <Image> ),\n\t *\n\t *  lightMap: new THREE.Texture( <Image> ),\n\t *  lightMapIntensity: <float>\n\t *\n\t *  aoMap: new THREE.Texture( <Image> ),\n\t *  aoMapIntensity: <float>\n\t *\n\t *  emissive: <hex>,\n\t *  emissiveIntensity: <float>\n\t *  emissiveMap: new THREE.Texture( <Image> ),\n\t *\n\t *  bumpMap: new THREE.Texture( <Image> ),\n\t *  bumpScale: <float>,\n\t *\n\t *  normalMap: new THREE.Texture( <Image> ),\n\t *  normalScale: <Vector2>,\n\t *\n\t *  displacementMap: new THREE.Texture( <Image> ),\n\t *  displacementScale: <float>,\n\t *  displacementBias: <float>,\n\t *\n\t *  specularMap: new THREE.Texture( <Image> ),\n\t *\n\t *  alphaMap: new THREE.Texture( <Image> ),\n\t *\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n\t *  combine: THREE.Multiply,\n\t *  reflectivity: <float>,\n\t *  refractionRatio: <float>,\n\t *\n\t *  wireframe: <boolean>,\n\t *  wireframeLinewidth: <float>,\n\t *\n\t *  skinning: <bool>,\n\t *  morphTargets: <bool>,\n\t *  morphNormals: <bool>\n\t * }\n\t */\n\n\tfunction MeshPhongMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'MeshPhongMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.specular = new Color( 0x111111 );\n\t\tthis.shininess = 30;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\t\tthis.morphNormals = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tMeshPhongMaterial.prototype = Object.create( Material.prototype );\n\tMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\n\tMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\n\tMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.specular.copy( source.specular );\n\t\tthis.shininess = source.shininess;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\t\tthis.morphNormals = source.morphNormals;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author takahirox / http://github.com/takahirox\n\t *\n\t * parameters = {\n\t *  gradientMap: new THREE.Texture( <Image> )\n\t * }\n\t */\n\n\tfunction MeshToonMaterial( parameters ) {\n\n\t\tMeshPhongMaterial.call( this );\n\n\t\tthis.defines = { 'TOON': '' };\n\n\t\tthis.type = 'MeshToonMaterial';\n\n\t\tthis.gradientMap = null;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tMeshToonMaterial.prototype = Object.create( MeshPhongMaterial.prototype );\n\tMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\n\tMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\n\tMeshToonMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshPhongMaterial.prototype.copy.call( this, source );\n\n\t\tthis.gradientMap = source.gradientMap;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t *\n\t * parameters = {\n\t *  opacity: <float>,\n\t *\n\t *  bumpMap: new THREE.Texture( <Image> ),\n\t *  bumpScale: <float>,\n\t *\n\t *  normalMap: new THREE.Texture( <Image> ),\n\t *  normalScale: <Vector2>,\n\t *\n\t *  displacementMap: new THREE.Texture( <Image> ),\n\t *  displacementScale: <float>,\n\t *  displacementBias: <float>,\n\t *\n\t *  wireframe: <boolean>,\n\t *  wireframeLinewidth: <float>\n\t *\n\t *  skinning: <bool>,\n\t *  morphTargets: <bool>,\n\t *  morphNormals: <bool>\n\t * }\n\t */\n\n\tfunction MeshNormalMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'MeshNormalMaterial';\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false;\n\t\tthis.lights = false;\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\t\tthis.morphNormals = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tMeshNormalMaterial.prototype = Object.create( Material.prototype );\n\tMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\n\tMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\n\tMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\t\tthis.morphNormals = source.morphNormals;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * parameters = {\n\t *  color: <hex>,\n\t *  opacity: <float>,\n\t *\n\t *  map: new THREE.Texture( <Image> ),\n\t *\n\t *  lightMap: new THREE.Texture( <Image> ),\n\t *  lightMapIntensity: <float>\n\t *\n\t *  aoMap: new THREE.Texture( <Image> ),\n\t *  aoMapIntensity: <float>\n\t *\n\t *  emissive: <hex>,\n\t *  emissiveIntensity: <float>\n\t *  emissiveMap: new THREE.Texture( <Image> ),\n\t *\n\t *  specularMap: new THREE.Texture( <Image> ),\n\t *\n\t *  alphaMap: new THREE.Texture( <Image> ),\n\t *\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n\t *  combine: THREE.Multiply,\n\t *  reflectivity: <float>,\n\t *  refractionRatio: <float>,\n\t *\n\t *  wireframe: <boolean>,\n\t *  wireframeLinewidth: <float>,\n\t *\n\t *  skinning: <bool>,\n\t *  morphTargets: <bool>,\n\t *  morphNormals: <bool>\n\t * }\n\t */\n\n\tfunction MeshLambertMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'MeshLambertMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\t\tthis.morphNormals = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tMeshLambertMaterial.prototype = Object.create( Material.prototype );\n\tMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\n\tMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\n\tMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\t\tthis.morphNormals = source.morphNormals;\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t *\n\t * parameters = {\n\t *  color: <hex>,\n\t *  opacity: <float>,\n\t *\n\t *  linewidth: <float>,\n\t *\n\t *  scale: <float>,\n\t *  dashSize: <float>,\n\t *  gapSize: <float>\n\t * }\n\t */\n\n\tfunction LineDashedMaterial( parameters ) {\n\n\t\tMaterial.call( this );\n\n\t\tthis.type = 'LineDashedMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.linewidth = 1;\n\n\t\tthis.scale = 1;\n\t\tthis.dashSize = 3;\n\t\tthis.gapSize = 1;\n\n\t\tthis.lights = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tLineDashedMaterial.prototype = Object.create( Material.prototype );\n\tLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\n\tLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\n\tLineDashedMaterial.prototype.copy = function ( source ) {\n\n\t\tMaterial.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.linewidth = source.linewidth;\n\n\t\tthis.scale = source.scale;\n\t\tthis.dashSize = source.dashSize;\n\t\tthis.gapSize = source.gapSize;\n\n\t\treturn this;\n\n\t};\n\n\n\n\tvar Materials = Object.freeze({\n\t\tShadowMaterial: ShadowMaterial,\n\t\tSpriteMaterial: SpriteMaterial,\n\t\tRawShaderMaterial: RawShaderMaterial,\n\t\tShaderMaterial: ShaderMaterial,\n\t\tPointsMaterial: PointsMaterial,\n\t\tMeshPhysicalMaterial: MeshPhysicalMaterial,\n\t\tMeshStandardMaterial: MeshStandardMaterial,\n\t\tMeshPhongMaterial: MeshPhongMaterial,\n\t\tMeshToonMaterial: MeshToonMaterial,\n\t\tMeshNormalMaterial: MeshNormalMaterial,\n\t\tMeshLambertMaterial: MeshLambertMaterial,\n\t\tMeshDepthMaterial: MeshDepthMaterial,\n\t\tMeshBasicMaterial: MeshBasicMaterial,\n\t\tLineDashedMaterial: LineDashedMaterial,\n\t\tLineBasicMaterial: LineBasicMaterial,\n\t\tMaterial: Material\n\t});\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tvar Cache = {\n\n\t\tenabled: false,\n\n\t\tfiles: {},\n\n\t\tadd: function ( key, file ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\t\tthis.files[ key ] = file;\n\n\t\t},\n\n\t\tget: function ( key ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\t\treturn this.files[ key ];\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete this.files[ key ];\n\n\t\t},\n\n\t\tclear: function () {\n\n\t\t\tthis.files = {};\n\n\t\t}\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\n\n\t\tthis.onStart = undefined;\n\t\tthis.onLoad = onLoad;\n\t\tthis.onProgress = onProgress;\n\t\tthis.onError = onError;\n\n\t\tthis.itemStart = function ( url ) {\n\n\t\t\titemsTotal ++;\n\n\t\t\tif ( isLoading === false ) {\n\n\t\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tisLoading = true;\n\n\t\t};\n\n\t\tthis.itemEnd = function ( url ) {\n\n\t\t\titemsLoaded ++;\n\n\t\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\t\tisLoading = false;\n\n\t\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\t\tscope.onLoad();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.itemError = function ( url ) {\n\n\t\t\tif ( scope.onError !== undefined ) {\n\n\t\t\t\tscope.onError( url );\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tvar DefaultLoadingManager = new LoadingManager();\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction FileLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t}\n\n\tObject.assign( FileLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tif ( url === undefined ) url = '';\n\n\t\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\t\tvar scope = this;\n\n\t\t\tvar cached = Cache.get( url );\n\n\t\t\tif ( cached !== undefined ) {\n\n\t\t\t\tscope.manager.itemStart( url );\n\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t\treturn cached;\n\n\t\t\t}\n\n\t\t\t// Check for data: URI\n\t\t\tvar dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\t\tvar dataUriRegexResult = url.match( dataUriRegex );\n\n\t\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\t\tif ( dataUriRegexResult ) {\n\n\t\t\t\tvar mimeType = dataUriRegexResult[ 1 ];\n\t\t\t\tvar isBase64 = !! dataUriRegexResult[ 2 ];\n\t\t\t\tvar data = dataUriRegexResult[ 3 ];\n\n\t\t\t\tdata = window.decodeURIComponent( data );\n\n\t\t\t\tif ( isBase64 ) data = window.atob( data );\n\n\t\t\t\ttry {\n\n\t\t\t\t\tvar response;\n\t\t\t\t\tvar responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\t \tresponse = new ArrayBuffer( data.length );\n\n\t\t\t\t\t\t\tvar view = new Uint8Array( response );\n\n\t\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\t\tresponse = new Blob( [ response ], { type: mimeType } );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Wait for next browser tick\n\t\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, 0 );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t// Wait for next browser tick\n\t\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t\t}, 0 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar request = new XMLHttpRequest();\n\t\t\t\trequest.open( 'GET', url, true );\n\n\t\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\t\tvar response = event.target.response;\n\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tif ( this.status === 200 ) {\n\n\t\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t} else if ( this.status === 0 ) {\n\n\t\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( onError ) onError( event );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t\t}\n\n\t\t\t\t}, false );\n\n\t\t\t\tif ( onProgress !== undefined ) {\n\n\t\t\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\t\t\tonProgress( event );\n\n\t\t\t\t\t}, false );\n\n\t\t\t\t}\n\n\t\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\t\tif ( onError ) onError( event );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}, false );\n\n\t\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\t\tfor ( var header in this.requestHeader ) {\n\n\t\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t\t}\n\n\t\t\t\trequest.send( null );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn request;\n\n\t\t},\n\n\t\tsetPath: function ( value ) {\n\n\t\t\tthis.path = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetResponseType: function ( value ) {\n\n\t\t\tthis.responseType = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetWithCredentials: function ( value ) {\n\n\t\t\tthis.withCredentials = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetMimeType: function ( value ) {\n\n\t\t\tthis.mimeType = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetRequestHeader: function ( value ) {\n\n\t\t\tthis.requestHeader = value;\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t *\n\t * Abstract Base class to block based textures loader (dds, pvr, ...)\n\t */\n\n\tfunction CompressedTextureLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t\t// override in sub classes\n\t\tthis._parser = null;\n\n\t}\n\n\tObject.assign( CompressedTextureLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar images = [];\n\n\t\t\tvar texture = new CompressedTexture();\n\t\t\ttexture.image = images;\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\t\tfunction loadTexture( i ) {\n\n\t\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\t\timages[ i ] = {\n\t\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t\t};\n\n\t\t\t\t\tloaded += 1;\n\n\t\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\n\t\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t\t}\n\n\t\t\t\t}, onProgress, onError );\n\n\t\t\t}\n\n\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\tvar loaded = 0;\n\n\t\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\t\tloadTexture( i );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\n\n\t\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}, onProgress, onError );\n\n\t\t\t}\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\tsetPath: function ( value ) {\n\n\t\t\tthis.path = value;\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author Nikos M. / https://github.com/foo123/\n\t *\n\t * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n\t */\n\n\tfunction DataTextureLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t\t// override in sub classes\n\t\tthis._parser = null;\n\n\t}\n\n\tObject.assign( DataTextureLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar texture = new DataTexture();\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tvar texData = scope._parser( buffer );\n\n\t\t\t\tif ( ! texData ) return;\n\n\t\t\t\tif ( undefined !== texData.image ) {\n\n\t\t\t\t\ttexture.image = texData.image;\n\n\t\t\t\t} else if ( undefined !== texData.data ) {\n\n\t\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : LinearFilter;\n\t\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : LinearMipMapLinearFilter;\n\n\t\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\n\n\t\t\t\tif ( undefined !== texData.format ) {\n\n\t\t\t\t\ttexture.format = texData.format;\n\n\t\t\t\t}\n\t\t\t\tif ( undefined !== texData.type ) {\n\n\t\t\t\t\ttexture.type = texData.type;\n\n\t\t\t\t}\n\n\t\t\t\tif ( undefined !== texData.mipmaps ) {\n\n\t\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( 1 === texData.mipmapCount ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t\t}, onProgress, onError );\n\n\n\t\t\treturn texture;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction ImageLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t}\n\n\tObject.assign( ImageLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tif ( url === undefined ) url = '';\n\n\t\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\t\tvar scope = this;\n\n\t\t\tvar cached = Cache.get( url );\n\n\t\t\tif ( cached !== undefined ) {\n\n\t\t\t\tscope.manager.itemStart( url );\n\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t\treturn cached;\n\n\t\t\t}\n\n\t\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\t\timage.addEventListener( 'load', function () {\n\n\t\t\t\tCache.add( url, this );\n\n\t\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\t/*\n\t\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tif ( onProgress ) onProgress( event );\n\n\t\t\t}, false );\n\t\t\t*/\n\n\t\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tif ( onError ) onError( event );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t\t}\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\timage.src = url;\n\n\t\t\treturn image;\n\n\t\t},\n\n\t\tsetCrossOrigin: function ( value ) {\n\n\t\t\tthis.crossOrigin = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetPath: function ( value ) {\n\n\t\t\tthis.path = value;\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction CubeTextureLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t}\n\n\tObject.assign( CubeTextureLoader.prototype, {\n\n\t\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\t\tvar texture = new CubeTexture();\n\n\t\t\tvar loader = new ImageLoader( this.manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\t\tloader.setPath( this.path );\n\n\t\t\tvar loaded = 0;\n\n\t\t\tfunction loadTexture( i ) {\n\n\t\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\t\tloaded ++;\n\n\t\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t\t}\n\n\t\t\t\t}, undefined, onError );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < urls.length; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\tsetCrossOrigin: function ( value ) {\n\n\t\t\tthis.crossOrigin = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetPath: function ( value ) {\n\n\t\t\tthis.path = value;\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction TextureLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t}\n\n\tObject.assign( TextureLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar loader = new ImageLoader( this.manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\t\tloader.setPath( this.path );\n\n\t\t\tvar texture = new Texture();\n\t\t\ttexture.image = loader.load( url, function () {\n\n\t\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\t\tvar isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\t\tonLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\tsetCrossOrigin: function ( value ) {\n\n\t\t\tthis.crossOrigin = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetPath: function ( value ) {\n\n\t\t\tthis.path = value;\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction Light( color, intensity ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Light';\n\n\t\tthis.color = new Color( color );\n\t\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\t\tthis.receiveShadow = undefined;\n\n\t}\n\n\tLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Light,\n\n\t\tisLight: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tObject3D.prototype.copy.call( this, source );\n\n\t\t\tthis.color.copy( source.color );\n\t\t\tthis.intensity = source.intensity;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\t\tdata.object.color = this.color.getHex();\n\t\t\tdata.object.intensity = this.intensity;\n\n\t\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\t\treturn data;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\t\tLight.call( this, skyColor, intensity );\n\n\t\tthis.type = 'HemisphereLight';\n\n\t\tthis.castShadow = undefined;\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.groundColor = new Color( groundColor );\n\n\t}\n\n\tHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\t\tconstructor: HemisphereLight,\n\n\t\tisHemisphereLight: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tLight.prototype.copy.call( this, source );\n\n\t\t\tthis.groundColor.copy( source.groundColor );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction LightShadow( camera ) {\n\n\t\tthis.camera = camera;\n\n\t\tthis.bias = 0;\n\t\tthis.radius = 1;\n\n\t\tthis.mapSize = new Vector2( 512, 512 );\n\n\t\tthis.map = null;\n\t\tthis.matrix = new Matrix4();\n\n\t}\n\n\tObject.assign( LightShadow.prototype, {\n\n\t\tcopy: function ( source ) {\n\n\t\t\tthis.camera = source.camera.clone();\n\n\t\t\tthis.bias = source.bias;\n\t\t\tthis.radius = source.radius;\n\n\t\t\tthis.mapSize.copy( source.mapSize );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\ttoJSON: function () {\n\n\t\t\tvar object = {};\n\n\t\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\t\tdelete object.camera.matrix;\n\n\t\t\treturn object;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction SpotLightShadow() {\n\n\t\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\t}\n\n\tSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\t\tconstructor: SpotLightShadow,\n\n\t\tisSpotLightShadow: true,\n\n\t\tupdate: function ( light ) {\n\n\t\t\tvar camera = this.camera;\n\n\t\t\tvar fov = _Math.RAD2DEG * 2 * light.angle;\n\t\t\tvar aspect = this.mapSize.width / this.mapSize.height;\n\t\t\tvar far = light.distance || camera.far;\n\n\t\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\t\tcamera.fov = fov;\n\t\t\t\tcamera.aspect = aspect;\n\t\t\t\tcamera.far = far;\n\t\t\t\tcamera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\t\tLight.call( this, color, intensity );\n\n\t\tthis.type = 'SpotLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tObject.defineProperty( this, 'power', {\n\t\t\tget: function () {\n\t\t\t\t// intensity = power per solid angle.\n\t\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\t\treturn this.intensity * Math.PI;\n\t\t\t},\n\t\t\tset: function ( power ) {\n\t\t\t\t// intensity = power per solid angle.\n\t\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\t\tthis.intensity = power / Math.PI;\n\t\t\t}\n\t\t} );\n\n\t\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\t\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\t\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\t\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\t\tthis.shadow = new SpotLightShadow();\n\n\t}\n\n\tSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\t\tconstructor: SpotLight,\n\n\t\tisSpotLight: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tLight.prototype.copy.call( this, source );\n\n\t\t\tthis.distance = source.distance;\n\t\t\tthis.angle = source.angle;\n\t\t\tthis.penumbra = source.penumbra;\n\t\t\tthis.decay = source.decay;\n\n\t\t\tthis.target = source.target.clone();\n\n\t\t\tthis.shadow = source.shadow.clone();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\n\tfunction PointLight( color, intensity, distance, decay ) {\n\n\t\tLight.call( this, color, intensity );\n\n\t\tthis.type = 'PointLight';\n\n\t\tObject.defineProperty( this, 'power', {\n\t\t\tget: function () {\n\t\t\t\t// intensity = power per solid angle.\n\t\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t\t},\n\t\t\tset: function ( power ) {\n\t\t\t\t// intensity = power per solid angle.\n\t\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\t\t\t}\n\t\t} );\n\n\t\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\t\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\t\tthis.shadow = new LightShadow( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\t}\n\n\tPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\t\tconstructor: PointLight,\n\n\t\tisPointLight: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tLight.prototype.copy.call( this, source );\n\n\t\t\tthis.distance = source.distance;\n\t\t\tthis.decay = source.decay;\n\n\t\t\tthis.shadow = source.shadow.clone();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction DirectionalLightShadow( ) {\n\n\t\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n\t}\n\n\tDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\t\tconstructor: DirectionalLightShadow\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction DirectionalLight( color, intensity ) {\n\n\t\tLight.call( this, color, intensity );\n\n\t\tthis.type = 'DirectionalLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.shadow = new DirectionalLightShadow();\n\n\t}\n\n\tDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\t\tconstructor: DirectionalLight,\n\n\t\tisDirectionalLight: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tLight.prototype.copy.call( this, source );\n\n\t\t\tthis.target = source.target.clone();\n\n\t\t\tthis.shadow = source.shadow.clone();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction AmbientLight( color, intensity ) {\n\n\t\tLight.call( this, color, intensity );\n\n\t\tthis.type = 'AmbientLight';\n\n\t\tthis.castShadow = undefined;\n\n\t}\n\n\tAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\t\tconstructor: AmbientLight,\n\n\t\tisAmbientLight: true\n\n\t} );\n\n\t/**\n\t * @author abelnation / http://github.com/abelnation\n\t */\n\n\tfunction RectAreaLight( color, intensity, width, height ) {\n\n\t\tLight.call( this, color, intensity );\n\n\t\tthis.type = 'RectAreaLight';\n\n\t\tthis.position.set( 0, 1, 0 );\n\t\tthis.updateMatrix();\n\n\t\tthis.width = ( width !== undefined ) ? width : 10;\n\t\tthis.height = ( height !== undefined ) ? height : 10;\n\n\t\t// TODO (abelnation): distance/decay\n\n\t\t// TODO (abelnation): update method for RectAreaLight to update transform to lookat target\n\n\t\t// TODO (abelnation): shadows\n\n\t}\n\n\t// TODO (abelnation): RectAreaLight update when light shape is changed\n\tRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\t\tconstructor: RectAreaLight,\n\n\t\tisRectAreaLight: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tLight.prototype.copy.call( this, source );\n\n\t\t\tthis.width = source.width;\n\t\t\tthis.height = source.height;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\ttoJSON: function ( meta ) {\n\n\t\t\tvar data = Light.prototype.toJSON.call( this, meta );\n\n\t\t\tdata.object.width = this.width;\n\t\t\tdata.object.height = this.height;\n\n\t\t\treturn data;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author tschw\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t */\n\n\tvar AnimationUtils = {\n\n\t\t// same as Array.prototype.slice, but also works on typed arrays\n\t\tarraySlice: function ( array, from, to ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t\t}\n\n\t\t\treturn array.slice( from, to );\n\n\t\t},\n\n\t\t// converts an array to a specific type\n\t\tconvertArray: function ( array, type, forceClone ) {\n\n\t\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\t\treturn new type( array ); // create typed array\n\n\t\t\t}\n\n\t\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t\t},\n\n\t\tisTypedArray: function ( object ) {\n\n\t\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t\t\t! ( object instanceof DataView );\n\n\t\t},\n\n\t\t// returns an array by which times and values can be sorted\n\t\tgetKeyframeOrder: function ( times ) {\n\n\t\t\tfunction compareTime( i, j ) {\n\n\t\t\t\treturn times[ i ] - times[ j ];\n\n\t\t\t}\n\n\t\t\tvar n = times.length;\n\t\t\tvar result = new Array( n );\n\t\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\t\tresult.sort( compareTime );\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\t\tsortedArray: function ( values, stride, order ) {\n\n\t\t\tvar nValues = values.length;\n\t\t\tvar result = new values.constructor( nValues );\n\n\t\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\t\tvar srcOffset = order[ i ] * stride;\n\n\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\t// function for parsing AOS keyframe formats\n\t\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\t\tvar i = 1, key = jsonKeys[ 0 ];\n\n\t\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t}\n\n\t\t\tif ( key === undefined ) return; // no data\n\n\t\t\tvar value = key[ valuePropertyName ];\n\t\t\tif ( value === undefined ) return; // no data\n\n\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\tdo {\n\n\t\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t\t}\n\n\t\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t\t} while ( key !== undefined );\n\n\t\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t\t// ...assume THREE.Math-ish\n\n\t\t\t\tdo {\n\n\t\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t\t} while ( key !== undefined );\n\n\t\t\t} else {\n\n\t\t\t\t// otherwise push as-is\n\n\t\t\t\tdo {\n\n\t\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t\t} while ( key !== undefined );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Abstract base class of interpolants over parametric samples.\n\t *\n\t * The parameter domain is one dimensional, typically the time or a path\n\t * along a curve defined by the data.\n\t *\n\t * The sample values can have any dimensionality and derived classes may\n\t * apply special interpretations to the data.\n\t *\n\t * This class provides the interval seek in a Template Method, deferring\n\t * the actual interpolation to derived classes.\n\t *\n\t * Time complexity is O(1) for linear access crossing at most two points\n\t * and O(log N) for random access, where N is the number of positions.\n\t *\n\t * References:\n\t *\n\t * \t\thttp://www.oodesign.com/template-method-pattern.html\n\t *\n\t * @author tschw\n\t */\n\n\tfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tthis.parameterPositions = parameterPositions;\n\t\tthis._cachedIndex = 0;\n\n\t\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\t\tthis.sampleValues = sampleValues;\n\t\tthis.valueSize = sampleSize;\n\n\t}\n\n\tObject.assign( Interpolant.prototype, {\n\n\t\tevaluate: function( t ) {\n\n\t\t\tvar pp = this.parameterPositions,\n\t\t\t\ti1 = this._cachedIndex,\n\n\t\t\t\tt1 = pp[   i1   ],\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\tvalidate_interval: {\n\n\t\t\t\tseek: {\n\n\t\t\t\t\tvar right;\n\n\t\t\t\t\tlinear_scan: {\n\t\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t\t//- slower code:\n\t\t\t\t\t\t//-\n\t\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ;) {\n\n\t\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//- slower code:\n\t\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ;) {\n\n\t\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t\t} // linear scan\n\n\t\t\t\t\t// binary search\n\n\t\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tt1 = pp[   i1   ];\n\t\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t\t// check boundary cases, again\n\n\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t\t}\n\n\t\t\t\t} // seek\n\n\t\t\t\tthis._cachedIndex = i1;\n\n\t\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t\t} // validate_interval\n\n\t\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t\t},\n\n\t\tsettings: null, // optional, subclass-specific settings structure\n\t\t// Note: The indirection allows central control of many interpolants.\n\n\t\t// --- Protected interface\n\n\t\tDefaultSettings_: {},\n\n\t\tgetSettings_: function() {\n\n\t\t\treturn this.settings || this.DefaultSettings_;\n\n\t\t},\n\n\t\tcopySampleValue_: function( index ) {\n\n\t\t\t// copies a sample value to the result buffer\n\n\t\t\tvar result = this.resultBuffer,\n\t\t\t\tvalues = this.sampleValues,\n\t\t\t\tstride = this.valueSize,\n\t\t\t\toffset = index * stride;\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\t// Template methods for derived classes:\n\n\t\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\t\tthrow new Error( \"call to abstract method\" );\n\t\t\t// implementations shall return this.resultBuffer\n\n\t\t},\n\n\t\tintervalChanged_: function( i1, t0, t1 ) {\n\n\t\t\t// empty\n\n\t\t}\n\n\t} );\n\n\t//!\\ DECLARE ALIAS AFTER assign prototype !\n\tObject.assign( Interpolant.prototype, {\n\n\t\t//( 0, t, t0 ), returns this.resultBuffer\n\t\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t\t//( N-1, tN-1, t ), returns this.resultBuffer\n\t\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n\t} );\n\n\t/**\n\t * Fast and simple cubic spline interpolant.\n\t *\n\t * It was derived from a Hermitian construction setting the first derivative\n\t * at each sample position to the linear slope between neighboring positions\n\t * over their parameter interval.\n\t *\n\t * @author tschw\n\t */\n\n\tfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call(\n\t\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t\tthis._weightPrev = -0;\n\t\tthis._offsetPrev = -0;\n\t\tthis._weightNext = -0;\n\t\tthis._offsetNext = -0;\n\n\t}\n\n\tCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\t\tconstructor: CubicInterpolant,\n\n\t\tDefaultSettings_: {\n\n\t\t\tendingStart: \tZeroCurvatureEnding,\n\t\t\tendingEnd:\t\tZeroCurvatureEnding\n\n\t\t},\n\n\t\tintervalChanged_: function( i1, t0, t1 ) {\n\n\t\t\tvar pp = this.parameterPositions,\n\t\t\t\tiPrev = i1 - 2,\n\t\t\t\tiNext = i1 + 1,\n\n\t\t\t\ttPrev = pp[ iPrev ],\n\t\t\t\ttNext = pp[ iNext ];\n\n\t\t\tif ( tPrev === undefined ) {\n\n\t\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\t\tiPrev = i1;\n\t\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\t\tiPrev = i1;\n\t\t\t\t\t\ttPrev = t1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( tNext === undefined ) {\n\n\t\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\t\tiNext = i1;\n\t\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\t\tiNext = 1;\n\t\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\t\ttNext = t0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\t\tstride = this.valueSize;\n\n\t\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\t\tthis._offsetPrev = iPrev * stride;\n\t\t\tthis._offsetNext = iNext * stride;\n\n\t\t},\n\n\t\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\t\tvar result = this.resultBuffer,\n\t\t\t\tvalues = this.sampleValues,\n\t\t\t\tstride = this.valueSize,\n\n\t\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\t\tpp = p * p,\n\t\t\t\tppp = pp * p;\n\n\t\t\t// evaluate polynomials\n\n\t\t\tvar sP =     - wP   * ppp   +         2 * wP    * pp    -          wP   * p;\n\t\t\tvar s0 = ( 1 + wP ) * ppp   + (-1.5 - 2 * wP )  * pp    + ( -0.5 + wP ) * p     + 1;\n\t\t\tvar s1 = (-1 - wN ) * ppp   + ( 1.5 +   wN   )  * pp    +    0.5        * p;\n\t\t\tvar sN =       wN   * ppp   -           wN      * pp;\n\n\t\t\t// combine data linearly\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tresult[ i ] =\n\t\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author tschw\n\t */\n\n\tfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\t\tconstructor: LinearInterpolant,\n\n\t\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\t\tvar result = this.resultBuffer,\n\t\t\t\tvalues = this.sampleValues,\n\t\t\t\tstride = this.valueSize,\n\n\t\t\t\toffset1 = i1 * stride,\n\t\t\t\toffset0 = offset1 - stride,\n\n\t\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\t\tweight0 = 1 - weight1;\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tresult[ i ] =\n\t\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t *\n\t * Interpolant that evaluates to the sample value at the position preceeding\n\t * the parameter.\n\t *\n\t * @author tschw\n\t */\n\n\tfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\t\tconstructor: DiscreteInterpolant,\n\n\t\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t}\n\n\t} );\n\n\tvar KeyframeTrackPrototype;\n\n\tKeyframeTrackPrototype = {\n\n\t\tTimeBufferType: Float32Array,\n\t\tValueBufferType: Float32Array,\n\n\t\tDefaultInterpolation: InterpolateLinear,\n\n\t\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\t\treturn new DiscreteInterpolant(\n\t\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t\t},\n\n\t\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\t\treturn new LinearInterpolant(\n\t\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t\t},\n\n\t\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\t\treturn new CubicInterpolant(\n\t\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t\t},\n\n\t\tsetInterpolation: function ( interpolation ) {\n\n\t\t\tvar factoryMethod;\n\n\t\t\tswitch ( interpolation ) {\n\n\t\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase InterpolateLinear:\n\n\t\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase InterpolateSmooth:\n\n\t\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( factoryMethod === undefined ) {\n\n\t\t\t\tvar message = \"unsupported interpolation for \" +\n\t\t\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconsole.warn( 'THREE.KeyframeTrackPrototype:', message );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tthis.createInterpolant = factoryMethod;\n\n\t\t},\n\n\t\tgetInterpolation: function () {\n\n\t\t\tswitch ( this.createInterpolant ) {\n\n\t\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\t\treturn InterpolateLinear;\n\n\t\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\t\treturn InterpolateSmooth;\n\n\t\t\t}\n\n\t\t},\n\n\t\tgetValueSize: function () {\n\n\t\t\treturn this.values.length / this.times.length;\n\n\t\t},\n\n\t\t// move all keyframes either forwards or backwards in time\n\t\tshift: function ( timeOffset ) {\n\n\t\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\t\tvar times = this.times;\n\n\t\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\t\tscale: function ( timeScale ) {\n\n\t\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\t\tvar times = this.times;\n\n\t\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\t\ttrim: function ( startTime, endTime ) {\n\n\t\t\tvar times = this.times,\n\t\t\t\tnKeys = times.length,\n\t\t\t\tfrom = 0,\n\t\t\t\tto = nKeys - 1;\n\n\t\t\twhile ( from !== nKeys && times[ from ] < startTime ) ++ from;\n\t\t\twhile ( to !== - 1 && times[ to ] > endTime ) -- to;\n\n\t\t\t++ to; // inclusive -> exclusive bound\n\n\t\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\t\tif ( from >= to ) to = Math.max( to, 1 ), from = to - 1;\n\n\t\t\t\tvar stride = this.getValueSize();\n\t\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\t\tthis.values = AnimationUtils.\n\t\t\t\t\t\tarraySlice( this.values, from * stride, to * stride );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\t\tvalidate: function () {\n\n\t\t\tvar valid = true;\n\n\t\t\tvar valueSize = this.getValueSize();\n\t\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrackPrototype: Invalid value size in track.', this );\n\t\t\t\tvalid = false;\n\n\t\t\t}\n\n\t\t\tvar times = this.times,\n\t\t\t\tvalues = this.values,\n\n\t\t\t\tnKeys = times.length;\n\n\t\t\tif ( nKeys === 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrackPrototype: Track is empty.', this );\n\t\t\t\tvalid = false;\n\n\t\t\t}\n\n\t\t\tvar prevTime = null;\n\n\t\t\tfor ( var i = 0; i !== nKeys; i ++ ) {\n\n\t\t\t\tvar currTime = times[ i ];\n\n\t\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.KeyframeTrackPrototype: Time is not a valid number.', this, i, currTime );\n\t\t\t\t\tvalid = false;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\t\tconsole.error( 'THREE.KeyframeTrackPrototype: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\t\tvalid = false;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tprevTime = currTime;\n\n\t\t\t}\n\n\t\t\tif ( values !== undefined ) {\n\n\t\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\t\tvar value = values[ i ];\n\n\t\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrackPrototype: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn valid;\n\n\t\t},\n\n\t\t// removes equivalent sequential keys as common in morph target sequences\n\t\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\t\toptimize: function () {\n\n\t\t\tvar times = this.times,\n\t\t\t\tvalues = this.values,\n\t\t\t\tstride = this.getValueSize(),\n\n\t\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\t\twriteIndex = 1,\n\t\t\t\tlastIndex = times.length - 1;\n\n\t\t\tfor ( var i = 1; i < lastIndex; ++ i ) {\n\n\t\t\t\tvar keep = false;\n\n\t\t\t\tvar time = times[ i ];\n\t\t\t\tvar timeNext = times[ i + 1 ];\n\n\t\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\t\tvar offset = i * stride,\n\t\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\t\tvar value = values[ offset + j ];\n\n\t\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else keep = true;\n\n\t\t\t\t}\n\n\t\t\t\t// in-place compaction\n\n\t\t\t\tif ( keep ) {\n\n\t\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\t\tvar readOffset = i * stride,\n\t\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j )\n\n\t\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\t++ writeIndex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// flush last keyframe (compaction looks ahead)\n\n\t\t\tif ( lastIndex > 0 ) {\n\n\t\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\t\tfor ( var readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j )\n\n\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t\tif ( writeIndex !== times.length ) {\n\n\t\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t};\n\n\tfunction KeyframeTrackConstructor( name, times, values, interpolation ) {\n\n\t\tif ( name === undefined ) throw new Error( \"track name is undefined\" );\n\n\t\tif ( times === undefined || times.length === 0 ) {\n\n\t\t\tthrow new Error( \"no keyframes in track named \" + name );\n\n\t\t}\n\n\t\tthis.name = name;\n\n\t\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\t\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\t\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\t\tthis.validate();\n\t\tthis.optimize();\n\n\t}\n\n\t/**\n\t *\n\t * A Track of vectored keyframe values.\n\t *\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\t\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n\t}\n\n\tVectorKeyframeTrack.prototype =\n\t\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\t\tconstructor: VectorKeyframeTrack,\n\n\t\tValueTypeName: 'vector'\n\n\t\t// ValueBufferType is inherited\n\n\t\t// DefaultInterpolation is inherited\n\n\t} );\n\n\t/**\n\t * Spherical linear unit quaternion interpolant.\n\t *\n\t * @author tschw\n\t */\n\n\tfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\t\tconstructor: QuaternionLinearInterpolant,\n\n\t\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\t\tvar result = this.resultBuffer,\n\t\t\t\tvalues = this.sampleValues,\n\t\t\t\tstride = this.valueSize,\n\n\t\t\t\toffset = i1 * stride,\n\n\t\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\t\tQuaternion.slerpFlat( result, 0,\n\t\t\t\t\t\tvalues, offset - stride, values, offset, alpha );\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t *\n\t * A Track of quaternion keyframe values.\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\t\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n\t}\n\n\tQuaternionKeyframeTrack.prototype =\n\t\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\t\tconstructor: QuaternionKeyframeTrack,\n\n\t\tValueTypeName: 'quaternion',\n\n\t\t// ValueBufferType is inherited\n\n\t\tDefaultInterpolation: InterpolateLinear,\n\n\t\tInterpolantFactoryMethodLinear: function( result ) {\n\n\t\t\treturn new QuaternionLinearInterpolant(\n\t\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t\t},\n\n\t\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n\t} );\n\n\t/**\n\t *\n\t * A Track of numeric keyframe values.\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\t\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n\t}\n\n\tNumberKeyframeTrack.prototype =\n\t\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\t\tconstructor: NumberKeyframeTrack,\n\n\t\tValueTypeName: 'number'\n\n\t\t// ValueBufferType is inherited\n\n\t\t// DefaultInterpolation is inherited\n\n\t} );\n\n\t/**\n\t *\n\t * A Track that interpolates Strings\n\t *\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\t\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n\t}\n\n\tStringKeyframeTrack.prototype =\n\t\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\t\tconstructor: StringKeyframeTrack,\n\n\t\tValueTypeName: 'string',\n\t\tValueBufferType: Array,\n\n\t\tDefaultInterpolation: InterpolateDiscrete,\n\n\t\tInterpolantFactoryMethodLinear: undefined,\n\n\t\tInterpolantFactoryMethodSmooth: undefined\n\n\t} );\n\n\t/**\n\t *\n\t * A Track of Boolean keyframe values.\n\t *\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction BooleanKeyframeTrack( name, times, values ) {\n\n\t\tKeyframeTrackConstructor.call( this, name, times, values );\n\n\t}\n\n\tBooleanKeyframeTrack.prototype =\n\t\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\t\tconstructor: BooleanKeyframeTrack,\n\n\t\tValueTypeName: 'bool',\n\t\tValueBufferType: Array,\n\n\t\tDefaultInterpolation: InterpolateDiscrete,\n\n\t\tInterpolantFactoryMethodLinear: undefined,\n\t\tInterpolantFactoryMethodSmooth: undefined\n\n\t\t// Note: Actually this track could have a optimized / compressed\n\t\t// representation of a single value and a custom interpolant that\n\t\t// computes \"firstValue ^ isOdd( index )\".\n\n\t} );\n\n\t/**\n\t *\n\t * A Track of keyframe values that represent color.\n\t *\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\t\tKeyframeTrackConstructor.call( this, name, times, values, interpolation );\n\n\t}\n\n\tColorKeyframeTrack.prototype =\n\t\t\tObject.assign( Object.create( KeyframeTrackPrototype ), {\n\n\t\tconstructor: ColorKeyframeTrack,\n\n\t\tValueTypeName: 'color'\n\n\t\t// ValueBufferType is inherited\n\n\t\t// DefaultInterpolation is inherited\n\n\n\t\t// Note: Very basic implementation and nothing special yet.\n\t\t// However, this is the place for color space parameterization.\n\n\t} );\n\n\t/**\n\t *\n\t * A timed sequence of keyframes for a specific property.\n\t *\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\t\tKeyframeTrackConstructor.apply( this, arguments );\n\n\t}\n\n\tKeyframeTrack.prototype = KeyframeTrackPrototype;\n\tKeyframeTrackPrototype.constructor = KeyframeTrack;\n\n\t// Static methods:\n\n\tObject.assign( KeyframeTrack, {\n\n\t\t// Serialization (in static context, because of constructor invocation\n\t\t// and automatic invocation of .toJSON):\n\n\t\tparse: function( json ) {\n\n\t\t\tif( json.type === undefined ) {\n\n\t\t\t\tthrow new Error( \"track type undefined, can not parse\" );\n\n\t\t\t}\n\n\t\t\tvar trackType = KeyframeTrack._getTrackTypeForValueTypeName( json.type );\n\n\t\t\tif ( json.times === undefined ) {\n\n\t\t\t\tvar times = [], values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\t\t\tjson.times = times;\n\t\t\t\tjson.values = values;\n\n\t\t\t}\n\n\t\t\t// derived classes can define a static parse method\n\t\t\tif ( trackType.parse !== undefined ) {\n\n\t\t\t\treturn trackType.parse( json );\n\n\t\t\t} else {\n\n\t\t\t\t// by default, we asssume a constructor compatible with the base\n\t\t\t\treturn new trackType(\n\t\t\t\t\t\tjson.name, json.times, json.values, json.interpolation );\n\n\t\t\t}\n\n\t\t},\n\n\t\ttoJSON: function( track ) {\n\n\t\t\tvar trackType = track.constructor;\n\n\t\t\tvar json;\n\n\t\t\t// derived classes can define a static toJSON method\n\t\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\t\tjson = trackType.toJSON( track );\n\n\t\t\t} else {\n\n\t\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\t\tjson = {\n\n\t\t\t\t\t'name': track.name,\n\t\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t\t};\n\n\t\t\t\tvar interpolation = track.getInterpolation();\n\n\t\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\t\treturn json;\n\n\t\t},\n\n\t\t_getTrackTypeForValueTypeName: function( typeName ) {\n\n\t\t\tswitch( typeName.toLowerCase() ) {\n\n\t\t\t\tcase \"scalar\":\n\t\t\t\tcase \"double\":\n\t\t\t\tcase \"float\":\n\t\t\t\tcase \"number\":\n\t\t\t\tcase \"integer\":\n\n\t\t\t\t\treturn NumberKeyframeTrack;\n\n\t\t\t\tcase \"vector\":\n\t\t\t\tcase \"vector2\":\n\t\t\t\tcase \"vector3\":\n\t\t\t\tcase \"vector4\":\n\n\t\t\t\t\treturn VectorKeyframeTrack;\n\n\t\t\t\tcase \"color\":\n\n\t\t\t\t\treturn ColorKeyframeTrack;\n\n\t\t\t\tcase \"quaternion\":\n\n\t\t\t\t\treturn QuaternionKeyframeTrack;\n\n\t\t\t\tcase \"bool\":\n\t\t\t\tcase \"boolean\":\n\n\t\t\t\t\treturn BooleanKeyframeTrack;\n\n\t\t\t\tcase \"string\":\n\n\t\t\t\t\treturn StringKeyframeTrack;\n\n\t\t\t}\n\n\t\t\tthrow new Error( \"Unsupported typeName: \" + typeName );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t *\n\t * Reusable set of Tracks that represent an animation.\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t */\n\n\tfunction AnimationClip( name, duration, tracks ) {\n\n\t\tthis.name = name;\n\t\tthis.tracks = tracks;\n\t\tthis.duration = ( duration !== undefined ) ? duration : - 1;\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\t// this means it should figure out its duration by scanning the tracks\n\t\tif ( this.duration < 0 ) {\n\n\t\t\tthis.resetDuration();\n\n\t\t}\n\n\t\tthis.optimize();\n\n\t}\n\n\tObject.assign( AnimationClip, {\n\n\t\tparse: function ( json ) {\n\n\t\t\tvar tracks = [],\n\t\t\t\tjsonTracks = json.tracks,\n\t\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\t\ttracks.push( KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t\t}\n\n\t\t\treturn new AnimationClip( json.name, json.duration, tracks );\n\n\t\t},\n\n\t\ttoJSON: function ( clip ) {\n\n\t\t\tvar tracks = [],\n\t\t\t\tclipTracks = clip.tracks;\n\n\t\t\tvar json = {\n\n\t\t\t\t'name': clip.name,\n\t\t\t\t'duration': clip.duration,\n\t\t\t\t'tracks': tracks\n\n\t\t\t};\n\n\t\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t\t}\n\n\t\t\treturn json;\n\n\t\t},\n\n\t\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\n\n\t\t\tvar numMorphTargets = morphTargetSequence.length;\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\t\tvar times = [];\n\t\t\t\tvar values = [];\n\n\t\t\t\ttimes.push(\n\t\t\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\t\t\ti,\n\t\t\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\t\tvar order = AnimationUtils.getKeyframeOrder( times );\n\t\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t\t// last frame as well for perfect loop.\n\t\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\ttracks.push(\n\t\t\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\t\t\ttimes, values\n\t\t\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t\t}\n\n\t\t\treturn new AnimationClip( name, - 1, tracks );\n\n\t\t},\n\n\t\tfindByName: function ( objectOrClipArray, name ) {\n\n\t\t\tvar clipArray = objectOrClipArray;\n\n\t\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\t\tvar o = objectOrClipArray;\n\t\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\t\treturn clipArray[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\n\n\t\t\tvar animationToMorphTargets = {};\n\n\t\t\t// tested with https://regex101.com/ on trick sequences\n\t\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t\t// sort morph target names into animation groups based\n\t\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\t\t\t\tvar parts = morphTarget.name.match( pattern );\n\n\t\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\t\tvar name = parts[ 1 ];\n\n\t\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\n\t\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar clips = [];\n\n\t\t\tfor ( var name in animationToMorphTargets ) {\n\n\t\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t\t}\n\n\t\t\treturn clips;\n\n\t\t},\n\n\t\t// parse the animation.hierarchy format\n\t\tparseAnimation: function ( animation, bones ) {\n\n\t\t\tif ( ! animation ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t\t// only return track if there are actually keys.\n\t\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\t\tvar times = [];\n\t\t\t\t\tvar values = [];\n\n\t\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar clipName = animation.name || 'default';\n\t\t\t// automatic length determination in AnimationClip.\n\t\t\tvar duration = animation.length || - 1;\n\t\t\tvar fps = animation.fps || 30;\n\n\t\t\tvar hierarchyTracks = animation.hierarchy || [];\n\n\t\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t\t// skip empty tracks\n\t\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t\t// process morph targets\n\t\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\t\tvar morphTargetNames = {};\n\n\t\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t\t// the morphTarget is named.\n\t\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\t\tvar times = [];\n\t\t\t\t\t\tvar values = [];\n\n\t\t\t\t\t\tfor ( var m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\t\tvar animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( tracks.length === 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar clip = new AnimationClip( clipName, duration, tracks );\n\n\t\t\treturn clip;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( AnimationClip.prototype, {\n\n\t\tresetDuration: function () {\n\n\t\t\tvar tracks = this.tracks, duration = 0;\n\n\t\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\t\tvar track = this.tracks[ i ];\n\n\t\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t\t}\n\n\t\t\tthis.duration = duration;\n\n\t\t},\n\n\t\ttrim: function () {\n\n\t\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\toptimize: function () {\n\n\t\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\t\tthis.tracks[ i ].optimize();\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction MaterialLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\t\tthis.textures = {};\n\n\t}\n\n\tObject.assign( MaterialLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar loader = new FileLoader( scope.manager );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tsetTextures: function ( value ) {\n\n\t\t\tthis.textures = value;\n\n\t\t},\n\n\t\tparse: function ( json ) {\n\n\t\t\tvar textures = this.textures;\n\n\t\t\tfunction getTexture( name ) {\n\n\t\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t\t}\n\n\t\t\t\treturn textures[ name ];\n\n\t\t\t}\n\n\t\t\tvar material = new Materials[ json.type ]();\n\n\t\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\t\tif ( json.clearCoat !== undefined ) material.clearCoat = json.clearCoat;\n\t\t\tif ( json.clearCoatRoughness !== undefined ) material.clearCoatRoughness = json.clearCoatRoughness;\n\t\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\n\t\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\t\tif ( json.shading !== undefined ) material.shading = json.shading;\n\t\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\t\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\t\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\n\t\t\t// for PointsMaterial\n\n\t\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t\t// maps\n\n\t\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\n\t\t\tif ( json.alphaMap !== undefined ) {\n\n\t\t\t\tmaterial.alphaMap = getTexture( json.alphaMap );\n\t\t\t\tmaterial.transparent = true;\n\n\t\t\t}\n\n\t\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\t\tvar normalScale = json.normalScale;\n\n\t\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t\t}\n\n\t\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\n\t\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\n\t\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\t\treturn material;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction BufferGeometryLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t}\n\n\tObject.assign( BufferGeometryLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar loader = new FileLoader( scope.manager );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tparse: function ( json ) {\n\n\t\t\tvar geometry = new BufferGeometry();\n\n\t\t\tvar index = json.data.index;\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\n\t\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t\t}\n\n\t\t\tvar attributes = json.data.attributes;\n\n\t\t\tfor ( var key in attributes ) {\n\n\t\t\t\tvar attribute = attributes[ key ];\n\t\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\n\t\t\t\tgeometry.addAttribute( key, new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized ) );\n\n\t\t\t}\n\n\t\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\t\tif ( groups !== undefined ) {\n\n\t\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar boundingSphere = json.data.boundingSphere;\n\n\t\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\t\tvar center = new Vector3();\n\n\t\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t\t}\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t} );\n\n\tvar TYPED_ARRAYS = {\n\t\tInt8Array: Int8Array,\n\t\tUint8Array: Uint8Array,\n\t\t// Workaround for IE11 pre KB2929437. See #11440\n\t\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\n\t\tInt16Array: Int16Array,\n\t\tUint16Array: Uint16Array,\n\t\tInt32Array: Int32Array,\n\t\tUint32Array: Uint32Array,\n\t\tFloat32Array: Float32Array,\n\t\tFloat64Array: Float64Array\n\t};\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction Loader() {\n\n\t\tthis.onLoadStart = function () {};\n\t\tthis.onLoadProgress = function () {};\n\t\tthis.onLoadComplete = function () {};\n\n\t}\n\n\tLoader.Handlers = {\n\n\t\thandlers: [],\n\n\t\tadd: function ( regex, loader ) {\n\n\t\t\tthis.handlers.push( regex, loader );\n\n\t\t},\n\n\t\tget: function ( file ) {\n\n\t\t\tvar handlers = this.handlers;\n\n\t\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\t\tvar regex = handlers[ i ];\n\t\t\t\tvar loader = handlers[ i + 1 ];\n\n\t\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\t\treturn loader;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\tObject.assign( Loader.prototype, {\n\n\t\tcrossOrigin: undefined,\n\n\t\textractUrlBase: function ( url ) {\n\n\t\t\tvar parts = url.split( '/' );\n\n\t\t\tif ( parts.length === 1 ) return './';\n\n\t\t\tparts.pop();\n\n\t\t\treturn parts.join( '/' ) + '/';\n\n\t\t},\n\n\t\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\n\n\t\t\tvar array = [];\n\n\t\t\tfor ( var i = 0; i < materials.length; ++ i ) {\n\n\t\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t},\n\n\t\tcreateMaterial: ( function () {\n\n\t\t\tvar BlendingMode = {\n\t\t\t\tNoBlending: NoBlending,\n\t\t\t\tNormalBlending: NormalBlending,\n\t\t\t\tAdditiveBlending: AdditiveBlending,\n\t\t\t\tSubtractiveBlending: SubtractiveBlending,\n\t\t\t\tMultiplyBlending: MultiplyBlending,\n\t\t\t\tCustomBlending: CustomBlending\n\t\t\t};\n\n\t\t\tvar color = new Color();\n\t\t\tvar textureLoader = new TextureLoader();\n\t\t\tvar materialLoader = new MaterialLoader();\n\n\t\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\n\n\t\t\t\t// convert from old material format\n\n\t\t\t\tvar textures = {};\n\n\t\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\n\n\t\t\t\t\tvar fullPath = texturePath + path;\n\t\t\t\t\tvar loader = Loader.Handlers.get( fullPath );\n\n\t\t\t\t\tvar texture;\n\n\t\t\t\t\tif ( loader !== null ) {\n\n\t\t\t\t\t\ttexture = loader.load( fullPath );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\n\t\t\t\t\t\ttexture = textureLoader.load( fullPath );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( repeat !== undefined ) {\n\n\t\t\t\t\t\ttexture.repeat.fromArray( repeat );\n\n\t\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = RepeatWrapping;\n\t\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = RepeatWrapping;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( offset !== undefined ) {\n\n\t\t\t\t\t\ttexture.offset.fromArray( offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( wrap !== undefined ) {\n\n\t\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = RepeatWrapping;\n\t\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = MirroredRepeatWrapping;\n\n\t\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = RepeatWrapping;\n\t\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = MirroredRepeatWrapping;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( anisotropy !== undefined ) {\n\n\t\t\t\t\t\ttexture.anisotropy = anisotropy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar uuid = _Math.generateUUID();\n\n\t\t\t\t\ttextures[ uuid ] = texture;\n\n\t\t\t\t\treturn uuid;\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tvar json = {\n\t\t\t\t\tuuid: _Math.generateUUID(),\n\t\t\t\t\ttype: 'MeshLambertMaterial'\n\t\t\t\t};\n\n\t\t\t\tfor ( var name in m ) {\n\n\t\t\t\t\tvar value = m[ name ];\n\n\t\t\t\t\tswitch ( name ) {\n\n\t\t\t\t\t\tcase 'DbgColor':\n\t\t\t\t\t\tcase 'DbgIndex':\n\t\t\t\t\t\tcase 'opticalDensity':\n\t\t\t\t\t\tcase 'illumination':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'DbgName':\n\t\t\t\t\t\t\tjson.name = value;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'blending':\n\t\t\t\t\t\t\tjson.blending = BlendingMode[ value ];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'colorAmbient':\n\t\t\t\t\t\tcase 'mapAmbient':\n\t\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'colorDiffuse':\n\t\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'colorSpecular':\n\t\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'colorEmissive':\n\t\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'specularCoef':\n\t\t\t\t\t\t\tjson.shininess = value;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'shading':\n\t\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\n\t\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\n\t\t\t\t\t\t\tif ( value.toLowerCase() === 'standard' ) json.type = 'MeshStandardMaterial';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapDiffuse':\n\t\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapDiffuseRepeat':\n\t\t\t\t\t\tcase 'mapDiffuseOffset':\n\t\t\t\t\t\tcase 'mapDiffuseWrap':\n\t\t\t\t\t\tcase 'mapDiffuseAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapEmissive':\n\t\t\t\t\t\t\tjson.emissiveMap = loadTexture( value, m.mapEmissiveRepeat, m.mapEmissiveOffset, m.mapEmissiveWrap, m.mapEmissiveAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapEmissiveRepeat':\n\t\t\t\t\t\tcase 'mapEmissiveOffset':\n\t\t\t\t\t\tcase 'mapEmissiveWrap':\n\t\t\t\t\t\tcase 'mapEmissiveAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapLight':\n\t\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapLightRepeat':\n\t\t\t\t\t\tcase 'mapLightOffset':\n\t\t\t\t\t\tcase 'mapLightWrap':\n\t\t\t\t\t\tcase 'mapLightAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapAO':\n\t\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapAORepeat':\n\t\t\t\t\t\tcase 'mapAOOffset':\n\t\t\t\t\t\tcase 'mapAOWrap':\n\t\t\t\t\t\tcase 'mapAOAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapBump':\n\t\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapBumpScale':\n\t\t\t\t\t\t\tjson.bumpScale = value;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapBumpRepeat':\n\t\t\t\t\t\tcase 'mapBumpOffset':\n\t\t\t\t\t\tcase 'mapBumpWrap':\n\t\t\t\t\t\tcase 'mapBumpAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapNormal':\n\t\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapNormalFactor':\n\t\t\t\t\t\t\tjson.normalScale = [ value, value ];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapNormalRepeat':\n\t\t\t\t\t\tcase 'mapNormalOffset':\n\t\t\t\t\t\tcase 'mapNormalWrap':\n\t\t\t\t\t\tcase 'mapNormalAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapSpecular':\n\t\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapSpecularRepeat':\n\t\t\t\t\t\tcase 'mapSpecularOffset':\n\t\t\t\t\t\tcase 'mapSpecularWrap':\n\t\t\t\t\t\tcase 'mapSpecularAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapMetalness':\n\t\t\t\t\t\t\tjson.metalnessMap = loadTexture( value, m.mapMetalnessRepeat, m.mapMetalnessOffset, m.mapMetalnessWrap, m.mapMetalnessAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapMetalnessRepeat':\n\t\t\t\t\t\tcase 'mapMetalnessOffset':\n\t\t\t\t\t\tcase 'mapMetalnessWrap':\n\t\t\t\t\t\tcase 'mapMetalnessAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapRoughness':\n\t\t\t\t\t\t\tjson.roughnessMap = loadTexture( value, m.mapRoughnessRepeat, m.mapRoughnessOffset, m.mapRoughnessWrap, m.mapRoughnessAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapRoughnessRepeat':\n\t\t\t\t\t\tcase 'mapRoughnessOffset':\n\t\t\t\t\t\tcase 'mapRoughnessWrap':\n\t\t\t\t\t\tcase 'mapRoughnessAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapAlpha':\n\t\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mapAlphaRepeat':\n\t\t\t\t\t\tcase 'mapAlphaOffset':\n\t\t\t\t\t\tcase 'mapAlphaWrap':\n\t\t\t\t\t\tcase 'mapAlphaAnisotropy':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'flipSided':\n\t\t\t\t\t\t\tjson.side = BackSide;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'doubleSided':\n\t\t\t\t\t\t\tjson.side = DoubleSide;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\n\t\t\t\t\t\t\tjson.opacity = value;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'depthTest':\n\t\t\t\t\t\tcase 'depthWrite':\n\t\t\t\t\t\tcase 'colorWrite':\n\t\t\t\t\t\tcase 'opacity':\n\t\t\t\t\t\tcase 'reflectivity':\n\t\t\t\t\t\tcase 'transparent':\n\t\t\t\t\t\tcase 'visible':\n\t\t\t\t\t\tcase 'wireframe':\n\t\t\t\t\t\t\tjson[ name ] = value;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'vertexColors':\n\t\t\t\t\t\t\tif ( value === true ) json.vertexColors = VertexColors;\n\t\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = FaceColors;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\n\t\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\n\n\t\t\t\tif ( json.opacity < 1 ) json.transparent = true;\n\n\t\t\t\tmaterialLoader.setTextures( textures );\n\n\t\t\t\treturn materialLoader.parse( json );\n\n\t\t\t};\n\n\t\t} )()\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction JSONLoader( manager ) {\n\n\t\tif ( typeof manager === 'boolean' ) {\n\n\t\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\n\t\t\tmanager = undefined;\n\n\t\t}\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t\tthis.withCredentials = false;\n\n\t}\n\n\tObject.assign( JSONLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : Loader.prototype.extractUrlBase( url );\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\tvar json = JSON.parse( text );\n\t\t\t\tvar metadata = json.metadata;\n\n\t\t\t\tif ( metadata !== undefined ) {\n\n\t\t\t\t\tvar type = metadata.type;\n\n\t\t\t\t\tif ( type !== undefined ) {\n\n\t\t\t\t\t\tif ( type.toLowerCase() === 'object' ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( type.toLowerCase() === 'scene' ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar object = scope.parse( json, texturePath );\n\t\t\t\tonLoad( object.geometry, object.materials );\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tsetTexturePath: function ( value ) {\n\n\t\t\tthis.texturePath = value;\n\n\t\t},\n\n\t\tparse: ( function () {\n\n\t\t\tfunction parseModel( json, geometry ) {\n\n\t\t\t\tfunction isBitSet( value, position ) {\n\n\t\t\t\t\treturn value & ( 1 << position );\n\n\t\t\t\t}\n\n\t\t\t\tvar i, j, fi,\n\n\t\t\t\t\toffset, zLength,\n\n\t\t\t\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\n\n\t\t\t\t\ttype,\n\t\t\t\t\tisQuad,\n\t\t\t\t\thasMaterial,\n\t\t\t\t\thasFaceVertexUv,\n\t\t\t\t\thasFaceNormal, hasFaceVertexNormal,\n\t\t\t\t\thasFaceColor, hasFaceVertexColor,\n\n\t\t\t\t\tvertex, face, faceA, faceB, hex, normal,\n\n\t\t\t\t\tuvLayer, uv, u, v,\n\n\t\t\t\t\tfaces = json.faces,\n\t\t\t\t\tvertices = json.vertices,\n\t\t\t\t\tnormals = json.normals,\n\t\t\t\t\tcolors = json.colors,\n\n\t\t\t\t\tscale = json.scale,\n\n\t\t\t\t\tnUvLayers = 0;\n\n\n\t\t\t\tif ( json.uvs !== undefined ) {\n\n\t\t\t\t\t// disregard empty arrays\n\n\t\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\n\n\t\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\toffset = 0;\n\t\t\t\tzLength = vertices.length;\n\n\t\t\t\twhile ( offset < zLength ) {\n\n\t\t\t\t\tvertex = new Vector3();\n\n\t\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\n\t\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\n\t\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\n\n\t\t\t\t\tgeometry.vertices.push( vertex );\n\n\t\t\t\t}\n\n\t\t\t\toffset = 0;\n\t\t\t\tzLength = faces.length;\n\n\t\t\t\twhile ( offset < zLength ) {\n\n\t\t\t\t\ttype = faces[ offset ++ ];\n\n\t\t\t\t\tisQuad = isBitSet( type, 0 );\n\t\t\t\t\thasMaterial = isBitSet( type, 1 );\n\t\t\t\t\thasFaceVertexUv = isBitSet( type, 3 );\n\t\t\t\t\thasFaceNormal = isBitSet( type, 4 );\n\t\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\n\t\t\t\t\thasFaceColor = isBitSet( type, 6 );\n\t\t\t\t\thasFaceVertexColor = isBitSet( type, 7 );\n\n\t\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\n\n\t\t\t\t\tif ( isQuad ) {\n\n\t\t\t\t\t\tfaceA = new Face3();\n\t\t\t\t\t\tfaceA.a = faces[ offset ];\n\t\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\n\t\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\n\n\t\t\t\t\t\tfaceB = new Face3();\n\t\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\n\t\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\n\t\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\n\n\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\n\t\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\n\n\t\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\t\t\tuv = new Vector2( u, v );\n\n\t\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\n\t\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\t\tfaceA.normal.set(\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\t\t\tnormal = new Vector3(\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t\t\t);\n\n\n\t\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\n\t\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\t\tfaceA.color.setHex( hex );\n\t\t\t\t\t\t\tfaceB.color.setHex( hex );\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new Color( hex ) );\n\t\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new Color( hex ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry.faces.push( faceA );\n\t\t\t\t\t\tgeometry.faces.push( faceB );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tface = new Face3();\n\t\t\t\t\t\tface.a = faces[ offset ++ ];\n\t\t\t\t\t\tface.b = faces[ offset ++ ];\n\t\t\t\t\t\tface.c = faces[ offset ++ ];\n\n\t\t\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\n\t\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\t\t\tuv = new Vector2( u, v );\n\n\t\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\t\tface.normal.set(\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\t\t\tnormal = new Vector3(\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tface.vertexNormals.push( normal );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\t\tface.vertexColors.push( new Color( colors[ colorIndex ] ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry.faces.push( face );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction parseSkin( json, geometry ) {\n\n\t\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\n\n\t\t\t\tif ( json.skinWeights ) {\n\n\t\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\t\t\tvar x = json.skinWeights[ i ];\n\t\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\n\t\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\n\t\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\n\n\t\t\t\t\t\tgeometry.skinWeights.push( new Vector4( x, y, z, w ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( json.skinIndices ) {\n\n\t\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\t\t\tvar a = json.skinIndices[ i ];\n\t\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\n\t\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\n\t\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\n\n\t\t\t\t\t\tgeometry.skinIndices.push( new Vector4( a, b, c, d ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.bones = json.bones;\n\n\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\n\n\t\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\n\t\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction parseMorphing( json, geometry ) {\n\n\t\t\t\tvar scale = json.scale;\n\n\t\t\t\tif ( json.morphTargets !== undefined ) {\n\n\t\t\t\t\tfor ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tgeometry.morphTargets[ i ] = {};\n\t\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\n\t\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\n\n\t\t\t\t\t\tvar dstVertices = geometry.morphTargets[ i ].vertices;\n\t\t\t\t\t\tvar srcVertices = json.morphTargets[ i ].vertices;\n\n\t\t\t\t\t\tfor ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\n\n\t\t\t\t\t\t\tvar vertex = new Vector3();\n\t\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\n\t\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\n\t\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\n\n\t\t\t\t\t\t\tdstVertices.push( vertex );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\n\n\t\t\t\t\tvar faces = geometry.faces;\n\t\t\t\t\tvar morphColors = json.morphColors[ 0 ].colors;\n\n\t\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tfaces[ i ].color.fromArray( morphColors, i * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction parseAnimations( json, geometry ) {\n\n\t\t\t\tvar outputAnimations = [];\n\n\t\t\t\t// parse old style Bone/Hierarchy animations\n\t\t\t\tvar animations = [];\n\n\t\t\t\tif ( json.animation !== undefined ) {\n\n\t\t\t\t\tanimations.push( json.animation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( json.animations !== undefined ) {\n\n\t\t\t\t\tif ( json.animations.length ) {\n\n\t\t\t\t\t\tanimations = animations.concat( json.animations );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tanimations.push( json.animations );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0; i < animations.length; i ++ ) {\n\n\t\t\t\t\tvar clip = AnimationClip.parseAnimation( animations[ i ], geometry.bones );\n\t\t\t\t\tif ( clip ) outputAnimations.push( clip );\n\n\t\t\t\t}\n\n\t\t\t\t// parse implicit morph animations\n\t\t\t\tif ( geometry.morphTargets ) {\n\n\t\t\t\t\t// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\n\t\t\t\t\tvar morphAnimationClips = AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\n\t\t\t\t\toutputAnimations = outputAnimations.concat( morphAnimationClips );\n\n\t\t\t\t}\n\n\t\t\t\tif ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\n\n\t\t\t}\n\n\t\t\treturn function ( json, texturePath ) {\n\n\t\t\t\tif ( json.data !== undefined ) {\n\n\t\t\t\t\t// Geometry 4.0 spec\n\t\t\t\t\tjson = json.data;\n\n\t\t\t\t}\n\n\t\t\t\tif ( json.scale !== undefined ) {\n\n\t\t\t\t\tjson.scale = 1.0 / json.scale;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tjson.scale = 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tvar geometry = new Geometry();\n\n\t\t\t\tparseModel( json, geometry );\n\t\t\t\tparseSkin( json, geometry );\n\t\t\t\tparseMorphing( json, geometry );\n\t\t\t\tparseAnimations( json, geometry );\n\n\t\t\t\tgeometry.computeFaceNormals();\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\n\n\t\t\t\t\treturn { geometry: geometry };\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar materials = Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\n\n\t\t\t\t\treturn { geometry: geometry, materials: materials };\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t} )()\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction ObjectLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\t\tthis.texturePath = '';\n\n\t}\n\n\tObject.assign( ObjectLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tif ( this.texturePath === '' ) {\n\n\t\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\n\n\t\t\t}\n\n\t\t\tvar scope = this;\n\n\t\t\tvar loader = new FileLoader( scope.manager );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\tvar json = null;\n\n\t\t\t\ttry {\n\n\t\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tvar metadata = json.metadata;\n\n\t\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url + '. Use THREE.JSONLoader instead.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tscope.parse( json, onLoad );\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tsetTexturePath: function ( value ) {\n\n\t\t\tthis.texturePath = value;\n\n\t\t},\n\n\t\tsetCrossOrigin: function ( value ) {\n\n\t\t\tthis.crossOrigin = value;\n\n\t\t},\n\n\t\tparse: function ( json, onLoad ) {\n\n\t\t\tvar geometries = this.parseGeometries( json.geometries );\n\n\t\t\tvar images = this.parseImages( json.images, function () {\n\n\t\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t\t} );\n\n\t\t\tvar textures = this.parseTextures( json.textures, images );\n\t\t\tvar materials = this.parseMaterials( json.materials, textures );\n\n\t\t\tvar object = this.parseObject( json.object, geometries, materials );\n\n\t\t\tif ( json.animations ) {\n\n\t\t\t\tobject.animations = this.parseAnimations( json.animations );\n\n\t\t\t}\n\n\t\t\tif ( json.images === undefined || json.images.length === 0 ) {\n\n\t\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t\t}\n\n\t\t\treturn object;\n\n\t\t},\n\n\t\tparseGeometries: function ( json ) {\n\n\t\t\tvar geometries = {};\n\n\t\t\tif ( json !== undefined ) {\n\n\t\t\t\tvar geometryLoader = new JSONLoader();\n\t\t\t\tvar bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar geometry;\n\t\t\t\t\tvar data = json[ i ];\n\n\t\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\t\tcase 'PlaneGeometry':\n\t\t\t\t\t\tcase 'PlaneBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\t\tcase 'BoxBufferGeometry':\n\t\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'CircleGeometry':\n\t\t\t\t\t\tcase 'CircleBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'CylinderGeometry':\n\t\t\t\t\t\tcase 'CylinderBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ConeGeometry':\n\t\t\t\t\t\tcase 'ConeBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'SphereGeometry':\n\t\t\t\t\t\tcase 'SphereBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'DodecahedronGeometry':\n\t\t\t\t\t\tcase 'IcosahedronGeometry':\n\t\t\t\t\t\tcase 'OctahedronGeometry':\n\t\t\t\t\t\tcase 'TetrahedronGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'RingGeometry':\n\t\t\t\t\t\tcase 'RingBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.innerRadius,\n\t\t\t\t\t\t\t\tdata.outerRadius,\n\t\t\t\t\t\t\t\tdata.thetaSegments,\n\t\t\t\t\t\t\t\tdata.phiSegments,\n\t\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'TorusGeometry':\n\t\t\t\t\t\tcase 'TorusBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'TorusKnotGeometry':\n\t\t\t\t\t\tcase 'TorusKnotBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\t\tdata.q\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'LatheGeometry':\n\t\t\t\t\t\tcase 'LatheBufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\t\tdata.points,\n\t\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\t\tdata.phiLength\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'BufferGeometry':\n\n\t\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\t\tgeometry = geometryLoader.parse( data, this.texturePath ).geometry;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\n\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\n\t\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn geometries;\n\n\t\t},\n\n\t\tparseMaterials: function ( json, textures ) {\n\n\t\t\tvar materials = {};\n\n\t\t\tif ( json !== undefined ) {\n\n\t\t\t\tvar loader = new MaterialLoader();\n\t\t\t\tloader.setTextures( textures );\n\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar data = json[ i ];\n\n\t\t\t\t\tif ( data.type === 'MultiMaterial' ) {\n\n\t\t\t\t\t\t// Deprecated\n\n\t\t\t\t\t\tvar array = [];\n\n\t\t\t\t\t\tfor ( var j = 0; j < data.materials.length; j ++ ) {\n\n\t\t\t\t\t\t\tarray.push( loader.parse( data.materials[ j ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterials[ data.uuid ] = array;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmaterials[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn materials;\n\n\t\t},\n\n\t\tparseAnimations: function ( json ) {\n\n\t\t\tvar animations = [];\n\n\t\t\tfor ( var i = 0; i < json.length; i ++ ) {\n\n\t\t\t\tvar clip = AnimationClip.parse( json[ i ] );\n\n\t\t\t\tanimations.push( clip );\n\n\t\t\t}\n\n\t\t\treturn animations;\n\n\t\t},\n\n\t\tparseImages: function ( json, onLoad ) {\n\n\t\t\tvar scope = this;\n\t\t\tvar images = {};\n\n\t\t\tfunction loadImage( url ) {\n\n\t\t\t\tscope.manager.itemStart( url );\n\n\t\t\t\treturn loader.load( url, function () {\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, undefined, function () {\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\t\tvar manager = new LoadingManager( onLoad );\n\n\t\t\t\tvar loader = new ImageLoader( manager );\n\t\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar image = json[ i ];\n\t\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\n\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn images;\n\n\t\t},\n\n\t\tparseTextures: function ( json, images ) {\n\n\t\t\tfunction parseConstant( value, type ) {\n\n\t\t\t\tif ( typeof( value ) === 'number' ) return value;\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\t\treturn type[ value ];\n\n\t\t\t}\n\n\t\t\tvar textures = {};\n\n\t\t\tif ( json !== undefined ) {\n\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar data = json[ i ];\n\n\t\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar texture = new Texture( images[ data.image ] );\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\n\t\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn textures;\n\n\t\t},\n\n\t\tparseObject: function () {\n\n\t\t\tvar matrix = new Matrix4();\n\n\t\t\treturn function parseObject( data, geometries, materials ) {\n\n\t\t\t\tvar object;\n\n\t\t\t\tfunction getGeometry( name ) {\n\n\t\t\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn geometries[ name ];\n\n\t\t\t\t}\n\n\t\t\t\tfunction getMaterial( name ) {\n\n\t\t\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\t\t\tvar array = [];\n\n\t\t\t\t\t\tfor ( var i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar uuid = name[ i ];\n\n\t\t\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn array;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn materials[ name ];\n\n\t\t\t\t}\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'Scene':\n\n\t\t\t\t\t\tobject = new Scene();\n\n\t\t\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'AmbientLight':\n\n\t\t\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DirectionalLight':\n\n\t\t\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PointLight':\n\n\t\t\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RectAreaLight':\n\n\t\t\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SpotLight':\n\n\t\t\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'HemisphereLight':\n\n\t\t\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\n\n\t\t\t\t\tcase 'Mesh':\n\n\t\t\t\t\t\tvar geometry = getGeometry( data.geometry );\n\t\t\t\t\t\tvar material = getMaterial( data.material );\n\n\t\t\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 ) {\n\n\t\t\t\t\t\t\tobject = new SkinnedMesh( geometry, material );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LOD':\n\n\t\t\t\t\t\tobject = new LOD();\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Line':\n\n\t\t\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LineLoop':\n\n\t\t\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LineSegments':\n\n\t\t\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PointCloud':\n\t\t\t\t\tcase 'Points':\n\n\t\t\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Sprite':\n\n\t\t\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Group':\n\n\t\t\t\t\t\tobject = new Group();\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tobject = new Object3D();\n\n\t\t\t\t}\n\n\t\t\t\tobject.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) object.name = data.name;\n\t\t\t\tif ( data.matrix !== undefined ) {\n\n\t\t\t\t\tmatrix.fromArray( data.matrix );\n\t\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\t\t\tif ( data.shadow ) {\n\n\t\t\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\n\t\t\t\tif ( data.children !== undefined ) {\n\n\t\t\t\t\tfor ( var child in data.children ) {\n\n\t\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.type === 'LOD' ) {\n\n\t\t\t\t\tvar levels = data.levels;\n\n\t\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\t\t\tvar level = levels[ l ];\n\t\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn object;\n\n\t\t\t};\n\n\t\t}()\n\n\t} );\n\n\tvar TEXTURE_MAPPING = {\n\t\tUVMapping: UVMapping,\n\t\tCubeReflectionMapping: CubeReflectionMapping,\n\t\tCubeRefractionMapping: CubeRefractionMapping,\n\t\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\t\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\t\tSphericalReflectionMapping: SphericalReflectionMapping,\n\t\tCubeUVReflectionMapping: CubeUVReflectionMapping,\n\t\tCubeUVRefractionMapping: CubeUVRefractionMapping\n\t};\n\n\tvar TEXTURE_WRAPPING = {\n\t\tRepeatWrapping: RepeatWrapping,\n\t\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\t\tMirroredRepeatWrapping: MirroredRepeatWrapping\n\t};\n\n\tvar TEXTURE_FILTER = {\n\t\tNearestFilter: NearestFilter,\n\t\tNearestMipMapNearestFilter: NearestMipMapNearestFilter,\n\t\tNearestMipMapLinearFilter: NearestMipMapLinearFilter,\n\t\tLinearFilter: LinearFilter,\n\t\tLinearMipMapNearestFilter: LinearMipMapNearestFilter,\n\t\tLinearMipMapLinearFilter: LinearMipMapLinearFilter\n\t};\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t *\n\t * Bezier Curves formulas obtained from\n\t * http://en.wikipedia.org/wiki/Bzier_curve\n\t */\n\n\tfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\n\t\tvar t2 = t * t;\n\t\tvar t3 = t * t2;\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t}\n\n\t//\n\n\tfunction QuadraticBezierP0( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn k * k * p;\n\n\t}\n\n\tfunction QuadraticBezierP1( t, p ) {\n\n\t\treturn 2 * ( 1 - t ) * t * p;\n\n\t}\n\n\tfunction QuadraticBezierP2( t, p ) {\n\n\t\treturn t * t * p;\n\n\t}\n\n\tfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\t\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\t\tQuadraticBezierP2( t, p2 );\n\n\t}\n\n\t//\n\n\tfunction CubicBezierP0( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn k * k * k * p;\n\n\t}\n\n\tfunction CubicBezierP1( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn 3 * k * k * t * p;\n\n\t}\n\n\tfunction CubicBezierP2( t, p ) {\n\n\t\treturn 3 * ( 1 - t ) * t * t * p;\n\n\t}\n\n\tfunction CubicBezierP3( t, p ) {\n\n\t\treturn t * t * t * p;\n\n\t}\n\n\tfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\t\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\t\tCubicBezierP3( t, p3 );\n\n\t}\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t * Extensible curve object\n\t *\n\t * Some common of curve methods:\n\t * .getPoint(t), getTangent(t)\n\t * .getPointAt(u), getTangentAt(u)\n\t * .getPoints(), .getSpacedPoints()\n\t * .getLength()\n\t * .updateArcLengths()\n\t *\n\t * This following curves inherit from THREE.Curve:\n\t *\n\t * -- 2D curves --\n\t * THREE.ArcCurve\n\t * THREE.CubicBezierCurve\n\t * THREE.EllipseCurve\n\t * THREE.LineCurve\n\t * THREE.QuadraticBezierCurve\n\t * THREE.SplineCurve\n\t *\n\t * -- 3D curves --\n\t * THREE.CatmullRomCurve3\n\t * THREE.CubicBezierCurve3\n\t * THREE.LineCurve3\n\t * THREE.QuadraticBezierCurve3\n\t *\n\t * A series of curves can be represented as a THREE.CurvePath.\n\t *\n\t **/\n\n\t/**************************************************************\n\t *\tAbstract Curve base class\n\t **************************************************************/\n\n\tfunction Curve() {\n\n\t\tthis.arcLengthDivisions = 200;\n\n\t}\n\n\tObject.assign( Curve.prototype, {\n\n\t\t// Virtual base class method to overwrite and implement in subclasses\n\t\t//\t- t [0 .. 1]\n\n\t\tgetPoint: function () {\n\n\t\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\t\treturn null;\n\n\t\t},\n\n\t\t// Get point at relative position in curve according to arc length\n\t\t// - u [0 .. 1]\n\n\t\tgetPointAt: function ( u ) {\n\n\t\t\tvar t = this.getUtoTmapping( u );\n\t\t\treturn this.getPoint( t );\n\n\t\t},\n\n\t\t// Get sequence of points using getPoint( t )\n\n\t\tgetPoints: function ( divisions ) {\n\n\t\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\t\tvar points = [];\n\n\t\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t\t}\n\n\t\t\treturn points;\n\n\t\t},\n\n\t\t// Get sequence of points using getPointAt( u )\n\n\t\tgetSpacedPoints: function ( divisions ) {\n\n\t\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\t\tvar points = [];\n\n\t\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t\t}\n\n\t\t\treturn points;\n\n\t\t},\n\n\t\t// Get total curve arc length\n\n\t\tgetLength: function () {\n\n\t\t\tvar lengths = this.getLengths();\n\t\t\treturn lengths[ lengths.length - 1 ];\n\n\t\t},\n\n\t\t// Get list of cumulative segment lengths\n\n\t\tgetLengths: function ( divisions ) {\n\n\t\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\t\tif ( this.cacheArcLengths &&\n\t\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t\t! this.needsUpdate ) {\n\n\t\t\t\treturn this.cacheArcLengths;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = false;\n\n\t\t\tvar cache = [];\n\t\t\tvar current, last = this.getPoint( 0 );\n\t\t\tvar p, sum = 0;\n\n\t\t\tcache.push( 0 );\n\n\t\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\t\tsum += current.distanceTo( last );\n\t\t\t\tcache.push( sum );\n\t\t\t\tlast = current;\n\n\t\t\t}\n\n\t\t\tthis.cacheArcLengths = cache;\n\n\t\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t\t},\n\n\t\tupdateArcLengths: function () {\n\n\t\t\tthis.needsUpdate = true;\n\t\t\tthis.getLengths();\n\n\t\t},\n\n\t\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\t\tgetUtoTmapping: function ( u, distance ) {\n\n\t\t\tvar arcLengths = this.getLengths();\n\n\t\t\tvar i = 0, il = arcLengths.length;\n\n\t\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\t\tif ( distance ) {\n\n\t\t\t\ttargetArcLength = distance;\n\n\t\t\t} else {\n\n\t\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t\t}\n\n\t\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\t\tvar low = 0, high = il - 1, comparison;\n\n\t\t\twhile ( low <= high ) {\n\n\t\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\t\tlow = i + 1;\n\n\t\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\t\thigh = i - 1;\n\n\t\t\t\t} else {\n\n\t\t\t\t\thigh = i;\n\t\t\t\t\tbreak;\n\n\t\t\t\t\t// DONE\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ti = high;\n\n\t\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\t\treturn i / ( il - 1 );\n\n\t\t\t}\n\n\t\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\t\tvar lengthBefore = arcLengths[ i ];\n\t\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t\t// determine where we are between the 'before' and 'after' points\n\n\t\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t\t// add that fractional amount to t\n\n\t\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\t\treturn t;\n\n\t\t},\n\n\t\t// Returns a unit vector tangent at t\n\t\t// In case any sub curve does not implement its tangent derivation,\n\t\t// 2 points a small delta apart will be used to find its gradient\n\t\t// which seems to give a reasonable approximation\n\n\t\tgetTangent: function ( t ) {\n\n\t\t\tvar delta = 0.0001;\n\t\t\tvar t1 = t - delta;\n\t\t\tvar t2 = t + delta;\n\n\t\t\t// Capping in case of danger\n\n\t\t\tif ( t1 < 0 ) t1 = 0;\n\t\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\t\tvar pt1 = this.getPoint( t1 );\n\t\t\tvar pt2 = this.getPoint( t2 );\n\n\t\t\tvar vec = pt2.clone().sub( pt1 );\n\t\t\treturn vec.normalize();\n\n\t\t},\n\n\t\tgetTangentAt: function ( u ) {\n\n\t\t\tvar t = this.getUtoTmapping( u );\n\t\t\treturn this.getTangent( t );\n\n\t\t},\n\n\t\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\t\tvar normal = new Vector3();\n\n\t\t\tvar tangents = [];\n\t\t\tvar normals = [];\n\t\t\tvar binormals = [];\n\n\t\t\tvar vec = new Vector3();\n\t\t\tvar mat = new Matrix4();\n\n\t\t\tvar i, u, theta;\n\n\t\t\t// compute the tangent vectors for each segment on the curve\n\n\t\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\t\tu = i / segments;\n\n\t\t\t\ttangents[ i ] = this.getTangentAt( u );\n\t\t\t\ttangents[ i ].normalize();\n\n\t\t\t}\n\n\t\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t\t// and in the direction of the minimum tangent xyz component\n\n\t\t\tnormals[ 0 ] = new Vector3();\n\t\t\tbinormals[ 0 ] = new Vector3();\n\t\t\tvar min = Number.MAX_VALUE;\n\t\t\tvar tx = Math.abs( tangents[ 0 ].x );\n\t\t\tvar ty = Math.abs( tangents[ 0 ].y );\n\t\t\tvar tz = Math.abs( tangents[ 0 ].z );\n\n\t\t\tif ( tx <= min ) {\n\n\t\t\t\tmin = tx;\n\t\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( ty <= min ) {\n\n\t\t\t\tmin = ty;\n\t\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t\t}\n\n\t\t\tif ( tz <= min ) {\n\n\t\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t\t}\n\n\t\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\t\tvec.normalize();\n\n\t\t\t\t\ttheta = Math.acos( _Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t\t}\n\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\t\tif ( closed === true ) {\n\n\t\t\t\ttheta = Math.acos( _Math.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\t\ttheta /= segments;\n\n\t\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\t\ttheta = - theta;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t\t// twist a little...\n\t\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttangents: tangents,\n\t\t\t\tnormals: normals,\n\t\t\t\tbinormals: binormals\n\t\t\t};\n\n\t\t}\n\n\t} );\n\n\tfunction LineCurve( v1, v2 ) {\n\n\t\tCurve.call( this );\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tLineCurve.prototype = Object.create( Curve.prototype );\n\tLineCurve.prototype.constructor = LineCurve;\n\n\tLineCurve.prototype.isLineCurve = true;\n\n\tLineCurve.prototype.getPoint = function ( t ) {\n\n\t\tif ( t === 1 ) {\n\n\t\t\treturn this.v2.clone();\n\n\t\t}\n\n\t\tvar point = this.v2.clone().sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\treturn point;\n\n\t};\n\n\t// Line curve is linear, so we can overwrite default getPointAt\n\n\tLineCurve.prototype.getPointAt = function ( u ) {\n\n\t\treturn this.getPoint( u );\n\n\t};\n\n\tLineCurve.prototype.getTangent = function ( t ) {\n\n\t\tvar tangent = this.v2.clone().sub( this.v1 );\n\n\t\treturn tangent.normalize();\n\n\t};\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t *\n\t **/\n\n\t/**************************************************************\n\t *\tCurved Path - a curve path is simply a array of connected\n\t *  curves, but retains the api of a curve\n\t **************************************************************/\n\n\tfunction CurvePath() {\n\n\t\tCurve.call( this );\n\n\t\tthis.curves = [];\n\n\t\tthis.autoClose = false; // Automatically closes the path\n\n\t}\n\n\tCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\t\tconstructor: CurvePath,\n\n\t\tadd: function ( curve ) {\n\n\t\t\tthis.curves.push( curve );\n\n\t\t},\n\n\t\tclosePath: function () {\n\n\t\t\t// Add a line curve if start and end of lines are not connected\n\t\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// To get accurate point with reference to\n\t\t// entire path distance at time t,\n\t\t// following has to be done:\n\n\t\t// 1. Length of each sub path have to be known\n\t\t// 2. Locate and identify type of curve\n\t\t// 3. Get t for the curve\n\t\t// 4. Return curve.getPointAt(t')\n\n\t\tgetPoint: function ( t ) {\n\n\t\t\tvar d = t * this.getLength();\n\t\t\tvar curveLengths = this.getCurveLengths();\n\t\t\tvar i = 0;\n\n\t\t\t// To think about boundaries points.\n\n\t\t\twhile ( i < curveLengths.length ) {\n\n\t\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\t\tvar diff = curveLengths[ i ] - d;\n\t\t\t\t\tvar curve = this.curves[ i ];\n\n\t\t\t\t\tvar segmentLength = curve.getLength();\n\t\t\t\t\tvar u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t\t}\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t\t},\n\n\t\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t\t// getPoint() depends on getLength\n\n\t\tgetLength: function () {\n\n\t\t\tvar lens = this.getCurveLengths();\n\t\t\treturn lens[ lens.length - 1 ];\n\n\t\t},\n\n\t\t// cacheLengths must be recalculated.\n\t\tupdateArcLengths: function () {\n\n\t\t\tthis.needsUpdate = true;\n\t\t\tthis.cacheLengths = null;\n\t\t\tthis.getCurveLengths();\n\n\t\t},\n\n\t\t// Compute lengths and cache them\n\t\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\t\tgetCurveLengths: function () {\n\n\t\t\t// We use cache values if curves and cache array are same length\n\n\t\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\t\treturn this.cacheLengths;\n\n\t\t\t}\n\n\t\t\t// Get length of sub-curve\n\t\t\t// Push sums into cached array\n\n\t\t\tvar lengths = [], sums = 0;\n\n\t\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\t\tsums += this.curves[ i ].getLength();\n\t\t\t\tlengths.push( sums );\n\n\t\t\t}\n\n\t\t\tthis.cacheLengths = lengths;\n\n\t\t\treturn lengths;\n\n\t\t},\n\n\t\tgetSpacedPoints: function ( divisions ) {\n\n\t\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\t\tvar points = [];\n\n\t\t\tfor ( var i = 0; i <= divisions; i ++ ) {\n\n\t\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t\t}\n\n\t\t\tif ( this.autoClose ) {\n\n\t\t\t\tpoints.push( points[ 0 ] );\n\n\t\t\t}\n\n\t\t\treturn points;\n\n\t\t},\n\n\t\tgetPoints: function ( divisions ) {\n\n\t\t\tdivisions = divisions || 12;\n\n\t\t\tvar points = [], last;\n\n\t\t\tfor ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\t\tvar curve = curves[ i ];\n\t\t\t\tvar resolution = (curve && curve.isEllipseCurve) ? divisions * 2\n\t\t\t\t\t: (curve && curve.isLineCurve) ? 1\n\t\t\t\t\t: (curve && curve.isSplineCurve) ? divisions * curve.points.length\n\t\t\t\t\t: divisions;\n\n\t\t\t\tvar pts = curve.getPoints( resolution );\n\n\t\t\t\tfor ( var j = 0; j < pts.length; j++ ) {\n\n\t\t\t\t\tvar point = pts[ j ];\n\n\t\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\t\tpoints.push( point );\n\t\t\t\t\tlast = point;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.autoClose && points.length > 1 && !points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\t\tpoints.push( points[ 0 ] );\n\n\t\t\t}\n\n\t\t\treturn points;\n\n\t\t},\n\n\t\t/**************************************************************\n\t\t *\tCreate Geometries Helpers\n\t\t **************************************************************/\n\n\t\t/// Generate geometry from path points (for Line or Points objects)\n\n\t\tcreatePointsGeometry: function ( divisions ) {\n\n\t\t\tvar pts = this.getPoints( divisions );\n\t\t\treturn this.createGeometry( pts );\n\n\t\t},\n\n\t\t// Generate geometry from equidistant sampling along the path\n\n\t\tcreateSpacedPointsGeometry: function ( divisions ) {\n\n\t\t\tvar pts = this.getSpacedPoints( divisions );\n\t\t\treturn this.createGeometry( pts );\n\n\t\t},\n\n\t\tcreateGeometry: function ( points ) {\n\n\t\t\tvar geometry = new Geometry();\n\n\t\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\t\tvar point = points[ i ];\n\t\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t\t}\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t} );\n\n\tfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tCurve.call( this );\n\n\t\tthis.aX = aX;\n\t\tthis.aY = aY;\n\n\t\tthis.xRadius = xRadius;\n\t\tthis.yRadius = yRadius;\n\n\t\tthis.aStartAngle = aStartAngle;\n\t\tthis.aEndAngle = aEndAngle;\n\n\t\tthis.aClockwise = aClockwise;\n\n\t\tthis.aRotation = aRotation || 0;\n\n\t}\n\n\tEllipseCurve.prototype = Object.create( Curve.prototype );\n\tEllipseCurve.prototype.constructor = EllipseCurve;\n\n\tEllipseCurve.prototype.isEllipseCurve = true;\n\n\tEllipseCurve.prototype.getPoint = function ( t ) {\n\n\t\tvar twoPi = Math.PI * 2;\n\t\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\t\tvar samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t\t// ensures that deltaAngle is 0 .. 2 PI\n\t\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\t\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\t\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\t\tif ( samePoints ) {\n\n\t\t\t\tdeltaAngle = 0;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\t\tdeltaAngle = - twoPi;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar angle = this.aStartAngle + t * deltaAngle;\n\t\tvar x = this.aX + this.xRadius * Math.cos( angle );\n\t\tvar y = this.aY + this.yRadius * Math.sin( angle );\n\n\t\tif ( this.aRotation !== 0 ) {\n\n\t\t\tvar cos = Math.cos( this.aRotation );\n\t\t\tvar sin = Math.sin( this.aRotation );\n\n\t\t\tvar tx = x - this.aX;\n\t\t\tvar ty = y - this.aY;\n\n\t\t\t// Rotate the point about the center of the ellipse.\n\t\t\tx = tx * cos - ty * sin + this.aX;\n\t\t\ty = tx * sin + ty * cos + this.aY;\n\n\t\t}\n\n\t\treturn new Vector2( x, y );\n\n\t};\n\n\tfunction SplineCurve( points /* array of Vector2 */ ) {\n\n\t\tCurve.call( this );\n\n\t\tthis.points = ( points === undefined ) ? [] : points;\n\n\t}\n\n\tSplineCurve.prototype = Object.create( Curve.prototype );\n\tSplineCurve.prototype.constructor = SplineCurve;\n\n\tSplineCurve.prototype.isSplineCurve = true;\n\n\tSplineCurve.prototype.getPoint = function ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar point = ( points.length - 1 ) * t;\n\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\t\tvar point1 = points[ intPoint ];\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\treturn new Vector2(\n\t\t\tCatmullRom( weight, point0.x, point1.x, point2.x, point3.x ),\n\t\t\tCatmullRom( weight, point0.y, point1.y, point2.y, point3.y )\n\t\t);\n\n\t};\n\n\tfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\t\tCurve.call( this );\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tCubicBezierCurve.prototype = Object.create( Curve.prototype );\n\tCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\n\tCubicBezierCurve.prototype.getPoint = function ( t ) {\n\n\t\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\treturn new Vector2(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t\t);\n\n\t};\n\n\tfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\t\tCurve.call( this );\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\n\tQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\n\tQuadraticBezierCurve.prototype.getPoint = function ( t ) {\n\n\t\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\treturn new Vector2(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t\t);\n\n\t};\n\n\tvar PathPrototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\t\tfromPoints: function ( vectors ) {\n\n\t\t\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\n\n\t\t\tfor ( var i = 1, l = vectors.length; i < l; i ++ ) {\n\n\t\t\t\tthis.lineTo( vectors[ i ].x, vectors[ i ].y );\n\n\t\t\t}\n\n\t\t},\n\n\t\tmoveTo: function ( x, y ) {\n\n\t\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\t},\n\n\t\tlineTo: function ( x, y ) {\n\n\t\t\tvar curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\t\tthis.curves.push( curve );\n\n\t\t\tthis.currentPoint.set( x, y );\n\n\t\t},\n\n\t\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\t\tvar curve = new QuadraticBezierCurve(\n\t\t\t\tthis.currentPoint.clone(),\n\t\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\t\tnew Vector2( aX, aY )\n\t\t\t);\n\n\t\t\tthis.curves.push( curve );\n\n\t\t\tthis.currentPoint.set( aX, aY );\n\n\t\t},\n\n\t\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\t\tvar curve = new CubicBezierCurve(\n\t\t\t\tthis.currentPoint.clone(),\n\t\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\t\tnew Vector2( aX, aY )\n\t\t\t);\n\n\t\t\tthis.curves.push( curve );\n\n\t\t\tthis.currentPoint.set( aX, aY );\n\n\t\t},\n\n\t\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\t\tvar npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\t\tvar curve = new SplineCurve( npts );\n\t\t\tthis.curves.push( curve );\n\n\t\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\t},\n\n\t\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\t\tvar x0 = this.currentPoint.x;\n\t\t\tvar y0 = this.currentPoint.y;\n\n\t\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\t},\n\n\t\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\t},\n\n\t\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\t\tvar x0 = this.currentPoint.x;\n\t\t\tvar y0 = this.currentPoint.y;\n\n\t\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\t},\n\n\t\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\t\tvar curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t\t// if a previous curve is present, attempt to join\n\t\t\t\tvar firstPoint = curve.getPoint( 0 );\n\n\t\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.curves.push( curve );\n\n\t\t\tvar lastPoint = curve.getPoint( 1 );\n\t\t\tthis.currentPoint.copy( lastPoint );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t * Creates free form 2d path using series of points, lines or curves.\n\t **/\n\n\tfunction Path( points ) {\n\n\t\tCurvePath.call( this );\n\t\tthis.currentPoint = new Vector2();\n\n\t\tif ( points ) {\n\n\t\t\tthis.fromPoints( points );\n\n\t\t}\n\n\t}\n\n\tPath.prototype = PathPrototype;\n\tPathPrototype.constructor = Path;\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t * Defines a 2d shape plane using paths.\n\t **/\n\n\t// STEP 1 Create a path.\n\t// STEP 2 Turn path into shape.\n\t// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n\t// STEP 3a - Extract points from each shape, turn to vertices\n\t// STEP 3b - Triangulate each shape, add faces.\n\n\tfunction Shape() {\n\n\t\tPath.apply( this, arguments );\n\n\t\tthis.holes = [];\n\n\t}\n\n\tShape.prototype = Object.assign( Object.create( PathPrototype ), {\n\n\t\tconstructor: Shape,\n\n\t\tgetPointsHoles: function ( divisions ) {\n\n\t\t\tvar holesPts = [];\n\n\t\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t\t}\n\n\t\t\treturn holesPts;\n\n\t\t},\n\n\t\t// Get points of shape and holes (keypoints based on segments parameter)\n\n\t\textractAllPoints: function ( divisions ) {\n\n\t\t\treturn {\n\n\t\t\t\tshape: this.getPoints( divisions ),\n\t\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t\t};\n\n\t\t},\n\n\t\textractPoints: function ( divisions ) {\n\n\t\t\treturn this.extractAllPoints( divisions );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n\t **/\n\n\tfunction ShapePath() {\n\n\t\tthis.subPaths = [];\n\t\tthis.currentPath = null;\n\n\t}\n\n\tObject.assign( ShapePath.prototype, {\n\n\t\tmoveTo: function ( x, y ) {\n\n\t\t\tthis.currentPath = new Path();\n\t\t\tthis.subPaths.push( this.currentPath );\n\t\t\tthis.currentPath.moveTo( x, y );\n\n\t\t},\n\n\t\tlineTo: function ( x, y ) {\n\n\t\t\tthis.currentPath.lineTo( x, y );\n\n\t\t},\n\n\t\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\t},\n\n\t\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\t},\n\n\t\tsplineThru: function ( pts ) {\n\n\t\t\tthis.currentPath.splineThru( pts );\n\n\t\t},\n\n\t\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\t\tvar shapes = [];\n\n\t\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\t\t\tvar tmpShape = new Shape();\n\t\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t\t}\n\n\t\t\t\treturn shapes;\n\n\t\t\t}\n\n\t\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\t\tvar polyLen = inPolygon.length;\n\n\t\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\t\tvar inside = false;\n\t\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\t\tvar edgeLowPt  = inPolygon[ p ];\n\t\t\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t\t// not parallel\n\t\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// parallel or collinear\n\t\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t\t// continue;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn\tinside;\n\n\t\t\t}\n\n\t\t\tvar isClockWise = ShapeUtils.isClockWise;\n\n\t\t\tvar subPaths = this.subPaths;\n\t\t\tif ( subPaths.length === 0 ) return [];\n\n\t\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\t\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\t\t\tif ( subPaths.length === 1 ) {\n\n\t\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\t\ttmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\t\tshapes.push( tmpShape );\n\t\t\t\treturn shapes;\n\n\t\t\t}\n\n\t\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\t\tvar betterShapeHoles = [];\n\t\t\tvar newShapes = [];\n\t\t\tvar newShapeHoles = [];\n\t\t\tvar mainIdx = 0;\n\t\t\tvar tmpPoints;\n\n\t\t\tnewShapes[ mainIdx ] = undefined;\n\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\t\ttmpPath = subPaths[ i ];\n\t\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\t\tif ( solid ) {\n\n\t\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t\t//console.log('cw', i);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t\t//console.log('ccw', i);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\t\tif ( newShapes.length > 1 ) {\n\n\t\t\t\tvar ambiguous = false;\n\t\t\t\tvar toChange = [];\n\n\t\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\t\tvar sho = newShapeHoles[ sIdx ];\n\n\t\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\t\tvar ho = sho[ hIdx ];\n\t\t\t\t\t\tvar hole_unassigned = true;\n\n\t\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\t\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar tmpHoles;\n\n\t\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\t\tshapes.push( tmpShape );\n\t\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//console.log(\"shape\", shapes);\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Font( data ) {\n\n\t\tthis.data = data;\n\n\t}\n\n\tObject.assign( Font.prototype, {\n\n\t\tisFont: true,\n\n\t\tgenerateShapes: function ( text, size, divisions ) {\n\n\t\t\tfunction createPaths( text ) {\n\n\t\t\t\tvar chars = String( text ).split( '' );\n\t\t\t\tvar scale = size / data.resolution;\n\t\t\t\tvar line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\t\t\t\tvar offsetX = 0, offsetY = 0;\n\n\t\t\t\tvar paths = [];\n\n\t\t\t\tfor ( var i = 0; i < chars.length; i ++ ) {\n\n\t\t\t\t\tvar char = chars[ i ];\n\n\t\t\t\t\tif ( char === '\\n' ) {\n\n\t\t\t\t\t\toffsetX = 0;\n\t\t\t\t\t\toffsetY -= line_height;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar ret = createPath( char, scale, offsetX, offsetY );\n\t\t\t\t\t\toffsetX += ret.offsetX;\n\t\t\t\t\t\tpaths.push( ret.path );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn paths;\n\n\t\t\t}\n\n\t\t\tfunction createPath( c, scale, offsetX, offsetY ) {\n\n\t\t\t\tvar glyph = data.glyphs[ c ] || data.glyphs[ '?' ];\n\n\t\t\t\tif ( ! glyph ) return;\n\n\t\t\t\tvar path = new ShapePath();\n\n\t\t\t\tvar pts = [];\n\t\t\t\tvar x, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2, laste;\n\n\t\t\t\tif ( glyph.o ) {\n\n\t\t\t\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\t\t\t\tfor ( var i = 0, l = outline.length; i < l; ) {\n\n\t\t\t\t\t\tvar action = outline[ i ++ ];\n\n\t\t\t\t\t\tswitch ( action ) {\n\n\t\t\t\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\t\t\t\tQuadraticBezier( t, cpx0, cpx1, cpx );\n\t\t\t\t\t\t\t\t\t\tQuadraticBezier( t, cpy0, cpy1, cpy );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\t\t\t\tCubicBezier( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\t\t\t\t\t\t\tCubicBezier( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn { offsetX: glyph.ha * scale, path: path };\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( size === undefined ) size = 100;\n\t\t\tif ( divisions === undefined ) divisions = 4;\n\n\t\t\tvar data = this.data;\n\n\t\t\tvar paths = createPaths( text );\n\t\t\tvar shapes = [];\n\n\t\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction FontLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t}\n\n\tObject.assign( FontLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\t\t\tloader.load( url, function ( text ) {\n\n\t\t\t\tvar json;\n\n\t\t\t\ttry {\n\n\t\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t\t}\n\n\t\t\t\tvar font = scope.parse( json );\n\n\t\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tparse: function ( json ) {\n\n\t\t\treturn new Font( json );\n\n\t\t}\n\n\t} );\n\n\tvar context;\n\n\tvar AudioContext = {\n\n\t\tgetContext: function () {\n\n\t\t\tif ( context === undefined ) {\n\n\t\t\t\tcontext = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t\t}\n\n\t\t\treturn context;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * @author Reece Aaron Lecrivain / http://reecenotes.com/\n\t */\n\n\tfunction AudioLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t}\n\n\tObject.assign( AudioLoader.prototype, {\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tvar context = AudioContext.getContext();\n\n\t\t\t\tcontext.decodeAudioData( buffer, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction StereoCamera() {\n\n\t\tthis.type = 'StereoCamera';\n\n\t\tthis.aspect = 1;\n\n\t\tthis.eyeSep = 0.064;\n\n\t\tthis.cameraL = new PerspectiveCamera();\n\t\tthis.cameraL.layers.enable( 1 );\n\t\tthis.cameraL.matrixAutoUpdate = false;\n\n\t\tthis.cameraR = new PerspectiveCamera();\n\t\tthis.cameraR.layers.enable( 2 );\n\t\tthis.cameraR.matrixAutoUpdate = false;\n\n\t}\n\n\tObject.assign( StereoCamera.prototype, {\n\n\t\tupdate: ( function () {\n\n\t\t\tvar instance, focus, fov, aspect, near, far, zoom, eyeSep;\n\n\t\t\tvar eyeRight = new Matrix4();\n\t\t\tvar eyeLeft = new Matrix4();\n\n\t\t\treturn function update( camera ) {\n\n\t\t\t\tvar needsUpdate = instance !== this || focus !== camera.focus || fov !== camera.fov ||\n\t\t\t\t\t\t\t\t\t\t\t\t\taspect !== camera.aspect * this.aspect || near !== camera.near ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tfar !== camera.far || zoom !== camera.zoom || eyeSep !== this.eyeSep;\n\n\t\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t\tinstance = this;\n\t\t\t\t\tfocus = camera.focus;\n\t\t\t\t\tfov = camera.fov;\n\t\t\t\t\taspect = camera.aspect * this.aspect;\n\t\t\t\t\tnear = camera.near;\n\t\t\t\t\tfar = camera.far;\n\t\t\t\t\tzoom = camera.zoom;\n\n\t\t\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\t\t\tvar projectionMatrix = camera.projectionMatrix.clone();\n\t\t\t\t\teyeSep = this.eyeSep / 2;\n\t\t\t\t\tvar eyeSepOnProjection = eyeSep * near / focus;\n\t\t\t\t\tvar ymax = ( near * Math.tan( _Math.DEG2RAD * fov * 0.5 ) ) / zoom;\n\t\t\t\t\tvar xmin, xmax;\n\n\t\t\t\t\t// translate xOffset\n\n\t\t\t\t\teyeLeft.elements[ 12 ] = - eyeSep;\n\t\t\t\t\teyeRight.elements[ 12 ] = eyeSep;\n\n\t\t\t\t\t// for left eye\n\n\t\t\t\t\txmin = - ymax * aspect + eyeSepOnProjection;\n\t\t\t\t\txmax = ymax * aspect + eyeSepOnProjection;\n\n\t\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\n\t\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t\t\t// for right eye\n\n\t\t\t\t\txmin = - ymax * aspect - eyeSepOnProjection;\n\t\t\t\t\txmax = ymax * aspect - eyeSepOnProjection;\n\n\t\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\n\t\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\n\t\t\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\n\n\t\t\t};\n\n\t\t} )()\n\n\t} );\n\n\t/**\n\t * Camera for rendering cube maps\n\t *\t- renders scene into axis-aligned cube\n\t *\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction CubeCamera( near, far, cubeResolution ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'CubeCamera';\n\n\t\tvar fov = 90, aspect = 1;\n\n\t\tvar cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPX.up.set( 0, - 1, 0 );\n\t\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\t\tthis.add( cameraPX );\n\n\t\tvar cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNX.up.set( 0, - 1, 0 );\n\t\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\t\tthis.add( cameraNX );\n\n\t\tvar cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPY.up.set( 0, 0, 1 );\n\t\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\t\tthis.add( cameraPY );\n\n\t\tvar cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNY.up.set( 0, 0, - 1 );\n\t\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\t\tthis.add( cameraNY );\n\n\t\tvar cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPZ.up.set( 0, - 1, 0 );\n\t\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\t\tthis.add( cameraPZ );\n\n\t\tvar cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNZ.up.set( 0, - 1, 0 );\n\t\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\t\tthis.add( cameraNZ );\n\n\t\tvar options = { format: RGBFormat, magFilter: LinearFilter, minFilter: LinearFilter };\n\n\t\tthis.renderTarget = new WebGLRenderTargetCube( cubeResolution, cubeResolution, options );\n\t\tthis.renderTarget.texture.name = \"CubeCamera\";\n\n\t\tthis.updateCubeMap = function ( renderer, scene ) {\n\n\t\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\t\tvar renderTarget = this.renderTarget;\n\t\t\tvar generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\t\trenderTarget.activeCubeFace = 0;\n\t\t\trenderer.render( scene, cameraPX, renderTarget );\n\n\t\t\trenderTarget.activeCubeFace = 1;\n\t\t\trenderer.render( scene, cameraNX, renderTarget );\n\n\t\t\trenderTarget.activeCubeFace = 2;\n\t\t\trenderer.render( scene, cameraPY, renderTarget );\n\n\t\t\trenderTarget.activeCubeFace = 3;\n\t\t\trenderer.render( scene, cameraNY, renderTarget );\n\n\t\t\trenderTarget.activeCubeFace = 4;\n\t\t\trenderer.render( scene, cameraPZ, renderTarget );\n\n\t\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\t\trenderTarget.activeCubeFace = 5;\n\t\t\trenderer.render( scene, cameraNZ, renderTarget );\n\n\t\t\trenderer.setRenderTarget( null );\n\n\t\t};\n\n\t}\n\n\tCubeCamera.prototype = Object.create( Object3D.prototype );\n\tCubeCamera.prototype.constructor = CubeCamera;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction AudioListener() {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'AudioListener';\n\n\t\tthis.context = AudioContext.getContext();\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( this.context.destination );\n\n\t\tthis.filter = null;\n\n\t}\n\n\tAudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: AudioListener,\n\n\t\tgetInput: function () {\n\n\t\t\treturn this.gain;\n\n\t\t},\n\n\t\tremoveFilter: function ( ) {\n\n\t\t\tif ( this.filter !== null ) {\n\n\t\t\t\tthis.gain.disconnect( this.filter );\n\t\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\t\tthis.gain.connect( this.context.destination );\n\t\t\t\tthis.filter = null;\n\n\t\t\t}\n\n\t\t},\n\n\t\tgetFilter: function () {\n\n\t\t\treturn this.filter;\n\n\t\t},\n\n\t\tsetFilter: function ( value ) {\n\n\t\t\tif ( this.filter !== null ) {\n\n\t\t\t\tthis.gain.disconnect( this.filter );\n\t\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t\t} else {\n\n\t\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t\t}\n\n\t\t\tthis.filter = value;\n\t\t\tthis.gain.connect( this.filter );\n\t\t\tthis.filter.connect( this.context.destination );\n\n\t\t},\n\n\t\tgetMasterVolume: function () {\n\n\t\t\treturn this.gain.gain.value;\n\n\t\t},\n\n\t\tsetMasterVolume: function ( value ) {\n\n\t\t\tthis.gain.gain.value = value;\n\n\t\t},\n\n\t\tupdateMatrixWorld: ( function () {\n\n\t\t\tvar position = new Vector3();\n\t\t\tvar quaternion = new Quaternion();\n\t\t\tvar scale = new Vector3();\n\n\t\t\tvar orientation = new Vector3();\n\n\t\t\treturn function updateMatrixWorld( force ) {\n\n\t\t\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\t\t\tvar listener = this.context.listener;\n\t\t\t\tvar up = this.up;\n\n\t\t\t\tthis.matrixWorld.decompose( position, quaternion, scale );\n\n\t\t\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t\t\t\tif ( listener.positionX ) {\n\n\t\t\t\t\tlistener.positionX.setValueAtTime( position.x, this.context.currentTime );\n\t\t\t\t\tlistener.positionY.setValueAtTime( position.y, this.context.currentTime );\n\t\t\t\t\tlistener.positionZ.setValueAtTime( position.z, this.context.currentTime );\n\t\t\t\t\tlistener.forwardX.setValueAtTime( orientation.x, this.context.currentTime );\n\t\t\t\t\tlistener.forwardY.setValueAtTime( orientation.y, this.context.currentTime );\n\t\t\t\t\tlistener.forwardZ.setValueAtTime( orientation.z, this.context.currentTime );\n\t\t\t\t\tlistener.upX.setValueAtTime( up.x, this.context.currentTime );\n\t\t\t\t\tlistener.upY.setValueAtTime( up.y, this.context.currentTime );\n\t\t\t\t\tlistener.upZ.setValueAtTime( up.z, this.context.currentTime );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlistener.setPosition( position.x, position.y, position.z );\n\t\t\t\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t} )()\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Reece Aaron Lecrivain / http://reecenotes.com/\n\t */\n\n\tfunction Audio( listener ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.loop = false;\n\t\tthis.startTime = 0;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis.filters = [];\n\n\t}\n\n\tAudio.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\t\tconstructor: Audio,\n\n\t\tgetOutput: function () {\n\n\t\t\treturn this.gain;\n\n\t\t},\n\n\t\tsetNodeSource: function ( audioNode ) {\n\n\t\t\tthis.hasPlaybackControl = false;\n\t\t\tthis.sourceType = 'audioNode';\n\t\t\tthis.source = audioNode;\n\t\t\tthis.connect();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetBuffer: function ( audioBuffer ) {\n\n\t\t\tthis.buffer = audioBuffer;\n\t\t\tthis.sourceType = 'buffer';\n\n\t\t\tif ( this.autoplay ) this.play();\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tplay: function () {\n\n\t\t\tif ( this.isPlaying === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar source = this.context.createBufferSource();\n\n\t\t\tsource.buffer = this.buffer;\n\t\t\tsource.loop = this.loop;\n\t\t\tsource.onended = this.onEnded.bind( this );\n\t\t\tsource.playbackRate.setValueAtTime( this.playbackRate, this.startTime );\n\t\t\tsource.start( 0, this.startTime );\n\n\t\t\tthis.isPlaying = true;\n\n\t\t\tthis.source = source;\n\n\t\t\treturn this.connect();\n\n\t\t},\n\n\t\tpause: function () {\n\n\t\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.startTime = this.context.currentTime;\n\t\t\tthis.isPlaying = false;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.startTime = 0;\n\t\t\tthis.isPlaying = false;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tconnect: function () {\n\n\t\t\tif ( this.filters.length > 0 ) {\n\n\t\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t\t} else {\n\n\t\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tdisconnect: function () {\n\n\t\t\tif ( this.filters.length > 0 ) {\n\n\t\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t\t} else {\n\n\t\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetFilters: function () {\n\n\t\t\treturn this.filters;\n\n\t\t},\n\n\t\tsetFilters: function ( value ) {\n\n\t\t\tif ( ! value ) value = [];\n\n\t\t\tif ( this.isPlaying === true ) {\n\n\t\t\t\tthis.disconnect();\n\t\t\t\tthis.filters = value;\n\t\t\t\tthis.connect();\n\n\t\t\t} else {\n\n\t\t\t\tthis.filters = value;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetFilter: function () {\n\n\t\t\treturn this.getFilters()[ 0 ];\n\n\t\t},\n\n\t\tsetFilter: function ( filter ) {\n\n\t\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t\t},\n\n\t\tsetPlaybackRate: function ( value ) {\n\n\t\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tthis.playbackRate = value;\n\n\t\t\tif ( this.isPlaying === true ) {\n\n\t\t\t\tthis.source.playbackRate.setValueAtTime( this.playbackRate, this.context.currentTime );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetPlaybackRate: function () {\n\n\t\t\treturn this.playbackRate;\n\n\t\t},\n\n\t\tonEnded: function () {\n\n\t\t\tthis.isPlaying = false;\n\n\t\t},\n\n\t\tgetLoop: function () {\n\n\t\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\treturn this.loop;\n\n\t\t},\n\n\t\tsetLoop: function ( value ) {\n\n\t\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tthis.loop = value;\n\n\t\t\tif ( this.isPlaying === true ) {\n\n\t\t\t\tthis.source.loop = this.loop;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetVolume: function () {\n\n\t\t\treturn this.gain.gain.value;\n\n\t\t},\n\t\t\n\t\tsetVolume: function ( value ) {\n\n\t\t\tthis.gain.gain.value = value;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction PositionalAudio( listener ) {\n\n\t\tAudio.call( this, listener );\n\n\t\tthis.panner = this.context.createPanner();\n\t\tthis.panner.connect( this.gain );\n\n\t}\n\n\tPositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\n\n\t\tconstructor: PositionalAudio,\n\n\t\tgetOutput: function () {\n\n\t\t\treturn this.panner;\n\n\t\t},\n\n\t\tgetRefDistance: function () {\n\n\t\t\treturn this.panner.refDistance;\n\n\t\t},\n\n\t\tsetRefDistance: function ( value ) {\n\n\t\t\tthis.panner.refDistance = value;\n\n\t\t},\n\n\t\tgetRolloffFactor: function () {\n\n\t\t\treturn this.panner.rolloffFactor;\n\n\t\t},\n\n\t\tsetRolloffFactor: function ( value ) {\n\n\t\t\tthis.panner.rolloffFactor = value;\n\n\t\t},\n\n\t\tgetDistanceModel: function () {\n\n\t\t\treturn this.panner.distanceModel;\n\n\t\t},\n\n\t\tsetDistanceModel: function ( value ) {\n\n\t\t\tthis.panner.distanceModel = value;\n\n\t\t},\n\n\t\tgetMaxDistance: function () {\n\n\t\t\treturn this.panner.maxDistance;\n\n\t\t},\n\n\t\tsetMaxDistance: function ( value ) {\n\n\t\t\tthis.panner.maxDistance = value;\n\n\t\t},\n\n\t\tupdateMatrixWorld: ( function () {\n\n\t\t\tvar position = new Vector3();\n\n\t\t\treturn function updateMatrixWorld( force ) {\n\n\t\t\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\t\t\tposition.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\t\tthis.panner.setPosition( position.x, position.y, position.z );\n\n\t\t\t};\n\n\t\t} )()\n\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction AudioAnalyser( audio, fftSize ) {\n\n\t\tthis.analyser = audio.context.createAnalyser();\n\t\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\n\n\t\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\t\taudio.getOutput().connect( this.analyser );\n\n\t}\n\n\tObject.assign( AudioAnalyser.prototype, {\n\n\t\tgetFrequencyData: function () {\n\n\t\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\t\treturn this.data;\n\n\t\t},\n\n\t\tgetAverageFrequency: function () {\n\n\t\t\tvar value = 0, data = this.getFrequencyData();\n\n\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tvalue += data[ i ];\n\n\t\t\t}\n\n\t\t\treturn value / data.length;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t *\n\t * Buffered scene graph property that allows weighted accumulation.\n\t *\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction PropertyMixer( binding, typeName, valueSize ) {\n\n\t\tthis.binding = binding;\n\t\tthis.valueSize = valueSize;\n\n\t\tvar bufferType = Float64Array,\n\t\t\tmixFunction;\n\n\t\tswitch ( typeName ) {\n\n\t\t\tcase 'quaternion':\n\t\t\t\tmixFunction = this._slerp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'string':\n\t\t\tcase 'bool':\n\t\t\t\tbufferType = Array;\n\t\t\t\tmixFunction = this._select;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tmixFunction = this._lerp;\n\n\t\t}\n\n\t\tthis.buffer = new bufferType( valueSize * 4 );\n\t\t// layout: [ incoming | accu0 | accu1 | orig ]\n\t\t//\n\t\t// interpolators can use .buffer as their .result\n\t\t// the data then goes to 'incoming'\n\t\t//\n\t\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t\t// the cumulative result and are compared to detect\n\t\t// changes\n\t\t//\n\t\t// 'orig' stores the original state of the property\n\n\t\tthis._mixBufferRegion = mixFunction;\n\n\t\tthis.cumulativeWeight = 0;\n\n\t\tthis.useCount = 0;\n\t\tthis.referenceCount = 0;\n\n\t}\n\n\tObject.assign( PropertyMixer.prototype, {\n\n\t\t// accumulate data in the 'incoming' region into 'accu<i>'\n\t\taccumulate: function ( accuIndex, weight ) {\n\n\t\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t\t// the weight and shouldn't have made the call in the first place\n\n\t\t\tvar buffer = this.buffer,\n\t\t\t\tstride = this.valueSize,\n\t\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\t\tcurrentWeight = this.cumulativeWeight;\n\n\t\t\tif ( currentWeight === 0 ) {\n\n\t\t\t\t// accuN := incoming * weight\n\n\t\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t\t}\n\n\t\t\t\tcurrentWeight = weight;\n\n\t\t\t} else {\n\n\t\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\t\tcurrentWeight += weight;\n\t\t\t\tvar mix = weight / currentWeight;\n\t\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t\t}\n\n\t\t\tthis.cumulativeWeight = currentWeight;\n\n\t\t},\n\n\t\t// apply the state of 'accu<i>' to the binding when accus differ\n\t\tapply: function ( accuIndex ) {\n\n\t\t\tvar stride = this.valueSize,\n\t\t\t\tbuffer = this.buffer,\n\t\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\t\tweight = this.cumulativeWeight,\n\n\t\t\t\tbinding = this.binding;\n\n\t\t\tthis.cumulativeWeight = 0;\n\n\t\t\tif ( weight < 1 ) {\n\n\t\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\t\tvar originalValueOffset = stride * 3;\n\n\t\t\t\tthis._mixBufferRegion(\n\t\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t\t}\n\n\t\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t// remember the state of the bound property and copy it to both accus\n\t\tsaveOriginalState: function () {\n\n\t\t\tvar binding = this.binding;\n\n\t\t\tvar buffer = this.buffer,\n\t\t\t\tstride = this.valueSize,\n\n\t\t\t\toriginalValueOffset = stride * 3;\n\n\t\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t\t}\n\n\t\t\tthis.cumulativeWeight = 0;\n\n\t\t},\n\n\t\t// apply the state previously taken via 'saveOriginalState' to the binding\n\t\trestoreOriginalState: function () {\n\n\t\t\tvar originalValueOffset = this.valueSize * 3;\n\t\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t\t},\n\n\n\t\t// mix functions\n\n\t\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\t\tif ( t >= 0.5 ) {\n\n\t\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\n\n\t\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t\t},\n\n\t\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\t\tvar s = 1 - t;\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tvar j = dstOffset + i;\n\n\t\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\t/**\n\t *\n\t * A reference to a real property in the scene graph.\n\t *\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\t\tvar parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis._targetGroup = targetGroup;\n\t\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n\t}\n\n\tObject.assign( Composite.prototype, {\n\n\t\tgetValue: function ( array, offset ) {\n\n\t\t\tthis.bind(); // bind all binding\n\n\t\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t\t// and only call .getValue on the first\n\t\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t\t},\n\n\t\tsetValue: function ( array, offset ) {\n\n\t\t\tvar bindings = this._bindings;\n\n\t\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\t\t  n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t\t}\n\n\t\t},\n\n\t\tbind: function () {\n\n\t\t\tvar bindings = this._bindings;\n\n\t\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\t\t  n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tbindings[ i ].bind();\n\n\t\t\t}\n\n\t\t},\n\n\t\tunbind: function () {\n\n\t\t\tvar bindings = this._bindings;\n\n\t\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\t\t  n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tbindings[ i ].unbind();\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\n\tfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\t\tthis.path = path;\n\t\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\t\tthis.rootNode = rootNode;\n\n\t}\n\n\tObject.assign( PropertyBinding, {\n\n\t\tComposite: Composite,\n\n\t\tcreate: function ( root, path, parsedPath ) {\n\n\t\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t\t} else {\n\n\t\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Replaces spaces with underscores and removes unsupported characters from\n\t\t * node names, to ensure compatibility with parseTrackName().\n\t\t *\n\t\t * @param  {string} name Node name to be sanitized.\n\t\t * @return {string}\n\t\t */\n\t\tsanitizeNodeName: function ( name ) {\n\n\t\t\treturn name.replace( /\\s/g, '_' ).replace( /[^\\w-]/g, '' );\n\n\t\t},\n\n\t\tparseTrackName: function () {\n\n\t\t\t// Parent directories, delimited by '/' or ':'. Currently unused, but must\n\t\t\t// be matched to parse the rest of the track name.\n\t\t\tvar directoryRe = /((?:[\\w-]+[\\/:])*)/;\n\n\t\t\t// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\n\t\t\tvar nodeRe = /([\\w-\\.]+)?/;\n\n\t\t\t// Object on target node, and accessor. Name may contain only word\n\t\t\t// characters. Accessor may contain any character except closing bracket.\n\t\t\tvar objectRe = /(?:\\.([\\w-]+)(?:\\[(.+)\\])?)?/;\n\n\t\t\t// Property and accessor. May contain only word characters. Accessor may\n\t\t\t// contain any non-bracket characters.\n\t\t\tvar propertyRe = /\\.([\\w-]+)(?:\\[(.+)\\])?/;\n\n\t\t\tvar trackRe = new RegExp(''\n\t\t\t\t+ '^'\n\t\t\t\t+ directoryRe.source\n\t\t\t\t+ nodeRe.source\n\t\t\t\t+ objectRe.source\n\t\t\t\t+ propertyRe.source\n\t\t\t\t+ '$'\n\t\t\t);\n\n\t\t\tvar supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\n\t\t\treturn function ( trackName ) {\n\n\t\t\t\t\tvar matches = trackRe.exec( trackName );\n\n\t\t\t\t\tif ( ! matches ) {\n\n\t\t\t\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar results = {\n\t\t\t\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\t\t\t\tnodeName: matches[ 2 ],\n\t\t\t\t\t\tobjectName: matches[ 3 ],\n\t\t\t\t\t\tobjectIndex: matches[ 4 ],\n\t\t\t\t\t\tpropertyName: matches[ 5 ],     // required\n\t\t\t\t\t\tpropertyIndex: matches[ 6 ]\n\t\t\t\t\t};\n\n\t\t\t\t\tvar lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\t\t\t\tif ( lastDot !== undefined && lastDot !== -1 ) {\n\n\t\t\t\t\t\tvar objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t\t\t\t// Object names must be checked against a whitelist. Otherwise, there\n\t\t\t\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t\t\t\t// include '.' characters).\n\t\t\t\t\t\tif ( supportedObjectNames.indexOf( objectName ) !== -1 ) {\n\n\t\t\t\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\t\t\t\tresults.objectName = objectName;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\t\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn results;\n\n\t\t\t\t};\n\n\t\t}(),\n\n\t\tfindNode: function ( root, nodeName ) {\n\n\t\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\t\treturn root;\n\n\t\t\t}\n\n\t\t\t// search into skeleton bones.\n\t\t\tif ( root.skeleton ) {\n\n\t\t\t\tvar searchSkeleton = function ( skeleton ) {\n\n\t\t\t\t\tfor ( var i = 0; i < skeleton.bones.length; i ++ ) {\n\n\t\t\t\t\t\tvar bone = skeleton.bones[ i ];\n\n\t\t\t\t\t\tif ( bone.name === nodeName ) {\n\n\t\t\t\t\t\t\treturn bone;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t};\n\n\t\t\t\tvar bone = searchSkeleton( root.skeleton );\n\n\t\t\t\tif ( bone ) {\n\n\t\t\t\t\treturn bone;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// search into node subtree.\n\t\t\tif ( root.children ) {\n\n\t\t\t\tvar searchNodeSubtree = function ( children ) {\n\n\t\t\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\t\tvar childNode = children[ i ];\n\n\t\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t};\n\n\t\t\t\tvar subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\t\tif ( subTreeNode ) {\n\n\t\t\t\t\treturn subTreeNode;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t\t// these are used to \"bind\" a nonexistent property\n\t\t_getValue_unavailable: function () {},\n\t\t_setValue_unavailable: function () {},\n\n\t\tBindingType: {\n\t\t\tDirect: 0,\n\t\t\tEntireArray: 1,\n\t\t\tArrayElement: 2,\n\t\t\tHasFromToArray: 3\n\t\t},\n\n\t\tVersioning: {\n\t\t\tNone: 0,\n\t\t\tNeedsUpdate: 1,\n\t\t\tMatrixWorldNeedsUpdate: 2\n\t\t},\n\n\t\tGetterByBindingType: [\n\n\t\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t\t},\n\n\t\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\t\tvar source = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t\t},\n\n\t\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t\t}\n\n\t\t],\n\n\t\tSetterByBindingTypeAndVersioning: [\n\n\t\t\t[\n\t\t\t\t// Direct\n\n\t\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t\t},\n\n\t\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\t\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t\t},\n\n\t\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\t\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t], [\n\n\t\t\t\t// EntireArray\n\n\t\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t\t},\n\n\t\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t], [\n\n\t\t\t\t// ArrayElement\n\n\t\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t\t},\n\n\t\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t\t},\n\n\t\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t], [\n\n\t\t\t\t// HasToFromArray\n\n\t\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t\t},\n\n\t\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t\t},\n\n\t\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t]\n\n\t\t],\n\n\t\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\t\tthis.bind();\n\t\t\tthis.getValue( targetArray, offset );\n\n\t\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t\t// prototype version of these methods with one that represents\n\t\t\t// the bound state. When the property is not found, the methods\n\t\t\t// become no-ops.\n\n\t\t},\n\n\t\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\t\tthis.bind();\n\t\t\tthis.setValue( sourceArray, offset );\n\n\t\t},\n\n\t\t// create getter / setter pair for a property in the scene graph\n\t\tbind: function () {\n\n\t\t\tvar targetObject = this.node,\n\t\t\t\tparsedPath = this.parsedPath,\n\n\t\t\t\tobjectName = parsedPath.objectName,\n\t\t\t\tpropertyName = parsedPath.propertyName,\n\t\t\t\tpropertyIndex = parsedPath.propertyIndex;\n\n\t\t\tif ( ! targetObject ) {\n\n\t\t\t\ttargetObject = PropertyBinding.findNode(\n\t\t\t\t\t\tthis.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\t\tthis.node = targetObject;\n\n\t\t\t}\n\n\t\t\t// set fail state so we can just 'return' on error\n\t\t\tthis.getValue = this._getValue_unavailable;\n\t\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t\t// ensure there is a value node\n\t\t\tif ( ! targetObject ) {\n\n\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( objectName ) {\n\n\t\t\t\tvar objectIndex = parsedPath.objectIndex;\n\n\t\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\t\tswitch ( objectName ) {\n\n\t\t\t\t\tcase 'materials':\n\n\t\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'bones':\n\n\t\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// resolve property\n\t\t\tvar nodeProperty = targetObject[ propertyName ];\n\n\t\t\tif ( nodeProperty === undefined ) {\n\n\t\t\t\tvar nodeName = parsedPath.nodeName;\n\n\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// determine versioning scheme\n\t\t\tvar versioning = this.Versioning.None;\n\n\t\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\t\tversioning = this.Versioning.NeedsUpdate;\n\t\t\t\tthis.targetObject = targetObject;\n\n\t\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\t\t\t\tthis.targetObject = targetObject;\n\n\t\t\t}\n\n\t\t\t// determine how the property gets bound\n\t\t\tvar bindingType = this.BindingType.Direct;\n\n\t\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\n\t\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphAttributes.position.length; i ++ ) {\n\n\t\t\t\t\t\t\tif ( targetObject.geometry.morphAttributes.position[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.', this );\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\n\n\t\t\t\t\t\t\tif ( targetObject.geometry.morphTargets[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t\t} else {\n\n\t\t\t\tthis.propertyName = propertyName;\n\n\t\t\t}\n\n\t\t\t// select getter / setter\n\t\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t\t},\n\n\t\tunbind: function () {\n\n\t\t\tthis.node = null;\n\n\t\t\t// back to the prototype version of getValue / setValue\n\t\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\t\tthis.getValue = this._getValue_unbound;\n\t\t\tthis.setValue = this._setValue_unbound;\n\n\t\t}\n\n\t} );\n\n\t//!\\ DECLARE ALIAS AFTER assign prototype !\n\tObject.assign( PropertyBinding.prototype, {\n\n\t\t// initial state of these methods that calls 'bind'\n\t\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n\t} );\n\n\t/**\n\t *\n\t * A group of objects that receives a shared animation state.\n\t *\n\t * Usage:\n\t *\n\t * \t-\tAdd objects you would otherwise pass as 'root' to the\n\t * \t\tconstructor or the .clipAction method of AnimationMixer.\n\t *\n\t * \t-\tInstead pass this object as 'root'.\n\t *\n\t * \t-\tYou can also add and remove objects later when the mixer\n\t * \t\tis running.\n\t *\n\t * Note:\n\t *\n\t *  \tObjects of this class appear as one object to the mixer,\n\t *  \tso cache control of the individual objects must be done\n\t *  \ton the group.\n\t *\n\t * Limitation:\n\t *\n\t * \t- \tThe animated properties must be compatible among the\n\t * \t\tall objects in the group.\n\t *\n\t *  -\tA single property can either be controlled through a\n\t *  \ttarget group or directly, but not both.\n\t *\n\t * @author tschw\n\t */\n\n\tfunction AnimationObjectGroup( var_args ) {\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\t// cached objects followed by the active ones\n\t\tthis._objects = Array.prototype.slice.call( arguments );\n\n\t\tthis.nCachedObjects_ = 0;\t\t\t// threshold\n\t\t// note: read by PropertyBinding.Composite\n\n\t\tvar indices = {};\n\t\tthis._indicesByUUID = indices;\t\t// for bookkeeping\n\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t\t}\n\n\t\tthis._paths = [];\t\t\t\t\t// inside: string\n\t\tthis._parsedPaths = [];\t\t\t\t// inside: { we don't care, here }\n\t\tthis._bindings = []; \t\t\t\t// inside: Array< PropertyBinding >\n\t\tthis._bindingsIndicesByPath = {}; \t// inside: indices in these arrays\n\n\t\tvar scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tobjects: {\n\t\t\t\tget total() { return scope._objects.length; },\n\t\t\t\tget inUse() { return this.total - scope.nCachedObjects_; }\n\t\t\t},\n\n\t\t\tget bindingsPerObject() { return scope._bindings.length; }\n\n\t\t};\n\n\t}\n\n\tObject.assign( AnimationObjectGroup.prototype, {\n\n\t\tisAnimationObjectGroup: true,\n\n\t\tadd: function( var_args ) {\n\n\t\t\tvar objects = this._objects,\n\t\t\t\tnObjects = objects.length,\n\t\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\t\tpaths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tnBindings = bindings.length;\n\n\t\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\t\tvar object = arguments[ i ],\n\t\t\t\t\tuuid = object.uuid,\n\t\t\t\t\tindex = indicesByUUID[ uuid ],\n\t\t\t\t\tknownObject = undefined;\n\n\t\t\t\tif ( index === undefined ) {\n\n\t\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\t\tindex = nObjects ++;\n\t\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\t\tobjects.push( object );\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tbindings[ j ].push(\n\t\t\t\t\t\t\t\tnew PropertyBinding(\n\t\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\t\tbinding = new PropertyBinding(\n\t\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t\t} // else the object is already where we want it to be\n\n\t\t\t} // for arguments\n\n\t\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t\t},\n\n\t\tremove: function( var_args ) {\n\n\t\t\tvar objects = this._objects,\n\t\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tnBindings = bindings.length;\n\n\t\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\t\tvar object = arguments[ i ],\n\t\t\t\t\tuuid = object.uuid,\n\t\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\t\tvar lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} // for arguments\n\n\t\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t\t},\n\n\t\t// remove & forget\n\t\tuncache: function( var_args ) {\n\n\t\t\tvar objects = this._objects,\n\t\t\t\tnObjects = objects.length,\n\t\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tnBindings = bindings.length;\n\n\t\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\t\tvar object = arguments[ i ],\n\t\t\t\t\tuuid = object.uuid,\n\t\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\t\tvar bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\t\tvar lastIndex = -- nObjects,\n\t\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\t\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\t\tvar bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} // cached or active\n\n\t\t\t\t} // if object is known\n\n\t\t\t} // for arguments\n\n\t\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t\t},\n\n\t\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\t\tsubscribe_: function ( path, parsedPath ) {\n\n\t\t\t// returns an array of bindings for the given path that is changed\n\t\t\t// according to the contained objects in the group\n\n\t\t\tvar indicesByPath = this._bindingsIndicesByPath,\n\t\t\t\tindex = indicesByPath[ path ],\n\t\t\t\tbindings = this._bindings;\n\n\t\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\t\tvar paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tobjects = this._objects,\n\t\t\t\tnObjects = objects.length,\n\t\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\t\tindex = bindings.length;\n\n\t\t\tindicesByPath[ path ] = index;\n\n\t\t\tpaths.push( path );\n\t\t\tparsedPaths.push( parsedPath );\n\t\t\tbindings.push( bindingsForPath );\n\n\t\t\tfor ( var i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\t\tvar object = objects[ i ];\n\t\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t\t}\n\n\t\t\treturn bindingsForPath;\n\n\t\t},\n\n\t\tunsubscribe_: function ( path ) {\n\n\t\t\t// tells the group to forget about a property path and no longer\n\t\t\t// update the array previously obtained with 'subscribe_'\n\n\t\t\tvar indicesByPath = this._bindingsIndicesByPath,\n\t\t\t\tindex = indicesByPath[ path ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tvar paths = this._paths,\n\t\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\t\tbindings = this._bindings,\n\t\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\t\tbindings[ index ] = lastBindings;\n\t\t\t\tbindings.pop();\n\n\t\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\t\tparsedPaths.pop();\n\n\t\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\t\tpaths.pop();\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\t/**\n\t *\n\t * Action provided by AnimationMixer for scheduling clip playback on specific\n\t * objects.\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t *\n\t */\n\n\tfunction AnimationAction( mixer, clip, localRoot ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot || null;\n\n\t\tvar tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tvar interpolantSettings = {\n\t\t\t\tendingStart: \tZeroCurvatureEnding,\n\t\t\t\tendingEnd:\t\tZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tvar interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants;\t// bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null;\t\t\t// for the memory manager\n\t\tthis._byClipCacheIndex = null;\t\t// for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = -1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; \t\t// no. of repetitions when looping\n\n\t\tthis.paused = false;\t\t\t\t// true -> zero effective time scale\n\t\tthis.enabled = true;\t\t\t\t// false -> zero effective weight\n\n\t\tthis.clampWhenFinished \t= false;\t// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\n\n\t}\n\n\tObject.assign( AnimationAction.prototype, {\n\n\t\t// State & Scheduling\n\n\t\tplay: function() {\n\n\t\t\tthis._mixer._activateAction( this );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tstop: function() {\n\n\t\t\tthis._mixer._deactivateAction( this );\n\n\t\t\treturn this.reset();\n\n\t\t},\n\n\t\treset: function() {\n\n\t\t\tthis.paused = false;\n\t\t\tthis.enabled = true;\n\n\t\t\tthis.time = 0;\t\t\t// restart clip\n\t\t\tthis._loopCount = -1;\t// forget previous loops\n\t\t\tthis._startTime = null;\t// forget scheduling\n\n\t\t\treturn this.stopFading().stopWarping();\n\n\t\t},\n\n\t\tisRunning: function() {\n\n\t\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t\t},\n\n\t\t// return true when play has been called\n\t\tisScheduled: function() {\n\n\t\t\treturn this._mixer._isActiveAction( this );\n\n\t\t},\n\n\t\tstartAt: function( time ) {\n\n\t\t\tthis._startTime = time;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetLoop: function( mode, repetitions ) {\n\n\t\t\tthis.loop = mode;\n\t\t\tthis.repetitions = repetitions;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// Weight\n\n\t\t// set the weight stopping any scheduled fading\n\t\t// although .enabled = false yields an effective weight of zero, this\n\t\t// method does *not* change .enabled, because it would be confusing\n\t\tsetEffectiveWeight: function( weight ) {\n\n\t\t\tthis.weight = weight;\n\n\t\t\t// note: same logic as when updated at runtime\n\t\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\t\treturn this.stopFading();\n\n\t\t},\n\n\t\t// return the weight considering fading and .enabled\n\t\tgetEffectiveWeight: function() {\n\n\t\t\treturn this._effectiveWeight;\n\n\t\t},\n\n\t\tfadeIn: function( duration ) {\n\n\t\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t\t},\n\n\t\tfadeOut: function( duration ) {\n\n\t\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t\t},\n\n\t\tcrossFadeFrom: function( fadeOutAction, duration, warp ) {\n\n\t\t\tfadeOutAction.fadeOut( duration );\n\t\t\tthis.fadeIn( duration );\n\n\t\t\tif( warp ) {\n\n\t\t\t\tvar fadeInDuration = this._clip.duration,\n\t\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcrossFadeTo: function( fadeInAction, duration, warp ) {\n\n\t\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t\t},\n\n\t\tstopFading: function() {\n\n\t\t\tvar weightInterpolant = this._weightInterpolant;\n\n\t\t\tif ( weightInterpolant !== null ) {\n\n\t\t\t\tthis._weightInterpolant = null;\n\t\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// Time Scale Control\n\n\t\t// set the time scale stopping any scheduled warping\n\t\t// although .paused = true yields an effective time scale of zero, this\n\t\t// method does *not* change .paused, because it would be confusing\n\t\tsetEffectiveTimeScale: function( timeScale ) {\n\n\t\t\tthis.timeScale = timeScale;\n\t\t\tthis._effectiveTimeScale = this.paused ? 0 :timeScale;\n\n\t\t\treturn this.stopWarping();\n\n\t\t},\n\n\t\t// return the time scale considering warping and .paused\n\t\tgetEffectiveTimeScale: function() {\n\n\t\t\treturn this._effectiveTimeScale;\n\n\t\t},\n\n\t\tsetDuration: function( duration ) {\n\n\t\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\t\treturn this.stopWarping();\n\n\t\t},\n\n\t\tsyncWith: function( action ) {\n\n\t\t\tthis.time = action.time;\n\t\t\tthis.timeScale = action.timeScale;\n\n\t\t\treturn this.stopWarping();\n\n\t\t},\n\n\t\thalt: function( duration ) {\n\n\t\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t\t},\n\n\t\twarp: function( startTimeScale, endTimeScale, duration ) {\n\n\t\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\t\tinterpolant = this._timeScaleInterpolant,\n\n\t\t\t\ttimeScale = this.timeScale;\n\n\t\t\tif ( interpolant === null ) {\n\n\t\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t\t}\n\n\t\t\tvar times = interpolant.parameterPositions,\n\t\t\t\tvalues = interpolant.sampleValues;\n\n\t\t\ttimes[ 0 ] = now;\n\t\t\ttimes[ 1 ] = now + duration;\n\n\t\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tstopWarping: function() {\n\n\t\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\t\tthis._timeScaleInterpolant = null;\n\t\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// Object Accessors\n\n\t\tgetMixer: function() {\n\n\t\t\treturn this._mixer;\n\n\t\t},\n\n\t\tgetClip: function() {\n\n\t\t\treturn this._clip;\n\n\t\t},\n\n\t\tgetRoot: function() {\n\n\t\t\treturn this._localRoot || this._mixer._root;\n\n\t\t},\n\n\t\t// Interna\n\n\t\t_update: function( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t\t// called by the mixer\n\n\t\t\tif ( ! this.enabled ) {\n\n\t\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\t\tthis._updateWeight( time );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar startTime = this._startTime;\n\n\t\t\tif ( startTime !== null ) {\n\n\t\t\t\t// check for scheduled start of action\n\n\t\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\n\t\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t\t}\n\n\t\t\t\t// start\n\n\t\t\t\tthis._startTime = null; // unschedule\n\t\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t\t}\n\n\t\t\t// apply time scale and advance time\n\n\t\t\tdeltaTime *= this._updateTimeScale( time );\n\t\t\tvar clipTime = this._updateTime( deltaTime );\n\n\t\t\t// note: _updateTime may disable the action resulting in\n\t\t\t// an effective weight of 0\n\n\t\t\tvar weight = this._updateWeight( time );\n\n\t\t\tif ( weight > 0 ) {\n\n\t\t\t\tvar interpolants = this._interpolants;\n\t\t\t\tvar propertyMixers = this._propertyBindings;\n\n\t\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t_updateWeight: function( time ) {\n\n\t\t\tvar weight = 0;\n\n\t\t\tif ( this.enabled ) {\n\n\t\t\t\tweight = this.weight;\n\t\t\t\tvar interpolant = this._weightInterpolant;\n\n\t\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._effectiveWeight = weight;\n\t\t\treturn weight;\n\n\t\t},\n\n\t\t_updateTimeScale: function( time ) {\n\n\t\t\tvar timeScale = 0;\n\n\t\t\tif ( ! this.paused ) {\n\n\t\t\t\ttimeScale = this.timeScale;\n\n\t\t\t\tvar interpolant = this._timeScaleInterpolant;\n\n\t\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._effectiveTimeScale = timeScale;\n\t\t\treturn timeScale;\n\n\t\t},\n\n\t\t_updateTime: function( deltaTime ) {\n\n\t\t\tvar time = this.time + deltaTime;\n\n\t\t\tif ( deltaTime === 0 ) return time;\n\n\t\t\tvar duration = this._clip.duration,\n\n\t\t\t\tloop = this.loop,\n\t\t\t\tloopCount = this._loopCount;\n\n\t\t\tif ( loop === LoopOnce ) {\n\n\t\t\t\tif ( loopCount === -1 ) {\n\t\t\t\t\t// just started\n\n\t\t\t\t\tthis._loopCount = 0;\n\t\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t\t}\n\n\t\t\t\thandle_stop: {\n\n\t\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\t\ttime = duration;\n\n\t\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\t\ttime = 0;\n\n\t\t\t\t\t} else break handle_stop;\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime < 0 ? -1 : 1\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\t\tvar pingPong = ( loop === LoopPingPong );\n\n\t\t\t\tif ( loopCount === -1 ) {\n\t\t\t\t\t// just started\n\n\t\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\t\tthis._setEndings(\n\t\t\t\t\t\t\t\ttrue, this.repetitions === 0, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\t\tthis._setEndings(\n\t\t\t\t\t\t\t\tthis.repetitions === 0, true, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( time >= duration || time < 0 ) {\n\t\t\t\t\t// wrap around\n\n\t\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\t\tvar pending = this.repetitions - loopCount;\n\n\t\t\t\t\tif ( pending < 0 ) {\n\t\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : -1\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// keep running\n\n\t\t\t\t\t\tif ( pending === 0 ) {\n\t\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\t\tvar atStart = deltaTime < 0;\n\t\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\t\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\t\tthis.time = time;\n\t\t\t\t\treturn duration - time;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.time = time;\n\t\t\treturn time;\n\n\t\t},\n\n\t\t_setEndings: function( atStart, atEnd, pingPong ) {\n\n\t\t\tvar settings = this._interpolantSettings;\n\n\t\t\tif ( pingPong ) {\n\n\t\t\t\tsettings.endingStart \t= ZeroSlopeEnding;\n\t\t\t\tsettings.endingEnd\t\t= ZeroSlopeEnding;\n\n\t\t\t} else {\n\n\t\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\t\tif ( atStart ) {\n\n\t\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ?\n\t\t\t\t\t\t\tZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t\t}\n\n\t\t\t\tif ( atEnd ) {\n\n\t\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ?\n\t\t\t\t\t\t\tZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t_scheduleFading: function( duration, weightNow, weightThen ) {\n\n\t\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\t\tinterpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant === null ) {\n\n\t\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t\t}\n\n\t\t\tvar times = interpolant.parameterPositions,\n\t\t\t\tvalues = interpolant.sampleValues;\n\n\t\t\ttimes[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\n\t\t\ttimes[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t *\n\t * Player for AnimationClips.\n\t *\n\t *\n\t * @author Ben Houston / http://clara.io/\n\t * @author David Sarno / http://lighthaus.us/\n\t * @author tschw\n\t */\n\n\tfunction AnimationMixer( root ) {\n\n\t\tthis._root = root;\n\t\tthis._initMemoryManager();\n\t\tthis._accuIndex = 0;\n\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1.0;\n\n\t}\n\n\tObject.assign( AnimationMixer.prototype, EventDispatcher.prototype, {\n\n\t\t_bindAction: function ( action, prototypeAction ) {\n\n\t\t\tvar root = action._localRoot || this._root,\n\t\t\t\ttracks = action._clip.tracks,\n\t\t\t\tnTracks = tracks.length,\n\t\t\t\tbindings = action._propertyBindings,\n\t\t\t\tinterpolants = action._interpolants,\n\t\t\t\trootUuid = root.uuid,\n\t\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\t\tif ( bindingsByName === undefined ) {\n\n\t\t\t\tbindingsByName = {};\n\t\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\t\t\tvar track = tracks[ i ],\n\t\t\t\t\ttrackName = track.name,\n\t\t\t\t\tbinding = bindingsByName[ trackName ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar path = prototypeAction && prototypeAction.\n\t\t\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t\t}\n\n\t\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t\t}\n\n\t\t},\n\n\t\t_activateAction: function ( action ) {\n\n\t\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\t\tthis._bindAction( action,\n\t\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t\t}\n\n\t\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t\t// increment reference counts / sort out state\n\t\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis._lendAction( action );\n\n\t\t\t}\n\n\t\t},\n\n\t\t_deactivateAction: function ( action ) {\n\n\t\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t\t// decrement reference counts / sort out state\n\t\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tthis._takeBackAction( action );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Memory manager\n\n\t\t_initMemoryManager: function () {\n\n\t\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\t\tthis._nActiveActions = 0;\n\n\t\t\tthis._actionsByClip = {};\n\t\t\t// inside:\n\t\t\t// {\n\t\t\t// \t\tknownActions: Array< AnimationAction >\t- used as prototypes\n\t\t\t// \t\tactionByRoot: AnimationAction\t\t\t- lookup\n\t\t\t// }\n\n\n\t\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\t\tthis._nActiveBindings = 0;\n\n\t\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\t\tthis._controlInterpolants = []; // same game as above\n\t\t\tthis._nActiveControlInterpolants = 0;\n\n\t\t\tvar scope = this;\n\n\t\t\tthis.stats = {\n\n\t\t\t\tactions: {\n\t\t\t\t\tget total() { return scope._actions.length; },\n\t\t\t\t\tget inUse() { return scope._nActiveActions; }\n\t\t\t\t},\n\t\t\t\tbindings: {\n\t\t\t\t\tget total() { return scope._bindings.length; },\n\t\t\t\t\tget inUse() { return scope._nActiveBindings; }\n\t\t\t\t},\n\t\t\t\tcontrolInterpolants: {\n\t\t\t\t\tget total() { return scope._controlInterpolants.length; },\n\t\t\t\t\tget inUse() { return scope._nActiveControlInterpolants; }\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t},\n\n\t\t// Memory management for AnimationAction objects\n\n\t\t_isActiveAction: function ( action ) {\n\n\t\t\tvar index = action._cacheIndex;\n\t\t\treturn index !== null && index < this._nActiveActions;\n\n\t\t},\n\n\t\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\n\n\t\t\tvar actions = this._actions,\n\t\t\t\tactionsByClip = this._actionsByClip,\n\t\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\t\tif ( actionsForClip === undefined ) {\n\n\t\t\t\tactionsForClip = {\n\n\t\t\t\t\tknownActions: [ action ],\n\t\t\t\t\tactionByRoot: {}\n\n\t\t\t\t};\n\n\t\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t\t} else {\n\n\t\t\t\tvar knownActions = actionsForClip.knownActions;\n\n\t\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\t\tknownActions.push( action );\n\n\t\t\t}\n\n\t\t\taction._cacheIndex = actions.length;\n\t\t\tactions.push( action );\n\n\t\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t\t},\n\n\t\t_removeInactiveAction: function ( action ) {\n\n\t\t\tvar actions = this._actions,\n\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\t\tcacheIndex = action._cacheIndex;\n\n\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\tactions.pop();\n\n\t\t\taction._cacheIndex = null;\n\n\n\t\t\tvar clipUuid = action._clip.uuid,\n\t\t\t\tactionsByClip = this._actionsByClip,\n\t\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\t\tlastKnownAction =\n\t\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\t\tknownActionsForClip.pop();\n\n\t\t\taction._byClipCacheIndex = null;\n\n\n\t\t\tvar actionByRoot = actionsForClip.actionByRoot,\n\t\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\t\tdelete actionByRoot[ rootUuid ];\n\n\t\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t\t}\n\n\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t},\n\n\t\t_removeInactiveBindingsForAction: function ( action ) {\n\n\t\t\tvar bindings = action._propertyBindings;\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t_lendAction: function ( action ) {\n\n\t\t\t// [ active actions |  inactive actions  ]\n\t\t\t// [  active actions >| inactive actions ]\n\t\t\t//                 s        a\n\t\t\t//                  <-swap->\n\t\t\t//                 a        s\n\n\t\t\tvar actions = this._actions,\n\t\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\t\taction._cacheIndex = lastActiveIndex;\n\t\t\tactions[ lastActiveIndex ] = action;\n\n\t\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t\t},\n\n\t\t_takeBackAction: function ( action ) {\n\n\t\t\t// [  active actions  | inactive actions ]\n\t\t\t// [ active actions |< inactive actions  ]\n\t\t\t//        a        s\n\t\t\t//         <-swap->\n\t\t\t//        s        a\n\n\t\t\tvar actions = this._actions,\n\t\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\t\taction._cacheIndex = firstInactiveIndex;\n\t\t\tactions[ firstInactiveIndex ] = action;\n\n\t\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t\t},\n\n\t\t// Memory management for PropertyMixer objects\n\n\t\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\n\n\t\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\t\tbindings = this._bindings;\n\n\t\t\tif ( bindingByName === undefined ) {\n\n\t\t\t\tbindingByName = {};\n\t\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t\t}\n\n\t\t\tbindingByName[ trackName ] = binding;\n\n\t\t\tbinding._cacheIndex = bindings.length;\n\t\t\tbindings.push( binding );\n\n\t\t},\n\n\t\t_removeInactiveBinding: function ( binding ) {\n\n\t\t\tvar bindings = this._bindings,\n\t\t\t\tpropBinding = binding.binding,\n\t\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\t\ttrackName = propBinding.path,\n\t\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\t\tbindings.pop();\n\n\t\t\tdelete bindingByName[ trackName ];\n\n\t\t\tremove_empty_map: {\n\n\t\t\t\tfor ( var _ in bindingByName ) break remove_empty_map;\n\n\t\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t\t}\n\n\t\t},\n\n\t\t_lendBinding: function ( binding ) {\n\n\t\t\tvar bindings = this._bindings,\n\t\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\t\tbinding._cacheIndex = lastActiveIndex;\n\t\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t\t},\n\n\t\t_takeBackBinding: function ( binding ) {\n\n\t\t\tvar bindings = this._bindings,\n\t\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t\t},\n\n\n\t\t// Memory management of Interpolants for weight and time scale\n\n\t\t_lendControlInterpolant: function () {\n\n\t\t\tvar interpolants = this._controlInterpolants,\n\t\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\n\t\t\t\tinterpolant = interpolants[ lastActiveIndex ];\n\n\t\t\tif ( interpolant === undefined ) {\n\n\t\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t\t}\n\n\t\t\treturn interpolant;\n\n\t\t},\n\n\t\t_takeBackControlInterpolant: function ( interpolant ) {\n\n\t\t\tvar interpolants = this._controlInterpolants,\n\t\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t\t},\n\n\t\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\n\n\t\t// return an action for a clip optionally using a custom root target\n\t\t// object (this method allocates a lot of dynamic memory in case a\n\t\t// previously unknown clip/root combination is specified)\n\t\tclipAction: function ( clip, optionalRoot ) {\n\n\t\t\tvar root = optionalRoot || this._root,\n\t\t\t\trootUuid = root.uuid,\n\n\t\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\t\tclipUuid = clipObject !== null ? clipObject.uuid : clip,\n\n\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ],\n\t\t\t\tprototypeAction = null;\n\n\t\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t\tvar existingAction =\n\t\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\t\tif ( existingAction !== undefined ) {\n\n\t\t\t\t\treturn existingAction;\n\n\t\t\t\t}\n\n\t\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t\t// the bindings again but can just copy\n\t\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t\t// also, take the clip from the prototype action\n\t\t\t\tif ( clipObject === null )\n\t\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t\t}\n\n\t\t\t// clip must be known when specified via string\n\t\t\tif ( clipObject === null ) return null;\n\n\t\t\t// allocate all resources required to run it\n\t\t\tvar newAction = new AnimationAction( this, clipObject, optionalRoot );\n\n\t\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t\t// and make the action known to the memory manager\n\t\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\t\treturn newAction;\n\n\t\t},\n\n\t\t// get an existing action\n\t\texistingAction: function ( clip, optionalRoot ) {\n\n\t\t\tvar root = optionalRoot || this._root,\n\t\t\t\trootUuid = root.uuid,\n\n\t\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\t// deactivates all previously scheduled actions\n\t\tstopAllAction: function () {\n\n\t\t\tvar actions = this._actions,\n\t\t\t\tnActions = this._nActiveActions,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tnBindings = this._nActiveBindings;\n\n\t\t\tthis._nActiveActions = 0;\n\t\t\tthis._nActiveBindings = 0;\n\n\t\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\t\tactions[ i ].reset();\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\t\tbindings[ i ].useCount = 0;\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// advance the time and update apply the animation\n\t\tupdate: function ( deltaTime ) {\n\n\t\t\tdeltaTime *= this.timeScale;\n\n\t\t\tvar actions = this._actions,\n\t\t\t\tnActions = this._nActiveActions,\n\n\t\t\t\ttime = this.time += deltaTime,\n\t\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t\t// run active actions\n\n\t\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\t\tvar action = actions[ i ];\n\n\t\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t\t}\n\n\t\t\t// update scene graph\n\n\t\t\tvar bindings = this._bindings,\n\t\t\t\tnBindings = this._nActiveBindings;\n\n\t\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// return this mixer's root target object\n\t\tgetRoot: function () {\n\n\t\t\treturn this._root;\n\n\t\t},\n\n\t\t// free all resources specific to a particular clip\n\t\tuncacheClip: function ( clip ) {\n\n\t\t\tvar actions = this._actions,\n\t\t\t\tclipUuid = clip.uuid,\n\t\t\t\tactionsByClip = this._actionsByClip,\n\t\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t\t// iteration state and also require updating the state we can\n\t\t\t\t// just throw away\n\n\t\t\t\tvar actionsToRemove = actionsForClip.knownActions;\n\n\t\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar action = actionsToRemove[ i ];\n\n\t\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\t\tvar cacheIndex = action._cacheIndex,\n\t\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\t\taction._cacheIndex = null;\n\t\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\t\tactions.pop();\n\n\t\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t\t}\n\n\t\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t\t}\n\n\t\t},\n\n\t\t// free all resources specific to a particular root target object\n\t\tuncacheRoot: function ( root ) {\n\n\t\t\tvar rootUuid = root.uuid,\n\t\t\t\tactionsByClip = this._actionsByClip;\n\n\t\t\tfor ( var clipUuid in actionsByClip ) {\n\n\t\t\t\tvar actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\t\tif ( action !== undefined ) {\n\n\t\t\t\t\tthis._deactivateAction( action );\n\t\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\t\tif ( bindingByName !== undefined ) {\n\n\t\t\t\tfor ( var trackName in bindingByName ) {\n\n\t\t\t\t\tvar binding = bindingByName[ trackName ];\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t// remove a targeted clip from the cache\n\t\tuncacheAction: function ( clip, optionalRoot ) {\n\n\t\t\tvar action = this.existingAction( clip, optionalRoot );\n\n\t\t\tif ( action !== null ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Uniform( value ) {\n\n\t\tif ( typeof value === 'string' ) {\n\n\t\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\t\tvalue = arguments[ 1 ];\n\n\t\t}\n\n\t\tthis.value = value;\n\n\t}\n\n\tUniform.prototype.clone = function () {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t};\n\n\t/**\n\t * @author benaadams / https://twitter.com/ben_a_adams\n\t */\n\n\tfunction InstancedBufferGeometry() {\n\n\t\tBufferGeometry.call( this );\n\n\t\tthis.type = 'InstancedBufferGeometry';\n\t\tthis.maxInstancedCount = undefined;\n\n\t}\n\n\tInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\t\tconstructor: InstancedBufferGeometry,\n\n\t\tisInstancedBufferGeometry: true,\n\n\t\taddGroup: function ( start, count, materialIndex ) {\n\n\t\t\tthis.groups.push( {\n\n\t\t\t\tstart: start,\n\t\t\t\tcount: count,\n\t\t\t\tmaterialIndex: materialIndex\n\n\t\t\t} );\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tvar index = source.index;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tthis.setIndex( index.clone() );\n\n\t\t\t}\n\n\t\t\tvar attributes = source.attributes;\n\n\t\t\tfor ( var name in attributes ) {\n\n\t\t\t\tvar attribute = attributes[ name ];\n\t\t\t\tthis.addAttribute( name, attribute.clone() );\n\n\t\t\t}\n\n\t\t\tvar groups = source.groups;\n\n\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\t\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author benaadams / https://twitter.com/ben_a_adams\n\t */\n\n\tfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\tthis.data = interleavedBuffer;\n\t\tthis.itemSize = itemSize;\n\t\tthis.offset = offset;\n\n\t\tthis.normalized = normalized === true;\n\n\t}\n\n\tObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\t\tcount: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.data.count;\n\n\t\t\t}\n\n\t\t},\n\n\t\tarray: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.data.array;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\tObject.assign( InterleavedBufferAttribute.prototype, {\n\n\t\tisInterleavedBufferAttribute: true,\n\n\t\tsetX: function ( index, x ) {\n\n\t\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetY: function ( index, y ) {\n\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetZ: function ( index, z ) {\n\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetW: function ( index, w ) {\n\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetX: function ( index ) {\n\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t\t},\n\n\t\tgetY: function ( index ) {\n\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t\t},\n\n\t\tgetZ: function ( index ) {\n\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t\t},\n\n\t\tgetW: function ( index ) {\n\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t\t},\n\n\t\tsetXY: function ( index, x, y ) {\n\n\t\t\tindex = index * this.data.stride + this.offset;\n\n\t\t\tthis.data.array[ index + 0 ] = x;\n\t\t\tthis.data.array[ index + 1 ] = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetXYZ: function ( index, x, y, z ) {\n\n\t\t\tindex = index * this.data.stride + this.offset;\n\n\t\t\tthis.data.array[ index + 0 ] = x;\n\t\t\tthis.data.array[ index + 1 ] = y;\n\t\t\tthis.data.array[ index + 2 ] = z;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\t\tindex = index * this.data.stride + this.offset;\n\n\t\t\tthis.data.array[ index + 0 ] = x;\n\t\t\tthis.data.array[ index + 1 ] = y;\n\t\t\tthis.data.array[ index + 2 ] = z;\n\t\t\tthis.data.array[ index + 3 ] = w;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author benaadams / https://twitter.com/ben_a_adams\n\t */\n\n\tfunction InterleavedBuffer( array, stride ) {\n\n\t\tthis.uuid = _Math.generateUUID();\n\n\t\tthis.array = array;\n\t\tthis.stride = stride;\n\t\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\t\tthis.dynamic = false;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.onUploadCallback = function () {};\n\n\t\tthis.version = 0;\n\n\t}\n\n\tObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\t\tset: function ( value ) {\n\n\t\t\tif ( value === true ) this.version ++;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( InterleavedBuffer.prototype, {\n\n\t\tisInterleavedBuffer: true,\n\n\t\tsetArray: function ( array ) {\n\n\t\t\tif ( Array.isArray( array ) ) {\n\n\t\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t\t}\n\n\t\t\tthis.count = array !== undefined ? array.length / this.stride : 0;\n\t\t\tthis.array = array;\n\n\t\t},\n\n\t\tsetDynamic: function ( value ) {\n\n\t\t\tthis.dynamic = value;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopy: function ( source ) {\n\n\t\t\tthis.array = new source.array.constructor( source.array );\n\t\t\tthis.count = source.count;\n\t\t\tthis.stride = source.stride;\n\t\t\tthis.dynamic = source.dynamic;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\t\tindex1 *= this.stride;\n\t\t\tindex2 *= attribute.stride;\n\n\t\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tset: function ( value, offset ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\n\t\t\tthis.array.set( value, offset );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tonUpload: function ( callback ) {\n\n\t\t\tthis.onUploadCallback = callback;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author benaadams / https://twitter.com/ben_a_adams\n\t */\n\n\tfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\n\n\t\tInterleavedBuffer.call( this, array, stride );\n\n\t\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n\t}\n\n\tInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\n\n\t\tconstructor: InstancedInterleavedBuffer,\n\n\t\tisInstancedInterleavedBuffer: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tInterleavedBuffer.prototype.copy.call( this, source );\n\n\t\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author benaadams / https://twitter.com/ben_a_adams\n\t */\n\n\tfunction InstancedBufferAttribute( array, itemSize, meshPerAttribute ) {\n\n\t\tBufferAttribute.call( this, array, itemSize );\n\n\t\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n\t}\n\n\tInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\t\tconstructor: InstancedBufferAttribute,\n\n\t\tisInstancedBufferAttribute: true,\n\n\t\tcopy: function ( source ) {\n\n\t\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author bhouston / http://clara.io/\n\t * @author stephomi / http://stephaneginier.com/\n\t */\n\n\tfunction Raycaster( origin, direction, near, far ) {\n\n\t\tthis.ray = new Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near || 0;\n\t\tthis.far = far || Infinity;\n\n\t\tthis.params = {\n\t\t\tMesh: {},\n\t\t\tLine: {},\n\t\t\tLOD: {},\n\t\t\tPoints: { threshold: 1 },\n\t\t\tSprite: {}\n\t\t};\n\n\t\tObject.defineProperties( this.params, {\n\t\t\tPointCloud: {\n\t\t\t\tget: function () {\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\t\treturn this.Points;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t}\n\n\tfunction ascSort( a, b ) {\n\n\t\treturn a.distance - b.distance;\n\n\t}\n\n\tfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tvar children = object.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tObject.assign( Raycaster.prototype, {\n\n\t\tlinePrecision: 1,\n\n\t\tset: function ( origin, direction ) {\n\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\t\tthis.ray.set( origin, direction );\n\n\t\t},\n\n\t\tsetFromCamera: function ( coords, camera ) {\n\n\t\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\n\n\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\n\t\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\n\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t\t}\n\n\t\t},\n\n\t\tintersectObject: function ( object, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tintersectObject( object, this, intersects, recursive );\n\n\t\t\tintersects.sort( ascSort );\n\n\t\t\treturn intersects;\n\n\t\t},\n\n\t\tintersectObjects: function ( objects, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\t\treturn intersects;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t\t}\n\n\t\t\tintersects.sort( ascSort );\n\n\t\t\treturn intersects;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction Clock( autoStart ) {\n\n\t\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\t\tthis.startTime = 0;\n\t\tthis.oldTime = 0;\n\t\tthis.elapsedTime = 0;\n\n\t\tthis.running = false;\n\n\t}\n\n\tObject.assign( Clock.prototype, {\n\n\t\tstart: function () {\n\n\t\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n\t\t\tthis.oldTime = this.startTime;\n\t\t\tthis.elapsedTime = 0;\n\t\t\tthis.running = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tthis.getElapsedTime();\n\t\t\tthis.running = false;\n\t\t\tthis.autoStart = false;\n\n\t\t},\n\n\t\tgetElapsedTime: function () {\n\n\t\t\tthis.getDelta();\n\t\t\treturn this.elapsedTime;\n\n\t\t},\n\n\t\tgetDelta: function () {\n\n\t\t\tvar diff = 0;\n\n\t\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\t\tthis.start();\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\tif ( this.running ) {\n\n\t\t\t\tvar newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n\t\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\t\tthis.oldTime = newTime;\n\n\t\t\t\tthis.elapsedTime += diff;\n\n\t\t\t}\n\n\t\t\treturn diff;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author bhouston / http://clara.io\n\t * @author WestLangley / http://github.com/WestLangley\n\t *\n\t * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n\t *\n\t * The poles (phi) are at the positive and negative y axis.\n\t * The equator starts at positive z.\n\t */\n\n\tfunction Spherical( radius, phi, theta ) {\n\n\t\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\n\t\tthis.phi = ( phi !== undefined ) ? phi : 0; // up / down towards top and bottom pole\n\t\tthis.theta = ( theta !== undefined ) ? theta : 0; // around the equator of the sphere\n\n\t\treturn this;\n\n\t}\n\n\tObject.assign( Spherical.prototype, {\n\n\t\tset: function ( radius, phi, theta ) {\n\n\t\t\tthis.radius = radius;\n\t\t\tthis.phi = phi;\n\t\t\tthis.theta = theta;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( other ) {\n\n\t\t\tthis.radius = other.radius;\n\t\t\tthis.phi = other.phi;\n\t\t\tthis.theta = other.theta;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\tmakeSafe: function() {\n\n\t\t\tvar EPS = 0.000001;\n\t\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromVector3: function( vec3 ) {\n\n\t\t\tthis.radius = vec3.length();\n\n\t\t\tif ( this.radius === 0 ) {\n\n\t\t\t\tthis.theta = 0;\n\t\t\t\tthis.phi = 0;\n\n\t\t\t} else {\n\n\t\t\t\tthis.theta = Math.atan2( vec3.x, vec3.z ); // equator angle around y-up axis\n\t\t\t\tthis.phi = Math.acos( _Math.clamp( vec3.y / this.radius, - 1, 1 ) ); // polar angle\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\n\t * @author Mugen87 / https://github.com/Mugen87\n\t *\n\t * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\n\t *\n\t */\n\n\tfunction Cylindrical( radius, theta, y ) {\n\n\t\tthis.radius = ( radius !== undefined ) ? radius : 1.0; // distance from the origin to a point in the x-z plane\n\t\tthis.theta = ( theta !== undefined ) ? theta : 0; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\n\t\tthis.y = ( y !== undefined ) ? y : 0; // height above the x-z plane\n\n\t\treturn this;\n\n\t}\n\n\tObject.assign( Cylindrical.prototype, {\n\n\t\tset: function ( radius, theta, y ) {\n\n\t\t\tthis.radius = radius;\n\t\t\tthis.theta = theta;\n\t\t\tthis.y = y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tclone: function () {\n\n\t\t\treturn new this.constructor().copy( this );\n\n\t\t},\n\n\t\tcopy: function ( other ) {\n\n\t\t\tthis.radius = other.radius;\n\t\t\tthis.theta = other.theta;\n\t\t\tthis.y = other.y;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetFromVector3: function( vec3 ) {\n\n\t\t\tthis.radius = Math.sqrt( vec3.x * vec3.x + vec3.z * vec3.z );\n\t\t\tthis.theta = Math.atan2( vec3.x, vec3.z );\n\t\t\tthis.y = vec3.y;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\r\n\tfunction MorphBlendMesh( geometry, material ) {\n\r\n\t\tMesh.call( this, geometry, material );\r\n\r\n\t\tthis.animationsMap = {};\r\n\t\tthis.animationsList = [];\r\n\r\n\t\t// prepare default animation\r\n\t\t// (all frames played together in 1 second)\r\n\r\n\t\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\t\tvar name = \"__default\";\r\n\r\n\t\tvar startFrame = 0;\r\n\t\tvar endFrame = numFrames - 1;\r\n\r\n\t\tvar fps = numFrames / 1;\r\n\r\n\t\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\t\tthis.setAnimationWeight( name, 1 );\r\n\r\n\t}\r\n\r\n\tMorphBlendMesh.prototype = Object.create( Mesh.prototype );\r\n\tMorphBlendMesh.prototype.constructor = MorphBlendMesh;\r\n\r\n\tMorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\t\tvar animation = {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tend: end,\r\n\r\n\t\t\tlength: end - start + 1,\r\n\r\n\t\t\tfps: fps,\r\n\t\t\tduration: ( end - start ) / fps,\r\n\r\n\t\t\tlastFrame: 0,\r\n\t\t\tcurrentFrame: 0,\r\n\r\n\t\t\tactive: false,\r\n\r\n\t\t\ttime: 0,\r\n\t\t\tdirection: 1,\r\n\t\t\tweight: 1,\r\n\r\n\t\t\tdirectionBackwards: false,\r\n\t\t\tmirroredLoop: false\r\n\r\n\t\t};\r\n\r\n\t\tthis.animationsMap[ name ] = animation;\r\n\t\tthis.animationsList.push( animation );\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\t\tvar pattern = /([a-z]+)_?(\\d+)/i;\r\n\r\n\t\tvar firstAnimation, frameRanges = {};\r\n\r\n\t\tvar geometry = this.geometry;\r\n\r\n\t\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\t\tvar name = chunks[ 1 ];\r\n\r\n\t\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in frameRanges ) {\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\t\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t\t}\r\n\r\n\t\tthis.firstAnimation = firstAnimation;\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tanimation.direction = 1;\r\n\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tanimation.direction = - 1;\r\n\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tanimation.fps = fps;\r\n\t\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tanimation.duration = duration;\r\n\t\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tanimation.weight = weight;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tanimation.time = time;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\t\tvar time = 0;\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\ttime = animation.time;\r\n\r\n\t\t}\r\n\r\n\t\treturn time;\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\t\tvar duration = - 1;\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tduration = animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\treturn duration;\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tanimation.time = 0;\r\n\t\t\tanimation.active = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\r\n\t\tif ( animation ) {\r\n\r\n\t\t\tanimation.active = false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tMorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\t\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\t\tif ( ! animation.active ) continue;\r\n\r\n\t\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar keyframe = animation.start + _Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\t\tvar weight = animation.weight;\r\n\r\n\t\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tfunction ImmediateRenderObject( material ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.material = material;\n\t\tthis.render = function ( renderCallback ) {};\n\n\t}\n\n\tImmediateRenderObject.prototype = Object.create( Object3D.prototype );\n\tImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\n\n\tImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t*/\n\n\tfunction VertexNormalsHelper( object, size, hex, linewidth ) {\n\n\t\tthis.object = object;\n\n\t\tthis.size = ( size !== undefined ) ? size : 1;\n\n\t\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\n\n\t\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\t\t//\n\n\t\tvar nNormals = 0;\n\n\t\tvar objGeometry = this.object.geometry;\n\n\t\tif ( objGeometry && objGeometry.isGeometry ) {\n\n\t\t\tnNormals = objGeometry.faces.length * 3;\n\n\t\t} else if ( objGeometry && objGeometry.isBufferGeometry ) {\n\n\t\t\tnNormals = objGeometry.attributes.normal.count;\n\n\t\t}\n\n\t\t//\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tvar positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\n\n\t\tgeometry.addAttribute( 'position', positions );\n\n\t\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, linewidth: width } ) );\n\n\t\t//\n\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\tVertexNormalsHelper.prototype = Object.create( LineSegments.prototype );\n\tVertexNormalsHelper.prototype.constructor = VertexNormalsHelper;\n\n\tVertexNormalsHelper.prototype.update = ( function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\t\tvar normalMatrix = new Matrix3();\n\n\t\treturn function update() {\n\n\t\t\tvar keys = [ 'a', 'b', 'c' ];\n\n\t\t\tthis.object.updateMatrixWorld( true );\n\n\t\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\t\tvar matrixWorld = this.object.matrixWorld;\n\n\t\t\tvar position = this.geometry.attributes.position;\n\n\t\t\t//\n\n\t\t\tvar objGeometry = this.object.geometry;\n\n\t\t\tif ( objGeometry && objGeometry.isGeometry ) {\n\n\t\t\t\tvar vertices = objGeometry.vertices;\n\n\t\t\t\tvar faces = objGeometry.faces;\n\n\t\t\t\tvar idx = 0;\n\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\n\n\t\t\t\t\t\tvar normal = face.vertexNormals[ j ];\n\n\t\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\n\n\t\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\t\t\t\tidx = idx + 1;\n\n\t\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\t\t\t\tidx = idx + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( objGeometry && objGeometry.isBufferGeometry ) {\n\n\t\t\t\tvar objPos = objGeometry.attributes.position;\n\n\t\t\t\tvar objNorm = objGeometry.attributes.normal;\n\n\t\t\t\tvar idx = 0;\n\n\t\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\n\n\t\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\n\n\t\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\n\n\t\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\n\n\t\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\t\t\tidx = idx + 1;\n\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\t\t\tidx = idx + 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t};\n\n\t}() );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t*/\n\n\tfunction SpotLightHelper( light ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tvar positions = [\n\t\t\t0, 0, 0,   0,   0,   1,\n\t\t\t0, 0, 0,   1,   0,   1,\n\t\t\t0, 0, 0, - 1,   0,   1,\n\t\t\t0, 0, 0,   0,   1,   1,\n\t\t\t0, 0, 0,   0, - 1,   1\n\t\t];\n\n\t\tfor ( var i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\t\tvar p1 = ( i / l ) * Math.PI * 2;\n\t\t\tvar p2 = ( j / l ) * Math.PI * 2;\n\n\t\t\tpositions.push(\n\t\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t\t);\n\n\t\t}\n\n\t\tgeometry.addAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tvar material = new LineBasicMaterial( { fog: false } );\n\n\t\tthis.cone = new LineSegments( geometry, material );\n\t\tthis.add( this.cone );\n\n\t\tthis.update();\n\n\t}\n\n\tSpotLightHelper.prototype = Object.create( Object3D.prototype );\n\tSpotLightHelper.prototype.constructor = SpotLightHelper;\n\n\tSpotLightHelper.prototype.dispose = function () {\n\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t};\n\n\tSpotLightHelper.prototype.update = function () {\n\n\t\tvar vector = new Vector3();\n\t\tvar vector2 = new Vector3();\n\n\t\treturn function update() {\n\n\t\t\tthis.light.updateMatrixWorld();\n\n\t\t\tvar coneLength = this.light.distance ? this.light.distance : 1000;\n\t\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\n\t\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\t\tthis.cone.lookAt( vector2.sub( vector ) );\n\n\t\t\tthis.cone.material.color.copy( this.light.color );\n\n\t\t};\n\n\t}();\n\n\t/**\n\t * @author Sean Griffin / http://twitter.com/sgrif\n\t * @author Michael Guerrero / http://realitymeltdown.com\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author ikerr / http://verold.com\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\tfunction getBoneList( object ) {\n\n\t\tvar boneList = [];\n\n\t\tif ( object && object.isBone ) {\n\n\t\t\tboneList.push( object );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t\t}\n\n\t\treturn boneList;\n\n\t}\n\n\tfunction SkeletonHelper( object ) {\n\n\t\tvar bones = getBoneList( object );\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tvar vertices = [];\n\t\tvar colors = [];\n\n\t\tvar color1 = new Color( 0, 0, 1 );\n\t\tvar color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( var i = 0; i < bones.length; i ++ ) {\n\n\t\t\tvar bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tvar material = new LineBasicMaterial( { vertexColors: VertexColors, depthTest: false, depthWrite: false, transparent: true } );\n\n\t\tLineSegments.call( this, geometry, material );\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.onBeforeRender();\n\n\t}\n\n\tSkeletonHelper.prototype = Object.create( LineSegments.prototype );\n\tSkeletonHelper.prototype.constructor = SkeletonHelper;\n\n\tSkeletonHelper.prototype.onBeforeRender = function () {\n\n\t\tvar vector = new Vector3();\n\n\t\tvar boneMatrix = new Matrix4();\n\t\tvar matrixWorldInv = new Matrix4();\n\n\t\treturn function onBeforeRender() {\n\n\t\t\tvar bones = this.bones;\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tmatrixWorldInv.getInverse( this.root.matrixWorld );\n\n\t\t\tfor ( var i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\t\tvar bone = bones[ i ];\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\n\t\t\t\t\tvector.setFromMatrixPosition( boneMatrix );\n\t\t\t\t\tposition.setXYZ( j, vector.x, vector.y, vector.z );\n\n\t\t\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t\tvector.setFromMatrixPosition( boneMatrix );\n\t\t\t\t\tposition.setXYZ( j + 1, vector.x, vector.y, vector.z );\n\n\t\t\t\t\tj += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\t};\n\n\t}();\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction PointLightHelper( light, sphereSize ) {\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tvar geometry = new SphereBufferGeometry( sphereSize, 4, 2 );\n\t\tvar material = new MeshBasicMaterial( { wireframe: true, fog: false } );\n\t\tmaterial.color.copy( this.light.color );\n\n\t\tMesh.call( this, geometry, material );\n\n\t\tthis.matrix = this.light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\t/*\n\t\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\t\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\t\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\t\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\t\tvar d = light.distance;\n\n\t\tif ( d === 0.0 ) {\n\n\t\t\tthis.lightDistance.visible = false;\n\n\t\t} else {\n\n\t\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t\t}\n\n\t\tthis.add( this.lightDistance );\n\t\t*/\n\n\t}\n\n\tPointLightHelper.prototype = Object.create( Mesh.prototype );\n\tPointLightHelper.prototype.constructor = PointLightHelper;\n\n\tPointLightHelper.prototype.dispose = function () {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t};\n\n\tPointLightHelper.prototype.update = function () {\n\n\t\tthis.material.color.copy( this.light.color );\n\n\t\t/*\n\t\tvar d = this.light.distance;\n\n\t\tif ( d === 0.0 ) {\n\n\t\t\tthis.lightDistance.visible = false;\n\n\t\t} else {\n\n\t\t\tthis.lightDistance.visible = true;\n\t\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t\t}\n\t\t*/\n\n\t};\n\n\t/**\n\t * @author abelnation / http://github.com/abelnation\n\t * @author Mugen87 / http://github.com/Mugen87\n\t * @author WestLangley / http://github.com/WestLangley\n\t */\n\n\tfunction RectAreaLightHelper( light ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tvar material = new LineBasicMaterial( { color: light.color } );\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tgeometry.addAttribute( 'position', new BufferAttribute( new Float32Array( 5 * 3 ), 3 ) );\n\n\t\tthis.add( new Line( geometry, material ) );\n\n\t\tthis.update();\n\n\t}\n\n\tRectAreaLightHelper.prototype = Object.create( Object3D.prototype );\n\tRectAreaLightHelper.prototype.constructor = RectAreaLightHelper;\n\n\tRectAreaLightHelper.prototype.dispose = function () {\n\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t};\n\n\tRectAreaLightHelper.prototype.update = function () {\n\n\t\tvar line = this.children[ 0 ];\n\n\t\t// update material\n\n\t\tline.material.color.copy( this.light.color );\n\n\t\t// calculate new dimensions of the helper\n\n\t\tvar hx = this.light.width * 0.5;\n\t\tvar hy = this.light.height * 0.5;\n\n\t\tvar position = line.geometry.attributes.position;\n\t\tvar array = position.array;\n\n\t\t// update vertices\n\n\t\tarray[  0 ] =   hx; array[  1 ] = - hy; array[  2 ] = 0;\n\t\tarray[  3 ] =   hx; array[  4 ] =   hy; array[  5 ] = 0;\n\t\tarray[  6 ] = - hx; array[  7 ] =   hy; array[  8 ] = 0;\n\t\tarray[  9 ] = - hx; array[ 10 ] = - hy; array[ 11 ] = 0;\n\t\tarray[ 12 ] =   hx; array[ 13 ] = - hy; array[ 14 ] = 0;\n\n\t\tposition.needsUpdate = true;\n\n\t};\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Mugen87 / https://github.com/Mugen87\n\t */\n\n\tfunction HemisphereLightHelper( light, size ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tvar geometry = new OctahedronBufferGeometry( size );\n\t\tgeometry.rotateY( Math.PI * 0.5 );\n\n\t\tvar material = new MeshBasicMaterial( { vertexColors: VertexColors, wireframe: true } );\n\n\t\tvar position = geometry.getAttribute( 'position' );\n\t\tvar colors = new Float32Array( position.count * 3 );\n\n\t\tgeometry.addAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\t\tthis.add( new Mesh( geometry, material ) );\n\n\t\tthis.update();\n\n\t}\n\n\tHemisphereLightHelper.prototype = Object.create( Object3D.prototype );\n\tHemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\n\n\tHemisphereLightHelper.prototype.dispose = function () {\n\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t};\n\n\tHemisphereLightHelper.prototype.update = function () {\n\n\t\tvar vector = new Vector3();\n\n\t\tvar color1 = new Color();\n\t\tvar color2 = new Color();\n\n\t\treturn function update() {\n\n\t\t\tvar mesh = this.children[ 0 ];\n\n\t\t\tvar colors = mesh.geometry.getAttribute( 'color' );\n\n\t\t\tcolor1.copy( this.light.color );\n\t\t\tcolor2.copy( this.light.groundColor );\n\n\t\t\tfor ( var i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\t\tvar color = ( i < ( l / 2 ) ) ? color1 : color2;\n\n\t\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t\tmesh.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n\t\t\tcolors.needsUpdate = true;\n\n\t\t};\n\n\t}();\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction GridHelper( size, divisions, color1, color2 ) {\n\n\t\tsize = size || 10;\n\t\tdivisions = divisions || 10;\n\t\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\n\t\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\n\n\t\tvar center = divisions / 2;\n\t\tvar step = size / divisions;\n\t\tvar halfSize = size / 2;\n\n\t\tvar vertices = [], colors = [];\n\n\t\tfor ( var i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\n\n\t\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\n\t\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\n\n\t\t\tvar color = i === center ? color1 : color2;\n\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\n\t\t}\n\n\t\tvar geometry = new BufferGeometry();\n\t\tgeometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tvar material = new LineBasicMaterial( { vertexColors: VertexColors } );\n\n\t\tLineSegments.call( this, geometry, material );\n\n\t}\n\n\tGridHelper.prototype = Object.create( LineSegments.prototype );\n\tGridHelper.prototype.constructor = GridHelper;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Mugen87 / http://github.com/Mugen87\n\t * @author Hectate / http://www.github.com/Hectate\n\t */\n\n\tfunction PolarGridHelper( radius, radials, circles, divisions, color1, color2 ) {\n\n\t\tradius = radius || 10;\n\t\tradials = radials || 16;\n\t\tcircles = circles || 8;\n\t\tdivisions = divisions || 64;\n\t\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\n\t\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\n\n\t\tvar vertices = [];\n\t\tvar colors = [];\n\n\t\tvar x, z;\n\t\tvar v, i, j, r, color;\n\n\t\t// create the radials\n\n\t\tfor ( i = 0; i <= radials; i ++ ) {\n\n\t\t\tv = ( i / radials ) * ( Math.PI * 2 );\n\n\t\t\tx = Math.sin( v ) * radius;\n\t\t\tz = Math.cos( v ) * radius;\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tvertices.push( x, 0, z );\n\n\t\t\tcolor = ( i & 1 ) ? color1 : color2;\n\n\t\t\tcolors.push( color.r, color.g, color.b );\n\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t}\n\n\t\t// create the circles\n\n\t\tfor ( i = 0; i <= circles; i ++ ) {\n\n\t\t\tcolor = ( i & 1 ) ? color1 : color2;\n\n\t\t\tr = radius - ( radius / circles * i );\n\n\t\t\tfor ( j = 0; j < divisions; j ++ ) {\n\n\t\t\t\t// first vertex\n\n\t\t\t\tv = ( j / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tx = Math.sin( v ) * r;\n\t\t\t\tz = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t\t// second vertex\n\n\t\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tx = Math.sin( v ) * r;\n\t\t\t\tz = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar geometry = new BufferGeometry();\n\t\tgeometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tvar material = new LineBasicMaterial( { vertexColors: VertexColors } );\n\n\t\tLineSegments.call( this, geometry, material );\n\n\t}\n\n\tPolarGridHelper.prototype = Object.create( LineSegments.prototype );\n\tPolarGridHelper.prototype.constructor = PolarGridHelper;\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t*/\n\n\tfunction FaceNormalsHelper( object, size, hex, linewidth ) {\n\n\t\t// FaceNormalsHelper only supports THREE.Geometry\n\n\t\tthis.object = object;\n\n\t\tthis.size = ( size !== undefined ) ? size : 1;\n\n\t\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\n\n\t\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\t\t//\n\n\t\tvar nNormals = 0;\n\n\t\tvar objGeometry = this.object.geometry;\n\n\t\tif ( objGeometry && objGeometry.isGeometry ) {\n\n\t\t\tnNormals = objGeometry.faces.length;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\n\n\t\t}\n\n\t\t//\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tvar positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\n\n\t\tgeometry.addAttribute( 'position', positions );\n\n\t\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, linewidth: width } ) );\n\n\t\t//\n\n\t\tthis.matrixAutoUpdate = false;\n\t\tthis.update();\n\n\t}\n\n\tFaceNormalsHelper.prototype = Object.create( LineSegments.prototype );\n\tFaceNormalsHelper.prototype.constructor = FaceNormalsHelper;\n\n\tFaceNormalsHelper.prototype.update = ( function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\t\tvar normalMatrix = new Matrix3();\n\n\t\treturn function update() {\n\n\t\t\tthis.object.updateMatrixWorld( true );\n\n\t\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\t\tvar matrixWorld = this.object.matrixWorld;\n\n\t\t\tvar position = this.geometry.attributes.position;\n\n\t\t\t//\n\n\t\t\tvar objGeometry = this.object.geometry;\n\n\t\t\tvar vertices = objGeometry.vertices;\n\n\t\t\tvar faces = objGeometry.faces;\n\n\t\t\tvar idx = 0;\n\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tv1.copy( vertices[ face.a ] )\n\t\t\t\t\t.add( vertices[ face.b ] )\n\t\t\t\t\t.add( vertices[ face.c ] )\n\t\t\t\t\t.divideScalar( 3 )\n\t\t\t\t\t.applyMatrix4( matrixWorld );\n\n\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t};\n\n\t}() );\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t */\n\n\tfunction DirectionalLightHelper( light, size ) {\n\n\t\tObject3D.call( this );\n\n\t\tthis.light = light;\n\t\tthis.light.updateMatrixWorld();\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tif ( size === undefined ) size = 1;\n\n\t\tvar geometry = new BufferGeometry();\n\t\tgeometry.addAttribute( 'position', new Float32BufferAttribute( [\n\t\t\t- size,   size, 0,\n\t\t\t  size,   size, 0,\n\t\t\t  size, - size, 0,\n\t\t\t- size, - size, 0,\n\t\t\t- size,   size, 0\n\t\t], 3 ) );\n\n\t\tvar material = new LineBasicMaterial( { fog: false } );\n\n\t\tthis.add( new Line( geometry, material ) );\n\n\t\tgeometry = new BufferGeometry();\n\t\tgeometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\t\tthis.add( new Line( geometry, material ));\n\n\t\tthis.update();\n\n\t}\n\n\tDirectionalLightHelper.prototype = Object.create( Object3D.prototype );\n\tDirectionalLightHelper.prototype.constructor = DirectionalLightHelper;\n\n\tDirectionalLightHelper.prototype.dispose = function () {\n\n\t\tvar lightPlane = this.children[ 0 ];\n\t\tvar targetLine = this.children[ 1 ];\n\n\t\tlightPlane.geometry.dispose();\n\t\tlightPlane.material.dispose();\n\t\ttargetLine.geometry.dispose();\n\t\ttargetLine.material.dispose();\n\n\t};\n\n\tDirectionalLightHelper.prototype.update = function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\t\tvar v3 = new Vector3();\n\n\t\treturn function update() {\n\n\t\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\n\t\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\t\tv3.subVectors( v2, v1 );\n\n\t\t\tvar lightPlane = this.children[ 0 ];\n\t\t\tvar targetLine = this.children[ 1 ];\n\n\t\t\tlightPlane.lookAt( v3 );\n\t\t\tlightPlane.material.color.copy( this.light.color );\n\n\t\t\ttargetLine.lookAt( v3 );\n\t\t\ttargetLine.scale.z = v3.length();\n\n\t\t};\n\n\t}();\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author Mugen87 / https://github.com/Mugen87\n\t *\n\t *\t- shows frustum, line of sight and up of the camera\n\t *\t- suitable for fast updates\n\t * \t- based on frustum visualization in lightgl.js shadowmap example\n\t *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\n\t */\n\n\tfunction CameraHelper( camera ) {\n\n\t\tvar geometry = new BufferGeometry();\n\t\tvar material = new LineBasicMaterial( { color: 0xffffff, vertexColors: FaceColors } );\n\n\t\tvar vertices = [];\n\t\tvar colors = [];\n\n\t\tvar pointMap = {};\n\n\t\t// colors\n\n\t\tvar colorFrustum = new Color( 0xffaa00 );\n\t\tvar colorCone = new Color( 0xff0000 );\n\t\tvar colorUp = new Color( 0x00aaff );\n\t\tvar colorTarget = new Color( 0xffffff );\n\t\tvar colorCross = new Color( 0x333333 );\n\n\t\t// near\n\n\t\taddLine( \"n1\", \"n2\", colorFrustum );\n\t\taddLine( \"n2\", \"n4\", colorFrustum );\n\t\taddLine( \"n4\", \"n3\", colorFrustum );\n\t\taddLine( \"n3\", \"n1\", colorFrustum );\n\n\t\t// far\n\n\t\taddLine( \"f1\", \"f2\", colorFrustum );\n\t\taddLine( \"f2\", \"f4\", colorFrustum );\n\t\taddLine( \"f4\", \"f3\", colorFrustum );\n\t\taddLine( \"f3\", \"f1\", colorFrustum );\n\n\t\t// sides\n\n\t\taddLine( \"n1\", \"f1\", colorFrustum );\n\t\taddLine( \"n2\", \"f2\", colorFrustum );\n\t\taddLine( \"n3\", \"f3\", colorFrustum );\n\t\taddLine( \"n4\", \"f4\", colorFrustum );\n\n\t\t// cone\n\n\t\taddLine( \"p\", \"n1\", colorCone );\n\t\taddLine( \"p\", \"n2\", colorCone );\n\t\taddLine( \"p\", \"n3\", colorCone );\n\t\taddLine( \"p\", \"n4\", colorCone );\n\n\t\t// up\n\n\t\taddLine( \"u1\", \"u2\", colorUp );\n\t\taddLine( \"u2\", \"u3\", colorUp );\n\t\taddLine( \"u3\", \"u1\", colorUp );\n\n\t\t// target\n\n\t\taddLine( \"c\", \"t\", colorTarget );\n\t\taddLine( \"p\", \"c\", colorCross );\n\n\t\t// cross\n\n\t\taddLine( \"cn1\", \"cn2\", colorCross );\n\t\taddLine( \"cn3\", \"cn4\", colorCross );\n\n\t\taddLine( \"cf1\", \"cf2\", colorCross );\n\t\taddLine( \"cf3\", \"cf4\", colorCross );\n\n\t\tfunction addLine( a, b, color ) {\n\n\t\t\taddPoint( a, color );\n\t\t\taddPoint( b, color );\n\n\t\t}\n\n\t\tfunction addPoint( id, color ) {\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\t\tpointMap[ id ] = [];\n\n\t\t\t}\n\n\t\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t\t}\n\n\t\tgeometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tLineSegments.call( this, geometry, material );\n\n\t\tthis.camera = camera;\n\t\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\t\tthis.matrix = camera.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.pointMap = pointMap;\n\n\t\tthis.update();\n\n\t}\n\n\tCameraHelper.prototype = Object.create( LineSegments.prototype );\n\tCameraHelper.prototype.constructor = CameraHelper;\n\n\tCameraHelper.prototype.update = function () {\n\n\t\tvar geometry, pointMap;\n\n\t\tvar vector = new Vector3();\n\t\tvar camera = new Camera();\n\n\t\tfunction setPoint( point, x, y, z ) {\n\n\t\t\tvector.set( x, y, z ).unproject( camera );\n\n\t\t\tvar points = pointMap[ point ];\n\n\t\t\tif ( points !== undefined ) {\n\n\t\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\t\t\tposition.setXYZ( points[ i ], vector.x, vector.y, vector.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn function update() {\n\n\t\t\tgeometry = this.geometry;\n\t\t\tpointMap = this.pointMap;\n\n\t\t\tvar w = 1, h = 1;\n\n\t\t\t// we need just camera projection matrix\n\t\t\t// world matrix must be identity\n\n\t\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\n\n\t\t\t// center / target\n\n\t\t\tsetPoint( \"c\", 0, 0, - 1 );\n\t\t\tsetPoint( \"t\", 0, 0,  1 );\n\n\t\t\t// near\n\n\t\t\tsetPoint( \"n1\", - w, - h, - 1 );\n\t\t\tsetPoint( \"n2\",   w, - h, - 1 );\n\t\t\tsetPoint( \"n3\", - w,   h, - 1 );\n\t\t\tsetPoint( \"n4\",   w,   h, - 1 );\n\n\t\t\t// far\n\n\t\t\tsetPoint( \"f1\", - w, - h, 1 );\n\t\t\tsetPoint( \"f2\",   w, - h, 1 );\n\t\t\tsetPoint( \"f3\", - w,   h, 1 );\n\t\t\tsetPoint( \"f4\",   w,   h, 1 );\n\n\t\t\t// up\n\n\t\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\n\t\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\n\t\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\n\n\t\t\t// cross\n\n\t\t\tsetPoint( \"cf1\", - w,   0, 1 );\n\t\t\tsetPoint( \"cf2\",   w,   0, 1 );\n\t\t\tsetPoint( \"cf3\",   0, - h, 1 );\n\t\t\tsetPoint( \"cf4\",   0,   h, 1 );\n\n\t\t\tsetPoint( \"cn1\", - w,   0, - 1 );\n\t\t\tsetPoint( \"cn2\",   w,   0, - 1 );\n\t\t\tsetPoint( \"cn3\",   0, - h, - 1 );\n\t\t\tsetPoint( \"cn4\",   0,   h, - 1 );\n\n\t\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\t};\n\n\t}();\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author Mugen87 / http://github.com/Mugen87\n\t */\n\n\tfunction BoxHelper( object, color ) {\n\n\t\tthis.object = object;\n\n\t\tif ( color === undefined ) color = 0xffff00;\n\n\t\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\t\tvar positions = new Float32Array( 8 * 3 );\n\n\t\tvar geometry = new BufferGeometry();\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\t\tgeometry.addAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\t\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color } ) );\n\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\tBoxHelper.prototype = Object.create( LineSegments.prototype );\n\tBoxHelper.prototype.constructor = BoxHelper;\n\n\tBoxHelper.prototype.update = ( function () {\n\n\t\tvar box = new Box3();\n\n\t\treturn function update( object ) {\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\n\n\t\t\t}\n\n\t\t\tif ( this.object !== undefined ) {\n\n\t\t\t\tbox.setFromObject( this.object );\n\n\t\t\t}\n\n\t\t\tif ( box.isEmpty() ) return;\n\n\t\t\tvar min = box.min;\n\t\t\tvar max = box.max;\n\n\t\t\t/*\n\t\t\t  5____4\n\t\t\t1/___0/|\n\t\t\t| 6__|_7\n\t\t\t2/___3/\n\n\t\t\t0: max.x, max.y, max.z\n\t\t\t1: min.x, max.y, max.z\n\t\t\t2: min.x, min.y, max.z\n\t\t\t3: max.x, min.y, max.z\n\t\t\t4: max.x, max.y, min.z\n\t\t\t5: min.x, max.y, min.z\n\t\t\t6: min.x, min.y, min.z\n\t\t\t7: max.x, min.y, min.z\n\t\t\t*/\n\n\t\t\tvar position = this.geometry.attributes.position;\n\t\t\tvar array = position.array;\n\n\t\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\n\t\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\n\t\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\n\t\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t\tthis.geometry.computeBoundingSphere();\n\n\t\t};\n\n\t} )();\n\n\tBoxHelper.prototype.setFromObject = function ( object ) {\n\n\t\tthis.object = object;\n\t\tthis.update();\n\n\t\treturn this;\n\n\t};\n\n\t/**\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author zz85 / http://github.com/zz85\n\t * @author bhouston / http://clara.io\n\t *\n\t * Creates an arrow for visualizing directions\n\t *\n\t * Parameters:\n\t *  dir - Vector3\n\t *  origin - Vector3\n\t *  length - Number\n\t *  color - color in hex value\n\t *  headLength - Number\n\t *  headWidth - Number\n\t */\n\n\tvar lineGeometry;\n\tvar coneGeometry;\n\n\tfunction ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tObject3D.call( this );\n\n\t\tif ( color === undefined ) color = 0xffff00;\n\t\tif ( length === undefined ) length = 1;\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\t\tif ( lineGeometry === undefined ) {\n\n\t\t\tlineGeometry = new BufferGeometry();\n\t\t\tlineGeometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\t\tconeGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\n\t\t\tconeGeometry.translate( 0, - 0.5, 0 );\n\n\t\t}\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new Line( lineGeometry, new LineBasicMaterial( { color: color } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new Mesh( coneGeometry, new MeshBasicMaterial( { color: color } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n\tArrowHelper.prototype = Object.create( Object3D.prototype );\n\tArrowHelper.prototype.constructor = ArrowHelper;\n\n\tArrowHelper.prototype.setDirection = ( function () {\n\n\t\tvar axis = new Vector3();\n\t\tvar radians;\n\n\t\treturn function setDirection( dir ) {\n\n\t\t\t// dir is assumed to be normalized\n\n\t\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\t\tradians = Math.acos( dir.y );\n\n\t\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\t\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\n\t\tthis.line.updateMatrix();\n\n\t\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\t\tthis.cone.position.y = length;\n\t\tthis.cone.updateMatrix();\n\n\t};\n\n\tArrowHelper.prototype.setColor = function ( color ) {\n\n\t\tthis.line.material.color.copy( color );\n\t\tthis.cone.material.color.copy( color );\n\n\t};\n\n\t/**\n\t * @author sroucheray / http://sroucheray.org/\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction AxisHelper( size ) {\n\n\t\tsize = size || 1;\n\n\t\tvar vertices = [\n\t\t\t0, 0, 0,  size, 0, 0,\n\t\t\t0, 0, 0,  0, size, 0,\n\t\t\t0, 0, 0,  0, 0, size\n\t\t];\n\n\t\tvar colors = [\n\t\t\t1, 0, 0,  1, 0.6, 0,\n\t\t\t0, 1, 0,  0.6, 1, 0,\n\t\t\t0, 0, 1,  0, 0.6, 1\n\t\t];\n\n\t\tvar geometry = new BufferGeometry();\n\t\tgeometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tvar material = new LineBasicMaterial( { vertexColors: VertexColors } );\n\n\t\tLineSegments.call( this, geometry, material );\n\n\t}\n\n\tAxisHelper.prototype = Object.create( LineSegments.prototype );\n\tAxisHelper.prototype.constructor = AxisHelper;\n\n\t/**\n\t * @author zz85 https://github.com/zz85\n\t *\n\t * Centripetal CatmullRom Curve - which is useful for avoiding\n\t * cusps and self-intersections in non-uniform catmull rom curves.\n\t * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n\t *\n\t * curve.type accepts centripetal(default), chordal and catmullrom\n\t * curve.tension is used for catmullrom which defaults to 0.5\n\t */\n\n\n\t/*\n\tBased on an optimized c++ solution in\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n\t - http://ideone.com/NoEbVM\n\n\tThis CubicPoly class could be used for reusing some variables and calculations,\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\n\twhich can be placed in CurveUtils.\n\t*/\n\n\tfunction CubicPoly() {\n\n\t\tvar c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t\t/*\n\t\t * Compute coefficients for a cubic polynomial\n\t\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t\t * such that\n\t\t *   p(0) = x0, p(1) = x1\n\t\t *  and\n\t\t *   p'(0) = t0, p'(1) = t1.\n\t\t */\n\t\tfunction init( x0, x1, t0, t1 ) {\n\n\t\t\tc0 = x0;\n\t\t\tc1 = t0;\n\t\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t\t},\n\n\t\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\t\tt1 *= dt1;\n\t\t\t\tt2 *= dt1;\n\n\t\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t\t},\n\n\t\t\tcalc: function ( t ) {\n\n\t\t\t\tvar t2 = t * t;\n\t\t\t\tvar t3 = t2 * t;\n\t\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar tmp = new Vector3();\n\tvar px = new CubicPoly();\n\tvar py = new CubicPoly();\n\tvar pz = new CubicPoly();\n\n\tfunction CatmullRomCurve3( points ) {\n\n\t\tCurve.call( this );\n\n\t\tif ( points.length < 2 ) console.warn( 'THREE.CatmullRomCurve3: Points array needs at least two entries.' );\n\n\t\tthis.points = points || [];\n\t\tthis.closed = false;\n\n\t}\n\n\tCatmullRomCurve3.prototype = Object.create( Curve.prototype );\n\tCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\n\tCatmullRomCurve3.prototype.getPoint = function ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar l = points.length;\n\n\t\tvar point = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tif ( this.closed ) {\n\n\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\n\n\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\t\tintPoint = l - 2;\n\t\t\tweight = 1;\n\n\t\t}\n\n\t\tvar p0, p1, p2, p3; // 4 points\n\n\t\tif ( this.closed || intPoint > 0 ) {\n\n\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate first point\n\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\t\tp0 = tmp;\n\n\t\t}\n\n\t\tp1 = points[ intPoint % l ];\n\t\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\t\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate last point\n\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\t\tp3 = tmp;\n\n\t\t}\n\n\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\n\n\t\t\t// init Centripetal / Chordal Catmull-Rom\n\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\n\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t\t// safety check for repeated points\n\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t\t} else if ( this.type === 'catmullrom' ) {\n\n\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\n\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\n\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\n\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\n\n\t\t}\n\n\t\treturn new Vector3( px.calc( weight ), py.calc( weight ), pz.calc( weight ) );\n\n\t};\n\n\tfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\t\tCurve.call( this );\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tCubicBezierCurve3.prototype = Object.create( Curve.prototype );\n\tCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\n\tCubicBezierCurve3.prototype.getPoint = function ( t ) {\n\n\t\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\treturn new Vector3(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t\t);\n\n\t};\n\n\tfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\t\tCurve.call( this );\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\n\tQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\n\tQuadraticBezierCurve3.prototype.getPoint = function ( t ) {\n\n\t\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\treturn new Vector3(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t\t);\n\n\t};\n\n\tfunction LineCurve3( v1, v2 ) {\n\n\t\tCurve.call( this );\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tLineCurve3.prototype = Object.create( Curve.prototype );\n\tLineCurve3.prototype.constructor = LineCurve3;\n\n\tLineCurve3.prototype.getPoint = function ( t ) {\n\n\t\tif ( t === 1 ) {\n\n\t\t\treturn this.v2.clone();\n\n\t\t}\n\n\t\tvar vector = new Vector3();\n\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\n\t\tvector.multiplyScalar( t );\n\t\tvector.add( this.v1 );\n\n\t\treturn vector;\n\n\t};\n\n\tfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t}\n\n\tArcCurve.prototype = Object.create( EllipseCurve.prototype );\n\tArcCurve.prototype.constructor = ArcCurve;\n\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t */\n\n\tvar SceneUtils = {\n\n\t\tcreateMultiMaterialObject: function ( geometry, materials ) {\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n\t\t\t\tgroup.add( new Mesh( geometry, materials[ i ] ) );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t},\n\n\t\tdetach: function ( child, parent, scene ) {\n\n\t\t\tchild.applyMatrix( parent.matrixWorld );\n\t\t\tparent.remove( child );\n\t\t\tscene.add( child );\n\n\t\t},\n\n\t\tattach: function ( child, scene, parent ) {\n\n\t\t\tchild.applyMatrix( new Matrix4().getInverse( parent.matrixWorld ) );\n\n\t\t\tscene.remove( child );\n\t\t\tparent.add( child );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\n\tfunction Face4( a, b, c, d, normal, color, materialIndex ) {\n\n\t\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\n\t\treturn new Face3( a, b, c, normal, color, materialIndex );\n\n\t}\n\n\tvar LineStrip = 0;\n\n\tvar LinePieces = 1;\n\n\tfunction MeshFaceMaterial( materials ) {\n\n\t\tconsole.warn( 'THREE.MeshFaceMaterial has been removed. Use an Array instead.' );\n\t\treturn materials;\n\n\t}\n\n\tfunction MultiMaterial( materials ) {\n\n\t\tif ( materials === undefined ) materials = [];\n\n\t\tconsole.warn( 'THREE.MultiMaterial has been removed. Use an Array instead.' );\n\t\tmaterials.isMultiMaterial = true;\n\t\tmaterials.materials = materials;\n\t\tmaterials.clone = function () {\n\n\t\t\treturn materials.slice();\n\n\t\t};\n\t\treturn materials;\n\n\t}\n\n\tfunction PointCloud( geometry, material ) {\n\n\t\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\n\t\treturn new Points( geometry, material );\n\n\t}\n\n\tfunction Particle( material ) {\n\n\t\tconsole.warn( 'THREE.Particle has been renamed to THREE.Sprite.' );\n\t\treturn new Sprite( material );\n\n\t}\n\n\tfunction ParticleSystem( geometry, material ) {\n\n\t\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\n\t\treturn new Points( geometry, material );\n\n\t}\n\n\tfunction PointCloudMaterial( parameters ) {\n\n\t\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\n\t\treturn new PointsMaterial( parameters );\n\n\t}\n\n\tfunction ParticleBasicMaterial( parameters ) {\n\n\t\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\n\t\treturn new PointsMaterial( parameters );\n\n\t}\n\n\tfunction ParticleSystemMaterial( parameters ) {\n\n\t\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\n\t\treturn new PointsMaterial( parameters );\n\n\t}\n\n\tfunction Vertex( x, y, z ) {\n\n\t\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\n\t\treturn new Vector3( x, y, z );\n\n\t}\n\n\t//\n\n\tfunction DynamicBufferAttribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\n\t\treturn new BufferAttribute( array, itemSize ).setDynamic( true );\n\n\t}\n\n\tfunction Int8Attribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.' );\n\t\treturn new Int8BufferAttribute( array, itemSize );\n\n\t}\n\n\tfunction Uint8Attribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.' );\n\t\treturn new Uint8BufferAttribute( array, itemSize );\n\n\t}\n\n\tfunction Uint8ClampedAttribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.' );\n\t\treturn new Uint8ClampedBufferAttribute( array, itemSize );\n\n\t}\n\n\tfunction Int16Attribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.' );\n\t\treturn new Int16BufferAttribute( array, itemSize );\n\n\t}\n\n\tfunction Uint16Attribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.' );\n\t\treturn new Uint16BufferAttribute( array, itemSize );\n\n\t}\n\n\tfunction Int32Attribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.' );\n\t\treturn new Int32BufferAttribute( array, itemSize );\n\n\t}\n\n\tfunction Uint32Attribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.' );\n\t\treturn new Uint32BufferAttribute( array, itemSize );\n\n\t}\n\n\tfunction Float32Attribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.' );\n\t\treturn new Float32BufferAttribute( array, itemSize );\n\n\t}\n\n\tfunction Float64Attribute( array, itemSize ) {\n\n\t\tconsole.warn( 'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.' );\n\t\treturn new Float64BufferAttribute( array, itemSize );\n\n\t}\n\n\t//\n\n\tCurve.create = function ( construct, getPoint ) {\n\n\t\tconsole.log( 'THREE.Curve.create() has been deprecated' );\n\n\t\tconstruct.prototype = Object.create( Curve.prototype );\n\t\tconstruct.prototype.constructor = construct;\n\t\tconstruct.prototype.getPoint = getPoint;\n\n\t\treturn construct;\n\n\t};\n\n\t//\n\n\tfunction ClosedSplineCurve3( points ) {\n\n\t\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\n\n\t\tCatmullRomCurve3.call( this, points );\n\t\tthis.type = 'catmullrom';\n\t\tthis.closed = true;\n\n\t}\n\n\tClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\n\n\t//\n\n\tfunction SplineCurve3( points ) {\n\n\t\tconsole.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\n\n\t\tCatmullRomCurve3.call( this, points );\n\t\tthis.type = 'catmullrom';\n\n\t}\n\n\tSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\n\n\t//\n\n\tfunction Spline( points ) {\n\n\t\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\n\n\t\tCatmullRomCurve3.call( this, points );\n\t\tthis.type = 'catmullrom';\n\n\t}\n\n\tSpline.prototype = Object.create( CatmullRomCurve3.prototype );\n\n\tObject.assign( Spline.prototype, {\n\n\t\tinitFromArray: function ( a ) {\n\n\t\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\n\n\t\t},\n\t\tgetControlPointsArray: function ( optionalTarget ) {\n\n\t\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\n\n\t\t},\n\t\treparametrizeByArcLength: function ( samplingCoef ) {\n\n\t\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\n\n\t\t}\n\n\t} );\n\n\t//\n\tfunction BoundingBoxHelper( object, color ) {\n\n\t\tconsole.warn( 'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.' );\n\t\treturn new BoxHelper( object, color );\n\n\t}\n\n\tfunction EdgesHelper( object, hex ) {\n\n\t\tconsole.warn( 'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.' );\n\t\treturn new LineSegments( new EdgesGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\n\n\t}\n\n\tGridHelper.prototype.setColors = function () {\n\n\t\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\n\n\t};\n\n\tSkeletonHelper.prototype.update = function () {\n\n\t\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\n\t\t\n\t};\n\n\tfunction WireframeHelper( object, hex ) {\n\n\t\tconsole.warn( 'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.' );\n\t\treturn new LineSegments( new WireframeGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\n\n\t}\n\n\t//\n\n\tfunction XHRLoader( manager ) {\n\n\t\tconsole.warn( 'THREE.XHRLoader has been renamed to THREE.FileLoader.' );\n\t\treturn new FileLoader( manager );\n\n\t}\n\n\tfunction BinaryTextureLoader( manager ) {\n\n\t\tconsole.warn( 'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.' );\n\t\treturn new DataTextureLoader( manager );\n\n\t}\n\n\t//\n\n\tObject.assign( Box2.prototype, {\n\n\t\tcenter: function ( optionalTarget ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\n\t\t\treturn this.getCenter( optionalTarget );\n\n\t\t},\n\t\tempty: function () {\n\n\t\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\n\t\t\treturn this.isEmpty();\n\n\t\t},\n\t\tisIntersectionBox: function ( box ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\t\treturn this.intersectsBox( box );\n\n\t\t},\n\t\tsize: function ( optionalTarget ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\n\t\t\treturn this.getSize( optionalTarget );\n\n\t\t}\n\t} );\n\n\tObject.assign( Box3.prototype, {\n\n\t\tcenter: function ( optionalTarget ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\n\t\t\treturn this.getCenter( optionalTarget );\n\n\t\t},\n\t\tempty: function () {\n\n\t\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\t\t\treturn this.isEmpty();\n\n\t\t},\n\t\tisIntersectionBox: function ( box ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\t\treturn this.intersectsBox( box );\n\n\t\t},\n\t\tisIntersectionSphere: function ( sphere ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t},\n\t\tsize: function ( optionalTarget ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\n\t\t\treturn this.getSize( optionalTarget );\n\n\t\t}\n\t} );\n\n\tLine3.prototype.center = function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t};\n\n\t_Math.random16 = function () {\n\n\t\tconsole.warn( 'THREE.Math.random16() has been deprecated. Use Math.random() instead.' );\n\t\treturn Math.random();\n\n\t};\n\n\tObject.assign( Matrix3.prototype, {\n\n\t\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\t\treturn this.toArray( array, offset );\n\n\t\t},\n\t\tmultiplyVector3: function ( vector ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\t\treturn vector.applyMatrix3( this );\n\n\t\t},\n\t\tmultiplyVector3Array: function ( a ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.'  );\n\n\t\t},\n\t\tapplyToBuffer: function( buffer, offset, length ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.' );\n\t\t\treturn this.applyToBufferAttribute( buffer );\n\n\t\t},\n\t\tapplyToVector3Array: function( array, offset, length ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Matrix4.prototype, {\n\n\t\textractPosition: function ( m ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\t\treturn this.copyPosition( m );\n\n\t\t},\n\t\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\t\treturn this.toArray( array, offset );\n\n\t\t},\n\t\tgetPosition: function () {\n\n\t\t\tvar v1;\n\n\t\t\treturn function getPosition() {\n\n\t\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\t\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\t\t\t\treturn v1.setFromMatrixColumn( this, 3 );\n\n\t\t\t};\n\n\t\t}(),\n\t\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\t\t\treturn this.makeRotationFromQuaternion( q );\n\n\t\t},\n\t\tmultiplyToArray: function () {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\n\n\t\t},\n\t\tmultiplyVector3: function ( vector ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\t\treturn vector.applyMatrix4( this );\n\n\t\t},\n\t\tmultiplyVector4: function ( vector ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\t\treturn vector.applyMatrix4( this );\n\n\t\t},\n\t\tmultiplyVector3Array: function ( a ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.'  );\n\n\t\t},\n\t\trotateAxis: function ( v ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\t\t\tv.transformDirection( this );\n\n\t\t},\n\t\tcrossVector: function ( vector ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\t\treturn vector.applyMatrix4( this );\n\n\t\t},\n\t\ttranslate: function () {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t\t},\n\t\trotateX: function () {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t\t},\n\t\trotateY: function () {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t\t},\n\t\trotateZ: function () {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t\t},\n\t\trotateByAxis: function () {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t\t},\n\t\tapplyToBuffer: function( buffer, offset, length ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.' );\n\t\t\treturn this.applyToBufferAttribute( buffer );\n\n\t\t},\n\t\tapplyToVector3Array: function( array, offset, length ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\n\n\t\t},\n\t\tmakeFrustum: function( left, right, bottom, top, near, far ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\n\t\t\treturn this.makePerspective( left, right, top, bottom, near, far );\n\n\t\t}\n\n\t} );\n\n\tPlane.prototype.isIntersectionLine = function ( line ) {\n\n\t\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\t\treturn this.intersectsLine( line );\n\n\t};\n\n\tQuaternion.prototype.multiplyVector3 = function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\t\treturn vector.applyQuaternion( this );\n\n\t};\n\n\tObject.assign( Ray.prototype, {\n\n\t\tisIntersectionBox: function ( box ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\t\treturn this.intersectsBox( box );\n\n\t\t},\n\t\tisIntersectionPlane: function ( plane ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\n\t\t\treturn this.intersectsPlane( plane );\n\n\t\t},\n\t\tisIntersectionSphere: function ( sphere ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Shape.prototype, {\n\n\t\textrude: function ( options ) {\n\n\t\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\n\t\t\treturn new ExtrudeGeometry( this, options );\n\n\t\t},\n\t\tmakeGeometry: function ( options ) {\n\n\t\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\n\t\t\treturn new ShapeGeometry( this, options );\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Vector2.prototype, {\n\n\t\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\t\tconsole.error( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Vector3.prototype, {\n\n\t\tsetEulerFromRotationMatrix: function () {\n\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t\t},\n\t\tsetEulerFromQuaternion: function () {\n\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t\t},\n\t\tgetPositionFromMatrix: function ( m ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\t\t\treturn this.setFromMatrixPosition( m );\n\n\t\t},\n\t\tgetScaleFromMatrix: function ( m ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\t\t\treturn this.setFromMatrixScale( m );\n\n\t\t},\n\t\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\t\t\treturn this.setFromMatrixColumn( matrix, index );\n\n\t\t},\n\t\tapplyProjection: function ( m ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\n\t\t\treturn this.applyMatrix4( m );\n\n\t\t},\n\t\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t\t}\n\n\t} );\n\n\tObject.assign( Vector4.prototype, {\n\n\t\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\t\tconsole.error( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t\t}\n\n\t} );\n\n\t//\n\n\tGeometry.prototype.computeTangents = function () {\n\n\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n\t};\n\n\tObject.assign( Object3D.prototype, {\n\n\t\tgetChildByName: function ( name ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\t\treturn this.getObjectByName( name );\n\n\t\t},\n\t\trenderDepth: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\n\t\t},\n\t\ttranslate: function ( distance, axis ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\t\treturn this.translateOnAxis( axis, distance );\n\n\t\t}\n\n\t} );\n\n\tObject.defineProperties( Object3D.prototype, {\n\n\t\teulerOrder: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\t\treturn this.rotation.order;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\t\tthis.rotation.order = value;\n\n\t\t\t}\n\t\t},\n\t\tuseQuaternion: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t\t},\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\tObject.defineProperties( LOD.prototype, {\n\n\t\tobjects: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\t\treturn this.levels;\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\tObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t\t}\n\n\t} );\n\n\tObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\t\treturn this.arcLengthDivisions;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\t\tthis.arcLengthDivisions = value;\n\n\t\t}\n\n\t} );\n\n\t//\n\n\tPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\t\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\n\t\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\n\n\t\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\t\tthis.setFocalLength( focalLength );\n\n\t};\n\n\t//\n\n\tObject.defineProperties( Light.prototype, {\n\t\tonlyShadow: {\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\n\t\t\t}\n\t\t},\n\t\tshadowCameraFov: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\t\tthis.shadow.camera.fov = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowCameraLeft: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\t\tthis.shadow.camera.left = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowCameraRight: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\t\tthis.shadow.camera.right = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowCameraTop: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\t\tthis.shadow.camera.top = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowCameraBottom: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\t\tthis.shadow.camera.bottom = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowCameraNear: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\t\tthis.shadow.camera.near = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowCameraFar: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\t\tthis.shadow.camera.far = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowCameraVisible: {\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\n\t\t\t}\n\t\t},\n\t\tshadowBias: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\t\tthis.shadow.bias = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowDarkness: {\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\n\t\t\t}\n\t\t},\n\t\tshadowMapWidth: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\t\tthis.shadow.mapSize.width = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowMapHeight: {\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\t\tthis.shadow.mapSize.height = value;\n\n\t\t\t}\n\t\t}\n\t} );\n\n\t//\n\n\tObject.defineProperties( BufferAttribute.prototype, {\n\n\t\tlength: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\n\t\t\t\treturn this.array.length;\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\tObject.assign( BufferGeometry.prototype, {\n\n\t\taddIndex: function ( index ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\t\t\tthis.setIndex( index );\n\n\t\t},\n\t\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\t\tif ( indexOffset !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\n\t\t\t}\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\t\t\tthis.addGroup( start, count );\n\n\t\t},\n\t\tclearDrawCalls: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\t\t\tthis.clearGroups();\n\n\t\t},\n\t\tcomputeTangents: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\n\n\t\t},\n\t\tcomputeOffsets: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\n\t\t}\n\n\t} );\n\n\tObject.defineProperties( BufferGeometry.prototype, {\n\n\t\tdrawcalls: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\t\treturn this.groups;\n\n\t\t\t}\n\t\t},\n\t\toffsets: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\t\treturn this.groups;\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\t//\n\n\tObject.defineProperties( Uniform.prototype, {\n\n\t\tdynamic: {\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\n\n\t\t\t}\n\t\t},\n\t\tonUpdate: {\n\t\t\tvalue: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\n\t\t\t\treturn this;\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\t//\n\n\tObject.defineProperties( Material.prototype, {\n\n\t\twrapAround: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t\t},\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t\t}\n\t\t},\n\t\twrapRGB: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\n\t\t\t\treturn new Color();\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\tObject.defineProperties( MeshPhongMaterial.prototype, {\n\n\t\tmetal: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\t\treturn false;\n\n\t\t\t},\n\t\t\tset: function () {\n\n\t\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\tObject.defineProperties( ShaderMaterial.prototype, {\n\n\t\tderivatives: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\t\treturn this.extensions.derivatives;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\t\tthis.extensions.derivatives = value;\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\t//\n\n\tObject.assign( WebGLRenderer.prototype, {\n\n\t\tgetCurrentRenderTarget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\n\t\t\treturn this.getRenderTarget();\n\n\t\t},\n\n\t\tsupportsFloatTextures: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\t\t\treturn this.extensions.get( 'OES_texture_float' );\n\n\t\t},\n\t\tsupportsHalfFloatTextures: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\t\t\treturn this.extensions.get( 'OES_texture_half_float' );\n\n\t\t},\n\t\tsupportsStandardDerivatives: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\t\t\treturn this.extensions.get( 'OES_standard_derivatives' );\n\n\t\t},\n\t\tsupportsCompressedTextureS3TC: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\t\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t},\n\t\tsupportsCompressedTexturePVRTC: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\t\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t},\n\t\tsupportsBlendMinMax: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\t\t\treturn this.extensions.get( 'EXT_blend_minmax' );\n\n\t\t},\n\t\tsupportsVertexTextures: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\n\t\t\treturn this.capabilities.vertexTextures;\n\n\t\t},\n\t\tsupportsInstancedArrays: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\t\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t},\n\t\tenableScissorTest: function ( boolean ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\t\t\tthis.setScissorTest( boolean );\n\n\t\t},\n\t\tinitMaterial: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t\t},\n\t\taddPrePlugin: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t\t},\n\t\taddPostPlugin: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t\t},\n\t\tupdateShadowMap: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t\t}\n\n\t} );\n\n\tObject.defineProperties( WebGLRenderer.prototype, {\n\n\t\tshadowMapEnabled: {\n\t\t\tget: function () {\n\n\t\t\t\treturn this.shadowMap.enabled;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\t\tthis.shadowMap.enabled = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowMapType: {\n\t\t\tget: function () {\n\n\t\t\t\treturn this.shadowMap.type;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\t\tthis.shadowMap.type = value;\n\n\t\t\t}\n\t\t},\n\t\tshadowMapCullFace: {\n\t\t\tget: function () {\n\n\t\t\t\treturn this.shadowMap.cullFace;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\n\t\t\t\tthis.shadowMap.cullFace = value;\n\n\t\t\t}\n\t\t}\n\t} );\n\n\tObject.defineProperties( WebGLShadowMap.prototype, {\n\n\t\tcullFace: {\n\t\t\tget: function () {\n\n\t\t\t\treturn this.renderReverseSided ? CullFaceFront : CullFaceBack;\n\n\t\t\t},\n\t\t\tset: function ( cullFace ) {\n\n\t\t\t\tvar value = ( cullFace !== CullFaceBack );\n\t\t\t\tconsole.warn( \"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \" + value + \".\" );\n\t\t\t\tthis.renderReverseSided = value;\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\t//\n\n\tObject.defineProperties( WebGLRenderTarget.prototype, {\n\n\t\twrapS: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\t\treturn this.texture.wrapS;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\t\tthis.texture.wrapS = value;\n\n\t\t\t}\n\t\t},\n\t\twrapT: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\t\treturn this.texture.wrapT;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\t\tthis.texture.wrapT = value;\n\n\t\t\t}\n\t\t},\n\t\tmagFilter: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\t\treturn this.texture.magFilter;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\t\tthis.texture.magFilter = value;\n\n\t\t\t}\n\t\t},\n\t\tminFilter: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\t\treturn this.texture.minFilter;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\t\tthis.texture.minFilter = value;\n\n\t\t\t}\n\t\t},\n\t\tanisotropy: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\t\treturn this.texture.anisotropy;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\t\tthis.texture.anisotropy = value;\n\n\t\t\t}\n\t\t},\n\t\toffset: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\t\treturn this.texture.offset;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\t\tthis.texture.offset = value;\n\n\t\t\t}\n\t\t},\n\t\trepeat: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\t\treturn this.texture.repeat;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\t\tthis.texture.repeat = value;\n\n\t\t\t}\n\t\t},\n\t\tformat: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\t\treturn this.texture.format;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\t\tthis.texture.format = value;\n\n\t\t\t}\n\t\t},\n\t\ttype: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\t\treturn this.texture.type;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\t\tthis.texture.type = value;\n\n\t\t\t}\n\t\t},\n\t\tgenerateMipmaps: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\t\treturn this.texture.generateMipmaps;\n\n\t\t\t},\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\t\tthis.texture.generateMipmaps = value;\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\t//\n\n\tAudio.prototype.load = function ( file ) {\n\n\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\n\t\tvar scope = this;\n\t\tvar audioLoader = new AudioLoader();\n\t\taudioLoader.load( file, function ( buffer ) {\n\n\t\t\tscope.setBuffer( buffer );\n\n\t\t} );\n\t\treturn this;\n\n\t};\n\n\tAudioAnalyser.prototype.getData = function () {\n\n\t\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\n\t\treturn this.getFrequencyData();\n\n\t};\n\n\t//\n\n\tvar GeometryUtils = {\n\n\t\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\n\n\t\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\n\t\t\tvar matrix;\n\n\t\t\tif ( geometry2.isMesh ) {\n\n\t\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\n\n\t\t\t\tmatrix = geometry2.matrix;\n\t\t\t\tgeometry2 = geometry2.geometry;\n\n\t\t\t}\n\n\t\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\n\n\t\t},\n\n\t\tcenter: function ( geometry ) {\n\n\t\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\n\t\t\treturn geometry.center();\n\n\t\t}\n\n\t};\n\n\tvar ImageUtils = {\n\n\t\tcrossOrigin: undefined,\n\n\t\tloadTexture: function ( url, mapping, onLoad, onError ) {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\n\n\t\t\tvar loader = new TextureLoader();\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tvar texture = loader.load( url, onLoad, undefined, onError );\n\n\t\t\tif ( mapping ) texture.mapping = mapping;\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\tloadTextureCube: function ( urls, mapping, onLoad, onError ) {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\n\n\t\t\tvar loader = new CubeTextureLoader();\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tvar texture = loader.load( urls, onLoad, undefined, onError );\n\n\t\t\tif ( mapping ) texture.mapping = mapping;\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\tloadCompressedTexture: function () {\n\n\t\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\n\n\t\t},\n\n\t\tloadCompressedTextureCube: function () {\n\n\t\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\n\n\t\t}\n\n\t};\n\n\t//\n\n\tfunction Projector() {\n\n\t\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\n\n\t\tthis.projectVector = function ( vector, camera ) {\n\n\t\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\t\tvector.project( camera );\n\n\t\t};\n\n\t\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\t\tvector.unproject( camera );\n\n\t\t};\n\n\t\tthis.pickingRay = function () {\n\n\t\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t\t};\n\n\t}\n\n\t//\n\n\tfunction CanvasRenderer() {\n\n\t\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\n\n\t\tthis.domElement = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\tthis.clear = function () {};\n\t\tthis.render = function () {};\n\t\tthis.setClearColor = function () {};\n\t\tthis.setSize = function () {};\n\n\t}\n\n\texports.WebGLRenderTargetCube = WebGLRenderTargetCube;\n\texports.WebGLRenderTarget = WebGLRenderTarget;\n\texports.WebGLRenderer = WebGLRenderer;\n\texports.ShaderLib = ShaderLib;\n\texports.UniformsLib = UniformsLib;\n\texports.UniformsUtils = UniformsUtils;\n\texports.ShaderChunk = ShaderChunk;\n\texports.FogExp2 = FogExp2;\n\texports.Fog = Fog;\n\texports.Scene = Scene;\n\texports.LensFlare = LensFlare;\n\texports.Sprite = Sprite;\n\texports.LOD = LOD;\n\texports.SkinnedMesh = SkinnedMesh;\n\texports.Skeleton = Skeleton;\n\texports.Bone = Bone;\n\texports.Mesh = Mesh;\n\texports.LineSegments = LineSegments;\n\texports.LineLoop = LineLoop;\n\texports.Line = Line;\n\texports.Points = Points;\n\texports.Group = Group;\n\texports.VideoTexture = VideoTexture;\n\texports.DataTexture = DataTexture;\n\texports.CompressedTexture = CompressedTexture;\n\texports.CubeTexture = CubeTexture;\n\texports.CanvasTexture = CanvasTexture;\n\texports.DepthTexture = DepthTexture;\n\texports.Texture = Texture;\n\texports.CompressedTextureLoader = CompressedTextureLoader;\n\texports.DataTextureLoader = DataTextureLoader;\n\texports.CubeTextureLoader = CubeTextureLoader;\n\texports.TextureLoader = TextureLoader;\n\texports.ObjectLoader = ObjectLoader;\n\texports.MaterialLoader = MaterialLoader;\n\texports.BufferGeometryLoader = BufferGeometryLoader;\n\texports.DefaultLoadingManager = DefaultLoadingManager;\n\texports.LoadingManager = LoadingManager;\n\texports.JSONLoader = JSONLoader;\n\texports.ImageLoader = ImageLoader;\n\texports.FontLoader = FontLoader;\n\texports.FileLoader = FileLoader;\n\texports.Loader = Loader;\n\texports.Cache = Cache;\n\texports.AudioLoader = AudioLoader;\n\texports.SpotLightShadow = SpotLightShadow;\n\texports.SpotLight = SpotLight;\n\texports.PointLight = PointLight;\n\texports.RectAreaLight = RectAreaLight;\n\texports.HemisphereLight = HemisphereLight;\n\texports.DirectionalLightShadow = DirectionalLightShadow;\n\texports.DirectionalLight = DirectionalLight;\n\texports.AmbientLight = AmbientLight;\n\texports.LightShadow = LightShadow;\n\texports.Light = Light;\n\texports.StereoCamera = StereoCamera;\n\texports.PerspectiveCamera = PerspectiveCamera;\n\texports.OrthographicCamera = OrthographicCamera;\n\texports.CubeCamera = CubeCamera;\n\texports.ArrayCamera = ArrayCamera;\n\texports.Camera = Camera;\n\texports.AudioListener = AudioListener;\n\texports.PositionalAudio = PositionalAudio;\n\texports.AudioContext = AudioContext;\n\texports.AudioAnalyser = AudioAnalyser;\n\texports.Audio = Audio;\n\texports.VectorKeyframeTrack = VectorKeyframeTrack;\n\texports.StringKeyframeTrack = StringKeyframeTrack;\n\texports.QuaternionKeyframeTrack = QuaternionKeyframeTrack;\n\texports.NumberKeyframeTrack = NumberKeyframeTrack;\n\texports.ColorKeyframeTrack = ColorKeyframeTrack;\n\texports.BooleanKeyframeTrack = BooleanKeyframeTrack;\n\texports.PropertyMixer = PropertyMixer;\n\texports.PropertyBinding = PropertyBinding;\n\texports.KeyframeTrack = KeyframeTrack;\n\texports.AnimationUtils = AnimationUtils;\n\texports.AnimationObjectGroup = AnimationObjectGroup;\n\texports.AnimationMixer = AnimationMixer;\n\texports.AnimationClip = AnimationClip;\n\texports.Uniform = Uniform;\n\texports.InstancedBufferGeometry = InstancedBufferGeometry;\n\texports.BufferGeometry = BufferGeometry;\n\texports.GeometryIdCount = GeometryIdCount;\n\texports.Geometry = Geometry;\n\texports.InterleavedBufferAttribute = InterleavedBufferAttribute;\n\texports.InstancedInterleavedBuffer = InstancedInterleavedBuffer;\n\texports.InterleavedBuffer = InterleavedBuffer;\n\texports.InstancedBufferAttribute = InstancedBufferAttribute;\n\texports.Face3 = Face3;\n\texports.Object3D = Object3D;\n\texports.Raycaster = Raycaster;\n\texports.Layers = Layers;\n\texports.EventDispatcher = EventDispatcher;\n\texports.Clock = Clock;\n\texports.QuaternionLinearInterpolant = QuaternionLinearInterpolant;\n\texports.LinearInterpolant = LinearInterpolant;\n\texports.DiscreteInterpolant = DiscreteInterpolant;\n\texports.CubicInterpolant = CubicInterpolant;\n\texports.Interpolant = Interpolant;\n\texports.Triangle = Triangle;\n\texports.Math = _Math;\n\texports.Spherical = Spherical;\n\texports.Cylindrical = Cylindrical;\n\texports.Plane = Plane;\n\texports.Frustum = Frustum;\n\texports.Sphere = Sphere;\n\texports.Ray = Ray;\n\texports.Matrix4 = Matrix4;\n\texports.Matrix3 = Matrix3;\n\texports.Box3 = Box3;\n\texports.Box2 = Box2;\n\texports.Line3 = Line3;\n\texports.Euler = Euler;\n\texports.Vector4 = Vector4;\n\texports.Vector3 = Vector3;\n\texports.Vector2 = Vector2;\n\texports.Quaternion = Quaternion;\n\texports.Color = Color;\n\texports.MorphBlendMesh = MorphBlendMesh;\n\texports.ImmediateRenderObject = ImmediateRenderObject;\n\texports.VertexNormalsHelper = VertexNormalsHelper;\n\texports.SpotLightHelper = SpotLightHelper;\n\texports.SkeletonHelper = SkeletonHelper;\n\texports.PointLightHelper = PointLightHelper;\n\texports.RectAreaLightHelper = RectAreaLightHelper;\n\texports.HemisphereLightHelper = HemisphereLightHelper;\n\texports.GridHelper = GridHelper;\n\texports.PolarGridHelper = PolarGridHelper;\n\texports.FaceNormalsHelper = FaceNormalsHelper;\n\texports.DirectionalLightHelper = DirectionalLightHelper;\n\texports.CameraHelper = CameraHelper;\n\texports.BoxHelper = BoxHelper;\n\texports.ArrowHelper = ArrowHelper;\n\texports.AxisHelper = AxisHelper;\n\texports.CatmullRomCurve3 = CatmullRomCurve3;\n\texports.CubicBezierCurve3 = CubicBezierCurve3;\n\texports.QuadraticBezierCurve3 = QuadraticBezierCurve3;\n\texports.LineCurve3 = LineCurve3;\n\texports.ArcCurve = ArcCurve;\n\texports.EllipseCurve = EllipseCurve;\n\texports.SplineCurve = SplineCurve;\n\texports.CubicBezierCurve = CubicBezierCurve;\n\texports.QuadraticBezierCurve = QuadraticBezierCurve;\n\texports.LineCurve = LineCurve;\n\texports.Shape = Shape;\n\texports.Path = Path;\n\texports.ShapePath = ShapePath;\n\texports.Font = Font;\n\texports.CurvePath = CurvePath;\n\texports.Curve = Curve;\n\texports.ShapeUtils = ShapeUtils;\n\texports.SceneUtils = SceneUtils;\n\texports.WireframeGeometry = WireframeGeometry;\n\texports.ParametricGeometry = ParametricGeometry;\n\texports.ParametricBufferGeometry = ParametricBufferGeometry;\n\texports.TetrahedronGeometry = TetrahedronGeometry;\n\texports.TetrahedronBufferGeometry = TetrahedronBufferGeometry;\n\texports.OctahedronGeometry = OctahedronGeometry;\n\texports.OctahedronBufferGeometry = OctahedronBufferGeometry;\n\texports.IcosahedronGeometry = IcosahedronGeometry;\n\texports.IcosahedronBufferGeometry = IcosahedronBufferGeometry;\n\texports.DodecahedronGeometry = DodecahedronGeometry;\n\texports.DodecahedronBufferGeometry = DodecahedronBufferGeometry;\n\texports.PolyhedronGeometry = PolyhedronGeometry;\n\texports.PolyhedronBufferGeometry = PolyhedronBufferGeometry;\n\texports.TubeGeometry = TubeGeometry;\n\texports.TubeBufferGeometry = TubeBufferGeometry;\n\texports.TorusKnotGeometry = TorusKnotGeometry;\n\texports.TorusKnotBufferGeometry = TorusKnotBufferGeometry;\n\texports.TorusGeometry = TorusGeometry;\n\texports.TorusBufferGeometry = TorusBufferGeometry;\n\texports.TextGeometry = TextGeometry;\n\texports.TextBufferGeometry = TextBufferGeometry;\n\texports.SphereGeometry = SphereGeometry;\n\texports.SphereBufferGeometry = SphereBufferGeometry;\n\texports.RingGeometry = RingGeometry;\n\texports.RingBufferGeometry = RingBufferGeometry;\n\texports.PlaneGeometry = PlaneGeometry;\n\texports.PlaneBufferGeometry = PlaneBufferGeometry;\n\texports.LatheGeometry = LatheGeometry;\n\texports.LatheBufferGeometry = LatheBufferGeometry;\n\texports.ShapeGeometry = ShapeGeometry;\n\texports.ShapeBufferGeometry = ShapeBufferGeometry;\n\texports.ExtrudeGeometry = ExtrudeGeometry;\n\texports.ExtrudeBufferGeometry = ExtrudeBufferGeometry;\n\texports.EdgesGeometry = EdgesGeometry;\n\texports.ConeGeometry = ConeGeometry;\n\texports.ConeBufferGeometry = ConeBufferGeometry;\n\texports.CylinderGeometry = CylinderGeometry;\n\texports.CylinderBufferGeometry = CylinderBufferGeometry;\n\texports.CircleGeometry = CircleGeometry;\n\texports.CircleBufferGeometry = CircleBufferGeometry;\n\texports.BoxGeometry = BoxGeometry;\n\texports.BoxBufferGeometry = BoxBufferGeometry;\n\texports.ShadowMaterial = ShadowMaterial;\n\texports.SpriteMaterial = SpriteMaterial;\n\texports.RawShaderMaterial = RawShaderMaterial;\n\texports.ShaderMaterial = ShaderMaterial;\n\texports.PointsMaterial = PointsMaterial;\n\texports.MeshPhysicalMaterial = MeshPhysicalMaterial;\n\texports.MeshStandardMaterial = MeshStandardMaterial;\n\texports.MeshPhongMaterial = MeshPhongMaterial;\n\texports.MeshToonMaterial = MeshToonMaterial;\n\texports.MeshNormalMaterial = MeshNormalMaterial;\n\texports.MeshLambertMaterial = MeshLambertMaterial;\n\texports.MeshDepthMaterial = MeshDepthMaterial;\n\texports.MeshBasicMaterial = MeshBasicMaterial;\n\texports.LineDashedMaterial = LineDashedMaterial;\n\texports.LineBasicMaterial = LineBasicMaterial;\n\texports.Material = Material;\n\texports.Float64BufferAttribute = Float64BufferAttribute;\n\texports.Float32BufferAttribute = Float32BufferAttribute;\n\texports.Uint32BufferAttribute = Uint32BufferAttribute;\n\texports.Int32BufferAttribute = Int32BufferAttribute;\n\texports.Uint16BufferAttribute = Uint16BufferAttribute;\n\texports.Int16BufferAttribute = Int16BufferAttribute;\n\texports.Uint8ClampedBufferAttribute = Uint8ClampedBufferAttribute;\n\texports.Uint8BufferAttribute = Uint8BufferAttribute;\n\texports.Int8BufferAttribute = Int8BufferAttribute;\n\texports.BufferAttribute = BufferAttribute;\n\texports.REVISION = REVISION;\n\texports.MOUSE = MOUSE;\n\texports.CullFaceNone = CullFaceNone;\n\texports.CullFaceBack = CullFaceBack;\n\texports.CullFaceFront = CullFaceFront;\n\texports.CullFaceFrontBack = CullFaceFrontBack;\n\texports.FrontFaceDirectionCW = FrontFaceDirectionCW;\n\texports.FrontFaceDirectionCCW = FrontFaceDirectionCCW;\n\texports.BasicShadowMap = BasicShadowMap;\n\texports.PCFShadowMap = PCFShadowMap;\n\texports.PCFSoftShadowMap = PCFSoftShadowMap;\n\texports.FrontSide = FrontSide;\n\texports.BackSide = BackSide;\n\texports.DoubleSide = DoubleSide;\n\texports.FlatShading = FlatShading;\n\texports.SmoothShading = SmoothShading;\n\texports.NoColors = NoColors;\n\texports.FaceColors = FaceColors;\n\texports.VertexColors = VertexColors;\n\texports.NoBlending = NoBlending;\n\texports.NormalBlending = NormalBlending;\n\texports.AdditiveBlending = AdditiveBlending;\n\texports.SubtractiveBlending = SubtractiveBlending;\n\texports.MultiplyBlending = MultiplyBlending;\n\texports.CustomBlending = CustomBlending;\n\texports.AddEquation = AddEquation;\n\texports.SubtractEquation = SubtractEquation;\n\texports.ReverseSubtractEquation = ReverseSubtractEquation;\n\texports.MinEquation = MinEquation;\n\texports.MaxEquation = MaxEquation;\n\texports.ZeroFactor = ZeroFactor;\n\texports.OneFactor = OneFactor;\n\texports.SrcColorFactor = SrcColorFactor;\n\texports.OneMinusSrcColorFactor = OneMinusSrcColorFactor;\n\texports.SrcAlphaFactor = SrcAlphaFactor;\n\texports.OneMinusSrcAlphaFactor = OneMinusSrcAlphaFactor;\n\texports.DstAlphaFactor = DstAlphaFactor;\n\texports.OneMinusDstAlphaFactor = OneMinusDstAlphaFactor;\n\texports.DstColorFactor = DstColorFactor;\n\texports.OneMinusDstColorFactor = OneMinusDstColorFactor;\n\texports.SrcAlphaSaturateFactor = SrcAlphaSaturateFactor;\n\texports.NeverDepth = NeverDepth;\n\texports.AlwaysDepth = AlwaysDepth;\n\texports.LessDepth = LessDepth;\n\texports.LessEqualDepth = LessEqualDepth;\n\texports.EqualDepth = EqualDepth;\n\texports.GreaterEqualDepth = GreaterEqualDepth;\n\texports.GreaterDepth = GreaterDepth;\n\texports.NotEqualDepth = NotEqualDepth;\n\texports.MultiplyOperation = MultiplyOperation;\n\texports.MixOperation = MixOperation;\n\texports.AddOperation = AddOperation;\n\texports.NoToneMapping = NoToneMapping;\n\texports.LinearToneMapping = LinearToneMapping;\n\texports.ReinhardToneMapping = ReinhardToneMapping;\n\texports.Uncharted2ToneMapping = Uncharted2ToneMapping;\n\texports.CineonToneMapping = CineonToneMapping;\n\texports.UVMapping = UVMapping;\n\texports.CubeReflectionMapping = CubeReflectionMapping;\n\texports.CubeRefractionMapping = CubeRefractionMapping;\n\texports.EquirectangularReflectionMapping = EquirectangularReflectionMapping;\n\texports.EquirectangularRefractionMapping = EquirectangularRefractionMapping;\n\texports.SphericalReflectionMapping = SphericalReflectionMapping;\n\texports.CubeUVReflectionMapping = CubeUVReflectionMapping;\n\texports.CubeUVRefractionMapping = CubeUVRefractionMapping;\n\texports.RepeatWrapping = RepeatWrapping;\n\texports.ClampToEdgeWrapping = ClampToEdgeWrapping;\n\texports.MirroredRepeatWrapping = MirroredRepeatWrapping;\n\texports.NearestFilter = NearestFilter;\n\texports.NearestMipMapNearestFilter = NearestMipMapNearestFilter;\n\texports.NearestMipMapLinearFilter = NearestMipMapLinearFilter;\n\texports.LinearFilter = LinearFilter;\n\texports.LinearMipMapNearestFilter = LinearMipMapNearestFilter;\n\texports.LinearMipMapLinearFilter = LinearMipMapLinearFilter;\n\texports.UnsignedByteType = UnsignedByteType;\n\texports.ByteType = ByteType;\n\texports.ShortType = ShortType;\n\texports.UnsignedShortType = UnsignedShortType;\n\texports.IntType = IntType;\n\texports.UnsignedIntType = UnsignedIntType;\n\texports.FloatType = FloatType;\n\texports.HalfFloatType = HalfFloatType;\n\texports.UnsignedShort4444Type = UnsignedShort4444Type;\n\texports.UnsignedShort5551Type = UnsignedShort5551Type;\n\texports.UnsignedShort565Type = UnsignedShort565Type;\n\texports.UnsignedInt248Type = UnsignedInt248Type;\n\texports.AlphaFormat = AlphaFormat;\n\texports.RGBFormat = RGBFormat;\n\texports.RGBAFormat = RGBAFormat;\n\texports.LuminanceFormat = LuminanceFormat;\n\texports.LuminanceAlphaFormat = LuminanceAlphaFormat;\n\texports.RGBEFormat = RGBEFormat;\n\texports.DepthFormat = DepthFormat;\n\texports.DepthStencilFormat = DepthStencilFormat;\n\texports.RGB_S3TC_DXT1_Format = RGB_S3TC_DXT1_Format;\n\texports.RGBA_S3TC_DXT1_Format = RGBA_S3TC_DXT1_Format;\n\texports.RGBA_S3TC_DXT3_Format = RGBA_S3TC_DXT3_Format;\n\texports.RGBA_S3TC_DXT5_Format = RGBA_S3TC_DXT5_Format;\n\texports.RGB_PVRTC_4BPPV1_Format = RGB_PVRTC_4BPPV1_Format;\n\texports.RGB_PVRTC_2BPPV1_Format = RGB_PVRTC_2BPPV1_Format;\n\texports.RGBA_PVRTC_4BPPV1_Format = RGBA_PVRTC_4BPPV1_Format;\n\texports.RGBA_PVRTC_2BPPV1_Format = RGBA_PVRTC_2BPPV1_Format;\n\texports.RGB_ETC1_Format = RGB_ETC1_Format;\n\texports.LoopOnce = LoopOnce;\n\texports.LoopRepeat = LoopRepeat;\n\texports.LoopPingPong = LoopPingPong;\n\texports.InterpolateDiscrete = InterpolateDiscrete;\n\texports.InterpolateLinear = InterpolateLinear;\n\texports.InterpolateSmooth = InterpolateSmooth;\n\texports.ZeroCurvatureEnding = ZeroCurvatureEnding;\n\texports.ZeroSlopeEnding = ZeroSlopeEnding;\n\texports.WrapAroundEnding = WrapAroundEnding;\n\texports.TrianglesDrawMode = TrianglesDrawMode;\n\texports.TriangleStripDrawMode = TriangleStripDrawMode;\n\texports.TriangleFanDrawMode = TriangleFanDrawMode;\n\texports.LinearEncoding = LinearEncoding;\n\texports.sRGBEncoding = sRGBEncoding;\n\texports.GammaEncoding = GammaEncoding;\n\texports.RGBEEncoding = RGBEEncoding;\n\texports.LogLuvEncoding = LogLuvEncoding;\n\texports.RGBM7Encoding = RGBM7Encoding;\n\texports.RGBM16Encoding = RGBM16Encoding;\n\texports.RGBDEncoding = RGBDEncoding;\n\texports.BasicDepthPacking = BasicDepthPacking;\n\texports.RGBADepthPacking = RGBADepthPacking;\n\texports.CubeGeometry = BoxGeometry;\n\texports.Face4 = Face4;\n\texports.LineStrip = LineStrip;\n\texports.LinePieces = LinePieces;\n\texports.MeshFaceMaterial = MeshFaceMaterial;\n\texports.MultiMaterial = MultiMaterial;\n\texports.PointCloud = PointCloud;\n\texports.Particle = Particle;\n\texports.ParticleSystem = ParticleSystem;\n\texports.PointCloudMaterial = PointCloudMaterial;\n\texports.ParticleBasicMaterial = ParticleBasicMaterial;\n\texports.ParticleSystemMaterial = ParticleSystemMaterial;\n\texports.Vertex = Vertex;\n\texports.DynamicBufferAttribute = DynamicBufferAttribute;\n\texports.Int8Attribute = Int8Attribute;\n\texports.Uint8Attribute = Uint8Attribute;\n\texports.Uint8ClampedAttribute = Uint8ClampedAttribute;\n\texports.Int16Attribute = Int16Attribute;\n\texports.Uint16Attribute = Uint16Attribute;\n\texports.Int32Attribute = Int32Attribute;\n\texports.Uint32Attribute = Uint32Attribute;\n\texports.Float32Attribute = Float32Attribute;\n\texports.Float64Attribute = Float64Attribute;\n\texports.ClosedSplineCurve3 = ClosedSplineCurve3;\n\texports.SplineCurve3 = SplineCurve3;\n\texports.Spline = Spline;\n\texports.BoundingBoxHelper = BoundingBoxHelper;\n\texports.EdgesHelper = EdgesHelper;\n\texports.WireframeHelper = WireframeHelper;\n\texports.XHRLoader = XHRLoader;\n\texports.BinaryTextureLoader = BinaryTextureLoader;\n\texports.GeometryUtils = GeometryUtils;\n\texports.ImageUtils = ImageUtils;\n\texports.Projector = Projector;\n\texports.CanvasRenderer = CanvasRenderer;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n},{}],46:[function(require,module,exports){\nmodule.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n\n},{}],47:[function(require,module,exports){\n'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n\n},{}]},{},[1]);\n"]}